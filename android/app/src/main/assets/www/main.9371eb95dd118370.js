(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{6217:(pn,Pe,U)=>{"use strict";U.d(Pe,{nm:()=>Fi});var m=U(2122);U(4650),U(259);var At=U(5861),yt=U(9681),st=U(4859),Be=U(2090),Ye=U(1877);const $=new Map,lt={activated:!1,tokenObservers:[]},Qe={initialized:!1,enabled:!1};function qe(_t){return $.get(_t)||Object.assign({},lt)}function ft(){return Qe}const pt="https://content-firebaseappcheck.googleapis.com/v1",Le="exchangeDebugToken",it={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class me{constructor(bt,Ft,Ht,fn,Sn){if(this.operation=bt,this.retryPolicy=Ft,this.getWaitDuration=Ht,this.lowerBound=fn,this.upperBound=Sn,this.pending=null,this.nextErrorWaitInterval=fn,fn>Sn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(bt){var Ft=this;return(0,At.Z)(function*(){Ft.stop();try{Ft.pending=new Be.BH,yield function te(_t){return new Promise(bt=>{setTimeout(bt,_t)})}(Ft.getNextRun(bt)),Ft.pending.resolve(),yield Ft.pending.promise,Ft.pending=new Be.BH,yield Ft.operation(),Ft.pending.resolve(),yield Ft.pending.promise,Ft.process(!0).catch(()=>{})}catch(Ht){Ft.retryPolicy(Ht)?Ft.process(!1).catch(()=>{}):Ft.stop()}})()}getNextRun(bt){if(bt)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ft=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ft}}}const re=new Be.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Dt(_t,bt){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,At.Z)(function*({url:_t,body:bt},Ft){const Ht={"Content-Type":"application/json"},fn=Ft.getImmediate({optional:!0});if(fn){const uo=yield fn.getHeartbeatsHeader();uo&&(Ht["X-Firebase-Client"]=uo)}const Sn={method:"POST",body:JSON.stringify(bt),headers:Ht};let er,mr;try{er=yield fetch(_t,Sn)}catch(uo){throw re.create("fetch-network-error",{originalErrorMessage:null==uo?void 0:uo.message})}if(200!==er.status)throw re.create("fetch-status-error",{httpStatus:er.status});try{mr=yield er.json()}catch(uo){throw re.create("fetch-parse-error",{originalErrorMessage:null==uo?void 0:uo.message})}const hi=mr.ttl.match(/^([\d.]+)(s)$/);if(!hi||!hi[2]||isNaN(Number(hi[1])))throw re.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${mr.ttl}`});const Yi=1e3*Number(hi[1]),ji=Date.now();return{token:mr.token,expireTimeMillis:ji+Yi,issuedAtTimeMillis:ji}})).apply(this,arguments)}const Gn="firebase-app-check-database",Ar=1,Nn="firebase-app-check-store";let En=null;function Jr(_t,bt){return rr.apply(this,arguments)}function rr(){return(rr=(0,At.Z)(function*(_t,bt){const Ht=(yield function sn(){return En||(En=new Promise((_t,bt)=>{try{const Ft=indexedDB.open(Gn,Ar);Ft.onsuccess=Ht=>{_t(Ht.target.result)},Ft.onerror=Ht=>{var fn;bt(re.create("storage-open",{originalErrorMessage:null===(fn=Ht.target.error)||void 0===fn?void 0:fn.message}))},Ft.onupgradeneeded=Ht=>{0===Ht.oldVersion&&Ht.target.result.createObjectStore(Nn,{keyPath:"compositeKey"})}}catch(Ft){bt(re.create("storage-open",{originalErrorMessage:null==Ft?void 0:Ft.message}))}}),En)}()).transaction(Nn,"readwrite"),Sn=Ht.objectStore(Nn).put({compositeKey:_t,value:bt});return new Promise((er,mr)=>{Sn.onsuccess=hi=>{er()},Ht.onerror=hi=>{var Yi;mr(re.create("storage-set",{originalErrorMessage:null===(Yi=hi.target.error)||void 0===Yi?void 0:Yi.message}))}})})).apply(this,arguments)}const qn=new Ye.Yd("@firebase/app-check");function _i(_t,bt){return(0,Be.hl)()?function Vr(_t,bt){return Jr(function zi(_t){return`${_t.options.appId}-${_t.name}`}(_t),bt)}(_t,bt).catch(Ft=>{qn.warn(`Failed to write token to IndexedDB. Error: ${Ft}`)}):Promise.resolve()}function Rr(){return Er.apply(this,arguments)}function Er(){return(Er=(0,At.Z)(function*(){const _t=ft();if(_t.enabled&&_t.token)return _t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const wn={error:"UNKNOWN_ERROR"};function ln(_t){return Be.US.encodeString(JSON.stringify(_t),!1)}function Un(_t){return dr.apply(this,arguments)}function dr(){return(dr=(0,At.Z)(function*(_t,bt=!1){const Ft=_t.app;!function ke(_t){if(!qe(_t).activated)throw re.create("use-before-activation",{appName:_t.name})}(Ft);const Ht=qe(Ft);let Sn,fn=Ht.token;if(fn&&!qt(fn)&&(Ht.token=void 0,fn=void 0),!fn){const hi=yield Ht.cachedTokenPromise;hi&&(qt(hi)?fn=hi:yield _i(Ft,void 0))}if(!bt&&fn&&qt(fn))return{token:fn.token};let mr,er=!1;if(function Pi(){return ft().enabled}()){Ht.exchangeTokenPromise||(Ht.exchangeTokenPromise=Dt(function mn(_t,bt){const{projectId:Ft,appId:Ht,apiKey:fn}=_t.options;return{url:`${pt}/projects/${Ft}/apps/${Ht}:${Le}?key=${fn}`,body:{debug_token:bt}}}(Ft,yield Rr()),_t.heartbeatServiceProvider).finally(()=>{Ht.exchangeTokenPromise=void 0}),er=!0);const hi=yield Ht.exchangeTokenPromise;return yield _i(Ft,hi),Ht.token=hi,{token:hi.token}}try{Ht.exchangeTokenPromise||(Ht.exchangeTokenPromise=Ht.provider.getToken().finally(()=>{Ht.exchangeTokenPromise=void 0}),er=!0),fn=yield qe(Ft).exchangeTokenPromise}catch(hi){"appCheck/throttled"===hi.code?qn.warn(hi.message):qn.error(hi),Sn=hi}return fn?Sn?mr=qt(fn)?{token:fn.token,internalError:Sn}:$t(Sn):(mr={token:fn.token},Ht.token=fn,yield _i(Ft,fn)):mr=$t(Sn),er&&function ht(_t,bt){const Ft=qe(_t).tokenObservers;for(const Ht of Ft)try{"EXTERNAL"===Ht.type&&null!=bt.error?Ht.error(bt.error):Ht.next(bt)}catch(fn){}}(Ft,mr),mr})).apply(this,arguments)}function hr(_t,bt){const Ft=qe(_t),Ht=Ft.tokenObservers.filter(fn=>fn.next!==bt);0===Ht.length&&Ft.tokenRefresher&&Ft.tokenRefresher.isRunning()&&Ft.tokenRefresher.stop(),Ft.tokenObservers=Ht}function He(_t){const{app:bt}=_t,Ft=qe(bt);let Ht=Ft.tokenRefresher;Ht||(Ht=function ot(_t){const{app:bt}=_t;return new me((0,At.Z)(function*(){let Ht;if(Ht=qe(bt).token?yield Un(_t,!0):yield Un(_t),Ht.error)throw Ht.error;if(Ht.internalError)throw Ht.internalError}),()=>!0,()=>{const Ft=qe(bt);if(Ft.token){let Ht=Ft.token.issuedAtTimeMillis+.5*(Ft.token.expireTimeMillis-Ft.token.issuedAtTimeMillis)+3e5;return Ht=Math.min(Ht,Ft.token.expireTimeMillis-3e5),Math.max(0,Ht-Date.now())}return 0},it.RETRIAL_MIN_WAIT,it.RETRIAL_MAX_WAIT)}(_t),Ft.tokenRefresher=Ht),!Ht.isRunning()&&Ft.isTokenAutoRefreshEnabled&&Ht.start()}function qt(_t){return _t.expireTimeMillis-Date.now()>0}function $t(_t){return{token:ln(wn),error:_t}}class Wn{constructor(bt,Ft){this.app=bt,this.heartbeatServiceProvider=Ft}_delete(){const{tokenObservers:bt}=qe(this.app);for(const Ft of bt)hr(this.app,Ft.next);return Promise.resolve()}}const gr="app-check-internal";!function Gr(){(0,yt._registerComponent)(new st.wA("app-check",_t=>function Cr(_t,bt){return new Wn(_t,bt)}(_t.getProvider("app").getImmediate(),_t.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((_t,bt,Ft)=>{_t.getProvider(gr).initialize()})),(0,yt._registerComponent)(new st.wA(gr,_t=>function Or(_t){return{getToken:bt=>Un(_t,bt),addTokenListener:bt=>function jn(_t,bt,Ft,Ht){const{app:fn}=_t,Sn=qe(fn);if(Sn.tokenObservers=[...Sn.tokenObservers,{next:Ft,error:Ht,type:bt}],Sn.token&&qt(Sn.token)){const mr=Sn.token;Promise.resolve().then(()=>{Ft({token:mr.token}),He(_t)}).catch(()=>{})}Sn.cachedTokenPromise.then(()=>He(_t))}(_t,"INTERNAL",bt),removeTokenListener:bt=>hr(_t.app,bt)}}(_t.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,yt.registerVersion)("@firebase/app-check","0.6.3")}();class Fi{constructor(){return(0,m.vb)("app-check")}}typeof window<"u"&&window},1205:(pn,Pe,U)=>{"use strict";U.d(Pe,{zQ:()=>pt,ww:()=>mt,rT:()=>Qe,f7:()=>ut,L6:()=>$,_Q:()=>lt,lh:()=>qe,Qv:()=>Ye,nw:()=>ft});var m=U(4650),J=U(7579),H=U(9646),he=U(9751),le=U(8996),we=U(6451),ye=U(5363),be=U(3900),$e=U(4004),ge=U(6063);class De extends J.x{constructor(Le=1/0,it=1/0,Ze=ge.l){super(),this._bufferSize=Le,this._windowTime=it,this._timestampProvider=Ze,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=it===1/0,this._bufferSize=Math.max(1,Le),this._windowTime=Math.max(1,it)}next(Le){const{isStopped:it,_buffer:Ze,_infiniteTimeWindow:me,_timestampProvider:te,_windowTime:q}=this;it||(Ze.push(Le),!me&&Ze.push(te.now()+q)),this._trimBuffer(),super.next(Le)}_subscribe(Le){this._throwIfClosed(),this._trimBuffer();const it=this._innerSubscribe(Le),{_infiniteTimeWindow:Ze,_buffer:me}=this,te=me.slice();for(let q=0;q<te.length&&!Le.closed;q+=Ze?1:2)Le.next(te[q]);return this._checkFinalizedStatuses(Le),it}_trimBuffer(){const{_bufferSize:Le,_timestampProvider:it,_buffer:Ze,_infiniteTimeWindow:me}=this,te=(me?1:2)*Le;if(Le<1/0&&te<Ze.length&&Ze.splice(0,Ze.length-te),!me){const q=it.now();let re=0;for(let fe=1;fe<Ze.length&&Ze[fe]<=q;fe+=2)re=fe;re&&Ze.splice(0,re+1)}}}var xe=U(3099);function Ne(gt,Le,it){let Ze,me=!1;return gt&&"object"==typeof gt?({bufferSize:Ze=1/0,windowTime:Le=1/0,refCount:me=!1,scheduler:it}=gt):Ze=null!=gt?gt:1/0,(0,xe.B)({connector:()=>new De(Ze,Le,it),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:me})}var Xe=U(590),Ke=U(576);function Lt(gt,Le){return(0,Ke.m)(Le)?(0,be.w)(()=>gt,Le):(0,be.w)(()=>gt)}var We=U(9468),Fe=U(9300),Ce=U(2122),ct=U(2011),At=U(6895),yt=U(6217),st=U(9260);const Ye=new m.OlP("angularfire2.auth.use-emulator"),$=new m.OlP("angularfire2.auth.settings"),lt=new m.OlP("angularfire2.auth.tenant-id"),Qe=new m.OlP("angularfire2.auth.langugage-code"),qe=new m.OlP("angularfire2.auth.use-device-language"),ut=new m.OlP("angularfire.auth.persistence"),ft=(gt,Le,it,Ze,me,te,q,re)=>(0,ct.cc)(`${gt.name}.auth`,"AngularFireAuth",gt.name,()=>{const fe=Le.runOutsideAngular(()=>gt.auth());if(it&&fe.useEmulator(...it),Ze&&(fe.tenantId=Ze),fe.languageCode=me,te&&fe.useDeviceLanguage(),q)for(const[ke,rt]of Object.entries(q))fe.settings[ke]=rt;return re&&fe.setPersistence(re),fe},[it,Ze,me,te,q,re]);let pt=(()=>{class gt{constructor(it,Ze,me,te,q,re,fe,ke,rt,Qt,Dt,Yt){const yn=new J.x,Mn=(0,H.of)(void 0).pipe((0,ye.Q)(q.outsideAngular),(0,be.w)(()=>te.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,407)))),(0,$e.U)(()=>(0,ct.on)(it,te,Ze)),(0,$e.U)(mn=>ft(mn,te,re,ke,rt,Qt,fe,Dt)),Ne({bufferSize:1,refCount:!1}));if((0,At.PM)(me))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,H.of)(null);else{Mn.pipe((0,Xe.P)()).subscribe();const Gn=Mn.pipe((0,be.w)(Dn=>Dn.getRedirectResult().then(En=>En,()=>null)),Ce.iC,Ne({bufferSize:1,refCount:!1})),Ar=Mn.pipe((0,be.w)(Dn=>new he.y(En=>({unsubscribe:te.runOutsideAngular(()=>Dn.onAuthStateChanged(sn=>En.next(sn),sn=>En.error(sn),()=>En.complete()))})))),Nn=Mn.pipe((0,be.w)(Dn=>new he.y(En=>({unsubscribe:te.runOutsideAngular(()=>Dn.onIdTokenChanged(sn=>En.next(sn),sn=>En.error(sn),()=>En.complete()))}))));this.authState=Gn.pipe(Lt(Ar),(0,We.R)(q.outsideAngular),(0,ye.Q)(q.insideAngular)),this.user=Gn.pipe(Lt(Nn),(0,We.R)(q.outsideAngular),(0,ye.Q)(q.insideAngular)),this.idToken=this.user.pipe((0,be.w)(Dn=>Dn?(0,le.D)(Dn.getIdToken()):(0,H.of)(null))),this.idTokenResult=this.user.pipe((0,be.w)(Dn=>Dn?(0,le.D)(Dn.getIdTokenResult()):(0,H.of)(null))),this.credential=(0,we.T)(Gn,yn,this.authState.pipe((0,Fe.h)(Dn=>!Dn))).pipe((0,$e.U)(Dn=>null!=Dn&&Dn.user?Dn:null),(0,We.R)(q.outsideAngular),(0,ye.Q)(q.insideAngular))}return(0,ct.pX)(this,Mn,te,{spy:{apply:(mn,Gn,Ar)=>{(mn.startsWith("signIn")||mn.startsWith("createUser"))&&Ar.then(Nn=>yn.next(Nn))}}})}}return gt.\u0275fac=function(it){return new(it||gt)(m.LFG(ct.Dh),m.LFG(ct.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Ce.HU),m.LFG(Ye,8),m.LFG($,8),m.LFG(lt,8),m.LFG(Qe,8),m.LFG(qe,8),m.LFG(ut,8),m.LFG(yt.nm,8))},gt.\u0275prov=m.Yz7({token:gt,factory:gt.\u0275fac,providedIn:"any"}),gt})(),mt=(()=>{class gt{constructor(){st.Z.registerVersion("angularfire",Ce.q4.full,"auth-compat")}}return gt.\u0275fac=function(it){return new(it||gt)},gt.\u0275mod=m.oAB({type:gt}),gt.\u0275inj=m.cJS({providers:[pt]}),gt})()},5197:(pn,Pe,U)=>{"use strict";U.d(Pe,{KQ:()=>h,JS:()=>g});var m=U(4650),J=U(4986),H=U(9751),he=U(9646),le=U(6451),we=U(4004),ye=U(3099),be=U(3900),$e=U(5026),ge=U(1884),De=U(4482),xe=U(5403),Ne=U(8421),Xe=U(4671),Ke=U(5032),Lt=U(7669),Ce=U(2122),ct=U(2011),yt=(U(407),U(3942)),st=U(4859),Be=U(5861),Ye=U(9681),$=U(2090),lt=U(1877);const Qe="@firebase/database";let ut="";function ft(a){ut=a}class pt{constructor(o){this.domStorage_=o,this.prefix_="firebase:"}set(o,l){null==l?this.domStorage_.removeItem(this.prefixedName_(o)):this.domStorage_.setItem(this.prefixedName_(o),(0,$.Wl)(l))}get(o){const l=this.domStorage_.getItem(this.prefixedName_(o));return null==l?null:(0,$.cI)(l)}remove(o){this.domStorage_.removeItem(this.prefixedName_(o))}prefixedName_(o){return this.prefix_+o}toString(){return this.domStorage_.toString()}}class mt{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(o,l){null==l?delete this.cache_[o]:this.cache_[o]=l}get(o){return(0,$.r3)(this.cache_,o)?this.cache_[o]:null}remove(o){delete this.cache_[o]}}const gt=function(a){try{if(typeof window<"u"&&typeof window[a]<"u"){const o=window[a];return o.setItem("firebase:sentinel","cache"),o.removeItem("firebase:sentinel"),new pt(o)}}catch(o){}return new mt},Le=gt("localStorage"),it=gt("sessionStorage"),Ze=new lt.Yd("@firebase/database"),me=function(){let a=1;return function(){return a++}}(),te=function(a){const o=(0,$.dS)(a),l=new $.gQ;l.update(o);const v=l.digest();return $.US.encodeByteArray(v)},q=function(...a){let o="";for(let l=0;l<a.length;l++){const v=a[l];Array.isArray(v)||v&&"object"==typeof v&&"number"==typeof v.length?o+=q.apply(null,v):o+="object"==typeof v?(0,$.Wl)(v):v,o+=" "}return o};let re=null,fe=!0;const ke=function(a,o){(0,$.hu)(!o||!0===a||!1===a,"Can't turn on custom loggers persistently."),!0===a?(Ze.logLevel=lt.in.VERBOSE,re=Ze.log.bind(Ze),o&&it.set("logging_enabled",!0)):"function"==typeof a?re=a:(re=null,it.remove("logging_enabled"))},rt=function(...a){if(!0===fe&&(fe=!1,null===re&&!0===it.get("logging_enabled")&&ke(!0)),re){const o=q.apply(null,a);re(o)}},Qt=function(a){return function(...o){rt(a,...o)}},Dt=function(...a){const o="FIREBASE INTERNAL ERROR: "+q(...a);Ze.error(o)},Yt=function(...a){const o=`FIREBASE FATAL ERROR: ${q(...a)}`;throw Ze.error(o),new Error(o)},yn=function(...a){const o="FIREBASE WARNING: "+q(...a);Ze.warn(o)},mn=function(a){return"number"==typeof a&&(a!=a||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)},Ar="[MIN_NAME]",Nn="[MAX_NAME]",Dn=function(a,o){if(a===o)return 0;if(a===Ar||o===Nn)return-1;if(o===Ar||a===Nn)return 1;{const l=Wr(a),v=Wr(o);return null!==l?null!==v?l-v==0?a.length-o.length:l-v:-1:null!==v?1:a<o?-1:1}},En=function(a,o){return a===o?0:a<o?-1:1},sn=function(a,o){if(o&&a in o)return o[a];throw new Error("Missing required key ("+a+") in object: "+(0,$.Wl)(o))},Ir=function(a){if("object"!=typeof a||null===a)return(0,$.Wl)(a);const o=[];for(const v in a)o.push(v);o.sort();let l="{";for(let v=0;v<o.length;v++)0!==v&&(l+=","),l+=(0,$.Wl)(o[v]),l+=":",l+=Ir(a[o[v]]);return l+="}",l},Vr=function(a,o){const l=a.length;if(l<=o)return[a];const v=[];for(let E=0;E<l;E+=o)v.push(a.substring(E,E+o>l?l:E+o));return v};function br(a,o){for(const l in a)a.hasOwnProperty(l)&&o(l,a[l])}const Kt=function(a){(0,$.hu)(!mn(a),"Invalid JSON number");const v=1023;let E,A,R,k,Z;0===a?(A=0,R=0,E=1/a==-1/0?1:0):(E=a<0,(a=Math.abs(a))>=Math.pow(2,1-v)?(k=Math.min(Math.floor(Math.log(a)/Math.LN2),v),A=k+v,R=Math.round(a*Math.pow(2,52-k)-Math.pow(2,52))):(A=0,R=Math.round(a/Math.pow(2,-1074))));const se=[];for(Z=52;Z;Z-=1)se.push(R%2?1:0),R=Math.floor(R/2);for(Z=11;Z;Z-=1)se.push(A%2?1:0),A=Math.floor(A/2);se.push(E?1:0),se.reverse();const Me=se.join("");let Ue="";for(Z=0;Z<64;Z+=8){let ze=parseInt(Me.substr(Z,8),2).toString(16);1===ze.length&&(ze="0"+ze),Ue+=ze}return Ue.toLowerCase()},cr=new RegExp("^-?(0*)\\d{1,10}$"),Wr=function(a){if(cr.test(a)){const o=Number(a);if(o>=-2147483648&&o<=2147483647)return o}return null},cn=function(a){try{a()}catch(o){setTimeout(()=>{throw yn("Exception was thrown by user callback.",o.stack||""),o},Math.floor(0))}},_i=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Wi=function(a,o){const l=setTimeout(a,o);return"number"==typeof l&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(l):"object"==typeof l&&l.unref&&l.unref(),l};class jr{constructor(o,l){this.appName_=o,this.appCheckProvider=l,this.appCheck=null==l?void 0:l.getImmediate({optional:!0}),this.appCheck||null==l||l.get().then(v=>this.appCheck=v)}getToken(o){return this.appCheck?this.appCheck.getToken(o):new Promise((l,v)=>{setTimeout(()=>{this.appCheck?this.getToken(o).then(l,v):l(null)},0)})}addTokenChangeListener(o){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(v=>v.addTokenListener(o))}notifyForInvalidToken(){yn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Pi{constructor(o,l,v){this.appName_=o,this.firebaseOptions_=l,this.authProvider_=v,this.auth_=null,this.auth_=v.getImmediate({optional:!0}),this.auth_||v.onInit(E=>this.auth_=E)}getToken(o){return this.auth_?this.auth_.getToken(o).catch(l=>l&&"auth/token-not-initialized"===l.code?(rt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,v)=>{setTimeout(()=>{this.auth_?this.getToken(o).then(l,v):l(null)},0)})}addTokenChangeListener(o){this.auth_?this.auth_.addAuthTokenListener(o):this.authProvider_.get().then(l=>l.addAuthTokenListener(o))}removeTokenChangeListener(o){this.authProvider_.get().then(l=>l.removeAuthTokenListener(o))}notifyForInvalidToken(){let o='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';o+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',yn(o)}}let Rr=(()=>{class a{constructor(l){this.accessToken=l}getToken(l){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(l){l(this.accessToken)}removeTokenChangeListener(l){}notifyForInvalidToken(){}}return a.OWNER="owner",a})();const dr=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ot="websocket",ht="long_polling";class qt{constructor(o,l,v,E,A=!1,R="",k=!1,Z=!1){this.secure=l,this.namespace=v,this.webSocketOnly=E,this.nodeAdmin=A,this.persistenceKey=R,this.includeNamespaceInQueryParams=k,this.isUsingEmulator=Z,this._host=o.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Le.get("host:"+o)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(o){o!==this.internalHost&&(this.internalHost=o,this.isCacheableHost()&&Le.set("host:"+this._host,this.internalHost))}toString(){let o=this.toURLString();return this.persistenceKey&&(o+="<"+this.persistenceKey+">"),o}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Wn(a,o,l){let v;if((0,$.hu)("string"==typeof o,"typeof type must == string"),(0,$.hu)("object"==typeof l,"typeof params must == object"),o===ot)v=(a.secure?"wss://":"ws://")+a.internalHost+"/.ws?";else{if(o!==ht)throw new Error("Unknown connection type: "+o);v=(a.secure?"https://":"http://")+a.internalHost+"/.lp?"}(function $t(a){return a.host!==a.internalHost||a.isCustomHost()||a.includeNamespaceInQueryParams})(a)&&(l.ns=a.namespace);const E=[];return br(l,(A,R)=>{E.push(A+"="+R)}),v+E.join("&")}class Cr{constructor(){this.counters_={}}incrementCounter(o,l=1){(0,$.r3)(this.counters_,o)||(this.counters_[o]=0),this.counters_[o]+=l}get(){return(0,$.p$)(this.counters_)}}const Or={},Zr={};function fr(a){const o=a.toString();return Or[o]||(Or[o]=new Cr),Or[o]}class St{constructor(o){this.onMessage_=o,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(o,l){this.closeAfterResponse=o,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(o,l){for(this.pendingResponses[o]=l;this.pendingResponses[this.currentResponseNum];){const v=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let E=0;E<v.length;++E)v[E]&&cn(()=>{this.onMessage_(v[E])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Tr{constructor(o,l,v,E,A,R,k){this.connId=o,this.repoInfo=l,this.applicationId=v,this.appCheckToken=E,this.authToken=A,this.transportSessionId=R,this.lastSessionId=k,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Qt(o),this.stats_=fr(l),this.urlFn=Z=>(this.appCheckToken&&(Z.ac=this.appCheckToken),Wn(l,ht,Z))}open(o,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new St(o),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(a){if((0,$.Yr)()||"complete"===document.readyState)a();else{let o=!1;const l=function(){document.body?o||(o=!0,a()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new oi((...A)=>{const[R,k,Z,se,Me]=A;if(this.incrementIncomingBytes_(A),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===R)this.id=k,this.password=Z;else{if("close"!==R)throw new Error("Unrecognized command received: "+R);k?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(k,()=>{this.onClosed_()})):this.onClosed_()}},(...A)=>{const[R,k]=A;this.incrementIncomingBytes_(A),this.myPacketOrderer.handleResponse(R,k)},()=>{this.onClosed_()},this.urlFn);const v={start:"t"};v.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(v.cb=this.scriptTagHolder.uniqueCallbackIdentifier),v.v="5",this.transportSessionId&&(v.s=this.transportSessionId),this.lastSessionId&&(v.ls=this.lastSessionId),this.applicationId&&(v.p=this.applicationId),this.appCheckToken&&(v.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&dr.test(location.hostname)&&(v.r="f");const E=this.urlFn(v);this.log_("Connecting via long-poll to "+E),this.scriptTagHolder.addTag(E,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Tr.forceAllow_=!0}static forceDisallow(){Tr.forceDisallow_=!0}static isAvailable(){return!((0,$.Yr)()||!Tr.forceAllow_&&(Tr.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(o){const l=(0,$.Wl)(o);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const v=(0,$.h$)(l),E=Vr(v,1840);for(let A=0;A<E.length;A++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,E.length,E[A]),this.curSegmentNum++}addDisconnectPingFrame(o,l){if((0,$.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const v={dframe:"t"};v.id=o,v.pw=l,this.myDisconnFrame.src=this.urlFn(v),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(o){const l=(0,$.Wl)(o).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class oi{constructor(o,l,v,E){if(this.onDisconnect=v,this.urlFn=E,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,$.Yr)())this.commandCB=o,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=me(),window["pLPCommand"+this.uniqueCallbackIdentifier]=o,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=oi.createIFrame_();let A="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(A='<script>document.domain="'+document.domain+'";<\/script>');const R="<html><body>"+A+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(R),this.myIFrame.doc.close()}catch(k){rt("frame writing exception"),k.stack&&rt(k.stack),rt(k)}}}static createIFrame_(){const o=document.createElement("iframe");if(o.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(o);try{o.contentWindow.document||rt("No IE domain setting required")}catch(l){const v=document.domain;o.src="javascript:void((function(){document.open();document.domain='"+v+"';document.close();})())"}return o.contentDocument?o.doc=o.contentDocument:o.contentWindow?o.doc=o.contentWindow.document:o.document&&(o.doc=o.document),o}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const o=this.onDisconnect;o&&(this.onDisconnect=null,o())}startLongPoll(o,l){for(this.myID=o,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const o={};o.id=this.myID,o.pw=this.myPW,o.ser=this.currentSerial;let l=this.urlFn(o),v="",E=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+v.length<=1870;){const R=this.pendingSegs.shift();v=v+"&seg"+E+"="+R.seg+"&ts"+E+"="+R.ts+"&d"+E+"="+R.d,E++}return l+=v,this.addLongPollTag_(l,this.currentSerial),!0}return!1}enqueueSegment(o,l,v){this.pendingSegs.push({seg:o,ts:l,d:v}),this.alive&&this.newRequest_()}addLongPollTag_(o,l){this.outstandingRequests.add(l);const v=()=>{this.outstandingRequests.delete(l),this.newRequest_()},E=setTimeout(v,Math.floor(25e3));this.addTag(o,()=>{clearTimeout(E),v()})}addTag(o,l){(0,$.Yr)()?this.doNodeLongPoll(o,l):setTimeout(()=>{try{if(!this.sendNewPolls)return;const v=this.myIFrame.doc.createElement("script");v.type="text/javascript",v.async=!0,v.src=o,v.onload=v.onreadystatechange=function(){const E=v.readyState;(!E||"loaded"===E||"complete"===E)&&(v.onload=v.onreadystatechange=null,v.parentNode&&v.parentNode.removeChild(v),l())},v.onerror=()=>{rt("Long-poll script failed to load: "+o),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(v)}catch(v){}},Math.floor(1))}}let gr=null;typeof MozWebSocket<"u"?gr=MozWebSocket:typeof WebSocket<"u"&&(gr=WebSocket);let Gr=(()=>{class a{constructor(l,v,E,A,R,k,Z){this.connId=l,this.applicationId=E,this.appCheckToken=A,this.authToken=R,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Qt(this.connId),this.stats_=fr(v),this.connURL=a.connectionURL_(v,k,Z,A,E),this.nodeAdmin=v.nodeAdmin}static connectionURL_(l,v,E,A,R){const k={v:"5"};return!(0,$.Yr)()&&typeof location<"u"&&location.hostname&&dr.test(location.hostname)&&(k.r="f"),v&&(k.s=v),E&&(k.ls=E),A&&(k.ac=A),R&&(k.p=R),Wn(l,ot,k)}open(l,v){this.onDisconnect=v,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Le.set("previous_websocket_failure",!0);try{let E;if((0,$.Yr)()){E={headers:{"User-Agent":`Firebase/5/${ut}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(E.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(E.headers["X-Firebase-AppCheck"]=this.appCheckToken);const R=process.env,k=0===this.connURL.indexOf("wss://")?R.HTTPS_PROXY||R.https_proxy:R.HTTP_PROXY||R.http_proxy;k&&(E.proxy={origin:k})}this.mySock=new gr(this.connURL,[],E)}catch(E){this.log_("Error instantiating WebSocket.");const A=E.message||E.data;return A&&this.log_(A),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=E=>{this.handleIncomingFrame(E)},this.mySock.onerror=E=>{this.log_("WebSocket error.  Closing connection.");const A=E.message||E.data;A&&this.log_(A),this.onClosed_()}}start(){}static forceDisallow(){a.forceDisallow_=!0}static isAvailable(){let l=!1;if(typeof navigator<"u"&&navigator.userAgent){const E=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);E&&E.length>1&&parseFloat(E[1])<4.4&&(l=!0)}return!l&&null!==gr&&!a.forceDisallow_}static previouslyFailed(){return Le.isInMemoryStorage||!0===Le.get("previous_websocket_failure")}markConnectionHealthy(){Le.remove("previous_websocket_failure")}appendFrame_(l){if(this.frames.push(l),this.frames.length===this.totalFrames){const v=this.frames.join("");this.frames=null;const E=(0,$.cI)(v);this.onMessage(E)}}handleNewFrameCount_(l){this.totalFrames=l,this.frames=[]}extractFrameCount_(l){if((0,$.hu)(null===this.frames,"We already have a frame buffer"),l.length<=6){const v=Number(l);if(!isNaN(v))return this.handleNewFrameCount_(v),null}return this.handleNewFrameCount_(1),l}handleIncomingFrame(l){if(null===this.mySock)return;const v=l.data;if(this.bytesReceived+=v.length,this.stats_.incrementCounter("bytes_received",v.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(v);else{const E=this.extractFrameCount_(v);null!==E&&this.appendFrame_(E)}}send(l){this.resetKeepAlive();const v=(0,$.Wl)(l);this.bytesSent+=v.length,this.stats_.incrementCounter("bytes_sent",v.length);const E=Vr(v,16384);E.length>1&&this.sendString_(String(E.length));for(let A=0;A<E.length;A++)this.sendString_(E[A])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(l){try{this.mySock.send(l)}catch(v){this.log_("Exception thrown from WebSocket.send():",v.message||v.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return a.responsesRequiredToBeHealthy=2,a.healthyTimeout=3e4,a})(),Vi=(()=>{class a{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[Tr,Gr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(l){const v=Gr&&Gr.isAvailable();let E=v&&!Gr.previouslyFailed();if(l.webSocketOnly&&(v||yn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),E=!0),E)this.transports_=[Gr];else{const A=this.transports_=[];for(const R of a.ALL_TRANSPORTS)R&&R.isAvailable()&&A.push(R);a.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return a.globalTransportInitialized_=!1,a})();class Jn{constructor(o,l,v,E,A,R,k,Z,se,Me){this.id=o,this.repoInfo_=l,this.applicationId_=v,this.appCheckToken_=E,this.authToken_=A,this.onMessage_=R,this.onReady_=k,this.onDisconnect_=Z,this.onKill_=se,this.lastSessionId=Me,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Qt("c:"+this.id+":"),this.transportManager_=new Vi(l),this.log_("Connection created"),this.start_()}start_(){const o=this.transportManager_.initialTransport();this.conn_=new o(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=o.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),v=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,v)},Math.floor(0));const E=o.healthyTimeout||0;E>0&&(this.healthyTimeout_=Wi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(E)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(o){return l=>{o===this.conn_?this.onConnectionLost_(l):o===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(o){return l=>{2!==this.state_&&(o===this.rx_?this.onPrimaryMessageReceived_(l):o===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(o){this.sendData_({t:"d",d:o})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(o){if("t"in o){const l=o.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(o){const l=sn("t",o),v=sn("d",o);if("c"===l)this.onSecondaryControl_(v);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(v)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(o){const l=sn("t",o),v=sn("d",o);"c"===l?this.onControl_(v):"d"===l&&this.onDataMessage_(v)}onDataMessage_(o){this.onPrimaryResponse_(),this.onMessage_(o)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(o){const l=sn("t",o);if("d"in o){const v=o.d;if("h"===l){const E=Object.assign({},v);this.repoInfo_.isUsingEmulator&&(E.h=this.repoInfo_.host),this.onHandshake_(E)}else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let E=0;E<this.pendingDataMessages.length;++E)this.onDataMessage_(this.pendingDataMessages[E]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(v):"r"===l?this.onReset_(v):"e"===l?Dt("Server Error: "+v):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Dt("Unknown control packet command: "+l)}}onHandshake_(o){const l=o.ts,v=o.v,E=o.h;this.sessionId=o.s,this.repoInfo_.host=E,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==v&&yn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const o=this.transportManager_.upgradeTransport();o&&this.startUpgrade_(o)}startUpgrade_(o){this.secondaryConn_=new o(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=o.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),v=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,v),Wi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(o){this.log_("Reset packet received.  New host: "+o),this.repoInfo_.host=o,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(o,l){this.log_("Realtime connection established."),this.conn_=o,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const o=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===o||this.rx_===o)&&this.close()}onConnectionLost_(o){this.conn_=null,o||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Le.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(o){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(o),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(o){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(o)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ci{put(o,l,v,E){}merge(o,l,v,E){}refreshAuthToken(o){}refreshAppCheckToken(o){}onDisconnectPut(o,l,v){}onDisconnectMerge(o,l,v){}onDisconnectCancel(o,l){}reportStats(o){}}class Kr{constructor(o){this.allowedEvents_=o,this.listeners_={},(0,$.hu)(Array.isArray(o)&&o.length>0,"Requires a non-empty array")}trigger(o,...l){if(Array.isArray(this.listeners_[o])){const v=[...this.listeners_[o]];for(let E=0;E<v.length;E++)v[E].callback.apply(v[E].context,l)}}on(o,l,v){this.validateEventType_(o),this.listeners_[o]=this.listeners_[o]||[],this.listeners_[o].push({callback:l,context:v});const E=this.getInitialEvent(o);E&&l.apply(v,E)}off(o,l,v){this.validateEventType_(o);const E=this.listeners_[o]||[];for(let A=0;A<E.length;A++)if(E[A].callback===l&&(!v||v===E[A].context))return void E.splice(A,1)}validateEventType_(o){(0,$.hu)(this.allowedEvents_.find(l=>l===o),"Unknown event: "+o)}}class _t extends Kr{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,$.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new _t}getInitialEvent(o){return(0,$.hu)("online"===o,"Unknown event type: "+o),[this.online_]}currentlyOnline(){return this.online_}}const bt=32,Ft=768;class Ht{constructor(o,l){if(void 0===l){this.pieces_=o.split("/");let v=0;for(let E=0;E<this.pieces_.length;E++)this.pieces_[E].length>0&&(this.pieces_[v]=this.pieces_[E],v++);this.pieces_.length=v,this.pieceNum_=0}else this.pieces_=o,this.pieceNum_=l}toString(){let o="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(o+="/"+this.pieces_[l]);return o||"/"}}function fn(){return new Ht("")}function Sn(a){return a.pieceNum_>=a.pieces_.length?null:a.pieces_[a.pieceNum_]}function er(a){return a.pieces_.length-a.pieceNum_}function mr(a){let o=a.pieceNum_;return o<a.pieces_.length&&o++,new Ht(a.pieces_,o)}function hi(a){return a.pieceNum_<a.pieces_.length?a.pieces_[a.pieces_.length-1]:null}function ji(a,o=0){return a.pieces_.slice(a.pieceNum_+o)}function uo(a){if(a.pieceNum_>=a.pieces_.length)return null;const o=[];for(let l=a.pieceNum_;l<a.pieces_.length-1;l++)o.push(a.pieces_[l]);return new Ht(o,0)}function Xr(a,o){const l=[];for(let v=a.pieceNum_;v<a.pieces_.length;v++)l.push(a.pieces_[v]);if(o instanceof Ht)for(let v=o.pieceNum_;v<o.pieces_.length;v++)l.push(o.pieces_[v]);else{const v=o.split("/");for(let E=0;E<v.length;E++)v[E].length>0&&l.push(v[E])}return new Ht(l,0)}function Qr(a){return a.pieceNum_>=a.pieces_.length}function Si(a,o){const l=Sn(a),v=Sn(o);if(null===l)return o;if(l===v)return Si(mr(a),mr(o));throw new Error("INTERNAL ERROR: innerPath ("+o+") is not within outerPath ("+a+")")}function Os(a,o){const l=ji(a,0),v=ji(o,0);for(let E=0;E<l.length&&E<v.length;E++){const A=Dn(l[E],v[E]);if(0!==A)return A}return l.length===v.length?0:l.length<v.length?-1:1}function zs(a,o){if(er(a)!==er(o))return!1;for(let l=a.pieceNum_,v=o.pieceNum_;l<=a.pieces_.length;l++,v++)if(a.pieces_[l]!==o.pieces_[v])return!1;return!0}function xo(a,o){let l=a.pieceNum_,v=o.pieceNum_;if(er(a)>er(o))return!1;for(;l<a.pieces_.length;){if(a.pieces_[l]!==o.pieces_[v])return!1;++l,++v}return!0}class ns{constructor(o,l){this.errorPrefix_=l,this.parts_=ji(o,0),this.byteLength_=Math.max(1,this.parts_.length);for(let v=0;v<this.parts_.length;v++)this.byteLength_+=(0,$.ug)(this.parts_[v]);Zo(this)}}function Zo(a){if(a.byteLength_>Ft)throw new Error(a.errorPrefix_+"has a key path longer than "+Ft+" bytes ("+a.byteLength_+").");if(a.parts_.length>bt)throw new Error(a.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+bt+") or object contains a cycle "+fs(a))}function fs(a){return 0===a.parts_.length?"":"in property '"+a.parts_.join(".")+"'"}class ps extends Kr{constructor(){let o,l;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(l="visibilitychange",o="hidden"):typeof document.mozHidden<"u"?(l="mozvisibilitychange",o="mozHidden"):typeof document.msHidden<"u"?(l="msvisibilitychange",o="msHidden"):typeof document.webkitHidden<"u"&&(l="webkitvisibilitychange",o="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const v=!document[o];v!==this.visible_&&(this.visible_=v,this.trigger("visible",v))},!1)}static getInstance(){return new ps}getInitialEvent(o){return(0,$.hu)("visible"===o,"Unknown event type: "+o),[this.visible_]}}const Uo=1e3;let rs,Mi=(()=>{class a extends ci{constructor(l,v,E,A,R,k,Z,se){if(super(),this.repoInfo_=l,this.applicationId_=v,this.onDataUpdate_=E,this.onConnectStatus_=A,this.onServerInfoUpdate_=R,this.authTokenProvider_=k,this.appCheckTokenProvider_=Z,this.authOverride_=se,this.id=a.nextPersistentConnectionId_++,this.log_=Qt("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Uo,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,se&&!(0,$.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ps.getInstance().on("visible",this.onVisible_,this),-1===l.host.indexOf("fblocal")&&_t.getInstance().on("online",this.onOnline_,this)}sendRequest(l,v,E){const A=++this.requestNumber_,R={r:A,a:l,b:v};this.log_((0,$.Wl)(R)),(0,$.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(R),E&&(this.requestCBHash_[A]=E)}get(l){this.initConnection_();const v=new $.BH,A={action:"g",request:{p:l._path.toString(),q:l._queryObject},onComplete:k=>{const Z=k.d;"ok"===k.s?v.resolve(Z):v.reject(Z)}};return this.outstandingGets_.push(A),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),v.promise}listen(l,v,E,A){this.initConnection_();const R=l._queryIdentifier,k=l._path.toString();this.log_("Listen called for "+k+" "+R),this.listens.has(k)||this.listens.set(k,new Map),(0,$.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,$.hu)(!this.listens.get(k).has(R),"listen() called twice for same path/queryId.");const Z={onComplete:A,hashFn:v,query:l,tag:E};this.listens.get(k).set(R,Z),this.connected_&&this.sendListen_(Z)}sendGet_(l){const v=this.outstandingGets_[l];this.sendRequest("g",v.request,E=>{delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),v.onComplete&&v.onComplete(E)})}sendListen_(l){const v=l.query,E=v._path.toString(),A=v._queryIdentifier;this.log_("Listen on "+E+" for "+A);const R={p:E};l.tag&&(R.q=v._queryObject,R.t=l.tag),R.h=l.hashFn(),this.sendRequest("q",R,Z=>{const se=Z.d,Me=Z.s;a.warnOnListenWarnings_(se,v),(this.listens.get(E)&&this.listens.get(E).get(A))===l&&(this.log_("listen response",Z),"ok"!==Me&&this.removeListen_(E,A),l.onComplete&&l.onComplete(Me,se))})}static warnOnListenWarnings_(l,v){if(l&&"object"==typeof l&&(0,$.r3)(l,"w")){const E=(0,$.DV)(l,"w");if(Array.isArray(E)&&~E.indexOf("no_index")){const A='".indexOn": "'+v._queryParams.getIndex().toString()+'"',R=v._path.toString();yn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${A} at ${R} to your security rules for better performance.`)}}}refreshAuthToken(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(l)}reduceReconnectDelayIfAdminCredential_(l){(l&&40===l.length||(0,$.GJ)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const l=this.authToken_,v=(0,$.w9)(l)?"auth":"gauth",E={cred:l};null===this.authOverride_?E.noauth=!0:"object"==typeof this.authOverride_&&(E.authvar=this.authOverride_),this.sendRequest(v,E,A=>{const R=A.s,k=A.d||"error";this.authToken_===l&&("ok"===R?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(R,k))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},l=>{const v=l.s,E=l.d||"error";"ok"===v?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(v,E)})}unlisten(l,v){const E=l._path.toString(),A=l._queryIdentifier;this.log_("Unlisten called for "+E+" "+A),(0,$.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(E,A)&&this.connected_&&this.sendUnlisten_(E,A,l._queryObject,v)}sendUnlisten_(l,v,E,A){this.log_("Unlisten on "+l+" for "+v);const R={p:l};A&&(R.q=E,R.t=A),this.sendRequest("n",R)}onDisconnectPut(l,v,E){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,v,E):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:v,onComplete:E})}onDisconnectMerge(l,v,E){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,v,E):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:v,onComplete:E})}onDisconnectCancel(l,v){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,v):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:v})}sendOnDisconnect_(l,v,E,A){const R={p:v,d:E};this.log_("onDisconnect "+l,R),this.sendRequest(l,R,k=>{A&&setTimeout(()=>{A(k.s,k.d)},Math.floor(0))})}put(l,v,E,A){this.putInternal("p",l,v,E,A)}merge(l,v,E,A){this.putInternal("m",l,v,E,A)}putInternal(l,v,E,A,R){this.initConnection_();const k={p:v,d:E};void 0!==R&&(k.h=R),this.outstandingPuts_.push({action:l,request:k,onComplete:A}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+v)}sendPut_(l){const v=this.outstandingPuts_[l].action,E=this.outstandingPuts_[l].request,A=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(v,E,R=>{this.log_(v+" response",R),delete this.outstandingPuts_[l],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),A&&A(R.s,R.d)})}reportStats(l){if(this.connected_){const v={c:l};this.log_("reportStats",v),this.sendRequest("s",v,E=>{"ok"!==E.s&&this.log_("reportStats","Error sending stats: "+E.d)})}}onDataMessage_(l){if("r"in l){this.log_("from server: "+(0,$.Wl)(l));const v=l.r,E=this.requestCBHash_[v];E&&(delete this.requestCBHash_[v],E(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}}onDataPush_(l,v){this.log_("handleServerMessage",l,v),"d"===l?this.onDataUpdate_(v.p,v.d,!1,v.t):"m"===l?this.onDataUpdate_(v.p,v.d,!0,v.t):"c"===l?this.onListenRevoked_(v.p,v.q):"ac"===l?this.onAuthRevoked_(v.s,v.d):"apc"===l?this.onAppCheckRevoked_(v.s,v.d):"sd"===l?this.onSecurityDebugPacket_(v):Dt("Unrecognized action received from server: "+(0,$.Wl)(l)+"\nAre you using the latest client?")}onReady_(l,v){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=v,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(l){(0,$.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(l))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Uo,this.realtime_||this.scheduleConnect_(0)),this.visible_=l}onOnline_(l){l?(this.log_("Browser went online."),this.reconnectDelay_=Uo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Uo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const l=(new Date).getTime()-this.lastConnectionAttemptTime_;let v=Math.max(0,this.reconnectDelay_-l);v=Math.random()*v,this.log_("Trying to reconnect in "+v+"ms"),this.scheduleConnect_(v),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var l=this;return(0,Be.Z)(function*(){if(l.shouldReconnect_()){l.log_("Making a connection attempt"),l.lastConnectionAttemptTime_=(new Date).getTime(),l.lastConnectionEstablishedTime_=null;const v=l.onDataMessage_.bind(l),E=l.onReady_.bind(l),A=l.onRealtimeDisconnect_.bind(l),R=l.id+":"+a.nextConnectionId_++,k=l.lastSessionId;let Z=!1,se=null;const Me=function(){se?se.close():(Z=!0,A())};l.realtime_={close:Me,sendRequest:function(Ct){(0,$.hu)(se,"sendRequest call when we're not connected not allowed."),se.sendRequest(Ct)}};const ze=l.forceTokenRefresh_;l.forceTokenRefresh_=!1;try{const[Ct,Mt]=yield Promise.all([l.authTokenProvider_.getToken(ze),l.appCheckTokenProvider_.getToken(ze)]);Z?rt("getToken() completed but was canceled"):(rt("getToken() completed. Creating connection."),l.authToken_=Ct&&Ct.accessToken,l.appCheckToken_=Mt&&Mt.token,se=new Jn(R,l.repoInfo_,l.applicationId_,l.appCheckToken_,l.authToken_,v,E,A,gn=>{yn(gn+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},k))}catch(Ct){l.log_("Failed to get token: "+Ct),Z||(l.repoInfo_.nodeAdmin&&yn(Ct),Me())}}})()}interrupt(l){rt("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(l){rt("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,$.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Uo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(l){const v=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:v})}cancelSentTransactions_(){for(let l=0;l<this.outstandingPuts_.length;l++){const v=this.outstandingPuts_[l];v&&"h"in v.request&&v.queued&&(v.onComplete&&v.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(l,v){let E;E=v?v.map(R=>Ir(R)).join("$"):"default";const A=this.removeListen_(l,E);A&&A.onComplete&&A.onComplete("permission_denied")}removeListen_(l,v){const E=new Ht(l).toString();let A;if(this.listens.has(E)){const R=this.listens.get(E);A=R.get(v),R.delete(v),0===R.size&&this.listens.delete(E)}else A=void 0;return A}onAuthRevoked_(l,v){rt("Auth token revoked: "+l+"/"+v),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(l,v){rt("App check token revoked: "+l+"/"+v),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const l of this.listens.values())for(const v of l.values())this.sendListen_(v);for(let l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){const l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(let l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)}sendConnectStats_(){const l={};let v="js";(0,$.Yr)()&&(v=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+v+"."+ut.replace(/\./g,"-")]=1,(0,$.uI)()?l["framework.cordova"]=1:(0,$.b$)()&&(l["framework.reactnative"]=1),this.reportStats(l)}shouldReconnect_(){const l=_t.getInstance().currentlyOnline();return(0,$.xb)(this.interruptReasons_)&&l}}return a.nextPersistentConnectionId_=0,a.nextConnectionId_=0,a})();class tr{constructor(o,l){this.name=o,this.node=l}static Wrap(o,l){return new tr(o,l)}}class cs{getCompare(){return this.compare.bind(this)}indexedValueChanged(o,l){const v=new tr(Ar,o),E=new tr(Ar,l);return 0!==this.compare(v,E)}minPost(){return tr.MIN}}class Ks extends cs{static get __EMPTY_NODE(){return rs}static set __EMPTY_NODE(o){rs=o}compare(o,l){return Dn(o.name,l.name)}isDefinedOn(o){throw(0,$.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(o,l){return!1}minPost(){return tr.MIN}maxPost(){return new tr(Nn,rs)}makePost(o,l){return(0,$.hu)("string"==typeof o,"KeyIndex indexValue must always be a string."),new tr(o,rs)}toString(){return".key"}}const $r=new Ks;class Ao{constructor(o,l,v,E,A=null){this.isReverse_=E,this.resultGenerator_=A,this.nodeStack_=[];let R=1;for(;!o.isEmpty();)if(R=l?v(o.key,l):1,E&&(R*=-1),R<0)o=this.isReverse_?o.left:o.right;else{if(0===R){this.nodeStack_.push(o);break}this.nodeStack_.push(o),o=this.isReverse_?o.right:o.left}}getNext(){if(0===this.nodeStack_.length)return null;let l,o=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(o.key,o.value):{key:o.key,value:o.value},this.isReverse_)for(o=o.left;!o.isEmpty();)this.nodeStack_.push(o),o=o.right;else for(o=o.right;!o.isEmpty();)this.nodeStack_.push(o),o=o.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const o=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(o.key,o.value):{key:o.key,value:o.value}}}let Qo,co=(()=>{class a{constructor(l,v,E,A,R){this.key=l,this.value=v,this.color=null!=E?E:a.RED,this.left=null!=A?A:lo.EMPTY_NODE,this.right=null!=R?R:lo.EMPTY_NODE}copy(l,v,E,A,R){return new a(null!=l?l:this.key,null!=v?v:this.value,null!=E?E:this.color,null!=A?A:this.left,null!=R?R:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)}reverseTraversal(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(l,v,E){let A=this;const R=E(l,A.key);return A=R<0?A.copy(null,null,null,A.left.insert(l,v,E),null):0===R?A.copy(null,v,null,null,null):A.copy(null,null,null,null,A.right.insert(l,v,E)),A.fixUp_()}removeMin_(){if(this.left.isEmpty())return lo.EMPTY_NODE;let l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.removeMin_(),null),l.fixUp_()}remove(l,v){let E,A;if(E=this,v(l,E.key)<0)!E.left.isEmpty()&&!E.left.isRed_()&&!E.left.left.isRed_()&&(E=E.moveRedLeft_()),E=E.copy(null,null,null,E.left.remove(l,v),null);else{if(E.left.isRed_()&&(E=E.rotateRight_()),!E.right.isEmpty()&&!E.right.isRed_()&&!E.right.left.isRed_()&&(E=E.moveRedRight_()),0===v(l,E.key)){if(E.right.isEmpty())return lo.EMPTY_NODE;A=E.right.min_(),E=E.copy(A.key,A.value,null,null,E.right.removeMin_())}E=E.copy(null,null,null,null,E.right.remove(l,v))}return E.fixUp_()}isRed_(){return this.color}fixUp_(){let l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l}moveRedLeft_(){let l=this.colorFlip_();return l.right.left.isRed_()&&(l=l.copy(null,null,null,null,l.right.rotateRight_()),l=l.rotateLeft_(),l=l.colorFlip_()),l}moveRedRight_(){let l=this.colorFlip_();return l.left.left.isRed_()&&(l=l.rotateRight_(),l=l.colorFlip_()),l}rotateLeft_(){const l=this.copy(null,null,a.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)}rotateRight_(){const l=this.copy(null,null,a.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)}colorFlip_(){const l=this.left.copy(null,null,!this.left.color,null,null),v=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,v)}checkMaxDepth_(){const l=this.check_();return Math.pow(2,l)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)}}return a.RED=!0,a.BLACK=!1,a})();class lo{constructor(o,l=lo.EMPTY_NODE){this.comparator_=o,this.root_=l}insert(o,l){return new lo(this.comparator_,this.root_.insert(o,l,this.comparator_).copy(null,null,co.BLACK,null,null))}remove(o){return new lo(this.comparator_,this.root_.remove(o,this.comparator_).copy(null,null,co.BLACK,null,null))}get(o){let l,v=this.root_;for(;!v.isEmpty();){if(l=this.comparator_(o,v.key),0===l)return v.value;l<0?v=v.left:l>0&&(v=v.right)}return null}getPredecessorKey(o){let l,v=this.root_,E=null;for(;!v.isEmpty();){if(l=this.comparator_(o,v.key),0===l){if(v.left.isEmpty())return E?E.key:null;for(v=v.left;!v.right.isEmpty();)v=v.right;return v.key}l<0?v=v.left:l>0&&(E=v,v=v.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(o){return this.root_.inorderTraversal(o)}reverseTraversal(o){return this.root_.reverseTraversal(o)}getIterator(o){return new Ao(this.root_,null,this.comparator_,!1,o)}getIteratorFrom(o,l){return new Ao(this.root_,o,this.comparator_,!1,l)}getReverseIteratorFrom(o,l){return new Ao(this.root_,o,this.comparator_,!0,l)}getReverseIterator(o){return new Ao(this.root_,null,this.comparator_,!0,o)}}function is(a,o){return Dn(a.name,o.name)}function jo(a,o){return Dn(a,o)}lo.EMPTY_NODE=new class vs{copy(o,l,v,E,A){return this}insert(o,l,v){return new co(o,l,null)}remove(o,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(o){return!1}reverseTraversal(o){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Us=function(a){return"number"==typeof a?"number:"+Kt(a):"string:"+a},os=function(a){if(a.isLeafNode()){const o=a.val();(0,$.hu)("string"==typeof o||"number"==typeof o||"object"==typeof o&&(0,$.r3)(o,".sv"),"Priority must be a string or number.")}else(0,$.hu)(a===Qo||a.isEmpty(),"priority of unexpected type.");(0,$.hu)(a===Qo||a.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Xi,ys,Ki,Ni=(()=>{class a{constructor(l,v=a.__childrenNodeConstructor.EMPTY_NODE){this.value_=l,this.priorityNode_=v,this.lazyHash_=null,(0,$.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),os(this.priorityNode_)}static set __childrenNodeConstructor(l){Xi=l}static get __childrenNodeConstructor(){return Xi}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(l){return new a(this.value_,l)}getImmediateChild(l){return".priority"===l?this.priorityNode_:a.__childrenNodeConstructor.EMPTY_NODE}getChild(l){return Qr(l)?this:".priority"===Sn(l)?this.priorityNode_:a.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(l,v){return null}updateImmediateChild(l,v){return".priority"===l?this.updatePriority(v):v.isEmpty()&&".priority"!==l?this:a.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,v).updatePriority(this.priorityNode_)}updateChild(l,v){const E=Sn(l);return null===E?v:v.isEmpty()&&".priority"!==E?this:((0,$.hu)(".priority"!==E||1===er(l),".priority must be the last token in a path"),this.updateImmediateChild(E,a.__childrenNodeConstructor.EMPTY_NODE.updateChild(mr(l),v)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(l,v){return!1}val(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let l="";this.priorityNode_.isEmpty()||(l+="priority:"+Us(this.priorityNode_.val())+":");const v=typeof this.value_;l+=v+":",l+="number"===v?Kt(this.value_):this.value_,this.lazyHash_=te(l)}return this.lazyHash_}getValue(){return this.value_}compareTo(l){return l===a.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof a.__childrenNodeConstructor?-1:((0,$.hu)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))}compareToLeafNode_(l){const v=typeof l.value_,E=typeof this.value_,A=a.VALUE_TYPE_ORDER.indexOf(v),R=a.VALUE_TYPE_ORDER.indexOf(E);return(0,$.hu)(A>=0,"Unknown leaf type: "+v),(0,$.hu)(R>=0,"Unknown leaf type: "+E),A===R?"object"===E?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:R-A}withIndex(){return this}isIndexed(){return!0}equals(l){return l===this||!!l.isLeafNode()&&(this.value_===l.value_&&this.priorityNode_.equals(l.priorityNode_))}}return a.VALUE_TYPE_ORDER=["object","boolean","number","string"],a})();const wi=new class So extends cs{compare(o,l){const v=o.node.getPriority(),E=l.node.getPriority(),A=v.compareTo(E);return 0===A?Dn(o.name,l.name):A}isDefinedOn(o){return!o.getPriority().isEmpty()}indexedValueChanged(o,l){return!o.getPriority().equals(l.getPriority())}minPost(){return tr.MIN}maxPost(){return new tr(Nn,new Ni("[PRIORITY-POST]",Ki))}makePost(o,l){const v=ys(o);return new tr(l,new Ni("[PRIORITY-POST]",v))}toString(){return".priority"}},ls=Math.log(2);class Ms{constructor(o){this.count=parseInt(Math.log(o+1)/ls,10),this.current_=this.count-1;const E=(A=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=o+1&E}nextBitIsOne(){const o=!(this.bits_&1<<this.current_);return this.current_--,o}}const io=function(a,o,l,v){a.sort(o);const E=function(Z,se){const Me=se-Z;let Ue,ze;if(0===Me)return null;if(1===Me)return Ue=a[Z],ze=l?l(Ue):Ue,new co(ze,Ue.node,co.BLACK,null,null);{const Ct=parseInt(Me/2,10)+Z,Mt=E(Z,Ct),gn=E(Ct+1,se);return Ue=a[Ct],ze=l?l(Ue):Ue,new co(ze,Ue.node,co.BLACK,Mt,gn)}},k=function(Z){let se=null,Me=null,Ue=a.length;const ze=function(Mt,gn){const Rn=Ue-Mt,$n=Ue;Ue-=Mt;const Sr=E(Rn+1,$n),ni=a[Rn],di=l?l(ni):ni;Ct(new co(di,ni.node,gn,null,Sr))},Ct=function(Mt){se?(se.left=Mt,se=Mt):(Me=Mt,se=Mt)};for(let Mt=0;Mt<Z.count;++Mt){const gn=Z.nextBitIsOne(),Rn=Math.pow(2,Z.count-(Mt+1));gn?ze(Rn,co.BLACK):(ze(Rn,co.BLACK),ze(Rn,co.RED))}return Me}(new Ms(a.length));return new lo(v||o,k)};let $i;const Qi={};class Vo{constructor(o,l){this.indexes_=o,this.indexSet_=l}static get Default(){return(0,$.hu)(Qi&&wi,"ChildrenNode.ts has not been loaded"),$i=$i||new Vo({".priority":Qi},{".priority":wi}),$i}get(o){const l=(0,$.DV)(this.indexes_,o);if(!l)throw new Error("No index defined for "+o);return l instanceof lo?l:null}hasIndex(o){return(0,$.r3)(this.indexSet_,o.toString())}addIndex(o,l){(0,$.hu)(o!==$r,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const v=[];let E=!1;const A=l.getIterator(tr.Wrap);let k,R=A.getNext();for(;R;)E=E||o.isDefinedOn(R.node),v.push(R),R=A.getNext();k=E?io(v,o.getCompare()):Qi;const Z=o.toString(),se=Object.assign({},this.indexSet_);se[Z]=o;const Me=Object.assign({},this.indexes_);return Me[Z]=k,new Vo(Me,se)}addToIndexes(o,l){const v=(0,$.UI)(this.indexes_,(E,A)=>{const R=(0,$.DV)(this.indexSet_,A);if((0,$.hu)(R,"Missing index implementation for "+A),E===Qi){if(R.isDefinedOn(o.node)){const k=[],Z=l.getIterator(tr.Wrap);let se=Z.getNext();for(;se;)se.name!==o.name&&k.push(se),se=Z.getNext();return k.push(o),io(k,R.getCompare())}return Qi}{const k=l.get(o.name);let Z=E;return k&&(Z=Z.remove(new tr(o.name,k))),Z.insert(o,o.node)}});return new Vo(v,this.indexSet_)}removeFromIndexes(o,l){const v=(0,$.UI)(this.indexes_,E=>{if(E===Qi)return E;{const A=l.get(o.name);return A?E.remove(new tr(o.name,A)):E}});return new Vo(v,this.indexSet_)}}let bo,Fr=(()=>{class a{constructor(l,v,E){this.children_=l,this.priorityNode_=v,this.indexMap_=E,this.lazyHash_=null,this.priorityNode_&&os(this.priorityNode_),this.children_.isEmpty()&&(0,$.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return bo||(bo=new a(new lo(jo),null,Vo.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||bo}updatePriority(l){return this.children_.isEmpty()?this:new a(this.children_,l,this.indexMap_)}getImmediateChild(l){if(".priority"===l)return this.getPriority();{const v=this.children_.get(l);return null===v?bo:v}}getChild(l){const v=Sn(l);return null===v?this:this.getImmediateChild(v).getChild(mr(l))}hasChild(l){return null!==this.children_.get(l)}updateImmediateChild(l,v){if((0,$.hu)(v,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(v);{const E=new tr(l,v);let A,R;v.isEmpty()?(A=this.children_.remove(l),R=this.indexMap_.removeFromIndexes(E,this.children_)):(A=this.children_.insert(l,v),R=this.indexMap_.addToIndexes(E,this.children_));const k=A.isEmpty()?bo:this.priorityNode_;return new a(A,k,R)}}updateChild(l,v){const E=Sn(l);if(null===E)return v;{(0,$.hu)(".priority"!==Sn(l)||1===er(l),".priority must be the last token in a path");const A=this.getImmediateChild(E).updateChild(mr(l),v);return this.updateImmediateChild(E,A)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(l){if(this.isEmpty())return null;const v={};let E=0,A=0,R=!0;if(this.forEachChild(wi,(k,Z)=>{v[k]=Z.val(l),E++,R&&a.INTEGER_REGEXP_.test(k)?A=Math.max(A,Number(k)):R=!1}),!l&&R&&A<2*E){const k=[];for(const Z in v)k[Z]=v[Z];return k}return l&&!this.getPriority().isEmpty()&&(v[".priority"]=this.getPriority().val()),v}hash(){if(null===this.lazyHash_){let l="";this.getPriority().isEmpty()||(l+="priority:"+Us(this.getPriority().val())+":"),this.forEachChild(wi,(v,E)=>{const A=E.hash();""!==A&&(l+=":"+v+":"+A)}),this.lazyHash_=""===l?"":te(l)}return this.lazyHash_}getPredecessorChildName(l,v,E){const A=this.resolveIndex_(E);if(A){const R=A.getPredecessorKey(new tr(l,v));return R?R.name:null}return this.children_.getPredecessorKey(l)}getFirstChildName(l){const v=this.resolveIndex_(l);if(v){const E=v.minKey();return E&&E.name}return this.children_.minKey()}getFirstChild(l){const v=this.getFirstChildName(l);return v?new tr(v,this.children_.get(v)):null}getLastChildName(l){const v=this.resolveIndex_(l);if(v){const E=v.maxKey();return E&&E.name}return this.children_.maxKey()}getLastChild(l){const v=this.getLastChildName(l);return v?new tr(v,this.children_.get(v)):null}forEachChild(l,v){const E=this.resolveIndex_(l);return E?E.inorderTraversal(A=>v(A.name,A.node)):this.children_.inorderTraversal(v)}getIterator(l){return this.getIteratorFrom(l.minPost(),l)}getIteratorFrom(l,v){const E=this.resolveIndex_(v);if(E)return E.getIteratorFrom(l,A=>A);{const A=this.children_.getIteratorFrom(l.name,tr.Wrap);let R=A.peek();for(;null!=R&&v.compare(R,l)<0;)A.getNext(),R=A.peek();return A}}getReverseIterator(l){return this.getReverseIteratorFrom(l.maxPost(),l)}getReverseIteratorFrom(l,v){const E=this.resolveIndex_(v);if(E)return E.getReverseIteratorFrom(l,A=>A);{const A=this.children_.getReverseIteratorFrom(l.name,tr.Wrap);let R=A.peek();for(;null!=R&&v.compare(R,l)>0;)A.getNext(),R=A.peek();return A}}compareTo(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===Br?-1:0}withIndex(l){if(l===$r||this.indexMap_.hasIndex(l))return this;{const v=this.indexMap_.addIndex(l,this.children_);return new a(this.children_,this.priorityNode_,v)}}isIndexed(l){return l===$r||this.indexMap_.hasIndex(l)}equals(l){if(l===this)return!0;if(l.isLeafNode())return!1;{const v=l;if(this.getPriority().equals(v.getPriority())){if(this.children_.count()===v.children_.count()){const E=this.getIterator(wi),A=v.getIterator(wi);let R=E.getNext(),k=A.getNext();for(;R&&k;){if(R.name!==k.name||!R.node.equals(k.node))return!1;R=E.getNext(),k=A.getNext()}return null===R&&null===k}return!1}return!1}}resolveIndex_(l){return l===$r?null:this.indexMap_.get(l.toString())}}return a.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,a})();const Br=new class va extends Fr{constructor(){super(new lo(jo),Fr.EMPTY_NODE,Vo.Default)}compareTo(o){return o===this?0:1}equals(o){return o===this}getPriority(){return this}getImmediateChild(o){return Fr.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(tr,{MIN:{value:new tr(Ar,Fr.EMPTY_NODE)},MAX:{value:new tr(Nn,Br)}}),Ks.__EMPTY_NODE=Fr.EMPTY_NODE,Ni.__childrenNodeConstructor=Fr,function qs(a){Qo=a}(Br),function Zs(a){Ki=a}(Br);const xs=!0;function Gi(a,o=null){if(null===a)return Fr.EMPTY_NODE;if("object"==typeof a&&".priority"in a&&(o=a[".priority"]),(0,$.hu)(null===o||"string"==typeof o||"number"==typeof o||"object"==typeof o&&".sv"in o,"Invalid priority type found: "+typeof o),"object"==typeof a&&".value"in a&&null!==a[".value"]&&(a=a[".value"]),"object"!=typeof a||".sv"in a)return new Ni(a,Gi(o));if(a instanceof Array||!xs){let l=Fr.EMPTY_NODE;return br(a,(v,E)=>{if((0,$.r3)(a,v)&&"."!==v.substring(0,1)){const A=Gi(E);(A.isLeafNode()||!A.isEmpty())&&(l=l.updateImmediateChild(v,A))}}),l.updatePriority(Gi(o))}{const l=[];let v=!1;if(br(a,(R,k)=>{if("."!==R.substring(0,1)){const Z=Gi(k);Z.isEmpty()||(v=v||!Z.getPriority().isEmpty(),l.push(new tr(R,Z)))}}),0===l.length)return Fr.EMPTY_NODE;const A=io(l,is,R=>R.name,jo);if(v){const R=io(l,wi.getCompare());return new Fr(A,Gi(o),new Vo({".priority":R},{".priority":wi}))}return new Fr(A,Gi(o),Vo.Default)}}!function _s(a){ys=a}(Gi);class Vs extends cs{constructor(o){super(),this.indexPath_=o,(0,$.hu)(!Qr(o)&&".priority"!==Sn(o),"Can't create PathIndex with empty path or .priority key")}extractChild(o){return o.getChild(this.indexPath_)}isDefinedOn(o){return!o.getChild(this.indexPath_).isEmpty()}compare(o,l){const v=this.extractChild(o.node),E=this.extractChild(l.node),A=v.compareTo(E);return 0===A?Dn(o.name,l.name):A}makePost(o,l){const v=Gi(o),E=Fr.EMPTY_NODE.updateChild(this.indexPath_,v);return new tr(l,E)}maxPost(){const o=Fr.EMPTY_NODE.updateChild(this.indexPath_,Br);return new tr(Nn,o)}toString(){return ji(this.indexPath_,0).join("/")}}const No=new class Ns extends cs{compare(o,l){const v=o.node.compareTo(l.node);return 0===v?Dn(o.name,l.name):v}isDefinedOn(o){return!0}indexedValueChanged(o,l){return!o.equals(l)}minPost(){return tr.MIN}maxPost(){return tr.MAX}makePost(o,l){const v=Gi(o);return new tr(l,v)}toString(){return".value"}};function $s(a){return{type:"value",snapshotNode:a}}function Es(a,o){return{type:"child_added",snapshotNode:o,childName:a}}function ss(a,o){return{type:"child_removed",snapshotNode:o,childName:a}}function Y(a,o,l){return{type:"child_changed",snapshotNode:o,childName:a,oldSnap:l}}class T{constructor(o){this.index_=o}updateChild(o,l,v,E,A,R){(0,$.hu)(o.isIndexed(this.index_),"A node must be indexed if only a child is updated");const k=o.getImmediateChild(l);return k.getChild(E).equals(v.getChild(E))&&k.isEmpty()===v.isEmpty()||(null!=R&&(v.isEmpty()?o.hasChild(l)?R.trackChildChange(ss(l,k)):(0,$.hu)(o.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):k.isEmpty()?R.trackChildChange(Es(l,v)):R.trackChildChange(Y(l,v,k))),o.isLeafNode()&&v.isEmpty())?o:o.updateImmediateChild(l,v).withIndex(this.index_)}updateFullNode(o,l,v){return null!=v&&(o.isLeafNode()||o.forEachChild(wi,(E,A)=>{l.hasChild(E)||v.trackChildChange(ss(E,A))}),l.isLeafNode()||l.forEachChild(wi,(E,A)=>{if(o.hasChild(E)){const R=o.getImmediateChild(E);R.equals(A)||v.trackChildChange(Y(E,A,R))}else v.trackChildChange(Es(E,A))})),l.withIndex(this.index_)}updatePriority(o,l){return o.isEmpty()?Fr.EMPTY_NODE:o.updatePriority(l)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class S{constructor(o){this.indexedFilter_=new T(o.getIndex()),this.index_=o.getIndex(),this.startPost_=S.getStartPost_(o),this.endPost_=S.getEndPost_(o),this.startIsInclusive_=!o.startAfterSet_,this.endIsInclusive_=!o.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(o){const l=this.startIsInclusive_?this.index_.compare(this.getStartPost(),o)<=0:this.index_.compare(this.getStartPost(),o)<0,v=this.endIsInclusive_?this.index_.compare(o,this.getEndPost())<=0:this.index_.compare(o,this.getEndPost())<0;return l&&v}updateChild(o,l,v,E,A,R){return this.matches(new tr(l,v))||(v=Fr.EMPTY_NODE),this.indexedFilter_.updateChild(o,l,v,E,A,R)}updateFullNode(o,l,v){l.isLeafNode()&&(l=Fr.EMPTY_NODE);let E=l.withIndex(this.index_);E=E.updatePriority(Fr.EMPTY_NODE);const A=this;return l.forEachChild(wi,(R,k)=>{A.matches(new tr(R,k))||(E=E.updateImmediateChild(R,Fr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(o,E,v)}updatePriority(o,l){return o}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(o){if(o.hasStart()){const l=o.getIndexStartName();return o.getIndex().makePost(o.getIndexStartValue(),l)}return o.getIndex().minPost()}static getEndPost_(o){if(o.hasEnd()){const l=o.getIndexEndName();return o.getIndex().makePost(o.getIndexEndValue(),l)}return o.getIndex().maxPost()}}class j{constructor(o){this.withinDirectionalStart=l=>this.reverse_?this.withinEndPost(l):this.withinStartPost(l),this.withinDirectionalEnd=l=>this.reverse_?this.withinStartPost(l):this.withinEndPost(l),this.withinStartPost=l=>{const v=this.index_.compare(this.rangedFilter_.getStartPost(),l);return this.startIsInclusive_?v<=0:v<0},this.withinEndPost=l=>{const v=this.index_.compare(l,this.rangedFilter_.getEndPost());return this.endIsInclusive_?v<=0:v<0},this.rangedFilter_=new S(o),this.index_=o.getIndex(),this.limit_=o.getLimit(),this.reverse_=!o.isViewFromLeft(),this.startIsInclusive_=!o.startAfterSet_,this.endIsInclusive_=!o.endBeforeSet_}updateChild(o,l,v,E,A,R){return this.rangedFilter_.matches(new tr(l,v))||(v=Fr.EMPTY_NODE),o.getImmediateChild(l).equals(v)?o:o.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(o,l,v,E,A,R):this.fullLimitUpdateChild_(o,l,v,A,R)}updateFullNode(o,l,v){let E;if(l.isLeafNode()||l.isEmpty())E=Fr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<l.numChildren()&&l.isIndexed(this.index_)){let A;E=Fr.EMPTY_NODE.withIndex(this.index_),A=this.reverse_?l.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let R=0;for(;A.hasNext()&&R<this.limit_;){const k=A.getNext();if(this.withinDirectionalStart(k)){if(!this.withinDirectionalEnd(k))break;E=E.updateImmediateChild(k.name,k.node),R++}}}else{let A;E=l.withIndex(this.index_),E=E.updatePriority(Fr.EMPTY_NODE),A=this.reverse_?E.getReverseIterator(this.index_):E.getIterator(this.index_);let R=0;for(;A.hasNext();){const k=A.getNext();R<this.limit_&&this.withinDirectionalStart(k)&&this.withinDirectionalEnd(k)?R++:E=E.updateImmediateChild(k.name,Fr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(o,E,v)}updatePriority(o,l){return o}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(o,l,v,E,A){let R;if(this.reverse_){const Ue=this.index_.getCompare();R=(ze,Ct)=>Ue(Ct,ze)}else R=this.index_.getCompare();const k=o;(0,$.hu)(k.numChildren()===this.limit_,"");const Z=new tr(l,v),se=this.reverse_?k.getFirstChild(this.index_):k.getLastChild(this.index_),Me=this.rangedFilter_.matches(Z);if(k.hasChild(l)){const Ue=k.getImmediateChild(l);let ze=E.getChildAfterChild(this.index_,se,this.reverse_);for(;null!=ze&&(ze.name===l||k.hasChild(ze.name));)ze=E.getChildAfterChild(this.index_,ze,this.reverse_);const Ct=null==ze?1:R(ze,Z);if(Me&&!v.isEmpty()&&Ct>=0)return null!=A&&A.trackChildChange(Y(l,v,Ue)),k.updateImmediateChild(l,v);{null!=A&&A.trackChildChange(ss(l,Ue));const gn=k.updateImmediateChild(l,Fr.EMPTY_NODE);return null!=ze&&this.rangedFilter_.matches(ze)?(null!=A&&A.trackChildChange(Es(ze.name,ze.node)),gn.updateImmediateChild(ze.name,ze.node)):gn}}return v.isEmpty()?o:Me&&R(se,Z)>=0?(null!=A&&(A.trackChildChange(ss(se.name,se.node)),A.trackChildChange(Es(l,v))),k.updateImmediateChild(l,v).updateImmediateChild(se.name,Fr.EMPTY_NODE)):o}}class ve{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=wi}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,$.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,$.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ar}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,$.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,$.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Nn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,$.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===wi}copy(){const o=new ve;return o.limitSet_=this.limitSet_,o.limit_=this.limit_,o.startSet_=this.startSet_,o.startAfterSet_=this.startAfterSet_,o.indexStartValue_=this.indexStartValue_,o.startNameSet_=this.startNameSet_,o.indexStartName_=this.indexStartName_,o.endSet_=this.endSet_,o.endBeforeSet_=this.endBeforeSet_,o.indexEndValue_=this.indexEndValue_,o.endNameSet_=this.endNameSet_,o.indexEndName_=this.indexEndName_,o.index_=this.index_,o.viewFrom_=this.viewFrom_,o}}function wr(a,o,l){const v=a.copy();return v.startSet_=!0,void 0===o&&(o=null),v.indexStartValue_=o,null!=l?(v.startNameSet_=!0,v.indexStartName_=l):(v.startNameSet_=!1,v.indexStartName_=""),v}function ee(a,o,l){const v=a.copy();return v.endSet_=!0,void 0===o&&(o=null),v.indexEndValue_=o,void 0!==l?(v.endNameSet_=!0,v.indexEndName_=l):(v.endNameSet_=!1,v.indexEndName_=""),v}function Te(a,o){const l=a.copy();return l.index_=o,l}function nt(a){const o={};if(a.isDefault())return o;let l;if(a.index_===wi?l="$priority":a.index_===No?l="$value":a.index_===$r?l="$key":((0,$.hu)(a.index_ instanceof Vs,"Unrecognized index type!"),l=a.index_.toString()),o.orderBy=(0,$.Wl)(l),a.startSet_){const v=a.startAfterSet_?"startAfter":"startAt";o[v]=(0,$.Wl)(a.indexStartValue_),a.startNameSet_&&(o[v]+=","+(0,$.Wl)(a.indexStartName_))}if(a.endSet_){const v=a.endBeforeSet_?"endBefore":"endAt";o[v]=(0,$.Wl)(a.indexEndValue_),a.endNameSet_&&(o[v]+=","+(0,$.Wl)(a.indexEndName_))}return a.limitSet_&&(a.isViewFromLeft()?o.limitToFirst=a.limit_:o.limitToLast=a.limit_),o}function Et(a){const o={};if(a.startSet_&&(o.sp=a.indexStartValue_,a.startNameSet_&&(o.sn=a.indexStartName_),o.sin=!a.startAfterSet_),a.endSet_&&(o.ep=a.indexEndValue_,a.endNameSet_&&(o.en=a.indexEndName_),o.ein=!a.endBeforeSet_),a.limitSet_){o.l=a.limit_;let l=a.viewFrom_;""===l&&(l=a.isViewFromLeft()?"l":"r"),o.vf=l}return a.index_!==wi&&(o.i=a.index_.toString()),o}class Xt extends ci{constructor(o,l,v,E){super(),this.repoInfo_=o,this.onDataUpdate_=l,this.authTokenProvider_=v,this.appCheckTokenProvider_=E,this.log_=Qt("p:rest:"),this.listens_={}}reportStats(o){throw new Error("Method not implemented.")}static getListenId_(o,l){return void 0!==l?"tag$"+l:((0,$.hu)(o._queryParams.isDefault(),"should have a tag if it's not a default query."),o._path.toString())}listen(o,l,v,E){const A=o._path.toString();this.log_("Listen called for "+A+" "+o._queryIdentifier);const R=Xt.getListenId_(o,v),k={};this.listens_[R]=k;const Z=nt(o._queryParams);this.restRequest_(A+".json",Z,(se,Me)=>{let Ue=Me;if(404===se&&(Ue=null,se=null),null===se&&this.onDataUpdate_(A,Ue,!1,v),(0,$.DV)(this.listens_,R)===k){let ze;ze=se?401===se?"permission_denied":"rest_error:"+se:"ok",E(ze,null)}})}unlisten(o,l){const v=Xt.getListenId_(o,l);delete this.listens_[v]}get(o){const l=nt(o._queryParams),v=o._path.toString(),E=new $.BH;return this.restRequest_(v+".json",l,(A,R)=>{let k=R;404===A&&(k=null,A=null),null===A?(this.onDataUpdate_(v,k,!1,null),E.resolve(k)):E.reject(new Error(k))}),E.promise}refreshAuthToken(o){}restRequest_(o,l={},v){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([E,A])=>{E&&E.accessToken&&(l.auth=E.accessToken),A&&A.token&&(l.ac=A.token);const R=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+o+"?ns="+this.repoInfo_.namespace+(0,$.xO)(l);this.log_("Sending REST request for "+R);const k=new XMLHttpRequest;k.onreadystatechange=()=>{if(v&&4===k.readyState){this.log_("REST Response for "+R+" received. status:",k.status,"response:",k.responseText);let Z=null;if(k.status>=200&&k.status<300){try{Z=(0,$.cI)(k.responseText)}catch(se){yn("Failed to parse JSON response for "+R+": "+k.responseText)}v(null,Z)}else 401!==k.status&&404!==k.status&&yn("Got unsuccessful REST response for "+R+" Status: "+k.status),v(k.status);v=null}},k.open("GET",R,!0),k.send()})}}class dn{constructor(){this.rootNode_=Fr.EMPTY_NODE}getNode(o){return this.rootNode_.getChild(o)}updateSnapshot(o,l){this.rootNode_=this.rootNode_.updateChild(o,l)}}function lr(){return{value:null,children:new Map}}function Qn(a,o,l){if(Qr(o))a.value=l,a.children.clear();else if(null!==a.value)a.value=a.value.updateChild(o,l);else{const v=Sn(o);a.children.has(v)||a.children.set(v,lr()),Qn(a.children.get(v),o=mr(o),l)}}function Nr(a,o){if(Qr(o))return a.value=null,a.children.clear(),!0;if(null!==a.value){if(a.value.isLeafNode())return!1;{const l=a.value;return a.value=null,l.forEachChild(wi,(v,E)=>{Qn(a,new Ht(v),E)}),Nr(a,o)}}if(a.children.size>0){const l=Sn(o);return o=mr(o),a.children.has(l)&&Nr(a.children.get(l),o)&&a.children.delete(l),0===a.children.size}return!0}function ui(a,o,l){null!==a.value?l(o,a.value):function go(a,o){a.children.forEach((l,v)=>{o(v,l)})}(a,(v,E)=>{ui(E,new Ht(o.toString()+"/"+v),l)})}class Ci{constructor(o){this.collection_=o,this.last_=null}get(){const o=this.collection_.get(),l=Object.assign({},o);return this.last_&&br(this.last_,(v,E)=>{l[v]=l[v]-E}),this.last_=o,l}}class Do{constructor(o,l){this.server_=l,this.statsToReport_={},this.statsListener_=new Ci(o);const v=1e4+2e4*Math.random();Wi(this.reportStats_.bind(this),Math.floor(v))}reportStats_(){const o=this.statsListener_.get(),l={};let v=!1;br(o,(E,A)=>{A>0&&(0,$.r3)(this.statsToReport_,E)&&(l[E]=A,v=!0)}),v&&this.server_.reportStats(l),Wi(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var mo=(()=>{return(a=mo||(mo={}))[a.OVERWRITE=0]="OVERWRITE",a[a.MERGE=1]="MERGE",a[a.ACK_USER_WRITE=2]="ACK_USER_WRITE",a[a.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",mo;var a})();function To(a){return{fromUser:!1,fromServer:!0,queryId:a,tagged:!0}}class Jo{constructor(o,l,v){this.path=o,this.affectedTree=l,this.revert=v,this.type=mo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(o){if(Qr(this.path)){if(null!=this.affectedTree.value)return(0,$.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new Ht(o));return new Jo(fn(),l,this.revert)}}return(0,$.hu)(Sn(this.path)===o,"operationForChild called for unrelated child."),new Jo(mr(this.path),this.affectedTree,this.revert)}}class Xs{constructor(o,l){this.source=o,this.path=l,this.type=mo.LISTEN_COMPLETE}operationForChild(o){return Qr(this.path)?new Xs(this.source,fn()):new Xs(this.source,mr(this.path))}}class Qs{constructor(o,l,v){this.source=o,this.path=l,this.snap=v,this.type=mo.OVERWRITE}operationForChild(o){return Qr(this.path)?new Qs(this.source,fn(),this.snap.getImmediateChild(o)):new Qs(this.source,mr(this.path),this.snap)}}class Cs{constructor(o,l,v){this.source=o,this.path=l,this.children=v,this.type=mo.MERGE}operationForChild(o){if(Qr(this.path)){const l=this.children.subtree(new Ht(o));return l.isEmpty()?null:l.value?new Qs(this.source,fn(),l.value):new Cs(this.source,fn(),l)}return(0,$.hu)(Sn(this.path)===o,"Can't get a merge for a child not on the path of the operation"),new Cs(this.source,mr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ho{constructor(o,l,v){this.node_=o,this.fullyInitialized_=l,this.filtered_=v}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(o){if(Qr(o))return this.isFullyInitialized()&&!this.filtered_;const l=Sn(o);return this.isCompleteForChild(l)}isCompleteForChild(o){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(o)}getNode(){return this.node_}}class Js{constructor(o){this.query_=o,this.index_=this.query_._queryParams.getIndex()}}function ya(a,o,l,v,E,A){const R=v.filter(k=>k.type===l);R.sort((k,Z)=>function Go(a,o,l){if(null==o.childName||null==l.childName)throw(0,$.g5)("Should only compare child_ events.");const v=new tr(o.childName,o.snapshotNode),E=new tr(l.childName,l.snapshotNode);return a.index_.compare(v,E)}(a,k,Z)),R.forEach(k=>{const Z=function Mu(a,o,l){return"value"===o.type||"child_removed"===o.type||(o.prevName=l.getPredecessorChildName(o.childName,o.snapshotNode,a.index_)),o}(a,k,A);E.forEach(se=>{se.respondsTo(k.type)&&o.push(se.createEvent(Z,a.query_))})})}function Nu(a,o){return{eventCache:a,serverCache:o}}function Pu(a,o,l,v){return Nu(new ho(o,l,v),a.serverCache)}function _a(a,o,l,v){return Nu(a.eventCache,new ho(o,l,v))}function za(a){return a.eventCache.isFullyInitialized()?a.eventCache.getNode():null}function ea(a){return a.serverCache.isFullyInitialized()?a.serverCache.getNode():null}let Ya;class ue{constructor(o,l=(()=>(Ya||(Ya=new lo(En)),Ya))()){this.value=o,this.children=l}static fromObject(o){let l=new ue(null);return br(o,(v,E)=>{l=l.set(new Ht(v),E)}),l}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(o,l){if(null!=this.value&&l(this.value))return{path:fn(),value:this.value};if(Qr(o))return null;{const v=Sn(o),E=this.children.get(v);if(null!==E){const A=E.findRootMostMatchingPathAndValue(mr(o),l);return null!=A?{path:Xr(new Ht(v),A.path),value:A.value}:null}return null}}findRootMostValueAndPath(o){return this.findRootMostMatchingPathAndValue(o,()=>!0)}subtree(o){if(Qr(o))return this;{const l=Sn(o),v=this.children.get(l);return null!==v?v.subtree(mr(o)):new ue(null)}}set(o,l){if(Qr(o))return new ue(l,this.children);{const v=Sn(o),A=(this.children.get(v)||new ue(null)).set(mr(o),l),R=this.children.insert(v,A);return new ue(this.value,R)}}remove(o){if(Qr(o))return this.children.isEmpty()?new ue(null):new ue(null,this.children);{const l=Sn(o),v=this.children.get(l);if(v){const E=v.remove(mr(o));let A;return A=E.isEmpty()?this.children.remove(l):this.children.insert(l,E),null===this.value&&A.isEmpty()?new ue(null):new ue(this.value,A)}return this}}get(o){if(Qr(o))return this.value;{const l=Sn(o),v=this.children.get(l);return v?v.get(mr(o)):null}}setTree(o,l){if(Qr(o))return l;{const v=Sn(o),A=(this.children.get(v)||new ue(null)).setTree(mr(o),l);let R;return R=A.isEmpty()?this.children.remove(v):this.children.insert(v,A),new ue(this.value,R)}}fold(o){return this.fold_(fn(),o)}fold_(o,l){const v={};return this.children.inorderTraversal((E,A)=>{v[E]=A.fold_(Xr(o,E),l)}),l(o,this.value,v)}findOnPath(o,l){return this.findOnPath_(o,fn(),l)}findOnPath_(o,l,v){const E=!!this.value&&v(l,this.value);if(E)return E;if(Qr(o))return null;{const A=Sn(o),R=this.children.get(A);return R?R.findOnPath_(mr(o),Xr(l,A),v):null}}foreachOnPath(o,l){return this.foreachOnPath_(o,fn(),l)}foreachOnPath_(o,l,v){if(Qr(o))return this;{this.value&&v(l,this.value);const E=Sn(o),A=this.children.get(E);return A?A.foreachOnPath_(mr(o),Xr(l,E),v):new ue(null)}}foreach(o){this.foreach_(fn(),o)}foreach_(o,l){this.children.inorderTraversal((v,E)=>{E.foreach_(Xr(o,v),l)}),this.value&&l(o,this.value)}foreachChild(o){this.children.inorderTraversal((l,v)=>{v.value&&o(l,v.value)})}}class Q{constructor(o){this.writeTree_=o}static empty(){return new Q(new ue(null))}}function Ie(a,o,l){if(Qr(o))return new Q(new ue(l));{const v=a.writeTree_.findRootMostValueAndPath(o);if(null!=v){const E=v.path;let A=v.value;const R=Si(E,o);return A=A.updateChild(R,l),new Q(a.writeTree_.set(E,A))}{const E=new ue(l),A=a.writeTree_.setTree(o,E);return new Q(A)}}}function et(a,o,l){let v=a;return br(l,(E,A)=>{v=Ie(v,Xr(o,E),A)}),v}function Wt(a,o){if(Qr(o))return Q.empty();{const l=a.writeTree_.setTree(o,new ue(null));return new Q(l)}}function hn(a,o){return null!=ir(a,o)}function ir(a,o){const l=a.writeTree_.findRootMostValueAndPath(o);return null!=l?a.writeTree_.get(l.path).getChild(Si(l.path,o)):null}function gi(a){const o=[],l=a.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild(wi,(v,E)=>{o.push(new tr(v,E))}):a.writeTree_.children.inorderTraversal((v,E)=>{null!=E.value&&o.push(new tr(v,E.value))}),o}function un(a,o){if(Qr(o))return a;{const l=ir(a,o);return new Q(null!=l?new ue(l):a.writeTree_.subtree(o))}}function kr(a){return a.writeTree_.isEmpty()}function Hr(a,o){return vo(fn(),a.writeTree_,o)}function vo(a,o,l){if(null!=o.value)return l.updateChild(a,o.value);{let v=null;return o.children.inorderTraversal((E,A)=>{".priority"===E?((0,$.hu)(null!==A.value,"Priority writes must always be leaf nodes"),v=A.value):l=vo(Xr(a,E),A,l)}),!l.getChild(a).isEmpty()&&null!==v&&(l=l.updateChild(Xr(a,".priority"),v)),l}}function Cn(a,o){return Oa(o,a)}function vn(a,o){if(a.snap)return xo(a.path,o);for(const l in a.children)if(a.children.hasOwnProperty(l)&&xo(Xr(a.path,l),o))return!0;return!1}function bi(a){return a.visible}function Ea(a,o,l){let v=Q.empty();for(let E=0;E<a.length;++E){const A=a[E];if(o(A)){const R=A.path;let k;if(A.snap)xo(l,R)?(k=Si(l,R),v=Ie(v,k,A.snap)):xo(R,l)&&(k=Si(R,l),v=Ie(v,fn(),A.snap.getChild(k)));else{if(!A.children)throw(0,$.g5)("WriteRecord should have .snap or .children");if(xo(l,R))k=Si(l,R),v=et(v,k,A.children);else if(xo(R,l))if(k=Si(R,l),Qr(k))v=et(v,fn(),A.children);else{const Z=(0,$.DV)(A.children,Sn(k));if(Z){const se=Z.getChild(mr(k));v=Ie(v,fn(),se)}}}}}return v}function Va(a,o,l,v,E){if(v||E){const A=un(a.visibleWrites,o);return!E&&kr(A)?l:E||null!=l||hn(A,fn())?Hr(Ea(a.allWrites,function(se){return(se.visible||E)&&(!v||!~v.indexOf(se.writeId))&&(xo(se.path,o)||xo(o,se.path))},o),l||Fr.EMPTY_NODE):null}{const A=ir(a.visibleWrites,o);if(null!=A)return A;{const R=un(a.visibleWrites,o);return kr(R)?l:null!=l||hn(R,fn())?Hr(R,l||Fr.EMPTY_NODE):null}}}function yu(a,o,l,v){return Va(a.writeTree,a.treePath,o,l,v)}function fo(a,o){return function qu(a,o,l){let v=Fr.EMPTY_NODE;const E=ir(a.visibleWrites,o);if(E)return E.isLeafNode()||E.forEachChild(wi,(A,R)=>{v=v.updateImmediateChild(A,R)}),v;if(l){const A=un(a.visibleWrites,o);return l.forEachChild(wi,(R,k)=>{const Z=Hr(un(A,new Ht(R)),k);v=v.updateImmediateChild(R,Z)}),gi(A).forEach(R=>{v=v.updateImmediateChild(R.name,R.node)}),v}return gi(un(a.visibleWrites,o)).forEach(R=>{v=v.updateImmediateChild(R.name,R.node)}),v}(a.writeTree,a.treePath,o)}function qr(a,o,l,v){return function vu(a,o,l,v,E){(0,$.hu)(v||E,"Either existingEventSnap or existingServerSnap must exist");const A=Xr(o,l);if(hn(a.visibleWrites,A))return null;{const R=un(a.visibleWrites,A);return kr(R)?E.getChild(l):Hr(R,E.getChild(l))}}(a.writeTree,a.treePath,o,l,v)}function Ra(a,o){return function su(a,o){return ir(a.visibleWrites,o)}(a.writeTree,Xr(a.treePath,o))}function eo(a,o,l){return function Ka(a,o,l,v){const E=Xr(o,l),A=ir(a.visibleWrites,E);return null!=A?A:v.isCompleteForChild(l)?Hr(un(a.visibleWrites,E),v.getNode().getImmediateChild(l)):null}(a.writeTree,a.treePath,o,l)}function Lr(a,o){return Oa(Xr(a.treePath,o),a.writeTree)}function Oa(a,o){return{treePath:a,writeTree:o}}class Ri{constructor(){this.changeMap=new Map}trackChildChange(o){const l=o.type,v=o.childName;(0,$.hu)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,$.hu)(".priority"!==v,"Only non-priority child changes can be tracked.");const E=this.changeMap.get(v);if(E){const A=E.type;if("child_added"===l&&"child_removed"===A)this.changeMap.set(v,Y(v,o.snapshotNode,E.snapshotNode));else if("child_removed"===l&&"child_added"===A)this.changeMap.delete(v);else if("child_removed"===l&&"child_changed"===A)this.changeMap.set(v,ss(v,E.oldSnap));else if("child_changed"===l&&"child_added"===A)this.changeMap.set(v,Es(v,o.snapshotNode));else{if("child_changed"!==l||"child_changed"!==A)throw(0,$.g5)("Illegal combination of changes: "+o+" occurred after "+E);this.changeMap.set(v,Y(v,o.snapshotNode,E.oldSnap))}}else this.changeMap.set(v,o)}getChanges(){return Array.from(this.changeMap.values())}}const Li=new class Yc{getCompleteChild(o){return null}getChildAfterChild(o,l,v){return null}};class Yn{constructor(o,l,v=null){this.writes_=o,this.viewCache_=l,this.optCompleteServerCache_=v}getCompleteChild(o){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(o))return l.getNode().getImmediateChild(o);{const v=null!=this.optCompleteServerCache_?new ho(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return eo(this.writes_,o,v)}}getChildAfterChild(o,l,v){const E=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ea(this.viewCache_),A=function Zu(a,o,l,v,E,A){return function ac(a,o,l,v,E,A,R){let k;const Z=un(a.visibleWrites,o),se=ir(Z,fn());if(null!=se)k=se;else{if(null==l)return[];k=Hr(Z,l)}if(k=k.withIndex(R),k.isEmpty()||k.isLeafNode())return[];{const Me=[],Ue=R.getCompare(),ze=A?k.getReverseIteratorFrom(v,R):k.getIteratorFrom(v,R);let Ct=ze.getNext();for(;Ct&&Me.length<E;)0!==Ue(Ct,v)&&Me.push(Ct),Ct=ze.getNext();return Me}}(a.writeTree,a.treePath,o,l,v,E,A)}(this.writes_,E,l,1,v,o);return 0===A.length?null:A[0]}}function la(a,o,l,v,E,A){const R=o.eventCache;if(null!=Ra(v,l))return o;{let k,Z;if(Qr(l))if((0,$.hu)(o.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),o.serverCache.isFiltered()){const se=ea(o),Ue=fo(v,se instanceof Fr?se:Fr.EMPTY_NODE);k=a.filter.updateFullNode(o.eventCache.getNode(),Ue,A)}else{const se=yu(v,ea(o));k=a.filter.updateFullNode(o.eventCache.getNode(),se,A)}else{const se=Sn(l);if(".priority"===se){(0,$.hu)(1===er(l),"Can't have a priority with additional path components");const Me=R.getNode();Z=o.serverCache.getNode();const Ue=qr(v,l,Me,Z);k=null!=Ue?a.filter.updatePriority(Me,Ue):R.getNode()}else{const Me=mr(l);let Ue;if(R.isCompleteForChild(se)){Z=o.serverCache.getNode();const ze=qr(v,l,R.getNode(),Z);Ue=null!=ze?R.getNode().getImmediateChild(se).updateChild(Me,ze):R.getNode().getImmediateChild(se)}else Ue=eo(v,se,o.serverCache);k=null!=Ue?a.filter.updateChild(R.getNode(),se,Ue,Me,E,A):R.getNode()}}return Pu(o,k,R.isFullyInitialized()||Qr(l),a.filter.filtersNodes())}}function da(a,o,l,v,E,A,R,k){const Z=o.serverCache;let se;const Me=R?a.filter:a.filter.getIndexedFilter();if(Qr(l))se=Me.updateFullNode(Z.getNode(),v,null);else if(Me.filtersNodes()&&!Z.isFiltered()){const Ct=Z.getNode().updateChild(l,v);se=Me.updateFullNode(Z.getNode(),Ct,null)}else{const Ct=Sn(l);if(!Z.isCompleteForPath(l)&&er(l)>1)return o;const Mt=mr(l),Rn=Z.getNode().getImmediateChild(Ct).updateChild(Mt,v);se=".priority"===Ct?Me.updatePriority(Z.getNode(),Rn):Me.updateChild(Z.getNode(),Ct,Rn,Mt,Li,null)}const Ue=_a(o,se,Z.isFullyInitialized()||Qr(l),Me.filtersNodes());return la(a,Ue,l,E,new Yn(E,Ue,A),k)}function au(a,o,l,v,E,A,R){const k=o.eventCache;let Z,se;const Me=new Yn(E,o,A);if(Qr(l))se=a.filter.updateFullNode(o.eventCache.getNode(),v,R),Z=Pu(o,se,!0,a.filter.filtersNodes());else{const Ue=Sn(l);if(".priority"===Ue)se=a.filter.updatePriority(o.eventCache.getNode(),v),Z=Pu(o,se,k.isFullyInitialized(),k.isFiltered());else{const ze=mr(l),Ct=k.getNode().getImmediateChild(Ue);let Mt;if(Qr(ze))Mt=v;else{const gn=Me.getCompleteChild(Ue);Mt=null!=gn?".priority"===hi(ze)&&gn.getChild(uo(ze)).isEmpty()?gn:gn.updateChild(ze,v):Fr.EMPTY_NODE}Z=Ct.equals(Mt)?o:Pu(o,a.filter.updateChild(k.getNode(),Ue,Mt,ze,Me,R),k.isFullyInitialized(),a.filter.filtersNodes())}}return Z}function uc(a,o){return a.eventCache.isCompleteForChild(o)}function jt(a,o,l){return l.foreach((v,E)=>{o=o.updateChild(v,E)}),o}function uu(a,o,l,v,E,A,R,k){if(o.serverCache.getNode().isEmpty()&&!o.serverCache.isFullyInitialized())return o;let se,Z=o;se=Qr(l)?v:new ue(null).setTree(l,v);const Me=o.serverCache.getNode();return se.children.inorderTraversal((Ue,ze)=>{if(Me.hasChild(Ue)){const Mt=jt(0,o.serverCache.getNode().getImmediateChild(Ue),ze);Z=da(a,Z,new Ht(Ue),Mt,E,A,R,k)}}),se.children.inorderTraversal((Ue,ze)=>{const Ct=!o.serverCache.isCompleteForChild(Ue)&&null===ze.value;if(!Me.hasChild(Ue)&&!Ct){const gn=jt(0,o.serverCache.getNode().getImmediateChild(Ue),ze);Z=da(a,Z,new Ht(Ue),gn,E,A,R,k)}}),Z}class Ss{constructor(o,l){this.query_=o,this.eventRegistrations_=[];const v=this.query_._queryParams,E=new T(v.getIndex()),A=function Vt(a){return a.loadsAllData()?new T(a.getIndex()):a.hasLimit()?new j(a):new S(a)}(v);this.processor_=function _u(a){return{filter:a}}(A);const R=l.serverCache,k=l.eventCache,Z=E.updateFullNode(Fr.EMPTY_NODE,R.getNode(),null),se=A.updateFullNode(Fr.EMPTY_NODE,k.getNode(),null),Me=new ho(Z,R.isFullyInitialized(),E.filtersNodes()),Ue=new ho(se,k.isFullyInitialized(),A.filtersNodes());this.viewCache_=Nu(Ue,Me),this.eventGenerator_=new Js(this.query_)}get query(){return this.query_}}function zo(a,o){const l=ea(a.viewCache_);return l&&(a.query._queryParams.loadsAllData()||!Qr(o)&&!l.getImmediateChild(Sn(o)).isEmpty())?l.getChild(o):null}function Dc(a){return 0===a.eventRegistrations_.length}function Bi(a,o,l){const v=[];if(l){(0,$.hu)(null==o,"A cancel should cancel all event registrations.");const E=a.query._path;a.eventRegistrations_.forEach(A=>{const R=A.createCancelEvent(l,E);R&&v.push(R)})}if(o){let E=[];for(let A=0;A<a.eventRegistrations_.length;++A){const R=a.eventRegistrations_[A];if(R.matches(o)){if(o.hasAnyCallback()){E=E.concat(a.eventRegistrations_.slice(A+1));break}}else E.push(R)}a.eventRegistrations_=E}else a.eventRegistrations_=[];return v}function Tc(a,o,l,v){o.type===mo.MERGE&&null!==o.source.queryId&&((0,$.hu)(ea(a.viewCache_),"We should always have a full cache before handling merges"),(0,$.hu)(za(a.viewCache_),"Missing event cache, even though we have a server cache"));const E=a.viewCache_,A=function qa(a,o,l,v,E){const A=new Ri;let R,k;if(l.type===mo.OVERWRITE){const se=l;se.source.fromUser?R=au(a,o,se.path,se.snap,v,E,A):((0,$.hu)(se.source.fromServer,"Unknown source."),k=se.source.tagged||o.serverCache.isFiltered()&&!Qr(se.path),R=da(a,o,se.path,se.snap,v,E,k,A))}else if(l.type===mo.MERGE){const se=l;se.source.fromUser?R=function bc(a,o,l,v,E,A,R){let k=o;return v.foreach((Z,se)=>{const Me=Xr(l,Z);uc(o,Sn(Me))&&(k=au(a,k,Me,se,E,A,R))}),v.foreach((Z,se)=>{const Me=Xr(l,Z);uc(o,Sn(Me))||(k=au(a,k,Me,se,E,A,R))}),k}(a,o,se.path,se.children,v,E,A):((0,$.hu)(se.source.fromServer,"Unknown source."),k=se.source.tagged||o.serverCache.isFiltered(),R=uu(a,o,se.path,se.children,v,E,k,A))}else if(l.type===mo.ACK_USER_WRITE){const se=l;R=se.revert?function Ma(a,o,l,v,E,A){let R;if(null!=Ra(v,l))return o;{const k=new Yn(v,o,E),Z=o.eventCache.getNode();let se;if(Qr(l)||".priority"===Sn(l)){let Me;if(o.serverCache.isFullyInitialized())Me=yu(v,ea(o));else{const Ue=o.serverCache.getNode();(0,$.hu)(Ue instanceof Fr,"serverChildren would be complete if leaf node"),Me=fo(v,Ue)}se=a.filter.updateFullNode(Z,Me,A)}else{const Me=Sn(l);let Ue=eo(v,Me,o.serverCache);null==Ue&&o.serverCache.isCompleteForChild(Me)&&(Ue=Z.getImmediateChild(Me)),se=null!=Ue?a.filter.updateChild(Z,Me,Ue,mr(l),k,A):o.eventCache.getNode().hasChild(Me)?a.filter.updateChild(Z,Me,Fr.EMPTY_NODE,mr(l),k,A):Z,se.isEmpty()&&o.serverCache.isFullyInitialized()&&(R=yu(v,ea(o)),R.isLeafNode()&&(se=a.filter.updateFullNode(se,R,A)))}return R=o.serverCache.isFullyInitialized()||null!=Ra(v,fn()),Pu(o,se,R,a.filter.filtersNodes())}}(a,o,se.path,v,E,A):function tt(a,o,l,v,E,A,R){if(null!=Ra(E,l))return o;const k=o.serverCache.isFiltered(),Z=o.serverCache;if(null!=v.value){if(Qr(l)&&Z.isFullyInitialized()||Z.isCompleteForPath(l))return da(a,o,l,Z.getNode().getChild(l),E,A,k,R);if(Qr(l)){let se=new ue(null);return Z.getNode().forEachChild($r,(Me,Ue)=>{se=se.set(new Ht(Me),Ue)}),uu(a,o,l,se,E,A,k,R)}return o}{let se=new ue(null);return v.foreach((Me,Ue)=>{const ze=Xr(l,Me);Z.isCompleteForPath(ze)&&(se=se.set(Me,Z.getNode().getChild(ze)))}),uu(a,o,l,se,E,A,k,R)}}(a,o,se.path,se.affectedTree,v,E,A)}else{if(l.type!==mo.LISTEN_COMPLETE)throw(0,$.g5)("Unknown operation type: "+l.type);R=function us(a,o,l,v,E){const A=o.serverCache;return la(a,_a(o,A.getNode(),A.isFullyInitialized()||Qr(l),A.isFiltered()),l,v,Li,E)}(a,o,l.path,v,A)}const Z=A.getChanges();return function $a(a,o,l){const v=o.eventCache;if(v.isFullyInitialized()){const E=v.getNode().isLeafNode()||v.getNode().isEmpty(),A=za(a);(l.length>0||!a.eventCache.isFullyInitialized()||E&&!v.getNode().equals(A)||!v.getNode().getPriority().equals(A.getPriority()))&&l.push($s(za(o)))}}(o,R,Z),{viewCache:R,changes:Z}}(a.processor_,E,o,l,v);return function qi(a,o){(0,$.hu)(o.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),(0,$.hu)(o.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed")}(a.processor_,A.viewCache),(0,$.hu)(A.viewCache.serverCache.isFullyInitialized()||!E.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),a.viewCache_=A.viewCache,Ps(a,A.changes,A.viewCache.eventCache.getNode(),null)}function Ps(a,o,l,v){return function Ti(a,o,l,v){const E=[],A=[];return o.forEach(R=>{"child_changed"===R.type&&a.index_.indexedValueChanged(R.oldSnap,R.snapshotNode)&&A.push(function w(a,o){return{type:"child_moved",snapshotNode:o,childName:a}}(R.childName,R.snapshotNode))}),ya(a,E,"child_removed",o,v,l),ya(a,E,"child_added",o,v,l),ya(a,E,"child_moved",A,v,l),ya(a,E,"child_changed",o,v,l),ya(a,E,"value",o,v,l),E}(a.eventGenerator_,o,l,v?[v]:a.eventRegistrations_)}let wu,Fs;class Co{constructor(){this.views=new Map}}function Na(a,o,l,v){const E=o.source.queryId;if(null!==E){const A=a.views.get(E);return(0,$.hu)(null!=A,"SyncTree gave us an op for an invalid query."),Tc(A,o,l,v)}{let A=[];for(const R of a.views.values())A=A.concat(Tc(R,o,l,v));return A}}function Lu(a,o,l,v,E){const R=a.views.get(o._queryIdentifier);if(!R){let k=yu(l,E?v:null),Z=!1;k?Z=!0:v instanceof Fr?(k=fo(l,v),Z=!1):(k=Fr.EMPTY_NODE,Z=!1);const se=Nu(new ho(k,Z,!1),new ho(v,E,!1));return new Ss(o,se)}return R}function fa(a){const o=[];for(const l of a.views.values())l.query._queryParams.loadsAllData()||o.push(l);return o}function Ca(a,o){let l=null;for(const v of a.views.values())l=l||zo(v,o);return l}function ks(a,o){return o._queryParams.loadsAllData()?Za(a):a.views.get(o._queryIdentifier)}function Pa(a,o){return null!=ks(a,o)}function so(a){return null!=Za(a)}function Za(a){for(const o of a.views.values())if(o.query._queryParams.loadsAllData())return o;return null}let cc=1;class fl{constructor(o){this.listenProvider_=o,this.syncPointTree_=new ue(null),this.pendingWriteTree_=function wa(){return{visibleWrites:Q.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Oo(a,o,l,v,E){return function Xn(a,o,l,v,E){(0,$.hu)(v>a.lastWriteId,"Stacking an older write on top of newer ones"),void 0===E&&(E=!0),a.allWrites.push({path:o,snap:l,writeId:v,visible:E}),E&&(a.visibleWrites=Ie(a.visibleWrites,o,l)),a.lastWriteId=v}(a.pendingWriteTree_,o,l,v,E),E?ar(a,new Qs({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},o,l)):[]}function ds(a,o,l=!1){const v=function Fn(a,o){for(let l=0;l<a.allWrites.length;l++){const v=a.allWrites[l];if(v.writeId===o)return v}return null}(a.pendingWriteTree_,o);if(function nn(a,o){const l=a.allWrites.findIndex(k=>k.writeId===o);(0,$.hu)(l>=0,"removeWrite called with nonexistent writeId.");const v=a.allWrites[l];a.allWrites.splice(l,1);let E=v.visible,A=!1,R=a.allWrites.length-1;for(;E&&R>=0;){const k=a.allWrites[R];k.visible&&(R>=l&&vn(k,v.path)?E=!1:xo(v.path,k.path)&&(A=!0)),R--}return!!E&&(A?(function Ur(a){a.visibleWrites=Ea(a.allWrites,bi,fn()),a.lastWriteId=a.allWrites.length>0?a.allWrites[a.allWrites.length-1].writeId:-1}(a),!0):(v.snap?a.visibleWrites=Wt(a.visibleWrites,v.path):br(v.children,Z=>{a.visibleWrites=Wt(a.visibleWrites,Xr(v.path,Z))}),!0))}(a.pendingWriteTree_,o)){let A=new ue(null);return null!=v.snap?A=A.set(fn(),!0):br(v.children,R=>{A=A.set(new Ht(R),!0)}),ar(a,new Jo(v.path,A,l))}return[]}function F(a,o,l){return ar(a,new Qs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o,l))}function ne(a,o,l,v,E=!1){const A=o._path,R=a.syncPointTree_.get(A);let k=[];if(R&&("default"===o._queryIdentifier||Pa(R,o))){const Z=function Qu(a,o,l,v){const E=o._queryIdentifier,A=[];let R=[];const k=so(a);if("default"===E)for(const[Z,se]of a.views.entries())R=R.concat(Bi(se,l,v)),Dc(se)&&(a.views.delete(Z),se.query._queryParams.loadsAllData()||A.push(se.query));else{const Z=a.views.get(E);Z&&(R=R.concat(Bi(Z,l,v)),Dc(Z)&&(a.views.delete(E),Z.query._queryParams.loadsAllData()||A.push(Z.query)))}return k&&!so(a)&&A.push(new(function ha(){return(0,$.hu)(wu,"Reference.ts has not been loaded"),wu}())(o._repo,o._path)),{removed:A,events:R}}(R,o,l,v);(function Xu(a){return 0===a.views.size})(R)&&(a.syncPointTree_=a.syncPointTree_.remove(A));const se=Z.removed;if(k=Z.events,!E){const Me=-1!==se.findIndex(ze=>ze._queryParams.loadsAllData()),Ue=a.syncPointTree_.findOnPath(A,(ze,Ct)=>so(Ct));if(Me&&!Ue){const ze=a.syncPointTree_.subtree(A);if(!ze.isEmpty()){const Ct=function _r(a){return a.fold((o,l,v)=>{if(l&&so(l))return[Za(l)];{let E=[];return l&&(E=fa(l)),br(v,(A,R)=>{E=E.concat(R)}),E}})}(ze);for(let Mt=0;Mt<Ct.length;++Mt){const gn=Ct[Mt],Rn=gn.query,$n=oe(a,gn);a.listenProvider_.startListening(vr(Rn),Ee(a,Rn),$n.hashFn,$n.onComplete)}}}!Ue&&se.length>0&&!v&&(Me?a.listenProvider_.stopListening(vr(o),null):se.forEach(ze=>{const Ct=a.queryToTagMap.get(dt(ze));a.listenProvider_.stopListening(vr(ze),Ct)}))}!function Pr(a,o){for(let l=0;l<o.length;++l){const v=o[l];if(!v._queryParams.loadsAllData()){const E=dt(v),A=a.queryToTagMap.get(E);a.queryToTagMap.delete(E),a.tagToQueryMap.delete(A)}}}(a,se)}return k}function _e(a,o,l,v){const E=Nt(a,v);if(null!=E){const A=zt(E),R=A.path,k=A.queryId,Z=Si(R,o);return xn(a,R,new Qs(To(k),Z,l))}return[]}function Tt(a,o,l,v=!1){const E=o._path;let A=null,R=!1;a.syncPointTree_.foreachOnPath(E,(ze,Ct)=>{const Mt=Si(ze,E);A=A||Ca(Ct,Mt),R=R||so(Ct)});let Z,k=a.syncPointTree_.get(E);k?(R=R||so(k),A=A||Ca(k,fn())):(k=new Co,a.syncPointTree_=a.syncPointTree_.set(E,k)),null!=A?Z=!0:(Z=!1,A=Fr.EMPTY_NODE,a.syncPointTree_.subtree(E).foreachChild((Ct,Mt)=>{const gn=Ca(Mt,fn());gn&&(A=A.updateImmediateChild(Ct,gn))}));const se=Pa(k,o);if(!se&&!o._queryParams.loadsAllData()){const ze=dt(o);(0,$.hu)(!a.queryToTagMap.has(ze),"View does not exist, but we have a tag");const Ct=function Ii(){return cc++}();a.queryToTagMap.set(ze,Ct),a.tagToQueryMap.set(Ct,ze)}let Ue=function to(a,o,l,v,E,A){const R=Lu(a,o,v,E,A);return a.views.has(o._queryIdentifier)||a.views.set(o._queryIdentifier,R),function Fu(a,o){a.eventRegistrations_.push(o)}(R,l),function Eu(a,o){const l=a.viewCache_.eventCache,v=[];return l.getNode().isLeafNode()||l.getNode().forEachChild(wi,(A,R)=>{v.push(Es(A,R))}),l.isFullyInitialized()&&v.push($s(l.getNode())),Ps(a,v,l.getNode(),o)}(R,l)}(k,o,l,Cn(a.pendingWriteTree_,E),A,Z);if(!se&&!R&&!v){const ze=ks(k,o);Ue=Ue.concat(function nr(a,o,l){const v=o._path,E=Ee(a,o),A=oe(a,l),R=a.listenProvider_.startListening(vr(o),E,A.hashFn,A.onComplete),k=a.syncPointTree_.subtree(v);if(E)(0,$.hu)(!so(k.value),"If we're adding a query, it shouldn't be shadowed");else{const Z=k.fold((se,Me,Ue)=>{if(!Qr(se)&&Me&&so(Me))return[Za(Me).query];{let ze=[];return Me&&(ze=ze.concat(fa(Me).map(Ct=>Ct.query))),br(Ue,(Ct,Mt)=>{ze=ze.concat(Mt)}),ze}});for(let se=0;se<Z.length;++se){const Me=Z[se];a.listenProvider_.stopListening(vr(Me),Ee(a,Me))}}return R}(a,o,ze))}return Ue}function tn(a,o,l){const E=a.pendingWriteTree_,A=a.syncPointTree_.findOnPath(o,(R,k)=>{const se=Ca(k,Si(R,o));if(se)return se});return Va(E,o,A,l,!0)}function ar(a,o){return or(o,a.syncPointTree_,null,Cn(a.pendingWriteTree_,fn()))}function or(a,o,l,v){if(Qr(a.path))return K(a,o,l,v);{const E=o.get(fn());null==l&&null!=E&&(l=Ca(E,fn()));let A=[];const R=Sn(a.path),k=a.operationForChild(R),Z=o.children.get(R);if(Z&&k){const se=l?l.getImmediateChild(R):null,Me=Lr(v,R);A=A.concat(or(k,Z,se,Me))}return E&&(A=A.concat(Na(E,a,v,l))),A}}function K(a,o,l,v){const E=o.get(fn());null==l&&null!=E&&(l=Ca(E,fn()));let A=[];return o.children.inorderTraversal((R,k)=>{const Z=l?l.getImmediateChild(R):null,se=Lr(v,R),Me=a.operationForChild(R);Me&&(A=A.concat(K(Me,k,Z,se)))}),E&&(A=A.concat(Na(E,a,v,l))),A}function oe(a,o){const l=o.query,v=Ee(a,l);return{hashFn:()=>(function Gt(a){return a.viewCache_.serverCache.getNode()}(o)||Fr.EMPTY_NODE).hash(),onComplete:E=>{if("ok"===E)return v?function V(a,o,l){const v=Nt(a,l);if(v){const E=zt(v),A=E.path,R=E.queryId,k=Si(A,o);return xn(a,A,new Xs(To(R),k))}return[]}(a,l._path,v):function O(a,o){return ar(a,new Xs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o))}(a,l._path);{const A=function Bn(a,o){let l="Unknown Error";"too_big"===a?l="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===a?l="Client doesn't have permission to access the desired data.":"unavailable"===a&&(l="The service is unavailable");const v=new Error(a+" at "+o._path.toString()+": "+l);return v.code=a.toUpperCase(),v}(E,l);return ne(a,l,null,A)}}}}function Ee(a,o){const l=dt(o);return a.queryToTagMap.get(l)}function dt(a){return a._path.toString()+"$"+a._queryIdentifier}function Nt(a,o){return a.tagToQueryMap.get(o)}function zt(a){const o=a.indexOf("$");return(0,$.hu)(-1!==o&&o<a.length-1,"Bad queryKey."),{queryId:a.substr(o+1),path:new Ht(a.substr(0,o))}}function xn(a,o,l){const v=a.syncPointTree_.get(o);return(0,$.hu)(v,"Missing sync point for query tag that we're tracking"),Na(v,l,Cn(a.pendingWriteTree_,o),null)}function vr(a){return a._queryParams.loadsAllData()&&!a._queryParams.isDefault()?new(function Ju(){return(0,$.hu)(Fs,"Reference.ts has not been loaded"),Fs}())(a._repo,a._path):a}class mi{constructor(o){this.node_=o}getImmediateChild(o){const l=this.node_.getImmediateChild(o);return new mi(l)}node(){return this.node_}}class Wo{constructor(o,l){this.syncTree_=o,this.path_=l}getImmediateChild(o){const l=Xr(this.path_,o);return new Wo(this.syncTree_,l)}node(){return tn(this.syncTree_,this.path_)}}const ec=function(a){return(a=a||{}).timestamp=a.timestamp||(new Date).getTime(),a},lc=function(a,o,l){return a&&"object"==typeof a?((0,$.hu)(".sv"in a,"Unexpected leaf node or priority contents"),"string"==typeof a[".sv"]?Cu(a[".sv"],o,l):"object"==typeof a[".sv"]?Ha(a[".sv"],o):void(0,$.hu)(!1,"Unexpected server value: "+JSON.stringify(a,null,2))):a},Cu=function(a,o,l){if("timestamp"===a)return l.timestamp;(0,$.hu)(!1,"Unexpected server value: "+a)},Ha=function(a,o,l){a.hasOwnProperty("increment")||(0,$.hu)(!1,"Unexpected server value: "+JSON.stringify(a,null,2));const v=a.increment;"number"!=typeof v&&(0,$.hu)(!1,"Unexpected increment value: "+v);const E=o.node();if((0,$.hu)(null!==E&&typeof E<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!E.isLeafNode())return v;const R=E.getValue();return"number"!=typeof R?v:R+v},Xa=function(a,o,l,v){return pl(o,new Wo(l,a),v)},Qa=function(a,o,l){return pl(a,new mi(o),l)};function pl(a,o,l){const v=a.getPriority().val(),E=lc(v,o.getImmediateChild(".priority"),l);let A;if(a.isLeafNode()){const R=a,k=lc(R.getValue(),o,l);return k!==R.getValue()||E!==R.getPriority().val()?new Ni(k,Gi(E)):a}{const R=a;return A=R,E!==R.getPriority().val()&&(A=A.updatePriority(new Ni(E))),R.forEachChild(wi,(k,Z)=>{const se=pl(Z,o.getImmediateChild(k),l);se!==Z&&(A=A.updateImmediateChild(k,se))}),A}}class nd{constructor(o="",l=null,v={children:{},childCount:0}){this.name=o,this.parent=l,this.node=v}}function gl(a,o){let l=o instanceof Ht?o:new Ht(o),v=a,E=Sn(l);for(;null!==E;){const A=(0,$.DV)(v.node.children,E)||{children:{},childCount:0};v=new nd(E,v,A),l=mr(l),E=Sn(l)}return v}function cu(a){return a.node.value}function ml(a,o){a.node.value=o,es(a)}function rd(a){return a.node.childCount>0}function vl(a,o){br(a.node.children,(l,v)=>{o(new nd(l,a,v))})}function Oc(a,o,l,v){l&&!v&&o(a),vl(a,E=>{Oc(E,o,!0,v)}),l&&v&&o(a)}function Fl(a){return new Ht(null===a.parent?a.name:Fl(a.parent)+"/"+a.name)}function es(a){null!==a.parent&&function od(a,o,l){const v=function id(a){return void 0===cu(a)&&!rd(a)}(l),E=(0,$.r3)(a.node.children,o);v&&E?(delete a.node.children[o],a.node.childCount--,es(a)):!v&&!E&&(a.node.children[o]=l.node,a.node.childCount++,es(a))}(a.parent,a.name,a)}const Fa=/[\[\].#$\/\u0000-\u001F\u007F]/,Yo=/[\[\].#$\u0000-\u001F\u007F]/,sd=10485760,dc=function(a){return"string"==typeof a&&0!==a.length&&!Fa.test(a)},Ia=function(a){return"string"==typeof a&&0!==a.length&&!Yo.test(a)},hc=function(a){return null===a||"string"==typeof a||"number"==typeof a&&!mn(a)||a&&"object"==typeof a&&(0,$.r3)(a,".sv")},no=function(a,o,l,v){v&&void 0===o||Kc((0,$.gK)(a,"value"),o,l)},Kc=function(a,o,l){const v=l instanceof Ht?new ns(l,a):l;if(void 0===o)throw new Error(a+"contains undefined "+fs(v));if("function"==typeof o)throw new Error(a+"contains a function "+fs(v)+" with contents = "+o.toString());if(mn(o))throw new Error(a+"contains "+o.toString()+" "+fs(v));if("string"==typeof o&&o.length>sd/3&&(0,$.ug)(o)>sd)throw new Error(a+"contains a string greater than "+sd+" utf8 bytes "+fs(v)+" ('"+o.substring(0,50)+"...')");if(o&&"object"==typeof o){let E=!1,A=!1;if(br(o,(R,k)=>{if(".value"===R)E=!0;else if(".priority"!==R&&".sv"!==R&&(A=!0,!dc(R)))throw new Error(a+" contains an invalid key ("+R+") "+fs(v)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Bo(a,o){a.parts_.length>0&&(a.byteLength_+=1),a.parts_.push(o),a.byteLength_+=(0,$.ug)(o),Zo(a)})(v,R),Kc(a,k,v),function Mo(a){const o=a.parts_.pop();a.byteLength_-=(0,$.ug)(o),a.parts_.length>0&&(a.byteLength_-=1)}(v)}),E&&A)throw new Error(a+' contains ".value" child '+fs(v)+" in addition to actual children.")}},pa=function(a,o,l,v){if(v&&void 0===o)return;const E=(0,$.gK)(a,"values");if(!o||"object"!=typeof o||Array.isArray(o))throw new Error(E+" must be an object containing the children to replace.");const A=[];br(o,(R,k)=>{const Z=new Ht(R);if(Kc(E,k,Xr(l,Z)),".priority"===hi(Z)&&!hc(k))throw new Error(E+"contains an invalid value for '"+Z.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");A.push(Z)}),function(a,o){let l,v;for(l=0;l<o.length;l++){v=o[l];const A=ji(v);for(let R=0;R<A.length;R++)if((".priority"!==A[R]||R!==A.length-1)&&!dc(A[R]))throw new Error(a+"contains an invalid key ("+A[R]+") in path "+v.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}o.sort(Os);let E=null;for(l=0;l<o.length;l++){if(v=o[l],null!==E&&xo(E,v))throw new Error(a+"contains a path "+E.toString()+" that is ancestor of another path "+v.toString());E=v}}(E,A)},Mc=function(a,o,l){if(!l||void 0!==o){if(mn(o))throw new Error((0,$.gK)(a,"priority")+"is "+o.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!hc(o))throw new Error((0,$.gK)(a,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},fc=function(a,o,l,v){if(!(v&&void 0===l||dc(l)))throw new Error((0,$.gK)(a,o)+'was an invalid key = "'+l+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},pc=function(a,o,l,v){if(!(v&&void 0===l||Ia(l)))throw new Error((0,$.gK)(a,o)+'was an invalid path = "'+l+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ad=function(a,o,l,v){l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),pc(a,o,l,v)},xa=function(a,o){if(".info"===Sn(o))throw new Error(a+" failed = Can't modify data under /.info/")},Bu=function(a,o){const l=o.path.toString();if("string"!=typeof o.repoInfo.host||0===o.repoInfo.host.length||!dc(o.repoInfo.namespace)&&"localhost"!==o.repoInfo.host.split(":")[0]||0!==l.length&&!function(a){return a&&(a=a.replace(/^\/*\.info(\/|$)/,"/")),Ia(a)}(l))throw new Error((0,$.gK)(a,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class yo{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Uu(a,o){let l=null;for(let v=0;v<o.length;v++){const E=o[v],A=E.getPath();null!==l&&!zs(A,l.path)&&(a.eventLists_.push(l),l=null),null===l&&(l={events:[],path:A}),l.events.push(E)}l&&a.eventLists_.push(l)}function gc(a,o,l){Uu(a,l),Nc(a,v=>zs(v,o))}function bs(a,o,l){Uu(a,l),Nc(a,v=>xo(v,o)||xo(o,v))}function Nc(a,o){a.recursionDepth_++;let l=!0;for(let v=0;v<a.eventLists_.length;v++){const E=a.eventLists_[v];E&&(o(E.path)?(La(a.eventLists_[v]),a.eventLists_[v]=null):l=!1)}l&&(a.eventLists_=[]),a.recursionDepth_--}function La(a){for(let o=0;o<a.events.length;o++){const l=a.events[o];if(null!==l){a.events[o]=null;const v=l.getEventRunner();re&&rt("event: "+l.toString()),cn(v)}}}const Iu="repo_interrupt",Ls=25;class _l{constructor(o,l,v,E){this.repoInfo_=o,this.forceRestClient_=l,this.authTokenProvider_=v,this.appCheckProvider_=E,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new yo,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=lr(),this.transactionQueueTree_=new nd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Vu(a){const l=a.infoData_.getNode(new Ht(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function Pc(a){return ec({timestamp:Vu(a)})}function mc(a,o,l,v,E){a.dataUpdateCount++;const A=new Ht(o);l=a.interceptServerDataCallback_?a.interceptServerDataCallback_(o,l):l;let R=[];if(E)if(v){const Z=(0,$.UI)(l,se=>Gi(se));R=function Ae(a,o,l,v){const E=Nt(a,v);if(E){const A=zt(E),R=A.path,k=A.queryId,Z=Si(R,o),se=ue.fromObject(l);return xn(a,R,new Cs(To(k),Z,se))}return[]}(a.serverSyncTree_,A,Z,E)}else{const Z=Gi(l);R=_e(a.serverSyncTree_,A,Z,E)}else if(v){const Z=(0,$.UI)(l,se=>Gi(se));R=function B(a,o,l){const v=ue.fromObject(l);return ar(a,new Cs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o,v))}(a.serverSyncTree_,A,Z)}else{const Z=Gi(l);R=F(a.serverSyncTree_,A,Z)}let k=A;R.length>0&&(k=Io(a,A)),bs(a.eventQueue_,k,R)}function kc(a,o){Bl(a,"connected",o),!1===o&&function cd(a){hu(a,"onDisconnectEvents");const o=Pc(a),l=lr();ui(a.onDisconnect_,fn(),(E,A)=>{const R=Xa(E,A,a.serverSyncTree_,o);Qn(l,E,R)});let v=[];ui(l,fn(),(E,A)=>{v=v.concat(F(a.serverSyncTree_,E,A));const R=Lc(a,E);Io(a,R)}),a.onDisconnect_=lr(),bs(a.eventQueue_,fn(),v)}(a)}function Bl(a,o,l){const v=new Ht("/.info/"+o),E=Gi(l);a.infoData_.updateSnapshot(v,E);const A=F(a.infoSyncTree_,v,E);bs(a.eventQueue_,v,A)}function lu(a){return a.nextWriteId_++}function qc(a,o,l,v,E){hu(a,"set",{path:o.toString(),value:l,priority:v});const A=Pc(a),R=Gi(l,v),k=tn(a.serverSyncTree_,o),Z=Qa(R,k,A),se=lu(a),Me=Oo(a.serverSyncTree_,o,Z,se,!0);Uu(a.eventQueue_,Me),a.server_.put(o.toString(),R.val(!0),(ze,Ct)=>{const Mt="ok"===ze;Mt||yn("set at "+o+" failed: "+ze);const gn=ds(a.serverSyncTree_,se,!Mt);bs(a.eventQueue_,o,gn),ga(0,E,ze,Ct)});const Ue=Lc(a,o);Io(a,Ue),bs(a.eventQueue_,Ue,[])}function El(a,o,l){a.server_.onDisconnectCancel(o.toString(),(v,E)=>{"ok"===v&&Nr(a.onDisconnect_,o),ga(0,l,v,E)})}function ld(a,o,l,v){const E=Gi(l);a.server_.onDisconnectPut(o.toString(),E.val(!0),(A,R)=>{"ok"===A&&Qn(a.onDisconnect_,o,E),ga(0,v,A,R)})}function po(a,o,l){let v;v=".info"===Sn(o._path)?ne(a.infoSyncTree_,o,l):ne(a.serverSyncTree_,o,l),gc(a.eventQueue_,o._path,v)}function du(a){a.persistentConnection_&&a.persistentConnection_.interrupt(Iu)}function hu(a,...o){let l="";a.persistentConnection_&&(l=a.persistentConnection_.id+":"),rt(l,...o)}function ga(a,o,l,v){o&&cn(()=>{if("ok"===l)o(null);else{const E=(l||"error").toUpperCase();let A=E;v&&(A+=": "+v);const R=new Error(A);R.code=E,o(R)}})}function vc(a,o,l){return tn(a.serverSyncTree_,o,l)||Fr.EMPTY_NODE}function Zc(a,o=a.transactionQueueTree_){if(o||tc(a,o),cu(o)){const l=ko(a,o);(0,$.hu)(l.length>0,"Sending zero length transaction queue"),l.every(E=>0===E.status)&&function Cl(a,o,l){const v=l.map(se=>se.currentWriteId),E=vc(a,o,v);let A=E;const R=E.hash();for(let se=0;se<l.length;se++){const Me=l[se];(0,$.hu)(0===Me.status,"tryToSendTransactionQueue_: items in queue should all be run."),Me.status=1,Me.retryCount++;const Ue=Si(o,Me.path);A=A.updateChild(Ue,Me.currentOutputSnapshotRaw)}const k=A.val(!0),Z=o;a.server_.put(Z.toString(),k,se=>{hu(a,"transaction put response",{path:Z.toString(),status:se});let Me=[];if("ok"===se){const Ue=[];for(let ze=0;ze<l.length;ze++)l[ze].status=2,Me=Me.concat(ds(a.serverSyncTree_,l[ze].currentWriteId)),l[ze].onComplete&&Ue.push(()=>l[ze].onComplete(null,!0,l[ze].currentOutputSnapshotResolved)),l[ze].unwatcher();tc(a,gl(a.transactionQueueTree_,o)),Zc(a,a.transactionQueueTree_),bs(a.eventQueue_,o,Me);for(let ze=0;ze<Ue.length;ze++)cn(Ue[ze])}else{if("datastale"===se)for(let Ue=0;Ue<l.length;Ue++)l[Ue].status=3===l[Ue].status?4:0;else{yn("transaction at "+Z.toString()+" failed: "+se);for(let Ue=0;Ue<l.length;Ue++)l[Ue].status=4,l[Ue].abortReason=se}Io(a,o)}},R)}(a,Fl(o),l)}else rd(o)&&vl(o,l=>{Zc(a,l)})}function Io(a,o){const l=Fc(a,o),v=Fl(l);return function $l(a,o,l){if(0===o.length)return;const v=[];let E=[];const R=o.filter(k=>0===k.status).map(k=>k.currentWriteId);for(let k=0;k<o.length;k++){const Z=o[k],se=Si(l,Z.path);let Ue,Me=!1;if((0,$.hu)(null!==se,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Z.status)Me=!0,Ue=Z.abortReason,E=E.concat(ds(a.serverSyncTree_,Z.currentWriteId,!0));else if(0===Z.status)if(Z.retryCount>=Ls)Me=!0,Ue="maxretry",E=E.concat(ds(a.serverSyncTree_,Z.currentWriteId,!0));else{const ze=vc(a,Z.path,R);Z.currentInputSnapshot=ze;const Ct=o[k].update(ze.val());if(void 0!==Ct){Kc("transaction failed: Data returned ",Ct,Z.path);let Mt=Gi(Ct);"object"==typeof Ct&&null!=Ct&&(0,$.r3)(Ct,".priority")||(Mt=Mt.updatePriority(ze.getPriority()));const Rn=Z.currentWriteId,$n=Pc(a),Sr=Qa(Mt,ze,$n);Z.currentOutputSnapshotRaw=Mt,Z.currentOutputSnapshotResolved=Sr,Z.currentWriteId=lu(a),R.splice(R.indexOf(Rn),1),E=E.concat(Oo(a.serverSyncTree_,Z.path,Sr,Z.currentWriteId,Z.applyLocally)),E=E.concat(ds(a.serverSyncTree_,Rn,!0))}else Me=!0,Ue="nodata",E=E.concat(ds(a.serverSyncTree_,Z.currentWriteId,!0))}bs(a.eventQueue_,l,E),E=[],Me&&(o[k].status=2,setTimeout(o[k].unwatcher,Math.floor(0)),o[k].onComplete&&v.push("nodata"===Ue?()=>o[k].onComplete(null,!1,o[k].currentInputSnapshot):()=>o[k].onComplete(new Error(Ue),!1,null)))}tc(a,a.transactionQueueTree_);for(let k=0;k<v.length;k++)cn(v[k]);Zc(a,a.transactionQueueTree_)}(a,ko(a,l),v),v}function Fc(a,o){let l,v=a.transactionQueueTree_;for(l=Sn(o);null!==l&&void 0===cu(v);)v=gl(v,l),l=Sn(o=mr(o));return v}function ko(a,o){const l=[];return Dd(a,o,l),l.sort((v,E)=>v.order-E.order),l}function Dd(a,o,l){const v=cu(o);if(v)for(let E=0;E<v.length;E++)l.push(v[E]);vl(o,E=>{Dd(a,E,l)})}function tc(a,o){const l=cu(o);if(l){let v=0;for(let E=0;E<l.length;E++)2!==l[E].status&&(l[v]=l[E],v++);l.length=v,ml(o,l.length>0?l:void 0)}vl(o,v=>{tc(a,v)})}function Lc(a,o){const l=Fl(Fc(a,o)),v=gl(a.transactionQueueTree_,o);return function yl(a,o,l){let v=l?a:a.parent;for(;null!==v;){if(o(v))return!0;v=v.parent}}(v,E=>{Xc(a,E)}),Xc(a,v),Oc(v,E=>{Xc(a,E)}),l}function Xc(a,o){const l=cu(o);if(l){const v=[];let E=[],A=-1;for(let R=0;R<l.length;R++)3===l[R].status||(1===l[R].status?((0,$.hu)(A===R-1,"All SENT items should be at beginning of queue."),A=R,l[R].status=3,l[R].abortReason="set"):((0,$.hu)(0===l[R].status,"Unexpected transaction status in abort"),l[R].unwatcher(),E=E.concat(ds(a.serverSyncTree_,l[R].currentWriteId,!0)),l[R].onComplete&&v.push(l[R].onComplete.bind(null,new Error("set"),!1,null))));-1===A?ml(o,void 0):l.length=A+1,bs(a.eventQueue_,Fl(o),E);for(let R=0;R<v.length;R++)cn(v[R])}}const Bc=function(a,o){const l=qd(a),v=l.namespace;return"firebase.com"===l.domain&&Yt(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!v||"undefined"===v)&&"localhost"!==l.domain&&Yt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&yn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new qt(l.host,l.secure,v,"ws"===l.scheme||"wss"===l.scheme,o,"",v!==l.subdomain),path:new Ht(l.pathString)}},qd=function(a){let o="",l="",v="",E="",A="",R=!0,k="https",Z=443;if("string"==typeof a){let se=a.indexOf("//");se>=0&&(k=a.substring(0,se-1),a=a.substring(se+2));let Me=a.indexOf("/");-1===Me&&(Me=a.length);let Ue=a.indexOf("?");-1===Ue&&(Ue=a.length),o=a.substring(0,Math.min(Me,Ue)),Me<Ue&&(E=function yc(a){let o="";const l=a.split("/");for(let v=0;v<l.length;v++)if(l[v].length>0){let E=l[v];try{E=decodeURIComponent(E.replace(/\+/g," "))}catch(A){}o+="/"+E}return o}(a.substring(Me,Ue)));const ze=function Au(a){const o={};"?"===a.charAt(0)&&(a=a.substring(1));for(const l of a.split("&")){if(0===l.length)continue;const v=l.split("=");2===v.length?o[decodeURIComponent(v[0])]=decodeURIComponent(v[1]):yn(`Invalid query segment '${l}' in query '${a}'`)}return o}(a.substring(Math.min(a.length,Ue)));se=o.indexOf(":"),se>=0?(R="https"===k||"wss"===k,Z=parseInt(o.substring(se+1),10)):se=o.length;const Ct=o.slice(0,se);if("localhost"===Ct.toLowerCase())l="localhost";else if(Ct.split(".").length<=2)l=Ct;else{const Mt=o.indexOf(".");v=o.substring(0,Mt).toLowerCase(),l=o.substring(Mt+1),A=v}"ns"in ze&&(A=ze.ns)}return{host:o,port:Z,domain:l,subdomain:v,secure:R,scheme:k,pathString:E,namespace:A}},Hl="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Uc=function(){let a=0;const o=[];return function(l){const v=l===a;let E;a=l;const A=new Array(8);for(E=7;E>=0;E--)A[E]=Hl.charAt(l%64),l=Math.floor(l/64);(0,$.hu)(0===l,"Cannot push at time == 0");let R=A.join("");if(v){for(E=11;E>=0&&63===o[E];E--)o[E]=0;o[E]++}else for(E=0;E<12;E++)o[E]=Math.floor(64*Math.random());for(E=0;E<12;E++)R+=Hl.charAt(o[E]);return(0,$.hu)(20===R.length,"nextPushId: Length should be 20."),R}}();class nc{constructor(o,l,v,E){this.eventType=o,this.eventRegistration=l,this.snapshot=v,this.prevName=E}getPath(){const o=this.snapshot.ref;return"value"===this.eventType?o._path:o.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,$.Wl)(this.snapshot.exportVal())}}class Qc{constructor(o,l,v){this.eventRegistration=o,this.error=l,this.path=v}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Is{constructor(o,l){this.snapshotCallback=o,this.cancelCallback=l}onValue(o,l){this.snapshotCallback.call(null,o,l)}onCancel(o){return(0,$.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,o)}get hasCancelCallback(){return!!this.cancelCallback}matches(o){return this.snapshotCallback===o.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===o.snapshotCallback.userCallback&&this.snapshotCallback.context===o.snapshotCallback.context}}class ro{constructor(o,l){this._repo=o,this._path=l}cancel(){const o=new $.BH;return El(this._repo,this._path,o.wrapCallback(()=>{})),o.promise}remove(){xa("OnDisconnect.remove",this._path);const o=new $.BH;return ld(this._repo,this._path,null,o.wrapCallback(()=>{})),o.promise}set(o){xa("OnDisconnect.set",this._path),no("OnDisconnect.set",o,this._path,!1);const l=new $.BH;return ld(this._repo,this._path,o,l.wrapCallback(()=>{})),l.promise}setWithPriority(o,l){xa("OnDisconnect.setWithPriority",this._path),no("OnDisconnect.setWithPriority",o,this._path,!1),Mc("OnDisconnect.setWithPriority",l,!1);const v=new $.BH;return function bd(a,o,l,v,E){const A=Gi(l,v);a.server_.onDisconnectPut(o.toString(),A.val(!0),(R,k)=>{"ok"===R&&Qn(a.onDisconnect_,o,A),ga(0,E,R,k)})}(this._repo,this._path,o,l,v.wrapCallback(()=>{})),v.promise}update(o){xa("OnDisconnect.update",this._path),pa("OnDisconnect.update",o,this._path,!1);const l=new $.BH;return function xu(a,o,l,v){if((0,$.xb)(l))return rt("onDisconnect().update() called with empty data.  Don't do anything."),void ga(0,v,"ok",void 0);a.server_.onDisconnectMerge(o.toString(),l,(E,A)=>{"ok"===E&&br(l,(R,k)=>{const Z=Gi(k);Qn(a.onDisconnect_,Xr(o,R),Z)}),ga(0,v,E,A)})}(this._repo,this._path,o,l.wrapCallback(()=>{})),l.promise}}class Ja{constructor(o,l,v,E){this._repo=o,this._path=l,this._queryParams=v,this._orderByCalled=E}get key(){return Qr(this._path)?null:hi(this._path)}get ref(){return new Ko(this._repo,this._path)}get _queryIdentifier(){const o=Et(this._queryParams),l=Ir(o);return"{}"===l?"default":l}get _queryObject(){return Et(this._queryParams)}isEqual(o){if(!((o=(0,$.m9)(o))instanceof Ja))return!1;const l=this._repo===o._repo,v=zs(this._path,o._path);return l&&v&&this._queryIdentifier===o._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Yi(a){let o="";for(let l=a.pieceNum_;l<a.pieces_.length;l++)""!==a.pieces_[l]&&(o+="/"+encodeURIComponent(String(a.pieces_[l])));return o||"/"}(this._path)}}function _c(a,o){if(!0===a._orderByCalled)throw new Error(o+": You can't combine multiple orderBy calls.")}function Wa(a){let o=null,l=null;if(a.hasStart()&&(o=a.getIndexStartValue()),a.hasEnd()&&(l=a.getIndexEndValue()),a.getIndex()===$r){const v="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",E="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(a.hasStart()){if(a.getIndexStartName()!==Ar)throw new Error(v);if("string"!=typeof o)throw new Error(E)}if(a.hasEnd()){if(a.getIndexEndName()!==Nn)throw new Error(v);if("string"!=typeof l)throw new Error(E)}}else if(a.getIndex()===wi){if(null!=o&&!hc(o)||null!=l&&!hc(l))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,$.hu)(a.getIndex()instanceof Vs||a.getIndex()===No,"unknown index type."),null!=o&&"object"==typeof o||null!=l&&"object"==typeof l)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function jl(a){if(a.hasStart()&&a.hasEnd()&&a.hasLimit()&&!a.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ko extends Ja{constructor(o,l){super(o,l,new ve,!1)}get parent(){const o=uo(this._path);return null===o?null:new Ko(this._repo,o)}get root(){let o=this;for(;null!==o.parent;)o=o.parent;return o}}class Su{constructor(o,l,v){this._node=o,this.ref=l,this._index=v}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(o){const l=new Ht(o),v=Hs(this.ref,o);return new Su(this._node.getChild(l),v,wi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(o){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(v,E)=>o(new Su(E,Hs(this.ref,v),wi)))}hasChild(o){const l=new Ht(o);return!this._node.getChild(l).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function fu(a,o){return(a=(0,$.m9)(a))._checkNotDeleted("ref"),void 0!==o?Hs(a._root,o):a._root}function Il(a,o){(a=(0,$.m9)(a))._checkNotDeleted("refFromURL");const l=Bc(o,a._repo.repoInfo_.nodeAdmin);Bu("refFromURL",l);const v=l.repoInfo;return!a._repo.repoInfo_.isCustomHost()&&v.host!==a._repo.repoInfo_.host&&Yt("refFromURL: Host name does not match the current database: (found "+v.host+" but expected "+a._repo.repoInfo_.host+")"),fu(a,l.path.toString())}function Hs(a,o){return null===Sn((a=(0,$.m9)(a))._path)?ad("child","path",o,!1):pc("child","path",o,!1),new Ko(a._repo,Xr(a._path,o))}function Hu(a,o){a=(0,$.m9)(a),xa("set",a._path),no("set",o,a._path,!1);const l=new $.BH;return qc(a._repo,a._path,o,null,l.wrapCallback(()=>{})),l.promise}function tl(a,o){pa("update",o,a._path,!1);const l=new $.BH;return function Ul(a,o,l,v){hu(a,"update",{path:o.toString(),value:l});let E=!0;const A=Pc(a),R={};if(br(l,(k,Z)=>{E=!1,R[k]=Xa(Xr(o,k),Gi(Z),a.serverSyncTree_,A)}),E)rt("update() called with empty data.  Don't do anything."),ga(0,v,"ok",void 0);else{const k=lu(a),Z=function ka(a,o,l,v){!function As(a,o,l,v){(0,$.hu)(v>a.lastWriteId,"Stacking an older merge on top of newer ones"),a.allWrites.push({path:o,children:l,writeId:v,visible:!0}),a.visibleWrites=et(a.visibleWrites,o,l),a.lastWriteId=v}(a.pendingWriteTree_,o,l,v);const E=ue.fromObject(l);return ar(a,new Cs({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},o,E))}(a.serverSyncTree_,o,R,k);Uu(a.eventQueue_,Z),a.server_.merge(o.toString(),l,(se,Me)=>{const Ue="ok"===se;Ue||yn("update at "+o+" failed: "+se);const ze=ds(a.serverSyncTree_,k,!Ue),Ct=ze.length>0?Io(a,o):o;bs(a.eventQueue_,Ct,ze),ga(0,v,se,Me)}),br(l,se=>{const Me=Lc(a,Xr(o,se));Io(a,Me)}),bs(a.eventQueue_,o,[])}}(a._repo,a._path,o,l.wrapCallback(()=>{})),l.promise}function bu(a){a=(0,$.m9)(a);const o=new Is(()=>{}),l=new ju(o);return function Sd(a,o,l){const v=function On(a,o){const l=o._path;let v=null;a.syncPointTree_.foreachOnPath(l,(se,Me)=>{const Ue=Si(se,l);v=v||Ca(Me,Ue)});let E=a.syncPointTree_.get(l);E?v=v||Ca(E,fn()):(E=new Co,a.syncPointTree_=a.syncPointTree_.set(l,E));const A=null!=v,R=A?new ho(v,!0,!1):null;return function ku(a){return za(a.viewCache_)}(Lu(E,o,Cn(a.pendingWriteTree_,o._path),A?R.getNode():Fr.EMPTY_NODE,A))}(a.serverSyncTree_,o);return null!=v?Promise.resolve(v):a.server_.get(o).then(E=>{const A=Gi(E).withIndex(o._queryParams.getIndex());let R;if(Tt(a.serverSyncTree_,o,l,!0),o._queryParams.loadsAllData())R=F(a.serverSyncTree_,o._path,A);else{const k=Ee(a.serverSyncTree_,o);R=_e(a.serverSyncTree_,o._path,A,k)}return bs(a.eventQueue_,o._path,R),ne(a.serverSyncTree_,o,l,null,!0),A},E=>(hu(a,"get for query "+(0,$.Wl)(o)+" failed: "+E),Promise.reject(new Error(E))))}(a._repo,a,l).then(v=>new Su(v,new Ko(a._repo,a._path),a._queryParams.getIndex()))}class ju{constructor(o){this.callbackContext=o}respondsTo(o){return"value"===o}createEvent(o,l){const v=l._queryParams.getIndex();return new nc("value",this,new Su(o.snapshotNode,new Ko(l._repo,l._path),v))}getEventRunner(o){return"cancel"===o.getEventType()?()=>this.callbackContext.onCancel(o.error):()=>this.callbackContext.onValue(o.snapshot,null)}createCancelEvent(o,l){return this.callbackContext.hasCancelCallback?new Qc(this,o,l):null}matches(o){return o instanceof ju&&(!o.callbackContext||!this.callbackContext||o.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Vc{constructor(o,l){this.eventType=o,this.callbackContext=l}respondsTo(o){let l="children_added"===o?"child_added":o;return l="children_removed"===l?"child_removed":l,this.eventType===l}createCancelEvent(o,l){return this.callbackContext.hasCancelCallback?new Qc(this,o,l):null}createEvent(o,l){(0,$.hu)(null!=o.childName,"Child events should have a childName.");const v=Hs(new Ko(l._repo,l._path),o.childName),E=l._queryParams.getIndex();return new nc(o.type,this,new Su(o.snapshotNode,v,E),o.prevName)}getEventRunner(o){return"cancel"===o.getEventType()?()=>this.callbackContext.onCancel(o.error):()=>this.callbackContext.onValue(o.snapshot,o.prevName)}matches(o){return o instanceof Vc&&this.eventType===o.eventType&&(!this.callbackContext||!o.callbackContext||this.callbackContext.matches(o.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function $c(a,o,l,v,E){let A;if("object"==typeof v&&(A=void 0,E=v),"function"==typeof v&&(A=v),E&&E.onlyOnce){const Z=l,se=(Me,Ue)=>{po(a._repo,a,k),Z(Me,Ue)};se.userCallback=l.userCallback,se.context=l.context,l=se}const R=new Is(l,A||void 0),k="value"===o?new ju(R):new Vc(o,R);return function $u(a,o,l){let v;v=".info"===Sn(o._path)?Tt(a.infoSyncTree_,o,l):Tt(a.serverSyncTree_,o,l),gc(a.eventQueue_,o._path,v)}(a._repo,a,k),()=>po(a._repo,a,k)}function eu(a,o,l,v){return $c(a,"value",o,l,v)}function Al(a,o,l,v){return $c(a,"child_added",o,l,v)}function Sl(a,o,l,v){return $c(a,"child_changed",o,l,v)}function bl(a,o,l,v){return $c(a,"child_moved",o,l,v)}function Ec(a,o,l,v){return $c(a,"child_removed",o,l,v)}function dd(a,o,l){let v=null;const E=l?new Is(l):null;"value"===o?v=new ju(E):o&&(v=new Vc(o,E)),po(a._repo,a,v)}class hs{}class hd extends hs{constructor(o,l){super(),this._value=o,this._key=l}_apply(o){no("endAt",this._value,o._path,!0);const l=ee(o._queryParams,this._value,this._key);if(jl(l),Wa(l),o._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ja(o._repo,o._path,l,o._orderByCalled)}}class wc extends hs{constructor(o,l){super(),this._value=o,this._key=l}_apply(o){no("endBefore",this._value,o._path,!1);const l=function ie(a,o,l){let v;return v=ee(a,o,a.index_===$r||l?l:Ar),v.endBeforeSet_=!0,v}(o._queryParams,this._value,this._key);if(jl(l),Wa(l),o._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ja(o._repo,o._path,l,o._orderByCalled)}}class Gu extends hs{constructor(o,l){super(),this._value=o,this._key=l}_apply(o){no("startAt",this._value,o._path,!0);const l=wr(o._queryParams,this._value,this._key);if(jl(l),Wa(l),o._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ja(o._repo,o._path,l,o._orderByCalled)}}class ao extends hs{constructor(o,l){super(),this._value=o,this._key=l}_apply(o){no("startAfter",this._value,o._path,!1);const l=function li(a,o,l){let v;return v=wr(a,o,a.index_===$r||l?l:Nn),v.startAfterSet_=!0,v}(o._queryParams,this._value,this._key);if(jl(l),Wa(l),o._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ja(o._repo,o._path,l,o._orderByCalled)}}class Ds extends hs{constructor(o){super(),this._limit=o}_apply(o){if(o._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ja(o._repo,o._path,function _n(a,o){const l=a.copy();return l.limitSet_=!0,l.limit_=o,l.viewFrom_="l",l}(o._queryParams,this._limit),o._orderByCalled)}}class ts extends hs{constructor(o){super(),this._limit=o}_apply(o){if(o._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ja(o._repo,o._path,function Vn(a,o){const l=a.copy();return l.limitSet_=!0,l.limit_=o,l.viewFrom_="r",l}(o._queryParams,this._limit),o._orderByCalled)}}class Tl extends hs{constructor(o){super(),this._path=o}_apply(o){_c(o,"orderByChild");const l=new Ht(this._path);if(Qr(l))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const v=new Vs(l),E=Te(o._queryParams,v);return Wa(E),new Ja(o._repo,o._path,E,!0)}}class I extends hs{_apply(o){_c(o,"orderByKey");const l=Te(o._queryParams,$r);return Wa(l),new Ja(o._repo,o._path,l,!0)}}class L extends hs{_apply(o){_c(o,"orderByPriority");const l=Te(o._queryParams,wi);return Wa(l),new Ja(o._repo,o._path,l,!0)}}class Oe extends hs{_apply(o){_c(o,"orderByValue");const l=Te(o._queryParams,No);return Wa(l),new Ja(o._repo,o._path,l,!0)}}class Jt extends hs{constructor(o,l){super(),this._value=o,this._key=l}_apply(o){if(no("equalTo",this._value,o._path,!1),o._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(o._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new hd(this._value,this._key)._apply(new Gu(this._value,this._key)._apply(o))}}function ur(a,...o){let l=(0,$.m9)(a);for(const v of o)l=v._apply(l);return l}(function Rc(a){(0,$.hu)(!wu,"__referenceConstructor has already been defined"),wu=a})(Ko),function Ro(a){(0,$.hu)(!Fs,"__referenceConstructor has already been defined"),Fs=a}(Ko);const si="FIREBASE_DATABASE_EMULATOR_HOST",zr={};let Bs=!1;function Rl(a,o,l,v,E){let A=v||a.options.databaseURL;void 0===A&&(a.options.projectId||Yt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),rt("Using default host for project ",a.options.projectId),A=`${a.options.projectId}-default-rtdb.firebaseio.com`);let Z,se,R=Bc(A,E),k=R.repoInfo;typeof process<"u"&&process.env&&(se=process.env[si]),se?(Z=!0,A=`http://${se}?ns=${k.namespace}`,R=Bc(A,E),k=R.repoInfo):Z=!R.repoInfo.secure;const Me=E&&Z?new Rr(Rr.OWNER):new Pi(a.name,a.options,o);Bu("Invalid Firebase Database URL",R),Qr(R.path)||Yt("Database URL must point to the root of a Firebase Database (not including a child path).");const Ue=function Tu(a,o,l,v){let E=zr[o.name];E||(E={},zr[o.name]=E);let A=E[a.toURLString()];return A&&Yt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),A=new _l(a,Bs,l,v),E[a.toURLString()]=A,A}(k,a,Me,new jr(a.name,l));return new rc(Ue,a)}class rc{constructor(o,l){this._repoInternal=o,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function na(a,o,l){if(a.stats_=fr(a.repoInfo_),a.forceRestClient_||_i())a.server_=new Xt(a.repoInfo_,(v,E,A,R)=>{mc(a,v,E,A,R)},a.authTokenProvider_,a.appCheckProvider_),setTimeout(()=>kc(a,!0),0);else{if(typeof l<"u"&&null!==l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,$.Wl)(l)}catch(v){throw new Error("Invalid authOverride provided: "+v)}}a.persistentConnection_=new Mi(a.repoInfo_,o,(v,E,A,R)=>{mc(a,v,E,A,R)},v=>{kc(a,v)},v=>{!function ud(a,o){br(o,(l,v)=>{Bl(a,l,v)})}(a,v)},a.authTokenProvider_,a.appCheckProvider_,l),a.server_=a.persistentConnection_}a.authTokenProvider_.addTokenChangeListener(v=>{a.server_.refreshAuthToken(v)}),a.appCheckProvider_.addTokenChangeListener(v=>{a.server_.refreshAppCheckToken(v.token)}),a.statsReporter_=function vi(a,o){const l=a.toString();return Zr[l]||(Zr[l]=o()),Zr[l]}(a.repoInfo_,()=>new Do(a.stats_,a.server_)),a.infoData_=new dn,a.infoSyncTree_=new fl({startListening:(v,E,A,R)=>{let k=[];const Z=a.infoData_.getNode(v._path);return Z.isEmpty()||(k=F(a.infoSyncTree_,v._path,Z),setTimeout(()=>{R("ok")},0)),k},stopListening:()=>{}}),Bl(a,"connected",!1),a.serverSyncTree_=new fl({startListening:(v,E,A,R)=>(a.server_.listen(v,A,E,(k,Z)=>{const se=R(k,Z);bs(a.eventQueue_,v._path,se)}),[]),stopListening:(v,E)=>{a.server_.unlisten(v,E)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ko(this._repo,fn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Td(a,o){const l=zr[o];(!l||l[a.key]!==a)&&Yt(`Database ${o}(${a.repoInfo_}) has already been deleted.`),du(a),delete l[a.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(o){null===this._rootInternal&&Yt("Cannot call "+o+" on a deleted database.")}}function nl(){Vi.IS_TRANSPORT_INITIALIZED&&yn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Gl(){nl(),Tr.forceDisallow()}function ba(){nl(),Gr.forceDisallow(),Tr.forceAllow()}function rl(a,o){ke(a,o)}const yr={".sv":"timestamp"};class Xh{constructor(o,l){this.committed=o,this.snapshot=l}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Mi.prototype.simpleListen=function(a,o){this.sendRequest("q",{p:a},o)},Mi.prototype.echo=function(a,o){this.sendRequest("echo",{d:a},o)},function Zh(a){ft(Ye.SDK_VERSION),(0,Ye._registerComponent)(new st.wA("database",(o,{instanceIdentifier:l})=>Rl(o.getProvider("app").getImmediate(),o.getProvider("auth-internal"),o.getProvider("app-check-internal"),l),"PUBLIC").setMultipleInstances(!0)),(0,Ye.registerVersion)(Qe,"0.14.3",a),(0,Ye.registerVersion)(Qe,"0.14.3","esm2017")}();const Qd=new lt.Yd("@firebase/database-compat"),Eh=function(a){Qd.warn("FIREBASE WARNING: "+a)};class Jh{constructor(o){this._delegate=o}cancel(o){(0,$.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,$.Wj)("OnDisconnect.cancel","onComplete",o,!0);const l=this._delegate.cancel();return o&&l.then(()=>o(null),v=>o(v)),l}remove(o){(0,$.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,$.Wj)("OnDisconnect.remove","onComplete",o,!0);const l=this._delegate.remove();return o&&l.then(()=>o(null),v=>o(v)),l}set(o,l){(0,$.Dv)("OnDisconnect.set",1,2,arguments.length),(0,$.Wj)("OnDisconnect.set","onComplete",l,!0);const v=this._delegate.set(o);return l&&v.then(()=>l(null),E=>l(E)),v}setWithPriority(o,l,v){(0,$.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,$.Wj)("OnDisconnect.setWithPriority","onComplete",v,!0);const E=this._delegate.setWithPriority(o,l);return v&&E.then(()=>v(null),A=>v(A)),E}update(o,l){if((0,$.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(o)){const E={};for(let A=0;A<o.length;++A)E[""+A]=o[A];o=E,Eh("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,$.Wj)("OnDisconnect.update","onComplete",l,!0);const v=this._delegate.update(o);return l&&v.then(()=>l(null),E=>l(E)),v}}class wh{constructor(o,l){this.committed=o,this.snapshot=l}toJSON(){return(0,$.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Cc{constructor(o,l){this._database=o,this._delegate=l}val(){return(0,$.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,$.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,$.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,$.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(o){return(0,$.Dv)("DataSnapshot.child",0,1,arguments.length),o=String(o),pc("DataSnapshot.child","path",o,!1),new Cc(this._database,this._delegate.child(o))}hasChild(o){return(0,$.Dv)("DataSnapshot.hasChild",1,1,arguments.length),pc("DataSnapshot.hasChild","path",o,!1),this._delegate.hasChild(o)}getPriority(){return(0,$.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(o){return(0,$.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,$.Wj)("DataSnapshot.forEach","action",o,!1),this._delegate.forEach(l=>o(new Cc(this._database,l)))}hasChildren(){return(0,$.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,$.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,$.Dv)("DataSnapshot.ref",0,0,arguments.length),new gu(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Da{constructor(o,l){this.database=o,this._delegate=l}on(o,l,v,E){var A;(0,$.Dv)("Query.on",2,4,arguments.length),(0,$.Wj)("Query.on","callback",l,!1);const R=Da.getCancelAndContextArgs_("Query.on",v,E),k=(se,Me)=>{l.call(R.context,new Cc(this.database,se),Me)};k.userCallback=l,k.context=R.context;const Z=null===(A=R.cancel)||void 0===A?void 0:A.bind(R.context);switch(o){case"value":return eu(this._delegate,k,Z),l;case"child_added":return Al(this._delegate,k,Z),l;case"child_removed":return Ec(this._delegate,k,Z),l;case"child_changed":return Sl(this._delegate,k,Z),l;case"child_moved":return bl(this._delegate,k,Z),l;default:throw new Error((0,$.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(o,l,v){if((0,$.Dv)("Query.off",0,3,arguments.length),function(a,o,l){if(void 0!==o)switch(o){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,$.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,o),(0,$.Wj)("Query.off","callback",l,!0),(0,$.lb)("Query.off","context",v,!0),l){const E=()=>{};E.userCallback=l,E.context=v,dd(this._delegate,o,E)}else dd(this._delegate,o)}get(){return bu(this._delegate).then(o=>new Cc(this.database,o))}once(o,l,v,E){(0,$.Dv)("Query.once",1,4,arguments.length),(0,$.Wj)("Query.once","callback",l,!0);const A=Da.getCancelAndContextArgs_("Query.once",v,E),R=new $.BH,k=(se,Me)=>{const Ue=new Cc(this.database,se);l&&l.call(A.context,Ue,Me),R.resolve(Ue)};k.userCallback=l,k.context=A.context;const Z=se=>{A.cancel&&A.cancel.call(A.context,se),R.reject(se)};switch(o){case"value":eu(this._delegate,k,Z,{onlyOnce:!0});break;case"child_added":Al(this._delegate,k,Z,{onlyOnce:!0});break;case"child_removed":Ec(this._delegate,k,Z,{onlyOnce:!0});break;case"child_changed":Sl(this._delegate,k,Z,{onlyOnce:!0});break;case"child_moved":bl(this._delegate,k,Z,{onlyOnce:!0});break;default:throw new Error((0,$.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return R.promise}limitToFirst(o){return(0,$.Dv)("Query.limitToFirst",1,1,arguments.length),new Da(this.database,ur(this._delegate,function Fo(a){if("number"!=typeof a||Math.floor(a)!==a||a<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Ds(a)}(o)))}limitToLast(o){return(0,$.Dv)("Query.limitToLast",1,1,arguments.length),new Da(this.database,ur(this._delegate,function Sa(a){if("number"!=typeof a||Math.floor(a)!==a||a<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ts(a)}(o)))}orderByChild(o){return(0,$.Dv)("Query.orderByChild",1,1,arguments.length),new Da(this.database,ur(this._delegate,function N(a){if("$key"===a)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===a)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===a)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return pc("orderByChild","path",a,!1),new Tl(a)}(o)))}orderByKey(){return(0,$.Dv)("Query.orderByKey",0,0,arguments.length),new Da(this.database,ur(this._delegate,function D(){return new I}()))}orderByPriority(){return(0,$.Dv)("Query.orderByPriority",0,0,arguments.length),new Da(this.database,ur(this._delegate,function de(){return new L}()))}orderByValue(){return(0,$.Dv)("Query.orderByValue",0,0,arguments.length),new Da(this.database,ur(this._delegate,function kt(){return new Oe}()))}startAt(o=null,l){return(0,$.Dv)("Query.startAt",0,2,arguments.length),new Da(this.database,ur(this._delegate,function $o(a=null,o){return fc("startAt","key",o,!0),new Gu(a,o)}(o,l)))}startAfter(o=null,l){return(0,$.Dv)("Query.startAfter",0,2,arguments.length),new Da(this.database,ur(this._delegate,function ra(a,o){return fc("startAfter","key",o,!0),new ao(a,o)}(o,l)))}endAt(o=null,l){return(0,$.Dv)("Query.endAt",0,2,arguments.length),new Da(this.database,ur(this._delegate,function Dl(a,o){return fc("endAt","key",o,!0),new hd(a,o)}(o,l)))}endBefore(o=null,l){return(0,$.Dv)("Query.endBefore",0,2,arguments.length),new Da(this.database,ur(this._delegate,function tu(a,o){return fc("endBefore","key",o,!0),new wc(a,o)}(o,l)))}equalTo(o,l){return(0,$.Dv)("Query.equalTo",1,2,arguments.length),new Da(this.database,ur(this._delegate,function Kn(a,o){return fc("equalTo","key",o,!0),new Jt(a,o)}(o,l)))}toString(){return(0,$.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,$.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(o){if((0,$.Dv)("Query.isEqual",1,1,arguments.length),!(o instanceof Da))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(o._delegate)}static getCancelAndContextArgs_(o,l,v){const E={cancel:void 0,context:void 0};if(l&&v)E.cancel=l,(0,$.Wj)(o,"cancel",E.cancel,!0),E.context=v,(0,$.lb)(o,"context",E.context,!0);else if(l)if("object"==typeof l&&null!==l)E.context=l;else{if("function"!=typeof l)throw new Error((0,$.gK)(o,"cancelOrContext")+" must either be a cancel callback or a context object.");E.cancel=l}return E}get ref(){return new gu(this.database,new Ko(this._delegate._repo,this._delegate._path))}}class gu extends Da{constructor(o,l){super(o,new Ja(l._repo,l._path,new ve,!1)),this.database=o,this._delegate=l}getKey(){return(0,$.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(o){return(0,$.Dv)("Reference.child",1,1,arguments.length),"number"==typeof o&&(o=String(o)),new gu(this.database,Hs(this._delegate,o))}getParent(){(0,$.Dv)("Reference.parent",0,0,arguments.length);const o=this._delegate.parent;return o?new gu(this.database,o):null}getRoot(){return(0,$.Dv)("Reference.root",0,0,arguments.length),new gu(this.database,this._delegate.root)}set(o,l){(0,$.Dv)("Reference.set",1,2,arguments.length),(0,$.Wj)("Reference.set","onComplete",l,!0);const v=Hu(this._delegate,o);return l&&v.then(()=>l(null),E=>l(E)),v}update(o,l){if((0,$.Dv)("Reference.update",1,2,arguments.length),Array.isArray(o)){const E={};for(let A=0;A<o.length;++A)E[""+A]=o[A];o=E,Eh("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xa("Reference.update",this._delegate._path),(0,$.Wj)("Reference.update","onComplete",l,!0);const v=tl(this._delegate,o);return l&&v.then(()=>l(null),E=>l(E)),v}setWithPriority(o,l,v){(0,$.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,$.Wj)("Reference.setWithPriority","onComplete",v,!0);const E=function xl(a,o,l){if(xa("setWithPriority",a._path),no("setWithPriority",o,a._path,!1),Mc("setWithPriority",l,!1),".length"===a.key||".keys"===a.key)throw"setWithPriority failed: "+a.key+" is a read-only object.";const v=new $.BH;return qc(a._repo,a._path,o,l,v.wrapCallback(()=>{})),v.promise}(this._delegate,o,l);return v&&E.then(()=>v(null),A=>v(A)),E}remove(o){(0,$.Dv)("Reference.remove",0,1,arguments.length),(0,$.Wj)("Reference.remove","onComplete",o,!0);const l=function Aa(a){return xa("remove",a._path),Hu(a,null)}(this._delegate);return o&&l.then(()=>o(null),v=>o(v)),l}transaction(o,l,v){(0,$.Dv)("Reference.transaction",1,3,arguments.length),(0,$.Wj)("Reference.transaction","transactionUpdate",o,!1),(0,$.Wj)("Reference.transaction","onComplete",l,!0),function(a,o,l,v){if(void 0!==l&&"boolean"!=typeof l)throw new Error((0,$.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,v);const E=function Wu(a,o,l){var v;if(a=(0,$.m9)(a),xa("Reference.transaction",a._path),".length"===a.key||".keys"===a.key)throw"Reference.transaction failed: "+a.key+" is a read-only object.";const E=null===(v=null==l?void 0:l.applyLocally)||void 0===v||v,A=new $.BH,k=eu(a,()=>{});return function Vl(a,o,l,v,E,A){hu(a,"transaction on "+o);const R={path:o,update:l,onComplete:v,status:null,order:me(),applyLocally:A,retryCount:0,unwatcher:E,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},k=vc(a,o,void 0);R.currentInputSnapshot=k;const Z=R.update(k.val());if(void 0===Z)R.unwatcher(),R.currentOutputSnapshotRaw=null,R.currentOutputSnapshotResolved=null,R.onComplete&&R.onComplete(null,!1,R.currentInputSnapshot);else{Kc("transaction failed: Data returned ",Z,R.path),R.status=0;const se=gl(a.transactionQueueTree_,o),Me=cu(se)||[];let Ue;Me.push(R),ml(se,Me),"object"==typeof Z&&null!==Z&&(0,$.r3)(Z,".priority")?(Ue=(0,$.DV)(Z,".priority"),(0,$.hu)(hc(Ue),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Ue=(tn(a.serverSyncTree_,o)||Fr.EMPTY_NODE).getPriority().val();const ze=Pc(a),Ct=Gi(Z,Ue),Mt=Qa(Ct,k,ze);R.currentOutputSnapshotRaw=Ct,R.currentOutputSnapshotResolved=Mt,R.currentWriteId=lu(a);const gn=Oo(a.serverSyncTree_,o,Mt,R.currentWriteId,R.applyLocally);bs(a.eventQueue_,o,gn),Zc(a,a.transactionQueueTree_)}}(a._repo,a._path,o,(Z,se,Me)=>{let Ue=null;Z?A.reject(Z):(Ue=new Su(Me,new Ko(a._repo,a._path),wi),A.resolve(new Xh(se,Ue)))},k,E),A.promise}(this._delegate,o,{applyLocally:v}).then(A=>new wh(A.committed,new Cc(this.database,A.snapshot)));return l&&E.then(A=>l(null,A.committed,A.snapshot),A=>l(A,!1,null)),E}setPriority(o,l){(0,$.Dv)("Reference.setPriority",1,2,arguments.length),(0,$.Wj)("Reference.setPriority","onComplete",l,!0);const v=function xi(a,o){a=(0,$.m9)(a),xa("setPriority",a._path),Mc("setPriority",o,!1);const l=new $.BH;return qc(a._repo,Xr(a._path,".priority"),o,null,l.wrapCallback(()=>{})),l.promise}(this._delegate,o);return l&&v.then(()=>l(null),E=>l(E)),v}push(o,l){(0,$.Dv)("Reference.push",0,2,arguments.length),(0,$.Wj)("Reference.push","onComplete",l,!0);const v=function el(a,o){a=(0,$.m9)(a),xa("push",a._path),no("push",o,a._path,!0);const l=Vu(a._repo),v=Uc(l),E=Hs(a,v),A=Hs(a,v);let R;return R=null!=o?Hu(A,o).then(()=>A):Promise.resolve(A),E.then=R.then.bind(R),E.catch=R.then.bind(R,void 0),E}(this._delegate,o),E=v.then(R=>new gu(this.database,R));l&&E.then(()=>l(null),R=>l(R));const A=new gu(this.database,v);return A.then=E.then.bind(E),A.catch=E.catch.bind(E,void 0),A}onDisconnect(){return xa("Reference.onDisconnect",this._delegate._path),new Jh(new ro(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Wl{constructor(o,l){this._delegate=o,this.app=l,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Gl,forceLongPolling:ba}}useEmulator(o,l,v={}){!function zl(a,o,l,v={}){(a=(0,$.m9)(a))._checkNotDeleted("useEmulator"),a._instanceStarted&&Yt("Cannot call useEmulator() after instance has already been initialized.");const E=a._repoInternal;let A;if(E.repoInfo_.nodeAdmin)v.mockUserToken&&Yt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),A=new Rr(Rr.OWNER);else if(v.mockUserToken){const R="string"==typeof v.mockUserToken?v.mockUserToken:(0,$.Sg)(v.mockUserToken,a.app.options.projectId);A=new Rr(R)}!function Du(a,o,l,v){a.repoInfo_=new qt(`${o}:${l}`,!1,a.repoInfo_.namespace,a.repoInfo_.webSocketOnly,a.repoInfo_.nodeAdmin,a.repoInfo_.persistenceKey,a.repoInfo_.includeNamespaceInQueryParams,!0),v&&(a.authTokenProvider_=v)}(E,o,l,A)}(this._delegate,o,l,v)}ref(o){if((0,$.Dv)("database.ref",0,1,arguments.length),o instanceof gu){const l=Il(this._delegate,o.toString());return new gu(this,l)}{const l=fu(this._delegate,o);return new gu(this,l)}}refFromURL(o){(0,$.Dv)("database.refFromURL",1,1,arguments.length);const v=Il(this._delegate,o);return new gu(this,v)}goOffline(){return(0,$.Dv)("database.goOffline",0,0,arguments.length),function ic(a){(a=(0,$.m9)(a))._checkNotDeleted("goOffline"),du(a._repo)}(this._delegate)}goOnline(){return(0,$.Dv)("database.goOnline",0,0,arguments.length),function zu(a){(a=(0,$.m9)(a))._checkNotDeleted("goOnline"),function wl(a){a.persistentConnection_&&a.persistentConnection_.resume(Iu)}(a._repo)}(this._delegate)}}Wl.ServerValue={TIMESTAMP:function yh(){return yr}(),increment:a=>function pu(a){return{".sv":{increment:a}}}(a)};var Rd=Object.freeze({__proto__:null,initStandalone:function ef({app:a,url:o,version:l,customAuthImpl:v,namespace:E,nodeAdmin:A=!1}){ft(l);const R=new st.zt("auth-internal",new st.H0("database-standalone"));return R.setComponent(new st.wA("auth-internal",()=>v,"PRIVATE")),{instance:new Wl(Rl(a,R,void 0,o,A),a),namespace:E}}});const ia=Wl.ServerValue;!function Ch(a){a.INTERNAL.registerComponent(new st.wA("database-compat",(o,{instanceIdentifier:l})=>{const v=o.getProvider("app-compat").getImmediate(),E=o.getProvider("database").getImmediate({identifier:l});return new Wl(E,v)},"PUBLIC").setServiceProps({Reference:gu,Query:Da,Database:Wl,DataSnapshot:Cc,enableLogging:rl,INTERNAL:Rd,ServerValue:ia}).setMultipleInstances(!0)),a.registerVersion("@firebase/database-compat","0.3.3")}(yt.Z);var oa=U(1205),il=U(6217),ma=U(9260);function Ih(a){return null==a}function Ol(a){return"function"==typeof a.set}function Hc(a,o){return Ol(o)?o:a.ref(o)}function jc(a,o){if(function Od(a){return"string"==typeof a}(a))return o.stringCase();if(Ol(a))return o.firebaseCase();if(function oc(a){return"function"==typeof a.exportVal}(a))return o.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof a)}function mu(a,o,l="on",v=J.z){return new H.y(E=>{let A=null;return A=a[l](o,(R,k)=>{v.schedule(()=>{E.next({snapshot:R,prevKey:k})}),"once"===l&&v.schedule(()=>E.complete())},R=>{v.schedule(()=>E.error(R))}),"on"===l?{unsubscribe(){null!=A&&a.off(o,A)}}:{unsubscribe(){}}}).pipe((0,we.U)(E=>{const{snapshot:A,prevKey:R}=E;let k=null;return A.exists()&&(k=A.key),{type:o,payload:A,prevKey:R,key:k}}),(0,ye.B)())}function fd(a,o){const l=a.length;for(let v=0;v<l;v++)if(a[v].payload.key===o)return v;return-1}function pd(a,o){const{payload:l,prevKey:v,key:E}=o,A=fd(a,E),R=function Jd(a,o){if(Ih(o))return 0;{const l=fd(a,o);return-1===l?a.length:l+1}}(a,v);switch(o.type){case"value":if(o.payload&&o.payload.exists()){let k=null;o.payload.forEach(Z=>{const se={payload:Z,type:"value",prevKey:k,key:Z.key};return k=Z.key,a=[...a,se],!1})}return a;case"child_added":if(A>-1){const k=a[A-1];(k&&k.key||null)!==v&&(a=a.filter(Z=>Z.payload.key!==l.key)).splice(R,0,o)}else{if(null==v)return[o,...a];(a=a.slice()).splice(R,0,o)}return a;case"child_removed":return a.filter(k=>k.payload.key!==l.key);case"child_changed":return a.map(k=>k.payload.key===E?o:k);case"child_moved":if(A>-1){const k=a.splice(A,1)[0];return(a=a.slice()).splice(R,0,k),a}return a;default:return a}}function Yl(a){return(Ih(a)||0===a.length)&&(a=["child_added","child_removed","child_changed","child_moved"]),a}function Ml(a,o,l){return function Md(a,o,l){return mu(a,"value","once",l).pipe((0,be.w)(v=>{const E=[(0,he.of)(v)];return o.forEach(A=>E.push(mu(a,A,"on",l))),(0,le.T)(...E).pipe((0,$e.R)(pd,[]))}),(0,ge.x)())}(a,o=Yl(o),l)}function ol(a,o,l){const v=(o=Yl(o)).map(E=>mu(a,E,"on",l));return(0,le.T)(...v)}function sl(a,o){return function(v,E){return jc(v,{stringCase:()=>a.child(v)[o](E),firebaseCase:()=>v[o](E),snapshotCase:()=>v.ref[o](E)})}}function al(a){return function(l){return l?jc(l,{stringCase:()=>a.child(l).remove(),firebaseCase:()=>l.remove(),snapshotCase:()=>l.ref.remove()}):a.remove()}}function i(a,o){return function(){return mu(a,"value","on",o)}}const n=new m.OlP("angularfire2.realtimeDatabaseURL"),s=new m.OlP("angularfire2.database.use-emulator");let h=(()=>{class a{constructor(l,v,E,A,R,k,Z,se,Me,Ue,ze,Ct,Mt,gn,Rn){this.schedulers=k;const $n=Z,Sr=(0,ct.on)(l,R,v);se&&(0,oa.nw)(Sr,R,Me,ze,Ct,Mt,Ue,gn),this.database=(0,ct.cc)(`${Sr.name}.database.${E}`,"AngularFireDatabase",Sr.name,()=>{const ni=R.runOutsideAngular(()=>Sr.database(E||void 0));return $n&&ni.useEmulator(...$n),ni},[$n])}list(l,v){const E=this.schedulers.ngZone.runOutsideAngular(()=>Hc(this.database,l));let A=E;return v&&(A=v(E)),function eh(a,o){const l=o.schedulers.outsideAngular,v=o.schedulers.ngZone.run(()=>a.ref);return{query:a,update:sl(v,"update"),set:sl(v,"set"),push:E=>v.push(E),remove:al(v),snapshotChanges:E=>Ml(a,E,l).pipe(Ce.iC),stateChanges:E=>ol(a,E,l).pipe(Ce.iC),auditTrail:E=>function xh(a,o,l){return function Nl(a,o,l){return function Nd(a,o){return mu(a,"value","on",o).pipe((0,we.U)(l=>{let v;return l.payload.forEach(E=>(v=E.key,!1)),{data:l,lastKeyToLoad:v}}))}(a,l).pipe(function We(...a){const o=(0,Lt.jO)(a);return(0,De.e)((l,v)=>{const E=a.length,A=new Array(E);let R=a.map(()=>!1),k=!1;for(let Z=0;Z<E;Z++)(0,Ne.Xf)(a[Z]).subscribe((0,xe.x)(v,se=>{A[Z]=se,!k&&!R[Z]&&(R[Z]=!0,(k=R.every(Xe.y))&&(R=null))},Ke.Z));l.subscribe((0,xe.x)(v,Z=>{if(k){const se=[Z,...A];v.next(o?o(...se):se)}}))})}(o),(0,we.U)(([E,A])=>{const R=E.lastKeyToLoad,k=A.map(Z=>Z.key);return{actions:A,lastKeyToLoad:R,loadedKeys:k}}),function Fe(a){return(0,De.e)((o,l)=>{let v=!1,E=0;o.subscribe((0,xe.x)(l,A=>(v||(v=!a(A,E++)))&&l.next(A)))})}(E=>-1===E.loadedKeys.indexOf(E.lastKeyToLoad)),(0,we.U)(E=>E.actions))}(a,ol(a,o).pipe((0,$e.R)((E,A)=>[...E,A],[])),l)}(a,E,l).pipe(Ce.iC),valueChanges:(E,A)=>Ml(a,E,l).pipe((0,we.U)(k=>k.map(Z=>A&&A.idField?Object.assign(Object.assign({},Z.payload.val()),{[A.idField]:Z.key}):Z.payload.val())),Ce.iC)}}(A,this)}object(l){return function t(a,o){return{query:a,snapshotChanges:()=>i(a,o.schedulers.outsideAngular)().pipe(Ce.iC),update:l=>a.ref.update(l),set:l=>a.ref.set(l),remove:()=>a.ref.remove(),valueChanges:()=>i(a,o.schedulers.outsideAngular)().pipe(Ce.iC,(0,we.U)(v=>v.payload.exists()?v.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Hc(this.database,l)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return a.\u0275fac=function(l){return new(l||a)(m.LFG(ct.Dh),m.LFG(ct.xv,8),m.LFG(n,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Ce.HU),m.LFG(s,8),m.LFG(oa.zQ,8),m.LFG(oa.Qv,8),m.LFG(oa.L6,8),m.LFG(oa._Q,8),m.LFG(oa.rT,8),m.LFG(oa.lh,8),m.LFG(oa.f7,8),m.LFG(il.nm,8))},a.\u0275prov=m.Yz7({token:a,factory:a.\u0275fac,providedIn:"any"}),a})(),g=(()=>{class a{constructor(){ma.Z.registerVersion("angularfire",Ce.q4.full,"rtdb-compat")}}return a.\u0275fac=function(l){return new(l||a)},a.\u0275mod=m.oAB({type:a}),a.\u0275inj=m.cJS({providers:[h]}),a})()},3101:(pn,Pe,U)=>{"use strict";U.d(Pe,{ST:()=>iv,yb:()=>by});var m=U(4650),J=U(4986),H=U(9751),he=U(8996),le=U(9646),we=U(2122),ye=U(8675),be=U(4482),$e=U(5403);function ge(){return(0,be.e)((d,e)=>{let r,f=!1;d.subscribe((0,$e.x)(e,_=>{const x=r;r=_,f&&e.next([x,_]),f=!0}))})}var $,De=U(4004),xe=U(5026),Ne=U(1884),Xe=U(9300),Ke=U(2011),Lt=U(6895),Fe=(U(407),U(3942)),Ce=U(5861),ct=U(9681),At=U(4859),yt=U(1877),st=U(2090),Be=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ye={},lt=lt||{},Qe=Be||self;function qe(){}function ut(d){var e=typeof d;return"array"==(e="object"!=e?e:d?Array.isArray(d)?"array":e:"null")||"object"==e&&"number"==typeof d.length}function ft(d){var e=typeof d;return"object"==e&&null!=d||"function"==e}var mt="closure_uid_"+(1e9*Math.random()>>>0),gt=0;function Le(d,e,r){return d.call.apply(d.bind,arguments)}function it(d,e,r){if(!d)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var _=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_,f),d.apply(e,_)}}return function(){return d.apply(e,arguments)}}function Ze(d,e,r){return(Ze=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Le:it).apply(null,arguments)}function me(d,e){var r=Array.prototype.slice.call(arguments,1);return function(){var f=r.slice();return f.push.apply(f,arguments),d.apply(this,f)}}function te(d,e){function r(){}r.prototype=e.prototype,d.X=e.prototype,d.prototype=new r,d.prototype.constructor=d,d.Wb=function(f,_,x){for(var M=Array(arguments.length-2),z=2;z<arguments.length;z++)M[z-2]=arguments[z];return e.prototype[_].apply(f,M)}}function q(){this.s=this.s,this.o=this.o}q.prototype.s=!1,q.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function pt(d){Object.prototype.hasOwnProperty.call(d,mt)&&d[mt]||(d[mt]=++gt)}(this)},q.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fe=Array.prototype.indexOf?function(d,e){return Array.prototype.indexOf.call(d,e,void 0)}:function(d,e){if("string"==typeof d)return"string"!=typeof e||1!=e.length?-1:d.indexOf(e,0);for(let r=0;r<d.length;r++)if(r in d&&d[r]===e)return r;return-1};function ke(d){const e=d.length;if(0<e){const r=Array(e);for(let f=0;f<e;f++)r[f]=d[f];return r}return[]}function rt(d,e){for(let r=1;r<arguments.length;r++){const f=arguments[r];if(ut(f)){const _=d.length||0,x=f.length||0;d.length=_+x;for(let M=0;M<x;M++)d[_+M]=f[M]}else d.push(f)}}function Qt(d,e){this.type=d,this.g=this.target=e,this.defaultPrevented=!1}Qt.prototype.h=function(){this.defaultPrevented=!0};var Dt=function(){if(!Qe.addEventListener||!Object.defineProperty)return!1;var d=!1,e=Object.defineProperty({},"passive",{get:function(){d=!0}});try{Qe.addEventListener("test",qe,e),Qe.removeEventListener("test",qe,e)}catch(r){}return d}();function Yt(d){return/^[\s\xa0]*$/.test(d)}var yn=String.prototype.trim?function(d){return d.trim()}:function(d){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(d)[1]};function Mn(d,e){return d<e?-1:d>e?1:0}function mn(){var d=Qe.navigator;return d&&(d=d.userAgent)?d:""}function Gn(d){return-1!=mn().indexOf(d)}function Ar(d){return Ar[" "](d),d}Ar[" "]=qe;var Jr,d,Dn=Gn("Opera"),En=Gn("Trident")||Gn("MSIE"),sn=Gn("Edge"),Ir=sn||En,Vr=Gn("Gecko")&&!(-1!=mn().toLowerCase().indexOf("webkit")&&!Gn("Edge"))&&!(Gn("Trident")||Gn("MSIE"))&&!Gn("Edge"),br=-1!=mn().toLowerCase().indexOf("webkit")&&!Gn("Edge");function Kt(){var d=Qe.document;return d?d.documentMode:void 0}e:{var rr="",Bn=(d=mn(),Vr?/rv:([^\);]+)(\)|;)/.exec(d):sn?/Edge\/([\d\.]+)/.exec(d):En?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(d):br?/WebKit\/(\S+)/.exec(d):Dn?/(?:Version)[ \/]?(\S+)/.exec(d):void 0);if(Bn&&(rr=Bn?Bn[1]:""),En){var cr=Kt();if(null!=cr&&cr>parseFloat(rr)){Jr=String(cr);break e}}Jr=rr}var zi={};var _i=Qe.document&&En&&(Kt()||parseInt(Jr,10))||void 0;function Wi(d,e){if(Qt.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var r=this.type=d.type,f=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=e,e=d.relatedTarget){if(Vr){e:{try{Ar(e.nodeName);var _=!0;break e}catch(x){}_=!1}_||(e=null)}}else"mouseover"==r?e=d.fromElement:"mouseout"==r&&(e=d.toElement);this.relatedTarget=e,f?(this.clientX=void 0!==f.clientX?f.clientX:f.pageX,this.clientY=void 0!==f.clientY?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType="string"==typeof d.pointerType?d.pointerType:jr[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Wi.X.h.call(this)}}te(Wi,Qt);var jr={2:"touch",3:"pen",4:"mouse"};Wi.prototype.h=function(){Wi.X.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Pi="closure_listenable_"+(1e6*Math.random()|0),Rr=0;function Er(d,e,r,f,_){this.listener=d,this.proxy=null,this.src=e,this.type=r,this.capture=!!f,this.ha=_,this.key=++Rr,this.ba=this.ea=!1}function ii(d){d.ba=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function wn(d,e,r){for(const f in d)e.call(r,d[f],f,d)}function ln(d){const e={};for(const r in d)e[r]=d[r];return e}const Un="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dr(d,e){let r,f;for(let _=1;_<arguments.length;_++){for(r in f=arguments[_],f)d[r]=f[r];for(let x=0;x<Un.length;x++)r=Un[x],Object.prototype.hasOwnProperty.call(f,r)&&(d[r]=f[r])}}function jn(d){this.src=d,this.g={},this.h=0}function hr(d,e){var r=e.type;if(r in d.g){var x,f=d.g[r],_=fe(f,e);(x=0<=_)&&Array.prototype.splice.call(f,_,1),x&&(ii(e),0==d.g[r].length&&(delete d.g[r],d.h--))}}function He(d,e,r,f){for(var _=0;_<d.length;++_){var x=d[_];if(!x.ba&&x.listener==e&&x.capture==!!r&&x.ha==f)return _}return-1}jn.prototype.add=function(d,e,r,f,_){var x=d.toString();(d=this.g[x])||(d=this.g[x]=[],this.h++);var M=He(d,e,f,_);return-1<M?(e=d[M],r||(e.ea=!1)):((e=new Er(e,this.src,x,!!f,_)).ea=r,d.push(e)),e};var ot="closure_lm_"+(1e6*Math.random()|0),ht={};function qt(d,e,r,f,_){if(f&&f.once)return Cr(d,e,r,f,_);if(Array.isArray(e)){for(var x=0;x<e.length;x++)qt(d,e[x],r,f,_);return null}return r=Je(r),d&&d[Pi]?d.N(e,r,ft(f)?!!f.capture:!!f,_):$t(d,e,r,!1,f,_)}function $t(d,e,r,f,_,x){if(!e)throw Error("Invalid event type");var M=ft(_)?!!_.capture:!!_,z=St(d);if(z||(d[ot]=z=new jn(d)),(r=z.add(e,r,f,M,x)).proxy)return r;if(f=function Wn(){const e=vi;return function d(r){return e.call(d.src,d.listener,r)}}(),r.proxy=f,f.src=d,f.listener=r,d.addEventListener)Dt||(_=M),void 0===_&&(_=!1),d.addEventListener(e.toString(),f,_);else if(d.attachEvent)d.attachEvent(fr(e.toString()),f);else{if(!d.addListener||!d.removeListener)throw Error("addEventListener and attachEvent are unavailable.");d.addListener(f)}return r}function Cr(d,e,r,f,_){if(Array.isArray(e)){for(var x=0;x<e.length;x++)Cr(d,e[x],r,f,_);return null}return r=Je(r),d&&d[Pi]?d.O(e,r,ft(f)?!!f.capture:!!f,_):$t(d,e,r,!0,f,_)}function Or(d,e,r,f,_){if(Array.isArray(e))for(var x=0;x<e.length;x++)Or(d,e[x],r,f,_);else f=ft(f)?!!f.capture:!!f,r=Je(r),d&&d[Pi]?(d=d.i,(e=String(e).toString())in d.g&&-1<(r=He(x=d.g[e],r,f,_))&&(ii(x[r]),Array.prototype.splice.call(x,r,1),0==x.length&&(delete d.g[e],d.h--))):d&&(d=St(d))&&(e=d.g[e.toString()],d=-1,e&&(d=He(e,r,f,_)),(r=-1<d?e[d]:null)&&Zr(r))}function Zr(d){if("number"!=typeof d&&d&&!d.ba){var e=d.src;if(e&&e[Pi])hr(e.i,d);else{var r=d.type,f=d.proxy;e.removeEventListener?e.removeEventListener(r,f,d.capture):e.detachEvent?e.detachEvent(fr(r),f):e.addListener&&e.removeListener&&e.removeListener(f),(r=St(e))?(hr(r,d),0==r.h&&(r.src=null,e[ot]=null)):ii(d)}}}function fr(d){return d in ht?ht[d]:ht[d]="on"+d}function vi(d,e){if(d.ba)d=!0;else{e=new Wi(e,this);var r=d.listener,f=d.ha||d.src;d.ea&&Zr(d),d=r.call(f,e)}return d}function St(d){return(d=d[ot])instanceof jn?d:null}var vt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Je(d){return"function"==typeof d?d:(d[vt]||(d[vt]=function(e){return d.handleEvent(e)}),d[vt])}function wt(){q.call(this),this.i=new jn(this),this.P=this,this.I=null}function an(d,e){var r,f=d.I;if(f)for(r=[];f;f=f.I)r.push(f);if(d=d.P,f=e.type||e,"string"==typeof e)e=new Qt(e,d);else if(e instanceof Qt)e.target=e.target||d;else{var _=e;dr(e=new Qt(f,d),_)}if(_=!0,r)for(var x=r.length-1;0<=x;x--){var M=e.g=r[x];_=Tn(M,f,!0,e)&&_}if(_=Tn(M=e.g=d,f,!0,e)&&_,_=Tn(M,f,!1,e)&&_,r)for(x=0;x<r.length;x++)_=Tn(M=e.g=r[x],f,!1,e)&&_}function Tn(d,e,r,f){if(!(e=d.i.g[String(e)]))return!0;e=e.concat();for(var _=!0,x=0;x<e.length;++x){var M=e[x];if(M&&!M.ba&&M.capture==r){var z=M.listener,ae=M.ha||M.src;M.ea&&hr(d.i,M),_=!1!==z.call(ae,f)&&_}}return _&&!f.defaultPrevented}te(wt,q),wt.prototype[Pi]=!0,wt.prototype.removeEventListener=function(d,e,r,f){Or(this,d,e,r,f)},wt.prototype.M=function(){if(wt.X.M.call(this),this.i){var e,d=this.i;for(e in d.g){for(var r=d.g[e],f=0;f<r.length;f++)ii(r[f]);delete d.g[e],d.h--}}this.I=null},wt.prototype.N=function(d,e,r,f){return this.i.add(String(d),e,!1,r,f)},wt.prototype.O=function(d,e,r,f){return this.i.add(String(d),e,!0,r,f)};var sr=Qe.JSON.stringify;function fi(){var d=pr;let e=null;return d.g&&(e=d.g,d.g=d.g.next,d.g||(d.h=null),e.next=null),e}var ki,Ei=new class{constructor(d,e){this.i=d,this.j=e,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}(()=>new ti,d=>d.reset());class ti{constructor(){this.next=this.g=this.h=null}set(e,r){this.h=e,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function Lo(d){Qe.setTimeout(()=>{throw d},0)}function pi(d,e){ki||function wo(){var d=Qe.Promise.resolve(void 0);ki=function(){d.then(Oi)}}(),Mr||(ki(),Mr=!0),pr.add(d,e)}var Mr=!1,pr=new class Yr{constructor(){this.h=this.g=null}add(e,r){const f=Ei.get();f.set(e,r),this.h?this.h.next=f:this.g=f,this.h=f}};function Oi(){for(var d;d=fi();){try{d.h.call(d.g)}catch(r){Lo(r)}var e=Ei;e.j(d),100>e.h&&(e.h++,d.next=e.g,e.g=d)}Mr=!1}function Tr(d,e){wt.call(this),this.h=d||1,this.g=e||Qe,this.j=Ze(this.lb,this),this.l=Date.now()}function oi(d){d.ca=!1,d.R&&(d.g.clearTimeout(d.R),d.R=null)}function Ln(d,e,r){if("function"==typeof d)r&&(d=Ze(d,r));else{if(!d||"function"!=typeof d.handleEvent)throw Error("Invalid listener argument");d=Ze(d.handleEvent,d)}return 2147483647<Number(e)?-1:Qe.setTimeout(d,e||0)}function Hn(d){d.g=Ln(()=>{d.g=null,d.i&&(d.i=!1,Hn(d))},d.j);const e=d.h;d.h=null,d.m.apply(null,e)}te(Tr,wt),($=Tr.prototype).ca=!1,$.R=null,$.lb=function(){if(this.ca){var d=Date.now()-this.l;0<d&&d<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-d):(this.R&&(this.g.clearTimeout(this.R),this.R=null),an(this,"tick"),this.ca&&(oi(this),this.start()))}},$.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},$.M=function(){Tr.X.M.call(this),oi(this),delete this.g};class gr extends q{constructor(e,r){super(),this.m=e,this.j=r,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Hn(this)}M(){super.M(),this.g&&(Qe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gr(d){q.call(this),this.h=d,this.g={}}te(Gr,q);var Vi=[];function Zi(d,e,r,f){Array.isArray(r)||(r&&(Vi[0]=r.toString()),r=Vi);for(var _=0;_<r.length;_++){var x=qt(e,r[_],f||d.handleEvent,!1,d.h||d);if(!x)break;d.g[x.key]=x}}function Fi(d){wn(d.g,function(e,r){this.g.hasOwnProperty(r)&&Zr(e)},d),d.g={}}function Se(){this.g=!0}function Ot(d,e,r,f){d.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ge(d,e){if(!d.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r)for(d=0;d<r.length;d++)if(Array.isArray(r[d])){var f=r[d];if(!(2>f.length)){var _=f[1];if(Array.isArray(_)&&!(1>_.length)){var x=_[0];if("noop"!=x&&"stop"!=x&&"close"!=x)for(var M=1;M<_.length;M++)_[M]=""}}}return sr(r)}catch(z){return e}}(d,r)+(f?" "+f:"")})}Gr.prototype.M=function(){Gr.X.M.call(this),Fi(this)},Gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Se.prototype.Aa=function(){this.g=!1},Se.prototype.info=function(){};var xt={},Ut=null;function Zt(){return Ut=Ut||new wt}function on(d){Qt.call(this,xt.Pa,d)}function In(d){const e=Zt();an(e,new on(e))}function Zn(d,e){Qt.call(this,xt.STAT_EVENT,d),this.stat=e}function Jn(d){const e=Zt();an(e,new Zn(e,d))}function ci(d,e){Qt.call(this,xt.Qa,d),this.size=e}function Kr(d,e){if("function"!=typeof d)throw Error("Fn must not be null and must be a function");return Qe.setTimeout(function(){d()},e)}xt.Pa="serverreachability",te(on,Qt),xt.STAT_EVENT="statevent",te(Zn,Qt),xt.Qa="timingevent",te(ci,Qt);var _t={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},bt={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ft(){}function fn(){}Ft.prototype.h=null;var hi,Sn={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function er(){Qt.call(this,"d")}function mr(){Qt.call(this,"c")}function Yi(){}function ji(d,e,r,f){this.l=d,this.j=e,this.m=r,this.U=f||1,this.S=new Gr(this),this.O=Xr,this.T=new Tr(d=Ir?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new uo}function uo(){this.i=null,this.g="",this.h=!1}te(er,Qt),te(mr,Qt),te(Yi,Ft),Yi.prototype.g=function(){return new XMLHttpRequest},Yi.prototype.i=function(){return{}},hi=new Yi;var Xr=45e3,Qr={},Si={};function Os(d,e,r){d.K=1,d.v=Ao(tr(e)),d.s=r,d.P=!0,zs(d,null)}function zs(d,e){d.F=Date.now(),Mo(d),d.A=tr(d.v);var r=d.A,f=d.U;Array.isArray(f)||(f=[String(f)]),Ki(r.i,"t",f),d.C=0,r=d.l.H,d.h=new uo,d.g=Cs(d.l,r?e:null,!d.s),0<d.N&&(d.L=new gr(Ze(d.La,d,d.g),d.N)),Zi(d.S,d.g,"readystatechange",d.ib),e=d.H?ln(d.H):{},d.s?(d.u||(d.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",d.g.da(d.A,d.u,d.s,e)):(d.u="GET",d.g.da(d.A,d.u,null,e)),In(),function je(d,e,r,f,_,x){d.info(function(){if(d.g)if(x)for(var M="",z=x.split("&"),ae=0;ae<z.length;ae++){var pe=z[ae].split("=");if(1<pe.length){var Ve=pe[0];pe=pe[1];var It=Ve.split("_");M=2<=It.length&&"type"==It[1]?M+(Ve+"=")+pe+"&":M+(Ve+"=redacted&")}}else M=null;else M=x;return"XMLHTTP REQ ("+f+") [attempt "+_+"]: "+e+"\n"+r+"\n"+M})}(d.j,d.u,d.A,d.m,d.U,d.s)}function xo(d){return!!d.g&&"GET"==d.u&&2!=d.K&&d.l.Da}function ns(d,e,r){let _,f=!0;for(;!d.I&&d.C<r.length;){if(_=Bo(d,r),_==Si){4==e&&(d.o=4,Jn(14),f=!1),Ot(d.j,d.m,null,"[Incomplete Response]");break}if(_==Qr){d.o=4,Jn(15),Ot(d.j,d.m,r,"[Invalid Chunk]"),f=!1;break}Ot(d.j,d.m,_,null),gs(d,_)}xo(d)&&_!=Si&&_!=Qr&&(d.h.g="",d.C=0),4!=e||0!=r.length||d.h.h||(d.o=1,Jn(16),f=!1),d.i=d.i&&f,f?0<r.length&&!d.$&&(d.$=!0,(e=d.l).g==d&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+r.length),Do(e),e.K=!0,Jn(11))):(Ot(d.j,d.m,r,"[Invalid Chunked Response]"),Uo(d),ps(d))}function Bo(d,e){var r=d.C,f=e.indexOf("\n",r);return-1==f?Si:(r=Number(e.substring(r,f)),isNaN(r)?Qr:(f+=1)+r>e.length?Si:(e=e.substr(f,r),d.C=f+r,e))}function Mo(d){d.V=Date.now()+d.O,Zo(d,d.O)}function Zo(d,e){if(null!=d.B)throw Error("WatchDog timer not null");d.B=Kr(Ze(d.gb,d),e)}function fs(d){d.B&&(Qe.clearTimeout(d.B),d.B=null)}function ps(d){0==d.l.G||d.I||as(d.l,d)}function Uo(d){fs(d);var e=d.L;e&&"function"==typeof e.na&&e.na(),d.L=null,oi(d.T),Fi(d.S),d.g&&(e=d.g,d.g=null,e.abort(),e.na())}function gs(d,e){try{var r=d.l;if(0!=r.G&&(r.g==d||$i(r.h,d)))if(!d.J&&$i(r.h,d)&&3==r.G){try{var f=r.Fa.g.parse(e)}catch(pe){f=null}if(Array.isArray(f)&&3==f.length){var _=f;if(0==_[0]){e:if(!r.u){if(r.g){if(!(r.g.F+3e3<d.F))break e;ws(r),lr(r)}Po(r),Jn(18)}}else r.Ba=_[1],0<r.Ba-r.T&&37500>_[2]&&r.L&&0==r.A&&!r.v&&(r.v=Kr(Ze(r.cb,r),6e3));if(1>=io(r.h)&&r.ja){try{r.ja()}catch(pe){}r.ja=void 0}}else Jo(r,11)}else if((d.J||r.g==d)&&ws(r),!Yt(e))for(_=r.Fa.g.parse(e),e=0;e<_.length;e++){let pe=_[e];if(r.T=pe[0],pe=pe[1],2==r.G)if("c"==pe[0]){r.I=pe[1],r.ka=pe[2];const Ve=pe[3];null!=Ve&&(r.ma=Ve,r.j.info("VER="+r.ma));const It=pe[4];null!=It&&(r.Ca=It,r.j.info("SVER="+r.Ca));const en=pe[5];null!=en&&"number"==typeof en&&0<en&&(r.J=f=1.5*en,r.j.info("backChannelRequestTimeoutMs_="+f)),f=r;const An=d.g;if(An){const Pn=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pn){var x=f.h;x.g||-1==Pn.indexOf("spdy")&&-1==Pn.indexOf("quic")&&-1==Pn.indexOf("h2")||(x.j=x.l,x.g=new Set,x.h&&(Qi(x,x.h),x.h=null))}if(f.D){const xr=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;xr&&(f.za=xr,$r(f.F,f.D,xr))}}r.G=3,r.l&&r.l.xa(),r.$&&(r.P=Date.now()-d.F,r.j.info("Handshake RTT: "+r.P+"ms"));var M=d;if((f=r).sa=Qs(f,f.H?f.ka:null,f.V),M.J){Vo(f.h,M);var z=M,ae=f.J;ae&&z.setTimeout(ae),z.B&&(fs(z),Mo(z)),f.g=M}else oo(f);0<r.i.length&&Nr(r)}else"stop"!=pe[0]&&"close"!=pe[0]||Jo(r,7);else 3==r.G&&("stop"==pe[0]||"close"==pe[0]?"stop"==pe[0]?Jo(r,7):dn(r):"noop"!=pe[0]&&r.l&&r.l.wa(pe),r.A=0)}In()}catch(pe){}}function Ua(d,e){if(d.forEach&&"function"==typeof d.forEach)d.forEach(e,void 0);else if(ut(d)||"string"==typeof d)Array.prototype.forEach.call(d,e,void 0);else for(var r=function Xo(d){if(d.oa&&"function"==typeof d.oa)return d.oa();if(!d.W||"function"!=typeof d.W){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(ut(d)||"string"==typeof d){var e=[];d=d.length;for(var r=0;r<d;r++)e.push(r);return e}e=[],r=0;for(const f in d)e[r++]=f;return e}}}(d),f=function ms(d){if(d.W&&"function"==typeof d.W)return d.W();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if("string"==typeof d)return d.split("");if(ut(d)){for(var e=[],r=d.length,f=0;f<r;f++)e.push(d[f]);return e}for(f in e=[],r=0,d)e[r++]=d[f];return e}(d),_=f.length,x=0;x<_;x++)e.call(void 0,f[x],r&&r[x],d)}($=ji.prototype).setTimeout=function(d){this.O=d},$.ib=function(d){d=d.target;const e=this.L;e&&3==ee(d)?e.l():this.La(d)},$.La=function(d){try{if(d==this.g)e:{const Ve=ee(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>Ve)&&(3!=Ve||Ir||this.g&&(this.h.h||this.g.fa()||ie(this.g)))){this.I||4!=Ve||7==e||In(),fs(this);var r=this.g.aa();this.Y=r;t:if(xo(this)){var f=ie(this.g);d="";var _=f.length,x=4==ee(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Uo(this),ps(this);var M="";break t}this.h.i=new Qe.TextDecoder}for(e=0;e<_;e++)this.h.h=!0,d+=this.h.i.decode(f[e],{stream:x&&e==_-1});f.splice(0,_),this.h.g+=d,this.C=0,M=this.h.g}else M=this.g.fa();if(this.i=200==r,function Rt(d,e,r,f,_,x,M){d.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+_+"]: "+e+"\n"+r+"\n"+x+" "+M})}(this.j,this.u,this.A,this.m,this.U,Ve,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var z,ae=this.g;if((z=ae.g?ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yt(z)){var pe=z;break t}}pe=null}if(!(r=pe)){this.i=!1,this.o=3,Jn(12),Uo(this),ps(this);break e}Ot(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,gs(this,r)}this.P?(ns(this,Ve,M),Ir&&this.i&&3==Ve&&(Zi(this.S,this.T,"tick",this.hb),this.T.start())):(Ot(this.j,this.m,M,null),gs(this,M)),4==Ve&&Uo(this),this.i&&!this.I&&(4==Ve?as(this.l,this):(this.i=!1,Mo(this)))}else 400==r&&0<M.indexOf("Unknown SID")?(this.o=3,Jn(12)):(this.o=0,Jn(13)),Uo(this),ps(this)}}}catch(Ve){}},$.hb=function(){if(this.g){var d=ee(this.g),e=this.g.fa();this.C<e.length&&(fs(this),ns(this,d,e),this.i&&4!=d&&Mo(this))}},$.cancel=function(){this.I=!0,Uo(this)},$.gb=function(){this.B=null;const d=Date.now();0<=d-this.V?(function Bt(d,e){d.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(In(),Jn(17)),Uo(this),this.o=2,ps(this)):Zo(this,this.V-d)};var Ws=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mi(d,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,d instanceof Mi){this.h=void 0!==e?e:d.h,cs(this,d.j),this.s=d.s,this.g=d.g,rs(this,d.m),this.l=d.l,e=d.i;var r=new os;r.i=e.i,e.g&&(r.g=new Map(e.g),r.h=e.h),Ks(this,r),this.o=d.o}else d&&(r=String(d).match(Ws))?(this.h=!!e,cs(this,r[1]||"",!0),this.s=co(r[2]||""),this.g=co(r[3]||"",!0),rs(this,r[4]),this.l=co(r[5]||"",!0),Ks(this,r[6]||"",!0),this.o=co(r[7]||"")):(this.h=!!e,this.i=new os(null,this.h))}function tr(d){return new Mi(d)}function cs(d,e,r){d.j=r?co(e,!0):e,d.j&&(d.j=d.j.replace(/:$/,""))}function rs(d,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);d.m=e}else d.m=null}function Ks(d,e,r){e instanceof os?(d.i=e,function Zs(d,e){e&&!d.j&&(Xi(d),d.i=null,d.g.forEach(function(r,f){var _=f.toLowerCase();f!=_&&(Ni(this,f),Ki(this,_,r))},d)),d.j=e}(d.i,d.h)):(r||(e=vs(e,qs)),d.i=new os(e,d.h))}function $r(d,e,r){d.i.set(e,r)}function Ao(d){return $r(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function co(d,e){return d?e?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function vs(d,e,r){return"string"==typeof d?(d=encodeURI(d).replace(e,lo),r&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function lo(d){return"%"+((d=d.charCodeAt(0))>>4&15).toString(16)+(15&d).toString(16)}Mi.prototype.toString=function(){var d=[],e=this.j;e&&d.push(vs(e,is,!0),":");var r=this.g;return(r||"file"==e)&&(d.push("//"),(e=this.s)&&d.push(vs(e,is,!0),"@"),d.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&d.push(":",String(r))),(r=this.l)&&(this.g&&"/"!=r.charAt(0)&&d.push("/"),d.push(vs(r,"/"==r.charAt(0)?Qo:jo,!0))),(r=this.i.toString())&&d.push("?",r),(r=this.o)&&d.push("#",vs(r,Us)),d.join("")};var is=/[#\/\?@]/g,jo=/[#\?:]/g,Qo=/[#\?]/g,qs=/[#\?@]/g,Us=/#/g;function os(d,e){this.h=this.g=null,this.i=d||null,this.j=!!e}function Xi(d){d.g||(d.g=new Map,d.h=0,d.i&&function Ys(d,e){if(d){d=d.split("&");for(var r=0;r<d.length;r++){var f=d[r].indexOf("="),_=null;if(0<=f){var x=d[r].substring(0,f);_=d[r].substring(f+1)}else x=d[r];e(x,_?decodeURIComponent(_.replace(/\+/g," ")):"")}}}(d.i,function(e,r){d.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}function Ni(d,e){Xi(d),e=_s(d,e),d.g.has(e)&&(d.i=null,d.h-=d.g.get(e).length,d.g.delete(e))}function ys(d,e){return Xi(d),e=_s(d,e),d.g.has(e)}function Ki(d,e,r){Ni(d,e),0<r.length&&(d.i=null,d.g.set(_s(d,e),ke(r)),d.h+=r.length)}function _s(d,e){return e=String(e),d.j&&(e=e.toLowerCase()),e}function wi(d){this.l=d||ls,d=Qe.PerformanceNavigationTiming?0<(d=Qe.performance.getEntriesByType("navigation")).length&&("hq"==d[0].nextHopProtocol||"h2"==d[0].nextHopProtocol):!!(Qe.g&&Qe.g.Ga&&Qe.g.Ga()&&Qe.g.Ga().$b),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}($=os.prototype).add=function(d,e){Xi(this),this.i=null,d=_s(this,d);var r=this.g.get(d);return r||this.g.set(d,r=[]),r.push(e),this.h+=1,this},$.forEach=function(d,e){Xi(this),this.g.forEach(function(r,f){r.forEach(function(_){d.call(e,_,f,this)},this)},this)},$.oa=function(){Xi(this);const d=Array.from(this.g.values()),e=Array.from(this.g.keys()),r=[];for(let f=0;f<e.length;f++){const _=d[f];for(let x=0;x<_.length;x++)r.push(e[f])}return r},$.W=function(d){Xi(this);let e=[];if("string"==typeof d)ys(this,d)&&(e=e.concat(this.g.get(_s(this,d))));else{d=Array.from(this.g.values());for(let r=0;r<d.length;r++)e=e.concat(d[r])}return e},$.set=function(d,e){return Xi(this),this.i=null,ys(this,d=_s(this,d))&&(this.h-=this.g.get(d).length),this.g.set(d,[e]),this.h+=1,this},$.get=function(d,e){return d&&0<(d=this.W(d)).length?String(d[0]):e},$.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],e=Array.from(this.g.keys());for(var r=0;r<e.length;r++){var f=e[r];const x=encodeURIComponent(String(f)),M=this.W(f);for(f=0;f<M.length;f++){var _=x;""!==M[f]&&(_+="="+encodeURIComponent(String(M[f]))),d.push(_)}}return this.i=d.join("&")};var ls=10;function Ms(d){return!!d.h||!!d.g&&d.g.size>=d.j}function io(d){return d.h?1:d.g?d.g.size:0}function $i(d,e){return d.h?d.h==e:!!d.g&&d.g.has(e)}function Qi(d,e){d.g?d.g.add(e):d.h=e}function Vo(d,e){d.h&&d.h==e?d.h=null:d.g&&d.g.has(e)&&d.g.delete(e)}function bo(d){if(null!=d.h)return d.i.concat(d.h.D);if(null!=d.g&&0!==d.g.size){let e=d.i;for(const r of d.g.values())e=e.concat(r.D);return e}return ke(d.i)}function Fr(){}function va(){this.g=new Fr}function Br(d,e,r){const f=r||"";try{Ua(d,function(_,x){let M=_;ft(_)&&(M=sr(_)),e.push(f+x+"="+encodeURIComponent(M))})}catch(_){throw e.push(f+"type="+encodeURIComponent("_badmap")),_}}function Gi(d,e,r,f,_){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,_(f)}catch(x){}}function Vs(d){this.l=d.ac||null,this.j=d.jb||!1}function Ns(d,e){wt.call(this),this.D=d,this.u=e,this.m=void 0,this.readyState=No,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wi.prototype.cancel=function(){if(this.i=bo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const d of this.g.values())d.cancel();this.g.clear()}},Fr.prototype.stringify=function(d){return Qe.JSON.stringify(d,void 0)},Fr.prototype.parse=function(d){return Qe.JSON.parse(d,void 0)},te(Vs,Ft),Vs.prototype.g=function(){return new Ns(this.l,this.j)},Vs.prototype.i=function(d){return function(){return d}}({}),te(Ns,wt);var No=0;function $s(d){d.j.read().then(d.Ta.bind(d)).catch(d.ga.bind(d))}function Es(d){d.readyState=4,d.l=null,d.j=null,d.A=null,ss(d)}function ss(d){d.onreadystatechange&&d.onreadystatechange.call(d)}($=Ns.prototype).open=function(d,e){if(this.readyState!=No)throw this.abort(),Error("Error reopening a connection");this.C=d,this.B=e,this.readyState=1,ss(this)},$.send=function(d){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};d&&(e.body=d),(this.D||Qe).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},$.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Es(this)),this.readyState=No},$.Wa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ss(this)),this.g&&(this.readyState=3,ss(this),this.g)))if("arraybuffer"===this.responseType)d.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Qe.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$s(this)}else d.text().then(this.Va.bind(this),this.ga.bind(this))},$.Ta=function(d){if(this.g){if(this.u&&d.value)this.response.push(d.value);else if(!this.u){var e=d.value?d.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!d.done}))&&(this.response=this.responseText+=e)}d.done?Es(this):ss(this),3==this.readyState&&$s(this)}},$.Va=function(d){this.g&&(this.response=this.responseText=d,Es(this))},$.Ua=function(d){this.g&&(this.response=d,Es(this))},$.ga=function(){this.g&&Es(this)},$.setRequestHeader=function(d,e){this.v.append(d,e)},$.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},$.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],e=this.h.entries();for(var r=e.next();!r.done;)d.push((r=r.value)[0]+": "+r[1]),r=e.next();return d.join("\r\n")},Object.defineProperty(Ns.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(d){this.m=d?"include":"same-origin"}});var Y=Qe.JSON.parse;function w(d){wt.call(this),this.headers=new Map,this.u=d||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=T,this.K=this.L=!1}te(w,wt);var T="",S=/^https?$/i,j=["POST","PUT"];function Vt(d,e){d.h=!1,d.g&&(d.l=!0,d.g.abort(),d.l=!1),d.j=e,d.m=5,_n(d),wr(d)}function _n(d){d.D||(d.D=!0,an(d,"complete"),an(d,"error"))}function Vn(d){if(d.h&&typeof lt<"u"&&(!d.C[1]||4!=ee(d)||2!=d.aa()))if(d.v&&4==ee(d))Ln(d.Ha,0,d);else if(an(d,"readystatechange"),4==ee(d)){d.h=!1;try{const z=d.aa();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var r;if(!(r=e)){var f;if(f=0===z){var _=String(d.H).match(Ws)[1]||null;if(!_&&Qe.self&&Qe.self.location){var x=Qe.self.location.protocol;_=x.substr(0,x.length-1)}f=!S.test(_?_.toLowerCase():"")}r=f}if(r)an(d,"complete"),an(d,"success");else{d.m=6;try{var M=2<ee(d)?d.g.statusText:""}catch(ae){M=""}d.j=M+" ["+d.aa()+"]",_n(d)}}finally{wr(d)}}}function wr(d,e){if(d.g){li(d);const r=d.g,f=d.C[0]?qe:null;d.g=null,d.C=null,e||an(d,"ready");try{r.onreadystatechange=f}catch(_){}}}function li(d){d.g&&d.K&&(d.g.ontimeout=null),d.A&&(Qe.clearTimeout(d.A),d.A=null)}function ee(d){return d.g?d.g.readyState:0}function ie(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.J){case T:case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Te(d){let e="";return wn(d,function(r,f){e+=f,e+=":",e+=r,e+="\r\n"}),e}function nt(d,e,r){e:{for(f in r){var f=!1;break e}f=!0}f||(r=Te(r),"string"==typeof d?null!=r&&encodeURIComponent(String(r)):$r(d,e,r))}function Et(d,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[d]||e}function Xt(d){this.Ca=0,this.i=[],this.j=new Se,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Et("failFast",!1,d),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Et("baseRetryDelayMs",5e3,d),this.bb=Et("retryDelaySeedMs",1e4,d),this.$a=Et("forwardChannelMaxRetries",2,d),this.ta=Et("forwardChannelRequestTimeoutMs",2e4,d),this.ra=d&&d.xmlHttpFactory||void 0,this.Da=d&&d.Zb||!1,this.J=void 0,this.H=d&&d.supportsCrossDomainXhr||!1,this.I="",this.h=new wi(d&&d.concurrentRequestLimit),this.Fa=new va,this.O=d&&d.fastHandshake||!1,this.N=d&&d.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=d&&d.Xb||!1,d&&d.Aa&&this.j.Aa(),d&&d.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&d&&d.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function dn(d){if(Qn(d),3==d.G){var e=d.U++,r=tr(d.F);$r(r,"SID",d.I),$r(r,"RID",e),$r(r,"TYPE","terminate"),Ci(d,r),(e=new ji(d,d.j,e,void 0)).K=2,e.v=Ao(tr(r)),r=!1,Qe.navigator&&Qe.navigator.sendBeacon&&(r=Qe.navigator.sendBeacon(e.v.toString(),"")),!r&&Qe.Image&&((new Image).src=e.v,r=!0),r||(e.g=Cs(e.l,null),e.g.da(e.v)),e.F=Date.now(),Mo(e)}Xs(d)}function lr(d){d.g&&(Do(d),d.g.cancel(),d.g=null)}function Qn(d){lr(d),d.u&&(Qe.clearTimeout(d.u),d.u=null),ws(d),d.h.cancel(),d.m&&("number"==typeof d.m&&Qe.clearTimeout(d.m),d.m=null)}function Nr(d){Ms(d.h)||d.m||(d.m=!0,pi(d.Ja,d),d.C=0)}function go(d,e){var r;r=e?e.m:d.U++;const f=tr(d.F);$r(f,"SID",d.I),$r(f,"RID",r),$r(f,"AID",d.T),Ci(d,f),d.o&&d.s&&nt(f,d.o,d.s),r=new ji(d,d.j,r,d.C+1),null===d.o&&(r.H=d.s),e&&(d.i=e.D.concat(d.i)),e=Ji(d,r,1e3),r.setTimeout(Math.round(.5*d.ta)+Math.round(.5*d.ta*Math.random())),Qi(d.h,r),Os(r,f,e)}function Ci(d,e){d.ia&&wn(d.ia,function(r,f){$r(e,f,r)}),d.l&&Ua({},function(r,f){$r(e,f,r)})}function Ji(d,e,r){r=Math.min(d.i.length,r);var f=d.l?Ze(d.l.Ra,d.l,d):null;e:{var _=d.i;let x=-1;for(;;){const M=["count="+r];-1==x?0<r?(x=_[0].h,M.push("ofs="+x)):x=0:M.push("ofs="+x);let z=!0;for(let ae=0;ae<r;ae++){let pe=_[ae].h;const Ve=_[ae].g;if(pe-=x,0>pe)x=Math.max(0,_[ae].h-100),z=!1;else try{Br(Ve,M,"req"+pe+"_")}catch(It){f&&f(Ve)}}if(z){f=M.join("&");break e}}}return d=d.i.splice(0,r),e.D=d,f}function oo(d){d.g||d.u||(d.Z=1,pi(d.Ia,d),d.A=0)}function Po(d){return!(d.g||d.u||3<=d.A||(d.Z++,d.u=Kr(Ze(d.Ia,d),To(d,d.A)),d.A++,0))}function Do(d){null!=d.B&&(Qe.clearTimeout(d.B),d.B=null)}function mo(d){d.g=new ji(d,d.j,"rpc",d.Z),null===d.o&&(d.g.H=d.s),d.g.N=0;var e=tr(d.sa);$r(e,"RID","rpc"),$r(e,"SID",d.I),$r(e,"CI",d.L?"0":"1"),$r(e,"AID",d.T),$r(e,"TYPE","xmlhttp"),Ci(d,e),d.o&&d.s&&nt(e,d.o,d.s),d.J&&d.g.setTimeout(d.J);var r=d.g;d=d.ka,r.K=1,r.v=Ao(tr(e)),r.s=null,r.P=!0,zs(r,d)}function ws(d){null!=d.v&&(Qe.clearTimeout(d.v),d.v=null)}function as(d,e){var r=null;if(d.g==e){ws(d),Do(d),d.g=null;var f=2}else{if(!$i(d.h,e))return;r=e.D,Vo(d.h,e),f=1}if(0!=d.G)if(d.pa=e.Y,e.i)if(1==f){r=e.s?e.s.length:0,e=Date.now()-e.F;var _=d.C;an(f=Zt(),new ci(f,r)),Nr(d)}else oo(d);else if(3==(_=e.o)||0==_&&0<d.pa||!(1==f&&function ui(d,e){return!(io(d.h)>=d.h.j-(d.m?1:0)||(d.m?(d.i=e.D.concat(d.i),0):1==d.G||2==d.G||d.C>=(d.Za?0:d.$a)||(d.m=Kr(Ze(d.Ja,d,e),To(d,d.C)),d.C++,0)))}(d,e)||2==f&&Po(d)))switch(r&&0<r.length&&(e=d.h,e.i=e.i.concat(r)),_){case 1:Jo(d,5);break;case 4:Jo(d,10);break;case 3:Jo(d,6);break;default:Jo(d,2)}}function To(d,e){let r=d.Xa+Math.floor(Math.random()*d.bb);return d.l||(r*=2),r*e}function Jo(d,e){if(d.j.info("Error code "+e),2==e){var r=null;d.l&&(r=null);var f=Ze(d.kb,d);r||(r=new Mi("//www.google.com/images/cleardot.gif"),Qe.location&&"http"==Qe.location.protocol||cs(r,"https"),Ao(r)),function xs(d,e){const r=new Se;if(Qe.Image){const f=new Image;f.onload=me(Gi,r,f,"TestLoadImage: loaded",!0,e),f.onerror=me(Gi,r,f,"TestLoadImage: error",!1,e),f.onabort=me(Gi,r,f,"TestLoadImage: abort",!1,e),f.ontimeout=me(Gi,r,f,"TestLoadImage: timeout",!1,e),Qe.setTimeout(function(){f.ontimeout&&f.ontimeout()},1e4),f.src=d}else e(!1)}(r.toString(),f)}else Jn(2);d.G=0,d.l&&d.l.va(e),Xs(d),Qn(d)}function Xs(d){if(d.G=0,d.la=[],d.l){const e=bo(d.h);(0!=e.length||0!=d.i.length)&&(rt(d.la,e),rt(d.la,d.i),d.h.i.length=0,ke(d.i),d.i.length=0),d.l.ua()}}function Qs(d,e,r){var f=r instanceof Mi?tr(r):new Mi(r,void 0);if(""!=f.g)e&&(f.g=e+"."+f.g),rs(f,f.m);else{var _=Qe.location;f=_.protocol,e=e?e+"."+_.hostname:_.hostname,_=+_.port;var x=new Mi(null,void 0);f&&cs(x,f),e&&(x.g=e),_&&rs(x,_),r&&(x.l=r),f=x}return e=d.za,(r=d.D)&&e&&$r(f,r,e),$r(f,"VER",d.ma),Ci(d,f),f}function Cs(d,e,r){if(e&&!d.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new w(r&&d.Da&&!d.ra?new Vs({jb:!0}):d.ra)).Ka(d.H),e}function ho(){}function Js(){if(En&&!(10<=Number(_i)))throw Error("Environmental error: no available transport.")}function Ti(d,e){wt.call(this),this.g=new Xt(e),this.l=d,this.h=e&&e.messageUrlParams||null,d=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.s=d,d=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(d?d["X-WebChannel-Content-Type"]=e.messageContentType:d={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(d?d["X-WebChannel-Client-Profile"]=e.ya:d={"X-WebChannel-Client-Profile":e.ya}),this.g.S=d,(d=e&&e.Yb)&&!Yt(d)&&(this.g.o=d),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Yt(e)&&(this.g.D=e,null!==(d=this.h)&&e in d&&e in(d=this.h)&&delete d[e]),this.j=new Go(this)}function ya(d){er.call(this);var e=d.__sm__;if(e){e:{for(const r in e){d=r;break e}d=void 0}(this.i=d)&&(d=this.i,e=null!==e&&d in e?e[d]:void 0),this.data=e}else this.data=d}function Mu(){mr.call(this),this.status=1}function Go(d){this.g=d}($=w.prototype).Ka=function(d){this.L=d},$.da=function(d,e,r,f){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+d);e=e?e.toUpperCase():"GET",this.H=d,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():hi.g(),this.C=function Ht(d){return d.h||(d.h=d.i())}(this.u?this.u:hi),this.g.onreadystatechange=Ze(this.Ha,this);try{this.F=!0,this.g.open(e,String(d),!0),this.F=!1}catch(x){return void Vt(this,x)}if(d=r||"",r=new Map(this.headers),f)if(Object.getPrototypeOf(f)===Object.prototype)for(var _ in f)r.set(_,f[_]);else{if("function"!=typeof f.keys||"function"!=typeof f.get)throw Error("Unknown input type for opt_headers: "+String(f));for(const x of f.keys())r.set(x,f.get(x))}f=Array.from(r.keys()).find(x=>"content-type"==x.toLowerCase()),_=Qe.FormData&&d instanceof Qe.FormData,!(0<=fe(j,e))||f||_||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[x,M]of r)this.g.setRequestHeader(x,M);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{li(this),0<this.B&&((this.K=function ve(d){return En&&function qn(){return function Nn(d){var e=zi;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=d(9)}(function(){let d=0;const e=yn(String(Jr)).split("."),r=yn("9").split("."),f=Math.max(e.length,r.length);for(let M=0;0==d&&M<f;M++){var _=e[M]||"",x=r[M]||"";do{if(_=/(\d*)(\D*)(.*)/.exec(_)||["","","",""],x=/(\d*)(\D*)(.*)/.exec(x)||["","","",""],0==_[0].length&&0==x[0].length)break;d=Mn(0==_[1].length?0:parseInt(_[1],10),0==x[1].length?0:parseInt(x[1],10))||Mn(0==_[2].length,0==x[2].length)||Mn(_[2],x[2]),_=_[3],x=x[3]}while(0==d)}return 0<=d})}()&&"number"==typeof d.timeout&&void 0!==d.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ze(this.qa,this)):this.A=Ln(this.qa,this.B,this)),this.v=!0,this.g.send(d),this.v=!1}catch(x){Vt(this,x)}},$.qa=function(){typeof lt<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,an(this,"timeout"),this.abort(8))},$.abort=function(d){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=d||7,an(this,"complete"),an(this,"abort"),wr(this))},$.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wr(this,!0)),w.X.M.call(this)},$.Ha=function(){this.s||(this.F||this.v||this.l?Vn(this):this.fb())},$.fb=function(){Vn(this)},$.aa=function(){try{return 2<ee(this)?this.g.status:-1}catch(d){return-1}},$.fa=function(){try{return this.g?this.g.responseText:""}catch(d){return""}},$.Sa=function(d){if(this.g){var e=this.g.responseText;return d&&0==e.indexOf(d)&&(e=e.substring(d.length)),Y(e)}},$.Ea=function(){return this.m},$.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},($=Xt.prototype).ma=8,$.G=1,$.Ja=function(d){if(this.m)if(this.m=null,1==this.G){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const _=new ji(this,this.j,d,void 0);let x=this.s;if(this.S&&(x?(x=ln(x),dr(x,this.S)):x=this.S),null!==this.o||this.N||(_.H=x,x=null),this.O)e:{for(var e=0,r=0;r<this.i.length;r++){var f=this.i[r];if(void 0===(f="__data__"in f.g&&"string"==typeof(f=f.g.__data__)?f.length:void 0))break;if(4096<(e+=f)){e=r;break e}if(4096===e||r===this.i.length-1){e=r+1;break e}}e=1e3}else e=1e3;e=Ji(this,_,e),$r(r=tr(this.F),"RID",d),$r(r,"CVER",22),this.D&&$r(r,"X-HTTP-Session-Id",this.D),Ci(this,r),x&&(this.N?e="headers="+encodeURIComponent(String(Te(x)))+"&"+e:this.o&&nt(r,this.o,x)),Qi(this.h,_),this.Ya&&$r(r,"TYPE","init"),this.O?($r(r,"$req",e),$r(r,"SID","null"),_.Z=!0,Os(_,r,null)):Os(_,r,e),this.G=2}}else 3==this.G&&(d?go(this,d):0==this.i.length||Ms(this.h)||go(this))},$.Ia=function(){if(this.u=null,mo(this),this.$&&!(this.K||null==this.g||0>=this.P)){var d=2*this.P;this.j.info("BP detection timer enabled: "+d),this.B=Kr(Ze(this.eb,this),d)}},$.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Jn(10),lr(this),mo(this))},$.cb=function(){null!=this.v&&(this.v=null,lr(this),Po(this),Jn(19))},$.kb=function(d){d?(this.j.info("Successfully pinged google.com"),Jn(2)):(this.j.info("Failed to ping google.com"),Jn(1))},($=ho.prototype).xa=function(){},$.wa=function(){},$.va=function(){},$.ua=function(){},$.Ra=function(){},Js.prototype.g=function(d,e){return new Ti(d,e)},te(Ti,wt),Ti.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var d=this.g,e=this.l,r=this.h||void 0;Jn(0),d.V=e,d.ia=r||{},d.L=d.Y,d.F=Qs(d,null,d.V),Nr(d)},Ti.prototype.close=function(){dn(this.g)},Ti.prototype.u=function(d){var e=this.g;if("string"==typeof d){var r={};r.__data__=d,d=r}else this.v&&((r={}).__data__=sr(d),d=r);e.i.push(new class{constructor(d,e){this.h=d,this.g=e}}(e.ab++,d)),3==e.G&&Nr(e)},Ti.prototype.M=function(){this.g.l=null,delete this.j,dn(this.g),delete this.g,Ti.X.M.call(this)},te(ya,er),te(Mu,mr),te(Go,ho),Go.prototype.xa=function(){an(this.g,"a")},Go.prototype.wa=function(d){an(this.g,new ya(d))},Go.prototype.va=function(d){an(this.g,new Mu)},Go.prototype.ua=function(){an(this.g,"b")},Js.prototype.createWebChannel=Js.prototype.g,Ti.prototype.send=Ti.prototype.u,Ti.prototype.open=Ti.prototype.m,Ti.prototype.close=Ti.prototype.close,_t.NO_ERROR=0,_t.TIMEOUT=8,_t.HTTP_ERROR=6,bt.COMPLETE="complete",fn.EventType=Sn,Sn.OPEN="a",Sn.CLOSE="b",Sn.ERROR="c",Sn.MESSAGE="d",wt.prototype.listen=wt.prototype.N,w.prototype.listenOnce=w.prototype.O,w.prototype.getLastError=w.prototype.Oa,w.prototype.getLastErrorCode=w.prototype.Ea,w.prototype.getStatus=w.prototype.aa,w.prototype.getResponseJson=w.prototype.Sa,w.prototype.getResponseText=w.prototype.fa,w.prototype.send=w.prototype.da,w.prototype.setWithCredentials=w.prototype.Ka;var Nu=Ye.createWebChannelTransport=function(){return new Js},Pu=Ye.getStatEventTarget=function(){return Zt()},_a=Ye.ErrorCode=_t,za=Ye.EventType=bt,ea=Ye.Event=xt,Ya=Ye.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},W=Ye.FetchXmlHttpFactory=Vs,ue=Ye.WebChannel=fn,Q=Ye.XhrIo=w;const Ie="@firebase/firestore";class et{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");let Wt="9.17.1";const hn=new yt.Yd("@firebase/firestore");function ir(){return hn.logLevel}function un(d,...e){if(hn.logLevel<=yt.in.DEBUG){const r=e.map(vo);hn.debug(`Firestore (${Wt}): ${d}`,...r)}}function kr(d,...e){if(hn.logLevel<=yt.in.ERROR){const r=e.map(vo);hn.error(`Firestore (${Wt}): ${d}`,...r)}}function Hr(d,...e){if(hn.logLevel<=yt.in.WARN){const r=e.map(vo);hn.warn(`Firestore (${Wt}): ${d}`,...r)}}function vo(d){if("string"==typeof d)return d;try{return JSON.stringify(d)}catch(r){return d}}function Cn(d="Unexpected state"){const e=`FIRESTORE (${Wt}) INTERNAL ASSERTION FAILED: `+d;throw kr(e),new Error(e)}function Xn(d,e){d||Cn()}function Fn(d,e){return d}const nn={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vn extends st.ZR{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ur{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}class bi{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ea{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(et.UNAUTHENTICATED))}shutdown(){}}class Va{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class qu{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){var f=this;let _=this.i;const x=pe=>this.i!==_?(_=this.i,r(pe)):Promise.resolve();let M=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),M.resolve(),M=new Ur,e.enqueueRetryable(()=>x(this.currentUser))};const z=()=>{const pe=M;e.enqueueRetryable((0,Ce.Z)(function*(){yield pe.promise,yield x(f.currentUser)}))},ae=pe=>{un("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=pe,this.auth.addAuthTokenListener(this.o),z()};this.t.onInit(pe=>ae(pe)),setTimeout(()=>{if(!this.auth){const pe=this.t.getImmediate({optional:!0});pe?ae(pe):(un("FirebaseAuthCredentialsProvider","Auth not yet detected"),M.resolve(),M=new Ur)}},0),z()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(f=>this.i!==e?(un("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):f?(Xn("string"==typeof f.accessToken),new bi(f.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Xn(null===e||"string"==typeof e),new et(e)}}class vu{constructor(e,r,f,_){this.h=e,this.l=r,this.m=f,this.g=_,this.type="FirstParty",this.user=et.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Xn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Ka{constructor(e,r,f,_){this.h=e,this.l=r,this.m=f,this.g=_}getToken(){return Promise.resolve(new vu(this.h,this.l,this.m,this.g))}start(e,r){e.enqueueRetryable(()=>r(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class su{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ac{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,r){const f=x=>{null!=x.error&&un("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${x.error.message}`);const M=x.token!==this.A;return this.A=x.token,un("FirebaseAppCheckTokenProvider",`Received ${M?"new":"existing"} token.`),M?r(x.token):Promise.resolve()};this.o=x=>{e.enqueueRetryable(()=>f(x))};const _=x=>{un("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=x,this.appCheck.addTokenListener(this.o)};this.T.onInit(x=>_(x)),setTimeout(()=>{if(!this.appCheck){const x=this.T.getImmediate({optional:!0});x?_(x):un("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Xn("string"==typeof r.token),this.A=r.token,new su(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function yu(d){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(d);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(r);else for(let f=0;f<d;f++)r[f]=Math.floor(256*Math.random());return r}class fo{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let f="";for(;f.length<20;){const _=yu(40);for(let x=0;x<_.length;++x)f.length<20&&_[x]<r&&(f+=e.charAt(_[x]%e.length))}return f}}function qr(d,e){return d<e?-1:d>e?1:0}function Ra(d,e,r){return d.length===e.length&&d.every((f,_)=>r(f,e[_]))}function Zu(d){return d+"\0"}class eo{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new vn(nn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new vn(nn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new vn(nn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new vn(nn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return eo.fromMillis(Date.now())}static fromDate(e){return eo.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),f=Math.floor(1e6*(e-1e3*r));return new eo(r,f)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qr(this.nanoseconds,e.nanoseconds):qr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Lr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Lr(e)}static min(){return new Lr(new eo(0,0))}static max(){return new Lr(new eo(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Oa{constructor(e,r,f){void 0===r?r=0:r>e.length&&Cn(),void 0===f?f=e.length-r:f>e.length-r&&Cn(),this.segments=e,this.offset=r,this.len=f}get length(){return this.len}isEqual(e){return 0===Oa.comparator(this,e)}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Oa?e.forEach(f=>{r.push(f)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,f=this.limit();r<f;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const f=Math.min(e.length,r.length);for(let _=0;_<f;_++){const x=e.get(_),M=r.get(_);if(x<M)return-1;if(x>M)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Ri extends Oa{construct(e,r,f){return new Ri(e,r,f)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const r=[];for(const f of e){if(f.indexOf("//")>=0)throw new vn(nn.INVALID_ARGUMENT,`Invalid segment (${f}). Paths must not contain // in them.`);r.push(...f.split("/").filter(_=>_.length>0))}return new Ri(r)}static emptyPath(){return new Ri([])}}const Yc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Li extends Oa{construct(e,r,f){return new Li(e,r,f)}static isValidIdentifier(e){return Yc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Li.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Li(["__name__"])}static fromServerFormat(e){const r=[];let f="",_=0;const x=()=>{if(0===f.length)throw new vn(nn.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(f),f=""};let M=!1;for(;_<e.length;){const z=e[_];if("\\"===z){if(_+1===e.length)throw new vn(nn.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const ae=e[_+1];if("\\"!==ae&&"."!==ae&&"`"!==ae)throw new vn(nn.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);f+=ae,_+=2}else"`"===z?(M=!M,_++):"."!==z||M?(f+=z,_++):(x(),_++)}if(x(),M)throw new vn(nn.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Li(r)}static emptyPath(){return new Li([])}}class Yn{constructor(e){this.path=e}static fromPath(e){return new Yn(Ri.fromString(e))}static fromName(e){return new Yn(Ri.fromString(e).popFirst(5))}static empty(){return new Yn(Ri.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ri.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,r){return Ri.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Yn(new Ri(e.slice()))}}class _u{constructor(e,r,f,_){this.indexId=e,this.collectionGroup=r,this.fields=f,this.indexState=_}}function qi(d){return d.fields.find(e=>2===e.kind)}function qa(d){return d.fields.filter(e=>2!==e.kind)}_u.UNKNOWN_ID=-1;class la{constructor(e,r){this.fieldPath=e,this.kind=r}}class au{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new au(0,jt.min())}}function uc(d,e){const r=d.toTimestamp().seconds,f=d.toTimestamp().nanoseconds+1,_=Lr.fromTimestamp(1e9===f?new eo(r+1,0):new eo(r,f));return new jt(_,Yn.empty(),e)}function bc(d){return new jt(d.readTime,d.key,-1)}class jt{constructor(e,r,f){this.readTime=e,this.documentKey=r,this.largestBatchId=f}static min(){return new jt(Lr.min(),Yn.empty(),-1)}static max(){return new jt(Lr.max(),Yn.empty(),-1)}}function uu(d,e){let r=d.readTime.compareTo(e.readTime);return 0!==r?r:(r=Yn.comparator(d.documentKey,e.documentKey),0!==r?r:qr(d.largestBatchId,e.largestBatchId))}const tt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class us{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ma(d){return Ss.apply(this,arguments)}function Ss(){return Ss=(0,Ce.Z)(function*(d){if(d.code!==nn.FAILED_PRECONDITION||d.message!==tt)throw d;un("LocalStore","Unexpectedly lost primary lease")}),Ss.apply(this,arguments)}class Gt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Cn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Gt((f,_)=>{this.nextCallback=x=>{this.wrapSuccess(e,x).next(f,_)},this.catchCallback=x=>{this.wrapFailure(r,x).next(f,_)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Gt?r:Gt.resolve(r)}catch(r){return Gt.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Gt.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Gt.reject(r)}static resolve(e){return new Gt((r,f)=>{r(e)})}static reject(e){return new Gt((r,f)=>{f(e)})}static waitFor(e){return new Gt((r,f)=>{let _=0,x=0,M=!1;e.forEach(z=>{++_,z.next(()=>{++x,M&&x===_&&r()},ae=>f(ae))}),M=!0,x===_&&r()})}static or(e){let r=Gt.resolve(!1);for(const f of e)r=r.next(_=>_?Gt.resolve(_):f());return r}static forEach(e,r){const f=[];return e.forEach((_,x)=>{f.push(r.call(this,_,x))}),this.waitFor(f)}static mapArray(e,r){return new Gt((f,_)=>{const x=e.length,M=new Array(x);let z=0;for(let ae=0;ae<x;ae++){const pe=ae;r(e[pe]).next(Ve=>{M[pe]=Ve,++z,z===x&&f(M)},Ve=>_(Ve))}})}static doWhile(e,r){return new Gt((f,_)=>{const x=()=>{!0===e()?r().next(()=>{x()},_):f()};x()})}}class ku{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.P=new Ur,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{r.error?this.P.reject(new Fu(e,r.error)):this.P.resolve()},this.transaction.onerror=f=>{const _=wu(f.target.error);this.P.reject(new Fu(e,_))}}static open(e,r,f,_){try{return new ku(r,e.transaction(_,f))}catch(x){throw new Fu(r,x)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(un("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const r=this.transaction.objectStore(e);return new Tc(r)}}class zo{constructor(e,r,f){this.name=e,this.version=r,this.S=f,12.2===zo.D((0,st.z$)())&&kr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return un("SimpleDb","Removing database:",e),Eu(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,st.hl)())return!1;if(zo.N())return!0;const e=(0,st.z$)(),r=zo.D(e),f=0<r&&r<10,_=zo.k(e),x=0<_&&_<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||f||x)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,r){return e.store(r)}static D(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),f=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(f)}static k(e){const r=e.match(/Android ([\d.]+)/i),f=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(f)}F(e){var r=this;return(0,Ce.Z)(function*(){return r.db||(un("SimpleDb","Opening database:",r.name),r.db=yield new Promise((f,_)=>{const x=indexedDB.open(r.name,r.version);x.onsuccess=M=>{f(M.target.result)},x.onblocked=()=>{_(new Fu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},x.onerror=M=>{const z=M.target.error;_("VersionError"===z.name?new vn(nn.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===z.name?new vn(nn.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+z):new Fu(e,z))},x.onupgradeneeded=M=>{un("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',M.oldVersion),r.S.$(M.target.result,x.transaction,M.oldVersion,r.version).next(()=>{un("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.B&&(r.db.onversionchange=f=>r.B(f)),r.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=r=>e(r))}runTransaction(e,r,f,_){var x=this;return(0,Ce.Z)(function*(){const M="readonly"===r;let z=0;for(;;){++z;try{x.db=yield x.F(e);const ae=ku.open(x.db,e,M?"readonly":"readwrite",f),pe=_(ae).next(Ve=>(ae.V(),Ve)).catch(Ve=>(ae.abort(Ve),Gt.reject(Ve))).toPromise();return pe.catch(()=>{}),yield ae.v,pe}catch(ae){const pe=ae,Ve="FirebaseError"!==pe.name&&z<3;if(un("SimpleDb","Transaction failed with error:",pe.message,"Retrying:",Ve),x.close(),!Ve)return Promise.reject(pe)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Dc{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Eu(this.q.delete())}}class Fu extends vn{constructor(e,r){super(nn.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Bi(d){return"IndexedDbTransactionError"===d.name}class Tc{constructor(e){this.store=e}put(e,r){let f;return void 0!==r?(un("SimpleDb","PUT",this.store.name,e,r),f=this.store.put(r,e)):(un("SimpleDb","PUT",this.store.name,"<auto-key>",e),f=this.store.put(e)),Eu(f)}add(e){return un("SimpleDb","ADD",this.store.name,e,e),Eu(this.store.add(e))}get(e){return Eu(this.store.get(e)).next(r=>(void 0===r&&(r=null),un("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return un("SimpleDb","DELETE",this.store.name,e),Eu(this.store.delete(e))}count(){return un("SimpleDb","COUNT",this.store.name),Eu(this.store.count())}W(e,r){const f=this.options(e,r);if(f.index||"function"!=typeof this.store.getAll){const _=this.cursor(f),x=[];return this.H(_,(M,z)=>{x.push(z)}).next(()=>x)}{const _=this.store.getAll(f.range);return new Gt((x,M)=>{_.onerror=z=>{M(z.target.error)},_.onsuccess=z=>{x(z.target.result)}})}}J(e,r){const f=this.store.getAll(e,null===r?void 0:r);return new Gt((_,x)=>{f.onerror=M=>{x(M.target.error)},f.onsuccess=M=>{_(M.target.result)}})}Y(e,r){un("SimpleDb","DELETE ALL",this.store.name);const f=this.options(e,r);f.X=!1;const _=this.cursor(f);return this.H(_,(x,M,z)=>z.delete())}Z(e,r){let f;r?f=e:(f={},r=e);const _=this.cursor(f);return this.H(_,r)}tt(e){const r=this.cursor({});return new Gt((f,_)=>{r.onerror=x=>{const M=wu(x.target.error);_(M)},r.onsuccess=x=>{const M=x.target.result;M?e(M.primaryKey,M.value).next(z=>{z?M.continue():f()}):f()}})}H(e,r){const f=[];return new Gt((_,x)=>{e.onerror=M=>{x(M.target.error)},e.onsuccess=M=>{const z=M.target.result;if(!z)return void _();const ae=new Dc(z),pe=r(z.primaryKey,z.value,ae);if(pe instanceof Gt){const Ve=pe.catch(It=>(ae.done(),Gt.reject(It)));f.push(Ve)}ae.isDone?_():null===ae.G?z.continue():z.continue(ae.G)}}).next(()=>Gt.waitFor(f))}options(e,r){let f;return void 0!==e&&("string"==typeof e?f=e:r=e),{index:f,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const f=this.store.index(e.index);return e.X?f.openKeyCursor(e.range,r):f.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Eu(d){return new Gt((e,r)=>{d.onsuccess=f=>{e(f.target.result)},d.onerror=f=>{const _=wu(f.target.error);r(_)}})}let Ps=!1;function wu(d){const e=zo.D((0,st.z$)());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(d.message.indexOf(r)>=0){const f=new vn("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ps||(Ps=!0,setTimeout(()=>{throw f},0)),f}}return d}class Co{constructor(e,r){this.asyncQueue=e,this.et=r,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var r=this;un("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ce.Z)(function*(){r.task=null;try{un("IndexBackiller",`Documents written: ${yield r.et.st()}`)}catch(f){Bi(f)?un("IndexBackiller","Ignoring IndexedDB error during index backfill: ",f):yield Ma(f)}yield r.nt(6e4)}))}}class Rc{constructor(e,r){this.localStore=e,this.persistence=r}st(e=50){var r=this;return(0,Ce.Z)(function*(){return r.persistence.runTransaction("Backfill Indexes","readwrite-primary",f=>r.it(f,e))})()}it(e,r){const f=new Set;let _=r,x=!0;return Gt.doWhile(()=>!0===x&&_>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(M=>{if(null!==M&&!f.has(M))return un("IndexBackiller",`Processing collection: ${M}`),this.rt(e,M,_).next(z=>{_-=z,f.add(M)});x=!1})).next(()=>r-_)}rt(e,r,f){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(_=>this.localStore.localDocuments.getNextDocuments(e,r,_,f).next(x=>{const M=x.changes;return this.localStore.indexManager.updateIndexEntries(e,M).next(()=>this.ot(_,x)).next(z=>(un("IndexBackiller",`Updating offset: ${z}`),this.localStore.indexManager.updateCollectionGroup(e,r,z))).next(()=>M.size)}))}ot(e,r){let f=e;return r.changes.forEach((_,x)=>{const M=bc(x);uu(M,f)>0&&(f=M)}),new jt(f.readTime,f.documentKey,Math.max(r.batchId,e.largestBatchId))}}let ha=(()=>{class d{constructor(r,f){this.previousValue=r,f&&(f.sequenceNumberHandler=_=>this.ut(_),this.ct=_=>f.writeSequenceNumber(_))}ut(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.ct&&this.ct(r),r}}return d.at=-1,d})();class Xu{constructor(e,r,f,_,x,M,z,ae){this.databaseId=e,this.appId=r,this.persistenceKey=f,this.host=_,this.ssl=x,this.forceLongPolling=M,this.autoDetectLongPolling=z,this.useFetchStreams=ae}}class Na{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Na("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Na&&e.projectId===this.projectId&&e.database===this.database}}function Lu(d){let e=0;for(const r in d)Object.prototype.hasOwnProperty.call(d,r)&&e++;return e}function to(d,e){for(const r in d)Object.prototype.hasOwnProperty.call(d,r)&&e(r,d[r])}function Qu(d){for(const e in d)if(Object.prototype.hasOwnProperty.call(d,e))return!1;return!0}function fa(d){return null==d}function Ca(d){return 0===d&&1/d==-1/0}function ks(d){return"number"==typeof d&&Number.isInteger(d)&&!Ca(d)&&d<=Number.MAX_SAFE_INTEGER&&d>=Number.MIN_SAFE_INTEGER}class so{constructor(e){this.binaryString=e}static fromBase64String(e){const r=atob(e);return new so(r)}static fromUint8Array(e){const r=function(f){let _="";for(let x=0;x<f.length;++x)_+=String.fromCharCode(f[x]);return _}(e);return new so(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let f=0;f<e.length;f++)r[f]=e.charCodeAt(f);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}so.EMPTY_BYTE_STRING=new so("");const Za=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fs(d){if(Xn(!!d),"string"==typeof d){let e=0;const r=Za.exec(d);if(Xn(!!r),r[1]){let _=r[1];_=(_+"000000000").substr(0,9),e=Number(_)}const f=new Date(d);return{seconds:Math.floor(f.getTime()/1e3),nanos:e}}return{seconds:Ro(d.seconds),nanos:Ro(d.nanos)}}function Ro(d){return"number"==typeof d?d:"string"==typeof d?Number(d):0}function Ju(d){return"string"==typeof d?so.fromBase64String(d):so.fromUint8Array(d)}function cc(d){var e,r;return"server_timestamp"===(null===(r=((null===(e=null==d?void 0:d.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function fl(d){const e=d.mapValue.fields.__previous_value__;return cc(e)?fl(e):e}function Oo(d){const e=Fs(d.mapValue.fields.__local_write_time__.timestampValue);return new eo(e.seconds,e.nanos)}const ka={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ds={nullValue:"NULL_VALUE"};function F(d){return"nullValue"in d?0:"booleanValue"in d?1:"integerValue"in d||"doubleValue"in d?2:"timestampValue"in d?3:"stringValue"in d?5:"bytesValue"in d?6:"referenceValue"in d?7:"geoPointValue"in d?8:"arrayValue"in d?9:"mapValue"in d?cc(d)?4:Ee(d)?9007199254740991:10:Cn()}function B(d,e){if(d===e)return!0;const r=F(d);if(r!==F(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return d.booleanValue===e.booleanValue;case 4:return Oo(d).isEqual(Oo(e));case 3:return function(f,_){if("string"==typeof f.timestampValue&&"string"==typeof _.timestampValue&&f.timestampValue.length===_.timestampValue.length)return f.timestampValue===_.timestampValue;const x=Fs(f.timestampValue),M=Fs(_.timestampValue);return x.seconds===M.seconds&&x.nanos===M.nanos}(d,e);case 5:return d.stringValue===e.stringValue;case 6:return _=e,Ju(d.bytesValue).isEqual(Ju(_.bytesValue));case 7:return d.referenceValue===e.referenceValue;case 8:return function(f,_){return Ro(f.geoPointValue.latitude)===Ro(_.geoPointValue.latitude)&&Ro(f.geoPointValue.longitude)===Ro(_.geoPointValue.longitude)}(d,e);case 2:return function(f,_){if("integerValue"in f&&"integerValue"in _)return Ro(f.integerValue)===Ro(_.integerValue);if("doubleValue"in f&&"doubleValue"in _){const x=Ro(f.doubleValue),M=Ro(_.doubleValue);return x===M?Ca(x)===Ca(M):isNaN(x)&&isNaN(M)}return!1}(d,e);case 9:return Ra(d.arrayValue.values||[],e.arrayValue.values||[],B);case 10:return function(f,_){const x=f.mapValue.fields||{},M=_.mapValue.fields||{};if(Lu(x)!==Lu(M))return!1;for(const z in x)if(x.hasOwnProperty(z)&&(void 0===M[z]||!B(x[z],M[z])))return!1;return!0}(d,e);default:return Cn()}var _}function O(d,e){return void 0!==(d.values||[]).find(r=>B(r,e))}function V(d,e){if(d===e)return 0;const r=F(d),f=F(e);if(r!==f)return qr(r,f);switch(r){case 0:case 9007199254740991:return 0;case 1:return qr(d.booleanValue,e.booleanValue);case 2:return function(_,x){const M=Ro(_.integerValue||_.doubleValue),z=Ro(x.integerValue||x.doubleValue);return M<z?-1:M>z?1:M===z?0:isNaN(M)?isNaN(z)?0:-1:1}(d,e);case 3:return ne(d.timestampValue,e.timestampValue);case 4:return ne(Oo(d),Oo(e));case 5:return qr(d.stringValue,e.stringValue);case 6:return function(_,x){const M=Ju(_),z=Ju(x);return M.compareTo(z)}(d.bytesValue,e.bytesValue);case 7:return function(_,x){const M=_.split("/"),z=x.split("/");for(let ae=0;ae<M.length&&ae<z.length;ae++){const pe=qr(M[ae],z[ae]);if(0!==pe)return pe}return qr(M.length,z.length)}(d.referenceValue,e.referenceValue);case 8:return function(_,x){const M=qr(Ro(_.latitude),Ro(x.latitude));return 0!==M?M:qr(Ro(_.longitude),Ro(x.longitude))}(d.geoPointValue,e.geoPointValue);case 9:return function(_,x){const M=_.values||[],z=x.values||[];for(let ae=0;ae<M.length&&ae<z.length;++ae){const pe=V(M[ae],z[ae]);if(pe)return pe}return qr(M.length,z.length)}(d.arrayValue,e.arrayValue);case 10:return function(_,x){if(_===ka.mapValue&&x===ka.mapValue)return 0;if(_===ka.mapValue)return 1;if(x===ka.mapValue)return-1;const M=_.fields||{},z=Object.keys(M),ae=x.fields||{},pe=Object.keys(ae);z.sort(),pe.sort();for(let Ve=0;Ve<z.length&&Ve<pe.length;++Ve){const It=qr(z[Ve],pe[Ve]);if(0!==It)return It;const en=V(M[z[Ve]],ae[pe[Ve]]);if(0!==en)return en}return qr(z.length,pe.length)}(d.mapValue,e.mapValue);default:throw Cn()}}function ne(d,e){if("string"==typeof d&&"string"==typeof e&&d.length===e.length)return qr(d,e);const r=Fs(d),f=Fs(e),_=qr(r.seconds,f.seconds);return 0!==_?_:qr(r.nanos,f.nanos)}function _e(d){return Ae(d)}function Ae(d){return"nullValue"in d?"null":"booleanValue"in d?""+d.booleanValue:"integerValue"in d?""+d.integerValue:"doubleValue"in d?""+d.doubleValue:"timestampValue"in d?function(f){const _=Fs(f);return`time(${_.seconds},${_.nanos})`}(d.timestampValue):"stringValue"in d?d.stringValue:"bytesValue"in d?Ju(d.bytesValue).toBase64():"referenceValue"in d?Yn.fromName(d.referenceValue).toString():"geoPointValue"in d?`geo(${(e=d.geoPointValue).latitude},${e.longitude})`:"arrayValue"in d?function(f){let _="[",x=!0;for(const M of f.values||[])x?x=!1:_+=",",_+=Ae(M);return _+"]"}(d.arrayValue):"mapValue"in d?function(f){const _=Object.keys(f.fields||{}).sort();let x="{",M=!0;for(const z of _)M?M=!1:x+=",",x+=`${z}:${Ae(f.fields[z])}`;return x+"}"}(d.mapValue):Cn();var e}function Tt(d,e){return{referenceValue:`projects/${d.projectId}/databases/${d.database}/documents/${e.path.canonicalString()}`}}function tn(d){return!!d&&"integerValue"in d}function On(d){return!!d&&"arrayValue"in d}function ar(d){return!!d&&"nullValue"in d}function or(d){return!!d&&"doubleValue"in d&&isNaN(Number(d.doubleValue))}function K(d){return!!d&&"mapValue"in d}function oe(d){if(d.geoPointValue)return{geoPointValue:Object.assign({},d.geoPointValue)};if(d.timestampValue&&"object"==typeof d.timestampValue)return{timestampValue:Object.assign({},d.timestampValue)};if(d.mapValue){const e={mapValue:{fields:{}}};return to(d.mapValue.fields,(r,f)=>e.mapValue.fields[r]=oe(f)),e}if(d.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(d.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=oe(d.arrayValue.values[r]);return e}return Object.assign({},d)}function Ee(d){return"__max__"===(((d.mapValue||{}).fields||{}).__type__||{}).stringValue}function dt(d){return"nullValue"in d?ds:"booleanValue"in d?{booleanValue:!1}:"integerValue"in d||"doubleValue"in d?{doubleValue:NaN}:"timestampValue"in d?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in d?{stringValue:""}:"bytesValue"in d?{bytesValue:""}:"referenceValue"in d?Tt(Na.empty(),Yn.empty()):"geoPointValue"in d?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in d?{arrayValue:{}}:"mapValue"in d?{mapValue:{}}:Cn()}function Nt(d){return"nullValue"in d?{booleanValue:!1}:"booleanValue"in d?{doubleValue:NaN}:"integerValue"in d||"doubleValue"in d?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in d?{stringValue:""}:"stringValue"in d?{bytesValue:""}:"bytesValue"in d?Tt(Na.empty(),Yn.empty()):"referenceValue"in d?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in d?{arrayValue:{}}:"arrayValue"in d?{mapValue:{}}:"mapValue"in d?ka:Cn()}function zt(d,e){const r=V(d.value,e.value);return 0!==r?r:d.inclusive&&!e.inclusive?-1:!d.inclusive&&e.inclusive?1:0}function xn(d,e){const r=V(d.value,e.value);return 0!==r?r:d.inclusive&&!e.inclusive?1:!d.inclusive&&e.inclusive?-1:0}class _r{constructor(e,r){this.position=e,this.inclusive=r}}function vr(d,e,r){let f=0;for(let _=0;_<d.position.length;_++){const x=e[_],M=d.position[_];if(f=x.field.isKeyField()?Yn.comparator(Yn.fromName(M.referenceValue),r.key):V(M,r.data.field(x.field)),"desc"===x.dir&&(f*=-1),0!==f)break}return f}function Pr(d,e){if(null===d)return null===e;if(null===e||d.inclusive!==e.inclusive||d.position.length!==e.position.length)return!1;for(let r=0;r<d.position.length;r++)if(!B(d.position[r],e.position[r]))return!1;return!0}class Ii{}class nr extends Ii{constructor(e,r,f){super(),this.field=e,this.op=r,this.value=f}static create(e,r,f){return e.isKeyField()?"in"===r||"not-in"===r?this.createKeyFieldInFilter(e,r,f):new nd(e,r,f):"array-contains"===r?new rd(e,f):"in"===r?new id(e,f):"not-in"===r?new vl(e,f):"array-contains-any"===r?new Oc(e,f):new nr(e,r,f)}static createKeyFieldInFilter(e,r,f){return"in"===r?new gl(e,f):new cu(e,f)}matches(e){const r=e.data.field(this.field);return"!="===this.op?null!==r&&this.matchesComparison(V(r,this.value)):null!==r&&F(this.value)===F(r)&&this.matchesComparison(V(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Cn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class mi extends Ii{constructor(e,r){super(),this.filters=e,this.op=r,this.ht=null}static create(e,r){return new mi(e,r)}matches(e){return Wo(this)?void 0===this.filters.find(r=>!r.matches(e)):void 0!==this.filters.find(r=>r.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(r=>r.isInequality());return null!==e?e.field:null}lt(e){for(const r of this.getFlattenedFilters())if(e(r))return r;return null}}function Wo(d){return"and"===d.op}function ec(d){return"or"===d.op}function lc(d){return Cu(d)&&Wo(d)}function Cu(d){for(const e of d.filters)if(e instanceof mi)return!1;return!0}function Ha(d){if(d instanceof nr)return d.field.canonicalString()+d.op.toString()+_e(d.value);if(lc(d))return d.filters.map(e=>Ha(e)).join(",");{const e=d.filters.map(r=>Ha(r)).join(",");return`${d.op}(${e})`}}function Xa(d,e){return d instanceof nr?(r=d,(f=e)instanceof nr&&r.op===f.op&&r.field.isEqual(f.field)&&B(r.value,f.value)):d instanceof mi?function(r,f){return f instanceof mi&&r.op===f.op&&r.filters.length===f.filters.length&&r.filters.reduce((_,x,M)=>_&&Xa(x,f.filters[M]),!0)}(d,e):void Cn();var r,f}function Qa(d,e){const r=d.filters.concat(e);return mi.create(r,d.op)}function pl(d){return d instanceof nr?`${(e=d).field.canonicalString()} ${e.op} ${_e(e.value)}`:d instanceof mi?function(e){return e.op.toString()+" {"+e.getFilters().map(pl).join(" ,")+"}"}(d):"Filter";var e}class nd extends nr{constructor(e,r,f){super(e,r,f),this.key=Yn.fromName(f.referenceValue)}matches(e){const r=Yn.comparator(e.key,this.key);return this.matchesComparison(r)}}class gl extends nr{constructor(e,r){super(e,"in",r),this.keys=ml(0,r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class cu extends nr{constructor(e,r){super(e,"not-in",r),this.keys=ml(0,r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function ml(d,e){var r;return((null===(r=e.arrayValue)||void 0===r?void 0:r.values)||[]).map(f=>Yn.fromName(f.referenceValue))}class rd extends nr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return On(r)&&O(r.arrayValue,this.value)}}class id extends nr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return null!==r&&O(this.value.arrayValue,r)}}class vl extends nr{constructor(e,r){super(e,"not-in",r)}matches(e){if(O(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return null!==r&&!O(this.value.arrayValue,r)}}class Oc extends nr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!On(r)||!r.arrayValue.values)&&r.arrayValue.values.some(f=>O(this.value.arrayValue,f))}}class yl{constructor(e,r="asc"){this.field=e,this.dir=r}}function Fl(d,e){return d.dir===e.dir&&d.field.isEqual(e.field)}class es{constructor(e,r){this.comparator=e,this.root=r||Fa.EMPTY}insert(e,r){return new es(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Fa.BLACK,null,null))}remove(e){return new es(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fa.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const f=this.comparator(e,r.key);if(0===f)return r.value;f<0?r=r.left:f>0&&(r=r.right)}return null}indexOf(e){let r=0,f=this.root;for(;!f.isEmpty();){const _=this.comparator(e,f.key);if(0===_)return r+f.left.size;_<0?f=f.left:(r+=f.left.size+1,f=f.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,f)=>(e(r,f),!1))}toString(){const e=[];return this.inorderTraversal((r,f)=>(e.push(`${r}:${f}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new od(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new od(this.root,e,this.comparator,!1)}getReverseIterator(){return new od(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new od(this.root,e,this.comparator,!0)}}class od{constructor(e,r,f,_){this.isReverse=_,this.nodeStack=[];let x=1;for(;!e.isEmpty();)if(x=r?f(e.key,r):1,r&&_&&(x*=-1),x<0)e=this.isReverse?e.left:e.right;else{if(0===x){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fa{constructor(e,r,f,_,x){this.key=e,this.value=r,this.color=null!=f?f:Fa.RED,this.left=null!=_?_:Fa.EMPTY,this.right=null!=x?x:Fa.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,f,_,x){return new Fa(null!=e?e:this.key,null!=r?r:this.value,null!=f?f:this.color,null!=_?_:this.left,null!=x?x:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,f){let _=this;const x=f(e,_.key);return _=x<0?_.copy(null,null,null,_.left.insert(e,r,f),null):0===x?_.copy(null,r,null,null,null):_.copy(null,null,null,null,_.right.insert(e,r,f)),_.fixUp()}removeMin(){if(this.left.isEmpty())return Fa.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let f,_=this;if(r(e,_.key)<0)_.left.isEmpty()||_.left.isRed()||_.left.left.isRed()||(_=_.moveRedLeft()),_=_.copy(null,null,null,_.left.remove(e,r),null);else{if(_.left.isRed()&&(_=_.rotateRight()),_.right.isEmpty()||_.right.isRed()||_.right.left.isRed()||(_=_.moveRedRight()),0===r(e,_.key)){if(_.right.isEmpty())return Fa.EMPTY;f=_.right.min(),_=_.copy(f.key,f.value,null,null,_.right.removeMin())}_=_.copy(null,null,null,null,_.right.remove(e,r))}return _.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fa.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Cn();const e=this.left.check();if(e!==this.right.check())throw Cn();return e+(this.isRed()?0:1)}}Fa.EMPTY=null,Fa.RED=!0,Fa.BLACK=!1,Fa.EMPTY=new class{constructor(){this.size=0}get key(){throw Cn()}get value(){throw Cn()}get color(){throw Cn()}get left(){throw Cn()}get right(){throw Cn()}copy(d,e,r,f,_){return this}insert(d,e,r){return new Fa(d,e)}remove(d,e){return this}isEmpty(){return!0}inorderTraversal(d){return!1}reverseTraversal(d){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Yo{constructor(e){this.comparator=e,this.data=new es(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,f)=>(e(r),!1))}forEachInRange(e,r){const f=this.data.getIteratorFrom(e[0]);for(;f.hasNext();){const _=f.getNext();if(this.comparator(_.key,e[1])>=0)return;r(_.key)}}forEachWhile(e,r){let f;for(f=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();f.hasNext();)if(!e(f.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new sd(this.data.getIterator())}getIteratorFrom(e){return new sd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(f=>{r=r.add(f)}),r}isEqual(e){if(!(e instanceof Yo)||this.size!==e.size)return!1;const r=this.data.getIterator(),f=e.data.getIterator();for(;r.hasNext();){const _=r.getNext().key,x=f.getNext().key;if(0!==this.comparator(_,x))return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Yo(this.comparator);return r.data=e,r}}class sd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function dc(d){return d.hasNext()?d.getNext():void 0}class Ia{constructor(e){this.fields=e,e.sort(Li.comparator)}static empty(){return new Ia([])}unionWith(e){let r=new Yo(Li.comparator);for(const f of this.fields)r=r.add(f);for(const f of e)r=r.add(f);return new Ia(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Ra(this.fields,e.fields,(r,f)=>r.isEqual(f))}}class ta{constructor(e){this.value=e}static empty(){return new ta({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let f=0;f<e.length-1;++f)if(r=(r.mapValue.fields||{})[e.get(f)],!K(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=oe(r)}setAll(e){let r=Li.emptyPath(),f={},_=[];e.forEach((M,z)=>{if(!r.isImmediateParentOf(z)){const ae=this.getFieldsMap(r);this.applyChanges(ae,f,_),f={},_=[],r=z.popLast()}M?f[z.lastSegment()]=oe(M):_.push(z.lastSegment())});const x=this.getFieldsMap(r);this.applyChanges(x,f,_)}delete(e){const r=this.field(e.popLast());K(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return B(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let f=0;f<e.length;++f){let _=r.mapValue.fields[e.get(f)];K(_)&&_.mapValue.fields||(_={mapValue:{fields:{}}},r.mapValue.fields[e.get(f)]=_),r=_}return r.mapValue.fields}applyChanges(e,r,f){to(r,(_,x)=>e[_]=x);for(const _ of f)delete e[_]}clone(){return new ta(oe(this.value))}}function hc(d){const e=[];return to(d.fields,(r,f)=>{const _=new Li([r]);if(K(f)){const x=hc(f.mapValue).fields;if(0===x.length)e.push(_);else for(const M of x)e.push(_.child(M))}else e.push(_)}),new Ia(e)}class no{constructor(e,r,f,_,x,M,z){this.key=e,this.documentType=r,this.version=f,this.readTime=_,this.createTime=x,this.data=M,this.documentState=z}static newInvalidDocument(e){return new no(e,0,Lr.min(),Lr.min(),Lr.min(),ta.empty(),0)}static newFoundDocument(e,r,f,_){return new no(e,1,r,Lr.min(),f,_,0)}static newNoDocument(e,r){return new no(e,2,r,Lr.min(),Lr.min(),ta.empty(),0)}static newUnknownDocument(e,r){return new no(e,3,r,Lr.min(),Lr.min(),ta.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Lr.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ta.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ta.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Lr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof no&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new no(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Kc{constructor(e,r=null,f=[],_=[],x=null,M=null,z=null){this.path=e,this.collectionGroup=r,this.orderBy=f,this.filters=_,this.limit=x,this.startAt=M,this.endAt=z,this.ft=null}}function Ll(d,e=null,r=[],f=[],_=null,x=null,M=null){return new Kc(d,e,r,f,_,x,M)}function pa(d){const e=Fn(d);if(null===e.ft){let r=e.path.canonicalString();null!==e.collectionGroup&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(f=>Ha(f)).join(","),r+="|ob:",r+=e.orderBy.map(f=>{return(_=f).field.canonicalString()+_.dir;var _}).join(","),fa(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(f=>_e(f)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(f=>_e(f)).join(",")),e.ft=r}return e.ft}function Mc(d,e){if(d.limit!==e.limit||d.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<d.orderBy.length;r++)if(!Fl(d.orderBy[r],e.orderBy[r]))return!1;if(d.filters.length!==e.filters.length)return!1;for(let r=0;r<d.filters.length;r++)if(!Xa(d.filters[r],e.filters[r]))return!1;return d.collectionGroup===e.collectionGroup&&!!d.path.isEqual(e.path)&&!!Pr(d.startAt,e.startAt)&&Pr(d.endAt,e.endAt)}function fc(d){return Yn.isDocumentKey(d.path)&&null===d.collectionGroup&&0===d.filters.length}function pc(d,e){return d.filters.filter(r=>r instanceof nr&&r.field.isEqual(e))}function ad(d,e,r){let f=ds,_=!0;for(const x of pc(d,e)){let M=ds,z=!0;switch(x.op){case"<":case"<=":M=dt(x.value);break;case"==":case"in":case">=":M=x.value;break;case">":M=x.value,z=!1;break;case"!=":case"not-in":M=ds}zt({value:f,inclusive:_},{value:M,inclusive:z})<0&&(f=M,_=z)}if(null!==r)for(let x=0;x<d.orderBy.length;++x)if(d.orderBy[x].field.isEqual(e)){const M=r.position[x];zt({value:f,inclusive:_},{value:M,inclusive:r.inclusive})<0&&(f=M,_=r.inclusive);break}return{value:f,inclusive:_}}function xa(d,e,r){let f=ka,_=!0;for(const x of pc(d,e)){let M=ka,z=!0;switch(x.op){case">=":case">":M=Nt(x.value),z=!1;break;case"==":case"in":case"<=":M=x.value;break;case"<":M=x.value,z=!1;break;case"!=":case"not-in":M=ka}xn({value:f,inclusive:_},{value:M,inclusive:z})>0&&(f=M,_=z)}if(null!==r)for(let x=0;x<d.orderBy.length;++x)if(d.orderBy[x].field.isEqual(e)){const M=r.position[x];xn({value:f,inclusive:_},{value:M,inclusive:r.inclusive})>0&&(f=M,_=r.inclusive);break}return{value:f,inclusive:_}}class Bu{constructor(e,r=null,f=[],_=[],x=null,M="F",z=null,ae=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=f,this.filters=_,this.limit=x,this.limitType=M,this.startAt=z,this.endAt=ae,this.dt=null,this._t=null}}function yo(d,e,r,f,_,x,M,z){return new Bu(d,e,r,f,_,x,M,z)}function Uu(d){return new Bu(d)}function gc(d){return 0===d.filters.length&&null===d.limit&&null==d.startAt&&null==d.endAt&&(0===d.explicitOrderBy.length||1===d.explicitOrderBy.length&&d.explicitOrderBy[0].field.isKeyField())}function bs(d){return d.explicitOrderBy.length>0?d.explicitOrderBy[0].field:null}function Nc(d){for(const e of d.filters){const r=e.getFirstInequalityField();if(null!==r)return r}return null}function La(d){return null!==d.collectionGroup}function Iu(d){const e=Fn(d);if(null===e.dt){e.dt=[];const r=Nc(e),f=bs(e);if(null!==r&&null===f)r.isKeyField()||e.dt.push(new yl(r)),e.dt.push(new yl(Li.keyField(),"asc"));else{let _=!1;for(const x of e.explicitOrderBy)e.dt.push(x),x.field.isKeyField()&&(_=!0);if(!_){const x=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new yl(Li.keyField(),x))}}}return e.dt}function Ls(d){const e=Fn(d);if(!e._t)if("F"===e.limitType)e._t=Ll(e.path,e.collectionGroup,Iu(e),e.filters,e.limit,e.startAt,e.endAt);else{const r=[];for(const x of Iu(e))r.push(new yl(x.field,"desc"===x.dir?"asc":"desc"));const f=e.endAt?new _r(e.endAt.position,e.endAt.inclusive):null,_=e.startAt?new _r(e.startAt.position,e.startAt.inclusive):null;e._t=Ll(e.path,e.collectionGroup,r,e.filters,e.limit,f,_)}return e._t}function _l(d,e){e.getFirstInequalityField(),Nc(d);const r=d.filters.concat([e]);return new Bu(d.path,d.collectionGroup,d.explicitOrderBy.slice(),r,d.limit,d.limitType,d.startAt,d.endAt)}function na(d,e,r){return new Bu(d.path,d.collectionGroup,d.explicitOrderBy.slice(),d.filters.slice(),e,r,d.startAt,d.endAt)}function Vu(d,e){return Mc(Ls(d),Ls(e))&&d.limitType===e.limitType}function Pc(d){return`${pa(Ls(d))}|lt:${d.limitType}`}function mc(d){return`Query(target=${function(e){let r=e.path.canonicalString();return null!==e.collectionGroup&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(f=>pl(f)).join(", ")}]`),fa(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(f=>{return`${(_=f).field.canonicalString()} (${_.dir})`;var _}).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(f=>_e(f)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(f=>_e(f)).join(",")),`Target(${r})`}(Ls(d))}; limitType=${d.limitType})`}function kc(d,e){return e.isFoundDocument()&&function(r,f){const _=f.key.path;return null!==r.collectionGroup?f.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(_):Yn.isDocumentKey(r.path)?r.path.isEqual(_):r.path.isImmediateParentOf(_)}(d,e)&&function(r,f){for(const _ of Iu(r))if(!_.field.isKeyField()&&null===f.data.field(_.field))return!1;return!0}(d,e)&&function(r,f){for(const _ of r.filters)if(!_.matches(f))return!1;return!0}(d,e)&&(f=e,!((r=d).startAt&&!function(_,x,M){const z=vr(_,x,M);return _.inclusive?z<=0:z<0}(r.startAt,Iu(r),f)||r.endAt&&!function(_,x,M){const z=vr(_,x,M);return _.inclusive?z>=0:z>0}(r.endAt,Iu(r),f)));var r,f}function ud(d){return d.collectionGroup||(d.path.length%2==1?d.path.lastSegment():d.path.get(d.path.length-2))}function Bl(d){return(e,r)=>{let f=!1;for(const _ of Iu(d)){const x=lu(_,e,r);if(0!==x)return x;f=f||_.field.isKeyField()}return 0}}function lu(d,e,r){const f=d.field.isKeyField()?Yn.comparator(e.key,r.key):function(_,x,M){const z=x.data.field(_),ae=M.data.field(_);return null!==z&&null!==ae?V(z,ae):Cn()}(d.field,e,r);switch(d.dir){case"asc":return f;case"desc":return-1*f;default:return Cn()}}function Sd(d,e){if(d.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ca(e)?"-0":e}}function qc(d){return{integerValue:""+d}}function Ul(d,e){return ks(e)?qc(e):Sd(d,e)}class cd{constructor(){this._=void 0}}function El(d,e,r){return d instanceof xu?function(f,_){const x={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:f.seconds,nanos:f.nanoseconds}}}};return _&&(x.fields.__previous_value__=_),{mapValue:x}}(r,e):d instanceof $u?po(d,e):d instanceof du?wl(d,e):function(f,_){const x=bd(f,_),M=ga(x)+ga(f.gt);return tn(x)&&tn(f.gt)?qc(M):Sd(f.yt,M)}(d,e)}function ld(d,e,r){return d instanceof $u?po(d,e):d instanceof du?wl(d,e):r}function bd(d,e){return d instanceof hu?tn(r=e)||(f=r)&&"doubleValue"in f?e:{integerValue:0}:null;var f,r}class xu extends cd{}class $u extends cd{constructor(e){super(),this.elements=e}}function po(d,e){const r=Vl(e);for(const f of d.elements)r.some(_=>B(_,f))||r.push(f);return{arrayValue:{values:r}}}class du extends cd{constructor(e){super(),this.elements=e}}function wl(d,e){let r=Vl(e);for(const f of d.elements)r=r.filter(_=>!B(_,f));return{arrayValue:{values:r}}}class hu extends cd{constructor(e,r){super(),this.yt=e,this.gt=r}}function ga(d){return Ro(d.integerValue||d.doubleValue)}function Vl(d){return On(d)&&d.arrayValue.values?d.arrayValue.values.slice():[]}class vc{constructor(e,r){this.field=e,this.transform=r}}class Cl{constructor(e,r){this.version=e,this.transformResults=r}}class Io{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Io}static exists(e){return new Io(void 0,e)}static updateTime(e){return new Io(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $l(d,e){return void 0!==d.updateTime?e.isFoundDocument()&&e.version.isEqual(d.updateTime):void 0===d.exists||d.exists===e.isFoundDocument()}class Fc{}function ko(d,e){if(!d.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return d.isNoDocument()?new Uc(d.key,Io.none()):new yc(d.key,d.data,Io.none());{const r=d.data,f=ta.empty();let _=new Yo(Li.comparator);for(let x of e.fields)if(!_.has(x)){let M=r.field(x);null===M&&x.length>1&&(x=x.popLast(),M=r.field(x)),null===M?f.delete(x):f.set(x,M),_=_.add(x)}return new Au(d.key,f,new Ia(_.toArray()),Io.none())}}function Dd(d,e,r){d instanceof yc?function(f,_,x){const M=f.value.clone(),z=qd(f.fieldTransforms,_,x.transformResults);M.setAll(z),_.convertToFoundDocument(x.version,M).setHasCommittedMutations()}(d,e,r):d instanceof Au?function(f,_,x){if(!$l(f.precondition,_))return void _.convertToUnknownDocument(x.version);const M=qd(f.fieldTransforms,_,x.transformResults),z=_.data;z.setAll(Bc(f)),z.setAll(M),_.convertToFoundDocument(x.version,z).setHasCommittedMutations()}(d,e,r):e.convertToNoDocument(r.version).setHasCommittedMutations()}function tc(d,e,r,f){return d instanceof yc?function(_,x,M,z){if(!$l(_.precondition,x))return M;const ae=_.value.clone(),pe=Hl(_.fieldTransforms,z,x);return ae.setAll(pe),x.convertToFoundDocument(x.version,ae).setHasLocalMutations(),null}(d,e,r,f):d instanceof Au?function(_,x,M,z){if(!$l(_.precondition,x))return M;const ae=Hl(_.fieldTransforms,z,x),pe=x.data;return pe.setAll(Bc(_)),pe.setAll(ae),x.convertToFoundDocument(x.version,pe).setHasLocalMutations(),null===M?null:M.unionWith(_.fieldMask.fields).unionWith(_.fieldTransforms.map(Ve=>Ve.field))}(d,e,r,f):(M=r,$l(d.precondition,x=e)?(x.convertToNoDocument(x.version).setHasLocalMutations(),null):M);var x,M}function Lc(d,e){let r=null;for(const f of d.fieldTransforms){const _=e.data.field(f.field),x=bd(f.transform,_||null);null!=x&&(null===r&&(r=ta.empty()),r.set(f.field,x))}return r||null}function Xc(d,e){return d.type===e.type&&!!d.key.isEqual(e.key)&&!!d.precondition.isEqual(e.precondition)&&(f=e.fieldTransforms,!!(void 0===(r=d.fieldTransforms)&&void 0===f||r&&f&&Ra(r,f,(_,x)=>function Zc(d,e){return d.field.isEqual(e.field)&&(f=e.transform,(r=d.transform)instanceof $u&&f instanceof $u||r instanceof du&&f instanceof du?Ra(r.elements,f.elements,B):r instanceof hu&&f instanceof hu?B(r.gt,f.gt):r instanceof xu&&f instanceof xu);var r,f}(_,x))))&&(0===d.type?d.value.isEqual(e.value):1!==d.type||d.data.isEqual(e.data)&&d.fieldMask.isEqual(e.fieldMask));var r,f}class yc extends Fc{constructor(e,r,f,_=[]){super(),this.key=e,this.value=r,this.precondition=f,this.fieldTransforms=_,this.type=0}getFieldMask(){return null}}class Au extends Fc{constructor(e,r,f,_,x=[]){super(),this.key=e,this.data=r,this.fieldMask=f,this.precondition=_,this.fieldTransforms=x,this.type=1}getFieldMask(){return this.fieldMask}}function Bc(d){const e=new Map;return d.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const f=d.data.field(r);e.set(r,f)}}),e}function qd(d,e,r){const f=new Map;Xn(d.length===r.length);for(let _=0;_<r.length;_++){const x=d[_],M=x.transform,z=e.data.field(x.field);f.set(x.field,ld(M,z,r[_]))}return f}function Hl(d,e,r){const f=new Map;for(const _ of d){const x=_.transform,M=r.data.field(_.field);f.set(_.field,El(x,M,e))}return f}class Uc extends Fc{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nc extends Fc{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Qc{constructor(e){this.count=e}}var Is,ro;function Ja(d){switch(d){default:return Cn();case nn.CANCELLED:case nn.UNKNOWN:case nn.DEADLINE_EXCEEDED:case nn.RESOURCE_EXHAUSTED:case nn.INTERNAL:case nn.UNAVAILABLE:case nn.UNAUTHENTICATED:return!1;case nn.INVALID_ARGUMENT:case nn.NOT_FOUND:case nn.ALREADY_EXISTS:case nn.PERMISSION_DENIED:case nn.FAILED_PRECONDITION:case nn.ABORTED:case nn.OUT_OF_RANGE:case nn.UNIMPLEMENTED:case nn.DATA_LOSS:return!0}}function _c(d){if(void 0===d)return kr("GRPC error has no .code"),nn.UNKNOWN;switch(d){case Is.OK:return nn.OK;case Is.CANCELLED:return nn.CANCELLED;case Is.UNKNOWN:return nn.UNKNOWN;case Is.DEADLINE_EXCEEDED:return nn.DEADLINE_EXCEEDED;case Is.RESOURCE_EXHAUSTED:return nn.RESOURCE_EXHAUSTED;case Is.INTERNAL:return nn.INTERNAL;case Is.UNAVAILABLE:return nn.UNAVAILABLE;case Is.UNAUTHENTICATED:return nn.UNAUTHENTICATED;case Is.INVALID_ARGUMENT:return nn.INVALID_ARGUMENT;case Is.NOT_FOUND:return nn.NOT_FOUND;case Is.ALREADY_EXISTS:return nn.ALREADY_EXISTS;case Is.PERMISSION_DENIED:return nn.PERMISSION_DENIED;case Is.FAILED_PRECONDITION:return nn.FAILED_PRECONDITION;case Is.ABORTED:return nn.ABORTED;case Is.OUT_OF_RANGE:return nn.OUT_OF_RANGE;case Is.UNIMPLEMENTED:return nn.UNIMPLEMENTED;case Is.DATA_LOSS:return nn.DATA_LOSS;default:return Cn()}}(ro=Is||(Is={}))[ro.OK=0]="OK",ro[ro.CANCELLED=1]="CANCELLED",ro[ro.UNKNOWN=2]="UNKNOWN",ro[ro.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ro[ro.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ro[ro.NOT_FOUND=5]="NOT_FOUND",ro[ro.ALREADY_EXISTS=6]="ALREADY_EXISTS",ro[ro.PERMISSION_DENIED=7]="PERMISSION_DENIED",ro[ro.UNAUTHENTICATED=16]="UNAUTHENTICATED",ro[ro.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ro[ro.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ro[ro.ABORTED=10]="ABORTED",ro[ro.OUT_OF_RANGE=11]="OUT_OF_RANGE",ro[ro.UNIMPLEMENTED=12]="UNIMPLEMENTED",ro[ro.INTERNAL=13]="INTERNAL",ro[ro.UNAVAILABLE=14]="UNAVAILABLE",ro[ro.DATA_LOSS=15]="DATA_LOSS";class Wa{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),f=this.inner[r];if(void 0!==f)for(const[_,x]of f)if(this.equalsFn(_,e))return x}has(e){return void 0!==this.get(e)}set(e,r){const f=this.mapKeyFn(e),_=this.inner[f];if(void 0===_)return this.inner[f]=[[e,r]],void this.innerSize++;for(let x=0;x<_.length;x++)if(this.equalsFn(_[x][0],e))return void(_[x]=[e,r]);_.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),f=this.inner[r];if(void 0===f)return!1;for(let _=0;_<f.length;_++)if(this.equalsFn(f[_][0],e))return 1===f.length?delete this.inner[r]:f.splice(_,1),this.innerSize--,!0;return!1}forEach(e){to(this.inner,(r,f)=>{for(const[_,x]of f)e(_,x)})}isEmpty(){return Qu(this.inner)}size(){return this.innerSize}}const jl=new es(Yn.comparator);function Ko(){return jl}const Su=new es(Yn.comparator);function fu(...d){let e=Su;for(const r of d)e=e.insert(r.key,r);return e}function Il(d){let e=Su;return d.forEach((r,f)=>e=e.insert(r,f.overlayedDocument)),e}function Hs(){return el()}function Jc(){return el()}function el(){return new Wa(d=>d.toString(),(d,e)=>d.isEqual(e))}const Aa=new es(Yn.comparator),Hu=new Yo(Yn.comparator);function xi(...d){let e=Hu;for(const r of d)e=e.add(r);return e}const xl=new Yo(qr);function tl(){return xl}class bu{constructor(e,r,f,_,x){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=f,this.documentUpdates=_,this.resolvedLimboDocuments=x}static createSynthesizedRemoteEventForCurrentChange(e,r,f){const _=new Map;return _.set(e,ju.createSynthesizedTargetChangeForCurrentChange(e,r,f)),new bu(Lr.min(),_,tl(),Ko(),xi())}}class ju{constructor(e,r,f,_,x){this.resumeToken=e,this.current=r,this.addedDocuments=f,this.modifiedDocuments=_,this.removedDocuments=x}static createSynthesizedTargetChangeForCurrentChange(e,r,f){return new ju(f,r,xi(),xi(),xi())}}class Vc{constructor(e,r,f,_){this.It=e,this.removedTargetIds=r,this.key=f,this.Tt=_}}class $c{constructor(e,r){this.targetId=e,this.Et=r}}class eu{constructor(e,r,f=so.EMPTY_BYTE_STRING,_=null){this.state=e,this.targetIds=r,this.resumeToken=f,this.cause=_}}class Al{constructor(){this.At=0,this.Rt=Ec(),this.bt=so.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=xi(),r=xi(),f=xi();return this.Rt.forEach((_,x)=>{switch(x){case 0:e=e.add(_);break;case 2:r=r.add(_);break;case 1:f=f.add(_);break;default:Cn()}}),new ju(this.bt,this.Pt,e,r,f)}xt(){this.vt=!1,this.Rt=Ec()}Nt(e,r){this.vt=!0,this.Rt=this.Rt.insert(e,r)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class Sl{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Ko(),this.qt=bl(),this.Ut=new Yo(qr)}Kt(e){for(const r of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt);for(const r of e.removedTargetIds)this.Qt(r,e.key,e.Tt)}jt(e){this.forEachTarget(e,r=>{const f=this.Wt(r);switch(e.state){case 0:this.zt(r)&&f.Dt(e.resumeToken);break;case 1:f.Mt(),f.Vt||f.xt(),f.Dt(e.resumeToken);break;case 2:f.Mt(),f.Vt||this.removeTarget(r);break;case 3:this.zt(r)&&(f.Ft(),f.Dt(e.resumeToken));break;case 4:this.zt(r)&&(this.Ht(r),f.Dt(e.resumeToken));break;default:Cn()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Bt.forEach((f,_)=>{this.zt(_)&&r(_)})}Jt(e){const r=e.targetId,f=e.Et.count,_=this.Yt(r);if(_){const x=_.target;if(fc(x))if(0===f){const M=new Yn(x.path);this.Qt(r,M,no.newNoDocument(M,Lr.min()))}else Xn(1===f);else this.Xt(r)!==f&&(this.Ht(r),this.Ut=this.Ut.add(r))}}Zt(e){const r=new Map;this.Bt.forEach((x,M)=>{const z=this.Yt(M);if(z){if(x.current&&fc(z.target)){const ae=new Yn(z.target.path);null!==this.Lt.get(ae)||this.te(M,ae)||this.Qt(M,ae,no.newNoDocument(ae,e))}x.St&&(r.set(M,x.Ct()),x.xt())}});let f=xi();this.qt.forEach((x,M)=>{let z=!0;M.forEachWhile(ae=>{const pe=this.Yt(ae);return!pe||2===pe.purpose||(z=!1,!1)}),z&&(f=f.add(x))}),this.Lt.forEach((x,M)=>M.setReadTime(e));const _=new bu(e,r,this.Ut,this.Lt,f);return this.Lt=Ko(),this.qt=bl(),this.Ut=new Yo(qr),_}Gt(e,r){if(!this.zt(e))return;const f=this.te(e,r.key)?2:0;this.Wt(e).Nt(r.key,f),this.Lt=this.Lt.insert(r.key,r),this.qt=this.qt.insert(r.key,this.ee(r.key).add(e))}Qt(e,r,f){if(!this.zt(e))return;const _=this.Wt(e);this.te(e,r)?_.Nt(r,1):_.kt(r),this.qt=this.qt.insert(r,this.ee(r).delete(e)),f&&(this.Lt=this.Lt.insert(r,f))}removeTarget(e){this.Bt.delete(e)}Xt(e){const r=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let r=this.Bt.get(e);return r||(r=new Al,this.Bt.set(e,r)),r}ee(e){let r=this.qt.get(e);return r||(r=new Yo(qr),this.qt=this.qt.insert(e,r)),r}zt(e){const r=null!==this.Yt(e);return r||un("WatchChangeAggregator","Detected inactive target",e),r}Yt(e){const r=this.Bt.get(e);return r&&r.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new Al),this.$t.getRemoteKeysForTarget(e).forEach(r=>{this.Qt(e,r,null)})}te(e,r){return this.$t.getRemoteKeysForTarget(e).has(r)}}function bl(){return new es(Yn.comparator)}function Ec(){return new es(Yn.comparator)}const dd={asc:"ASCENDING",desc:"DESCENDING"},hs={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hd={and:"AND",or:"OR"};class Dl{constructor(e,r){this.databaseId=e,this.wt=r}}function wc(d,e){return d.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tu(d,e){return d.wt?e.toBase64():e.toUint8Array()}function Gu(d,e){return wc(d,e.toTimestamp())}function $o(d){return Xn(!!d),Lr.fromTimestamp(function(e){const r=Fs(e);return new eo(r.seconds,r.nanos)}(d))}function ao(d,e){return(r=d,new Ri(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function ra(d){const e=Ri.fromString(d);return Xn(Gl(e)),e}function Ds(d,e){return ao(d.databaseId,e.path)}function Fo(d,e){const r=ra(e);if(r.get(1)!==d.databaseId.projectId)throw new vn(nn.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+d.databaseId.projectId);if(r.get(3)!==d.databaseId.database)throw new vn(nn.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+d.databaseId.database);return new Yn(N(r))}function ts(d,e){return ao(d.databaseId,e)}function Sa(d){const e=ra(d);return 4===e.length?Ri.emptyPath():N(e)}function Tl(d){return new Ri(["projects",d.databaseId.projectId,"databases",d.databaseId.database]).canonicalString()}function N(d){return Xn(d.length>4&&"documents"===d.get(4)),d.popFirst(5)}function I(d,e,r){return{name:Ds(d,e),fields:r.value.mapValue.fields}}function D(d,e,r){const f=Fo(d,e.name),_=$o(e.updateTime),x=e.createTime?$o(e.createTime):Lr.min(),M=new ta({mapValue:{fields:e.fields}}),z=no.newFoundDocument(f,_,x,M);return r&&z.setHasCommittedMutations(),r?z.setHasCommittedMutations():z}function Oe(d,e){let r;if(e instanceof yc)r={update:I(d,e.key,e.value)};else if(e instanceof Uc)r={delete:Ds(d,e.key)};else if(e instanceof Au)r={update:I(d,e.key,e.data),updateMask:nl(e.fieldMask)};else{if(!(e instanceof nc))return Cn();r={verify:Ds(d,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(f=>function(_,x){const M=x.transform;if(M instanceof xu)return{fieldPath:x.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(M instanceof $u)return{fieldPath:x.field.canonicalString(),appendMissingElements:{values:M.elements}};if(M instanceof du)return{fieldPath:x.field.canonicalString(),removeAllFromArray:{values:M.elements}};if(M instanceof hu)return{fieldPath:x.field.canonicalString(),increment:M.gt};throw Cn()}(0,f))),e.precondition.isNone||(r.currentDocument=void 0!==(_=e.precondition).updateTime?{updateTime:Gu(d,_.updateTime)}:void 0!==_.exists?{exists:_.exists}:Cn()),r;var _}function kt(d,e){const r=e.currentDocument?void 0!==(_=e.currentDocument).updateTime?Io.updateTime($o(_.updateTime)):void 0!==_.exists?Io.exists(_.exists):Io.none():Io.none(),f=e.updateTransforms?e.updateTransforms.map(_=>function(x,M){let z=null;"setToServerValue"in M?(Xn("REQUEST_TIME"===M.setToServerValue),z=new xu):"appendMissingElements"in M?z=new $u(M.appendMissingElements.values||[]):"removeAllFromArray"in M?z=new du(M.removeAllFromArray.values||[]):"increment"in M?z=new hu(x,M.increment):Cn();const ae=Li.fromServerFormat(M.fieldPath);return new vc(ae,z)}(d,_)):[];var _;if(e.update){const _=Fo(d,e.update.name),x=new ta({mapValue:{fields:e.update.fields}});if(e.updateMask){const M=new Ia((e.updateMask.fieldPaths||[]).map(pe=>Li.fromServerFormat(pe)));return new Au(_,x,M,r,f)}return new yc(_,x,r,f)}if(e.delete){const _=Fo(d,e.delete);return new Uc(_,r)}if(e.verify){const _=Fo(d,e.verify);return new nc(_,r)}return Cn()}function Kn(d,e){return{documents:[ts(d,e.path)]}}function ur(d,e){const r={structuredQuery:{}},f=e.path;null!==e.collectionGroup?(r.parent=ts(d,f),r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r.parent=ts(d,f.popLast()),r.structuredQuery.from=[{collectionId:f.lastSegment()}]);const _=function(ae){if(0!==ae.length)return rc(mi.create(ae,"and"))}(e.filters);_&&(r.structuredQuery.where=_);const x=function(ae){if(0!==ae.length)return ae.map(pe=>{return{field:Tu((Ve=pe).field),direction:Du(Ve.dir)};var Ve})}(e.orderBy);x&&(r.structuredQuery.orderBy=x);const M=(pe=e.limit,d.wt||fa(pe)?pe:{value:pe});var pe,z,ae;return null!==M&&(r.structuredQuery.limit=M),e.startAt&&(r.structuredQuery.startAt={before:(z=e.startAt).inclusive,values:z.position}),e.endAt&&(r.structuredQuery.endAt={before:!(ae=e.endAt).inclusive,values:ae.position}),r}function si(d){let e=Sa(d.parent);const r=d.structuredQuery,f=r.from?r.from.length:0;let _=null;if(f>0){Xn(1===f);const Ve=r.from[0];Ve.allDescendants?_=Ve.collectionId:e=e.child(Ve.collectionId)}let x=[];r.where&&(x=function(Ve){const It=Bs(Ve);return It instanceof mi&&lc(It)?It.getFilters():[It]}(r.where));let M=[];r.orderBy&&(M=r.orderBy.map(Ve=>{return new yl(ai((It=Ve).field),function(en){switch(en){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(It.direction));var It}));let z=null;r.limit&&(z=function(Ve){let It;return It="object"==typeof Ve?Ve.value:Ve,fa(It)?null:It}(r.limit));let ae=null;var Ve;r.startAt&&(ae=new _r((Ve=r.startAt).values||[],!!Ve.before));let pe=null;return r.endAt&&(pe=function(Ve){return new _r(Ve.values||[],!Ve.before)}(r.endAt)),yo(e,_,M,x,z,"F",ae,pe)}function Bs(d){return void 0!==d.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=ai(e.unaryFilter.field);return nr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const f=ai(e.unaryFilter.field);return nr.create(f,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const _=ai(e.unaryFilter.field);return nr.create(_,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const x=ai(e.unaryFilter.field);return nr.create(x,"!=",{nullValue:"NULL_VALUE"});default:return Cn()}}(d):void 0!==d.fieldFilter?nr.create(ai((e=d).fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Cn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==d.compositeFilter?function(e){return mi.create(e.compositeFilter.filters.map(r=>Bs(r)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Cn()}}(e.compositeFilter.op))}(d):Cn();var e}function Du(d){return dd[d]}function Rl(d){return hs[d]}function Td(d){return hd[d]}function Tu(d){return{fieldPath:d.canonicalString()}}function ai(d){return Li.fromServerFormat(d.fieldPath)}function rc(d){return d instanceof nr?function(e){if("=="===e.op){if(or(e.value))return{unaryFilter:{field:Tu(e.field),op:"IS_NAN"}};if(ar(e.value))return{unaryFilter:{field:Tu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(or(e.value))return{unaryFilter:{field:Tu(e.field),op:"IS_NOT_NAN"}};if(ar(e.value))return{unaryFilter:{field:Tu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tu(e.field),op:Rl(e.op),value:e.value}}}(d):d instanceof mi?function(e){const r=e.getFilters().map(f=>rc(f));return 1===r.length?r[0]:{compositeFilter:{op:Td(e.op),filters:r}}}(d):Cn()}function nl(d){const e=[];return d.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function Gl(d){return d.length>=4&&"projects"===d.get(0)&&"databases"===d.get(2)}function ba(d){let e="";for(let r=0;r<d.length;r++)e.length>0&&(e=zl(e)),e=Zd(d.get(r),e);return zl(e)}function Zd(d,e){let r=e;const f=d.length;for(let _=0;_<f;_++){const x=d.charAt(_);switch(x){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=x}}return r}function zl(d){return d+"\x01\x01"}function ic(d){const e=d.length;if(Xn(e>=2),2===e)return Xn("\x01"===d.charAt(0)&&"\x01"===d.charAt(1)),Ri.emptyPath();const r=e-2,f=[];let _="";for(let x=0;x<e;){const M=d.indexOf("\x01",x);switch((M<0||M>r)&&Cn(),d.charAt(M+1)){case"\x01":const z=d.substring(x,M);let ae;0===_.length?ae=z:(_+=z,ae=_,_=""),f.push(ae);break;case"\x10":_+=d.substring(x,M),_+="\0";break;case"\x11":_+=d.substring(x,M+1);break;default:Cn()}x=M+2}return new Ri(f)}const zu=["userId","batchId"];function rl(d,e){return[d,ba(e)]}function Zh(d,e,r){return[d,ba(e),r]}const yr={},yh=["prefixPath","collectionGroup","readTime","documentId"],pu=["prefixPath","collectionGroup","documentId"],Xh=["collectionGroup","readTime","prefixPath","documentId"],Wu=["canonicalId","targetId"],jf=["targetId","path"],Gf=["path","targetId"],Xd=["collectionId","parent"],_h=["indexId","uid"],Qd=["uid","sequenceNumber"],Eh=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],js=["indexId","uid","orderedDocumentKey"],Qh=["userId","collectionPath","documentId"],Jh=["userId","collectionPath","largestBatchId"],wh=["userId","collectionGroup","largestBatchId"],Cc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Da=[...Cc,"documentOverlays"],gu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Wl=gu,ef=[...Wl,"indexConfiguration","indexState","indexEntries"];class Rd extends us{constructor(e,r){super(),this.se=e,this.currentSequenceNumber=r}}function ia(d,e){const r=Fn(d);return zo.M(r.se,e)}class Ch{constructor(e,r,f,_){this.batchId=e,this.localWriteTime=r,this.baseMutations=f,this.mutations=_}applyToRemoteDocument(e,r){const f=r.mutationResults;for(let _=0;_<this.mutations.length;_++){const x=this.mutations[_];x.key.isEqual(e.key)&&Dd(x,e,f[_])}}applyToLocalView(e,r){for(const f of this.baseMutations)f.key.isEqual(e.key)&&(r=tc(f,e,r,this.localWriteTime));for(const f of this.mutations)f.key.isEqual(e.key)&&(r=tc(f,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const f=Jc();return this.mutations.forEach(_=>{const x=e.get(_.key),M=x.overlayedDocument;let z=this.applyToLocalView(M,x.mutatedFields);z=r.has(_.key)?null:z;const ae=ko(M,z);null!==ae&&f.set(_.key,ae),M.isValidDocument()||M.convertToNoDocument(Lr.min())}),f}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),xi())}isEqual(e){return this.batchId===e.batchId&&Ra(this.mutations,e.mutations,(r,f)=>Xc(r,f))&&Ra(this.baseMutations,e.baseMutations,(r,f)=>Xc(r,f))}}class oa{constructor(e,r,f,_){this.batch=e,this.commitVersion=r,this.mutationResults=f,this.docVersions=_}static from(e,r,f){Xn(e.mutations.length===f.length);let _=Aa;const x=e.mutations;for(let M=0;M<x.length;M++)_=_.insert(x[M].key,f[M].version);return new oa(e,r,f,_)}}class il{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ma{constructor(e,r,f,_,x=Lr.min(),M=Lr.min(),z=so.EMPTY_BYTE_STRING){this.target=e,this.targetId=r,this.purpose=f,this.sequenceNumber=_,this.snapshotVersion=x,this.lastLimboFreeSnapshotVersion=M,this.resumeToken=z}withSequenceNumber(e){return new ma(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,r){return new ma(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ma(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Od{constructor(e){this.ie=e}}function Ih(d,e){const r=e.key,f={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Ol(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())f.document={name:Ds(_=d.ie,(x=e).key),fields:x.data.value.mapValue.fields,updateTime:wc(_,x.version.toTimestamp()),createTime:wc(_,x.createTime.toTimestamp())};else if(e.isNoDocument())f.noDocument={path:r.path.toArray(),readTime:Hc(e.version)};else{if(!e.isUnknownDocument())return Cn();f.unknownDocument={path:r.path.toArray(),version:Hc(e.version)}}var _,x;return f}function Ol(d){const e=d.toTimestamp();return[e.seconds,e.nanoseconds]}function Hc(d){const e=d.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jc(d){const e=new eo(d.seconds,d.nanoseconds);return Lr.fromTimestamp(e)}function mu(d,e){const r=(e.baseMutations||[]).map(x=>kt(d.ie,x));for(let x=0;x<e.mutations.length-1;++x)x+1<e.mutations.length&&void 0!==e.mutations[x+1].transform&&(e.mutations[x].updateTransforms=e.mutations[x+1].transform.fieldTransforms,e.mutations.splice(x+1,1),++x);const f=e.mutations.map(x=>kt(d.ie,x)),_=eo.fromMillis(e.localWriteTimeMs);return new Ch(e.batchId,_,r,f)}function Md(d){const e=jc(d.readTime),r=void 0!==d.lastLimboFreeSnapshotVersion?jc(d.lastLimboFreeSnapshotVersion):Lr.min();let f;var _;return void 0!==d.query.documents?(Xn(1===(_=d.query).documents.length),f=Ls(Uu(Sa(_.documents[0])))):f=Ls(si(d.query)),new ma(f,d.targetId,0,d.lastListenSequenceNumber,e,r,so.fromBase64String(d.resumeToken))}function fd(d,e){const r=Hc(e.snapshotVersion),f=Hc(e.lastLimboFreeSnapshotVersion);let _;_=fc(e.target)?Kn(d.ie,e.target):ur(d.ie,e.target);const x=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:pa(e.target),readTime:r,resumeToken:x,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:f,query:_}}function Jd(d){const e=si({parent:d.parent,structuredQuery:d.structuredQuery});return"LAST"===d.limitType?na(e,e.limit,"L"):e}function pd(d,e){return new il(e.largestBatchId,kt(d.ie,e.overlayMutation))}function Yl(d,e){const r=e.path.lastSegment();return[d,ba(e.path.popLast()),r]}function Ml(d,e,r,f){return{indexId:d,uid:e.uid||"",sequenceNumber:r,readTime:Hc(f.readTime),documentKey:ba(f.documentKey.path),largestBatchId:f.largestBatchId}}class ol{getBundleMetadata(e,r){return xh(e).get(r).next(f=>{if(f)return{id:(_=f).bundleId,createTime:jc(_.createTime),version:_.version};var _})}saveBundleMetadata(e,r){return xh(e).put({bundleId:(f=r).id,createTime:Hc($o(f.createTime)),version:f.version});var f}getNamedQuery(e,r){return Nd(e).get(r).next(f=>{if(f)return{name:(_=f).name,query:Jd(_.bundledQuery),readTime:jc(_.readTime)};var _})}saveNamedQuery(e,r){return Nd(e).put({name:(f=r).name,readTime:Hc($o(f.readTime)),bundledQuery:f.bundledQuery});var f}}function xh(d){return ia(d,"bundles")}function Nd(d){return ia(d,"namedQueries")}class Nl{constructor(e,r){this.yt=e,this.userId=r}static re(e,r){return new Nl(e,r.uid||"")}getOverlay(e,r){return sl(e).get(Yl(this.userId,r)).next(f=>f?pd(this.yt,f):null)}getOverlays(e,r){const f=Hs();return Gt.forEach(r,_=>this.getOverlay(e,_).next(x=>{null!==x&&f.set(_,x)})).next(()=>f)}saveOverlays(e,r,f){const _=[];return f.forEach((x,M)=>{const z=new il(r,M);_.push(this.oe(e,z))}),Gt.waitFor(_)}removeOverlaysForBatchId(e,r,f){const _=new Set;r.forEach(M=>_.add(ba(M.getCollectionPath())));const x=[];return _.forEach(M=>{const z=IDBKeyRange.bound([this.userId,M,f],[this.userId,M,f+1],!1,!0);x.push(sl(e).Y("collectionPathOverlayIndex",z))}),Gt.waitFor(x)}getOverlaysForCollection(e,r,f){const _=Hs(),x=ba(r),M=IDBKeyRange.bound([this.userId,x,f],[this.userId,x,Number.POSITIVE_INFINITY],!0);return sl(e).W("collectionPathOverlayIndex",M).next(z=>{for(const ae of z){const pe=pd(this.yt,ae);_.set(pe.getKey(),pe)}return _})}getOverlaysForCollectionGroup(e,r,f,_){const x=Hs();let M;const z=IDBKeyRange.bound([this.userId,r,f],[this.userId,r,Number.POSITIVE_INFINITY],!0);return sl(e).Z({index:"collectionGroupOverlayIndex",range:z},(ae,pe,Ve)=>{const It=pd(this.yt,pe);x.size()<_||It.largestBatchId===M?(x.set(It.getKey(),It),M=It.largestBatchId):Ve.done()}).next(()=>x)}oe(e,r){return sl(e).put(function(f,_,x){const[M,z,ae]=Yl(_,x.mutation.key);return{userId:_,collectionPath:z,documentId:ae,collectionGroup:x.mutation.key.getCollectionGroup(),largestBatchId:x.largestBatchId,overlayMutation:Oe(f.ie,x.mutation)}}(this.yt,this.userId,r))}}function sl(d){return ia(d,"documentOverlays")}class al{constructor(){}ue(e,r){this.ce(e,r),r.ae()}ce(e,r){if("nullValue"in e)this.he(r,5);else if("booleanValue"in e)this.he(r,10),r.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(r,15),r.le(Ro(e.integerValue));else if("doubleValue"in e){const f=Ro(e.doubleValue);isNaN(f)?this.he(r,13):(this.he(r,15),Ca(f)?r.le(0):r.le(f))}else if("timestampValue"in e){const f=e.timestampValue;this.he(r,20),"string"==typeof f?r.fe(f):(r.fe(`${f.seconds||""}`),r.le(f.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,r),this._e(r);else if("bytesValue"in e)this.he(r,30),r.we(Ju(e.bytesValue)),this._e(r);else if("referenceValue"in e)this.me(e.referenceValue,r);else if("geoPointValue"in e){const f=e.geoPointValue;this.he(r,45),r.le(f.latitude||0),r.le(f.longitude||0)}else"mapValue"in e?Ee(e)?this.he(r,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,r),this._e(r)):"arrayValue"in e?(this.ye(e.arrayValue,r),this._e(r)):Cn()}de(e,r){this.he(r,25),this.pe(e,r)}pe(e,r){r.fe(e)}ge(e,r){const f=e.fields||{};this.he(r,55);for(const _ of Object.keys(f))this.de(_,r),this.ce(f[_],r)}ye(e,r){const f=e.values||[];this.he(r,50);for(const _ of f)this.ce(_,r)}me(e,r){this.he(r,37),Yn.fromName(e).path.forEach(f=>{this.he(r,60),this.pe(f,r)})}he(e,r){e.le(r)}_e(e){e.le(2)}}function eh(d){if(0===d)return 8;let e=0;return!(d>>4)&&(e+=4,d<<=4),!(d>>6)&&(e+=2,d<<=2),!(d>>7)&&(e+=1),e}function i(d){const e=64-function(r){let f=0;for(let _=0;_<8;++_){const x=eh(255&r[_]);if(f+=x,8!==x)break}return f}(d);return Math.ceil(e/8)}al.Ie=new al;class t{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const r=e[Symbol.iterator]();let f=r.next();for(;!f.done;)this.Ee(f.value),f=r.next();this.Ae()}Re(e){const r=e[Symbol.iterator]();let f=r.next();for(;!f.done;)this.be(f.value),f=r.next();this.Pe()}ve(e){for(const r of e){const f=r.charCodeAt(0);if(f<128)this.Ee(f);else if(f<2048)this.Ee(960|f>>>6),this.Ee(128|63&f);else if(r<"\ud800"||"\udbff"<r)this.Ee(480|f>>>12),this.Ee(128|63&f>>>6),this.Ee(128|63&f);else{const _=r.codePointAt(0);this.Ee(240|_>>>18),this.Ee(128|63&_>>>12),this.Ee(128|63&_>>>6),this.Ee(128|63&_)}}this.Ae()}Ve(e){for(const r of e){const f=r.charCodeAt(0);if(f<128)this.be(f);else if(f<2048)this.be(960|f>>>6),this.be(128|63&f);else if(r<"\ud800"||"\udbff"<r)this.be(480|f>>>12),this.be(128|63&f>>>6),this.be(128|63&f);else{const _=r.codePointAt(0);this.be(240|_>>>18),this.be(128|63&_>>>12),this.be(128|63&_>>>6),this.be(128|63&_)}}this.Pe()}Se(e){const r=this.De(e),f=i(r);this.Ce(1+f),this.buffer[this.position++]=255&f;for(let _=r.length-f;_<r.length;++_)this.buffer[this.position++]=255&r[_]}xe(e){const r=this.De(e),f=i(r);this.Ce(1+f),this.buffer[this.position++]=~(255&f);for(let _=r.length-f;_<r.length;++_)this.buffer[this.position++]=~(255&r[_])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const r=function(_){const x=new DataView(new ArrayBuffer(8));return x.setFloat64(0,_,!1),new Uint8Array(x.buffer)}(e),f=0!=(128&r[0]);r[0]^=f?255:128;for(let _=1;_<r.length;++_)r[_]^=f?255:0;return r}Ee(e){const r=255&e;0===r?(this.ke(0),this.ke(255)):255===r?(this.ke(255),this.ke(0)):this.ke(r)}be(e){const r=255&e;0===r?(this.Me(0),this.Me(255)):255===r?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const r=e+this.position;if(r<=this.buffer.length)return;let f=2*this.buffer.length;f<r&&(f=r);const _=new Uint8Array(f);_.set(this.buffer),this.buffer=_}}class n{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class s{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class h{constructor(){this.$e=new t,this.Be=new n(this.$e),this.Le=new s(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class g{constructor(e,r,f,_){this.indexId=e,this.documentKey=r,this.arrayValue=f,this.directionalValue=_}Ue(){const e=this.directionalValue.length,r=0===e||255===this.directionalValue[e-1]?e+1:e,f=new Uint8Array(r);return f.set(this.directionalValue,0),r!==e?f.set([0],this.directionalValue.length):++f[f.length-1],new g(this.indexId,this.documentKey,this.arrayValue,f)}}function a(d,e){let r=d.indexId-e.indexId;return 0!==r?r:(r=o(d.arrayValue,e.arrayValue),0!==r?r:(r=o(d.directionalValue,e.directionalValue),0!==r?r:Yn.comparator(d.documentKey,e.documentKey)))}function o(d,e){for(let r=0;r<d.length&&r<e.length;++r){const f=d[r]-e[r];if(0!==f)return f}return d.length-e.length}class l{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const r of e.filters){const f=r;f.isInequality()?this.Qe=f:this.Ge.push(f)}}je(e){Xn(e.collectionGroup===this.collectionId);const r=qi(e);if(void 0!==r&&!this.We(r))return!1;const f=qa(e);let _=0,x=0;for(;_<f.length&&this.We(f[_]);++_);if(_===f.length)return!0;if(void 0!==this.Qe){const M=f[_];if(!this.ze(this.Qe,M)||!this.He(this.Ke[x++],M))return!1;++_}for(;_<f.length;++_)if(x>=this.Ke.length||!this.He(this.Ke[x++],f[_]))return!1;return!0}We(e){for(const r of this.Ge)if(this.ze(r,e))return!0;return!1}ze(e,r){return!(void 0===e||!e.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,r){return!!e.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===e.dir||1===r.kind&&"desc"===e.dir)}}function v(d){var e,r;if(Xn(d instanceof nr||d instanceof mi),d instanceof nr){if(d instanceof id){const _=(null===(r=null===(e=d.value.arrayValue)||void 0===e?void 0:e.values)||void 0===r?void 0:r.map(x=>nr.create(d.field,"==",x)))||[];return mi.create(_,"or")}return d}const f=d.filters.map(_=>v(_));return mi.create(f,d.op)}function E(d){if(0===d.getFilters().length)return[];const e=Z(v(d));return Xn(k(e)),A(e)||R(e)?[e]:e.getFilters()}function A(d){return d instanceof nr}function R(d){return d instanceof mi&&lc(d)}function k(d){return A(d)||R(d)||function(e){if(e instanceof mi&&ec(e)){for(const r of e.getFilters())if(!A(r)&&!R(r))return!1;return!0}return!1}(d)}function Z(d){if(Xn(d instanceof nr||d instanceof mi),d instanceof nr)return d;if(1===d.filters.length)return Z(d.filters[0]);const e=d.filters.map(f=>Z(f));let r=mi.create(e,d.op);return r=Ue(r),k(r)?r:(Xn(r instanceof mi),Xn(Wo(r)),Xn(r.filters.length>1),r.filters.reduce((f,_)=>se(f,_)))}function se(d,e){let r;return Xn(d instanceof nr||d instanceof mi),Xn(e instanceof nr||e instanceof mi),r=d instanceof nr?e instanceof nr?mi.create([d,e],"and"):Me(d,e):e instanceof nr?Me(e,d):function(f,_){if(Xn(f.filters.length>0&&_.filters.length>0),Wo(f)&&Wo(_))return Qa(f,_.getFilters());const x=ec(f)?f:_,M=ec(f)?_:f,z=x.filters.map(ae=>se(ae,M));return mi.create(z,"or")}(d,e),Ue(r)}function Me(d,e){if(Wo(e))return Qa(e,d.getFilters());{const r=e.filters.map(f=>se(d,f));return mi.create(r,"or")}}function Ue(d){if(Xn(d instanceof nr||d instanceof mi),d instanceof nr)return d;const e=d.getFilters();if(1===e.length)return Ue(e[0]);if(Cu(d))return d;const r=e.map(_=>Ue(_)),f=[];return r.forEach(_=>{_ instanceof nr?f.push(_):_ instanceof mi&&(_.op===d.op?f.push(..._.filters):f.push(_))}),1===f.length?f[0]:mi.create(f,d.op)}class ze{constructor(){this.Je=new Ct}addToCollectionParentIndex(e,r){return this.Je.add(r),Gt.resolve()}getCollectionParents(e,r){return Gt.resolve(this.Je.getEntries(r))}addFieldIndex(e,r){return Gt.resolve()}deleteFieldIndex(e,r){return Gt.resolve()}getDocumentsMatchingTarget(e,r){return Gt.resolve(null)}getIndexType(e,r){return Gt.resolve(0)}getFieldIndexes(e,r){return Gt.resolve([])}getNextCollectionGroupToUpdate(e){return Gt.resolve(null)}getMinOffset(e,r){return Gt.resolve(jt.min())}getMinOffsetFromCollectionGroup(e,r){return Gt.resolve(jt.min())}updateCollectionGroup(e,r,f){return Gt.resolve()}updateIndexEntries(e,r){return Gt.resolve()}}class Ct{constructor(){this.index={}}add(e){const r=e.lastSegment(),f=e.popLast(),_=this.index[r]||new Yo(Ri.comparator),x=!_.has(f);return this.index[r]=_.add(f),x}has(e){const r=e.lastSegment(),f=e.popLast(),_=this.index[r];return _&&_.has(f)}getEntries(e){return(this.index[e]||new Yo(Ri.comparator)).toArray()}}const Mt=new Uint8Array(0);class gn{constructor(e,r){this.user=e,this.databaseId=r,this.Ye=new Ct,this.Xe=new Wa(f=>pa(f),(f,_)=>Mc(f,_)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.Ye.has(r)){const f=r.lastSegment(),_=r.popLast();e.addOnCommittedListener(()=>{this.Ye.add(r)});const x={collectionId:f,parent:ba(_)};return Rn(e).put(x)}return Gt.resolve()}getCollectionParents(e,r){const f=[],_=IDBKeyRange.bound([r,""],[Zu(r),""],!1,!0);return Rn(e).W(_).next(x=>{for(const M of x){if(M.collectionId!==r)break;f.push(ic(M.parent))}return f})}addFieldIndex(e,r){const f=Sr(e),_={indexId:(M=r).indexId,collectionGroup:M.collectionGroup,fields:M.fields.map(z=>[z.fieldPath.canonicalString(),z.kind])};var M;delete _.indexId;const x=f.add(_);if(r.indexState){const M=ni(e);return x.next(z=>{M.put(Ml(z,this.user,r.indexState.sequenceNumber,r.indexState.offset))})}return x.next()}deleteFieldIndex(e,r){const f=Sr(e),_=ni(e),x=$n(e);return f.delete(r.indexId).next(()=>_.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>x.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,r){const f=$n(e);let _=!0;const x=new Map;return Gt.forEach(this.Ze(r),M=>this.tn(e,M).next(z=>{_&&(_=!!z),x.set(M,z)})).next(()=>{if(_){let M=xi();const z=[];return Gt.forEach(x,(ae,pe)=>{var Ve;un("IndexedDbIndexManager",`Using index ${Ve=ae,`id=${Ve.indexId}|cg=${Ve.collectionGroup}|f=${Ve.fields.map(Ho=>`${Ho.fieldPath}:${Ho.kind}`).join(",")}`} to execute ${pa(r)}`);const It=function(Ho,Ta){const Eo=qi(Ta);if(void 0===Eo)return null;for(const qo of pc(Ho,Eo.fieldPath))switch(qo.op){case"array-contains-any":return qo.value.arrayValue.values||[];case"array-contains":return[qo.value]}return null}(pe,ae),en=function(Ho,Ta){const Eo=new Map;for(const qo of qa(Ta))for(const ou of pc(Ho,qo.fieldPath))switch(ou.op){case"==":case"in":Eo.set(qo.fieldPath.canonicalString(),ou.value);break;case"not-in":case"!=":return Eo.set(qo.fieldPath.canonicalString(),ou.value),Array.from(Eo.values())}return null}(pe,ae),An=function(Ho,Ta){const Eo=[];let qo=!0;for(const ou of qa(Ta)){const Yp=0===ou.kind?ad(Ho,ou.fieldPath,Ho.startAt):xa(Ho,ou.fieldPath,Ho.startAt);Eo.push(Yp.value),qo&&(qo=Yp.inclusive)}return new _r(Eo,qo)}(pe,ae),Pn=function(Ho,Ta){const Eo=[];let qo=!0;for(const ou of qa(Ta)){const Yp=0===ou.kind?xa(Ho,ou.fieldPath,Ho.endAt):ad(Ho,ou.fieldPath,Ho.endAt);Eo.push(Yp.value),qo&&(qo=Yp.inclusive)}return new _r(Eo,qo)}(pe,ae),xr=this.en(ae,pe,An),ei=this.en(ae,pe,Pn),Rs=this.nn(ae,pe,en),Gs=this.sn(ae.indexId,It,xr,An.inclusive,ei,Pn.inclusive,Rs);return Gt.forEach(Gs,Ho=>f.J(Ho,r.limit).next(Ta=>{Ta.forEach(Eo=>{const qo=Yn.fromSegments(Eo.documentKey);M.has(qo)||(M=M.add(qo),z.push(qo))})}))}).next(()=>z)}return Gt.resolve(null)})}Ze(e){let r=this.Xe.get(e);return r||(r=0===e.filters.length?[e]:E(mi.create(e.filters,"and")).map(f=>Ll(e.path,e.collectionGroup,e.orderBy,f.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,r),r)}sn(e,r,f,_,x,M,z){const ae=(null!=r?r.length:1)*Math.max(f.length,x.length),pe=ae/(null!=r?r.length:1),Ve=[];for(let It=0;It<ae;++It){const en=r?this.rn(r[It/pe]):Mt,An=this.on(e,en,f[It%pe],_),Pn=this.un(e,en,x[It%pe],M),xr=z.map(ei=>this.on(e,en,ei,!0));Ve.push(...this.createRange(An,Pn,xr))}return Ve}on(e,r,f,_){const x=new g(e,Yn.empty(),r,f);return _?x:x.Ue()}un(e,r,f,_){const x=new g(e,Yn.empty(),r,f);return _?x.Ue():x}tn(e,r){const f=new l(r),_=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,_).next(x=>{let M=null;for(const z of x)f.je(z)&&(!M||z.fields.length>M.fields.length)&&(M=z);return M})}getIndexType(e,r){let f=2;const _=this.Ze(r);return Gt.forEach(_,x=>this.tn(e,x).next(M=>{M?0!==f&&M.fields.length<function(z){let ae=new Yo(Li.comparator),pe=!1;for(const Ve of z.filters)for(const It of Ve.getFlattenedFilters())It.field.isKeyField()||("array-contains"===It.op||"array-contains-any"===It.op?pe=!0:ae=ae.add(It.field));for(const Ve of z.orderBy)Ve.field.isKeyField()||(ae=ae.add(Ve.field));return ae.size+(pe?1:0)}(x)&&(f=1):f=0})).next(()=>null!==r.limit&&_.length>1&&2===f?1:f)}cn(e,r){const f=new h;for(const _ of qa(e)){const x=r.data.field(_.fieldPath);if(null==x)return null;const M=f.qe(_.kind);al.Ie.ue(x,M)}return f.Fe()}rn(e){const r=new h;return al.Ie.ue(e,r.qe(0)),r.Fe()}an(e,r){const f=new h;return al.Ie.ue(Tt(this.databaseId,r),f.qe(function(_){const x=qa(_);return 0===x.length?0:x[x.length-1].kind}(e))),f.Fe()}nn(e,r,f){if(null===f)return[];let _=[];_.push(new h);let x=0;for(const M of qa(e)){const z=f[x++];for(const ae of _)if(this.hn(r,M.fieldPath)&&On(z))_=this.ln(_,M,z);else{const pe=ae.qe(M.kind);al.Ie.ue(z,pe)}}return this.fn(_)}en(e,r,f){return this.nn(e,r,f.position)}fn(e){const r=[];for(let f=0;f<e.length;++f)r[f]=e[f].Fe();return r}ln(e,r,f){const _=[...e],x=[];for(const M of f.arrayValue.values||[])for(const z of _){const ae=new h;ae.seed(z.Fe()),al.Ie.ue(M,ae.qe(r.kind)),x.push(ae)}return x}hn(e,r){return!!e.filters.find(f=>f instanceof nr&&f.field.isEqual(r)&&("in"===f.op||"not-in"===f.op))}getFieldIndexes(e,r){const f=Sr(e),_=ni(e);return(r?f.W("collectionGroupIndex",IDBKeyRange.bound(r,r)):f.W()).next(x=>{const M=[];return Gt.forEach(x,z=>_.get([z.indexId,this.uid]).next(ae=>{M.push(function(pe,Ve){const It=Ve?new au(Ve.sequenceNumber,new jt(jc(Ve.readTime),new Yn(ic(Ve.documentKey)),Ve.largestBatchId)):au.empty(),en=pe.fields.map(([An,Pn])=>new la(Li.fromServerFormat(An),Pn));return new _u(pe.indexId,pe.collectionGroup,en,It)}(z,ae))})).next(()=>M)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>0===r.length?null:(r.sort((f,_)=>{const x=f.indexState.sequenceNumber-_.indexState.sequenceNumber;return 0!==x?x:qr(f.collectionGroup,_.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,f){const _=Sr(e),x=ni(e);return this.dn(e).next(M=>_.W("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(z=>Gt.forEach(z,ae=>x.put(Ml(ae.indexId,this.user,M,f)))))}updateIndexEntries(e,r){const f=new Map;return Gt.forEach(r,(_,x)=>{const M=f.get(_.collectionGroup);return(M?Gt.resolve(M):this.getFieldIndexes(e,_.collectionGroup)).next(z=>(f.set(_.collectionGroup,z),Gt.forEach(z,ae=>this._n(e,_,ae).next(pe=>{const Ve=this.wn(x,ae);return pe.isEqual(Ve)?Gt.resolve():this.mn(e,x,ae,pe,Ve)}))))})}gn(e,r,f,_){return $n(e).put({indexId:_.indexId,uid:this.uid,arrayValue:_.arrayValue,directionalValue:_.directionalValue,orderedDocumentKey:this.an(f,r.key),documentKey:r.key.path.toArray()})}yn(e,r,f,_){return $n(e).delete([_.indexId,this.uid,_.arrayValue,_.directionalValue,this.an(f,r.key),r.key.path.toArray()])}_n(e,r,f){const _=$n(e);let x=new Yo(a);return _.Z({index:"documentKeyIndex",range:IDBKeyRange.only([f.indexId,this.uid,this.an(f,r)])},(M,z)=>{x=x.add(new g(f.indexId,r,z.arrayValue,z.directionalValue))}).next(()=>x)}wn(e,r){let f=new Yo(a);const _=this.cn(r,e);if(null==_)return f;const x=qi(r);if(null!=x){const M=e.data.field(x.fieldPath);if(On(M))for(const z of M.arrayValue.values||[])f=f.add(new g(r.indexId,e.key,this.rn(z),_))}else f=f.add(new g(r.indexId,e.key,Mt,_));return f}mn(e,r,f,_,x){un("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const M=[];return function(z,ae,pe,Ve,It){const en=z.getIterator(),An=ae.getIterator();let Pn=dc(en),xr=dc(An);for(;Pn||xr;){let ei=!1,Rs=!1;if(Pn&&xr){const Gs=pe(Pn,xr);Gs<0?Rs=!0:Gs>0&&(ei=!0)}else null!=Pn?Rs=!0:ei=!0;ei?(Ve(xr),xr=dc(An)):Rs?(It(Pn),Pn=dc(en)):(Pn=dc(en),xr=dc(An))}}(_,x,a,z=>{M.push(this.gn(e,r,f,z))},z=>{M.push(this.yn(e,r,f,z))}),Gt.waitFor(M)}dn(e){let r=1;return ni(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(f,_,x)=>{x.done(),r=_.sequenceNumber+1}).next(()=>r)}createRange(e,r,f){f=f.sort((M,z)=>a(M,z)).filter((M,z,ae)=>!z||0!==a(M,ae[z-1]));const _=[];_.push(e);for(const M of f){const z=a(M,e),ae=a(M,r);if(0===z)_[0]=e.Ue();else if(z>0&&ae<0)_.push(M),_.push(M.Ue());else if(ae>0)break}_.push(r);const x=[];for(let M=0;M<_.length;M+=2){if(this.pn(_[M],_[M+1]))return[];x.push(IDBKeyRange.bound([_[M].indexId,this.uid,_[M].arrayValue,_[M].directionalValue,Mt,[]],[_[M+1].indexId,this.uid,_[M+1].arrayValue,_[M+1].directionalValue,Mt,[]]))}return x}pn(e,r){return a(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(di)}getMinOffset(e,r){return Gt.mapArray(this.Ze(r),f=>this.tn(e,f).next(_=>_||Cn())).next(di)}}function Rn(d){return ia(d,"collectionParents")}function $n(d){return ia(d,"indexEntries")}function Sr(d){return ia(d,"indexConfiguration")}function ni(d){return ia(d,"indexState")}function di(d){Xn(0!==d.length);let e=d[0].indexState.offset,r=e.largestBatchId;for(let f=1;f<d.length;f++){const _=d[f].indexState.offset;uu(_,e)<0&&(e=_),r<_.largestBatchId&&(r=_.largestBatchId)}return new jt(e.readTime,e.documentKey,r)}const sa={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Di{constructor(e,r,f){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=f}static withCacheSize(e){return new Di(e,Di.DEFAULT_COLLECTION_PERCENTILE,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ts(d,e,r){const f=d.store("mutations"),_=d.store("documentMutations"),x=[],M=IDBKeyRange.only(r.batchId);let z=0;const ae=f.Z({range:M},(Ve,It,en)=>(z++,en.delete()));x.push(ae.next(()=>{Xn(1===z)}));const pe=[];for(const Ve of r.mutations){const It=Zh(e,Ve.key.path,r.batchId);x.push(_.delete(It)),pe.push(Ve.key)}return Gt.waitFor(x).next(()=>pe)}function Ru(d){if(!d)return 0;let e;if(d.document)e=d.document;else if(d.unknownDocument)e=d.unknownDocument;else{if(!d.noDocument)throw Cn();e=d.noDocument}return JSON.stringify(e).length}Di.DEFAULT_COLLECTION_PERCENTILE=10,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Di.DEFAULT=new Di(41943040,Di.DEFAULT_COLLECTION_PERCENTILE,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Di.DISABLED=new Di(-1,0,0);class sc{constructor(e,r,f,_){this.userId=e,this.yt=r,this.indexManager=f,this.referenceDelegate=_,this.In={}}static re(e,r,f,_){Xn(""!==e.uid);const x=e.isAuthenticated()?e.uid:"";return new sc(x,r,f,_)}checkEmpty(e){let r=!0;const f=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ul(e).Z({index:"userMutationsIndex",range:f},(_,x,M)=>{r=!1,M.done()}).next(()=>r)}addMutationBatch(e,r,f,_){const x=ql(e),M=ul(e);return M.add({}).next(z=>{Xn("number"==typeof z);const ae=new Ch(z,r,f,_),pe=function(en,An,Pn){const xr=Pn.baseMutations.map(Rs=>Oe(en.ie,Rs)),ei=Pn.mutations.map(Rs=>Oe(en.ie,Rs));return{userId:An,batchId:Pn.batchId,localWriteTimeMs:Pn.localWriteTime.toMillis(),baseMutations:xr,mutations:ei}}(this.yt,this.userId,ae),Ve=[];let It=new Yo((en,An)=>qr(en.canonicalString(),An.canonicalString()));for(const en of _){const An=Zh(this.userId,en.key.path,z);It=It.add(en.key.path.popLast()),Ve.push(M.put(pe)),Ve.push(x.put(An,yr))}return It.forEach(en=>{Ve.push(this.indexManager.addToCollectionParentIndex(e,en))}),e.addOnCommittedListener(()=>{this.In[z]=ae.keys()}),Gt.waitFor(Ve).next(()=>ae)})}lookupMutationBatch(e,r){return ul(e).get(r).next(f=>f?(Xn(f.userId===this.userId),mu(this.yt,f)):null)}Tn(e,r){return this.In[r]?Gt.resolve(this.In[r]):this.lookupMutationBatch(e,r).next(f=>{if(f){const _=f.keys();return this.In[r]=_,_}return null})}getNextMutationBatchAfterBatchId(e,r){const f=r+1,_=IDBKeyRange.lowerBound([this.userId,f]);let x=null;return ul(e).Z({index:"userMutationsIndex",range:_},(M,z,ae)=>{z.userId===this.userId&&(Xn(z.batchId>=f),x=mu(this.yt,z)),ae.done()}).next(()=>x)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let f=-1;return ul(e).Z({index:"userMutationsIndex",range:r,reverse:!0},(_,x,M)=>{f=x.batchId,M.done()}).next(()=>f)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ul(e).W("userMutationsIndex",r).next(f=>f.map(_=>mu(this.yt,_)))}getAllMutationBatchesAffectingDocumentKey(e,r){const f=rl(this.userId,r.path),_=IDBKeyRange.lowerBound(f),x=[];return ql(e).Z({range:_},(M,z,ae)=>{const[pe,Ve,It]=M,en=ic(Ve);if(pe===this.userId&&r.path.isEqual(en))return ul(e).get(It).next(An=>{if(!An)throw Cn();Xn(An.userId===this.userId),x.push(mu(this.yt,An))});ae.done()}).next(()=>x)}getAllMutationBatchesAffectingDocumentKeys(e,r){let f=new Yo(qr);const _=[];return r.forEach(x=>{const M=rl(this.userId,x.path),z=IDBKeyRange.lowerBound(M),ae=ql(e).Z({range:z},(pe,Ve,It)=>{const[en,An,Pn]=pe,xr=ic(An);en===this.userId&&x.path.isEqual(xr)?f=f.add(Pn):It.done()});_.push(ae)}),Gt.waitFor(_).next(()=>this.En(e,f))}getAllMutationBatchesAffectingQuery(e,r){const f=r.path,_=f.length+1,x=rl(this.userId,f),M=IDBKeyRange.lowerBound(x);let z=new Yo(qr);return ql(e).Z({range:M},(ae,pe,Ve)=>{const[It,en,An]=ae,Pn=ic(en);It===this.userId&&f.isPrefixOf(Pn)?Pn.length===_&&(z=z.add(An)):Ve.done()}).next(()=>this.En(e,z))}En(e,r){const f=[],_=[];return r.forEach(x=>{_.push(ul(e).get(x).next(M=>{if(null===M)throw Cn();Xn(M.userId===this.userId),f.push(mu(this.yt,M))}))}),Gt.waitFor(_).next(()=>f)}removeMutationBatch(e,r){return Ts(e.se,this.userId,r).next(f=>(e.addOnCommittedListener(()=>{this.An(r.batchId)}),Gt.forEach(f,_=>this.referenceDelegate.markPotentiallyOrphaned(e,_))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Gt.resolve();const f=IDBKeyRange.lowerBound([this.userId]),_=[];return ql(e).Z({range:f},(x,M,z)=>{if(x[0]===this.userId){const ae=ic(x[1]);_.push(ae)}else z.done()}).next(()=>{Xn(0===_.length)})})}containsKey(e,r){return Kl(e,this.userId,r)}Rn(e){return xm(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Kl(d,e,r){const f=rl(e,r.path),_=f[1],x=IDBKeyRange.lowerBound(f);let M=!1;return ql(d).Z({range:x,X:!0},(z,ae,pe)=>{const[Ve,It,en]=z;Ve===e&&It===_&&(M=!0),pe.done()}).next(()=>M)}function ul(d){return ia(d,"mutations")}function ql(d){return ia(d,"documentMutations")}function xm(d){return ia(d,"mutationQueues")}class th{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new th(0)}static vn(){return new th(-1)}}class gv{constructor(e,r){this.referenceDelegate=e,this.yt=r}allocateTargetId(e){return this.Vn(e).next(r=>{const f=new th(r.highestTargetId);return r.highestTargetId=f.next(),this.Sn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(r=>Lr.fromTimestamp(new eo(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,f){return this.Vn(e).next(_=>(_.highestListenSequenceNumber=r,f&&(_.lastRemoteSnapshotVersion=f.toTimestamp()),r>_.highestListenSequenceNumber&&(_.highestListenSequenceNumber=r),this.Sn(e,_)))}addTargetData(e,r){return this.Dn(e,r).next(()=>this.Vn(e).next(f=>(f.targetCount+=1,this.Cn(r,f),this.Sn(e,f))))}updateTargetData(e,r){return this.Dn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Ah(e).delete(r.targetId)).next(()=>this.Vn(e)).next(f=>(Xn(f.targetCount>0),f.targetCount-=1,this.Sn(e,f)))}removeTargets(e,r,f){let _=0;const x=[];return Ah(e).Z((M,z)=>{const ae=Md(z);ae.sequenceNumber<=r&&null===f.get(ae.targetId)&&(_++,x.push(this.removeTargetData(e,ae)))}).next(()=>Gt.waitFor(x)).next(()=>_)}forEachTarget(e,r){return Ah(e).Z((f,_)=>{const x=Md(_);r(x)})}Vn(e){return Am(e).get("targetGlobalKey").next(r=>(Xn(null!==r),r))}Sn(e,r){return Am(e).put("targetGlobalKey",r)}Dn(e,r){return Ah(e).put(fd(this.yt,r))}Cn(e,r){let f=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,f=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,f=!0),f}getTargetCount(e){return this.Vn(e).next(r=>r.targetCount)}getTargetData(e,r){const f=pa(r),_=IDBKeyRange.bound([f,Number.NEGATIVE_INFINITY],[f,Number.POSITIVE_INFINITY]);let x=null;return Ah(e).Z({range:_,index:"queryTargetsIndex"},(M,z,ae)=>{const pe=Md(z);Mc(r,pe.target)&&(x=pe,ae.done())}).next(()=>x)}addMatchingKeys(e,r,f){const _=[],x=Gc(e);return r.forEach(M=>{const z=ba(M.path);_.push(x.put({targetId:f,path:z})),_.push(this.referenceDelegate.addReference(e,f,M))}),Gt.waitFor(_)}removeMatchingKeys(e,r,f){const _=Gc(e);return Gt.forEach(r,x=>{const M=ba(x.path);return Gt.waitFor([_.delete([f,M]),this.referenceDelegate.removeReference(e,f,x)])})}removeMatchingKeysForTargetId(e,r){const f=Gc(e),_=IDBKeyRange.bound([r],[r+1],!1,!0);return f.delete(_)}getMatchingKeysForTargetId(e,r){const f=IDBKeyRange.bound([r],[r+1],!1,!0),_=Gc(e);let x=xi();return _.Z({range:f,X:!0},(M,z,ae)=>{const pe=ic(M[1]),Ve=new Yn(pe);x=x.add(Ve)}).next(()=>x)}containsKey(e,r){const f=ba(r.path),_=IDBKeyRange.bound([f],[Zu(f)],!1,!0);let x=0;return Gc(e).Z({index:"documentTargetsIndex",X:!0,range:_},([M,z],ae,pe)=>{0!==M&&(x++,pe.done())}).next(()=>x>0)}ne(e,r){return Ah(e).get(r).next(f=>f?Md(f):null)}}function Ah(d){return ia(d,"targets")}function Am(d){return ia(d,"targetGlobal")}function Gc(d){return ia(d,"targetDocuments")}function Zl([d,e],[r,f]){const _=qr(d,r);return 0===_?qr(e,f):_}class mv{constructor(e){this.xn=e,this.buffer=new Yo(Zl),this.Nn=0}kn(){return++this.Nn}On(e){const r=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(r);else{const f=this.buffer.last();Zl(r,f)<0&&(this.buffer=this.buffer.delete(f).add(r))}}get maxValue(){return this.buffer.last()[0]}}class vv{constructor(e,r,f){this.garbageCollector=e,this.asyncQueue=r,this.localStore=f,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var r=this;un("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ce.Z)(function*(){r.Mn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(f){Bi(f)?un("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",f):yield Ma(f)}yield r.Fn(3e5)}))}}class n1{constructor(e,r){this.$n=e,this.params=r}calculateTargetCount(e,r){return this.$n.Bn(e).next(f=>Math.floor(r/100*f))}nthSequenceNumber(e,r){if(0===r)return Gt.resolve(ha.at);const f=new mv(r);return this.$n.forEachTarget(e,_=>f.On(_.sequenceNumber)).next(()=>this.$n.Ln(e,_=>f.On(_))).next(()=>f.maxValue)}removeTargets(e,r,f){return this.$n.removeTargets(e,r,f)}removeOrphanedDocuments(e,r){return this.$n.removeOrphanedDocuments(e,r)}collect(e,r){return-1===this.params.cacheSizeCollectionThreshold?(un("LruGarbageCollector","Garbage collection skipped; disabled"),Gt.resolve(sa)):this.getCacheSize(e).next(f=>f<this.params.cacheSizeCollectionThreshold?(un("LruGarbageCollector",`Garbage collection skipped; Cache size ${f} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sa):this.qn(e,r))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,r){let f,_,x,M,z,ae,pe;const Ve=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(It=>(It>this.params.maximumSequenceNumbersToCollect?(un("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${It}`),_=this.params.maximumSequenceNumbersToCollect):_=It,M=Date.now(),this.nthSequenceNumber(e,_))).next(It=>(f=It,z=Date.now(),this.removeTargets(e,f,r))).next(It=>(x=It,ae=Date.now(),this.removeOrphanedDocuments(e,f))).next(It=>(pe=Date.now(),ir()<=yt.in.DEBUG&&un("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${M-Ve}ms\n\tDetermined least recently used ${_} in `+(z-M)+`ms\n\tRemoved ${x} targets in `+(ae-z)+`ms\n\tRemoved ${It} documents in `+(pe-ae)+`ms\nTotal Duration: ${pe-Ve}ms`),Gt.resolve({didRun:!0,sequenceNumbersCollected:_,targetsRemoved:x,documentsRemoved:It})))}}class r1{constructor(e,r){this.db=e,this.garbageCollector=new n1(this,r)}Bn(e){const r=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(f=>r.next(_=>f+_))}Un(e){let r=0;return this.Ln(e,f=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Ln(e,r){return this.Kn(e,(f,_)=>r(_))}addReference(e,r,f){return tf(e,f)}removeReference(e,r,f){return tf(e,f)}removeTargets(e,r,f){return this.db.getTargetCache().removeTargets(e,r,f)}markPotentiallyOrphaned(e,r){return tf(e,r)}Gn(e,r){return function(f,_){let x=!1;return xm(f).tt(M=>Kl(f,M,_).next(z=>(z&&(x=!0),Gt.resolve(!z)))).next(()=>x)}(e,r)}removeOrphanedDocuments(e,r){const f=this.db.getRemoteDocumentCache().newChangeBuffer(),_=[];let x=0;return this.Kn(e,(M,z)=>{if(z<=r){const ae=this.Gn(e,M).next(pe=>{if(!pe)return x++,f.getEntry(e,M).next(()=>(f.removeEntry(M,Lr.min()),Gc(e).delete([0,ba(M.path)])))});_.push(ae)}}).next(()=>Gt.waitFor(_)).next(()=>f.apply(e)).next(()=>x)}removeTarget(e,r){const f=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,f)}updateLimboDocument(e,r){return tf(e,r)}Kn(e,r){const f=Gc(e);let _,x=ha.at;return f.Z({index:"documentTargetsIndex"},([M,z],{path:ae,sequenceNumber:pe})=>{0===M?(x!==ha.at&&r(new Yn(ic(_)),x),x=pe,_=ae):x=ha.at}).next(()=>{x!==ha.at&&r(new Yn(ic(_)),x)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function tf(d,e){return Gc(d).put((f=d.currentSequenceNumber,{targetId:0,path:ba(e.path),sequenceNumber:f}));var f}class yv{constructor(){this.changes=new Wa(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,no.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const f=this.changes.get(r);return void 0!==f?Gt.resolve(f):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Sm{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,f){return nh(e).put(f)}removeEntry(e,r,f){return nh(e).delete(function(_,x){const M=_.path.toArray();return[M.slice(0,M.length-2),M[M.length-2],Ol(x),M[M.length-1]]}(r,f))}updateMetadata(e,r){return this.getMetadata(e).next(f=>(f.byteSize+=r,this.Qn(e,f)))}getEntry(e,r){let f=no.newInvalidDocument(r);return nh(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(nf(r))},(_,x)=>{f=this.jn(r,x)}).next(()=>f)}Wn(e,r){let f={size:0,document:no.newInvalidDocument(r)};return nh(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(nf(r))},(_,x)=>{f={document:this.jn(r,x),size:Ru(x)}}).next(()=>f)}getEntries(e,r){let f=Ko();return this.zn(e,r,(_,x)=>{const M=this.jn(_,x);f=f.insert(_,M)}).next(()=>f)}Hn(e,r){let f=Ko(),_=new es(Yn.comparator);return this.zn(e,r,(x,M)=>{const z=this.jn(x,M);f=f.insert(x,z),_=_.insert(x,Ru(M))}).next(()=>({documents:f,Jn:_}))}zn(e,r,f){if(r.isEmpty())return Gt.resolve();let _=new Yo(bm);r.forEach(ae=>_=_.add(ae));const x=IDBKeyRange.bound(nf(_.first()),nf(_.last())),M=_.getIterator();let z=M.getNext();return nh(e).Z({index:"documentKeyIndex",range:x},(ae,pe,Ve)=>{const It=Yn.fromSegments([...pe.prefixPath,pe.collectionGroup,pe.documentId]);for(;z&&bm(z,It)<0;)f(z,null),z=M.getNext();z&&z.isEqual(It)&&(f(z,pe),z=M.hasNext()?M.getNext():null),z?Ve.j(nf(z)):Ve.done()}).next(()=>{for(;z;)f(z,null),z=M.hasNext()?M.getNext():null})}getDocumentsMatchingQuery(e,r,f,_){const x=r.path,M=[x.popLast().toArray(),x.lastSegment(),Ol(f.readTime),f.documentKey.path.isEmpty()?"":f.documentKey.path.lastSegment()],z=[x.popLast().toArray(),x.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return nh(e).W(IDBKeyRange.bound(M,z,!0)).next(ae=>{let pe=Ko();for(const Ve of ae){const It=this.jn(Yn.fromSegments(Ve.prefixPath.concat(Ve.collectionGroup,Ve.documentId)),Ve);It.isFoundDocument()&&(kc(r,It)||_.has(It.key))&&(pe=pe.insert(It.key,It))}return pe})}getAllFromCollectionGroup(e,r,f,_){let x=Ko();const M=cl(r,f),z=cl(r,jt.max());return nh(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(M,z,!0)},(ae,pe,Ve)=>{const It=this.jn(Yn.fromSegments(pe.prefixPath.concat(pe.collectionGroup,pe.documentId)),pe);x=x.insert(It.key,It),x.size===_&&Ve.done()}).next(()=>x)}newChangeBuffer(e){return new _v(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return Xp(e).get("remoteDocumentGlobalKey").next(r=>(Xn(!!r),r))}Qn(e,r){return Xp(e).put("remoteDocumentGlobalKey",r)}jn(e,r){if(r){const f=function oc(d,e){let r;if(e.document)r=D(d.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const f=Yn.fromSegments(e.noDocument.path),_=jc(e.noDocument.readTime);r=no.newNoDocument(f,_),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Cn();{const f=Yn.fromSegments(e.unknownDocument.path),_=jc(e.unknownDocument.version);r=no.newUnknownDocument(f,_)}}return e.readTime&&r.setReadTime(function(f){const _=new eo(f[0],f[1]);return Lr.fromTimestamp(_)}(e.readTime)),r}(this.yt,r);if(!f.isNoDocument()||!f.version.isEqual(Lr.min()))return f}return no.newInvalidDocument(e)}}function Zp(d){return new Sm(d)}class _v extends yv{constructor(e,r){super(),this.Yn=e,this.trackRemovals=r,this.Xn=new Wa(f=>f.toString(),(f,_)=>f.isEqual(_))}applyChanges(e){const r=[];let f=0,_=new Yo((x,M)=>qr(x.canonicalString(),M.canonicalString()));return this.changes.forEach((x,M)=>{const z=this.Xn.get(x);if(r.push(this.Yn.removeEntry(e,x,z.readTime)),M.isValidDocument()){const ae=Ih(this.Yn.yt,M);_=_.add(x.path.popLast());const pe=Ru(ae);f+=pe-z.size,r.push(this.Yn.addEntry(e,x,ae))}else if(f-=z.size,this.trackRemovals){const ae=Ih(this.Yn.yt,M.convertToNoDocument(Lr.min()));r.push(this.Yn.addEntry(e,x,ae))}}),_.forEach(x=>{r.push(this.Yn.indexManager.addToCollectionParentIndex(e,x))}),r.push(this.Yn.updateMetadata(e,f)),Gt.waitFor(r)}getFromCache(e,r){return this.Yn.Wn(e,r).next(f=>(this.Xn.set(r,{size:f.size,readTime:f.document.readTime}),f.document))}getAllFromCache(e,r){return this.Yn.Hn(e,r).next(({documents:f,Jn:_})=>(_.forEach((x,M)=>{this.Xn.set(x,{size:M,readTime:f.get(x).readTime})}),f))}}function Xp(d){return ia(d,"remoteDocumentGlobal")}function nh(d){return ia(d,"remoteDocumentsV14")}function nf(d){const e=d.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function cl(d,e){const r=e.documentKey.path.toArray();return[d,Ol(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function bm(d,e){const r=d.path.toArray(),f=e.path.toArray();let _=0;for(let x=0;x<r.length-2&&x<f.length-2;++x)if(_=qr(r[x],f[x]),_)return _;return _=qr(r.length,f.length),_||(_=qr(r[r.length-2],f[f.length-2]),_||qr(r[r.length-1],f[f.length-1]))}class Dm{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class Tm{constructor(e,r,f,_){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=f,this.indexManager=_}getDocument(e,r){let f=null;return this.documentOverlayCache.getOverlay(e,r).next(_=>(f=_,this.remoteDocumentCache.getEntry(e,r))).next(_=>(null!==f&&tc(f.mutation,_,Ia.empty(),eo.now()),_))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(f=>this.getLocalViewOfDocuments(e,f,xi()).next(()=>f))}getLocalViewOfDocuments(e,r,f=xi()){const _=Hs();return this.populateOverlays(e,_,r).next(()=>this.computeViews(e,r,_,f).next(x=>{let M=fu();return x.forEach((z,ae)=>{M=M.insert(z,ae.overlayedDocument)}),M}))}getOverlayedDocuments(e,r){const f=Hs();return this.populateOverlays(e,f,r).next(()=>this.computeViews(e,r,f,xi()))}populateOverlays(e,r,f){const _=[];return f.forEach(x=>{r.has(x)||_.push(x)}),this.documentOverlayCache.getOverlays(e,_).next(x=>{x.forEach((M,z)=>{r.set(M,z)})})}computeViews(e,r,f,_){let x=Ko();const M=el(),z=el();return r.forEach((ae,pe)=>{const Ve=f.get(pe.key);_.has(pe.key)&&(void 0===Ve||Ve.mutation instanceof Au)?x=x.insert(pe.key,pe):void 0!==Ve?(M.set(pe.key,Ve.mutation.getFieldMask()),tc(Ve.mutation,pe,Ve.mutation.getFieldMask(),eo.now())):M.set(pe.key,Ia.empty())}),this.recalculateAndSaveOverlays(e,x).next(ae=>(ae.forEach((pe,Ve)=>M.set(pe,Ve)),r.forEach((pe,Ve)=>{var It;return z.set(pe,new Dm(Ve,null!==(It=M.get(pe))&&void 0!==It?It:null))}),z))}recalculateAndSaveOverlays(e,r){const f=el();let _=new es((M,z)=>M-z),x=xi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(M=>{for(const z of M)z.keys().forEach(ae=>{const pe=r.get(ae);if(null===pe)return;let Ve=f.get(ae)||Ia.empty();Ve=z.applyToLocalView(pe,Ve),f.set(ae,Ve);const It=(_.get(z.batchId)||xi()).add(ae);_=_.insert(z.batchId,It)})}).next(()=>{const M=[],z=_.getReverseIterator();for(;z.hasNext();){const ae=z.getNext(),pe=ae.key,Ve=ae.value,It=Jc();Ve.forEach(en=>{if(!x.has(en)){const An=ko(r.get(en),f.get(en));null!==An&&It.set(en,An),x=x.add(en)}}),M.push(this.documentOverlayCache.saveOverlays(e,pe,It))}return Gt.waitFor(M)}).next(()=>f)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(f=>this.recalculateAndSaveOverlays(e,f))}getDocumentsMatchingQuery(e,r,f){return Yn.isDocumentKey((_=r).path)&&null===_.collectionGroup&&0===_.filters.length?this.getDocumentsMatchingDocumentQuery(e,r.path):La(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,f):this.getDocumentsMatchingCollectionQuery(e,r,f);var _}getNextDocuments(e,r,f,_){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,f,_).next(x=>{const M=_-x.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,f.largestBatchId,_-x.size):Gt.resolve(Hs());let z=-1,ae=x;return M.next(pe=>Gt.forEach(pe,(Ve,It)=>(z<It.largestBatchId&&(z=It.largestBatchId),x.get(Ve)?Gt.resolve():this.remoteDocumentCache.getEntry(e,Ve).next(en=>{ae=ae.insert(Ve,en)}))).next(()=>this.populateOverlays(e,pe,x)).next(()=>this.computeViews(e,ae,pe,xi())).next(Ve=>({batchId:z,changes:Il(Ve)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Yn(r)).next(f=>{let _=fu();return f.isFoundDocument()&&(_=_.insert(f.key,f)),_})}getDocumentsMatchingCollectionGroupQuery(e,r,f){const _=r.collectionGroup;let x=fu();return this.indexManager.getCollectionParents(e,_).next(M=>Gt.forEach(M,z=>{const ae=(pe=r,Ve=z.child(_),new Bu(Ve,null,pe.explicitOrderBy.slice(),pe.filters.slice(),pe.limit,pe.limitType,pe.startAt,pe.endAt));var pe,Ve;return this.getDocumentsMatchingCollectionQuery(e,ae,f).next(pe=>{pe.forEach((Ve,It)=>{x=x.insert(Ve,It)})})}).next(()=>x))}getDocumentsMatchingCollectionQuery(e,r,f){let _;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,f.largestBatchId).next(x=>(_=x,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,f,_))).next(x=>{_.forEach((z,ae)=>{const pe=ae.getKey();null===x.get(pe)&&(x=x.insert(pe,no.newInvalidDocument(pe)))});let M=fu();return x.forEach((z,ae)=>{const pe=_.get(z);void 0!==pe&&tc(pe.mutation,ae,Ia.empty(),eo.now()),kc(r,ae)&&(M=M.insert(z,ae))}),M})}}class Ev{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,r){return Gt.resolve(this.Zn.get(r))}saveBundleMetadata(e,r){var f;return this.Zn.set(r.id,{id:(f=r).id,version:f.version,createTime:$o(f.createTime)}),Gt.resolve()}getNamedQuery(e,r){return Gt.resolve(this.ts.get(r))}saveNamedQuery(e,r){return this.ts.set(r.name,{name:(f=r).name,query:Jd(f.bundledQuery),readTime:$o(f.readTime)}),Gt.resolve();var f}}class wv{constructor(){this.overlays=new es(Yn.comparator),this.es=new Map}getOverlay(e,r){return Gt.resolve(this.overlays.get(r))}getOverlays(e,r){const f=Hs();return Gt.forEach(r,_=>this.getOverlay(e,_).next(x=>{null!==x&&f.set(_,x)})).next(()=>f)}saveOverlays(e,r,f){return f.forEach((_,x)=>{this.oe(e,r,x)}),Gt.resolve()}removeOverlaysForBatchId(e,r,f){const _=this.es.get(f);return void 0!==_&&(_.forEach(x=>this.overlays=this.overlays.remove(x)),this.es.delete(f)),Gt.resolve()}getOverlaysForCollection(e,r,f){const _=Hs(),x=r.length+1,M=new Yn(r.child("")),z=this.overlays.getIteratorFrom(M);for(;z.hasNext();){const ae=z.getNext().value,pe=ae.getKey();if(!r.isPrefixOf(pe.path))break;pe.path.length===x&&ae.largestBatchId>f&&_.set(ae.getKey(),ae)}return Gt.resolve(_)}getOverlaysForCollectionGroup(e,r,f,_){let x=new es((pe,Ve)=>pe-Ve);const M=this.overlays.getIterator();for(;M.hasNext();){const pe=M.getNext().value;if(pe.getKey().getCollectionGroup()===r&&pe.largestBatchId>f){let Ve=x.get(pe.largestBatchId);null===Ve&&(Ve=Hs(),x=x.insert(pe.largestBatchId,Ve)),Ve.set(pe.getKey(),pe)}}const z=Hs(),ae=x.getIterator();for(;ae.hasNext()&&(ae.getNext().value.forEach((pe,Ve)=>z.set(pe,Ve)),!(z.size()>=_)););return Gt.resolve(z)}oe(e,r,f){const _=this.overlays.get(f.key);if(null!==_){const M=this.es.get(_.largestBatchId).delete(f.key);this.es.set(_.largestBatchId,M)}this.overlays=this.overlays.insert(f.key,new il(r,f));let x=this.es.get(r);void 0===x&&(x=xi(),this.es.set(r,x)),this.es.set(r,x.add(f.key))}}class Qp{constructor(){this.ns=new Yo(nu.ss),this.rs=new Yo(nu.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,r){const f=new nu(e,r);this.ns=this.ns.add(f),this.rs=this.rs.add(f)}us(e,r){e.forEach(f=>this.addReference(f,r))}removeReference(e,r){this.cs(new nu(e,r))}hs(e,r){e.forEach(f=>this.removeReference(f,r))}ls(e){const r=new Yn(new Ri([])),f=new nu(r,e),_=new nu(r,e+1),x=[];return this.rs.forEachInRange([f,_],M=>{this.cs(M),x.push(M.key)}),x}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const r=new Yn(new Ri([])),f=new nu(r,e),_=new nu(r,e+1);let x=xi();return this.rs.forEachInRange([f,_],M=>{x=x.add(M.key)}),x}containsKey(e){const r=new nu(e,0),f=this.ns.firstAfterOrEqual(r);return null!==f&&e.isEqual(f.key)}}class nu{constructor(e,r){this.key=e,this._s=r}static ss(e,r){return Yn.comparator(e.key,r.key)||qr(e._s,r._s)}static os(e,r){return qr(e._s,r._s)||Yn.comparator(e.key,r.key)}}class Cv{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.ws=1,this.gs=new Yo(nu.ss)}checkEmpty(e){return Gt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,r,f,_){const x=this.ws;this.ws++;const M=new Ch(x,r,f,_);this.mutationQueue.push(M);for(const z of _)this.gs=this.gs.add(new nu(z.key,x)),this.indexManager.addToCollectionParentIndex(e,z.key.path.popLast());return Gt.resolve(M)}lookupMutationBatch(e,r){return Gt.resolve(this.ys(r))}getNextMutationBatchAfterBatchId(e,r){const _=this.ps(r+1),x=_<0?0:_;return Gt.resolve(this.mutationQueue.length>x?this.mutationQueue[x]:null)}getHighestUnacknowledgedBatchId(){return Gt.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Gt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const f=new nu(r,0),_=new nu(r,Number.POSITIVE_INFINITY),x=[];return this.gs.forEachInRange([f,_],M=>{const z=this.ys(M._s);x.push(z)}),Gt.resolve(x)}getAllMutationBatchesAffectingDocumentKeys(e,r){let f=new Yo(qr);return r.forEach(_=>{const x=new nu(_,0),M=new nu(_,Number.POSITIVE_INFINITY);this.gs.forEachInRange([x,M],z=>{f=f.add(z._s)})}),Gt.resolve(this.Is(f))}getAllMutationBatchesAffectingQuery(e,r){const f=r.path,_=f.length+1;let x=f;Yn.isDocumentKey(x)||(x=x.child(""));const M=new nu(new Yn(x),0);let z=new Yo(qr);return this.gs.forEachWhile(ae=>{const pe=ae.key.path;return!!f.isPrefixOf(pe)&&(pe.length===_&&(z=z.add(ae._s)),!0)},M),Gt.resolve(this.Is(z))}Is(e){const r=[];return e.forEach(f=>{const _=this.ys(f);null!==_&&r.push(_)}),r}removeMutationBatch(e,r){Xn(0===this.Ts(r.batchId,"removed")),this.mutationQueue.shift();let f=this.gs;return Gt.forEach(r.mutations,_=>{const x=new nu(_.key,r.batchId);return f=f.delete(x),this.referenceDelegate.markPotentiallyOrphaned(e,_.key)}).next(()=>{this.gs=f})}An(e){}containsKey(e,r){const f=new nu(r,0),_=this.gs.firstAfterOrEqual(f);return Gt.resolve(r.isEqual(_&&_.key))}performConsistencyCheck(e){return Gt.resolve()}Ts(e,r){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const r=this.ps(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class Iv{constructor(e){this.Es=e,this.docs=new es(Yn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const f=r.key,_=this.docs.get(f),x=_?_.size:0,M=this.Es(r);return this.docs=this.docs.insert(f,{document:r.mutableCopy(),size:M}),this.size+=M-x,this.indexManager.addToCollectionParentIndex(e,f.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const f=this.docs.get(r);return Gt.resolve(f?f.document.mutableCopy():no.newInvalidDocument(r))}getEntries(e,r){let f=Ko();return r.forEach(_=>{const x=this.docs.get(_);f=f.insert(_,x?x.document.mutableCopy():no.newInvalidDocument(_))}),Gt.resolve(f)}getDocumentsMatchingQuery(e,r,f,_){let x=Ko();const M=r.path,z=new Yn(M.child("")),ae=this.docs.getIteratorFrom(z);for(;ae.hasNext();){const{key:pe,value:{document:Ve}}=ae.getNext();if(!M.isPrefixOf(pe.path))break;pe.path.length>M.length+1||uu(bc(Ve),f)<=0||(_.has(Ve.key)||kc(r,Ve))&&(x=x.insert(Ve.key,Ve.mutableCopy()))}return Gt.resolve(x)}getAllFromCollectionGroup(e,r,f,_){Cn()}As(e,r){return Gt.forEach(this.docs,f=>r(f))}newChangeBuffer(e){return new xv(this)}getSize(e){return Gt.resolve(this.size)}}class xv extends yv{constructor(e){super(),this.Yn=e}applyChanges(e){const r=[];return this.changes.forEach((f,_)=>{_.isValidDocument()?r.push(this.Yn.addEntry(e,_)):this.Yn.removeEntry(f)}),Gt.waitFor(r)}getFromCache(e,r){return this.Yn.getEntry(e,r)}getAllFromCache(e,r){return this.Yn.getEntries(e,r)}}class Hi{constructor(e){this.persistence=e,this.Rs=new Wa(r=>pa(r),Mc),this.lastRemoteSnapshotVersion=Lr.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Qp,this.targetCount=0,this.vs=th.Pn()}forEachTarget(e,r){return this.Rs.forEach((f,_)=>r(_)),Gt.resolve()}getLastRemoteSnapshotVersion(e){return Gt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Gt.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Gt.resolve(this.highestTargetId)}setTargetsMetadata(e,r,f){return f&&(this.lastRemoteSnapshotVersion=f),r>this.bs&&(this.bs=r),Gt.resolve()}Dn(e){this.Rs.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.vs=new th(r),this.highestTargetId=r),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,r){return this.Dn(r),this.targetCount+=1,Gt.resolve()}updateTargetData(e,r){return this.Dn(r),Gt.resolve()}removeTargetData(e,r){return this.Rs.delete(r.target),this.Ps.ls(r.targetId),this.targetCount-=1,Gt.resolve()}removeTargets(e,r,f){let _=0;const x=[];return this.Rs.forEach((M,z)=>{z.sequenceNumber<=r&&null===f.get(z.targetId)&&(this.Rs.delete(M),x.push(this.removeMatchingKeysForTargetId(e,z.targetId)),_++)}),Gt.waitFor(x).next(()=>_)}getTargetCount(e){return Gt.resolve(this.targetCount)}getTargetData(e,r){const f=this.Rs.get(r)||null;return Gt.resolve(f)}addMatchingKeys(e,r,f){return this.Ps.us(r,f),Gt.resolve()}removeMatchingKeys(e,r,f){this.Ps.hs(r,f);const _=this.persistence.referenceDelegate,x=[];return _&&r.forEach(M=>{x.push(_.markPotentiallyOrphaned(e,M))}),Gt.waitFor(x)}removeMatchingKeysForTargetId(e,r){return this.Ps.ls(r),Gt.resolve()}getMatchingKeysForTargetId(e,r){const f=this.Ps.ds(r);return Gt.resolve(f)}containsKey(e,r){return Gt.resolve(this.Ps.containsKey(r))}}class Jp{constructor(e,r){this.Vs={},this.overlays={},this.Ss=new ha(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new Hi(this),this.indexManager=new ze,this.remoteDocumentCache=new Iv(f=>this.referenceDelegate.xs(f)),this.yt=new Od(r),this.Ns=new Ev(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new wv,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let f=this.Vs[e.toKey()];return f||(f=new Cv(r,this.referenceDelegate),this.Vs[e.toKey()]=f),f}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,r,f){un("MemoryPersistence","Starting transaction:",e);const _=new Rm(this.Ss.next());return this.referenceDelegate.ks(),f(_).next(x=>this.referenceDelegate.Os(_).next(()=>x)).toPromise().then(x=>(_.raiseOnCommittedEvent(),x))}Ms(e,r){return Gt.or(Object.values(this.Vs).map(f=>()=>f.containsKey(e,r)))}}class Rm extends us{constructor(e){super(),this.currentSequenceNumber=e}}class rf{constructor(e){this.persistence=e,this.Fs=new Qp,this.$s=null}static Bs(e){return new rf(e)}get Ls(){if(this.$s)return this.$s;throw Cn()}addReference(e,r,f){return this.Fs.addReference(f,r),this.Ls.delete(f.toString()),Gt.resolve()}removeReference(e,r,f){return this.Fs.removeReference(f,r),this.Ls.add(f.toString()),Gt.resolve()}markPotentiallyOrphaned(e,r){return this.Ls.add(r.toString()),Gt.resolve()}removeTarget(e,r){this.Fs.ls(r.targetId).forEach(_=>this.Ls.add(_.toString()));const f=this.persistence.getTargetCache();return f.getMatchingKeysForTargetId(e,r.targetId).next(_=>{_.forEach(x=>this.Ls.add(x.toString()))}).next(()=>f.removeTargetData(e,r))}ks(){this.$s=new Set}Os(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Gt.forEach(this.Ls,f=>{const _=Yn.fromPath(f);return this.qs(e,_).next(x=>{x||r.removeEntry(_,Lr.min())})}).next(()=>(this.$s=null,r.apply(e)))}updateLimboDocument(e,r){return this.qs(e,r).next(f=>{f?this.Ls.delete(r.toString()):this.Ls.add(r.toString())})}xs(e){return 0}qs(e,r){return Gt.or([()=>Gt.resolve(this.Fs.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ms(e,r)])}}class Av{constructor(e){this.yt=e}$(e,r,f,_){const x=new ku("createOrUpgrade",r);var z;f<1&&_>=1&&(e.createObjectStore("owner"),(z=e).createObjectStore("mutationQueues",{keyPath:"userId"}),z.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zu,{unique:!0}),z.createObjectStore("documentMutations"),Om(e),function(z){z.createObjectStore("remoteDocuments")}(e));let M=Gt.resolve();return f<3&&_>=3&&(0!==f&&(function(z){z.deleteObjectStore("targetDocuments"),z.deleteObjectStore("targets"),z.deleteObjectStore("targetGlobal")}(e),Om(e)),M=M.next(()=>function(z){const ae=z.store("targetGlobal"),pe={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Lr.min().toTimestamp(),targetCount:0};return ae.put("targetGlobalKey",pe)}(x))),f<4&&_>=4&&(0!==f&&(M=M.next(()=>function(z,ae){return ae.store("mutations").W().next(pe=>{z.deleteObjectStore("mutations"),z.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zu,{unique:!0});const Ve=ae.store("mutations"),It=pe.map(en=>Ve.put(en));return Gt.waitFor(It)})}(e,x))),M=M.next(()=>{!function(z){z.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),f<5&&_>=5&&(M=M.next(()=>this.Us(x))),f<6&&_>=6&&(M=M.next(()=>(function(z){z.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(x)))),f<7&&_>=7&&(M=M.next(()=>this.Gs(x))),f<8&&_>=8&&(M=M.next(()=>this.Qs(e,x))),f<9&&_>=9&&(M=M.next(()=>{!function(z){z.objectStoreNames.contains("remoteDocumentChanges")&&z.deleteObjectStore("remoteDocumentChanges")}(e)})),f<10&&_>=10&&(M=M.next(()=>this.js(x))),f<11&&_>=11&&(M=M.next(()=>{(function(z){z.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(z){z.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),f<12&&_>=12&&(M=M.next(()=>{!function(z){const ae=z.createObjectStore("documentOverlays",{keyPath:Qh});ae.createIndex("collectionPathOverlayIndex",Jh,{unique:!1}),ae.createIndex("collectionGroupOverlayIndex",wh,{unique:!1})}(e)})),f<13&&_>=13&&(M=M.next(()=>function(z){const ae=z.createObjectStore("remoteDocumentsV14",{keyPath:yh});ae.createIndex("documentKeyIndex",pu),ae.createIndex("collectionGroupIndex",Xh)}(e)).next(()=>this.Ws(e,x)).next(()=>e.deleteObjectStore("remoteDocuments"))),f<14&&_>=14&&(M=M.next(()=>this.zs(e,x))),f<15&&_>=15&&(M=M.next(()=>function(z){z.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),z.createObjectStore("indexState",{keyPath:_h}).createIndex("sequenceNumberIndex",Qd,{unique:!1}),z.createObjectStore("indexEntries",{keyPath:Eh}).createIndex("documentKeyIndex",js,{unique:!1})}(e))),M}Ks(e){let r=0;return e.store("remoteDocuments").Z((f,_)=>{r+=Ru(_)}).next(()=>{const f={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",f)})}Us(e){const r=e.store("mutationQueues"),f=e.store("mutations");return r.W().next(_=>Gt.forEach(_,x=>{const M=IDBKeyRange.bound([x.userId,-1],[x.userId,x.lastAcknowledgedBatchId]);return f.W("userMutationsIndex",M).next(z=>Gt.forEach(z,ae=>{Xn(ae.userId===x.userId);const pe=mu(this.yt,ae);return Ts(e,x.userId,pe).next(()=>{})}))}))}Gs(e){const r=e.store("targetDocuments"),f=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(_=>{const x=[];return f.Z((M,z)=>{const ae=new Ri(M),pe=[0,ba(ae)];x.push(r.get(pe).next(Ve=>Ve?Gt.resolve():r.put({targetId:0,path:ba(ae),sequenceNumber:_.highestListenSequenceNumber})))}).next(()=>Gt.waitFor(x))})}Qs(e,r){e.createObjectStore("collectionParents",{keyPath:Xd});const f=r.store("collectionParents"),_=new Ct,x=M=>{if(_.add(M)){const z=M.lastSegment(),ae=M.popLast();return f.put({collectionId:z,parent:ba(ae)})}};return r.store("remoteDocuments").Z({X:!0},(M,z)=>{const ae=new Ri(M);return x(ae.popLast())}).next(()=>r.store("documentMutations").Z({X:!0},([M,z,ae],pe)=>{const Ve=ic(z);return x(Ve.popLast())}))}js(e){const r=e.store("targets");return r.Z((f,_)=>{const x=Md(_),M=fd(this.yt,x);return r.put(M)})}Ws(e,r){const f=r.store("remoteDocuments"),_=[];return f.Z((x,M)=>{const z=r.store("remoteDocumentsV14"),ae=(pe=M,pe.document?new Yn(Ri.fromString(pe.document.name).popFirst(5)):pe.noDocument?Yn.fromSegments(pe.noDocument.path):pe.unknownDocument?Yn.fromSegments(pe.unknownDocument.path):Cn()).path.toArray();var pe;const Ve={prefixPath:ae.slice(0,ae.length-2),collectionGroup:ae[ae.length-2],documentId:ae[ae.length-1],readTime:M.readTime||[0,0],unknownDocument:M.unknownDocument,noDocument:M.noDocument,document:M.document,hasCommittedMutations:!!M.hasCommittedMutations};_.push(z.put(Ve))}).next(()=>Gt.waitFor(_))}zs(e,r){const f=r.store("mutations"),_=Zp(this.yt),x=new Jp(rf.Bs,this.yt.ie);return f.W().next(M=>{const z=new Map;return M.forEach(ae=>{var pe;let Ve=null!==(pe=z.get(ae.userId))&&void 0!==pe?pe:xi();mu(this.yt,ae).keys().forEach(It=>Ve=Ve.add(It)),z.set(ae.userId,Ve)}),Gt.forEach(z,(ae,pe)=>{const Ve=new et(pe),It=Nl.re(this.yt,Ve),en=x.getIndexManager(Ve),An=sc.re(Ve,this.yt,en,x.referenceDelegate);return new Tm(_,An,It,en).recalculateAndSaveOverlaysForDocumentKeys(new Rd(r,ha.at),ae).next()})})}}function Om(d){d.createObjectStore("targetDocuments",{keyPath:jf}).createIndex("documentTargetsIndex",Gf,{unique:!0}),d.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Wu,{unique:!0}),d.createObjectStore("targetGlobal")}const zf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class eg{constructor(e,r,f,_,x,M,z,ae,pe,Ve,It=15){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=f,this.Hs=x,this.window=M,this.document=z,this.Js=pe,this.Ys=Ve,this.Xs=It,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=en=>Promise.resolve(),!eg.C())throw new vn(nn.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new r1(this,_),this.ii=r+"main",this.yt=new Od(ae),this.ri=new zo(this.ii,this.Xs,new Av(this.yt)),this.Cs=new gv(this.referenceDelegate,this.yt),this.remoteDocumentCache=Zp(this.yt),this.Ns=new ol,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===Ve&&kr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new vn(nn.FAILED_PRECONDITION,zf);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new ha(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var r=this;return this.si=function(){var f=(0,Ce.Z)(function*(_){if(r.started)return e(_)});return function(_){return f.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var r=(0,Ce.Z)(function*(f){null===f.newVersion&&(yield e())});return function(f){return r.apply(this,arguments)}}())}setNetworkEnabled(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Ce.Z)(function*(){r.started&&(yield r.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Wf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(r=>{r||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(r=>this.isPrimary&&!r?this._i(e).next(()=>!1):!!r&&this.wi(e).next(()=>!0))).catch(e=>{if(Bi(e))return un("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return un("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Sh(e).get("owner").next(r=>Gt.resolve(this.mi(r)))}gi(e){return Wf(e).delete(this.clientId)}yi(){var e=this;return(0,Ce.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const r=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",f=>{const _=ia(f,"clientMetadata");return _.W().next(x=>{const M=e.Ii(x,18e5),z=x.filter(ae=>-1===M.indexOf(ae));return Gt.forEach(z,ae=>_.delete(ae.clientId)).next(()=>z)})}).catch(()=>[]);if(e.oi)for(const f of r)e.oi.removeItem(e.Ti(f.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?Gt.resolve(!0):Sh(e).get("owner").next(r=>{if(null!==r&&this.pi(r.leaseTimestampMs,5e3)&&!this.Ei(r.ownerId)){if(this.mi(r)&&this.networkEnabled)return!0;if(!this.mi(r)){if(!r.allowTabSynchronization)throw new vn(nn.FAILED_PRECONDITION,zf);return!1}}return!(!this.networkEnabled||!this.inForeground)||Wf(e).W().next(f=>void 0===this.Ii(f,5e3).find(_=>!(this.clientId===_.clientId||!(!this.networkEnabled&&_.networkEnabled||!this.inForeground&&_.inForeground&&this.networkEnabled===_.networkEnabled))))}).next(r=>(this.isPrimary!==r&&un("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var e=this;return(0,Ce.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const f=new Rd(r,ha.at);return e._i(f).next(()=>e.gi(f))}),e.ri.close(),e.Pi()})()}Ii(e,r){return e.filter(f=>this.pi(f.updateTimeMs,r)&&!this.Ei(f.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Wf(e).W().next(r=>this.Ii(r,18e5).map(f=>f.clientId)))}get started(){return this.Ds}getMutationQueue(e,r){return sc.re(e,this.yt,r,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new gn(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return Nl.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,r,f){un("IndexedDbPersistence","Starting transaction:",e);const _="readonly"===r?"readonly":"readwrite",x=15===(M=this.Xs)?ef:14===M?Wl:13===M?gu:12===M?Da:11===M?Cc:void Cn();var M;let z;return this.ri.runTransaction(e,_,x,ae=>(z=new Rd(ae,this.Ss?this.Ss.next():ha.at),"readwrite-primary"===r?this.fi(z).next(pe=>!!pe||this.di(z)).next(pe=>{if(!pe)throw kr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new vn(nn.FAILED_PRECONDITION,tt);return f(z)}).next(pe=>this.wi(z).next(()=>pe)):this.Vi(z).next(()=>f(z)))).then(ae=>(z.raiseOnCommittedEvent(),ae))}Vi(e){return Sh(e).get("owner").next(r=>{if(null!==r&&this.pi(r.leaseTimestampMs,5e3)&&!this.Ei(r.ownerId)&&!this.mi(r)&&!(this.Ys||this.allowTabSynchronization&&r.allowTabSynchronization))throw new vn(nn.FAILED_PRECONDITION,zf)})}wi(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Sh(e).put("owner",r)}static C(){return zo.C()}_i(e){const r=Sh(e);return r.get("owner").next(f=>this.mi(f)?(un("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Gt.resolve())}pi(e,r){const f=Date.now();return!(e<f-r||e>f&&(kr(`Detected an update time that is in the future: ${e} > ${f}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,st.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var r;try{const f=null!==(null===(r=this.oi)||void 0===r?void 0:r.getItem(this.Ti(e)));return un("IndexedDbPersistence",`Client '${e}' ${f?"is":"is not"} zombied in LocalStorage`),f}catch(f){return kr("IndexedDbPersistence","Failed to get zombied client id.",f),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){kr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Sh(d){return ia(d,"owner")}function Wf(d){return ia(d,"clientMetadata")}function tg(d,e){let r=d.projectId;return d.isDefaultDatabase||(r+="."+d.database),"firestore/"+e+"/"+r+"/"}class Mm{constructor(e,r,f,_){this.targetId=e,this.fromCache=r,this.Si=f,this.Di=_}static Ci(e,r){let f=xi(),_=xi();for(const x of r.docChanges)switch(x.type){case 0:f=f.add(x.doc.key);break;case 1:_=_.add(x.doc.key)}return new Mm(e,r.fromCache,f,_)}}class ng{constructor(){this.xi=!1}initialize(e,r){this.Ni=e,this.indexManager=r,this.xi=!0}getDocumentsMatchingQuery(e,r,f,_){return this.ki(e,r).next(x=>x||this.Oi(e,r,_,f)).next(x=>x||this.Mi(e,r))}ki(e,r){if(gc(r))return Gt.resolve(null);let f=Ls(r);return this.indexManager.getIndexType(e,f).next(_=>0===_?null:(null!==r.limit&&1===_&&(r=na(r,null,"F"),f=Ls(r)),this.indexManager.getDocumentsMatchingTarget(e,f).next(x=>{const M=xi(...x);return this.Ni.getDocuments(e,M).next(z=>this.indexManager.getMinOffset(e,f).next(ae=>{const pe=this.Fi(r,z);return this.$i(r,pe,M,ae.readTime)?this.ki(e,na(r,null,"F")):this.Bi(e,pe,r,ae)}))})))}Oi(e,r,f,_){return gc(r)||_.isEqual(Lr.min())?this.Mi(e,r):this.Ni.getDocuments(e,f).next(x=>{const M=this.Fi(r,x);return this.$i(r,M,f,_)?this.Mi(e,r):(ir()<=yt.in.DEBUG&&un("QueryEngine","Re-using previous result from %s to execute query: %s",_.toString(),mc(r)),this.Bi(e,M,r,uc(_,-1)))})}Fi(e,r){let f=new Yo(Bl(e));return r.forEach((_,x)=>{kc(e,x)&&(f=f.add(x))}),f}$i(e,r,f,_){if(null===e.limit)return!1;if(f.size!==r.size)return!0;const x="F"===e.limitType?r.last():r.first();return!!x&&(x.hasPendingWrites||x.version.compareTo(_)>0)}Mi(e,r){return ir()<=yt.in.DEBUG&&un("QueryEngine","Using full collection scan to execute query:",mc(r)),this.Ni.getDocumentsMatchingQuery(e,r,jt.min())}Bi(e,r,f,_){return this.Ni.getDocumentsMatchingQuery(e,f,_).next(x=>(r.forEach(M=>{x=x.insert(M.key,M)}),x))}}class Nm{constructor(e,r,f,_){this.persistence=e,this.Li=r,this.yt=_,this.qi=new es(qr),this.Ui=new Wa(x=>pa(x),Mc),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(f)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tm(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.qi))}}function Pd(d,e,r,f){return new Nm(d,e,r,f)}function Pm(d,e){return sf.apply(this,arguments)}function sf(){return sf=(0,Ce.Z)(function*(d,e){const r=Fn(d);return yield r.persistence.runTransaction("Handle user change","readonly",f=>{let _;return r.mutationQueue.getAllMutationBatches(f).next(x=>(_=x,r.Qi(e),r.mutationQueue.getAllMutationBatches(f))).next(x=>{const M=[],z=[];let ae=xi();for(const pe of _){M.push(pe.batchId);for(const Ve of pe.mutations)ae=ae.add(Ve.key)}for(const pe of x){z.push(pe.batchId);for(const Ve of pe.mutations)ae=ae.add(Ve.key)}return r.localDocuments.getDocuments(f,ae).next(pe=>({ji:pe,removedBatchIds:M,addedBatchIds:z}))})})}),sf.apply(this,arguments)}function km(d){const e=Fn(d);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Cs.getLastRemoteSnapshotVersion(r))}function Sv(d,e,r){let f=xi(),_=xi();return r.forEach(x=>f=f.add(x)),e.getEntries(d,f).next(x=>{let M=Ko();return r.forEach((z,ae)=>{const pe=x.get(z);ae.isFoundDocument()!==pe.isFoundDocument()&&(_=_.add(z)),ae.isNoDocument()&&ae.version.isEqual(Lr.min())?(e.removeEntry(z,ae.readTime),M=M.insert(z,ae)):!pe.isValidDocument()||ae.version.compareTo(pe.version)>0||0===ae.version.compareTo(pe.version)&&pe.hasPendingWrites?(e.addEntry(ae),M=M.insert(z,ae)):un("LocalStore","Ignoring outdated watch update for ",z,". Current version:",pe.version," Watch version:",ae.version)}),{Wi:M,zi:_}})}function o1(d,e){const r=Fn(d);return r.persistence.runTransaction("Get next mutation batch","readonly",f=>(void 0===e&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(f,e)))}function bh(d,e){const r=Fn(d);return r.persistence.runTransaction("Allocate target","readwrite",f=>{let _;return r.Cs.getTargetData(f,e).next(x=>x?(_=x,Gt.resolve(_)):r.Cs.allocateTargetId(f).next(M=>(_=new ma(e,M,0,f.currentSequenceNumber),r.Cs.addTargetData(f,_).next(()=>_))))}).then(f=>{const _=r.qi.get(f.targetId);return(null===_||f.snapshotVersion.compareTo(_.snapshotVersion)>0)&&(r.qi=r.qi.insert(f.targetId,f),r.Ui.set(e,f.targetId)),f})}function rh(d,e,r){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,Ce.Z)(function*(d,e,r){const f=Fn(d),_=f.qi.get(e),x=r?"readwrite":"readwrite-primary";try{r||(yield f.persistence.runTransaction("Release target",x,M=>f.persistence.referenceDelegate.removeTarget(M,_)))}catch(M){if(!Bi(M))throw M;un("LocalStore",`Failed to update sequence numbers for target ${e}: ${M}`)}f.qi=f.qi.remove(e),f.Ui.delete(_.target)}),Fm.apply(this,arguments)}function Yf(d,e,r){const f=Fn(d);let _=Lr.min(),x=xi();return f.persistence.runTransaction("Execute query","readonly",M=>function(z,ae,pe){const Ve=Fn(z),It=Ve.Ui.get(pe);return void 0!==It?Gt.resolve(Ve.qi.get(It)):Ve.Cs.getTargetData(ae,pe)}(f,M,Ls(e)).next(z=>{if(z)return _=z.lastLimboFreeSnapshotVersion,f.Cs.getMatchingKeysForTargetId(M,z.targetId).next(ae=>{x=ae})}).next(()=>f.Li.getDocumentsMatchingQuery(M,e,r?_:Lr.min(),r?x:xi())).next(z=>(ig(f,ud(e),z),{documents:z,Hi:x})))}function ih(d,e){const r=Fn(d),f=Fn(r.Cs),_=r.qi.get(e);return _?Promise.resolve(_.target):r.persistence.runTransaction("Get target data","readonly",x=>f.ne(x,e).next(M=>M?M.target:null))}function Lm(d,e){const r=Fn(d),f=r.Ki.get(e)||Lr.min();return r.persistence.runTransaction("Get new document changes","readonly",_=>r.Gi.getAllFromCollectionGroup(_,e,uc(f,-1),Number.MAX_SAFE_INTEGER)).then(_=>(ig(r,e,_),_))}function ig(d,e,r){let f=d.Ki.get(e)||Lr.min();r.forEach((_,x)=>{x.readTime.compareTo(f)>0&&(f=x.readTime)}),d.Ki.set(e,f)}function og(){return og=(0,Ce.Z)(function*(d,e,r,f){const _=Fn(d);let x=xi(),M=Ko();for(const pe of r){const Ve=e.Ji(pe.metadata.name);pe.document&&(x=x.add(Ve));const It=e.Yi(pe);It.setReadTime(e.Xi(pe.metadata.readTime)),M=M.insert(Ve,It)}const z=_.Gi.newChangeBuffer({trackRemovals:!0}),ae=yield bh(_,(pe=f,Ls(Uu(Ri.fromString(`__bundle__/docs/${pe}`)))));var pe;return _.persistence.runTransaction("Apply bundle documents","readwrite",pe=>Sv(pe,z,M).next(Ve=>(z.apply(pe),Ve)).next(Ve=>_.Cs.removeMatchingKeysForTargetId(pe,ae.targetId).next(()=>_.Cs.addMatchingKeys(pe,x,ae.targetId)).next(()=>_.localDocuments.getLocalViewOfDocuments(pe,Ve.Wi,Ve.zi)).next(()=>Ve.Wi)))}),og.apply(this,arguments)}function Bm(d,e){return sg.apply(this,arguments)}function sg(){return sg=(0,Ce.Z)(function*(d,e,r=xi()){const f=yield bh(d,Ls(Jd(e.bundledQuery))),_=Fn(d);return _.persistence.runTransaction("Save named query","readwrite",x=>{const M=$o(e.readTime);if(f.snapshotVersion.compareTo(M)>=0)return _.Ns.saveNamedQuery(x,e);const z=f.withResumeToken(so.EMPTY_BYTE_STRING,M);return _.qi=_.qi.insert(z.targetId,z),_.Cs.updateTargetData(x,z).next(()=>_.Cs.removeMatchingKeysForTargetId(x,f.targetId)).next(()=>_.Cs.addMatchingKeys(x,r,f.targetId)).next(()=>_.Ns.saveNamedQuery(x,e))})}),sg.apply(this,arguments)}function Um(d,e){return`firestore_clients_${d}_${e}`}function Vm(d,e,r){let f=`firestore_mutations_${d}_${r}`;return e.isAuthenticated()&&(f+=`_${e.uid}`),f}function ag(d,e){return`firestore_targets_${d}_${e}`}class qf{constructor(e,r,f,_){this.user=e,this.batchId=r,this.state=f,this.error=_}static Zi(e,r,f){const _=JSON.parse(f);let x,M="object"==typeof _&&-1!==["pending","acknowledged","rejected"].indexOf(_.state)&&(void 0===_.error||"object"==typeof _.error);return M&&_.error&&(M="string"==typeof _.error.message&&"string"==typeof _.error.code,M&&(x=new vn(_.error.code,_.error.message))),M?new qf(e,r,_.state,x):(kr("SharedClientState",`Failed to parse mutation state for ID '${r}': ${f}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Dh{constructor(e,r,f){this.targetId=e,this.state=r,this.error=f}static Zi(e,r){const f=JSON.parse(r);let _,x="object"==typeof f&&-1!==["not-current","current","rejected"].indexOf(f.state)&&(void 0===f.error||"object"==typeof f.error);return x&&f.error&&(x="string"==typeof f.error.message&&"string"==typeof f.error.code,x&&(_=new vn(f.error.code,f.error.message))),x?new Dh(e,f.state,_):(kr("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zf{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Zi(e,r){const f=JSON.parse(r);let _="object"==typeof f&&f.activeTargetIds instanceof Array,x=tl();for(let M=0;_&&M<f.activeTargetIds.length;++M)_=ks(f.activeTargetIds[M]),x=x.add(f.activeTargetIds[M]);return _?new Zf(e,x):(kr("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class Xf{constructor(e,r){this.clientId=e,this.onlineState=r}static Zi(e){const r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new Xf(r.clientId,r.onlineState):(kr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Qf{constructor(){this.activeTargetIds=tl()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class af{constructor(e,r,f,_,x){this.window=e,this.Hs=r,this.persistenceKey=f,this.sr=_,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new es(qr),this.started=!1,this.cr=[];const M=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=x,this.ar=Um(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Qf),this.lr=new RegExp(`^firestore_clients_${M}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${M}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${M}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(z){return`firestore_bundle_loaded_v2_${z}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ce.Z)(function*(){const r=yield e.syncEngine.vi();for(const _ of r){if(_===e.sr)continue;const x=e.getItem(Um(e.persistenceKey,_));if(x){const M=Zf.Zi(_,x);M&&(e.ur=e.ur.insert(M.clientId,M))}}e.gr();const f=e.storage.getItem(e.wr);if(f){const _=e.yr(f);_&&e.pr(_)}for(const _ of e.cr)e.rr(_);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let r=!1;return this.ur.forEach((f,_)=>{_.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,r,f){this.Tr(e,r,f),this.Er(e)}addLocalQueryTarget(e){let r="not-current";if(this.isActiveQueryTarget(e)){const f=this.storage.getItem(ag(this.persistenceKey,e));if(f){const _=Dh.Zi(e,f);_&&(r=_.state)}}return this.Ar.er(e),this.gr(),r}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ag(this.persistenceKey,e))}updateQueryState(e,r,f){this.Rr(e,r,f)}handleUserChange(e,r,f){r.forEach(_=>{this.Er(_)}),this.currentUser=e,f.forEach(_=>{this.addPendingMutation(_)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return un("SharedClientState","READ",e,r),r}setItem(e,r){un("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){un("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var r=this;const f=e;if(f.storageArea===this.storage){if(un("SharedClientState","EVENT",f.key,f.newValue),f.key===this.ar)return void kr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ce.Z)(function*(){if(r.started){if(null!==f.key)if(r.lr.test(f.key)){if(null==f.newValue){const _=r.vr(f.key);return r.Vr(_,null)}{const _=r.Sr(f.key,f.newValue);if(_)return r.Vr(_.clientId,_)}}else if(r.dr.test(f.key)){if(null!==f.newValue){const _=r.Dr(f.key,f.newValue);if(_)return r.Cr(_)}}else if(r._r.test(f.key)){if(null!==f.newValue){const _=r.Nr(f.key,f.newValue);if(_)return r.kr(_)}}else if(f.key===r.wr){if(null!==f.newValue){const _=r.yr(f.newValue);if(_)return r.pr(_)}}else if(f.key===r.hr){const _=function(x){let M=ha.at;if(null!=x)try{const z=JSON.parse(x);Xn("number"==typeof z),M=z}catch(z){kr("SharedClientState","Failed to read sequence number from WebStorage",z)}return M}(f.newValue);_!==ha.at&&r.sequenceNumberHandler(_)}else if(f.key===r.mr){const _=r.Or(f.newValue);yield Promise.all(_.map(x=>r.syncEngine.Mr(x)))}}else r.cr.push(f)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,r,f){const _=new qf(this.currentUser,e,r,f),x=Vm(this.persistenceKey,this.currentUser,e);this.setItem(x,_.tr())}Er(e){const r=Vm(this.persistenceKey,this.currentUser,e);this.removeItem(r)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,r,f){const _=ag(this.persistenceKey,e),x=new Dh(e,r,f);this.setItem(_,x.tr())}Pr(e){const r=JSON.stringify(Array.from(e));this.setItem(this.mr,r)}vr(e){const r=this.lr.exec(e);return r?r[1]:null}Sr(e,r){const f=this.vr(e);return Zf.Zi(f,r)}Dr(e,r){const f=this.dr.exec(e),_=Number(f[1]);return qf.Zi(new et(void 0!==f[2]?f[2]:null),_,r)}Nr(e,r){const f=this._r.exec(e),_=Number(f[1]);return Dh.Zi(_,r)}yr(e){return Xf.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var r=this;return(0,Ce.Z)(function*(){if(e.user.uid===r.currentUser.uid)return r.syncEngine.Fr(e.batchId,e.state,e.error);un("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,r){const f=r?this.ur.insert(e,r):this.ur.remove(e),_=this.Ir(this.ur),x=this.Ir(f),M=[],z=[];return x.forEach(ae=>{_.has(ae)||M.push(ae)}),_.forEach(ae=>{x.has(ae)||z.push(ae)}),this.syncEngine.Br(M,z).then(()=>{this.ur=f})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let r=tl();return e.forEach((f,_)=>{r=r.unionWith(_.activeTargetIds)}),r}}class bv{constructor(){this.Lr=new Qf,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,f){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,r,f){this.qr[e]=r}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Qf,Promise.resolve()}handleUserChange(e,r,f){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ug{Ur(e){}shutdown(){}}class $m{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){un("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){un("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const s1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Th{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Hm extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,r,f,_,x){const M=this.ho(e,r);un("RestConnection","Sending: ",M,f);const z={};return this.lo(z,_,x),this.fo(e,M,z,f).then(ae=>(un("RestConnection","Received: ",ae),ae),ae=>{throw Hr("RestConnection",`${e} failed with error: `,ae,"url: ",M,"request:",f),ae})}_o(e,r,f,_,x,M){return this.ao(e,r,f,_,x)}lo(e,r,f){e["X-Goog-Api-Client"]="gl-js/ fire/"+Wt,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((_,x)=>e[x]=_),f&&f.headers.forEach((_,x)=>e[x]=_)}ho(e,r){return`${this.oo}/v1/${r}:${s1[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,r,f,_){return new Promise((x,M)=>{const z=new Q;z.setWithCredentials(!0),z.listenOnce(za.COMPLETE,()=>{try{switch(z.getLastErrorCode()){case _a.NO_ERROR:const pe=z.getResponseJson();un("Connection","XHR received:",JSON.stringify(pe)),x(pe);break;case _a.TIMEOUT:un("Connection",'RPC "'+e+'" timed out'),M(new vn(nn.DEADLINE_EXCEEDED,"Request time out"));break;case _a.HTTP_ERROR:const Ve=z.getStatus();if(un("Connection",'RPC "'+e+'" failed with status:',Ve,"response text:",z.getResponseText()),Ve>0){let It=z.getResponseJson();Array.isArray(It)&&(It=It[0]);const en=null==It?void 0:It.error;if(en&&en.status&&en.message){const An=function(Pn){const xr=Pn.toLowerCase().replace(/_/g,"-");return Object.values(nn).indexOf(xr)>=0?xr:nn.UNKNOWN}(en.status);M(new vn(An,en.message))}else M(new vn(nn.UNKNOWN,"Server responded with status "+z.getStatus()))}else M(new vn(nn.UNAVAILABLE,"Connection failed."));break;default:Cn()}}finally{un("Connection",'RPC "'+e+'" completed.')}});const ae=JSON.stringify(_);z.send(r,"POST",ae,f,15)})}wo(e,r,f){const _=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],x=Nu(),M=Pu(),z={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(z.xmlHttpFactory=new W({})),this.lo(z.initMessageHeaders,r,f),z.encodeInitMessageHeaders=!0;const ae=_.join("");un("Connection","Creating WebChannel: "+ae,z);const pe=x.createWebChannel(ae,z);let Ve=!1,It=!1;const en=new Th({Hr:Pn=>{It?un("Connection","Not sending because WebChannel is closed:",Pn):(Ve||(un("Connection","Opening WebChannel transport."),pe.open(),Ve=!0),un("Connection","WebChannel sending:",Pn),pe.send(Pn))},Jr:()=>pe.close()}),An=(Pn,xr,ei)=>{Pn.listen(xr,Rs=>{try{ei(Rs)}catch(Gs){setTimeout(()=>{throw Gs},0)}})};return An(pe,ue.EventType.OPEN,()=>{It||un("Connection","WebChannel transport opened.")}),An(pe,ue.EventType.CLOSE,()=>{It||(It=!0,un("Connection","WebChannel transport closed"),en.io())}),An(pe,ue.EventType.ERROR,Pn=>{It||(It=!0,Hr("Connection","WebChannel transport errored:",Pn),en.io(new vn(nn.UNAVAILABLE,"The operation could not be completed")))}),An(pe,ue.EventType.MESSAGE,Pn=>{var xr;if(!It){const ei=Pn.data[0];Xn(!!ei);const Gs=ei.error||(null===(xr=ei[0])||void 0===xr?void 0:xr.error);if(Gs){un("Connection","WebChannel received error:",Gs);const Ho=Gs.status;let Ta=function(qo){const ou=Is[qo];if(void 0!==ou)return _c(ou)}(Ho),Eo=Gs.message;void 0===Ta&&(Ta=nn.INTERNAL,Eo="Unknown error status: "+Ho+" with message "+Gs.message),It=!0,en.io(new vn(Ta,Eo)),pe.close()}else un("Connection","WebChannel received:",ei),en.ro(ei)}}),An(M,ea.STAT_EVENT,Pn=>{Pn.stat===Ya.PROXY?un("Connection","Detected buffering proxy"):Pn.stat===Ya.NOPROXY&&un("Connection","Detected no buffering proxy")}),setTimeout(()=>{en.so()},0),en}}function jm(){return typeof window<"u"?window:null}function uf(){return typeof document<"u"?document:null}function cf(d){return new Dl(d,!0)}class cg{constructor(e,r,f=1e3,_=1.5,x=6e4){this.Hs=e,this.timerId=r,this.mo=f,this.yo=_,this.po=x,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const r=Math.floor(this.Io+this.bo()),f=Math.max(0,Date.now()-this.Eo),_=Math.max(0,r-f);_>0&&un("ExponentialBackoff",`Backing off for ${_} ms (base delay: ${this.Io} ms, delay with jitter: ${r} ms, last attempt: ${f} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,_,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class lf{constructor(e,r,f,_,x,M,z,ae){this.Hs=e,this.vo=f,this.Vo=_,this.connection=x,this.authCredentialsProvider=M,this.appCheckCredentialsProvider=z,this.listener=ae,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new cg(e,r)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ce.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Ce.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,r){var f=this;return(0,Ce.Z)(function*(){f.Lo(),f.qo(),f.xo.cancel(),f.So++,4!==e?f.xo.reset():r&&r.code===nn.RESOURCE_EXHAUSTED?(kr(r.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),f.xo.Ao()):r&&r.code===nn.UNAUTHENTICATED&&3!==f.state&&(f.authCredentialsProvider.invalidateToken(),f.appCheckCredentialsProvider.invalidateToken()),null!==f.stream&&(f.Uo(),f.stream.close(),f.stream=null),f.state=e,yield f.listener.Zr(r)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),r=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([f,_])=>{this.So===r&&this.Go(f,_)},f=>{e(()=>{const _=new vn(nn.UNKNOWN,"Fetching auth token failed: "+f.message);return this.Qo(_)})})}Go(e,r){const f=this.Ko(this.So);this.stream=this.jo(e,r),this.stream.Yr(()=>{f(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(_=>{f(()=>this.Qo(_))}),this.stream.onMessage(_=>{f(()=>this.onMessage(_))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,Ce.Z)(function*(){e.state=0,e.start()}))}Qo(e){return un("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return r=>{this.Hs.enqueueAndForget(()=>this.So===e?r():(un("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Rh extends lf{constructor(e,r,f,_,x,M){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,f,_,M),this.yt=x}jo(e,r){return this.connection.wo("Listen",e,r)}onMessage(e){this.xo.reset();const r=function de(d,e){let r;if("targetChange"in e){const f="NO_CHANGE"===(ae=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===ae?1:"REMOVE"===ae?2:"CURRENT"===ae?3:"RESET"===ae?4:Cn(),_=e.targetChange.targetIds||[],x=function(ae,pe){return ae.wt?(Xn(void 0===pe||"string"==typeof pe),so.fromBase64String(pe||"")):(Xn(void 0===pe||pe instanceof Uint8Array),so.fromUint8Array(pe||new Uint8Array))}(d,e.targetChange.resumeToken),M=e.targetChange.cause,z=M&&function(ae){const pe=void 0===ae.code?nn.UNKNOWN:_c(ae.code);return new vn(pe,ae.message||"")}(M);r=new eu(f,_,x,z||null)}else if("documentChange"in e){const f=e.documentChange,_=Fo(d,f.document.name),x=$o(f.document.updateTime),M=f.document.createTime?$o(f.document.createTime):Lr.min(),z=new ta({mapValue:{fields:f.document.fields}}),ae=no.newFoundDocument(_,x,M,z);r=new Vc(f.targetIds||[],f.removedTargetIds||[],ae.key,ae)}else if("documentDelete"in e){const f=e.documentDelete,_=Fo(d,f.document),x=f.readTime?$o(f.readTime):Lr.min(),M=no.newNoDocument(_,x);r=new Vc([],f.removedTargetIds||[],M.key,M)}else if("documentRemove"in e){const f=e.documentRemove,_=Fo(d,f.document);r=new Vc([],f.removedTargetIds||[],_,null)}else{if(!("filter"in e))return Cn();{const f=e.filter,x=new Qc(f.count||0);r=new $c(f.targetId,x)}}var ae;return r}(this.yt,e),f=function(_){if(!("targetChange"in _))return Lr.min();const x=_.targetChange;return x.targetIds&&x.targetIds.length?Lr.min():x.readTime?$o(x.readTime):Lr.min()}(e);return this.listener.Wo(r,f)}zo(e){const r={};r.database=Tl(this.yt),r.addTarget=function(_,x){let M;const z=x.target;return M=fc(z)?{documents:Kn(_,z)}:{query:ur(_,z)},M.targetId=x.targetId,x.resumeToken.approximateByteSize()>0?M.resumeToken=tu(_,x.resumeToken):x.snapshotVersion.compareTo(Lr.min())>0&&(M.readTime=wc(_,x.snapshotVersion.toTimestamp())),M}(this.yt,e);const f=function zr(d,e){const r=function(f,_){switch(_){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Cn()}}(0,e.purpose);return null==r?null:{"goog-listen-tags":r}}(0,e);f&&(r.labels=f),this.Bo(r)}Ho(e){const r={};r.database=Tl(this.yt),r.removeTarget=e,this.Bo(r)}}class lg extends lf{constructor(e,r,f,_,x,M){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,f,_,M),this.yt=x,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,r){return this.connection.wo("Write",e,r)}onMessage(e){if(Xn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const r=function Jt(d,e){return d&&d.length>0?(Xn(void 0!==e),d.map(r=>function(f,_){let x=$o(f.updateTime?f.updateTime:_);return x.isEqual(Lr.min())&&(x=$o(_)),new Cl(x,f.transformResults||[])}(r,e))):[]}(e.writeResults,e.commitTime),f=$o(e.commitTime);return this.listener.Zo(f,r)}return Xn(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Tl(this.yt),this.Bo(e)}Xo(e){const r={streamToken:this.lastStreamToken,writes:e.map(f=>Oe(this.yt,f))};this.Bo(r)}}class df extends class{}{constructor(e,r,f,_){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=f,this.yt=_,this.nu=!1}su(){if(this.nu)throw new vn(nn.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,r,f){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([_,x])=>this.connection.ao(e,r,f,_,x)).catch(_=>{throw"FirebaseError"===_.name?(_.code===nn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),_):new vn(nn.UNKNOWN,_.toString())})}_o(e,r,f,_){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([x,M])=>this.connection._o(e,r,f,x,M,_)).catch(x=>{throw"FirebaseError"===x.name?(x.code===nn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),x):new vn(nn.UNKNOWN,x.toString())})}terminate(){this.nu=!0}}class Gm{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const r=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(kr(r),this.ou=!1):un("OnlineStateTracker",r)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class hg{constructor(e,r,f,_,x){var M=this;this.localStore=e,this.datastore=r,this.asyncQueue=f,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=x,this.mu.Ur(z=>{f.enqueueAndForget((0,Ce.Z)(function*(){var ae;gd(M)&&(un("RemoteStore","Restarting streams for network reachability change."),yield(ae=(0,Ce.Z)(function*(pe){const Ve=Fn(pe);Ve._u.add(4),yield sh(Ve),Ve.gu.set("Unknown"),Ve._u.delete(4),yield oh(Ve)}),function(pe){return ae.apply(this,arguments)})(M))}))}),this.gu=new Gm(f,_)}}function oh(d){return hf.apply(this,arguments)}function hf(){return hf=(0,Ce.Z)(function*(d){if(gd(d))for(const e of d.wu)yield e(!0)}),hf.apply(this,arguments)}function sh(d){return ff.apply(this,arguments)}function ff(){return ff=(0,Ce.Z)(function*(d){for(const e of d.wu)yield e(!1)}),ff.apply(this,arguments)}function Jf(d,e){const r=Fn(d);r.du.has(e.targetId)||(r.du.set(e.targetId,e),np(r)?tp(r):Mh(r).ko()&&ep(r,e))}function pf(d,e){const r=Fn(d),f=Mh(r);r.du.delete(e),f.ko()&&zm(r,e),0===r.du.size&&(f.ko()?f.Fo():gd(r)&&r.gu.set("Unknown"))}function ep(d,e){d.yu.Ot(e.targetId),Mh(d).zo(e)}function zm(d,e){d.yu.Ot(e),Mh(d).Ho(e)}function tp(d){d.yu=new Sl({getRemoteKeysForTarget:e=>d.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>d.du.get(e)||null}),Mh(d).start(),d.gu.uu()}function np(d){return gd(d)&&!Mh(d).No()&&d.du.size>0}function gd(d){return 0===Fn(d)._u.size}function Wm(d){d.yu=void 0}function zc(d){return rp.apply(this,arguments)}function rp(){return rp=(0,Ce.Z)(function*(d){d.du.forEach((e,r)=>{ep(d,e)})}),rp.apply(this,arguments)}function Dv(d,e){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,Ce.Z)(function*(d,e){Wm(d),np(d)?(d.gu.hu(e),tp(d)):d.gu.set("Unknown")}),Ym.apply(this,arguments)}function fg(d,e,r){return ip.apply(this,arguments)}function ip(){return ip=(0,Ce.Z)(function*(d,e,r){if(d.gu.set("Online"),e instanceof eu&&2===e.state&&e.cause)try{yield(f=(0,Ce.Z)(function*(_,x){const M=x.cause;for(const z of x.targetIds)_.du.has(z)&&(yield _.remoteSyncer.rejectListen(z,M),_.du.delete(z),_.yu.removeTarget(z))}),function(_,x){return f.apply(this,arguments)})(d,e)}catch(f){un("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),f),yield op(d,f)}else if(e instanceof Vc?d.yu.Kt(e):e instanceof $c?d.yu.Jt(e):d.yu.jt(e),!r.isEqual(Lr.min()))try{const f=yield km(d.localStore);r.compareTo(f)>=0&&(yield function(_,x){const M=_.yu.Zt(x);return M.targetChanges.forEach((z,ae)=>{if(z.resumeToken.approximateByteSize()>0){const pe=_.du.get(ae);pe&&_.du.set(ae,pe.withResumeToken(z.resumeToken,x))}}),M.targetMismatches.forEach(z=>{const ae=_.du.get(z);if(!ae)return;_.du.set(z,ae.withResumeToken(so.EMPTY_BYTE_STRING,ae.snapshotVersion)),zm(_,z);const pe=new ma(ae.target,z,1,ae.sequenceNumber);ep(_,pe)}),_.remoteSyncer.applyRemoteEvent(M)}(d,r))}catch(f){un("RemoteStore","Failed to raise snapshot:",f),yield op(d,f)}var f}),ip.apply(this,arguments)}function op(d,e,r){return pg.apply(this,arguments)}function pg(){return pg=(0,Ce.Z)(function*(d,e,r){if(!Bi(e))throw e;d._u.add(1),yield sh(d),d.gu.set("Offline"),r||(r=()=>km(d.localStore)),d.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){un("RemoteStore","Retrying IndexedDB access"),yield r(),d._u.delete(1),yield oh(d)}))}),pg.apply(this,arguments)}function Km(d,e){return e().catch(r=>op(d,r,e))}function ah(d){return gg.apply(this,arguments)}function gg(){return gg=(0,Ce.Z)(function*(d){const e=Fn(d),r=kd(e);let f=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Tv(e);)try{const _=yield o1(e.localStore,f);if(null===_){0===e.fu.length&&r.Fo();break}f=_.batchId,mg(e,_)}catch(_){yield op(e,_)}qm(e)&&Zm(e)}),gg.apply(this,arguments)}function Tv(d){return gd(d)&&d.fu.length<10}function mg(d,e){d.fu.push(e);const r=kd(d);r.ko()&&r.Yo&&r.Xo(e.mutations)}function qm(d){return gd(d)&&!kd(d).No()&&d.fu.length>0}function Zm(d){kd(d).start()}function Rv(d){return vg.apply(this,arguments)}function vg(){return vg=(0,Ce.Z)(function*(d){kd(d).eu()}),vg.apply(this,arguments)}function Ov(d){return ll.apply(this,arguments)}function ll(){return ll=(0,Ce.Z)(function*(d){const e=kd(d);for(const r of d.fu)e.Xo(r.mutations)}),ll.apply(this,arguments)}function yg(d,e,r){return _g.apply(this,arguments)}function _g(){return _g=(0,Ce.Z)(function*(d,e,r){const f=d.fu.shift(),_=oa.from(f,e,r);yield Km(d,()=>d.remoteSyncer.applySuccessfulWrite(_)),yield ah(d)}),_g.apply(this,arguments)}function Mv(d,e){return sp.apply(this,arguments)}function sp(){return sp=(0,Ce.Z)(function*(d,e){var r;e&&kd(d).Yo&&(yield(r=(0,Ce.Z)(function*(f,_){if(Ja(x=_.code)&&x!==nn.ABORTED){const M=f.fu.shift();kd(f).Mo(),yield Km(f,()=>f.remoteSyncer.rejectFailedWrite(M.batchId,_)),yield ah(f)}var x}),function(f,_){return r.apply(this,arguments)})(d,e)),qm(d)&&Zm(d)}),sp.apply(this,arguments)}function Xm(d,e){return Eg.apply(this,arguments)}function Eg(){return Eg=(0,Ce.Z)(function*(d,e){const r=Fn(d);r.asyncQueue.verifyOperationInProgress(),un("RemoteStore","RemoteStore received new credentials");const f=gd(r);r._u.add(3),yield sh(r),f&&r.gu.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(e),r._u.delete(3),yield oh(r)}),Eg.apply(this,arguments)}function wg(d,e){return gf.apply(this,arguments)}function gf(){return gf=(0,Ce.Z)(function*(d,e){const r=Fn(d);e?(r._u.delete(2),yield oh(r)):e||(r._u.add(2),yield sh(r),r.gu.set("Unknown"))}),gf.apply(this,arguments)}function Mh(d){return d.pu||(d.pu=function(e,r,f){const _=Fn(e);return _.su(),new Rh(r,_.connection,_.authCredentials,_.appCheckCredentials,_.yt,f)}(d.datastore,d.asyncQueue,{Yr:zc.bind(null,d),Zr:Dv.bind(null,d),Wo:fg.bind(null,d)}),d.wu.push(function(){var e=(0,Ce.Z)(function*(r){r?(d.pu.Mo(),np(d)?tp(d):d.gu.set("Unknown")):(yield d.pu.stop(),Wm(d))});return function(r){return e.apply(this,arguments)}}())),d.pu}function kd(d){return d.Iu||(d.Iu=function(e,r,f){const _=Fn(e);return _.su(),new lg(r,_.connection,_.authCredentials,_.appCheckCredentials,_.yt,f)}(d.datastore,d.asyncQueue,{Yr:Rv.bind(null,d),Zr:Mv.bind(null,d),tu:Ov.bind(null,d),Zo:yg.bind(null,d)}),d.wu.push(function(){var e=(0,Ce.Z)(function*(r){r?(d.Iu.Mo(),yield ah(d)):(yield d.Iu.stop(),d.fu.length>0&&(un("RemoteStore",`Stopping write stream with ${d.fu.length} pending writes`),d.fu=[]))});return function(r){return e.apply(this,arguments)}}())),d.Iu}class Nh{constructor(e,r,f,_,x){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=f,this.op=_,this.removalCallback=x,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(M=>{})}static createAndSchedule(e,r,f,_,x){const M=Date.now()+f,z=new Nh(e,r,M,_,x);return z.start(f),z}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new vn(nn.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fd(d,e){if(kr("AsyncQueue",`${e}: ${d}`),Bi(d))return new vn(nn.UNAVAILABLE,`${e}: ${d}`);throw d}class md{constructor(e){this.comparator=e?(r,f)=>e(r,f)||Yn.comparator(r.key,f.key):(r,f)=>Yn.comparator(r.key,f.key),this.keyedMap=fu(),this.sortedSet=new es(this.comparator)}static emptySet(e){return new md(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,f)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof md)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),f=e.sortedSet.getIterator();for(;r.hasNext();){const _=r.getNext().key,x=f.getNext().key;if(!_.isEqual(x))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,r){const f=new md;return f.comparator=this.comparator,f.keyedMap=e,f.sortedSet=r,f}}class Nv{constructor(){this.Tu=new es(Yn.comparator)}track(e){const r=e.doc.key,f=this.Tu.get(r);f?0!==e.type&&3===f.type?this.Tu=this.Tu.insert(r,e):3===e.type&&1!==f.type?this.Tu=this.Tu.insert(r,{type:f.type,doc:e.doc}):2===e.type&&2===f.type?this.Tu=this.Tu.insert(r,{type:2,doc:e.doc}):2===e.type&&0===f.type?this.Tu=this.Tu.insert(r,{type:0,doc:e.doc}):1===e.type&&0===f.type?this.Tu=this.Tu.remove(r):1===e.type&&2===f.type?this.Tu=this.Tu.insert(r,{type:1,doc:f.doc}):0===e.type&&1===f.type?this.Tu=this.Tu.insert(r,{type:2,doc:e.doc}):Cn():this.Tu=this.Tu.insert(r,e)}Eu(){const e=[];return this.Tu.inorderTraversal((r,f)=>{e.push(f)}),e}}class Ld{constructor(e,r,f,_,x,M,z,ae,pe){this.query=e,this.docs=r,this.oldDocs=f,this.docChanges=_,this.mutatedKeys=x,this.fromCache=M,this.syncStateChanged=z,this.excludesMetadataChanges=ae,this.hasCachedResults=pe}static fromInitialDocuments(e,r,f,_,x){const M=[];return r.forEach(z=>{M.push({type:0,doc:z})}),new Ld(e,r,md.emptySet(r),M,f,_,!0,!1,x)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,f=e.docChanges;if(r.length!==f.length)return!1;for(let _=0;_<r.length;_++)if(r[_].type!==f[_].type||!r[_].doc.isEqual(f[_].doc))return!1;return!0}}class a1{constructor(){this.Au=void 0,this.listeners=[]}}class Qm{constructor(){this.queries=new Wa(e=>Pc(e),Vu),this.onlineState="Unknown",this.Ru=new Set}}function ap(d,e){return up.apply(this,arguments)}function up(){return up=(0,Ce.Z)(function*(d,e){const r=Fn(d),f=e.query;let _=!1,x=r.queries.get(f);if(x||(_=!0,x=new a1),_)try{x.Au=yield r.onListen(f)}catch(M){const z=Fd(M,`Initialization of query '${mc(e.query)}' failed`);return void e.onError(z)}r.queries.set(f,x),x.listeners.push(e),e.bu(r.onlineState),x.Au&&e.Pu(x.Au)&&Ph(r)}),up.apply(this,arguments)}function cp(d,e){return mf.apply(this,arguments)}function mf(){return mf=(0,Ce.Z)(function*(d,e){const r=Fn(d),f=e.query;let _=!1;const x=r.queries.get(f);if(x){const M=x.listeners.indexOf(e);M>=0&&(x.listeners.splice(M,1),_=0===x.listeners.length)}if(_)return r.queries.delete(f),r.onUnlisten(f)}),mf.apply(this,arguments)}function vd(d,e){const r=Fn(d);let f=!1;for(const _ of e){const M=r.queries.get(_.query);if(M){for(const z of M.listeners)z.Pu(_)&&(f=!0);M.Au=_}}f&&Ph(r)}function lp(d,e,r){const f=Fn(d),_=f.queries.get(e);if(_)for(const x of _.listeners)x.onError(r);f.queries.delete(e)}function Ph(d){d.Ru.forEach(e=>{e.next()})}class uh{constructor(e,r,f){this.query=e,this.vu=r,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=f||{}}Pu(e){if(!this.options.includeMetadataChanges){const f=[];for(const _ of e.docChanges)3!==_.type&&f.push(_);e=new Ld(e.query,e.docs,e.oldDocs,f,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),r=!0):this.Cu(e,this.onlineState)&&(this.xu(e),r=!0),this.Su=e,r}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let r=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),r=!0),r}Cu(e,r){return!e.fromCache||(!this.options.Nu||!("Offline"!==r))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===r)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Ld.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class Pv{constructor(e,r){this.ku=e,this.byteLength=r}Ou(){return"metadata"in this.ku}}class Cg{constructor(e){this.yt=e}Ji(e){return Fo(this.yt,e)}Yi(e){return e.metadata.exists?D(this.yt,e.document,!1):no.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return $o(e)}}class Jm{constructor(e,r,f){this.Mu=e,this.localStore=r,this.yt=f,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=e0(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++r;const f=Ri.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(f.get(f.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}$u(e){const r=new Map,f=new Cg(this.yt);for(const _ of e)if(_.metadata.queries){const x=f.Ji(_.metadata.name);for(const M of _.metadata.queries){const z=(r.get(M)||xi()).add(x);r.set(M,z)}}return r}complete(){var e=this;return(0,Ce.Z)(function*(){const r=yield function Kf(d,e,r,f){return og.apply(this,arguments)}(e.localStore,new Cg(e.yt),e.documents,e.Mu.id),f=e.$u(e.documents);for(const _ of e.queries)yield Bm(e.localStore,_,f.get(_.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:r}})()}}function e0(d){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:d.totalDocuments,totalBytes:d.totalBytes}}class t0{constructor(e){this.key=e}}class kh{constructor(e){this.key=e}}class n0{constructor(e,r){this.query=e,this.qu=r,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=xi(),this.mutatedKeys=xi(),this.Gu=Bl(e),this.Qu=new md(this.Gu)}get ju(){return this.qu}Wu(e,r){const f=r?r.zu:new Nv,_=r?r.Qu:this.Qu;let x=r?r.mutatedKeys:this.mutatedKeys,M=_,z=!1;const ae="F"===this.query.limitType&&_.size===this.query.limit?_.last():null,pe="L"===this.query.limitType&&_.size===this.query.limit?_.first():null;if(e.inorderTraversal((Ve,It)=>{const en=_.get(Ve),An=kc(this.query,It)?It:null,Pn=!!en&&this.mutatedKeys.has(en.key),xr=!!An&&(An.hasLocalMutations||this.mutatedKeys.has(An.key)&&An.hasCommittedMutations);let ei=!1;en&&An?en.data.isEqual(An.data)?Pn!==xr&&(f.track({type:3,doc:An}),ei=!0):this.Hu(en,An)||(f.track({type:2,doc:An}),ei=!0,(ae&&this.Gu(An,ae)>0||pe&&this.Gu(An,pe)<0)&&(z=!0)):!en&&An?(f.track({type:0,doc:An}),ei=!0):en&&!An&&(f.track({type:1,doc:en}),ei=!0,(ae||pe)&&(z=!0)),ei&&(An?(M=M.add(An),x=xr?x.add(Ve):x.delete(Ve)):(M=M.delete(Ve),x=x.delete(Ve)))}),null!==this.query.limit)for(;M.size>this.query.limit;){const Ve="F"===this.query.limitType?M.last():M.first();M=M.delete(Ve.key),x=x.delete(Ve.key),f.track({type:1,doc:Ve})}return{Qu:M,zu:f,$i:z,mutatedKeys:x}}Hu(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,f){const _=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const x=e.zu.Eu();x.sort((pe,Ve)=>function(It,en){const An=Pn=>{switch(Pn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Cn()}};return An(It)-An(en)}(pe.type,Ve.type)||this.Gu(pe.doc,Ve.doc)),this.Ju(f);const M=r?this.Yu():[],z=0===this.Ku.size&&this.current?1:0,ae=z!==this.Uu;return this.Uu=z,0!==x.length||ae?{snapshot:new Ld(this.query,e.Qu,_,x,e.mutatedKeys,0===z,ae,!1,!!f&&f.resumeToken.approximateByteSize()>0),Xu:M}:{Xu:M}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Nv,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(r=>this.qu=this.qu.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.qu=this.qu.delete(r)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=xi(),this.Qu.forEach(f=>{this.Zu(f.key)&&(this.Ku=this.Ku.add(f.key))});const r=[];return e.forEach(f=>{this.Ku.has(f)||r.push(new kh(f))}),this.Ku.forEach(f=>{e.has(f)||r.push(new t0(f))}),r}tc(e){this.qu=e.Hi,this.Ku=xi();const r=this.Wu(e.documents);return this.applyChanges(r,!0)}ec(){return Ld.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class u1{constructor(e,r,f){this.query=e,this.targetId=r,this.view=f}}class kv{constructor(e){this.key=e,this.nc=!1}}class Fv{constructor(e,r,f,_,x,M){this.localStore=e,this.remoteStore=r,this.eventManager=f,this.sharedClientState=_,this.currentUser=x,this.maxConcurrentLimboResolutions=M,this.sc={},this.ic=new Wa(z=>Pc(z),Vu),this.rc=new Map,this.oc=new Set,this.uc=new es(Yn.comparator),this.cc=new Map,this.ac=new Qp,this.hc={},this.lc=new Map,this.fc=th.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function Lv(d,e){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,Ce.Z)(function*(d,e){const r=yp(d);let f,_;const x=r.ic.get(e);if(x)f=x.targetId,r.sharedClientState.addLocalQueryTarget(f),_=x.view.ec();else{const M=yield bh(r.localStore,Ls(e));r.isPrimaryClient&&Jf(r.remoteStore,M);const z=r.sharedClientState.addLocalQueryTarget(M.targetId);f=M.targetId,_=yield xg(r,e,f,"current"===z,M.resumeToken)}return _}),Ig.apply(this,arguments)}function xg(d,e,r,f,_){return Ag.apply(this,arguments)}function Ag(){return Ag=(0,Ce.Z)(function*(d,e,r,f,_){d._c=(It,en,An)=>{return(Pn=(0,Ce.Z)(function*(xr,ei,Rs,Gs){let Ho=ei.view.Wu(Rs);Ho.$i&&(Ho=yield Yf(xr.localStore,ei.query,!1).then(({documents:qo})=>ei.view.Wu(qo,Ho)));const Ta=Gs&&Gs.targetChanges.get(ei.targetId),Eo=ei.view.applyChanges(Ho,xr.isPrimaryClient,Ta);return a0(xr,ei.targetId,Eo.Xu),Eo.snapshot}),function(xr,ei,Rs,Gs){return Pn.apply(this,arguments)})(d,It,en,An);var Pn};const x=yield Yf(d.localStore,e,!0),M=new n0(e,x.Hi),z=M.Wu(x.documents),ae=ju.createSynthesizedTargetChangeForCurrentChange(r,f&&"Offline"!==d.onlineState,_),pe=M.applyChanges(z,d.isPrimaryClient,ae);a0(d,r,pe.Xu);const Ve=new u1(e,r,M);return d.ic.set(e,Ve),d.rc.has(r)?d.rc.get(r).push(e):d.rc.set(r,[e]),pe.snapshot}),Ag.apply(this,arguments)}function Bv(d,e){return dp.apply(this,arguments)}function dp(){return dp=(0,Ce.Z)(function*(d,e){const r=Fn(d),f=r.ic.get(e),_=r.rc.get(f.targetId);if(_.length>1)return r.rc.set(f.targetId,_.filter(x=>!Vu(x,e))),void r.ic.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(f.targetId),r.sharedClientState.isActiveQueryTarget(f.targetId)||(yield rh(r.localStore,f.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(f.targetId),pf(r.remoteStore,f.targetId),yd(r,f.targetId)}).catch(Ma))):(yd(r,f.targetId),yield rh(r.localStore,f.targetId,!0))}),dp.apply(this,arguments)}function bg(){return bg=(0,Ce.Z)(function*(d,e,r){const f=_p(d);try{const _=yield function(x,M){const z=Fn(x),ae=eo.now(),pe=M.reduce((en,An)=>en.add(An.key),xi());let Ve,It;return z.persistence.runTransaction("Locally write mutations","readwrite",en=>{let An=Ko(),Pn=xi();return z.Gi.getEntries(en,pe).next(xr=>{An=xr,An.forEach((ei,Rs)=>{Rs.isValidDocument()||(Pn=Pn.add(ei))})}).next(()=>z.localDocuments.getOverlayedDocuments(en,An)).next(xr=>{Ve=xr;const ei=[];for(const Rs of M){const Gs=Lc(Rs,Ve.get(Rs.key).overlayedDocument);null!=Gs&&ei.push(new Au(Rs.key,Gs,hc(Gs.value.mapValue),Io.exists(!0)))}return z.mutationQueue.addMutationBatch(en,ae,ei,M)}).next(xr=>{It=xr;const ei=xr.applyToLocalDocumentSet(Ve,Pn);return z.documentOverlayCache.saveOverlays(en,xr.batchId,ei)})}).then(()=>({batchId:It.batchId,changes:Il(Ve)}))}(f.localStore,e);f.sharedClientState.addPendingMutation(_.batchId),function(x,M,z){let ae=x.hc[x.currentUser.toKey()];ae||(ae=new es(qr)),ae=ae.insert(M,z),x.hc[x.currentUser.toKey()]=ae}(f,_.batchId,r),yield _d(f,_.changes),yield ah(f.remoteStore)}catch(_){const x=Fd(_,"Failed to persist write");r.reject(x)}}),bg.apply(this,arguments)}function hp(d,e){return Dg.apply(this,arguments)}function Dg(){return Dg=(0,Ce.Z)(function*(d,e){const r=Fn(d);try{const f=yield function i1(d,e){const r=Fn(d),f=e.snapshotVersion;let _=r.qi;return r.persistence.runTransaction("Apply remote event","readwrite-primary",x=>{const M=r.Gi.newChangeBuffer({trackRemovals:!0});_=r.qi;const z=[];e.targetChanges.forEach((Ve,It)=>{const en=_.get(It);if(!en)return;z.push(r.Cs.removeMatchingKeys(x,Ve.removedDocuments,It).next(()=>r.Cs.addMatchingKeys(x,Ve.addedDocuments,It)));let An=en.withSequenceNumber(x.currentSequenceNumber);var Pn,xr,ei;e.targetMismatches.has(It)?An=An.withResumeToken(so.EMPTY_BYTE_STRING,Lr.min()).withLastLimboFreeSnapshotVersion(Lr.min()):Ve.resumeToken.approximateByteSize()>0&&(An=An.withResumeToken(Ve.resumeToken,f)),_=_.insert(It,An),xr=An,ei=Ve,(0===(Pn=en).resumeToken.approximateByteSize()||xr.snapshotVersion.toMicroseconds()-Pn.snapshotVersion.toMicroseconds()>=3e8||ei.addedDocuments.size+ei.modifiedDocuments.size+ei.removedDocuments.size>0)&&z.push(r.Cs.updateTargetData(x,An))});let ae=Ko(),pe=xi();if(e.documentUpdates.forEach(Ve=>{e.resolvedLimboDocuments.has(Ve)&&z.push(r.persistence.referenceDelegate.updateLimboDocument(x,Ve))}),z.push(Sv(x,M,e.documentUpdates).next(Ve=>{ae=Ve.Wi,pe=Ve.zi})),!f.isEqual(Lr.min())){const Ve=r.Cs.getLastRemoteSnapshotVersion(x).next(It=>r.Cs.setTargetsMetadata(x,x.currentSequenceNumber,f));z.push(Ve)}return Gt.waitFor(z).next(()=>M.apply(x)).next(()=>r.localDocuments.getLocalViewOfDocuments(x,ae,pe)).next(()=>ae)}).then(x=>(r.qi=_,x))}(r.localStore,e);e.targetChanges.forEach((_,x)=>{const M=r.cc.get(x);M&&(Xn(_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size<=1),_.addedDocuments.size>0?M.nc=!0:_.modifiedDocuments.size>0?Xn(M.nc):_.removedDocuments.size>0&&(Xn(M.nc),M.nc=!1))}),yield _d(r,f,e)}catch(f){yield Ma(f)}}),Dg.apply(this,arguments)}function r0(d,e,r){const f=Fn(d);if(f.isPrimaryClient&&0===r||!f.isPrimaryClient&&1===r){const _=[];f.ic.forEach((x,M)=>{const z=M.view.bu(e);z.snapshot&&_.push(z.snapshot)}),function(x,M){const z=Fn(x);z.onlineState=M;let ae=!1;z.queries.forEach((pe,Ve)=>{for(const It of Ve.listeners)It.bu(M)&&(ae=!0)}),ae&&Ph(z)}(f.eventManager,e),_.length&&f.sc.Wo(_),f.onlineState=e,f.isPrimaryClient&&f.sharedClientState.setOnlineState(e)}}function Uv(d,e,r){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,Ce.Z)(function*(d,e,r){const f=Fn(d);f.sharedClientState.updateQueryState(e,"rejected",r);const _=f.cc.get(e),x=_&&_.key;if(x){let M=new es(Yn.comparator);M=M.insert(x,no.newNoDocument(x,Lr.min()));const z=xi().add(x),ae=new bu(Lr.min(),new Map,new Yo(qr),M,z);yield hp(f,ae),f.uc=f.uc.remove(x),f.cc.delete(e),Mg(f)}else yield rh(f.localStore,e,!1).then(()=>yd(f,e,r)).catch(Ma)}),Tg.apply(this,arguments)}function Vv(d,e){return Rg.apply(this,arguments)}function Rg(){return Rg=(0,Ce.Z)(function*(d,e){const r=Fn(d),f=e.batch.batchId;try{const _=yield function rg(d,e){const r=Fn(d);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",f=>{const _=e.batch.keys(),x=r.Gi.newChangeBuffer({trackRemovals:!0});return function(M,z,ae,pe){const Ve=ae.batch,It=Ve.keys();let en=Gt.resolve();return It.forEach(An=>{en=en.next(()=>pe.getEntry(z,An)).next(Pn=>{const xr=ae.docVersions.get(An);Xn(null!==xr),Pn.version.compareTo(xr)<0&&(Ve.applyToRemoteDocument(Pn,ae),Pn.isValidDocument()&&(Pn.setReadTime(ae.commitVersion),pe.addEntry(Pn)))})}),en.next(()=>M.mutationQueue.removeMutationBatch(z,Ve))}(r,f,e,x).next(()=>x.apply(f)).next(()=>r.mutationQueue.performConsistencyCheck(f)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(f,_,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,function(M){let z=xi();for(let ae=0;ae<M.mutationResults.length;++ae)M.mutationResults[ae].transformResults.length>0&&(z=z.add(M.batch.mutations[ae].key));return z}(e))).next(()=>r.localDocuments.getDocuments(f,_))})}(r.localStore,e);pp(r,f,null),s0(r,f),r.sharedClientState.updateMutationState(f,"acknowledged"),yield _d(r,_)}catch(_){yield Ma(_)}}),Rg.apply(this,arguments)}function $v(d,e,r){return fp.apply(this,arguments)}function fp(){return fp=(0,Ce.Z)(function*(d,e,r){const f=Fn(d);try{const _=yield function(x,M){const z=Fn(x);return z.persistence.runTransaction("Reject batch","readwrite-primary",ae=>{let pe;return z.mutationQueue.lookupMutationBatch(ae,M).next(Ve=>(Xn(null!==Ve),pe=Ve.keys(),z.mutationQueue.removeMutationBatch(ae,Ve))).next(()=>z.mutationQueue.performConsistencyCheck(ae)).next(()=>z.documentOverlayCache.removeOverlaysForBatchId(ae,pe,M)).next(()=>z.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(ae,pe)).next(()=>z.localDocuments.getDocuments(ae,pe))})}(f.localStore,e);pp(f,e,r),s0(f,e),f.sharedClientState.updateMutationState(e,"rejected",r),yield _d(f,_)}catch(_){yield Ma(_)}}),fp.apply(this,arguments)}function Og(){return Og=(0,Ce.Z)(function*(d,e){const r=Fn(d);gd(r.remoteStore)||un("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const f=yield function(x){const M=Fn(x);return M.persistence.runTransaction("Get highest unacknowledged batch id","readonly",z=>M.mutationQueue.getHighestUnacknowledgedBatchId(z))}(r.localStore);if(-1===f)return void e.resolve();const _=r.lc.get(f)||[];_.push(e),r.lc.set(f,_)}catch(f){const _=Fd(f,"Initialization of waitForPendingWrites() operation failed");e.reject(_)}}),Og.apply(this,arguments)}function s0(d,e){(d.lc.get(e)||[]).forEach(r=>{r.resolve()}),d.lc.delete(e)}function pp(d,e,r){const f=Fn(d);let _=f.hc[f.currentUser.toKey()];if(_){const x=_.get(e);x&&(r?x.reject(r):x.resolve(),_=_.remove(e)),f.hc[f.currentUser.toKey()]=_}}function yd(d,e,r=null){d.sharedClientState.removeLocalQueryTarget(e);for(const f of d.rc.get(e))d.ic.delete(f),r&&d.sc.wc(f,r);d.rc.delete(e),d.isPrimaryClient&&d.ac.ls(e).forEach(f=>{d.ac.containsKey(f)||Bd(d,f)})}function Bd(d,e){d.oc.delete(e.path.canonicalString());const r=d.uc.get(e);null!==r&&(pf(d.remoteStore,r),d.uc=d.uc.remove(e),d.cc.delete(r),Mg(d))}function a0(d,e,r){for(const f of r)f instanceof t0?(d.ac.addReference(f.key,e),gp(d,f)):f instanceof kh?(un("SyncEngine","Document no longer in limbo: "+f.key),d.ac.removeReference(f.key,e),d.ac.containsKey(f.key)||Bd(d,f.key)):Cn()}function gp(d,e){const r=e.key,f=r.path.canonicalString();d.uc.get(r)||d.oc.has(f)||(un("SyncEngine","New document in limbo: "+r),d.oc.add(f),Mg(d))}function Mg(d){for(;d.oc.size>0&&d.uc.size<d.maxConcurrentLimboResolutions;){const e=d.oc.values().next().value;d.oc.delete(e);const r=new Yn(Ri.fromString(e)),f=d.fc.next();d.cc.set(f,new kv(r)),d.uc=d.uc.insert(r,f),Jf(d.remoteStore,new ma(Ls(Uu(r.path)),f,2,ha.at))}}function _d(d,e,r){return vf.apply(this,arguments)}function vf(){return vf=(0,Ce.Z)(function*(d,e,r){const f=Fn(d),_=[],x=[],M=[];var z;f.ic.isEmpty()||(f.ic.forEach((z,ae)=>{M.push(f._c(ae,e,r).then(pe=>{if((pe||r)&&f.isPrimaryClient&&f.sharedClientState.updateQueryState(ae.targetId,null!=pe&&pe.fromCache?"not-current":"current"),pe){_.push(pe);const Ve=Mm.Ci(ae.targetId,pe);x.push(Ve)}}))}),yield Promise.all(M),f.sc.Wo(_),yield(z=(0,Ce.Z)(function*(ae,pe){const Ve=Fn(ae);try{yield Ve.persistence.runTransaction("notifyLocalViewChanges","readwrite",It=>Gt.forEach(pe,en=>Gt.forEach(en.Si,An=>Ve.persistence.referenceDelegate.addReference(It,en.targetId,An)).next(()=>Gt.forEach(en.Di,An=>Ve.persistence.referenceDelegate.removeReference(It,en.targetId,An)))))}catch(It){if(!Bi(It))throw It;un("LocalStore","Failed to update sequence numbers: "+It)}for(const It of pe){const en=It.targetId;if(!It.fromCache){const An=Ve.qi.get(en),xr=An.withLastLimboFreeSnapshotVersion(An.snapshotVersion);Ve.qi=Ve.qi.insert(en,xr)}}}),function(ae,pe){return z.apply(this,arguments)})(f.localStore,x))}),vf.apply(this,arguments)}function Hv(d,e){return dl.apply(this,arguments)}function dl(){return dl=(0,Ce.Z)(function*(d,e){const r=Fn(d);if(!r.currentUser.isEqual(e)){un("SyncEngine","User change. New user:",e.toKey());const f=yield Pm(r.localStore,e);r.currentUser=e,(_=r).lc.forEach(M=>{M.forEach(z=>{z.reject(new vn(nn.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),_.lc.clear(),r.sharedClientState.handleUserChange(e,f.removedBatchIds,f.addedBatchIds),yield _d(r,f.ji)}var _}),dl.apply(this,arguments)}function yf(d,e){const r=Fn(d),f=r.cc.get(e);if(f&&f.nc)return xi().add(f.key);{let _=xi();const x=r.rc.get(e);if(!x)return _;for(const M of x){const z=r.ic.get(M);_=_.unionWith(z.view.ju)}return _}}function Yu(d,e){return Ed.apply(this,arguments)}function Ed(){return Ed=(0,Ce.Z)(function*(d,e){const r=Fn(d),f=yield Yf(r.localStore,e.query,!0),_=e.view.tc(f);return r.isPrimaryClient&&a0(r,e.targetId,_.Xu),_}),Ed.apply(this,arguments)}function mp(d,e){return Ic.apply(this,arguments)}function Ic(){return Ic=(0,Ce.Z)(function*(d,e){const r=Fn(d);return Lm(r.localStore,e).then(f=>_d(r,f))}),Ic.apply(this,arguments)}function Ng(d,e,r,f){return Ud.apply(this,arguments)}function Ud(){return Ud=(0,Ce.Z)(function*(d,e,r,f){const _=Fn(d),x=yield function(M,z){const ae=Fn(M),pe=Fn(ae.mutationQueue);return ae.persistence.runTransaction("Lookup mutation documents","readonly",Ve=>pe.Tn(Ve,z).next(It=>It?ae.localDocuments.getDocuments(Ve,It):Gt.resolve(null)))}(_.localStore,e);var z;null!==x?("pending"===r?yield ah(_.remoteStore):"acknowledged"===r||"rejected"===r?(pp(_,e,f||null),s0(_,e),z=e,Fn(Fn(_.localStore).mutationQueue).An(z)):Cn(),yield _d(_,x)):un("SyncEngine","Cannot apply mutation batch with id: "+e)}),Ud.apply(this,arguments)}function Vd(){return Vd=(0,Ce.Z)(function*(d,e){const r=Fn(d);if(yp(r),_p(r),!0===e&&!0!==r.dc){const f=r.sharedClientState.getAllActiveQueryTargets(),_=yield ch(r,f.toArray());r.dc=!0,yield wg(r.remoteStore,!0);for(const x of _)Jf(r.remoteStore,x)}else if(!1===e&&!1!==r.dc){const f=[];let _=Promise.resolve();r.rc.forEach((x,M)=>{r.sharedClientState.isLocalQueryTarget(M)?f.push(M):_=_.then(()=>(yd(r,M),rh(r.localStore,M,!0))),pf(r.remoteStore,M)}),yield _,yield ch(r,f),function(x){const M=Fn(x);M.cc.forEach((z,ae)=>{pf(M.remoteStore,ae)}),M.ac.fs(),M.cc=new Map,M.uc=new es(Yn.comparator)}(r),r.dc=!1,yield wg(r.remoteStore,!1)}}),Vd.apply(this,arguments)}function ch(d,e,r){return $d.apply(this,arguments)}function $d(){return $d=(0,Ce.Z)(function*(d,e,r){const f=Fn(d),_=[],x=[];for(const M of e){let z;const ae=f.rc.get(M);if(ae&&0!==ae.length){z=yield bh(f.localStore,Ls(ae[0]));for(const pe of ae){const Ve=f.ic.get(pe),It=yield Yu(f,Ve);It.snapshot&&x.push(It.snapshot)}}else{const pe=yield ih(f.localStore,M);z=yield bh(f.localStore,pe),yield xg(f,lh(pe),M,!1,z.resumeToken)}_.push(z)}return f.sc.Wo(x),_}),$d.apply(this,arguments)}function lh(d){return yo(d.path,d.collectionGroup,d.orderBy,d.filters,d.limit,"F",d.startAt,d.endAt)}function Lh(d){const e=Fn(d);return Fn(Fn(e.localStore).persistence).vi()}function Bh(d,e,r,f){return Hd.apply(this,arguments)}function Hd(){return Hd=(0,Ce.Z)(function*(d,e,r,f){const _=Fn(d);if(_.dc)return void un("SyncEngine","Ignoring unexpected query state notification.");const x=_.rc.get(e);if(x&&x.length>0)switch(r){case"current":case"not-current":{const M=yield Lm(_.localStore,ud(x[0])),z=bu.createSynthesizedRemoteEventForCurrentChange(e,"current"===r,so.EMPTY_BYTE_STRING);yield _d(_,M,z);break}case"rejected":yield rh(_.localStore,e,!0),yd(_,e,f);break;default:Cn()}}),Hd.apply(this,arguments)}function u0(d,e,r){return vp.apply(this,arguments)}function vp(){return vp=(0,Ce.Z)(function*(d,e,r){const f=yp(d);if(f.dc){for(const _ of e){if(f.rc.has(_)){un("SyncEngine","Adding an already active target "+_);continue}const x=yield ih(f.localStore,_),M=yield bh(f.localStore,x);yield xg(f,lh(x),M.targetId,!1,M.resumeToken),Jf(f.remoteStore,M)}for(const _ of r)f.rc.has(_)&&(yield rh(f.localStore,_,!1).then(()=>{pf(f.remoteStore,_),yd(f,_)}).catch(Ma))}}),vp.apply(this,arguments)}function yp(d){const e=Fn(d);return e.remoteStore.remoteSyncer.applyRemoteEvent=hp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Uv.bind(null,e),e.sc.Wo=vd.bind(null,e.eventManager),e.sc.wc=lp.bind(null,e.eventManager),e}function _p(d){const e=Fn(d);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Vv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$v.bind(null,e),e}class Pg{constructor(){this.synchronizeTabs=!1}initialize(e){var r=this;return(0,Ce.Z)(function*(){r.yt=cf(e.databaseInfo.databaseId),r.sharedClientState=r.gc(e),r.persistence=r.yc(e),yield r.persistence.start(),r.localStore=r.Ic(e),r.gcScheduler=r.Tc(e,r.localStore),r.indexBackfillerScheduler=r.Ec(e,r.localStore)})()}Tc(e,r){return null}Ec(e,r){return null}Ic(e){return Pd(this.persistence,new ng,e.initialUser,this.yt)}yc(e){return new Jp(rf.Bs,this.yt)}gc(e){return new bv}terminate(){var e=this;return(0,Ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class kg extends Pg{constructor(e,r,f){super(),this.Ac=e,this.cacheSizeBytes=r,this.forceOwnership=f,this.synchronizeTabs=!1}initialize(e){var r=()=>super.initialize,f=this;return(0,Ce.Z)(function*(){yield r().call(f,e),yield f.Ac.initialize(f,e),yield _p(f.Ac.syncEngine),yield ah(f.Ac.remoteStore),yield f.persistence.li(()=>(f.gcScheduler&&!f.gcScheduler.started&&f.gcScheduler.start(),f.indexBackfillerScheduler&&!f.indexBackfillerScheduler.started&&f.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Pd(this.persistence,new ng,e.initialUser,this.yt)}Tc(e,r){return new vv(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,r)}Ec(e,r){const f=new Rc(r,this.persistence);return new Co(e.asyncQueue,f)}yc(e){const r=tg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),f=void 0!==this.cacheSizeBytes?Di.withCacheSize(this.cacheSizeBytes):Di.DEFAULT;return new eg(this.synchronizeTabs,r,e.clientId,f,e.asyncQueue,jm(),uf(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new bv}}class l0 extends kg{constructor(e,r){super(e,r,!1),this.Ac=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(e){var r=()=>super.initialize,f=this;return(0,Ce.Z)(function*(){yield r().call(f,e);const _=f.Ac.syncEngine;f.sharedClientState instanceof af&&(f.sharedClientState.syncEngine={Fr:Ng.bind(null,_),$r:Bh.bind(null,_),Br:u0.bind(null,_),vi:Lh.bind(null,_),Mr:mp.bind(null,_)},yield f.sharedClientState.start()),yield f.persistence.li(function(){var x=(0,Ce.Z)(function*(M){yield function Fh(d,e){return Vd.apply(this,arguments)}(f.Ac.syncEngine,M),f.gcScheduler&&(M&&!f.gcScheduler.started?f.gcScheduler.start():M||f.gcScheduler.stop()),f.indexBackfillerScheduler&&(M&&!f.indexBackfillerScheduler.started?f.indexBackfillerScheduler.start():M||f.indexBackfillerScheduler.stop())});return function(M){return x.apply(this,arguments)}}())})()}gc(e){const r=jm();if(!af.C(r))throw new vn(nn.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const f=tg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new af(r,e.asyncQueue,f,e.clientId,e.initialUser)}}class Ep{initialize(e,r){var f=this;return(0,Ce.Z)(function*(){f.localStore||(f.localStore=e.localStore,f.sharedClientState=e.sharedClientState,f.datastore=f.createDatastore(r),f.remoteStore=f.createRemoteStore(r),f.eventManager=f.createEventManager(r),f.syncEngine=f.createSyncEngine(r,!e.synchronizeTabs),f.sharedClientState.onlineStateHandler=_=>r0(f.syncEngine,_,1),f.remoteStore.remoteSyncer.handleCredentialChange=Hv.bind(null,f.syncEngine),yield wg(f.remoteStore,f.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Qm}createDatastore(e){const r=cf(e.databaseInfo.databaseId),f=new Hm(e.databaseInfo);return new df(e.authCredentials,e.appCheckCredentials,f,r)}createRemoteStore(e){return r=this.localStore,f=this.datastore,_=e.asyncQueue,x=z=>r0(this.syncEngine,z,0),M=$m.C()?new $m:new ug,new hg(r,f,_,x,M);var r,f,_,x,M}createSyncEngine(e,r){return function(f,_,x,M,z,ae,pe){const Ve=new Fv(f,_,x,M,z,ae);return pe&&(Ve.dc=!0),Ve}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){return(e=(0,Ce.Z)(function*(r){const f=Fn(r);un("RemoteStore","RemoteStore shutting down."),f._u.add(5),yield sh(f),f.mu.shutdown(),f.gu.set("Unknown")}),function(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function Fg(d,e,r){if(!r)throw new vn(nn.INVALID_ARGUMENT,`Function ${d}() cannot be called with an empty ${e}.`)}function d0(d,e,r,f){if(!0===e&&!0===f)throw new vn(nn.INVALID_ARGUMENT,`${d} and ${r} cannot be used together.`)}function Lg(d){if(!Yn.isDocumentKey(d))throw new vn(nn.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${d} has ${d.length}.`)}function h0(d){if(Yn.isDocumentKey(d))throw new vn(nn.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${d} has ${d.length}.`)}function _f(d){if(void 0===d)return"undefined";if(null===d)return"null";if("string"==typeof d)return d.length>20&&(d=`${d.substring(0,20)}...`),JSON.stringify(d);if("number"==typeof d||"boolean"==typeof d)return""+d;if("object"==typeof d){if(d instanceof Array)return"an array";{const e=(r=d).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof d?"a function":Cn()}function _o(d,e){if("_delegate"in d&&(d=d._delegate),!(d instanceof e)){if(e.name===d.constructor.name)throw new vn(nn.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=_f(d);throw new vn(nn.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return d}function wp(d,e){if(e<=0)throw new vn(nn.INVALID_ARGUMENT,`Function ${d}() requires a positive number, but it was: ${e}.`)}const f0=new Map;class Ef{constructor(e){var r;if(void 0===e.host){if(void 0!==e.ssl)throw new vn(nn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(r=e.ssl)||void 0===r||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new vn(nn.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,d0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jd{constructor(e,r,f,_){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=f,this._app=_,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ef({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new vn(nn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new vn(nn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ef(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Ea;switch(r.type){case"gapi":return new Ka(r.client,r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new vn(nn.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=f0.get(e);r&&(un("ComponentProvider","Removing Datastore"),f0.delete(e),r.terminate())}(this),Promise.resolve()}}class aa{constructor(e,r,f){this.converter=r,this._key=f,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new aa(this.firestore,e,this._key)}}class ru{constructor(e,r,f){this.converter=r,this._query=f,this.type="query",this.firestore=e}withConverter(e){return new ru(this.firestore,e,this._query)}}class hl extends ru{constructor(e,r,f){super(e,r,Uu(f)),this._path=f,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new aa(this.firestore,null,new Yn(e))}withConverter(e){return new hl(this.firestore,e,this._path)}}function Ip(d,e,...r){if(d=(0,st.m9)(d),Fg("collection","path",e),d instanceof jd){const f=Ri.fromString(e,...r);return h0(f),new hl(d,null,f)}{if(!(d instanceof aa||d instanceof hl))throw new vn(nn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const f=d._path.child(Ri.fromString(e,...r));return h0(f),new hl(d.firestore,null,f)}}function Uh(d,e,...r){if(d=(0,st.m9)(d),1===arguments.length&&(e=fo.R()),Fg("doc","path",e),d instanceof jd){const f=Ri.fromString(e,...r);return Lg(f),new aa(d,null,new Yn(f))}{if(!(d instanceof aa||d instanceof hl))throw new vn(nn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const f=d._path.child(Ri.fromString(e,...r));return Lg(f),new aa(d.firestore,d instanceof hl?d.converter:null,new Yn(f))}}function Bg(d,e){return d=(0,st.m9)(d),e=(0,st.m9)(e),(d instanceof aa||d instanceof hl)&&(e instanceof aa||e instanceof hl)&&d.firestore===e.firestore&&d.path===e.path&&d.converter===e.converter}function xp(d,e){return d=(0,st.m9)(d),e=(0,st.m9)(e),d instanceof ru&&e instanceof ru&&d.firestore===e.firestore&&Vu(d._query,e._query)&&d.converter===e.converter}function Ap(d,e=10240){let r=0;return{read:()=>(0,Ce.Z)(function*(){if(r<d.byteLength){const f={value:d.slice(r,r+e),done:!1};return r+=e,f}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class wf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):kr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}class jv{constructor(e,r){this.Pc=e,this.yt=r,this.metadata=new Ur,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(f=>{f&&f.Ou()?this.metadata.resolve(f.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==f?void 0:f.ku)}`))},f=>this.metadata.reject(f))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Ce.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Ce.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Ce.Z)(function*(){const r=yield e.Sc();if(null===r)return null;const f=e.vc.decode(r),_=Number(f);isNaN(_)&&e.Dc(`length string (${f}) is not valid number`);const x=yield e.Cc(_);return new Pv(JSON.parse(x),r.length+_)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Ce.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const r=e.xc();r<0&&e.Dc("Reached the end of bundle when a length string is expected.");const f=e.buffer.slice(0,r);return e.buffer=e.buffer.slice(r),f})()}Cc(e){var r=this;return(0,Ce.Z)(function*(){for(;r.buffer.length<e;)(yield r.Nc())&&r.Dc("Reached the end of bundle when more is expected.");const f=r.vc.decode(r.buffer.slice(0,e));return r.buffer=r.buffer.slice(e),f})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Ce.Z)(function*(){const r=yield e.Pc.read();if(!r.done){const f=new Uint8Array(e.buffer.length+r.value.length);f.set(e.buffer),f.set(r.value,e.buffer.length),e.buffer=f}return r.done})()}}class v0{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var r=this;return(0,Ce.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw new vn(nn.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const f=yield(_=(0,Ce.Z)(function*(x,M){const z=Fn(x),ae=Tl(z.yt)+"/documents",pe={documents:M.map(An=>Ds(z.yt,An))},Ve=yield z._o("BatchGetDocuments",ae,pe,M.length),It=new Map;Ve.forEach(An=>{const Pn=function L(d,e){return"found"in e?function(r,f){Xn(!!f.found);const _=Fo(r,f.found.name),x=$o(f.found.updateTime),M=f.found.createTime?$o(f.found.createTime):Lr.min(),z=new ta({mapValue:{fields:f.found.fields}});return no.newFoundDocument(_,x,M,z)}(d,e):"missing"in e?function(r,f){Xn(!!f.missing),Xn(!!f.readTime);const _=Fo(r,f.missing),x=$o(f.readTime);return no.newNoDocument(_,x)}(d,e):Cn()}(z.yt,An);It.set(Pn.key.toString(),Pn)});const en=[];return M.forEach(An=>{const Pn=It.get(An.toString());Xn(!!Pn),en.push(Pn)}),en}),function(x,M){return _.apply(this,arguments)})(r.datastore,e);var _;return f.forEach(_=>r.recordVersion(_)),f})()}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(f){this.lastWriteError=f}this.writtenDocs.add(e.toString())}delete(e){this.write(new Uc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const r=e.readVersions;var f;e.mutations.forEach(f=>{r.delete(f.key.toString())}),r.forEach((f,_)=>{const x=Yn.fromPath(_);e.mutations.push(new nc(x,e.precondition(x)))}),yield(f=(0,Ce.Z)(function*(_,x){const M=Fn(_),z=Tl(M.yt)+"/documents",ae={writes:x.map(pe=>Oe(M.yt,pe))};yield M.ao("Commit",z,ae)}),function(_,x){return f.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw Cn();r=Lr.min()}const f=this.readVersions.get(e.key.toString());if(f){if(!r.isEqual(f))throw new vn(nn.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Lr.min())?Io.exists(!1):Io.updateTime(r):Io.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Lr.min()))throw new vn(nn.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Io.updateTime(r)}return Io.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class zv{constructor(e,r,f,_,x){this.asyncQueue=e,this.datastore=r,this.options=f,this.updateFunction=_,this.deferred=x,this.kc=f.maxAttempts,this.xo=new cg(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,Ce.Z)(function*(){const r=new v0(e.datastore),f=e.Mc(r);f&&f.then(_=>{e.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{e.deferred.resolve(_)}).catch(x=>{e.Fc(x)}))}).catch(_=>{e.Fc(_)})}))}Mc(e){try{const r=this.updateFunction(e);return!fa(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const r=e.code;return"aborted"===r||"failed-precondition"===r||"already-exists"===r||!Ja(r)}return!1}}class y0{constructor(e,r,f,_){var x=this;this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=f,this.databaseInfo=_,this.user=et.UNAUTHENTICATED,this.clientId=fo.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(f,function(){var M=(0,Ce.Z)(function*(z){un("FirestoreClient","Received user=",z.uid),yield x.authCredentialListener(z),x.user=z});return function(z){return M.apply(this,arguments)}}()),this.appCheckCredentials.start(f,M=>(un("FirestoreClient","Received new app check token=",M),this.appCheckCredentialListener(M,this.user)))}getConfiguration(){var e=this;return(0,Ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new vn(nn.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const r=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),r.resolve()}catch(f){const _=Fd(f,"Failed to shutdown persistence");r.reject(_)}})),r.promise}}function Ug(d,e){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,Ce.Z)(function*(d,e){d.asyncQueue.verifyOperationInProgress(),un("FirestoreClient","Initializing OfflineComponentProvider");const r=yield d.getConfiguration();yield e.initialize(r);let f=r.initialUser;d.setCredentialChangeListener(function(){var _=(0,Ce.Z)(function*(x){f.isEqual(x)||(yield Pm(e.localStore,x),f=x)});return function(x){return _.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>d.terminate()),d.offlineComponents=e}),Sp.apply(this,arguments)}function bp(d,e){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,Ce.Z)(function*(d,e){d.asyncQueue.verifyOperationInProgress();const r=yield Tp(d);un("FirestoreClient","Initializing OnlineComponentProvider");const f=yield d.getConfiguration();yield e.initialize(r,f),d.setCredentialChangeListener(_=>Xm(e.remoteStore,_)),d.setAppCheckTokenChangeListener((_,x)=>Xm(e.remoteStore,x)),d.onlineComponents=e}),Dp.apply(this,arguments)}function Tp(d){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,Ce.Z)(function*(d){return d.offlineComponents||(un("FirestoreClient","Using default OfflineComponentProvider"),yield Ug(d,new Pg)),d.offlineComponents}),Rp.apply(this,arguments)}function Cf(d){return Op.apply(this,arguments)}function Op(){return Op=(0,Ce.Z)(function*(d){return d.onlineComponents||(un("FirestoreClient","Using default OnlineComponentProvider"),yield bp(d,new Ep)),d.onlineComponents}),Op.apply(this,arguments)}function Vg(d){return Tp(d).then(e=>e.persistence)}function If(d){return Tp(d).then(e=>e.localStore)}function Mp(d){return Cf(d).then(e=>e.remoteStore)}function Vh(d){return Cf(d).then(e=>e.syncEngine)}function $h(d){return $g.apply(this,arguments)}function $g(){return $g=(0,Ce.Z)(function*(d){const e=yield Cf(d),r=e.eventManager;return r.onListen=Lv.bind(null,e.syncEngine),r.onUnlisten=Bv.bind(null,e.syncEngine),r}),$g.apply(this,arguments)}function _0(d,e,r={}){const f=new Ur;return d.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(_,x,M,z,ae){const pe=new wf({next:It=>{x.enqueueAndForget(()=>cp(_,Ve));const en=It.docs.has(M);!en&&It.fromCache?ae.reject(new vn(nn.UNAVAILABLE,"Failed to get document because the client is offline.")):en&&It.fromCache&&z&&"server"===z.source?ae.reject(new vn(nn.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):ae.resolve(It)},error:It=>ae.reject(It)}),Ve=new uh(Uu(M.path),pe,{includeMetadataChanges:!0,Nu:!0});return ap(_,Ve)}(yield $h(d),d.asyncQueue,e,r,f)})),f.promise}function Wv(d,e,r={}){const f=new Ur;return d.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(_,x,M,z,ae){const pe=new wf({next:It=>{x.enqueueAndForget(()=>cp(_,Ve)),It.fromCache&&"server"===z.source?ae.reject(new vn(nn.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):ae.resolve(It)},error:It=>ae.reject(It)}),Ve=new uh(M,pe,{includeMetadataChanges:!0,Nu:!0});return ap(_,Ve)}(yield $h(d),d.asyncQueue,e,r,f)})),f.promise}class E0{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new cg(this,"async_queue_retry"),this.Wc=()=>{const r=uf();r&&un("AsyncQueue","Visibility state changed to "+r.visibilityState),this.xo.Po()};const e=uf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const r=uf();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const r=new Ur;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Ce.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(r){if(!Bi(r))throw r;un("AsyncQueue","Operation failed with retryable error: "+r)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const r=this.Bc.then(()=>(this.Gc=!0,e().catch(f=>{throw this.Kc=f,this.Gc=!1,kr("INTERNAL UNHANDLED ERROR: ",function(x){let M=x.message||"";return x.stack&&(M=x.stack.includes(x.message)?x.stack:x.message+"\n"+x.stack),M}(f)),f}).then(f=>(this.Gc=!1,f))));return this.Bc=r,r}enqueueAfterDelay(e,r,f){this.zc(),this.jc.indexOf(e)>-1&&(r=0);const _=Nh.createAndSchedule(this,e,r,f,x=>this.Yc(x));return this.Uc.push(_),_}zc(){this.Kc&&Cn()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Ce.Z)(function*(){let r;do{r=e.Bc,yield r}while(r!==e.Bc)})()}Zc(e){for(const r of this.Uc)if(r.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((r,f)=>r.targetTimeMs-f.targetTimeMs);for(const r of this.Uc)if(r.skipDelay(),"all"!==e&&r.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const r=this.Uc.indexOf(e);this.Uc.splice(r,1)}}function zg(d){return function(e,r){if("object"!=typeof e||null===e)return!1;const f=e;for(const _ of["next","error","complete"])if(_ in f&&"function"==typeof f[_])return!0;return!1}(d)}class iu{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ur,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,f){this._progressObserver={next:e,error:r,complete:f}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ua extends jd{constructor(e,r,f,_){super(e,r,f,_),this.type="firestore",this._queue=new E0,this._persistenceKey=(null==_?void 0:_.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Wg(this),this._firestoreClient.terminate()}}function ja(d){return d._firestoreClient||Wg(d),d._firestoreClient.verifyNotTerminated(),d._firestoreClient}function Wg(d){var e;const r=d._freezeSettings(),f=(x=(null===(e=d._app)||void 0===e?void 0:e.options.appId)||"",new Xu(d._databaseId,x,d._persistenceKey,(z=r).host,z.ssl,z.experimentalForceLongPolling,z.experimentalAutoDetectLongPolling,z.useFetchStreams));var x,z;d._firestoreClient=new y0(d._authCredentials,d._appCheckCredentials,d._queue,f)}function I0(d,e,r){const f=new Ur;return d.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield Ug(d,r),yield bp(d,e),f.resolve()}catch(_){const x=_;if(!("FirebaseError"===(M=x).name?M.code===nn.FAILED_PRECONDITION||M.code===nn.UNIMPLEMENTED:!(typeof DOMException<"u"&&M instanceof DOMException)||22===M.code||20===M.code||11===M.code))throw x;Hr("Error enabling offline persistence. Falling back to persistence disabled: "+x),f.reject(x)}var M})).then(()=>f.promise)}function Pl(d){if(d._initialized||d._terminated)throw new vn(nn.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Xl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xl(so.fromBase64String(e))}catch(r){throw new vn(nn.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Xl(so.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ql{constructor(...e){for(let r=0;r<e.length;++r)if(0===e[r].length)throw new vn(nn.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Li(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ou{constructor(e){this._methodName=e}}class xc{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new vn(nn.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new vn(nn.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qr(this._lat,e._lat)||qr(this._long,e._long)}}const S0=/^__.*__$/;class b0{constructor(e,r,f){this.data=e,this.fieldMask=r,this.fieldTransforms=f}toMutation(e,r){return null!==this.fieldMask?new Au(e,this.data,this.fieldMask,r,this.fieldTransforms):new yc(e,this.data,r,this.fieldTransforms)}}class D0{constructor(e,r,f){this.data=e,this.fieldMask=r,this.fieldTransforms=f}toMutation(e,r){return new Au(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function T0(d){switch(d){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Cn()}}class Np{constructor(e,r,f,_,x,M){this.settings=e,this.databaseId=r,this.yt=f,this.ignoreUndefinedProperties=_,void 0===x&&this.na(),this.fieldTransforms=x||[],this.fieldMask=M||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Np(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var r;const f=null===(r=this.path)||void 0===r?void 0:r.child(e),_=this.ia({path:f,oa:!1});return _.ua(e),_}ca(e){var r;const f=null===(r=this.path)||void 0===r?void 0:r.child(e),_=this.ia({path:f,oa:!1});return _.na(),_}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return bf(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(r=>e.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>e.isPrefixOf(r.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(T0(this.sa)&&S0.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class Qv{constructor(e,r,f){this.databaseId=e,this.ignoreUndefinedProperties=r,this.yt=f||cf(e)}da(e,r,f,_=!1){return new Np({sa:e,methodName:r,fa:f,path:Li.emptyPath(),oa:!1,la:_},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Id(d){const e=d._freezeSettings(),r=cf(d._databaseId);return new Qv(d._databaseId,!!e.ignoreUndefinedProperties,r)}function Gd(d,e,r,f,_,x={}){const M=d.da(x.merge||x.mergeFields?2:0,e,r,_);Fp("Data must be an object, but it was:",M,f);const z=Af(f,M);let ae,pe;if(x.merge)ae=new Ia(M.fieldMask),pe=M.fieldTransforms;else if(x.mergeFields){const Ve=[];for(const It of x.mergeFields){const en=Lp(e,It,r);if(!M.contains(en))throw new vn(nn.INVALID_ARGUMENT,`Field '${en}' is specified in your field mask but missing from your input data.`);em(Ve,en)||Ve.push(en)}ae=new Ia(Ve),pe=M.fieldTransforms.filter(It=>ae.covers(It.field))}else ae=null,pe=M.fieldTransforms;return new b0(new ta(z),ae,pe)}class xf extends Ou{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xf}}function qg(d,e,r){return new Np({sa:3,fa:e.settings.fa,methodName:d._methodName,oa:r},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class Zg extends Ou{_toFieldTransform(e){return new vc(e.path,new xu)}isEqual(e){return e instanceof Zg}}class R0 extends Ou{constructor(e,r){super(e),this._a=r}_toFieldTransform(e){const r=qg(this,e,!0),f=this._a.map(x=>xd(x,r)),_=new $u(f);return new vc(e.path,_)}isEqual(e){return this===e}}class O0 extends Ou{constructor(e,r){super(e),this._a=r}_toFieldTransform(e){const r=qg(this,e,!0),f=this._a.map(x=>xd(x,r)),_=new du(f);return new vc(e.path,_)}isEqual(e){return this===e}}class Pp extends Ou{constructor(e,r){super(e),this.wa=r}_toFieldTransform(e){const r=new hu(e.yt,Ul(e.yt,this.wa));return new vc(e.path,r)}isEqual(e){return this===e}}function Xg(d,e,r,f){const _=d.da(1,e,r);Fp("Data must be an object, but it was:",_,f);const x=[],M=ta.empty();to(f,(ae,pe)=>{const Ve=Sf(e,ae,r);pe=(0,st.m9)(pe);const It=_.ca(Ve);if(pe instanceof xf)x.push(Ve);else{const en=xd(pe,It);null!=en&&(x.push(Ve),M.set(Ve,en))}});const z=new Ia(x);return new D0(M,z,_.fieldTransforms)}function kp(d,e,r,f,_,x){const M=d.da(1,e,r),z=[Lp(e,f,r)],ae=[_];if(x.length%2!=0)throw new vn(nn.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let en=0;en<x.length;en+=2)z.push(Lp(e,x[en])),ae.push(x[en+1]);const pe=[],Ve=ta.empty();for(let en=z.length-1;en>=0;--en)if(!em(pe,z[en])){const An=z[en];let Pn=ae[en];Pn=(0,st.m9)(Pn);const xr=M.ca(An);if(Pn instanceof xf)pe.push(An);else{const ei=xd(Pn,xr);null!=ei&&(pe.push(An),Ve.set(An,ei))}}const It=new Ia(pe);return new D0(Ve,It,M.fieldTransforms)}function Qg(d,e,r,f=!1){return xd(r,d.da(f?4:3,e))}function xd(d,e){if(Jg(d=(0,st.m9)(d)))return Fp("Unsupported field value:",e,d),Af(d,e);if(d instanceof Ou)return function(r,f){if(!T0(f.sa))throw f.ha(`${r._methodName}() can only be used with update() and set()`);if(!f.path)throw f.ha(`${r._methodName}() is not currently supported inside arrays`);const _=r._toFieldTransform(f);_&&f.fieldTransforms.push(_)}(d,e),null;if(void 0===d&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),d instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(r,f){const _=[];let x=0;for(const M of r){let z=xd(M,f.aa(x));null==z&&(z={nullValue:"NULL_VALUE"}),_.push(z),x++}return{arrayValue:{values:_}}}(d,e)}return function(r,f){if(null===(r=(0,st.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return Ul(f.yt,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const _=eo.fromDate(r);return{timestampValue:wc(f.yt,_)}}if(r instanceof eo){const _=new eo(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wc(f.yt,_)}}if(r instanceof xc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xl)return{bytesValue:tu(f.yt,r._byteString)};if(r instanceof aa){const _=f.databaseId,x=r.firestore._databaseId;if(!x.isEqual(_))throw f.ha(`Document reference is for database ${x.projectId}/${x.database} but should be for database ${_.projectId}/${_.database}`);return{referenceValue:ao(r.firestore._databaseId||f.databaseId,r._key.path)}}throw f.ha(`Unsupported field value: ${_f(r)}`)}(d,e)}function Af(d,e){const r={};return Qu(d)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):to(d,(f,_)=>{const x=xd(_,e.ra(f));null!=x&&(r[f]=x)}),{mapValue:{fields:r}}}function Jg(d){return!("object"!=typeof d||null===d||d instanceof Array||d instanceof Date||d instanceof eo||d instanceof xc||d instanceof Xl||d instanceof aa||d instanceof Ou)}function Fp(d,e,r){if(!Jg(r)||"object"!=typeof(f=r)||null===f||Object.getPrototypeOf(f)!==Object.prototype&&null!==Object.getPrototypeOf(f)){const f=_f(r);throw e.ha("an object"===f?d+" a custom object":d+" "+f)}var f}function Lp(d,e,r){if((e=(0,st.m9)(e))instanceof Ql)return e._internalPath;if("string"==typeof e)return Sf(d,e);throw bf("Field path arguments must be of type string or ",d,!1,void 0,r)}const M0=new RegExp("[~\\*/\\[\\]]");function Sf(d,e,r){if(e.search(M0)>=0)throw bf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,d,!1,void 0,r);try{return new Ql(...e.split("."))._internalPath}catch(f){throw bf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,d,!1,void 0,r)}}function bf(d,e,r,f,_){const x=f&&!f.isEmpty(),M=void 0!==_;let z=`Function ${e}() called with invalid data`;r&&(z+=" (via `toFirestore()`)"),z+=". ";let ae="";return(x||M)&&(ae+=" (found",x&&(ae+=` in field ${f}`),M&&(ae+=` in document ${_}`),ae+=")"),new vn(nn.INVALID_ARGUMENT,z+d+ae)}function em(d,e){return d.some(r=>r.isEqual(e))}class jh{constructor(e,r,f,_,x){this._firestore=e,this._userDataWriter=r,this._key=f,this._document=_,this._converter=x}get id(){return this._key.path.lastSegment()}get ref(){return new aa(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Jv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Bp("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r)}}}class Jv extends jh{data(){return super.data()}}function Bp(d,e){return"string"==typeof e?Sf(d,e):e instanceof Ql?e._internalPath:e._delegate._internalPath}function N0(d){if("L"===d.limitType&&0===d.explicitOrderBy.length)throw new vn(nn.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tm{}class Df extends tm{}function zd(d,e,...r){let f=[];e instanceof tm&&f.push(e),f=f.concat(r),function(_){const x=_.filter(z=>z instanceof Gh).length,M=_.filter(z=>z instanceof Tf).length;if(x>1||x>0&&M>0)throw new vn(nn.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(f);for(const _ of f)d=_._apply(d);return d}class Tf extends Df{constructor(e,r,f){super(),this._field=e,this._op=r,this._value=f,this.type="where"}static _create(e,r,f){return new Tf(e,r,f)}_apply(e){const r=this._parse(e);return sm(e._query,r),new ru(e.firestore,e.converter,_l(e._query,r))}_parse(e){const r=Id(e.firestore);return function(_,x,M,z,ae,pe,Ve){let It;if(ae.isKeyField()){if("array-contains"===pe||"array-contains-any"===pe)throw new vn(nn.INVALID_ARGUMENT,`Invalid Query. You can't perform '${pe}' queries on documentId().`);if("in"===pe||"not-in"===pe){om(Ve,pe);const en=[];for(const An of Ve)en.push(im(z,_,An));It={arrayValue:{values:en}}}else It=im(z,_,Ve)}else"in"!==pe&&"not-in"!==pe&&"array-contains-any"!==pe||om(Ve,pe),It=Qg(M,"where",Ve,"in"===pe||"not-in"===pe);return nr.create(ae,pe,It)}(e._query,0,r,e.firestore._databaseId,this._field,this._op,this._value)}}class Gh extends tm{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Gh(e,r)}_parse(e){const r=this._queryConstraints.map(f=>f._parse(e)).filter(f=>f.getFilters().length>0);return 1===r.length?r[0]:mi.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return 0===r.getFilters().length?e:(function(f,_){let x=f;const M=_.getFlattenedFilters();for(const z of M)sm(x,z),x=_l(x,z)}(e._query,r),new ru(e.firestore,e.converter,_l(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class nm extends Df{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new nm(e,r)}_apply(e){const r=function(f,_,x){if(null!==f.startAt)throw new vn(nn.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==f.endAt)throw new vn(nn.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const M=new yl(_,x);return function(z,ae){if(null===bs(z)){const pe=Nc(z);null!==pe&&am(0,pe,ae.field)}}(f,M),M}(e._query,this._field,this._direction);return new ru(e.firestore,e.converter,function(f,_){const x=f.explicitOrderBy.concat([_]);return new Bu(f.path,f.collectionGroup,x,f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(e._query,r))}}class Up extends Df{constructor(e,r,f){super(),this.type=e,this._limit=r,this._limitType=f}static _create(e,r,f){return new Up(e,r,f)}_apply(e){return new ru(e.firestore,e.converter,na(e._query,this._limit,this._limitType))}}class Vp extends Df{constructor(e,r,f){super(),this.type=e,this._docOrFields=r,this._inclusive=f}static _create(e,r,f){return new Vp(e,r,f)}_apply(e){const r=rm(e,this.type,this._docOrFields,this._inclusive);return new ru(e.firestore,e.converter,(_=r,new Bu((f=e._query).path,f.collectionGroup,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,_,f.endAt)));var f,_}}class Rf extends Df{constructor(e,r,f){super(),this.type=e,this._docOrFields=r,this._inclusive=f}static _create(e,r,f){return new Rf(e,r,f)}_apply(e){const r=rm(e,this.type,this._docOrFields,this._inclusive);return new ru(e.firestore,e.converter,(_=r,new Bu((f=e._query).path,f.collectionGroup,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,_)));var f,_}}function rm(d,e,r,f){if(r[0]=(0,st.m9)(r[0]),r[0]instanceof jh)return function(_,x,M,z,ae){if(!z)throw new vn(nn.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${M}().`);const pe=[];for(const Ve of Iu(_))if(Ve.field.isKeyField())pe.push(Tt(x,z.key));else{const It=z.data.field(Ve.field);if(cc(It))throw new vn(nn.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Ve.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===It){const en=Ve.field.canonicalString();throw new vn(nn.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${en}' (used as the orderBy) does not exist.`)}pe.push(It)}return new _r(pe,ae)}(d._query,d.firestore._databaseId,e,r[0]._document,f);{const _=Id(d.firestore);return function(x,M,z,ae,pe,Ve){const It=x.explicitOrderBy;if(pe.length>It.length)throw new vn(nn.INVALID_ARGUMENT,`Too many arguments provided to ${ae}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const en=[];for(let An=0;An<pe.length;An++){const Pn=pe[An];if(It[An].field.isKeyField()){if("string"!=typeof Pn)throw new vn(nn.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${ae}(), but got a ${typeof Pn}`);if(!La(x)&&-1!==Pn.indexOf("/"))throw new vn(nn.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${ae}() must be a plain document ID, but '${Pn}' contains a slash.`);const xr=x.path.child(Ri.fromString(Pn));if(!Yn.isDocumentKey(xr))throw new vn(nn.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${ae}() must result in a valid document path, but '${xr}' is not because it contains an odd number of segments.`);const ei=new Yn(xr);en.push(Tt(M,ei))}else{const xr=Qg(z,ae,Pn);en.push(xr)}}return new _r(en,Ve)}(d._query,d.firestore._databaseId,_,e,r,f)}}function im(d,e,r){if("string"==typeof(r=(0,st.m9)(r))){if(""===r)throw new vn(nn.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!La(e)&&-1!==r.indexOf("/"))throw new vn(nn.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const f=e.path.child(Ri.fromString(r));if(!Yn.isDocumentKey(f))throw new vn(nn.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${f}' is not because it has an odd number of segments (${f.length}).`);return Tt(d,new Yn(f))}if(r instanceof aa)return Tt(d,r._key);throw new vn(nn.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_f(r)}.`)}function om(d,e){if(!Array.isArray(d)||0===d.length)throw new vn(nn.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(d.length>10)throw new vn(nn.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function sm(d,e){if(e.isInequality()){const f=Nc(d),_=e.field;if(null!==f&&!f.isEqual(_))throw new vn(nn.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${f.toString()}' and '${_.toString()}'`);const x=bs(d);null!==x&&am(0,_,x)}const r=function(f,_){for(const x of f)for(const M of x.getFlattenedFilters())if(_.indexOf(M.op)>=0)return M.op;return null}(d.filters,function(f){switch(f){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==r)throw new vn(nn.INVALID_ARGUMENT,r===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function am(d,e,r){if(!r.isEqual(e))throw new vn(nn.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class $p{convertValue(e,r="none"){switch(F(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ro(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Ju(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw Cn()}}convertObject(e,r){const f={};return to(e.fields,(_,x)=>{f[_]=this.convertValue(x,r)}),f}convertGeoPoint(e){return new xc(Ro(e.latitude),Ro(e.longitude))}convertArray(e,r){return(e.values||[]).map(f=>this.convertValue(f,r))}convertServerTimestamp(e,r){switch(r){case"previous":const f=fl(e);return null==f?null:this.convertValue(f,r);case"estimate":return this.convertTimestamp(Oo(e));default:return null}}convertTimestamp(e){const r=Fs(e);return new eo(r.seconds,r.nanos)}convertDocumentKey(e,r){const f=Ri.fromString(e);Xn(Gl(f));const _=new Na(f.get(1),f.get(3)),x=new Yn(f.popFirst(5));return _.isEqual(r)||kr(`Document ${x} contains a document reference within a different database (${_.projectId}/${_.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),x}}function Jl(d,e,r){let f;return f=d?r&&(r.merge||r.mergeFields)?d.toFirestore(e,r):d.toFirestore(e):e,f}class oy extends $p{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xl(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new aa(this.firestore,null,r)}}class hh{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ac extends jh{constructor(e,r,f,_,x,M){super(e,r,f,_,M),this._firestore=e,this._firestoreImpl=e,this.metadata=x}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Hp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const f=this._document.data.field(Bp("DocumentSnapshot.get",e));if(null!==f)return this._userDataWriter.convertValue(f,r.serverTimestamps)}}}class Hp extends Ac{data(e={}){return super.data(e)}}class ed{constructor(e,r,f,_){this._firestore=e,this._userDataWriter=r,this._snapshot=_,this.metadata=new hh(_.hasPendingWrites,_.fromCache),this.query=f}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,r){this._snapshot.docs.forEach(f=>{e.call(r,new Hp(this._firestore,this._userDataWriter,f.key,f,new hh(this._snapshot.mutatedKeys.has(f.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new vn(nn.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(f,_){if(f._snapshot.oldDocs.isEmpty()){let x=0;return f._snapshot.docChanges.map(M=>({type:"added",doc:new Hp(f._firestore,f._userDataWriter,M.doc.key,M.doc,new hh(f._snapshot.mutatedKeys.has(M.doc.key),f._snapshot.fromCache),f.query.converter),oldIndex:-1,newIndex:x++}))}{let x=f._snapshot.oldDocs;return f._snapshot.docChanges.filter(M=>_||3!==M.type).map(M=>{const z=new Hp(f._firestore,f._userDataWriter,M.doc.key,M.doc,new hh(f._snapshot.mutatedKeys.has(M.doc.key),f._snapshot.fromCache),f.query.converter);let ae=-1,pe=-1;return 0!==M.type&&(ae=x.indexOf(M.doc.key),x=x.delete(M.doc.key)),1!==M.type&&(x=x.add(M.doc),pe=x.indexOf(M.doc.key)),{type:f1(M.type),doc:z,oldIndex:ae,newIndex:pe}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function f1(d){switch(d){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Cn()}}function cm(d,e){return d instanceof Ac&&e instanceof Ac?d._firestore===e._firestore&&d._key.isEqual(e._key)&&(null===d._document?null===e._document:d._document.isEqual(e._document))&&d._converter===e._converter:d instanceof ed&&e instanceof ed&&d._firestore===e._firestore&&xp(d.query,e.query)&&d.metadata.isEqual(e.metadata)&&d._snapshot.isEqual(e._snapshot)}class fh extends $p{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xl(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new aa(this.firestore,null,r)}}function B0(d,e,r){d=_o(d,aa);const f=_o(d.firestore,ua),_=Jl(d.converter,e,r);return ph(f,[Gd(Id(f),"setDoc",d._key,_,null!==d.converter,r).toMutation(d._key,Io.none())])}function Of(d,e,r,...f){d=_o(d,aa);const _=_o(d.firestore,ua),x=Id(_);let M;return M="string"==typeof(e=(0,st.m9)(e))||e instanceof Ql?kp(x,"updateDoc",d._key,e,r,f):Xg(x,"updateDoc",d._key,e),ph(_,[M.toMutation(d._key,Io.exists(!0))])}function cy(d,...e){var r,f,_;d=(0,st.m9)(d);let x={includeMetadataChanges:!1},M=0;"object"!=typeof e[M]||zg(e[M])||(x=e[M],M++);const z={includeMetadataChanges:x.includeMetadataChanges};if(zg(e[M])){const It=e[M];e[M]=null===(r=It.next)||void 0===r?void 0:r.bind(It),e[M+1]=null===(f=It.error)||void 0===f?void 0:f.bind(It),e[M+2]=null===(_=It.complete)||void 0===_?void 0:_.bind(It)}let ae,pe,Ve;if(d instanceof aa)pe=_o(d.firestore,ua),Ve=Uu(d._key.path),ae={next:It=>{e[M]&&e[M](lm(pe,d,It))},error:e[M+1],complete:e[M+2]};else{const It=_o(d,ru);pe=_o(It.firestore,ua),Ve=It._query;const en=new fh(pe);ae={next:An=>{e[M]&&e[M](new ed(pe,en,It,An))},error:e[M+1],complete:e[M+2]},N0(d._query)}return function(It,en,An,Pn){const xr=new wf(Pn),ei=new uh(en,xr,An);return It.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return ap(yield $h(It),ei)})),()=>{xr.bc(),It.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return cp(yield $h(It),ei)}))}}(ja(pe),Ve,z,ae)}function ph(d,e){return function(r,f){const _=new Ur;return r.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function Sg(d,e,r){return bg.apply(this,arguments)}(yield Vh(r),f,_)})),_.promise}(ja(d),e)}function lm(d,e,r){const f=r.docs.get(e._key),_=new fh(d);return new Ac(d,_,e._key,f,new hh(r.hasPendingWrites,r.fromCache),e.converter)}const V0={maxAttempts:5};class dm{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Id(e)}set(e,r,f){this._verifyNotCommitted();const _=Wd(e,this._firestore),x=Jl(_.converter,r,f),M=Gd(this._dataReader,"WriteBatch.set",_._key,x,null!==_.converter,f);return this._mutations.push(M.toMutation(_._key,Io.none())),this}update(e,r,f,..._){this._verifyNotCommitted();const x=Wd(e,this._firestore);let M;return M="string"==typeof(r=(0,st.m9)(r))||r instanceof Ql?kp(this._dataReader,"WriteBatch.update",x._key,r,f,_):Xg(this._dataReader,"WriteBatch.update",x._key,r),this._mutations.push(M.toMutation(x._key,Io.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Wd(e,this._firestore);return this._mutations=this._mutations.concat(new Uc(r._key,Io.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new vn(nn.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wd(d,e){if((d=(0,st.m9)(d)).firestore!==e)throw new vn(nn.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return d}class hy extends class{constructor(e,r){this._firestore=e,this._transaction=r,this._dataReader=Id(e)}get(e){const r=Wd(e,this._firestore),f=new oy(this._firestore);return this._transaction.lookup([r._key]).then(_=>{if(!_||1!==_.length)return Cn();const x=_[0];if(x.isFoundDocument())return new jh(this._firestore,f,x.key,x,r.converter);if(x.isNoDocument())return new jh(this._firestore,f,r._key,null,r.converter);throw Cn()})}set(e,r,f){const _=Wd(e,this._firestore),x=Jl(_.converter,r,f),M=Gd(this._dataReader,"Transaction.set",_._key,x,null!==_.converter,f);return this._transaction.set(_._key,M),this}update(e,r,f,..._){const x=Wd(e,this._firestore);let M;return M="string"==typeof(r=(0,st.m9)(r))||r instanceof Ql?kp(this._dataReader,"Transaction.update",x._key,r,f,_):Xg(this._dataReader,"Transaction.update",x._key,r),this._transaction.update(x._key,M),this}delete(e){const r=Wd(e,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Wd(e,this._firestore),f=new fh(this._firestore);return super.get(e).then(_=>new Ac(this._firestore,f,r._key,_._document,new hh(!1,!1),r.converter))}}!function(d,e=!0){Wt=ct.SDK_VERSION,(0,ct._registerComponent)(new At.wA("firestore",(r,{instanceIdentifier:f,options:_})=>{const x=r.getProvider("app").getImmediate(),M=new ua(new qu(r.getProvider("auth-internal")),new ac(r.getProvider("app-check-internal")),function(z,ae){if(!Object.prototype.hasOwnProperty.apply(z.options,["projectId"]))throw new vn(nn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Na(z.options.projectId,ae)}(x,f),x);return _=Object.assign({useFetchStreams:e},_),M._setSettings(_),M},"PUBLIC").setMultipleInstances(!0)),(0,ct.registerVersion)(Ie,"3.8.3",d),(0,ct.registerVersion)(Ie,"3.8.3","esm2017")}();function gh(d,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new vn("invalid-argument",`Invalid options passed to function ${d}(): You cannot specify both "merge" and "mergeFields".`);return e}function $0(){if(typeof Uint8Array>"u")throw new vn("unimplemented","Uint8Arrays are not available in this environment.")}function H0(){if(!function Pa(){return typeof atob<"u"}())throw new vn("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Pf{constructor(e){this._delegate=e}static fromBase64String(e){return H0(),new Pf(Xl.fromBase64String(e))}static fromUint8Array(e){return $0(),new Pf(Xl.fromUint8Array(e))}toBase64(){return H0(),this._delegate.toBase64()}toUint8Array(){return $0(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function zp(d){return function j0(d,e){if("object"!=typeof d||null===d)return!1;const r=d;for(const f of e)if(f in r&&"function"==typeof r[f])return!0;return!1}(d,["next","error","complete"])}class G0{enableIndexedDbPersistence(e,r){return function C0(d,e){Pl(d=_o(d,ua));const r=ja(d),f=d._freezeSettings(),_=new Ep;return I0(r,_,new kg(_,f.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(e){return function Hh(d){Pl(d=_o(d,ua));const e=ja(d),r=d._freezeSettings(),f=new Ep;return I0(e,f,new l0(f,r.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Zv(d){if(d._initialized&&!d._terminated)throw new vn(nn.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ur;return d._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(r=(0,Ce.Z)(function*(f){if(!zo.C())return Promise.resolve();const _=f+"main";yield zo.delete(_)}),function(f){return r.apply(this,arguments)})(tg(d._databaseId,d._persistenceKey)),e.resolve()}catch(r){e.reject(r)}var r})),e.promise}(e._delegate)}}class z0{constructor(e,r,f){this._delegate=r,this._persistenceProvider=f,this.INTERNAL={delete:()=>this.terminate()},e instanceof Na||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const r=this._delegate._getSettings();!e.merge&&r.host!==e.host&&Hr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},r),e)).merge,this._delegate._setSettings(e)}useEmulator(e,r,f={}){!function Cp(d,e,r,f={}){var _;const x=(d=_o(d,jd))._getSettings();if("firestore.googleapis.com"!==x.host&&x.host!==e&&Hr("Host has been set in both settings() and useEmulator(), emulator host will be used"),d._setSettings(Object.assign(Object.assign({},x),{host:`${e}:${r}`,ssl:!1})),f.mockUserToken){let M,z;if("string"==typeof f.mockUserToken)M=f.mockUserToken,z=et.MOCK_USER;else{M=(0,st.Sg)(f.mockUserToken,null===(_=d._app)||void 0===_?void 0:_.options.projectId);const ae=f.mockUserToken.sub||f.mockUserToken.user_id;if(!ae)throw new vn(nn.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");z=new et(ae)}d._authCredentials=new Va(new bi(M,z))}}(this._delegate,e,r,f)}enableNetwork(){return function Xv(d){return function Hg(d){return d.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield Vg(d),r=yield Mp(d);return e.setNetworkEnabled(!0),function(f){const _=Fn(f);return _._u.delete(0),oh(_)}(r)}))}(ja(d=_o(d,ua)))}(this._delegate)}disableNetwork(){return function A0(d){return function dh(d){return d.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield Vg(d),r=yield Mp(d);return e.setNetworkEnabled(!1),(f=(0,Ce.Z)(function*(_){const x=Fn(_);x._u.add(0),yield sh(x),x.gu.set("Offline")}),function(_){return f.apply(this,arguments)})(r);var f}))}(ja(d=_o(d,ua)))}(this._delegate)}enablePersistence(e){let r=!1,f=!1;return e&&(r=!!e.synchronizeTabs,f=!!e.experimentalForceOwningTab,d0("synchronizeTabs",r,"experimentalForceOwningTab",f)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,f)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function x0(d){return function(e){const r=new Ur;return e.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function o0(d,e){return Og.apply(this,arguments)}(yield Vh(e),r)})),r.promise}(ja(d=_o(d,ua)))}(this._delegate)}onSnapshotsInSync(e){return function U0(d,e){return function c1(d,e){const r=new wf(e);return d.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return f=yield $h(d),_=r,Fn(f).Ru.add(_),void _.next();var f,_})),()=>{r.bc(),d.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return f=yield $h(d),_=r,void Fn(f).Ru.delete(_);var f,_}))}}(ja(d=_o(d,ua)),zg(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new vn("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Yh(this,Ip(this._delegate,e))}catch(r){throw Sc(r,"collection()","Firestore.collection()")}}doc(e){try{return new kl(this,Uh(this._delegate,e))}catch(r){throw Sc(r,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ku(this,function p0(d,e){if(d=_o(d,jd),Fg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new vn(nn.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ru(d,null,(r=e,new Bu(Ri.emptyPath(),r)));var r}(this._delegate,e))}catch(r){throw Sc(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function fy(d,e,r){d=_o(d,ua);const f=Object.assign(Object.assign({},V0),r);return function(_){if(_.maxAttempts<1)throw new vn(nn.INVALID_ARGUMENT,"Max attempts must be at least 1")}(f),function(_,x,M){const z=new Ur;return _.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const ae=yield function wd(d){return Cf(d).then(e=>e.datastore)}(_);new zv(_.asyncQueue,ae,M,x,z).run()})),z.promise}(ja(d),_=>e(new hy(d,_)),f)}(this._delegate,r=>e(new W0(this,r)))}batch(){return ja(this._delegate),new wy(new dm(this._delegate,e=>ph(this._delegate,e)))}loadBundle(e){return function Yg(d,e){const r=ja(d=_o(d,ua)),f=new iu;return function Yv(d,e,r,f){const _=function(x,M){let z;return z="string"==typeof x?(new TextEncoder).encode(x):x,ae=function(ae,pe){if(ae instanceof Uint8Array)return Ap(ae,void 0);if(ae instanceof ArrayBuffer)return Ap(new Uint8Array(ae),void 0);if(ae instanceof ReadableStream)return ae.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(z),new jv(ae,M);var ae}(r,cf(e));d.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function c0(d,e,r){const f=Fn(d);var _;(_=(0,Ce.Z)(function*(x,M,z){try{const ae=yield M.getMetadata();if(yield function(en,An){const Pn=Fn(en),xr=$o(An.createTime);return Pn.persistence.runTransaction("hasNewerBundle","readonly",ei=>Pn.Ns.getBundleMetadata(ei,An.id)).then(ei=>!!ei&&ei.createTime.compareTo(xr)>=0)}(x.localStore,ae))return yield M.close(),z._completeWith({taskState:"Success",documentsLoaded:(en=ae).totalDocuments,bytesLoaded:en.totalBytes,totalDocuments:en.totalDocuments,totalBytes:en.totalBytes}),Promise.resolve(new Set);z._updateProgress(e0(ae));const pe=new Jm(ae,x.localStore,M.yt);let Ve=yield M.mc();for(;Ve;){const en=yield pe.Fu(Ve);en&&z._updateProgress(en),Ve=yield M.mc()}const It=yield pe.complete();return yield _d(x,It.Lu,void 0),yield function(en,An){const Pn=Fn(en);return Pn.persistence.runTransaction("Save bundle","readwrite",xr=>Pn.Ns.saveBundleMetadata(xr,An))}(x.localStore,ae),z._completeWith(It.progress),Promise.resolve(It.Bu)}catch(ae){return Hr("SyncEngine",`Loading bundle failed with ${ae}`),z._failWith(ae),Promise.resolve(new Set)}var en}),function(x,M,z){return _.apply(this,arguments)})(f,e,r).then(_=>{f.sharedClientState.notifyBundleLoaded(_)})}(yield Vh(d),_,f)}))}(r,d._databaseId,e,f),f}(this._delegate,e)}namedQuery(e){return function Kg(d,e){return function Kv(d,e){return d.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(r,f){const _=Fn(r);return _.persistence.runTransaction("Get named query","readonly",x=>_.Ns.getNamedQuery(x,f))}(yield If(d),e)}))}(ja(d=_o(d,ua)),e).then(r=>r?new ru(d,null,r.query):null)}(this._delegate,e).then(r=>r?new Ku(this,r):null)}}class kf extends $p{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pf(new Xl(e))}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return kl.forKey(r,this.firestore,null)}}class W0{constructor(e,r){this._firestore=e,this._delegate=r,this._userDataWriter=new kf(e)}get(e){const r=mh(e);return this._delegate.get(r).then(f=>new Lf(this._firestore,new Ac(this._firestore._delegate,this._userDataWriter,f._key,f._document,f.metadata,r.converter)))}set(e,r,f){const _=mh(e);return f?(gh("Transaction.set",f),this._delegate.set(_,r,f)):this._delegate.set(_,r),this}update(e,r,f,..._){const x=mh(e);return 2===arguments.length?this._delegate.update(x,r):this._delegate.update(x,r,f,..._),this}delete(e){const r=mh(e);return this._delegate.delete(r),this}}class wy{constructor(e){this._delegate=e}set(e,r,f){const _=mh(e);return f?(gh("WriteBatch.set",f),this._delegate.set(_,r,f)):this._delegate.set(_,r),this}update(e,r,f,..._){const x=mh(e);return 2===arguments.length?this._delegate.update(x,r):this._delegate.update(x,r,f,..._),this}delete(e){const r=mh(e);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class Wh{constructor(e,r,f){this._firestore=e,this._userDataWriter=r,this._delegate=f}fromFirestore(e,r){const f=new Hp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Bf(this._firestore,f),null!=r?r:{})}toFirestore(e,r){return r?this._delegate.toFirestore(e,r):this._delegate.toFirestore(e)}static getInstance(e,r){const f=Wh.INSTANCES;let _=f.get(e);_||(_=new WeakMap,f.set(e,_));let x=_.get(r);return x||(x=new Wh(e,new kf(e),r),_.set(r,x)),x}}Wh.INSTANCES=new WeakMap;class kl{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new kf(e)}static forPath(e,r,f){if(e.length%2!=0)throw new vn("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new kl(r,new aa(r._delegate,f,new Yn(e)))}static forKey(e,r,f){return new kl(r,new aa(r._delegate,f,e))}get id(){return this._delegate.id}get parent(){return new Yh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Yh(this.firestore,Ip(this._delegate,e))}catch(r){throw Sc(r,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,st.m9)(e))instanceof aa&&Bg(this._delegate,e)}set(e,r){r=gh("DocumentReference.set",r);try{return r?B0(this._delegate,e,r):B0(this._delegate,e)}catch(f){throw Sc(f,"setDoc()","DocumentReference.set()")}}update(e,r,...f){try{return 1===arguments.length?Of(this._delegate,e):Of(this._delegate,e,r,...f)}catch(_){throw Sc(_,"updateDoc()","DocumentReference.update()")}}delete(){return function jp(d){return ph(_o(d.firestore,ua),[new Uc(d._key,Io.none())])}(this._delegate)}onSnapshot(...e){const r=fm(e),f=Ff(e,_=>new Lf(this.firestore,new Ac(this.firestore._delegate,this._userDataWriter,_._key,_._document,_.metadata,this._delegate.converter)));return cy(this._delegate,r,f)}get(e){let r;return r="cache"===(null==e?void 0:e.source)?function yi(d){d=_o(d,aa);const e=_o(d.firestore,ua),r=ja(e),f=new fh(e);return function jg(d,e){const r=new Ur;return d.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(f=(0,Ce.Z)(function*(_,x,M){try{const z=yield function(ae,pe){const Ve=Fn(ae);return Ve.persistence.runTransaction("read document","readonly",It=>Ve.localDocuments.getDocument(It,pe))}(_,x);z.isFoundDocument()?M.resolve(z):z.isNoDocument()?M.resolve(null):M.reject(new vn(nn.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(z){const ae=Fd(z,`Failed to get document '${x} from cache`);M.reject(ae)}}),function(_,x,M){return f.apply(this,arguments)})(yield If(d),e,r);var f})),r.promise}(r,d._key).then(_=>new Ac(e,f,d._key,_,new hh(null!==_&&_.hasLocalMutations,!0),d.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function sy(d){d=_o(d,aa);const e=_o(d.firestore,ua);return _0(ja(e),d._key,{source:"server"}).then(r=>lm(e,d,r))}(this._delegate):function L0(d){d=_o(d,aa);const e=_o(d.firestore,ua);return _0(ja(e),d._key).then(r=>lm(e,d,r))}(this._delegate),r.then(f=>new Lf(this.firestore,new Ac(this.firestore._delegate,this._userDataWriter,f._key,f._document,f.metadata,this._delegate.converter)))}withConverter(e){return new kl(this.firestore,this._delegate.withConverter(e?Wh.getInstance(this.firestore,e):null))}}function Sc(d,e,r){return d.message=d.message.replace(e,r),d}function fm(d){for(const e of d)if("object"==typeof e&&!zp(e))return e;return{}}function Ff(d,e){var r,f;let _;return _=zp(d[0])?d[0]:zp(d[1])?d[1]:"function"==typeof d[0]?{next:d[0],error:d[1],complete:d[2]}:{next:d[1],error:d[2],complete:d[3]},{next:x=>{_.next&&_.next(e(x))},error:null===(r=_.error)||void 0===r?void 0:r.bind(_),complete:null===(f=_.complete)||void 0===f?void 0:f.bind(_)}}class Lf{constructor(e,r){this._firestore=e,this._delegate=r}get ref(){return new kl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,r){return this._delegate.get(e,r)}isEqual(e){return cm(this._delegate,e._delegate)}}class Bf extends Lf{data(e){const r=this._delegate.data(e);return function As(d,e){d||Cn()}(void 0!==r),r}}class Ku{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new kf(e)}where(e,r,f){try{return new Ku(this.firestore,zd(this._delegate,function ey(d,e,r){const f=e,_=Bp("where",d);return Tf._create(_,f,r)}(e,r,f)))}catch(_){throw Sc(_,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,r){try{return new Ku(this.firestore,zd(this._delegate,function ty(d,e="asc"){const r=e,f=Bp("orderBy",d);return nm._create(f,r)}(e,r)))}catch(f){throw Sc(f,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ku(this.firestore,zd(this._delegate,function ny(d){return wp("limit",d),Up._create("limit",d,"F")}(e)))}catch(r){throw Sc(r,"limit()","Query.limit()")}}limitToLast(e){try{return new Ku(this.firestore,zd(this._delegate,function ry(d){return wp("limitToLast",d),Up._create("limitToLast",d,"L")}(e)))}catch(r){throw Sc(r,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ku(this.firestore,zd(this._delegate,function iy(...d){return Vp._create("startAt",d,!0)}(...e)))}catch(r){throw Sc(r,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ku(this.firestore,zd(this._delegate,function P0(...d){return Vp._create("startAfter",d,!1)}(...e)))}catch(r){throw Sc(r,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ku(this.firestore,zd(this._delegate,function k0(...d){return Rf._create("endBefore",d,!1)}(...e)))}catch(r){throw Sc(r,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ku(this.firestore,zd(this._delegate,function F0(...d){return Rf._create("endAt",d,!0)}(...e)))}catch(r){throw Sc(r,"endAt()","Query.endAt()")}}isEqual(e){return xp(this._delegate,e._delegate)}get(e){let r;return r="cache"===(null==e?void 0:e.source)?function uy(d){d=_o(d,ru);const e=_o(d.firestore,ua),r=ja(e),f=new fh(e);return function Gg(d,e){const r=new Ur;return d.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(f=(0,Ce.Z)(function*(_,x,M){try{const z=yield Yf(_,x,!0),ae=new n0(x,z.Hi),pe=ae.Wu(z.documents),Ve=ae.applyChanges(pe,!1);M.resolve(Ve.snapshot)}catch(z){const ae=Fd(z,`Failed to execute query '${x} against cache`);M.reject(ae)}}),function(_,x,M){return f.apply(this,arguments)})(yield If(d),e,r);var f})),r.promise}(r,d._query).then(_=>new ed(e,f,d,_))}(this._delegate):"server"===(null==e?void 0:e.source)?function zh(d){d=_o(d,ru);const e=_o(d.firestore,ua),r=ja(e),f=new fh(e);return Wv(r,d._query,{source:"server"}).then(_=>new ed(e,f,d,_))}(this._delegate):function ay(d){d=_o(d,ru);const e=_o(d.firestore,ua),r=ja(e),f=new fh(e);return N0(d._query),Wv(r,d._query).then(_=>new ed(e,f,d,_))}(this._delegate),r.then(f=>new pm(this.firestore,new ed(this.firestore._delegate,this._userDataWriter,this._delegate,f._snapshot)))}onSnapshot(...e){const r=fm(e),f=Ff(e,_=>new pm(this.firestore,new ed(this.firestore._delegate,this._userDataWriter,this._delegate,_._snapshot)));return cy(this._delegate,r,f)}withConverter(e){return new Ku(this.firestore,this._delegate.withConverter(e?Wh.getInstance(this.firestore,e):null))}}class Uf{constructor(e,r){this._firestore=e,this._delegate=r}get type(){return this._delegate.type}get doc(){return new Bf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class pm{constructor(e,r){this._firestore=e,this._delegate=r}get query(){return new Ku(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Bf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(r=>new Uf(this._firestore,r))}forEach(e,r){this._delegate.forEach(f=>{e.call(r,new Bf(this._firestore,f))})}isEqual(e){return cm(this._delegate,e._delegate)}}class Yh extends Ku{constructor(e,r){super(e,r),this.firestore=e,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new kl(this.firestore,e):null}doc(e){try{return new kl(this.firestore,void 0===e?Uh(this._delegate):Uh(this._delegate,e))}catch(r){throw Sc(r,"doc()","CollectionReference.doc()")}}add(e){return function Ba(d,e){const r=_o(d.firestore,ua),f=Uh(d),_=Jl(d.converter,e);return ph(r,[Gd(Id(d.firestore),"addDoc",f._key,_,null!==d.converter,{}).toMutation(f._key,Io.exists(!1))]).then(()=>f)}(this._delegate,e).then(r=>new kl(this.firestore,r))}isEqual(e){return Bg(this._delegate,e._delegate)}withConverter(e){return new Yh(this.firestore,this._delegate.withConverter(e?Wh.getInstance(this.firestore,e):null))}}function mh(d){return _o(d,aa)}class gm{constructor(...e){this._delegate=new Ql(...e)}static documentId(){return new gm(Li.keyField().canonicalString())}isEqual(e){return(e=(0,st.m9)(e))instanceof Ql&&this._delegate._internalPath.isEqual(e._internalPath)}}class Kh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function py(){return new Zg("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Kh(e)}static delete(){const e=function Mf(){return new xf("deleteField")}();return e._methodName="FieldValue.delete",new Kh(e)}static arrayUnion(...e){const r=function gy(...d){return new R0("arrayUnion",d)}(...e);return r._methodName="FieldValue.arrayUnion",new Kh(r)}static arrayRemove(...e){const r=function my(...d){return new O0("arrayRemove",d)}(...e);return r._methodName="FieldValue.arrayRemove",new Kh(r)}static increment(e){const r=function Gp(d){return new Pp("increment",d)}(e);return r._methodName="FieldValue.increment",new Kh(r)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Cy={Firestore:z0,GeoPoint:xc,Timestamp:eo,Blob:Pf,Transaction:W0,WriteBatch:wy,DocumentReference:kl,DocumentSnapshot:Lf,Query:Ku,QueryDocumentSnapshot:Bf,QuerySnapshot:pm,CollectionReference:Yh,FieldPath:gm,FieldValue:Kh,setLogLevel:function Ey(d){!function gi(d){hn.setLogLevel(d)}(d)},CACHE_SIZE_UNLIMITED:-1};!function Iy(d){(function Y0(d,e){d.INTERNAL.registerComponent(new At.wA("firestore-compat",r=>{const f=r.getProvider("app-compat").getImmediate(),_=r.getProvider("firestore").getImmediate();return e(f,_)},"PUBLIC").setServiceProps(Object.assign({},Cy)))})(d,(e,r)=>new z0(e,r,new G0)),d.registerVersion("@firebase/firestore-compat","0.3.3")}(Fe.Z);var Yd=U(1205),Vf=U(6217),xy=U(9260);function q0(d,e){return function K0(d,e=J.z){return new H.y(r=>{let f;return null!=e?e.schedule(()=>{f=d.onSnapshot({includeMetadataChanges:!0},r)}):f=d.onSnapshot({includeMetadataChanges:!0},r),()=>{null!=f&&f()}})}(d,e)}function mm(d,e){return q0(d,e).pipe((0,De.U)(r=>({payload:r,type:"query"})))}function $f(d,e){return mm(d,e).pipe((0,ye.O)(void 0),ge(),(0,De.U)(([r,f])=>{const _=f.payload.docChanges(),x=_.map(M=>({type:M.type,payload:M}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(f.payload.metadata)&&f.payload.docs.forEach((M,z)=>{const ae=_.find(Ve=>Ve.doc.ref.isEqual(M.ref)),pe=null==r?void 0:r.payload.docs.find(Ve=>Ve.ref.isEqual(M.ref));ae&&JSON.stringify(ae.doc.metadata)===JSON.stringify(M.metadata)||!ae&&pe&&JSON.stringify(pe.metadata)===JSON.stringify(M.metadata)||x.push({type:"modified",payload:{oldIndex:z,newIndex:z,type:"modified",doc:M}})}),x}))}function X0(d,e,r){return $f(d,r).pipe((0,xe.R)((f,_)=>function vm(d,e,r){return e.forEach(f=>{r.indexOf(f.type)>-1&&(d=function Q0(d,e){switch(e.type){case"added":if(!d[e.newIndex]||!d[e.newIndex].doc.ref.isEqual(e.doc.ref))return ym(d,e.newIndex,0,e);break;case"modified":if(null==d[e.oldIndex]||d[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const r=d.slice();return r.splice(e.oldIndex,1),r.splice(e.newIndex,0,e),r}return ym(d,e.newIndex,1,e)}break;case"removed":if(d[e.oldIndex]&&d[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ym(d,e.oldIndex,1)}return d}(d,f))}),d}(f,_.map(x=>x.payload),e),[]),(0,Ne.x)(),(0,De.U)(f=>f.map(_=>({type:_.type,payload:_}))))}function ym(d,e,r,...f){const _=d.slice();return _.splice(e,r,...f),_}function _m(d){return(!d||0===d.length)&&(d=["added","removed","modified"]),d}class J0{constructor(e,r,f){this.ref=e,this.query=r,this.afs=f}stateChanges(e){let r=$f(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(r=r.pipe((0,De.U)(f=>f.filter(_=>e.indexOf(_.type)>-1)))),r.pipe((0,ye.O)(void 0),ge(),(0,Xe.h)(([f,_])=>_.length>0||!f),(0,De.U)(([f,_])=>_),we.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,xe.R)((r,f)=>[...r,...f],[]))}snapshotChanges(e){const r=_m(e);return X0(this.query,r,this.afs.schedulers.outsideAngular).pipe(we.iC)}valueChanges(e={}){return mm(this.query,this.afs.schedulers.outsideAngular).pipe((0,De.U)(r=>r.payload.docs.map(f=>e.idField?Object.assign(Object.assign({},f.data()),{[e.idField]:f.id}):f.data())),we.iC)}get(e){return(0,he.D)(this.query.get(e)).pipe(we.iC)}add(e){return this.ref.add(e)}doc(e){return new ev(this.ref.doc(e),this.afs)}}class ev{constructor(e,r){this.ref=e,this.afs=r}set(e,r){return this.ref.set(e,r)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,r){const f=this.ref.collection(e),{ref:_,query:x}=rv(f,r);return new J0(_,x,this.afs)}snapshotChanges(){return function Z0(d,e){return q0(d,e).pipe((0,ye.O)(void 0),ge(),(0,De.U)(([r,f])=>f.exists?null!=r&&r.exists?{payload:f,type:"modified"}:{payload:f,type:"added"}:{payload:f,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(we.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,De.U)(({payload:r})=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data()))}get(e){return(0,he.D)(this.ref.get(e)).pipe(we.iC)}}class Ay{constructor(e,r){this.query=e,this.afs=r}stateChanges(e){return e&&0!==e.length?$f(this.query,this.afs.schedulers.outsideAngular).pipe((0,De.U)(r=>r.filter(f=>e.indexOf(f.type)>-1)),(0,Xe.h)(r=>r.length>0),we.iC):$f(this.query,this.afs.schedulers.outsideAngular).pipe(we.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,xe.R)((r,f)=>[...r,...f],[]))}snapshotChanges(e){const r=_m(e);return X0(this.query,r,this.afs.schedulers.outsideAngular).pipe(we.iC)}valueChanges(e={}){return mm(this.query,this.afs.schedulers.outsideAngular).pipe((0,De.U)(f=>f.payload.docs.map(_=>e.idField?Object.assign({[e.idField]:_.id},_.data()):_.data())),we.iC)}get(e){return(0,he.D)(this.query.get(e)).pipe(we.iC)}}const Wp=new m.OlP("angularfire2.enableFirestorePersistence"),tv=new m.OlP("angularfire2.firestore.persistenceSettings"),nv=new m.OlP("angularfire2.firestore.settings"),Sy=new m.OlP("angularfire2.firestore.use-emulator");function rv(d,e=(r=>r)){return{query:e(d),ref:d}}let iv=(()=>{class d{constructor(r,f,_,x,M,z,ae,pe,Ve,It,en,An,Pn,xr,ei,Rs,Gs){this.schedulers=ae;const Ho=(0,Ke.on)(r,z,f),Ta=Ve;It&&(0,Yd.nw)(Ho,z,en,Pn,xr,ei,An,Rs),[this.firestore,this.persistenceEnabled$]=(0,Ke.cc)(`${Ho.name}.firestore`,"AngularFirestore",Ho.name,()=>{const Eo=z.runOutsideAngular(()=>Ho.firestore());if(x&&Eo.settings(x),Ta&&Eo.useEmulator(...Ta),_&&!(0,Lt.PM)(M)){const qo=()=>{try{return(0,he.D)(Eo.enablePersistence(pe||void 0).then(()=>!0,()=>!1))}catch(ou){return typeof console<"u"&&console.warn(ou),(0,le.of)(!1)}};return[Eo,z.runOutsideAngular(qo)]}return[Eo,(0,le.of)(!1)]},[x,Ta,_])}collection(r,f){let _;_="string"==typeof r?this.firestore.collection(r):r;const{ref:x,query:M}=rv(_,f),z=this.schedulers.ngZone.run(()=>x);return new J0(z,M,this)}collectionGroup(r,f){const _=f||(M=>M),x=this.firestore.collectionGroup(r);return new Ay(_(x),this)}doc(r){let f;f="string"==typeof r?this.firestore.doc(r):r;const _=this.schedulers.ngZone.run(()=>f);return new ev(_,this)}createId(){return this.firestore.collection("_").doc().id}}return d.\u0275fac=function(r){return new(r||d)(m.LFG(Ke.Dh),m.LFG(Ke.xv,8),m.LFG(Wp,8),m.LFG(nv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(we.HU),m.LFG(tv,8),m.LFG(Sy,8),m.LFG(Yd.zQ,8),m.LFG(Yd.Qv,8),m.LFG(Yd.L6,8),m.LFG(Yd._Q,8),m.LFG(Yd.rT,8),m.LFG(Yd.lh,8),m.LFG(Yd.f7,8),m.LFG(Vf.nm,8))},d.\u0275prov=m.Yz7({token:d,factory:d.\u0275fac,providedIn:"any"}),d})(),by=(()=>{class d{constructor(){xy.Z.registerVersion("angularfire",we.q4.full,"fst-compat")}static enablePersistence(r){return{ngModule:d,providers:[{provide:Wp,useValue:!0},{provide:tv,useValue:r}]}}}return d.\u0275fac=function(r){return new(r||d)},d.\u0275mod=m.oAB({type:d}),d.\u0275inj=m.cJS({providers:[iv]}),d})()},2011:(pn,Pe,U)=>{"use strict";U.d(Pe,{Dh:()=>be,GT:()=>we,cc:()=>Xe,hO:()=>Ne,on:()=>ge,pX:()=>le,xv:()=>$e});var m=U(4650),J=U(9260),H=U(2122);pn=U.hmd(pn);const he=["ngOnDestroy"],le=(Fe,Ce,ct,At={})=>new Proxy(Fe,{get:(yt,st)=>ct.runOutsideAngular(()=>{var Be;if(Fe[st])return!(null===(Be=null==At?void 0:At.spy)||void 0===Be)&&Be.get&&At.spy.get(st,Fe[st]),Fe[st];if(he.indexOf(st)>-1)return()=>{};const Ye=Ce.toPromise().then($=>{const lt=$&&$[st];return"function"==typeof lt?lt.bind($):lt&&lt.then?lt.then(Qe=>ct.run(()=>Qe)):ct.run(()=>lt)});return new Proxy(()=>{},{get:($,lt)=>Ye[lt],apply:($,lt,Qe)=>Ye.then(qe=>{var ut;const ft=qe&&qe(...Qe);return!(null===(ut=null==At?void 0:At.spy)||void 0===ut)&&ut.apply&&At.spy.apply(st,Qe,ft),ft})})})}),we=(Fe,Ce)=>{Ce.forEach(ct=>{Object.getOwnPropertyNames(ct.prototype||ct).forEach(At=>{Object.defineProperty(Fe.prototype,At,Object.getOwnPropertyDescriptor(ct.prototype||ct,At))})})};class ye{constructor(Ce){return Ce}}const be=new m.OlP("angularfire2.app.options"),$e=new m.OlP("angularfire2.app.name");function ge(Fe,Ce,ct){const yt="object"==typeof ct&&ct||{};yt.name=yt.name||"string"==typeof ct&&ct||"[DEFAULT]";const Be=J.Z.apps.filter(Ye=>Ye&&Ye.name===yt.name)[0]||Ce.runOutsideAngular(()=>J.Z.initializeApp(Fe,yt));try{JSON.stringify(Fe)!==JSON.stringify(Be.options)&&De("error",`${Be.name} Firebase App already initialized with different options${pn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ye){}return new ye(Be)}const De=(Fe,...Ce)=>{(0,m.X6Q)()&&typeof console<"u"&&console[Fe](...Ce)},xe={provide:ye,useFactory:ge,deps:[be,m.R0b,[new m.FiY,$e]]};let Ne=(()=>{class Fe{constructor(ct){J.Z.registerVersion("angularfire",H.q4.full,"core"),J.Z.registerVersion("angularfire",H.q4.full,"app-compat"),J.Z.registerVersion("angular",m.q4F.full,ct.toString())}static initializeApp(ct,At){return{ngModule:Fe,providers:[{provide:be,useValue:ct},{provide:$e,useValue:At}]}}}return Fe.\u0275fac=function(ct){return new(ct||Fe)(m.LFG(m.Lbi))},Fe.\u0275mod=m.oAB({type:Fe}),Fe.\u0275inj=m.cJS({providers:[xe]}),Fe})();function Xe(Fe,Ce,ct,At,yt){const[,st,Be]=globalThis.\u0275AngularfireInstanceCache.find(Ye=>Ye[0]===Fe)||[];if(st)return function Ke(Fe,Ce){try{return Fe.toString()===Ce.toString()}catch(ct){return Fe===Ce}}(yt,Be)||(We("error",`${Ce} was already initialized on the ${ct} Firebase App with different settings.${Lt?" You may need to reload as Firebase is not HMR aware.":""}`),We("warn",{is:yt,was:Be})),st;{const Ye=At();return globalThis.\u0275AngularfireInstanceCache.push([Fe,Ye,yt]),Ye}}const Lt=!!pn.hot,We=(Fe,...Ce)=>{(0,m.X6Q)()&&typeof console<"u"&&console[Fe](...Ce)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(pn,Pe,U)=>{"use strict";U.d(Pe,{q4:()=>fa,iC:()=>tn,fc:()=>Ae,HU:()=>O,vb:()=>ka,JM:()=>Oo});var m=U(4650),J=U(259),H=U(5861),he=U(9681),le=U(2090),we=U(4859),ye=U(1877),be=U(8766);const $e="@firebase/installations",ge="0.6.3",De=1e4,xe=`w:${ge}`,Ne="FIS_v2",Xe="https://firebaseinstallations.googleapis.com/v1",Ke=36e5,Ce=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ct(K){return K instanceof le.ZR&&K.code.includes("request-failed")}function At({projectId:K}){return`${Xe}/projects/${K}/installations`}function yt(K){return{token:K.token,requestStatus:2,expiresIn:qe(K.expiresIn),creationTime:Date.now()}}function st(K,oe){return Be.apply(this,arguments)}function Be(){return(Be=(0,H.Z)(function*(K,oe){const dt=(yield oe.json()).error;return Ce.create("request-failed",{requestName:K,serverCode:dt.code,serverMessage:dt.message,serverStatus:dt.status})})).apply(this,arguments)}function Ye({apiKey:K}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":K})}function lt(K){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,H.Z)(function*(K){const oe=yield K();return oe.status>=500&&oe.status<600?K():oe})).apply(this,arguments)}function qe(K){return Number(K.replace("s","000"))}function pt(){return(pt=(0,H.Z)(function*({appConfig:K,heartbeatServiceProvider:oe},{fid:Ee}){const dt=At(K),Nt=Ye(K),zt=oe.getImmediate({optional:!0});if(zt){const Pr=yield zt.getHeartbeatsHeader();Pr&&Nt.append("x-firebase-client",Pr)}const _r={method:"POST",headers:Nt,body:JSON.stringify({fid:Ee,authVersion:Ne,appId:K.appId,sdkVersion:xe})},vr=yield lt(()=>fetch(dt,_r));if(vr.ok){const Pr=yield vr.json();return{fid:Pr.fid||Ee,registrationStatus:2,refreshToken:Pr.refreshToken,authToken:yt(Pr.authToken)}}throw yield st("Create Installation",vr)})).apply(this,arguments)}function mt(K){return new Promise(oe=>{setTimeout(oe,K)})}const Le=/^[cdef][\w-]{21}$/,it="";function Ze(){try{const K=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(K),K[0]=112+K[0]%16;const Ee=function me(K){return function gt(K){return btoa(String.fromCharCode(...K)).replace(/\+/g,"-").replace(/\//g,"_")}(K).substr(0,22)}(K);return Le.test(Ee)?Ee:it}catch(K){return it}}function te(K){return`${K.appName}!${K.appId}`}const q=new Map;function re(K,oe){const Ee=te(K);rt(Ee,oe),function Qt(K,oe){const Ee=function Yt(){return!Dt&&"BroadcastChannel"in self&&(Dt=new BroadcastChannel("[Firebase] FID Change"),Dt.onmessage=K=>{rt(K.data.key,K.data.fid)}),Dt}();Ee&&Ee.postMessage({key:K,fid:oe}),function yn(){0===q.size&&Dt&&(Dt.close(),Dt=null)}()}(Ee,oe)}function rt(K,oe){const Ee=q.get(K);if(Ee)for(const dt of Ee)dt(oe)}let Dt=null;const Mn="firebase-installations-database",mn=1,Gn="firebase-installations-store";let Ar=null;function Nn(){return Ar||(Ar=(0,be.X3)(Mn,mn,{upgrade:(K,oe)=>{0===oe&&K.createObjectStore(Gn)}})),Ar}function Dn(K,oe){return En.apply(this,arguments)}function En(){return(En=(0,H.Z)(function*(K,oe){const Ee=te(K),Nt=(yield Nn()).transaction(Gn,"readwrite"),zt=Nt.objectStore(Gn),xn=yield zt.get(Ee);return yield zt.put(oe,Ee),yield Nt.done,(!xn||xn.fid!==oe.fid)&&re(K,oe.fid),oe})).apply(this,arguments)}function sn(K){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,H.Z)(function*(K){const oe=te(K),dt=(yield Nn()).transaction(Gn,"readwrite");yield dt.objectStore(Gn).delete(oe),yield dt.done})).apply(this,arguments)}function Vr(K,oe){return br.apply(this,arguments)}function br(){return(br=(0,H.Z)(function*(K,oe){const Ee=te(K),Nt=(yield Nn()).transaction(Gn,"readwrite"),zt=Nt.objectStore(Gn),xn=yield zt.get(Ee),_r=oe(xn);return void 0===_r?yield zt.delete(Ee):yield zt.put(_r,Ee),yield Nt.done,_r&&(!xn||xn.fid!==_r.fid)&&re(K,_r.fid),_r})).apply(this,arguments)}function Kt(K){return Jr.apply(this,arguments)}function Jr(){return Jr=(0,H.Z)(function*(K){let oe;const Ee=yield Vr(K.appConfig,dt=>{const Nt=function rr(K){return _i(K||{fid:Ze(),registrationStatus:0})}(dt),zt=function Bn(K,oe){if(0===oe.registrationStatus){if(!navigator.onLine)return{installationEntry:oe,registrationPromise:Promise.reject(Ce.create("app-offline"))};const Ee={fid:oe.fid,registrationStatus:1,registrationTime:Date.now()},dt=function cr(K,oe){return zi.apply(this,arguments)}(K,Ee);return{installationEntry:Ee,registrationPromise:dt}}return 1===oe.registrationStatus?{installationEntry:oe,registrationPromise:qn(K)}:{installationEntry:oe}}(K,Nt);return oe=zt.registrationPromise,zt.installationEntry});return Ee.fid===it?{installationEntry:yield oe}:{installationEntry:Ee,registrationPromise:oe}}),Jr.apply(this,arguments)}function zi(){return zi=(0,H.Z)(function*(K,oe){try{const Ee=yield function ft(K,oe){return pt.apply(this,arguments)}(K,oe);return Dn(K.appConfig,Ee)}catch(Ee){throw ct(Ee)&&409===Ee.customData.serverCode?yield sn(K.appConfig):yield Dn(K.appConfig,{fid:oe.fid,registrationStatus:0}),Ee}}),zi.apply(this,arguments)}function qn(K){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,H.Z)(function*(K){let oe=yield cn(K.appConfig);for(;1===oe.registrationStatus;)yield mt(100),oe=yield cn(K.appConfig);if(0===oe.registrationStatus){const{installationEntry:Ee,registrationPromise:dt}=yield Kt(K);return dt||Ee}return oe})).apply(this,arguments)}function cn(K){return Vr(K,oe=>{if(!oe)throw Ce.create("installation-not-found");return _i(oe)})}function _i(K){return function Wi(K){return 1===K.registrationStatus&&K.registrationTime+De<Date.now()}(K)?{fid:K.fid,registrationStatus:0}:K}function Pi(){return(Pi=(0,H.Z)(function*({appConfig:K,heartbeatServiceProvider:oe},Ee){const dt=function Rr(K,{fid:oe}){return`${At(K)}/${oe}/authTokens:generate`}(K,Ee),Nt=function $(K,{refreshToken:oe}){const Ee=Ye(K);return Ee.append("Authorization",function ut(K){return`${Ne} ${K}`}(oe)),Ee}(K,Ee),zt=oe.getImmediate({optional:!0});if(zt){const Pr=yield zt.getHeartbeatsHeader();Pr&&Nt.append("x-firebase-client",Pr)}const _r={method:"POST",headers:Nt,body:JSON.stringify({installation:{sdkVersion:xe,appId:K.appId}})},vr=yield lt(()=>fetch(dt,_r));if(vr.ok)return yt(yield vr.json());throw yield st("Generate Auth Token",vr)})).apply(this,arguments)}function Er(K){return ii.apply(this,arguments)}function ii(){return ii=(0,H.Z)(function*(K,oe=!1){let Ee;const dt=yield Vr(K.appConfig,zt=>{if(!hr(zt))throw Ce.create("not-registered");const xn=zt.authToken;if(!oe&&function He(K){return 2===K.requestStatus&&!function ot(K){const oe=Date.now();return oe<K.creationTime||K.creationTime+K.expiresIn<oe+Ke}(K)}(xn))return zt;if(1===xn.requestStatus)return Ee=function wn(K,oe){return ln.apply(this,arguments)}(K,oe),zt;{if(!navigator.onLine)throw Ce.create("app-offline");const _r=function ht(K){const oe={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},K),{authToken:oe})}(zt);return Ee=function dr(K,oe){return jn.apply(this,arguments)}(K,_r),_r}});return Ee?yield Ee:dt.authToken}),ii.apply(this,arguments)}function ln(){return(ln=(0,H.Z)(function*(K,oe){let Ee=yield Un(K.appConfig);for(;1===Ee.authToken.requestStatus;)yield mt(100),Ee=yield Un(K.appConfig);const dt=Ee.authToken;return 0===dt.requestStatus?Er(K,oe):dt})).apply(this,arguments)}function Un(K){return Vr(K,oe=>{if(!hr(oe))throw Ce.create("not-registered");return function qt(K){return 1===K.requestStatus&&K.requestTime+De<Date.now()}(oe.authToken)?Object.assign(Object.assign({},oe),{authToken:{requestStatus:0}}):oe})}function jn(){return jn=(0,H.Z)(function*(K,oe){try{const Ee=yield function jr(K,oe){return Pi.apply(this,arguments)}(K,oe),dt=Object.assign(Object.assign({},oe),{authToken:Ee});return yield Dn(K.appConfig,dt),Ee}catch(Ee){if(!ct(Ee)||401!==Ee.customData.serverCode&&404!==Ee.customData.serverCode){const dt=Object.assign(Object.assign({},oe),{authToken:{requestStatus:0}});yield Dn(K.appConfig,dt)}else yield sn(K.appConfig);throw Ee}}),jn.apply(this,arguments)}function hr(K){return void 0!==K&&2===K.registrationStatus}function Wn(){return(Wn=(0,H.Z)(function*(K){const oe=K,{installationEntry:Ee,registrationPromise:dt}=yield Kt(oe);return dt?dt.catch(console.error):Er(oe).catch(console.error),Ee.fid})).apply(this,arguments)}function Or(){return Or=(0,H.Z)(function*(K,oe=!1){const Ee=K;return yield function Zr(K){return fr.apply(this,arguments)}(Ee),(yield Er(Ee,oe)).token}),Or.apply(this,arguments)}function fr(){return(fr=(0,H.Z)(function*(K){const{registrationPromise:oe}=yield Kt(K);oe&&(yield oe)})).apply(this,arguments)}function fi(K){return Ce.create("missing-app-config-values",{valueName:K})}const Yr="installations",ti=K=>{const oe=K.getProvider("app").getImmediate(),Ee=function sr(K){if(!K||!K.options)throw fi("App Configuration");if(!K.name)throw fi("App Name");const oe=["projectId","apiKey","appId"];for(const Ee of oe)if(!K.options[Ee])throw fi(Ee);return{appName:K.name,projectId:K.options.projectId,apiKey:K.options.apiKey,appId:K.options.appId}}(oe);return{app:oe,appConfig:Ee,heartbeatServiceProvider:(0,he._getProvider)(oe,"heartbeat"),_delete:()=>Promise.resolve()}},Lo=K=>{const oe=K.getProvider("app").getImmediate(),Ee=(0,he._getProvider)(oe,Yr).getImmediate();return{getId:()=>function $t(K){return Wn.apply(this,arguments)}(Ee),getToken:Nt=>function Cr(K){return Or.apply(this,arguments)}(Ee,Nt)}};(function pi(){(0,he._registerComponent)(new we.wA(Yr,ti,"PUBLIC")),(0,he._registerComponent)(new we.wA("installations-internal",Lo,"PRIVATE"))})(),(0,he.registerVersion)($e,ge),(0,he.registerVersion)($e,ge,"esm2017");const ki="@firebase/remote-config",Tr=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Zn{constructor(oe,Ee,dt,Nt){this.client=oe,this.storage=Ee,this.storageCache=dt,this.logger=Nt}isCachedDataFresh(oe,Ee){if(!Ee)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const dt=Date.now()-Ee,Nt=dt<=oe;return this.logger.debug(`Config fetch cache check. Cache age millis: ${dt}. Cache max age millis (minimumFetchIntervalMillis setting): ${oe}. Is cache hit: ${Nt}.`),Nt}fetch(oe){var Ee=this;return(0,H.Z)(function*(){const[dt,Nt]=yield Promise.all([Ee.storage.getLastSuccessfulFetchTimestampMillis(),Ee.storage.getLastSuccessfulFetchResponse()]);if(Nt&&Ee.isCachedDataFresh(oe.cacheMaxAgeMillis,dt))return Nt;oe.eTag=Nt&&Nt.eTag;const zt=yield Ee.client.fetch(oe),xn=[Ee.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===zt.status&&xn.push(Ee.storage.setLastSuccessfulFetchResponse(zt)),yield Promise.all(xn),zt})()}}function Jn(K=navigator){return K.languages&&K.languages[0]||K.language}class ci{constructor(oe,Ee,dt,Nt,zt,xn){this.firebaseInstallations=oe,this.sdkVersion=Ee,this.namespace=dt,this.projectId=Nt,this.apiKey=zt,this.appId=xn}fetch(oe){var Ee=this;return(0,H.Z)(function*(){const[dt,Nt]=yield Promise.all([Ee.firebaseInstallations.getId(),Ee.firebaseInstallations.getToken()]),xn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Ee.projectId}/namespaces/${Ee.namespace}:fetch?key=${Ee.apiKey}`,_r={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":oe.eTag||"*"},vr={sdk_version:Ee.sdkVersion,app_instance_id:dt,app_instance_id_token:Nt,app_id:Ee.appId,language_code:Jn()},Pr={method:"POST",headers:_r,body:JSON.stringify(vr)},Ii=fetch(xn,Pr),nr=new Promise((Ha,Xa)=>{oe.signal.addEventListener(()=>{const Qa=new Error("The operation was aborted.");Qa.name="AbortError",Xa(Qa)})});let mi;try{yield Promise.race([Ii,nr]),mi=yield Ii}catch(Ha){let Xa="fetch-client-network";throw"AbortError"===(null==Ha?void 0:Ha.name)&&(Xa="fetch-timeout"),Tr.create(Xa,{originalErrorMessage:null==Ha?void 0:Ha.message})}let Wo=mi.status;const ec=mi.headers.get("ETag")||void 0;let lc,Cu;if(200===mi.status){let Ha;try{Ha=yield mi.json()}catch(Xa){throw Tr.create("fetch-client-parse",{originalErrorMessage:null==Xa?void 0:Xa.message})}lc=Ha.entries,Cu=Ha.state}if("INSTANCE_STATE_UNSPECIFIED"===Cu?Wo=500:"NO_CHANGE"===Cu?Wo=304:("NO_TEMPLATE"===Cu||"EMPTY_CONFIG"===Cu)&&(lc={}),304!==Wo&&200!==Wo)throw Tr.create("fetch-status",{httpStatus:Wo});return{status:Wo,eTag:ec,config:lc}})()}}class bt{constructor(oe,Ee){this.client=oe,this.storage=Ee}fetch(oe){var Ee=this;return(0,H.Z)(function*(){const dt=(yield Ee.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Ee.attemptFetch(oe,dt)})()}attemptFetch(oe,{throttleEndTimeMillis:Ee,backoffCount:dt}){var Nt=this;return(0,H.Z)(function*(){yield function Kr(K,oe){return new Promise((Ee,dt)=>{const Nt=Math.max(oe-Date.now(),0),zt=setTimeout(Ee,Nt);K.addEventListener(()=>{clearTimeout(zt),dt(Tr.create("fetch-throttle",{throttleEndTimeMillis:oe}))})})}(oe.signal,Ee);try{const zt=yield Nt.client.fetch(oe);return yield Nt.storage.deleteThrottleMetadata(),zt}catch(zt){if(!function _t(K){if(!(K instanceof le.ZR&&K.customData))return!1;const oe=Number(K.customData.httpStatus);return 429===oe||500===oe||503===oe||504===oe}(zt))throw zt;const xn={throttleEndTimeMillis:Date.now()+(0,le.$s)(dt),backoffCount:dt+1};return yield Nt.storage.setThrottleMetadata(xn),Nt.attemptFetch(oe,xn)}})()}}class fn{constructor(oe,Ee,dt,Nt,zt){this.app=oe,this._client=Ee,this._storageCache=dt,this._storage=Nt,this._logger=zt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Sn(K,oe){const Ee=K.target.error||void 0;return Tr.create(oe,{originalErrorMessage:Ee&&(null==Ee?void 0:Ee.message)})}const er="app_namespace_store";class ji{constructor(oe,Ee,dt,Nt=function Yi(){return new Promise((K,oe)=>{try{const Ee=indexedDB.open("firebase_remote_config",1);Ee.onerror=dt=>{oe(Sn(dt,"storage-open"))},Ee.onsuccess=dt=>{K(dt.target.result)},Ee.onupgradeneeded=dt=>{0===dt.oldVersion&&dt.target.result.createObjectStore(er,{keyPath:"compositeKey"})}}catch(Ee){oe(Tr.create("storage-open",{originalErrorMessage:null==Ee?void 0:Ee.message}))}})}()){this.appId=oe,this.appName=Ee,this.namespace=dt,this.openDbPromise=Nt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(oe){return this.set("last_fetch_status",oe)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(oe){return this.set("last_successful_fetch_timestamp_millis",oe)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(oe){return this.set("last_successful_fetch_response",oe)}getActiveConfig(){return this.get("active_config")}setActiveConfig(oe){return this.set("active_config",oe)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(oe){return this.set("active_config_etag",oe)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(oe){return this.set("throttle_metadata",oe)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(oe){var Ee=this;return(0,H.Z)(function*(){const dt=yield Ee.openDbPromise;return new Promise((Nt,zt)=>{const _r=dt.transaction([er],"readonly").objectStore(er),vr=Ee.createCompositeKey(oe);try{const Pr=_r.get(vr);Pr.onerror=Ii=>{zt(Sn(Ii,"storage-get"))},Pr.onsuccess=Ii=>{const nr=Ii.target.result;Nt(nr?nr.value:void 0)}}catch(Pr){zt(Tr.create("storage-get",{originalErrorMessage:null==Pr?void 0:Pr.message}))}})})()}set(oe,Ee){var dt=this;return(0,H.Z)(function*(){const Nt=yield dt.openDbPromise;return new Promise((zt,xn)=>{const vr=Nt.transaction([er],"readwrite").objectStore(er),Pr=dt.createCompositeKey(oe);try{const Ii=vr.put({compositeKey:Pr,value:Ee});Ii.onerror=nr=>{xn(Sn(nr,"storage-set"))},Ii.onsuccess=()=>{zt()}}catch(Ii){xn(Tr.create("storage-set",{originalErrorMessage:null==Ii?void 0:Ii.message}))}})})()}delete(oe){var Ee=this;return(0,H.Z)(function*(){const dt=yield Ee.openDbPromise;return new Promise((Nt,zt)=>{const _r=dt.transaction([er],"readwrite").objectStore(er),vr=Ee.createCompositeKey(oe);try{const Pr=_r.delete(vr);Pr.onerror=Ii=>{zt(Sn(Ii,"storage-delete"))},Pr.onsuccess=()=>{Nt()}}catch(Pr){zt(Tr.create("storage-delete",{originalErrorMessage:null==Pr?void 0:Pr.message}))}})})()}createCompositeKey(oe){return[this.appId,this.appName,this.namespace,oe].join()}}class uo{constructor(oe){this.storage=oe}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var oe=this;return(0,H.Z)(function*(){const Ee=oe.storage.getLastFetchStatus(),dt=oe.storage.getLastSuccessfulFetchTimestampMillis(),Nt=oe.storage.getActiveConfig(),zt=yield Ee;zt&&(oe.lastFetchStatus=zt);const xn=yield dt;xn&&(oe.lastSuccessfulFetchTimestampMillis=xn);const _r=yield Nt;_r&&(oe.activeConfig=_r)})()}setLastFetchStatus(oe){return this.lastFetchStatus=oe,this.storage.setLastFetchStatus(oe)}setLastSuccessfulFetchTimestampMillis(oe){return this.lastSuccessfulFetchTimestampMillis=oe,this.storage.setLastSuccessfulFetchTimestampMillis(oe)}setActiveConfig(oe){return this.activeConfig=oe,this.storage.setActiveConfig(oe)}}function Os(){return zs.apply(this,arguments)}function zs(){return(zs=(0,H.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch(K){return!1}})).apply(this,arguments)}!function Xr(){(0,he._registerComponent)(new we.wA("remote-config",function K(oe,{instanceIdentifier:Ee}){const dt=oe.getProvider("app").getImmediate(),Nt=oe.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Tr.create("registration-window");if(!(0,le.hl)())throw Tr.create("indexed-db-unavailable");const{projectId:zt,apiKey:xn,appId:_r}=dt.options;if(!zt)throw Tr.create("registration-project-id");if(!xn)throw Tr.create("registration-api-key");if(!_r)throw Tr.create("registration-app-id");const vr=new ji(_r,dt.name,Ee=Ee||"firebase"),Pr=new uo(vr),Ii=new ye.Yd(ki);Ii.logLevel=ye.in.ERROR;const nr=new ci(Nt,he.SDK_VERSION,Ee,zt,xn,_r),mi=new bt(nr,vr),Wo=new Zn(mi,vr,Pr,Ii),ec=new fn(dt,Wo,Pr,vr,Ii);return function je(K){const oe=(0,le.m9)(K);oe._initializePromise||(oe._initializePromise=oe._storageCache.loadFromStorage().then(()=>{oe._isInitializationComplete=!0}))}(ec),ec},"PUBLIC").setMultipleInstances(!0)),(0,he.registerVersion)(ki,"0.4.3"),(0,he.registerVersion)(ki,"0.4.3","esm2017")}();const xo="/firebase-messaging-sw.js",ns="/firebase-cloud-messaging-push-scope",Bo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Mo="https://fcmregistrations.googleapis.com/v1",Zo="google.c.a.c_id",fs="google.c.a.c_l",ps="google.c.a.ts",Uo="google.c.a.e";var ms=(()=>{return(K=ms||(ms={})).PUSH_RECEIVED="push-received",K.NOTIFICATION_CLICKED="notification-clicked",ms;var K})();function Xo(K){const oe=new Uint8Array(K);return btoa(String.fromCharCode(...oe)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ua(K){const Ee=(K+"=".repeat((4-K.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),dt=atob(Ee),Nt=new Uint8Array(dt.length);for(let zt=0;zt<dt.length;++zt)Nt[zt]=dt.charCodeAt(zt);return Nt}const Ws="fcm_token_details_db",Ys=5,Mi="fcm_token_object_Store";function cs(){return cs=(0,H.Z)(function*(K){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(zt=>zt.name).includes(Ws))return null;let oe=null;return(yield(0,be.X3)(Ws,Ys,{upgrade:(dt=(0,H.Z)(function*(Nt,zt,xn,_r){var vr;if(zt<2||!Nt.objectStoreNames.contains(Mi))return;const Pr=_r.objectStore(Mi),Ii=yield Pr.index("fcmSenderId").get(K);if(yield Pr.clear(),Ii)if(2===zt){const nr=Ii;if(!nr.auth||!nr.p256dh||!nr.endpoint)return;oe={token:nr.fcmToken,createTime:null!==(vr=nr.createTime)&&void 0!==vr?vr:Date.now(),subscriptionOptions:{auth:nr.auth,p256dh:nr.p256dh,endpoint:nr.endpoint,swScope:nr.swScope,vapidKey:"string"==typeof nr.vapidKey?nr.vapidKey:Xo(nr.vapidKey)}}}else if(3===zt){const nr=Ii;oe={token:nr.fcmToken,createTime:nr.createTime,subscriptionOptions:{auth:Xo(nr.auth),p256dh:Xo(nr.p256dh),endpoint:nr.endpoint,swScope:nr.swScope,vapidKey:Xo(nr.vapidKey)}}}else if(4===zt){const nr=Ii;oe={token:nr.fcmToken,createTime:nr.createTime,subscriptionOptions:{auth:Xo(nr.auth),p256dh:Xo(nr.p256dh),endpoint:nr.endpoint,swScope:nr.swScope,vapidKey:Xo(nr.vapidKey)}}}}),function(zt,xn,_r,vr){return dt.apply(this,arguments)})})).close(),yield(0,be.Lj)(Ws),yield(0,be.Lj)("fcm_vapid_details_db"),yield(0,be.Lj)("undefined"),function rs(K){if(!K||!K.subscriptionOptions)return!1;const{subscriptionOptions:oe}=K;return"number"==typeof K.createTime&&K.createTime>0&&"string"==typeof K.token&&K.token.length>0&&"string"==typeof oe.auth&&oe.auth.length>0&&"string"==typeof oe.p256dh&&oe.p256dh.length>0&&"string"==typeof oe.endpoint&&oe.endpoint.length>0&&"string"==typeof oe.swScope&&oe.swScope.length>0&&"string"==typeof oe.vapidKey&&oe.vapidKey.length>0}(oe)?oe:null;var dt}),cs.apply(this,arguments)}const Ks="firebase-messaging-database",$r=1,Ao="firebase-messaging-store";let co=null;function vs(){return co||(co=(0,be.X3)(Ks,$r,{upgrade:(K,oe)=>{0===oe&&K.createObjectStore(Ao)}})),co}function lo(K){return is.apply(this,arguments)}function is(){return is=(0,H.Z)(function*(K){const oe=os(K),dt=yield(yield vs()).transaction(Ao).objectStore(Ao).get(oe);if(dt)return dt;{const Nt=yield function tr(K){return cs.apply(this,arguments)}(K.appConfig.senderId);if(Nt)return yield jo(K,Nt),Nt}}),is.apply(this,arguments)}function jo(K,oe){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,H.Z)(function*(K,oe){const Ee=os(K),Nt=(yield vs()).transaction(Ao,"readwrite");return yield Nt.objectStore(Ao).put(oe,Ee),yield Nt.done,oe})).apply(this,arguments)}function Us(){return(Us=(0,H.Z)(function*(K){const oe=os(K),dt=(yield vs()).transaction(Ao,"readwrite");yield dt.objectStore(Ao).delete(oe),yield dt.done})).apply(this,arguments)}function os({appConfig:K}){return K.appId}const Ni=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ys(K,oe){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,H.Z)(function*(K,oe){const Ee=yield Ms(K),dt=$i(oe),Nt={method:"POST",headers:Ee,body:JSON.stringify(dt)};let zt;try{zt=yield(yield fetch(ls(K.appConfig),Nt)).json()}catch(xn){throw Ni.create("token-subscribe-failed",{errorInfo:null==xn?void 0:xn.toString()})}if(zt.error)throw Ni.create("token-subscribe-failed",{errorInfo:zt.error.message});if(!zt.token)throw Ni.create("token-subscribe-no-token");return zt.token})).apply(this,arguments)}function Zs(){return(Zs=(0,H.Z)(function*(K,oe){const Ee=yield Ms(K),dt=$i(oe.subscriptionOptions),Nt={method:"PATCH",headers:Ee,body:JSON.stringify(dt)};let zt;try{zt=yield(yield fetch(`${ls(K.appConfig)}/${oe.token}`,Nt)).json()}catch(xn){throw Ni.create("token-update-failed",{errorInfo:null==xn?void 0:xn.toString()})}if(zt.error)throw Ni.create("token-update-failed",{errorInfo:zt.error.message});if(!zt.token)throw Ni.create("token-update-no-token");return zt.token})).apply(this,arguments)}function So(K,oe){return wi.apply(this,arguments)}function wi(){return(wi=(0,H.Z)(function*(K,oe){const dt={method:"DELETE",headers:yield Ms(K)};try{const zt=yield(yield fetch(`${ls(K.appConfig)}/${oe}`,dt)).json();if(zt.error)throw Ni.create("token-unsubscribe-failed",{errorInfo:zt.error.message})}catch(Nt){throw Ni.create("token-unsubscribe-failed",{errorInfo:null==Nt?void 0:Nt.toString()})}})).apply(this,arguments)}function ls({projectId:K}){return`${Mo}/projects/${K}/registrations`}function Ms(K){return io.apply(this,arguments)}function io(){return(io=(0,H.Z)(function*({appConfig:K,installations:oe}){const Ee=yield oe.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":K.apiKey,"x-goog-firebase-installations-auth":`FIS ${Ee}`})})).apply(this,arguments)}function $i({p256dh:K,auth:oe,endpoint:Ee,vapidKey:dt}){const Nt={web:{endpoint:Ee,auth:oe,p256dh:K}};return dt!==Bo&&(Nt.web.applicationPubKey=dt),Nt}const Qi=6048e5;function bo(){return bo=(0,H.Z)(function*(K){const oe=yield function Ns(K,oe){return No.apply(this,arguments)}(K.swRegistration,K.vapidKey),Ee={vapidKey:K.vapidKey,swScope:K.swRegistration.scope,endpoint:oe.endpoint,auth:Xo(oe.getKey("auth")),p256dh:Xo(oe.getKey("p256dh"))},dt=yield lo(K.firebaseDependencies);if(dt){if(function $s(K,oe){return oe.vapidKey===K.vapidKey&&oe.endpoint===K.endpoint&&oe.auth===K.auth&&oe.p256dh===K.p256dh}(dt.subscriptionOptions,Ee))return Date.now()>=dt.createTime+Qi?function Br(K,oe){return xs.apply(this,arguments)}(K,{token:dt.token,createTime:Date.now(),subscriptionOptions:Ee}):dt.token;try{yield So(K.firebaseDependencies,dt.token)}catch(Nt){console.warn(Nt)}return Gi(K.firebaseDependencies,Ee)}return Gi(K.firebaseDependencies,Ee)}),bo.apply(this,arguments)}function va(){return va=(0,H.Z)(function*(K){const oe=yield lo(K.firebaseDependencies);oe&&(yield So(K.firebaseDependencies,oe.token),yield function qs(K){return Us.apply(this,arguments)}(K.firebaseDependencies));const Ee=yield K.swRegistration.pushManager.getSubscription();return!Ee||Ee.unsubscribe()}),va.apply(this,arguments)}function xs(){return xs=(0,H.Z)(function*(K,oe){try{const Ee=yield function _s(K,oe){return Zs.apply(this,arguments)}(K.firebaseDependencies,oe),dt=Object.assign(Object.assign({},oe),{token:Ee,createTime:Date.now()});return yield jo(K.firebaseDependencies,dt),Ee}catch(Ee){throw yield function Fr(K){return va.apply(this,arguments)}(K),Ee}}),xs.apply(this,arguments)}function Gi(K,oe){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,H.Z)(function*(K,oe){const dt={token:yield ys(K,oe),createTime:Date.now(),subscriptionOptions:oe};return yield jo(K,dt),dt.token})).apply(this,arguments)}function No(){return(No=(0,H.Z)(function*(K,oe){return(yield K.pushManager.getSubscription())||K.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ua(oe)})})).apply(this,arguments)}function Es(K){const oe={from:K.from,collapseKey:K.collapse_key,messageId:K.fcmMessageId};return function ss(K,oe){if(!oe.notification)return;K.notification={};const Ee=oe.notification.title;Ee&&(K.notification.title=Ee);const dt=oe.notification.body;dt&&(K.notification.body=dt);const Nt=oe.notification.image;Nt&&(K.notification.image=Nt);const zt=oe.notification.icon;zt&&(K.notification.icon=zt)}(oe,K),function Y(K,oe){oe.data&&(K.data=oe.data)}(oe,K),function w(K,oe){var Ee,dt,Nt,zt,xn;if(!(oe.fcmOptions||null!==(Ee=oe.notification)&&void 0!==Ee&&Ee.click_action))return;K.fcmOptions={};const _r=null!==(Nt=null===(dt=oe.fcmOptions)||void 0===dt?void 0:dt.link)&&void 0!==Nt?Nt:null===(zt=oe.notification)||void 0===zt?void 0:zt.click_action;_r&&(K.fcmOptions.link=_r);const vr=null===(xn=oe.fcmOptions)||void 0===xn?void 0:xn.analytics_label;vr&&(K.fcmOptions.analyticsLabel=vr)}(oe,K),oe}function S(K,oe){const Ee=[];for(let dt=0;dt<K.length;dt++)Ee.push(K.charAt(dt)),dt<oe.length&&Ee.push(oe.charAt(dt));return Ee.join("")}function ve(K){return Ni.create("missing-app-config-values",{valueName:K})}S("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),S("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Vt{constructor(oe,Ee,dt){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Nt=function j(K){if(!K||!K.options)throw ve("App Configuration Object");if(!K.name)throw ve("App Name");const oe=["projectId","apiKey","appId","messagingSenderId"],{options:Ee}=K;for(const dt of oe)if(!Ee[dt])throw ve(dt);return{appName:K.name,projectId:Ee.projectId,apiKey:Ee.apiKey,appId:Ee.appId,senderId:Ee.messagingSenderId}}(oe);this.firebaseDependencies={app:oe,appConfig:Nt,installations:Ee,analyticsProvider:dt}}_delete(){return Promise.resolve()}}function _n(K){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,H.Z)(function*(K){try{K.swRegistration=yield navigator.serviceWorker.register(xo,{scope:ns}),K.swRegistration.update().catch(()=>{})}catch(oe){throw Ni.create("failed-service-worker-registration",{browserErrorMessage:null==oe?void 0:oe.message})}})).apply(this,arguments)}function li(){return(li=(0,H.Z)(function*(K,oe){if(!oe&&!K.swRegistration&&(yield _n(K)),oe||!K.swRegistration){if(!(oe instanceof ServiceWorkerRegistration))throw Ni.create("invalid-sw-registration");K.swRegistration=oe}})).apply(this,arguments)}function ie(){return(ie=(0,H.Z)(function*(K,oe){oe?K.vapidKey=oe:K.vapidKey||(K.vapidKey=Bo)})).apply(this,arguments)}function nt(){return nt=(0,H.Z)(function*(K,oe){if(!navigator)throw Ni.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ni.create("permission-blocked");return yield function ee(K,oe){return ie.apply(this,arguments)}(K,null==oe?void 0:oe.vapidKey),yield function wr(K,oe){return li.apply(this,arguments)}(K,null==oe?void 0:oe.serviceWorkerRegistration),function Vo(K){return bo.apply(this,arguments)}(K)}),nt.apply(this,arguments)}function Xt(){return(Xt=(0,H.Z)(function*(K,oe,Ee){const dt=function dn(K){switch(K){case ms.NOTIFICATION_CLICKED:return"notification_open";case ms.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(oe);(yield K.firebaseDependencies.analyticsProvider.get()).logEvent(dt,{message_id:Ee[Zo],message_name:Ee[fs],message_time:Ee[ps],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Qn(){return Qn=(0,H.Z)(function*(K,oe){const Ee=oe.data;if(!Ee.isFirebaseMessaging)return;K.onMessageHandler&&Ee.messageType===ms.PUSH_RECEIVED&&("function"==typeof K.onMessageHandler?K.onMessageHandler(Es(Ee)):K.onMessageHandler.next(Es(Ee)));const dt=Ee.data;(function T(K){return"object"==typeof K&&!!K&&Zo in K})(dt)&&"1"===dt[Uo]&&(yield function Et(K,oe,Ee){return Xt.apply(this,arguments)}(K,Ee.messageType,dt))}),Qn.apply(this,arguments)}const Nr="@firebase/messaging",go=K=>{const oe=new Vt(K.getProvider("app").getImmediate(),K.getProvider("installations-internal").getImmediate(),K.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Ee=>function lr(K,oe){return Qn.apply(this,arguments)}(oe,Ee)),oe},Ci=K=>{const oe=K.getProvider("messaging").getImmediate();return{getToken:dt=>function Te(K,oe){return nt.apply(this,arguments)}(oe,dt)}};function oo(){return Po.apply(this,arguments)}function Po(){return(Po=(0,H.Z)(function*(){try{yield(0,le.eu)()}catch(K){return!1}return typeof window<"u"&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ji(){(0,he._registerComponent)(new we.wA("messaging",go,"PUBLIC")),(0,he._registerComponent)(new we.wA("messaging-internal",Ci,"PRIVATE")),(0,he.registerVersion)(Nr,"0.12.3"),(0,he.registerVersion)(Nr,"0.12.3","esm2017")}();const Cs="analytics",ho="firebase_id",Js="origin",Ti=6e4,ya="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Mu="https://www.googletagmanager.com/gtag/js",Go=new ye.Yd("@firebase/analytics");function Nu(K){return Promise.all(K.map(oe=>oe.catch(Ee=>Ee)))}function ea(){return(ea=(0,H.Z)(function*(K,oe,Ee,dt,Nt,zt){const xn=dt[Nt];try{if(xn)yield oe[xn];else{const vr=(yield Nu(Ee)).find(Pr=>Pr.measurementId===Nt);vr&&(yield oe[vr.appId])}}catch(_r){Go.error(_r)}K("config",Nt,zt)})).apply(this,arguments)}function W(){return(W=(0,H.Z)(function*(K,oe,Ee,dt,Nt){try{let zt=[];if(Nt&&Nt.send_to){let xn=Nt.send_to;Array.isArray(xn)||(xn=[xn]);const _r=yield Nu(Ee);for(const vr of xn){const Pr=_r.find(nr=>nr.measurementId===vr),Ii=Pr&&oe[Pr.appId];if(!Ii){zt=[];break}zt.push(Ii)}}0===zt.length&&(zt=Object.values(oe)),yield Promise.all(zt),K("event",dt,Nt||{})}catch(zt){Go.error(zt)}})).apply(this,arguments)}const Wt=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),hn=30,un=new class gi{constructor(oe={},Ee=1e3){this.throttleMetadata=oe,this.intervalMillis=Ee}getThrottleMetadata(oe){return this.throttleMetadata[oe]}setThrottleMetadata(oe,Ee){this.throttleMetadata[oe]=Ee}deleteThrottleMetadata(oe){delete this.throttleMetadata[oe]}};function kr(K){return new Headers({Accept:"application/json","x-goog-api-key":K})}function vo(){return(vo=(0,H.Z)(function*(K){var oe;const{appId:Ee,apiKey:dt}=K,Nt={method:"GET",headers:kr(dt)},zt=ya.replace("{app-id}",Ee),xn=yield fetch(zt,Nt);if(200!==xn.status&&304!==xn.status){let _r="";try{const vr=yield xn.json();null!==(oe=vr.error)&&void 0!==oe&&oe.message&&(_r=vr.error.message)}catch(vr){}throw Wt.create("config-fetch-failed",{httpStatus:xn.status,responseMessage:_r})}return xn.json()})).apply(this,arguments)}function Xn(){return(Xn=(0,H.Z)(function*(K,oe=un,Ee){const{appId:dt,apiKey:Nt,measurementId:zt}=K.options;if(!dt)throw Wt.create("no-app-id");if(!Nt){if(zt)return{measurementId:zt,appId:dt};throw Wt.create("no-api-key")}const xn=oe.getThrottleMetadata(dt)||{backoffCount:0,throttleEndTimeMillis:Date.now()},_r=new Ur;return setTimeout((0,H.Z)(function*(){_r.abort()}),void 0!==Ee?Ee:Ti),As({appId:dt,apiKey:Nt,measurementId:zt},xn,_r,oe)})).apply(this,arguments)}function As(K,oe,Ee){return Fn.apply(this,arguments)}function Fn(){return Fn=(0,H.Z)(function*(K,{throttleEndTimeMillis:oe,backoffCount:Ee},dt,Nt=un){var zt;const{appId:xn,measurementId:_r}=K;try{yield function nn(K,oe){return new Promise((Ee,dt)=>{const Nt=Math.max(oe-Date.now(),0),zt=setTimeout(Ee,Nt);K.addEventListener(()=>{clearTimeout(zt),dt(Wt.create("fetch-throttle",{throttleEndTimeMillis:oe}))})})}(dt,oe)}catch(vr){if(_r)return Go.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_r} provided in the "measurementId" field in the local Firebase config. [${null==vr?void 0:vr.message}]`),{appId:xn,measurementId:_r};throw vr}try{const vr=yield function Hr(K){return vo.apply(this,arguments)}(K);return Nt.deleteThrottleMetadata(xn),vr}catch(vr){const Pr=vr;if(!function vn(K){if(!(K instanceof le.ZR&&K.customData))return!1;const oe=Number(K.customData.httpStatus);return 429===oe||500===oe||503===oe||504===oe}(Pr)){if(Nt.deleteThrottleMetadata(xn),_r)return Go.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_r} provided in the "measurementId" field in the local Firebase config. [${null==Pr?void 0:Pr.message}]`),{appId:xn,measurementId:_r};throw vr}const Ii=503===Number(null===(zt=null==Pr?void 0:Pr.customData)||void 0===zt?void 0:zt.httpStatus)?(0,le.$s)(Ee,Nt.intervalMillis,hn):(0,le.$s)(Ee,Nt.intervalMillis),nr={throttleEndTimeMillis:Date.now()+Ii,backoffCount:Ee+1};return Nt.setThrottleMetadata(xn,nr),Go.debug(`Calling attemptFetch again in ${Ii} millis`),As(K,nr,dt,Nt)}}),Fn.apply(this,arguments)}class Ur{constructor(){this.listeners=[]}addEventListener(oe){this.listeners.push(oe)}abort(){this.listeners.forEach(oe=>oe())}}let bi,qr;function Va(){return(Va=(0,H.Z)(function*(K,oe,Ee,dt,Nt){if(Nt&&Nt.global)K("event",Ee,dt);else{const zt=yield oe;K("event",Ee,Object.assign(Object.assign({},dt),{send_to:zt}))}})).apply(this,arguments)}function Lr(){return(Lr=(0,H.Z)(function*(){if(!(0,le.hl)())return Go.warn(Wt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(K){return Go.warn(Wt.create("indexeddb-unavailable",{errorInfo:null==K?void 0:K.toString()}).message),!1}return!0})).apply(this,arguments)}function Ri(){return Ri=(0,H.Z)(function*(K,oe,Ee,dt,Nt,zt,xn){var _r;const vr=function Cn(K){return Xn.apply(this,arguments)}(K);vr.then(Wo=>{Ee[Wo.measurementId]=Wo.appId,K.options.measurementId&&Wo.measurementId!==K.options.measurementId&&Go.warn(`The measurement ID in the local Firebase config (${K.options.measurementId}) does not match the measurement ID fetched from the server (${Wo.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Wo=>Go.error(Wo)),oe.push(vr);const Pr=function eo(){return Lr.apply(this,arguments)}().then(Wo=>{if(Wo)return dt.getId()}),[Ii,nr]=yield Promise.all([vr,Pr]);(function Ie(K){const oe=window.document.getElementsByTagName("script");for(const Ee of Object.values(oe))if(Ee.src&&Ee.src.includes(Mu)&&Ee.src.includes(K))return Ee;return null})(zt)||function Pu(K,oe){const Ee=document.createElement("script");Ee.src=`${Mu}?l=${K}&id=${oe}`,Ee.async=!0,document.head.appendChild(Ee)}(zt,Ii.measurementId),qr&&(Nt("consent","default",qr),function Ra(K){qr=K}(void 0)),Nt("js",new Date);const mi=null!==(_r=null==xn?void 0:xn.config)&&void 0!==_r?_r:{};return mi[Js]="firebase",mi.update=!0,null!=nr&&(mi[ho]=nr),Nt("config",Ii.measurementId,mi),bi&&(Nt("set",bi),function Zu(K){bi=K}(void 0)),Ii.measurementId}),Ri.apply(this,arguments)}class Yc{constructor(oe){this.app=oe}_delete(){return delete Li[this.app.options.appId],Promise.resolve()}}let Li={},Yn=[];const _u={};let $a,la,qi="dataLayer",qa="gtag",da=!1;function bc(K,oe,Ee){!function uc(){const K=[];if((0,le.ru)()&&K.push("This is a browser extension environment."),(0,le.zI)()||K.push("Cookies are not available."),K.length>0){const oe=K.map((dt,Nt)=>`(${Nt+1}) ${dt}`).join(" "),Ee=Wt.create("invalid-analytics-context",{errorInfo:oe});Go.warn(Ee.message)}}();const dt=K.options.appId;if(!dt)throw Wt.create("no-app-id");if(!K.options.apiKey){if(!K.options.measurementId)throw Wt.create("no-api-key");Go.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${K.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Li[dt])throw Wt.create("already-exists",{id:dt});if(!da){!function _a(K){let oe=[];Array.isArray(window[K])?oe=window[K]:window[K]=oe}(qi);const{wrappedGtag:zt,gtagCore:xn}=function Q(K,oe,Ee,dt,Nt){let zt=function(...xn){window[dt].push(arguments)};return window[Nt]&&"function"==typeof window[Nt]&&(zt=window[Nt]),window[Nt]=function ue(K,oe,Ee,dt){function zt(){return zt=(0,H.Z)(function*(xn,_r,vr){try{"event"===xn?yield function Ya(K,oe,Ee,dt,Nt){return W.apply(this,arguments)}(K,oe,Ee,_r,vr):"config"===xn?yield function za(K,oe,Ee,dt,Nt,zt){return ea.apply(this,arguments)}(K,oe,Ee,dt,_r,vr):"consent"===xn?K("consent","update",vr):K("set",_r)}catch(Pr){Go.error(Pr)}}),zt.apply(this,arguments)}return function Nt(xn,_r,vr){return zt.apply(this,arguments)}}(zt,K,oe,Ee),{gtagCore:zt,wrappedGtag:window[Nt]}}(Li,Yn,_u,qi,qa);la=zt,$a=xn,da=!0}return Li[dt]=function Oa(K,oe,Ee,dt,Nt,zt,xn){return Ri.apply(this,arguments)}(K,Yn,_u,oe,$a,qi,Ee),new Yc(K)}function tt(){return us.apply(this,arguments)}function us(){return(us=(0,H.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch(K){return!1}})).apply(this,arguments)}const Bi="@firebase/analytics";!function Eu(){(0,he._registerComponent)(new we.wA(Cs,(oe,{options:Ee})=>bc(oe.getProvider("app").getImmediate(),oe.getProvider("installations-internal").getImmediate(),Ee),"PUBLIC")),(0,he._registerComponent)(new we.wA("analytics-internal",function K(oe){try{const Ee=oe.getProvider(Cs).getImmediate();return{logEvent:(dt,Nt,zt)=>function Dc(K,oe,Ee,dt){K=(0,le.m9)(K),function Ea(K,oe,Ee,dt,Nt){return Va.apply(this,arguments)}(la,Li[K.app.options.appId],oe,Ee,dt).catch(Nt=>Go.error(Nt))}(Ee,dt,Nt,zt)}}catch(Ee){throw Wt.create("interop-component-reg-failed",{reason:Ee})}},"PRIVATE")),(0,he.registerVersion)(Bi,"0.9.3"),(0,he.registerVersion)(Bi,"0.9.3","esm2017")}();var Ps=U(4408),Co=U(7565);const ha=new class Rc extends Co.v{}(class wu extends Ps.o{constructor(oe,Ee){super(oe,Ee),this.scheduler=oe,this.work=Ee}schedule(oe,Ee=0){return Ee>0?super.schedule(oe,Ee):(this.delay=Ee,this.state=oe,this.scheduler.flush(this),this)}execute(oe,Ee){return Ee>0||this.closed?super.execute(oe,Ee):this._execute(oe,Ee)}requestAsyncId(oe,Ee,dt=0){return null!=dt&&dt>0||null==dt&&this.delay>0?super.requestAsyncId(oe,Ee,dt):(oe.flush(this),0)}});var Na=U(4986),Lu=U(8505),to=U(5363),Qu=U(9468);const fa=new m.GfV("7.5.0"),Ca="__angularfire_symbol__analyticsIsSupportedValue",ks="__angularfire_symbol__analyticsIsSupported",Pa="__angularfire_symbol__remoteConfigIsSupportedValue",so="__angularfire_symbol__remoteConfigIsSupported",Za="__angularfire_symbol__messagingIsSupportedValue",Fs="__angularfire_symbol__messagingIsSupported";function Oo(K,oe,Ee){if(oe){if(1===oe.length)return oe[0];const zt=oe.filter(xn=>xn.app===Ee);if(1===zt.length)return zt[0]}return Ee.container.getProvider(K).getImmediate({optional:!0})}globalThis[ks]||(globalThis[ks]=tt().then(K=>globalThis[Ca]=K).catch(()=>globalThis[Ca]=!1)),globalThis[Fs]||(globalThis[Fs]=oo().then(K=>globalThis[Za]=K).catch(()=>globalThis[Za]=!1)),globalThis[so]||(globalThis[so]=Os().then(K=>globalThis[Pa]=K).catch(()=>globalThis[Pa]=!1));const ka=(K,oe)=>{const Ee=oe?[oe]:(0,J.C6)(),dt=[];return Ee.forEach(Nt=>{Nt.container.getProvider(K).instances.forEach(xn=>{dt.includes(xn)||dt.push(xn)})}),dt};function ds(){}class F{constructor(oe,Ee=ha){this.zone=oe,this.delegate=Ee}now(){return this.delegate.now()}schedule(oe,Ee,dt){const Nt=this.zone;return this.delegate.schedule(function(xn){Nt.runGuarded(()=>{oe.apply(this,[xn])})},Ee,dt)}}class B{constructor(oe){this.zone=oe,this.task=null}call(oe,Ee){const dt=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ds,{},ds,ds)),Ee.pipe((0,Lu.b)({next:dt,complete:dt,error:dt})).subscribe(oe).add(dt)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let O=(()=>{class K{constructor(Ee){this.ngZone=Ee,this.outsideAngular=Ee.runOutsideAngular(()=>new F(Zone.current)),this.insideAngular=Ee.run(()=>new F(Zone.current,Na.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return K.\u0275fac=function(Ee){return new(Ee||K)(m.LFG(m.R0b))},K.\u0275prov=m.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"}),K})();function V(){const K=globalThis.\u0275AngularFireScheduler;if(!K)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return K}function Ae(K){return K.pipe((0,to.Q)(V().outsideAngular))}function tn(K){return V(),function On(K){return function(Ee){return(Ee=Ee.lift(new B(K.ngZone))).pipe((0,Qu.R)(K.outsideAngular),(0,to.Q)(K.insideAngular))}}(V())(K)}},2090:(pn,Pe,U)=>{"use strict";U.d(Pe,{$s:()=>Un,BH:()=>yt,DV:()=>Gn,Dv:()=>qn,G6:()=>gt,GJ:()=>Mn,L:()=>be,LL:()=>q,Pz:()=>At,Sg:()=>st,UG:()=>$,UI:()=>Nn,US:()=>we,Wj:()=>_i,Wl:()=>rt,Yr:()=>mt,ZB:()=>De,ZR:()=>te,aH:()=>ct,b$:()=>qe,cI:()=>ke,dS:()=>jr,eu:()=>it,g5:()=>H,gK:()=>Wr,gQ:()=>Kt,h$:()=>ye,hl:()=>Le,hu:()=>J,jU:()=>lt,lb:()=>Wi,m9:()=>hr,ne:()=>Jr,p$:()=>ge,pd:()=>br,r3:()=>mn,ru:()=>Qe,tV:()=>$e,uI:()=>Ye,ug:()=>Pi,vZ:()=>Dn,w1:()=>ft,w9:()=>yn,xO:()=>Ir,xb:()=>Ar,z$:()=>Be,zI:()=>Ze,zd:()=>Vr});const m={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},J=function(He,ot){if(!He)throw H(ot)},H=function(He){return new Error("Firebase Database ("+m.SDK_VERSION+") INTERNAL ASSERT FAILED: "+He)},he=function(He){const ot=[];let ht=0;for(let qt=0;qt<He.length;qt++){let $t=He.charCodeAt(qt);$t<128?ot[ht++]=$t:$t<2048?(ot[ht++]=$t>>6|192,ot[ht++]=63&$t|128):55296==(64512&$t)&&qt+1<He.length&&56320==(64512&He.charCodeAt(qt+1))?($t=65536+((1023&$t)<<10)+(1023&He.charCodeAt(++qt)),ot[ht++]=$t>>18|240,ot[ht++]=$t>>12&63|128,ot[ht++]=$t>>6&63|128,ot[ht++]=63&$t|128):(ot[ht++]=$t>>12|224,ot[ht++]=$t>>6&63|128,ot[ht++]=63&$t|128)}return ot},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(He,ot){if(!Array.isArray(He))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ht=ot?this.byteToCharMapWebSafe_:this.byteToCharMap_,qt=[];for(let $t=0;$t<He.length;$t+=3){const Wn=He[$t],Cr=$t+1<He.length,Or=Cr?He[$t+1]:0,Zr=$t+2<He.length,fr=Zr?He[$t+2]:0;let vt=(15&Or)<<2|fr>>6,Je=63&fr;Zr||(Je=64,Cr||(vt=64)),qt.push(ht[Wn>>2],ht[(3&Wn)<<4|Or>>4],ht[vt],ht[Je])}return qt.join("")},encodeString(He,ot){return this.HAS_NATIVE_SUPPORT&&!ot?btoa(He):this.encodeByteArray(he(He),ot)},decodeString(He,ot){return this.HAS_NATIVE_SUPPORT&&!ot?atob(He):function(He){const ot=[];let ht=0,qt=0;for(;ht<He.length;){const $t=He[ht++];if($t<128)ot[qt++]=String.fromCharCode($t);else if($t>191&&$t<224){const Wn=He[ht++];ot[qt++]=String.fromCharCode((31&$t)<<6|63&Wn)}else if($t>239&&$t<365){const Zr=((7&$t)<<18|(63&He[ht++])<<12|(63&He[ht++])<<6|63&He[ht++])-65536;ot[qt++]=String.fromCharCode(55296+(Zr>>10)),ot[qt++]=String.fromCharCode(56320+(1023&Zr))}else{const Wn=He[ht++],Cr=He[ht++];ot[qt++]=String.fromCharCode((15&$t)<<12|(63&Wn)<<6|63&Cr)}}return ot.join("")}(this.decodeStringToByteArray(He,ot))},decodeStringToByteArray(He,ot){this.init_();const ht=ot?this.charToByteMapWebSafe_:this.charToByteMap_,qt=[];for(let $t=0;$t<He.length;){const Wn=ht[He.charAt($t++)],Or=$t<He.length?ht[He.charAt($t)]:0;++$t;const fr=$t<He.length?ht[He.charAt($t)]:64;++$t;const St=$t<He.length?ht[He.charAt($t)]:64;if(++$t,null==Wn||null==Or||null==fr||null==St)throw Error();qt.push(Wn<<2|Or>>4),64!==fr&&(qt.push(Or<<4&240|fr>>2),64!==St&&qt.push(fr<<6&192|St))}return qt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let He=0;He<this.ENCODED_VALS.length;He++)this.byteToCharMap_[He]=this.ENCODED_VALS.charAt(He),this.charToByteMap_[this.byteToCharMap_[He]]=He,this.byteToCharMapWebSafe_[He]=this.ENCODED_VALS_WEBSAFE.charAt(He),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[He]]=He,He>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(He)]=He,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(He)]=He)}}},ye=function(He){const ot=he(He);return we.encodeByteArray(ot,!0)},be=function(He){return ye(He).replace(/\./g,"")},$e=function(He){try{return we.decodeString(He,!0)}catch(ot){console.error("base64Decode failed: ",ot)}return null};function ge(He){return De(void 0,He)}function De(He,ot){if(!(ot instanceof Object))return ot;switch(ot.constructor){case Date:return new Date(ot.getTime());case Object:void 0===He&&(He={});break;case Array:He=[];break;default:return ot}for(const ht in ot)!ot.hasOwnProperty(ht)||!xe(ht)||(He[ht]=De(He[ht],ot[ht]));return He}function xe(He){return"__proto__"!==He}const We=()=>{try{return function Ne(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const He=process.env.__FIREBASE_DEFAULTS__;return He?JSON.parse(He):void 0})()||(()=>{if(typeof document>"u")return;let He;try{He=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(ht){return}const ot=He&&$e(He[1]);return ot&&JSON.parse(ot)})()}catch(He){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${He}`)}},ct=()=>{var He;return null===(He=We())||void 0===He?void 0:He.config},At=He=>{var ot;return null===(ot=We())||void 0===ot?void 0:ot[`_${He}`]};class yt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ot,ht)=>{this.resolve=ot,this.reject=ht})}wrapCallback(ot){return(ht,qt)=>{ht?this.reject(ht):this.resolve(qt),"function"==typeof ot&&(this.promise.catch(()=>{}),1===ot.length?ot(ht):ot(ht,qt))}}}function st(He,ot){if(He.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const qt=ot||"demo-project",$t=He.iat||0,Wn=He.sub||He.user_id;if(!Wn)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Cr=Object.assign({iss:`https://securetoken.google.com/${qt}`,aud:qt,iat:$t,exp:$t+3600,auth_time:$t,sub:Wn,user_id:Wn,firebase:{sign_in_provider:"custom",identities:{}}},He);return[be(JSON.stringify({alg:"none",type:"JWT"})),be(JSON.stringify(Cr)),""].join(".")}function Be(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ye(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function $(){var He;const ot=null===(He=We())||void 0===He?void 0:He.forceEnvironment;if("node"===ot)return!0;if("browser"===ot)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(ht){return!1}}function lt(){return"object"==typeof self&&self.self===self}function Qe(){const He="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof He&&void 0!==He.id}function qe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ft(){const He=Be();return He.indexOf("MSIE ")>=0||He.indexOf("Trident/")>=0}function mt(){return!0===m.NODE_CLIENT||!0===m.NODE_ADMIN}function gt(){return!$()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Le(){try{return"object"==typeof indexedDB}catch(He){return!1}}function it(){return new Promise((He,ot)=>{try{let ht=!0;const qt="validate-browser-context-for-indexeddb-analytics-module",$t=self.indexedDB.open(qt);$t.onsuccess=()=>{$t.result.close(),ht||self.indexedDB.deleteDatabase(qt),He(!0)},$t.onupgradeneeded=()=>{ht=!1},$t.onerror=()=>{var Wn;ot((null===(Wn=$t.error)||void 0===Wn?void 0:Wn.message)||"")}}catch(ht){ot(ht)}})}function Ze(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class te extends Error{constructor(ot,ht,qt){super(ht),this.code=ot,this.customData=qt,this.name="FirebaseError",Object.setPrototypeOf(this,te.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,q.prototype.create)}}class q{constructor(ot,ht,qt){this.service=ot,this.serviceName=ht,this.errors=qt}create(ot,...ht){const qt=ht[0]||{},$t=`${this.service}/${ot}`,Wn=this.errors[ot],Cr=Wn?function re(He,ot){return He.replace(fe,(ht,qt)=>{const $t=ot[qt];return null!=$t?String($t):`<${qt}?>`})}(Wn,qt):"Error";return new te($t,`${this.serviceName}: ${Cr} (${$t}).`,qt)}}const fe=/\{\$([^}]+)}/g;function ke(He){return JSON.parse(He)}function rt(He){return JSON.stringify(He)}const Qt=function(He){let ot={},ht={},qt={},$t="";try{const Wn=He.split(".");ot=ke($e(Wn[0])||""),ht=ke($e(Wn[1])||""),$t=Wn[2],qt=ht.d||{},delete ht.d}catch(Wn){}return{header:ot,claims:ht,data:qt,signature:$t}},yn=function(He){const ht=Qt(He).claims;return!!ht&&"object"==typeof ht&&ht.hasOwnProperty("iat")},Mn=function(He){const ot=Qt(He).claims;return"object"==typeof ot&&!0===ot.admin};function mn(He,ot){return Object.prototype.hasOwnProperty.call(He,ot)}function Gn(He,ot){if(Object.prototype.hasOwnProperty.call(He,ot))return He[ot]}function Ar(He){for(const ot in He)if(Object.prototype.hasOwnProperty.call(He,ot))return!1;return!0}function Nn(He,ot,ht){const qt={};for(const $t in He)Object.prototype.hasOwnProperty.call(He,$t)&&(qt[$t]=ot.call(ht,He[$t],$t,He));return qt}function Dn(He,ot){if(He===ot)return!0;const ht=Object.keys(He),qt=Object.keys(ot);for(const $t of ht){if(!qt.includes($t))return!1;const Wn=He[$t],Cr=ot[$t];if(En(Wn)&&En(Cr)){if(!Dn(Wn,Cr))return!1}else if(Wn!==Cr)return!1}for(const $t of qt)if(!ht.includes($t))return!1;return!0}function En(He){return null!==He&&"object"==typeof He}function Ir(He){const ot=[];for(const[ht,qt]of Object.entries(He))Array.isArray(qt)?qt.forEach($t=>{ot.push(encodeURIComponent(ht)+"="+encodeURIComponent($t))}):ot.push(encodeURIComponent(ht)+"="+encodeURIComponent(qt));return ot.length?"&"+ot.join("&"):""}function Vr(He){const ot={};return He.replace(/^\?/,"").split("&").forEach(qt=>{if(qt){const[$t,Wn]=qt.split("=");ot[decodeURIComponent($t)]=decodeURIComponent(Wn)}}),ot}function br(He){const ot=He.indexOf("?");if(!ot)return"";const ht=He.indexOf("#",ot);return He.substring(ot,ht>0?ht:void 0)}class Kt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let ot=1;ot<this.blockSize;++ot)this.pad_[ot]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(ot,ht){ht||(ht=0);const qt=this.W_;if("string"==typeof ot)for(let St=0;St<16;St++)qt[St]=ot.charCodeAt(ht)<<24|ot.charCodeAt(ht+1)<<16|ot.charCodeAt(ht+2)<<8|ot.charCodeAt(ht+3),ht+=4;else for(let St=0;St<16;St++)qt[St]=ot[ht]<<24|ot[ht+1]<<16|ot[ht+2]<<8|ot[ht+3],ht+=4;for(let St=16;St<80;St++){const vt=qt[St-3]^qt[St-8]^qt[St-14]^qt[St-16];qt[St]=4294967295&(vt<<1|vt>>>31)}let fr,vi,$t=this.chain_[0],Wn=this.chain_[1],Cr=this.chain_[2],Or=this.chain_[3],Zr=this.chain_[4];for(let St=0;St<80;St++){St<40?St<20?(fr=Or^Wn&(Cr^Or),vi=1518500249):(fr=Wn^Cr^Or,vi=1859775393):St<60?(fr=Wn&Cr|Or&(Wn|Cr),vi=2400959708):(fr=Wn^Cr^Or,vi=3395469782);const vt=($t<<5|$t>>>27)+fr+Zr+vi+qt[St]&4294967295;Zr=Or,Or=Cr,Cr=4294967295&(Wn<<30|Wn>>>2),Wn=$t,$t=vt}this.chain_[0]=this.chain_[0]+$t&4294967295,this.chain_[1]=this.chain_[1]+Wn&4294967295,this.chain_[2]=this.chain_[2]+Cr&4294967295,this.chain_[3]=this.chain_[3]+Or&4294967295,this.chain_[4]=this.chain_[4]+Zr&4294967295}update(ot,ht){if(null==ot)return;void 0===ht&&(ht=ot.length);const qt=ht-this.blockSize;let $t=0;const Wn=this.buf_;let Cr=this.inbuf_;for(;$t<ht;){if(0===Cr)for(;$t<=qt;)this.compress_(ot,$t),$t+=this.blockSize;if("string"==typeof ot){for(;$t<ht;)if(Wn[Cr]=ot.charCodeAt($t),++Cr,++$t,Cr===this.blockSize){this.compress_(Wn),Cr=0;break}}else for(;$t<ht;)if(Wn[Cr]=ot[$t],++Cr,++$t,Cr===this.blockSize){this.compress_(Wn),Cr=0;break}}this.inbuf_=Cr,this.total_+=ht}digest(){const ot=[];let ht=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let $t=this.blockSize-1;$t>=56;$t--)this.buf_[$t]=255&ht,ht/=256;this.compress_(this.buf_);let qt=0;for(let $t=0;$t<5;$t++)for(let Wn=24;Wn>=0;Wn-=8)ot[qt]=this.chain_[$t]>>Wn&255,++qt;return ot}}function Jr(He,ot){const ht=new rr(He,ot);return ht.subscribe.bind(ht)}class rr{constructor(ot,ht){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ht,this.task.then(()=>{ot(this)}).catch(qt=>{this.error(qt)})}next(ot){this.forEachObserver(ht=>{ht.next(ot)})}error(ot){this.forEachObserver(ht=>{ht.error(ot)}),this.close(ot)}complete(){this.forEachObserver(ot=>{ot.complete()}),this.close()}subscribe(ot,ht,qt){let $t;if(void 0===ot&&void 0===ht&&void 0===qt)throw new Error("Missing Observer.");$t=function cr(He,ot){if("object"!=typeof He||null===He)return!1;for(const ht of ot)if(ht in He&&"function"==typeof He[ht])return!0;return!1}(ot,["next","error","complete"])?ot:{next:ot,error:ht,complete:qt},void 0===$t.next&&($t.next=zi),void 0===$t.error&&($t.error=zi),void 0===$t.complete&&($t.complete=zi);const Wn=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$t.error(this.finalError):$t.complete()}catch(Cr){}}),this.observers.push($t),Wn}unsubscribeOne(ot){void 0===this.observers||void 0===this.observers[ot]||(delete this.observers[ot],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ot){if(!this.finalized)for(let ht=0;ht<this.observers.length;ht++)this.sendOne(ht,ot)}sendOne(ot,ht){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ot])try{ht(this.observers[ot])}catch(qt){typeof console<"u"&&console.error&&console.error(qt)}})}close(ot){this.finalized||(this.finalized=!0,void 0!==ot&&(this.finalError=ot),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zi(){}const qn=function(He,ot,ht,qt){let $t;if(qt<ot?$t="at least "+ot:qt>ht&&($t=0===ht?"none":"no more than "+ht),$t)throw new Error(He+" failed: Was called with "+qt+(1===qt?" argument.":" arguments.")+" Expects "+$t+".")};function Wr(He,ot){return`${He} failed: ${ot} argument `}function _i(He,ot,ht,qt){if((!qt||ht)&&"function"!=typeof ht)throw new Error(Wr(He,ot)+"must be a valid function.")}function Wi(He,ot,ht,qt){if((!qt||ht)&&("object"!=typeof ht||null===ht))throw new Error(Wr(He,ot)+"must be a valid context object.")}const jr=function(He){const ot=[];let ht=0;for(let qt=0;qt<He.length;qt++){let $t=He.charCodeAt(qt);if($t>=55296&&$t<=56319){const Wn=$t-55296;qt++,J(qt<He.length,"Surrogate pair missing trail surrogate."),$t=65536+(Wn<<10)+(He.charCodeAt(qt)-56320)}$t<128?ot[ht++]=$t:$t<2048?(ot[ht++]=$t>>6|192,ot[ht++]=63&$t|128):$t<65536?(ot[ht++]=$t>>12|224,ot[ht++]=$t>>6&63|128,ot[ht++]=63&$t|128):(ot[ht++]=$t>>18|240,ot[ht++]=$t>>12&63|128,ot[ht++]=$t>>6&63|128,ot[ht++]=63&$t|128)}return ot},Pi=function(He){let ot=0;for(let ht=0;ht<He.length;ht++){const qt=He.charCodeAt(ht);qt<128?ot++:qt<2048?ot+=2:qt>=55296&&qt<=56319?(ot+=4,ht++):ot+=3}return ot},Er=1e3,ii=2,wn=144e5,ln=.5;function Un(He,ot=Er,ht=ii){const qt=ot*Math.pow(ht,He),$t=Math.round(ln*qt*(Math.random()-.5)*2);return Math.min(wn,qt+$t)}function hr(He){return He&&He._delegate?He._delegate:He}},2078:(pn,Pe,U)=>{"use strict";U.d(Pe,{Br:()=>io,dr:()=>jr,oU:()=>Rr,cs:()=>qs,YG:()=>Un,Sm:()=>dr,PM:()=>jn,FN:()=>hr,Zi:()=>He,Dq:()=>ht,wI:()=>Wn,W2:()=>Cr,jY:()=>Je,Gu:()=>wt,gu:()=>an,Xz:()=>Tn,pK:()=>Yr,Ie:()=>Ei,u8:()=>pi,IK:()=>ki,td:()=>wo,Q$:()=>Mr,q_:()=>pr,z0:()=>Tr,fG:()=>oi,zc:()=>Ln,jP:()=>is,Nd:()=>xt,t9:()=>In,n0:()=>Zn,yq:()=>Ft,ZU:()=>Ht,UN:()=>Qo,wd:()=>mr,sr:()=>Yi,Pc:()=>Y,r4:()=>No,HT:()=>$i,IN:()=>Fr,SH:()=>Ao,as:()=>Kt,YI:()=>os,QI:()=>rr,j9:()=>Bn});var m=U(4650),J=U(433),H=U(655),he=U(8421),le=U(9751),we=U(5577),ye=U(1144),be=U(576),$e=U(3268);const ge=["addListener","removeListener"],De=["addEventListener","removeEventListener"],xe=["on","off"];function Ne(w,T,S,j){if((0,be.m)(S)&&(j=S,S=void 0),j)return Ne(w,T,S).pipe((0,$e.Z)(j));const[ve,Vt]=function We(w){return(0,be.m)(w.addEventListener)&&(0,be.m)(w.removeEventListener)}(w)?De.map(_n=>Vn=>w[_n](T,Vn,S)):function Ke(w){return(0,be.m)(w.addListener)&&(0,be.m)(w.removeListener)}(w)?ge.map(Xe(w,T)):function Lt(w){return(0,be.m)(w.on)&&(0,be.m)(w.off)}(w)?xe.map(Xe(w,T)):[];if(!ve&&(0,ye.z)(w))return(0,we.z)(_n=>Ne(_n,T,S))((0,he.Xf)(w));if(!ve)throw new TypeError("Invalid event target");return new le.y(_n=>{const Vn=(...wr)=>_n.next(1<wr.length?wr:wr[0]);return ve(Vn),()=>Vt(Vn)})}function Xe(w,T){return S=>j=>w[S](T,j)}var Fe=U(7579),Ce=U(1135),ct=U(2435),Ye=(U(181),U(6439),U(7838),U(1898),U(5179)),$=U(5730),lt=U(1843),qe=(U(6369),U(7996)),pt=(U(3457),U(4349),U(1308)),me=U(9300),te=U(3900),q=U(1884),re=U(6895);const ke=Ye.i,Dt=["*"],Yt=["outlet"],yn=[[["","slot","top"]],"*"],Mn=["[slot=top]","*"],Ar=w=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(w):"function"==typeof requestAnimationFrame?requestAnimationFrame(w):setTimeout(w),Nn=w=>!!w.resolveComponentFactory;let Dn=(()=>{class w{constructor(S,j){this.injector=S,this.el=j,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(S){this.el.nativeElement.value=this.lastValue=null==S?"":S,En(this.el)}handleChangeEvent(S,j){S===this.el.nativeElement&&(j!==this.lastValue&&(this.lastValue=j,this.onChange(j)),En(this.el))}_handleBlurEvent(S){S===this.el.nativeElement&&(this.onTouched(),En(this.el))}registerOnChange(S){this.onChange=S}registerOnTouched(S){this.onTouched=S}setDisabledState(S){this.el.nativeElement.disabled=S}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let S;try{S=this.injector.get(J.a5)}catch(ve){}if(!S)return;S.statusChanges&&(this.statusChanges=S.statusChanges.subscribe(()=>En(this.el)));const j=S.control;j&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(Vt=>{if(typeof j[Vt]<"u"){const _n=j[Vt].bind(j);j[Vt]=(...Vn)=>{_n(...Vn),En(this.el)}}})}}return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.zs3),m.Y36(m.SBq))},w.\u0275dir=m.lG2({type:w,hostBindings:function(S,j){1&S&&m.NdJ("ionBlur",function(Vt){return j._handleBlurEvent(Vt.target)})}}),w})();const En=w=>{Ar(()=>{const T=w.nativeElement,S=null!=T.value&&T.value.toString().length>0,j=sn(T);Ir(T,j);const ve=T.closest("ion-item");ve&&Ir(ve,S?[...j,"item-has-value"]:j)})},sn=w=>{const T=w.classList,S=[];for(let j=0;j<T.length;j++){const ve=T.item(j);null!==ve&&Vr(ve,"ng-")&&S.push(`ion-${ve.substring(3)}`)}return S},Ir=(w,T)=>{const S=w.classList;S.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),S.add(...T)},Vr=(w,T)=>w.substring(0,T.length)===T;let Kt=(()=>{class w extends Dn{constructor(S,j){super(S,j)}_handleIonChange(S){this.handleChangeEvent(S,S.value)}registerOnChange(S){super.registerOnChange(j=>{S(""===j?null:parseFloat(j))})}}return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.zs3),m.Y36(m.SBq))},w.\u0275dir=m.lG2({type:w,selectors:[["ion-input","type","number"]],hostBindings:function(S,j){1&S&&m.NdJ("ionChange",function(Vt){return j._handleIonChange(Vt.target)})},features:[m._Bn([{provide:J.JU,useExisting:w,multi:!0}]),m.qOj]}),w})(),rr=(()=>{class w extends Dn{constructor(S,j){super(S,j)}_handleChangeEvent(S){this.handleChangeEvent(S,S.value)}}return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.zs3),m.Y36(m.SBq))},w.\u0275dir=m.lG2({type:w,selectors:[["ion-range"],["ion-select"],["ion-radio-group"],["ion-segment"],["ion-datetime"]],hostBindings:function(S,j){1&S&&m.NdJ("ionChange",function(Vt){return j._handleChangeEvent(Vt.target)})},features:[m._Bn([{provide:J.JU,useExisting:w,multi:!0}]),m.qOj]}),w})(),Bn=(()=>{class w extends Dn{constructor(S,j){super(S,j)}_handleInputEvent(S){this.handleChangeEvent(S,S.value)}}return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.zs3),m.Y36(m.SBq))},w.\u0275dir=m.lG2({type:w,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(S,j){1&S&&m.NdJ("ionChange",function(Vt){return j._handleInputEvent(Vt.target)})},features:[m._Bn([{provide:J.JU,useExisting:w,multi:!0}]),m.qOj]}),w})();const cr=(w,T)=>{const S=w.prototype;T.forEach(j=>{Object.defineProperty(S,j,{get(){return this.el[j]},set(ve){this.z.runOutsideAngular(()=>this.el[j]=ve)}})})},zi=(w,T)=>{const S=w.prototype;T.forEach(j=>{S[j]=function(){const ve=arguments;return this.z.runOutsideAngular(()=>this.el[j].apply(this.el,ve))}})},qn=(w,T,S)=>{S.forEach(j=>w[j]=Ne(T,j))};function cn(w){return function(S){const{defineCustomElementFn:j,inputs:ve,methods:Vt}=w;return void 0!==j&&j(),ve&&cr(S,ve),Vt&&zi(S,Vt),S}}let jr=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-app"]],ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0})],w),w})(),Rr=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-back-button"]],inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"]})],w),w})(),Un=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement,qn(this,this.el,["ionFocus","ionBlur"])}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],w),w})(),dr=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["collapse"]})],w),w})(),jn=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],w),w})(),hr=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-card-content"]],inputs:{mode:"mode"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["mode"]})],w),w})(),He=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-card-header"]],inputs:{color:"color",mode:"mode",translucent:"translucent"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["color","mode","translucent"]})],w),w})(),ht=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-card-title"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["color","mode"]})],w),w})(),Wn=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-col"]],inputs:{offset:"offset",offsetLg:"offsetLg",offsetMd:"offsetMd",offsetSm:"offsetSm",offsetXl:"offsetXl",offsetXs:"offsetXs",pull:"pull",pullLg:"pullLg",pullMd:"pullMd",pullSm:"pullSm",pullXl:"pullXl",pullXs:"pullXs",push:"push",pushLg:"pushLg",pushMd:"pushMd",pushSm:"pushSm",pushXl:"pushXl",pushXs:"pushXs",size:"size",sizeLg:"sizeLg",sizeMd:"sizeMd",sizeSm:"sizeSm",sizeXl:"sizeXl",sizeXs:"sizeXs"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXs","pull","pullLg","pullMd","pullSm","pullXl","pullXs","push","pushLg","pushMd","pushSm","pushXl","pushXs","size","sizeLg","sizeMd","sizeSm","sizeXl","sizeXs"]})],w),w})(),Cr=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement,qn(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],w),w})(),Je=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-grid"]],inputs:{fixed:"fixed"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["fixed"]})],w),w})(),wt=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["collapse","mode","translucent"]})],w),w})(),an=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],w),w})(),Tn=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement,qn(this,this.el,["ionImgWillLoad","ionImgDidLoad","ionError"])}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-img"]],inputs:{alt:"alt",src:"src"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["alt","src"]})],w),w})(),Yr=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement,qn(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","debounce","disabled","enterkeyhint","inputmode","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],w),w})(),Ei=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],w),w})(),pi=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-item-option"]],inputs:{color:"color",disabled:"disabled",download:"download",expandable:"expandable",href:"href",mode:"mode",rel:"rel",target:"target",type:"type"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["color","disabled","download","expandable","href","mode","rel","target","type"]})],w),w})(),ki=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement,qn(this,this.el,["ionSwipe"])}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-item-options"]],inputs:{side:"side"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["side"]})],w),w})(),wo=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement,qn(this,this.el,["ionDrag"])}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-item-sliding"]],inputs:{disabled:"disabled"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["disabled"],methods:["getOpenAmount","getSlidingRatio","open","close","closeOpened"]})],w),w})(),Mr=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["color","mode","position"]})],w),w})(),pr=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],w),w})(),Tr=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement,qn(this,this.el,["ionWillOpen","ionWillClose","ionDidOpen","ionDidClose"])}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-menu"]],inputs:{contentId:"contentId",disabled:"disabled",maxEdgeStart:"maxEdgeStart",menuId:"menuId",side:"side",swipeGesture:"swipeGesture",type:"type"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["contentId","disabled","maxEdgeStart","menuId","side","swipeGesture","type"],methods:["isOpen","isActive","open","close","toggle","setOpen"]})],w),w})(),oi=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-menu-button"]],inputs:{autoHide:"autoHide",color:"color",disabled:"disabled",menu:"menu",mode:"mode",type:"type"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["autoHide","color","disabled","menu","mode","type"]})],w),w})(),Ln=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-menu-toggle"]],inputs:{autoHide:"autoHide",menu:"menu"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["autoHide","menu"]})],w),w})(),xt=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-row"]],ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0})],w),w})(),In=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement,qn(this,this.el,["ionChange","ionCancel","ionDismiss","ionFocus","ionBlur"])}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-select"]],inputs:{cancelText:"cancelText",compareWith:"compareWith",disabled:"disabled",interface:"interface",interfaceOptions:"interfaceOptions",mode:"mode",multiple:"multiple",name:"name",okText:"okText",placeholder:"placeholder",selectedText:"selectedText",value:"value"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["cancelText","compareWith","disabled","interface","interfaceOptions","mode","multiple","name","okText","placeholder","selectedText","value"],methods:["open"]})],w),w})(),Zn=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-select-option"]],inputs:{disabled:"disabled",value:"value"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["disabled","value"]})],w),w})(),Ft=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-tab-bar"]],inputs:{color:"color",mode:"mode",selectedTab:"selectedTab",translucent:"translucent"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["color","mode","selectedTab","translucent"]})],w),w})(),Ht=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-tab-button"]],inputs:{disabled:"disabled",download:"download",href:"href",layout:"layout",mode:"mode",rel:"rel",selected:"selected",tab:"tab",target:"target"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["disabled","download","href","layout","mode","rel","selected","tab","target"]})],w),w})(),mr=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["color","size"]})],w),w})(),Yi=(()=>{let w=class{constructor(S,j,ve){this.z=ve,S.detach(),this.el=j.nativeElement}};return w.\u0275fac=function(S){return new(S||w)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Dt,decls:1,vars:0,template:function(S,j){1&S&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),w=(0,H.gn)([cn({defineCustomElementFn:void 0,inputs:["color","mode"]})],w),w})();class ji{constructor(T={}){this.data=T}get(T){return this.data[T]}}let uo=(()=>{class w{constructor(S,j){this.zone=S,this.appRef=j}create(S,j,ve,Vt){return new Xr(S,j,ve,this.appRef,this.zone,Vt)}}return w.\u0275fac=function(S){return new(S||w)(m.LFG(m.R0b),m.LFG(m.z2F))},w.\u0275prov=m.Yz7({token:w,factory:w.\u0275fac}),w})();class Xr{constructor(T,S,j,ve,Vt,_n){this.resolverOrInjector=T,this.injector=S,this.location=j,this.appRef=ve,this.zone=Vt,this.elementReferenceKey=_n,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(T,S,j,ve){return this.zone.run(()=>new Promise(Vt=>{const _n=Object.assign({},j);void 0!==this.elementReferenceKey&&(_n[this.elementReferenceKey]=T),Vt(Qr(this.zone,this.resolverOrInjector,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,T,S,_n,ve))}))}removeViewFromDom(T,S){return this.zone.run(()=>new Promise(j=>{const ve=this.elRefMap.get(S);if(ve){ve.destroy(),this.elRefMap.delete(S);const Vt=this.elEventsMap.get(S);Vt&&(Vt(),this.elEventsMap.delete(S))}j()}))}}const Qr=(w,T,S,j,ve,Vt,_n,Vn,wr,li,ee)=>{let ie;const Te=m.zs3.create({providers:xo(li),parent:S});if(T&&Nn(T)){const dn=T.resolveComponentFactory(wr);ie=j?j.createComponent(dn,j.length,Te):dn.create(Te)}else{if(!j)return null;ie=j.createComponent(wr,{index:j.indexOf,injector:Te,environmentInjector:T})}const nt=ie.instance,Et=ie.location.nativeElement;if(li&&Object.assign(nt,li),ee)for(const dn of ee)Et.classList.add(dn);const Xt=Os(w,nt,Et);return Vn.appendChild(Et),j||ve.attachView(ie.hostView),ie.changeDetectorRef.reattach(),Vt.set(Et,ie),_n.set(Et,Xt),Et},Si=[lt.L,lt.a,lt.b,lt.c,lt.d],Os=(w,T,S)=>w.run(()=>{const j=Si.filter(ve=>"function"==typeof T[ve]).map(ve=>{const Vt=_n=>T[ve](_n.detail);return S.addEventListener(ve,Vt),()=>S.removeEventListener(ve,Vt)});return()=>j.forEach(ve=>ve())}),zs=new m.OlP("NavParamsToken"),xo=w=>[{provide:zs,useValue:w},{provide:ji,useFactory:ns,deps:[zs]}],ns=w=>new ji(w),Mo=(w,T)=>((w=w.filter(S=>S.stackId!==T.stackId)).push(T),w),ps=(w,T)=>{const S=w.createUrlTree(["."],{relativeTo:T});return w.serializeUrl(S)},gs=(w,T)=>{if(!w)return;const S=ms(T);for(let j=0;j<S.length;j++){if(j>=w.length)return S[j];if(S[j]!==w[j])return}},ms=w=>w.split("/").map(T=>T.trim()).filter(T=>""!==T),Xo=w=>{w&&(w.ref.destroy(),w.unlistenEvents())};class Ua{constructor(T,S,j,ve,Vt,_n){this.containerEl=S,this.router=j,this.navCtrl=ve,this.zone=Vt,this.location=_n,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==T?ms(T):void 0}createView(T,S){var j;const ve=ps(this.router,S),Vt=null===(j=null==T?void 0:T.location)||void 0===j?void 0:j.nativeElement,_n=Os(this.zone,T.instance,Vt);return{id:this.nextId++,stackId:gs(this.tabsPrefix,ve),unlistenEvents:_n,element:Vt,ref:T,url:ve}}getExistingView(T){const S=ps(this.router,T),j=this.views.find(ve=>ve.url===S);return j&&j.ref.changeDetectorRef.reattach(),j}setActive(T){var S,j;const ve=this.navCtrl.consumeTransition();let{direction:Vt,animation:_n,animationBuilder:Vn}=ve;const wr=this.activeView,li=((w,T)=>!T||w.stackId!==T.stackId)(T,wr);li&&(Vt="back",_n=void 0);const ee=this.views.slice();let ie;const Te=this.router;Te.getCurrentNavigation?ie=Te.getCurrentNavigation():!(null===(S=Te.navigations)||void 0===S)&&S.value&&(ie=Te.navigations.value),null!==(j=null==ie?void 0:ie.extras)&&void 0!==j&&j.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const nt=this.views.includes(T),Et=this.insertView(T,Vt);nt||T.ref.changeDetectorRef.detectChanges();const Xt=T.animationBuilder;return void 0===Vn&&"back"===Vt&&!li&&void 0!==Xt&&(Vn=Xt),wr&&(wr.animationBuilder=Vn),this.zone.runOutsideAngular(()=>this.wait(()=>(wr&&wr.ref.changeDetectorRef.detach(),T.ref.changeDetectorRef.reattach(),this.transition(T,wr,_n,this.canGoBack(1),!1,Vn).then(()=>Ws(T,Et,ee,this.location,this.zone)).then(()=>({enteringView:T,direction:Vt,animation:_n,tabSwitch:li})))))}canGoBack(T,S=this.getActiveStackId()){return this.getStack(S).length>T}pop(T,S=this.getActiveStackId()){return this.zone.run(()=>{var j,ve;const Vt=this.getStack(S);if(Vt.length<=T)return Promise.resolve(!1);const _n=Vt[Vt.length-T-1];let Vn=_n.url;const wr=_n.savedData;if(wr){const ee=wr.get("primary");null!==(ve=null===(j=null==ee?void 0:ee.route)||void 0===j?void 0:j._routerState)&&void 0!==ve&&ve.snapshot.url&&(Vn=ee.route._routerState.snapshot.url)}const{animationBuilder:li}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(Vn,Object.assign(Object.assign({},_n.savedExtras),{animation:li})).then(()=>!0)})}startBackTransition(){const T=this.activeView;if(T){const S=this.getStack(T.stackId),j=S[S.length-2],ve=j.animationBuilder;return this.wait(()=>this.transition(j,T,"back",this.canGoBack(2),!0,ve))}return Promise.resolve()}endBackTransition(T){T?(this.skipTransition=!0,this.pop(1)):this.activeView&&Ys(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(T){const S=this.getStack(T);return S.length>0?S[S.length-1]:void 0}getRootUrl(T){const S=this.getStack(T);return S.length>0?S[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(Xo),this.activeView=void 0,this.views=[]}getStack(T){return this.views.filter(S=>S.stackId===T)}insertView(T,S){return this.activeView=T,this.views=((w,T,S)=>"root"===S?Mo(w,T):"forward"===S?((w,T)=>(w.indexOf(T)>=0?w=w.filter(j=>j.stackId!==T.stackId||j.id<=T.id):w.push(T),w))(w,T):((w,T)=>w.indexOf(T)>=0?w.filter(j=>j.stackId!==T.stackId||j.id<=T.id):Mo(w,T))(w,T))(this.views,T,S),this.views.slice()}transition(T,S,j,ve,Vt,_n){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(S===T)return Promise.resolve(!1);const Vn=T?T.element:void 0,wr=S?S.element:void 0,li=this.containerEl;return Vn&&Vn!==wr&&(Vn.classList.add("ion-page"),Vn.classList.add("ion-page-invisible"),Vn.parentElement!==li&&li.appendChild(Vn),li.commit)?li.commit(Vn,wr,{deepWait:!0,duration:void 0===j?0:void 0,direction:j,showGoBack:ve,progressAnimation:Vt,animationBuilder:_n}):Promise.resolve(!1)}wait(T){return(0,H.mG)(this,void 0,void 0,function*(){void 0!==this.runningTask&&(yield this.runningTask,this.runningTask=void 0);const S=this.runningTask=T();return S.finally(()=>this.runningTask=void 0),S})}}const Ws=(w,T,S,j,ve)=>"function"==typeof requestAnimationFrame?new Promise(Vt=>{requestAnimationFrame(()=>{Ys(w,T,S,j,ve),Vt()})}):Promise.resolve(),Ys=(w,T,S,j,ve)=>{ve.run(()=>S.filter(Vt=>!T.includes(Vt)).forEach(Xo)),T.forEach(Vt=>{const Vn=j.path().split("?")[0].split("#")[0];if(Vt!==w&&Vt.url!==Vn){const wr=Vt.element;wr.setAttribute("aria-hidden","true"),wr.classList.add("ion-page-hidden"),Vt.ref.changeDetectorRef.detach()}})};let Mi=(()=>{class w{get(S,j){const ve=cs();return ve?ve.get(S,j):null}getBoolean(S,j){const ve=cs();return!!ve&&ve.getBoolean(S,j)}getNumber(S,j){const ve=cs();return ve?ve.getNumber(S,j):0}}return w.\u0275fac=function(S){return new(S||w)},w.\u0275prov=m.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();const tr=new m.OlP("USERCONFIG"),cs=()=>{if(typeof window<"u"){const w=window.Ionic;if(null!=w&&w.config)return w.config}return null};let rs=(()=>{class w{constructor(S,j){this.doc=S,this.backButton=new Fe.x,this.keyboardDidShow=new Fe.x,this.keyboardDidHide=new Fe.x,this.pause=new Fe.x,this.resume=new Fe.x,this.resize=new Fe.x,j.run(()=>{var ve;let Vt;this.win=S.defaultView,this.backButton.subscribeWithPriority=function(_n,Vn){return this.subscribe(wr=>wr.register(_n,li=>j.run(()=>Vn(li))))},$r(this.pause,S,"pause"),$r(this.resume,S,"resume"),$r(this.backButton,S,"ionBackButton"),$r(this.resize,this.win,"resize"),$r(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),$r(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(_n=>{Vt=_n}),null!==(ve=this.win)&&void 0!==ve&&ve.cordova?S.addEventListener("deviceready",()=>{Vt("cordova")},{once:!0}):Vt("dom")})}is(S){return(0,Ye.a)(this.win,S)}platforms(){return(0,Ye.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(S){return Ks(this.win.location.href,S)}isLandscape(){return!this.isPortrait()}isPortrait(){var S,j;return null===(j=(S=this.win).matchMedia)||void 0===j?void 0:j.call(S,"(orientation: portrait)").matches}testUserAgent(S){const j=this.win.navigator;return!!(null!=j&&j.userAgent&&j.userAgent.indexOf(S)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return w.\u0275fac=function(S){return new(S||w)(m.LFG(re.K0),m.LFG(m.R0b))},w.\u0275prov=m.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();const Ks=(w,T)=>{T=T.replace(/[[\]\\]/g,"\\$&");const j=new RegExp("[\\?&]"+T+"=([^&#]*)").exec(w);return j?decodeURIComponent(j[1].replace(/\+/g," ")):null},$r=(w,T,S)=>{T&&T.addEventListener(S,j=>{w.next(null!=j?j.detail:void 0)})};let Ao=(()=>{class w{constructor(S,j,ve,Vt){this.location=j,this.serializer=ve,this.router=Vt,this.direction=vs,this.animated=lo,this.guessDirection="forward",this.lastNavId=-1,Vt&&Vt.events.subscribe(_n=>{if(_n instanceof ct.OD){const Vn=_n.restoredState?_n.restoredState.navigationId:_n.id;this.guessDirection=Vn<this.lastNavId?"back":"forward",this.guessAnimation=_n.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?_n.id:Vn}}),S.backButton.subscribeWithPriority(0,_n=>{this.pop(),_n()})}navigateForward(S,j={}){return this.setDirection("forward",j.animated,j.animationDirection,j.animation),this.navigate(S,j)}navigateBack(S,j={}){return this.setDirection("back",j.animated,j.animationDirection,j.animation),this.navigate(S,j)}navigateRoot(S,j={}){return this.setDirection("root",j.animated,j.animationDirection,j.animation),this.navigate(S,j)}back(S={animated:!0,animationDirection:"back"}){return this.setDirection("back",S.animated,S.animationDirection,S.animation),this.location.back()}pop(){return(0,H.mG)(this,void 0,void 0,function*(){let S=this.topOutlet;for(;S&&!(yield S.pop());)S=S.parentOutlet})}setDirection(S,j,ve,Vt){this.direction=S,this.animated=co(S,j,ve),this.animationBuilder=Vt}setTopOutlet(S){this.topOutlet=S}consumeTransition(){let j,S="root";const ve=this.animationBuilder;return"auto"===this.direction?(S=this.guessDirection,j=this.guessAnimation):(j=this.animated,S=this.direction),this.direction=vs,this.animated=lo,this.animationBuilder=void 0,{direction:S,animation:j,animationBuilder:ve}}navigate(S,j){if(Array.isArray(S))return this.router.navigate(S,j);{const ve=this.serializer.parse(S.toString());return void 0!==j.queryParams&&(ve.queryParams=Object.assign({},j.queryParams)),void 0!==j.fragment&&(ve.fragment=j.fragment),this.router.navigateByUrl(ve,j)}}}return w.\u0275fac=function(S){return new(S||w)(m.LFG(rs),m.LFG(re.Ye),m.LFG(ct.Hx),m.LFG(ct.F0,8))},w.\u0275prov=m.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();const co=(w,T,S)=>{if(!1!==T){if(void 0!==S)return S;if("forward"===w||"back"===w)return w;if("root"===w&&!0===T)return"forward"}},vs="auto",lo=void 0;let is=(()=>{class w{constructor(S,j,ve,Vt,_n,Vn,wr,li,ee,ie,Te,nt,Et){this.parentContexts=S,this.location=j,this.config=_n,this.navCtrl=Vn,this.componentFactoryResolver=wr,this.parentOutlet=Et,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new Ce.X(null),this.stackEvents=new m.vpe,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.nativeEl=ee.nativeElement,this.name=ve||ct.eC,this.tabsPrefix="true"===Vt?ps(ie,nt):void 0,this.stackCtrl=new Ua(this.tabsPrefix,this.nativeEl,ie,Vn,Te,li),S.onChildOutletCreated(this.name,this)}set animation(S){this.nativeEl.animation=S}set animated(S){this.nativeEl.animated=S}set swipeGesture(S){this._swipeGesture=S,this.nativeEl.swipeHandler=S?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:j=>this.stackCtrl.endBackTransition(j)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){if(!this.activated){const S=this.getContext();null!=S&&S.route&&this.activateWith(S.route,S.resolver||null)}new Promise(S=>(0,$.c)(this.nativeEl,S)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(S,j){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const j=this.getContext();this.activatedView.savedData=new Map(j.children.contexts);const ve=this.activatedView.savedData.get("primary");if(ve&&j.route&&(ve.route=Object.assign({},j.route)),this.activatedView.savedExtras={},j.route){const Vt=j.route.snapshot;this.activatedView.savedExtras.queryParams=Vt.queryParams,this.activatedView.savedExtras.fragment=Vt.fragment}}const S=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(S)}}activateWith(S,j){var ve;if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=S;let Vt,_n=this.stackCtrl.getExistingView(S);if(_n){Vt=this.activated=_n.ref;const Vn=_n.savedData;Vn&&(this.getContext().children.contexts=Vn),this.updateActivatedRouteProxy(Vt.instance,S)}else{const Vn=S._futureSnapshot;if(null==Vn.routeConfig.component&&null==this.environmentInjector)return void console.warn('[Ionic Warning]: You must supply an environmentInjector to use standalone components with routing:\n\nIn your component class, add:\n\n   import { EnvironmentInjector } from \'@angular/core\';\n   constructor(public environmentInjector: EnvironmentInjector) {}\n\nIn your router outlet template, add:\n\n   <ion-router-outlet [environmentInjector]="environmentInjector"></ion-router-outlet>\n\nAlternatively, if you are routing within ion-tabs:\n\n   <ion-tabs [environmentInjector]="environmentInjector"></ion-tabs>');const wr=this.parentContexts.getOrCreateContext(this.name).children,li=new Ce.X(null),ee=this.createActivatedRouteProxy(li,S),ie=new jo(ee,wr,this.location.injector),Te=null!==(ve=Vn.routeConfig.component)&&void 0!==ve?ve:Vn.component;if((j=j||this.componentFactoryResolver)&&Nn(j)){const nt=j.resolveComponentFactory(Te);Vt=this.activated=this.location.createComponent(nt,this.location.length,ie)}else Vt=this.activated=this.location.createComponent(Te,{index:this.location.length,injector:ie,environmentInjector:null!=j?j:this.environmentInjector});li.next(Vt.instance),_n=this.stackCtrl.createView(this.activated,S),this.proxyMap.set(Vt.instance,ee),this.currentActivatedRoute$.next({component:Vt.instance,activatedRoute:S})}this.activatedView=_n,this.navCtrl.setTopOutlet(this),this.stackCtrl.setActive(_n).then(Vn=>{this.activateEvents.emit(Vt.instance),this.stackEvents.emit(Vn)})}canGoBack(S=1,j){return this.stackCtrl.canGoBack(S,j)}pop(S=1,j){return this.stackCtrl.pop(S,j)}getLastUrl(S){const j=this.stackCtrl.getLastUrl(S);return j?j.url:void 0}getLastRouteView(S){return this.stackCtrl.getLastUrl(S)}getRootView(S){return this.stackCtrl.getRootUrl(S)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(S,j){const ve=new ct.gz;return ve._futureSnapshot=j._futureSnapshot,ve._routerState=j._routerState,ve.snapshot=j.snapshot,ve.outlet=j.outlet,ve.component=j.component,ve._paramMap=this.proxyObservable(S,"paramMap"),ve._queryParamMap=this.proxyObservable(S,"queryParamMap"),ve.url=this.proxyObservable(S,"url"),ve.params=this.proxyObservable(S,"params"),ve.queryParams=this.proxyObservable(S,"queryParams"),ve.fragment=this.proxyObservable(S,"fragment"),ve.data=this.proxyObservable(S,"data"),ve}proxyObservable(S,j){return S.pipe((0,me.h)(ve=>!!ve),(0,te.w)(ve=>this.currentActivatedRoute$.pipe((0,me.h)(Vt=>null!==Vt&&Vt.component===ve),(0,te.w)(Vt=>Vt&&Vt.activatedRoute[j]),(0,q.x)())))}updateActivatedRouteProxy(S,j){const ve=this.proxyMap.get(S);if(!ve)throw new Error("Could not find activated route proxy for view");ve._futureSnapshot=j._futureSnapshot,ve._routerState=j._routerState,ve.snapshot=j.snapshot,ve.outlet=j.outlet,ve.component=j.component,this.currentActivatedRoute$.next({component:S,activatedRoute:j})}}return w.\u0275fac=function(S){return new(S||w)(m.Y36(ct.y6),m.Y36(m.s_b),m.$8M("name"),m.$8M("tabs"),m.Y36(Mi),m.Y36(Ao),m.Y36(m._Vd,8),m.Y36(re.Ye),m.Y36(m.SBq),m.Y36(ct.F0),m.Y36(m.R0b),m.Y36(ct.gz),m.Y36(w,12))},w.\u0275dir=m.lG2({type:w,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",environmentInjector:"environmentInjector"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),w})();class jo{constructor(T,S,j){this.route=T,this.childContexts=S,this.parent=j}get(T,S){return T===ct.gz?this.route:T===ct.y6?this.childContexts:this.parent.get(T,S)}}let Qo=(()=>{class w{constructor(S){this.navCtrl=S,this.ionTabsWillChange=new m.vpe,this.ionTabsDidChange=new m.vpe}onPageSelected(S){const j=S.enteringView.stackId;S.tabSwitch&&void 0!==j&&(this.ionTabsWillChange.emit({tab:j}),this.tabBar&&(this.tabBar.selectedTab=j),this.ionTabsDidChange.emit({tab:j}))}select(S){const j="string"==typeof S,ve=j?S:S.detail.tab,Vt=this.outlet.getActiveStackId()===ve,_n=`${this.outlet.tabsPrefix}/${ve}`;if(j||S.stopPropagation(),Vt){const Vn=this.outlet.getActiveStackId(),wr=this.outlet.getLastRouteView(Vn);if((null==wr?void 0:wr.url)===_n)return;const li=this.outlet.getRootView(ve);return this.navCtrl.navigateRoot(_n,Object.assign(Object.assign({},li&&_n===li.url&&li.savedExtras),{animated:!0,animationDirection:"back"}))}{const Vn=this.outlet.getLastRouteView(ve);return this.navCtrl.navigateRoot((null==Vn?void 0:Vn.url)||_n,Object.assign(Object.assign({},null==Vn?void 0:Vn.savedExtras),{animated:!0,animationDirection:"back"}))}}getSelected(){return this.outlet.getActiveStackId()}}return w.\u0275fac=function(S){return new(S||w)(m.Y36(Ao))},w.\u0275cmp=m.Xpm({type:w,selectors:[["ion-tabs"]],contentQueries:function(S,j,ve){if(1&S&&m.Suo(ve,Ft,5),2&S){let Vt;m.iGM(Vt=m.CRH())&&(j.tabBar=Vt.first)}},viewQuery:function(S,j){if(1&S&&m.Gf(Yt,5,is),2&S){let ve;m.iGM(ve=m.CRH())&&(j.outlet=ve.first)}},hostBindings:function(S,j){1&S&&m.NdJ("ionTabButtonClick",function(Vt){return j.select(Vt)})},inputs:{environmentInjector:"environmentInjector"},outputs:{ionTabsWillChange:"ionTabsWillChange",ionTabsDidChange:"ionTabsDidChange"},ngContentSelectors:Mn,decls:5,vars:1,consts:[[1,"tabs-inner"],["tabs","true",3,"environmentInjector","stackEvents"],["outlet",""]],template:function(S,j){1&S&&(m.F$t(yn),m.Hsn(0),m.TgZ(1,"div",0)(2,"ion-router-outlet",1,2),m.NdJ("stackEvents",function(Vt){return j.onPageSelected(Vt)}),m.qZA()(),m.Hsn(4,1)),2&S&&(m.xp6(2),m.Q6J("environmentInjector",j.environmentInjector))},dependencies:[is],styles:["[_nghost-%COMP%] {\n        display: flex;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n\n        flex-direction: column;\n\n        width: 100%;\n        height: 100%;\n\n        contain: layout size style;\n        z-index: $z-index-page-container;\n      }\n      .tabs-inner[_ngcontent-%COMP%] {\n        position: relative;\n\n        flex: 1;\n\n        contain: layout size style;\n      }"]}),w})(),qs=(()=>{class w{constructor(S,j,ve){this.routerOutlet=S,this.navCtrl=j,this.config=ve}onClick(S){var j;const ve=this.defaultHref||this.config.get("backButtonDefaultHref");null!==(j=this.routerOutlet)&&void 0!==j&&j.canGoBack()?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),S.preventDefault()):null!=ve&&(this.navCtrl.navigateBack(ve,{animation:this.routerAnimation}),S.preventDefault())}}return w.\u0275fac=function(S){return new(S||w)(m.Y36(is,8),m.Y36(Ao),m.Y36(Mi))},w.\u0275dir=m.lG2({type:w,selectors:[["ion-back-button"]],hostBindings:function(S,j){1&S&&m.NdJ("click",function(Vt){return j.onClick(Vt)})},inputs:{defaultHref:"defaultHref",routerAnimation:"routerAnimation"}}),w})(),os=(()=>{class w{constructor(S,j,ve,Vt,_n){this.locationStrategy=S,this.navCtrl=j,this.elementRef=ve,this.router=Vt,this.routerLink=_n,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var S;if(null!==(S=this.routerLink)&&void 0!==S&&S.urlTree){const j=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=j}}onClick(S){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),S.preventDefault()}}return w.\u0275fac=function(S){return new(S||w)(m.Y36(re.S$),m.Y36(Ao),m.Y36(m.SBq),m.Y36(ct.F0),m.Y36(ct.rH,8))},w.\u0275dir=m.lG2({type:w,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(S,j){1&S&&m.NdJ("click",function(Vt){return j.onClick(Vt)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[m.TTD]}),w})();class ls{constructor(T){this.ctrl=T}create(T){return this.ctrl.create(T||{})}dismiss(T,S,j){return this.ctrl.dismiss(T,S,j)}getTop(){return this.ctrl.getTop()}}let io=(()=>{class w extends ls{constructor(){super(qe.a)}}return w.\u0275fac=function(S){return new(S||w)},w.\u0275prov=m.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})(),$i=(()=>{class w extends ls{constructor(){super(qe.l)}}return w.\u0275fac=function(S){return new(S||w)},w.\u0275prov=m.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();class bo{}let Fr=(()=>{class w extends ls{constructor(S,j,ve,Vt){super(qe.m),this.angularDelegate=S,this.resolver=j,this.injector=ve,this.environmentInjector=Vt}create(S){var j;return super.create(Object.assign(Object.assign({},S),{delegate:this.angularDelegate.create(null!==(j=this.resolver)&&void 0!==j?j:this.environmentInjector,this.injector,void 0,"modal")}))}}return w.\u0275fac=function(S){return new(S||w)(m.LFG(uo),m.LFG(m._Vd),m.LFG(m.zs3),m.LFG(bo,8))},w.\u0275prov=m.Yz7({token:w,factory:w.\u0275fac}),w})(),va=(()=>{class w extends ls{constructor(S,j,ve,Vt){super(qe.c),this.angularDelegate=S,this.resolver=j,this.injector=ve,this.environmentInjector=Vt}create(S){var j;return super.create(Object.assign(Object.assign({},S),{delegate:this.angularDelegate.create(null!==(j=this.resolver)&&void 0!==j?j:this.environmentInjector,this.injector,void 0,"popover")}))}}return w.\u0275fac=function(S){return new(S||w)(m.LFG(uo),m.LFG(m._Vd),m.LFG(m.zs3),m.LFG(bo,8))},w.\u0275prov=m.Yz7({token:w,factory:w.\u0275fac}),w})();class No{shouldDetach(T){return!1}shouldAttach(T){return!1}store(T,S){}retrieve(T){return null}shouldReuseRoute(T,S){if(T.routeConfig!==S.routeConfig)return!1;const j=T.params,ve=S.params,Vt=Object.keys(j),_n=Object.keys(ve);if(Vt.length!==_n.length)return!1;for(const Vn of Vt)if(ve[Vn]!==j[Vn])return!1;return!0}}const $s=(w,T,S)=>()=>{if(T.defaultView&&typeof window<"u"){(w=>{const T=window,S=T.Ionic;S&&S.config&&"Object"!==S.config.constructor.name||(T.Ionic=T.Ionic||{},T.Ionic.config=Object.assign(Object.assign({},T.Ionic.config),w))})(Object.assign(Object.assign({},w),{_zoneGate:Vt=>S.run(Vt)}));const ve="__zone_symbol__addEventListener"in T.body?"__zone_symbol__addEventListener":"addEventListener";return function fe(){var w=[];if(typeof window<"u"){var T=window;(!T.customElements||T.Element&&(!T.Element.prototype.closest||!T.Element.prototype.matches||!T.Element.prototype.remove||!T.Element.prototype.getRootNode))&&w.push(U.e(6748).then(U.t.bind(U,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||T.NodeList&&!T.NodeList.prototype.forEach||!T.fetch||!function(){try{var j=new URL("b","http://a");return j.pathname="c%20d","http://a/c%20d"===j.href&&j.searchParams}catch(ve){return!1}}()||typeof WeakMap>"u")&&w.push(U.e(2214).then(U.t.bind(U,4144,23)))}return Promise.all(w)}().then(()=>((w,T)=>typeof window>"u"?Promise.resolve():(0,pt.p)().then(()=>(ke(),(0,pt.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[1],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32],"setFocus":[64]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[1,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"activated":[32]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32],"ariaLabel":[32]}]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8]}]]],["ion-select_3",[[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]},[[0,"ionChange","onSelect"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionChange","handleIonChange"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]]]'),T))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:Ar,jmp:Vt=>S.runOutsideAngular(Vt),ael(Vt,_n,Vn,wr){Vt[ve](_n,Vn,wr)},rel(Vt,_n,Vn,wr){Vt.removeEventListener(_n,Vn,wr)}}))}};let Y=(()=>{class w{static forRoot(S){return{ngModule:w,providers:[{provide:tr,useValue:S},{provide:m.ip1,useFactory:$s,multi:!0,deps:[tr,re.K0,m.R0b]}]}}}return w.\u0275fac=function(S){return new(S||w)},w.\u0275mod=m.oAB({type:w}),w.\u0275inj=m.cJS({providers:[uo,Fr,va],imports:[[re.ez]]}),w})()},181:(pn,Pe,U)=>{"use strict";U.d(Pe,{c:()=>Lt});var m=U(5730),J=U(3457);let H;const le=We=>We.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),we=We=>(void 0===H&&(H=void 0===We.style.animationName&&void 0!==We.style.webkitAnimationName?"-webkit-":""),H),ye=(We,Fe,Ce)=>{const ct=Fe.startsWith("animation")?we(We):"";We.style.setProperty(ct+Fe,Ce)},be=(We,Fe)=>{const Ce=Fe.startsWith("animation")?we(We):"";We.style.removeProperty(Ce+Fe)},De=[],Ke=(We=[],Fe)=>{if(void 0!==Fe){const Ce=Array.isArray(Fe)?Fe:[Fe];return[...We,...Ce]}return We},Lt=We=>{let Fe,Ce,ct,At,yt,st,Qe,it,Ze,me,te,ke,rt,Be=[],Ye=[],$=[],lt=!1,qe={},ut=[],ft=[],pt={},mt=0,gt=!1,Le=!1,q=!0,re=!1,fe=!0,Qt=!1;const Dt=We,Yt=[],yn=[],Mn=[],mn=[],Gn=[],Ar=[],Nn=[],Dn=[],En=[],sn=[],Ir="function"==typeof AnimationEffect||void 0!==J.w&&"function"==typeof J.w.AnimationEffect,Vr="function"==typeof Element&&"function"==typeof Element.prototype.animate&&Ir,Kt=()=>sn,zi=(Ge,xt)=>((null!=xt&&xt.oneTimeCallback?yn:Yt).push({c:Ge,o:xt}),rt),Wr=()=>{if(Vr)sn.forEach(Ge=>{Ge.cancel()}),sn.length=0;else{const Ge=Mn.slice();(0,m.r)(()=>{Ge.forEach(xt=>{be(xt,"animation-name"),be(xt,"animation-duration"),be(xt,"animation-timing-function"),be(xt,"animation-iteration-count"),be(xt,"animation-delay"),be(xt,"animation-play-state"),be(xt,"animation-fill-mode"),be(xt,"animation-direction")})})}},cn=()=>{Gn.forEach(Ge=>{null!=Ge&&Ge.parentNode&&Ge.parentNode.removeChild(Ge)}),Gn.length=0},hr=()=>void 0!==yt?yt:Qe?Qe.getFill():"both",He=()=>void 0!==Ze?Ze:void 0!==st?st:Qe?Qe.getDirection():"normal",ot=()=>gt?"linear":void 0!==ct?ct:Qe?Qe.getEasing():"linear",ht=()=>Le?0:void 0!==me?me:void 0!==Ce?Ce:Qe?Qe.getDuration():0,qt=()=>void 0!==At?At:Qe?Qe.getIterations():1,$t=()=>void 0!==te?te:void 0!==Fe?Fe:Qe?Qe.getDelay():0,Yr=()=>{0!==mt&&(mt--,0===mt&&((()=>{gr(),Dn.forEach(on=>on()),En.forEach(on=>on());const Ge=q?1:0,xt=ut,Ut=ft,Zt=pt;Mn.forEach(on=>{const In=on.classList;xt.forEach(Zn=>In.add(Zn)),Ut.forEach(Zn=>In.remove(Zn));for(const Zn in Zt)Zt.hasOwnProperty(Zn)&&ye(on,Zn,Zt[Zn])}),Yt.forEach(on=>on.c(Ge,rt)),yn.forEach(on=>on.c(Ge,rt)),yn.length=0,fe=!0,q&&(re=!0),q=!0})(),Qe&&Qe.animationFinish()))},Ei=(Ge=!0)=>{cn();const xt=(We=>(We.forEach(Fe=>{for(const Ce in Fe)if(Fe.hasOwnProperty(Ce)){const ct=Fe[Ce];if("easing"===Ce)Fe["animation-timing-function"]=ct,delete Fe[Ce];else{const At=le(Ce);At!==Ce&&(Fe[At]=ct,delete Fe[Ce])}}}),We))(Be);Mn.forEach(Ut=>{if(xt.length>0){const Zt=((We=[])=>We.map(Fe=>{const Ce=Fe.offset,ct=[];for(const At in Fe)Fe.hasOwnProperty(At)&&"offset"!==At&&ct.push(`${At}: ${Fe[At]};`);return`${100*Ce}% { ${ct.join(" ")} }`}).join(" "))(xt);ke=void 0!==We?We:(We=>{let Fe=De.indexOf(We);return Fe<0&&(Fe=De.push(We)-1),`ion-animation-${Fe}`})(Zt);const on=((We,Fe,Ce)=>{var ct;const At=(We=>{const Fe=void 0!==We.getRootNode?We.getRootNode():We;return Fe.head||Fe})(Ce),yt=we(Ce),st=At.querySelector("#"+We);if(st)return st;const Be=(null!==(ct=Ce.ownerDocument)&&void 0!==ct?ct:document).createElement("style");return Be.id=We,Be.textContent=`@${yt}keyframes ${We} { ${Fe} } @${yt}keyframes ${We}-alt { ${Fe} }`,At.appendChild(Be),Be})(ke,Zt,Ut);Gn.push(on),ye(Ut,"animation-duration",`${ht()}ms`),ye(Ut,"animation-timing-function",ot()),ye(Ut,"animation-delay",`${$t()}ms`),ye(Ut,"animation-fill-mode",hr()),ye(Ut,"animation-direction",He());const In=qt()===1/0?"infinite":qt().toString();ye(Ut,"animation-iteration-count",In),ye(Ut,"animation-play-state","paused"),Ge&&ye(Ut,"animation-name",`${on.id}-alt`),(0,m.r)(()=>{ye(Ut,"animation-name",on.id||null)})}})},Lo=(Ge=!0)=>{(()=>{Ar.forEach(Zt=>Zt()),Nn.forEach(Zt=>Zt());const Ge=Ye,xt=$,Ut=qe;Mn.forEach(Zt=>{const on=Zt.classList;Ge.forEach(In=>on.add(In)),xt.forEach(In=>on.remove(In));for(const In in Ut)Ut.hasOwnProperty(In)&&ye(Zt,In,Ut[In])})})(),Be.length>0&&(Vr?(Mn.forEach(Ge=>{const xt=Ge.animate(Be,{id:Dt,delay:$t(),duration:ht(),easing:ot(),iterations:qt(),fill:hr(),direction:He()});xt.pause(),sn.push(xt)}),sn.length>0&&(sn[0].onfinish=()=>{Yr()})):Ei(Ge)),lt=!0},pi=Ge=>{if(Ge=Math.min(Math.max(Ge,0),.9999),Vr)sn.forEach(xt=>{xt.currentTime=xt.effect.getComputedTiming().delay+ht()*Ge,xt.pause()});else{const xt=`-${ht()*Ge}ms`;Mn.forEach(Ut=>{Be.length>0&&(ye(Ut,"animation-delay",xt),ye(Ut,"animation-play-state","paused"))})}},ki=Ge=>{sn.forEach(xt=>{xt.effect.updateTiming({delay:$t(),duration:ht(),easing:ot(),iterations:qt(),fill:hr(),direction:He()})}),void 0!==Ge&&pi(Ge)},wo=(Ge=!0,xt)=>{(0,m.r)(()=>{Mn.forEach(Ut=>{ye(Ut,"animation-name",ke||null),ye(Ut,"animation-duration",`${ht()}ms`),ye(Ut,"animation-timing-function",ot()),ye(Ut,"animation-delay",void 0!==xt?`-${xt*ht()}ms`:`${$t()}ms`),ye(Ut,"animation-fill-mode",hr()||null),ye(Ut,"animation-direction",He()||null);const Zt=qt()===1/0?"infinite":qt().toString();ye(Ut,"animation-iteration-count",Zt),Ge&&ye(Ut,"animation-name",`${ke}-alt`),(0,m.r)(()=>{ye(Ut,"animation-name",ke||null)})})})},Mr=(Ge=!1,xt=!0,Ut)=>(Ge&&mn.forEach(Zt=>{Zt.update(Ge,xt,Ut)}),Vr?ki(Ut):wo(xt,Ut),rt),oi=()=>{lt&&(Vr?sn.forEach(Ge=>{Ge.pause()}):Mn.forEach(Ge=>{ye(Ge,"animation-play-state","paused")}),Qt=!0)},Hn=()=>{it=void 0,Yr()},gr=()=>{it&&clearTimeout(it)},Se=Ge=>new Promise(xt=>{null!=Ge&&Ge.sync&&(Le=!0,zi(()=>Le=!1,{oneTimeCallback:!0})),lt||Lo(),re&&(Vr?(pi(0),ki()):wo(),re=!1),fe&&(mt=mn.length+1,fe=!1),zi(()=>xt(),{oneTimeCallback:!0}),mn.forEach(Ut=>{Ut.play()}),Vr?(sn.forEach(Ge=>{Ge.play()}),(0===Be.length||0===Mn.length)&&Yr()):(()=>{if(gr(),(0,m.r)(()=>{Mn.forEach(Ge=>{Be.length>0&&ye(Ge,"animation-play-state","running")})}),0===Be.length||0===Mn.length)Yr();else{const Ge=$t()||0,xt=ht()||0,Ut=qt()||1;isFinite(Ut)&&(it=setTimeout(Hn,Ge+xt*Ut+100)),((We,Fe)=>{let Ce;const ct={passive:!0},yt=st=>{We===st.target&&(Ce&&Ce(),gr(),(0,m.r)(()=>{Mn.forEach(Ge=>{be(Ge,"animation-duration"),be(Ge,"animation-delay"),be(Ge,"animation-play-state")}),(0,m.r)(Yr)}))};We&&(We.addEventListener("webkitAnimationEnd",yt,ct),We.addEventListener("animationend",yt,ct),Ce=()=>{We.removeEventListener("webkitAnimationEnd",yt,ct),We.removeEventListener("animationend",yt,ct)})})(Mn[0])}})(),Qt=!1}),Rt=(Ge,xt)=>{const Ut=Be[0];return void 0===Ut||void 0!==Ut.offset&&0!==Ut.offset?Be=[{offset:0,[Ge]:xt},...Be]:Ut[Ge]=xt,rt};return rt={parentAnimation:Qe,elements:Mn,childAnimations:mn,id:Dt,animationFinish:Yr,from:Rt,to:(Ge,xt)=>{const Ut=Be[Be.length-1];return void 0===Ut||void 0!==Ut.offset&&1!==Ut.offset?Be=[...Be,{offset:1,[Ge]:xt}]:Ut[Ge]=xt,rt},fromTo:(Ge,xt,Ut)=>Rt(Ge,xt).to(Ge,Ut),parent:Ge=>(Qe=Ge,rt),play:Se,pause:()=>(mn.forEach(Ge=>{Ge.pause()}),oi(),rt),stop:()=>{mn.forEach(Ge=>{Ge.stop()}),lt&&(Wr(),lt=!1),gt=!1,Le=!1,fe=!0,Ze=void 0,me=void 0,te=void 0,mt=0,re=!1,q=!0,Qt=!1},destroy:Ge=>(mn.forEach(xt=>{xt.destroy(Ge)}),(Ge=>{Wr(),Ge&&cn()})(Ge),Mn.length=0,mn.length=0,Be.length=0,Yt.length=0,yn.length=0,lt=!1,fe=!0,rt),keyframes:Ge=>{const xt=Be!==Ge;return Be=Ge,xt&&(Ge=>{Vr?Kt().forEach(xt=>{if(xt.effect.setKeyframes)xt.effect.setKeyframes(Ge);else{const Ut=new KeyframeEffect(xt.effect.target,Ge,xt.effect.getTiming());xt.effect=Ut}}):Ei()})(Be),rt},addAnimation:Ge=>{if(null!=Ge)if(Array.isArray(Ge))for(const xt of Ge)xt.parent(rt),mn.push(xt);else Ge.parent(rt),mn.push(Ge);return rt},addElement:Ge=>{if(null!=Ge)if(1===Ge.nodeType)Mn.push(Ge);else if(Ge.length>=0)for(let xt=0;xt<Ge.length;xt++)Mn.push(Ge[xt]);else console.error("Invalid addElement value");return rt},update:Mr,fill:Ge=>(yt=Ge,Mr(!0),rt),direction:Ge=>(st=Ge,Mr(!0),rt),iterations:Ge=>(At=Ge,Mr(!0),rt),duration:Ge=>(!Vr&&0===Ge&&(Ge=1),Ce=Ge,Mr(!0),rt),easing:Ge=>(ct=Ge,Mr(!0),rt),delay:Ge=>(Fe=Ge,Mr(!0),rt),getWebAnimations:Kt,getKeyframes:()=>Be,getFill:hr,getDirection:He,getDelay:$t,getIterations:qt,getEasing:ot,getDuration:ht,afterAddRead:Ge=>(Dn.push(Ge),rt),afterAddWrite:Ge=>(En.push(Ge),rt),afterClearStyles:(Ge=[])=>{for(const xt of Ge)pt[xt]="";return rt},afterStyles:(Ge={})=>(pt=Ge,rt),afterRemoveClass:Ge=>(ft=Ke(ft,Ge),rt),afterAddClass:Ge=>(ut=Ke(ut,Ge),rt),beforeAddRead:Ge=>(Ar.push(Ge),rt),beforeAddWrite:Ge=>(Nn.push(Ge),rt),beforeClearStyles:(Ge=[])=>{for(const xt of Ge)qe[xt]="";return rt},beforeStyles:(Ge={})=>(qe=Ge,rt),beforeRemoveClass:Ge=>($=Ke($,Ge),rt),beforeAddClass:Ge=>(Ye=Ke(Ye,Ge),rt),onFinish:zi,isRunning:()=>0!==mt&&!Qt,progressStart:(Ge=!1,xt)=>(mn.forEach(Ut=>{Ut.progressStart(Ge,xt)}),oi(),gt=Ge,lt||Lo(),Mr(!1,!0,xt),rt),progressStep:Ge=>(mn.forEach(xt=>{xt.progressStep(Ge)}),pi(Ge),rt),progressEnd:(Ge,xt,Ut)=>(gt=!1,mn.forEach(Zt=>{Zt.progressEnd(Ge,xt,Ut)}),void 0!==Ut&&(me=Ut),re=!1,q=!0,0===Ge?(Ze="reverse"===He()?"normal":"reverse","reverse"===Ze&&(q=!1),Vr?(Mr(),pi(1-xt)):(te=(1-xt)*ht()*-1,Mr(!1,!1))):1===Ge&&(Vr?(Mr(),pi(xt)):(te=xt*ht()*-1,Mr(!1,!1))),void 0!==Ge&&(zi(()=>{me=void 0,Ze=void 0,te=void 0},{oneTimeCallback:!0}),Qe||Se()),rt)}}},4349:(pn,Pe,U)=>{"use strict";U.d(Pe,{G:()=>le});class J{constructor(ye,be,$e,ge,De){this.id=be,this.name=$e,this.disableScroll=De,this.priority=1e6*ge+be,this.ctrl=ye}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const ye=this.ctrl.capture(this.name,this.id,this.priority);return ye&&this.disableScroll&&this.ctrl.disableScroll(this.id),ye}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class H{constructor(ye,be,$e,ge){this.id=be,this.disable=$e,this.disableScroll=ge,this.ctrl=ye}block(){if(this.ctrl){if(this.disable)for(const ye of this.disable)this.ctrl.disableGesture(ye,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const ye of this.disable)this.ctrl.enableGesture(ye,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const he="backdrop-no-scroll",le=new class m{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(ye){var be;return new J(this,this.newID(),ye.name,null!==(be=ye.priority)&&void 0!==be?be:0,!!ye.disableScroll)}createBlocker(ye={}){return new H(this,this.newID(),ye.disable,!!ye.disableScroll)}start(ye,be,$e){return this.canStart(ye)?(this.requestedStart.set(be,$e),!0):(this.requestedStart.delete(be),!1)}capture(ye,be,$e){if(!this.start(ye,be,$e))return!1;const ge=this.requestedStart;let De=-1e4;if(ge.forEach(xe=>{De=Math.max(De,xe)}),De===$e){this.capturedId=be,ge.clear();const xe=new CustomEvent("ionGestureCaptured",{detail:{gestureName:ye}});return document.dispatchEvent(xe),!0}return ge.delete(be),!1}release(ye){this.requestedStart.delete(ye),this.capturedId===ye&&(this.capturedId=void 0)}disableGesture(ye,be){let $e=this.disabledGestures.get(ye);void 0===$e&&($e=new Set,this.disabledGestures.set(ye,$e)),$e.add(be)}enableGesture(ye,be){const $e=this.disabledGestures.get(ye);void 0!==$e&&$e.delete(be)}disableScroll(ye){this.disabledScroll.add(ye),1===this.disabledScroll.size&&document.body.classList.add(he)}enableScroll(ye){this.disabledScroll.delete(ye),0===this.disabledScroll.size&&document.body.classList.remove(he)}canStart(ye){return!(void 0!==this.capturedId||this.isDisabled(ye))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(ye){const be=this.disabledGestures.get(ye);return!!(be&&be.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:(pn,Pe,U)=>{"use strict";U.r(Pe),U.d(Pe,{MENU_BACK_BUTTON_PRIORITY:()=>le,OVERLAY_BACK_BUTTON_PRIORITY:()=>he,blockHardwareBackButton:()=>J,startHardwareBackButton:()=>H});var m=U(5861);const J=()=>{document.addEventListener("backbutton",()=>{})},H=()=>{const we=document;let ye=!1;we.addEventListener("backbutton",()=>{if(ye)return;let be=0,$e=[];const ge=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(Ne,Xe){$e.push({priority:Ne,handler:Xe,id:be++})}}});we.dispatchEvent(ge);const De=function(){var Ne=(0,m.Z)(function*(Xe){try{if(null!=Xe&&Xe.handler){const Ke=Xe.handler(xe);null!=Ke&&(yield Ke)}}catch(Ke){console.error(Ke)}});return function(Ke){return Ne.apply(this,arguments)}}(),xe=()=>{if($e.length>0){let Ne={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};$e.forEach(Xe=>{Xe.priority>=Ne.priority&&(Ne=Xe)}),ye=!0,$e=$e.filter(Xe=>Xe.id!==Ne.id),De(Ne).then(()=>ye=!1)}};xe()})},he=100,le=99},5730:(pn,Pe,U)=>{"use strict";U.d(Pe,{a:()=>ye,b:()=>be,c:()=>H,d:()=>Xe,e:()=>Ke,f:()=>Ne,g:()=>$e,h:()=>At,i:()=>we,j:()=>he,k:()=>xe,l:()=>Lt,m:()=>De,n:()=>We,o:()=>ct,p:()=>Ce,q:()=>yt,r:()=>ge,s:()=>st,t:()=>m,u:()=>Fe});const m=(Be,Ye=0)=>new Promise($=>{J(Be,Ye,$)}),J=(Be,Ye=0,$)=>{let lt,Qe;const qe={passive:!0},ft=()=>{lt&&lt()},pt=mt=>{(void 0===mt||Be===mt.target)&&(ft(),$(mt))};return Be&&(Be.addEventListener("webkitTransitionEnd",pt,qe),Be.addEventListener("transitionend",pt,qe),Qe=setTimeout(pt,Ye+500),lt=()=>{Qe&&(clearTimeout(Qe),Qe=void 0),Be.removeEventListener("webkitTransitionEnd",pt,qe),Be.removeEventListener("transitionend",pt,qe)}),ft},H=(Be,Ye)=>{Be.componentOnReady?Be.componentOnReady().then($=>Ye($)):ge(()=>Ye(Be))},he=(Be,Ye=[])=>{const $={};return Ye.forEach(lt=>{Be.hasAttribute(lt)&&(null!==Be.getAttribute(lt)&&($[lt]=Be.getAttribute(lt)),Be.removeAttribute(lt))}),$},le=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],we=(Be,Ye)=>{let $=le;return Ye&&Ye.length>0&&($=$.filter(lt=>!Ye.includes(lt))),he(Be,$)},ye=(Be,Ye,$,lt)=>{var Qe;if(typeof window<"u"){const qe=window,ut=null===(Qe=null==qe?void 0:qe.Ionic)||void 0===Qe?void 0:Qe.config;if(ut){const ft=ut.get("_ael");if(ft)return ft(Be,Ye,$,lt);if(ut._ael)return ut._ael(Be,Ye,$,lt)}}return Be.addEventListener(Ye,$,lt)},be=(Be,Ye,$,lt)=>{var Qe;if(typeof window<"u"){const qe=window,ut=null===(Qe=null==qe?void 0:qe.Ionic)||void 0===Qe?void 0:Qe.config;if(ut){const ft=ut.get("_rel");if(ft)return ft(Be,Ye,$,lt);if(ut._rel)return ut._rel(Be,Ye,$,lt)}}return Be.removeEventListener(Ye,$,lt)},$e=(Be,Ye=Be)=>Be.shadowRoot||Ye,ge=Be=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Be):"function"==typeof requestAnimationFrame?requestAnimationFrame(Be):setTimeout(Be),De=Be=>!!Be.shadowRoot&&!!Be.attachShadow,xe=Be=>{const Ye=Be.closest("ion-item");return Ye?Ye.querySelector("ion-label"):null},Ne=Be=>{if(Be.focus(),Be.classList.contains("ion-focusable")){const Ye=Be.closest("ion-app");Ye&&Ye.setFocus([Be])}},Xe=(Be,Ye)=>{let $;const lt=Be.getAttribute("aria-labelledby"),Qe=Be.id;let qe=null!==lt&&""!==lt.trim()?lt:Ye+"-lbl",ut=null!==lt&&""!==lt.trim()?document.getElementById(lt):xe(Be);return ut?(null===lt&&(ut.id=qe),$=ut.textContent,ut.setAttribute("aria-hidden","true")):""!==Qe.trim()&&(ut=document.querySelector(`label[for="${Qe}"]`),ut&&(""!==ut.id?qe=ut.id:ut.id=qe=`${Qe}-lbl`,$=ut.textContent)),{label:ut,labelId:qe,labelText:$}},Ke=(Be,Ye,$,lt,Qe)=>{if(Be||De(Ye)){let qe=Ye.querySelector("input.aux-input");qe||(qe=Ye.ownerDocument.createElement("input"),qe.type="hidden",qe.classList.add("aux-input"),Ye.appendChild(qe)),qe.disabled=Qe,qe.name=$,qe.value=lt||""}},Lt=(Be,Ye,$)=>Math.max(Be,Math.min(Ye,$)),We=(Be,Ye)=>{if(!Be){const $="ASSERT: "+Ye;throw console.error($),new Error($)}},Fe=Be=>Be.timeStamp||Date.now(),Ce=Be=>{if(Be){const Ye=Be.changedTouches;if(Ye&&Ye.length>0){const $=Ye[0];return{x:$.clientX,y:$.clientY}}if(void 0!==Be.pageX)return{x:Be.pageX,y:Be.pageY}}return{x:0,y:0}},ct=Be=>{const Ye="rtl"===document.dir;switch(Be){case"start":return Ye;case"end":return!Ye;default:throw new Error(`"${Be}" is not a valid value for [side]. Use "start" or "end" instead.`)}},At=(Be,Ye)=>{const $=Be._original||Be;return{_original:Be,emit:yt($.emit.bind($),Ye)}},yt=(Be,Ye=0)=>{let $;return(...lt)=>{clearTimeout($),$=setTimeout(Be,Ye,...lt)}},st=(Be,Ye)=>{if(null!=Be||(Be={}),null!=Ye||(Ye={}),Be===Ye)return!0;const $=Object.keys(Be);if($.length!==Object.keys(Ye).length)return!1;for(const lt of $)if(!(lt in Ye)||Be[lt]!==Ye[lt])return!1;return!0}},1843:(pn,Pe,U)=>{"use strict";U.d(Pe,{L:()=>he,a:()=>le,b:()=>we,c:()=>ye,d:()=>be,e:()=>Ye,g:()=>Qe,l:()=>st,s:()=>$,t:()=>De});var m=U(5861),J=U(1308),H=U(5730);const he="ionViewWillEnter",le="ionViewDidEnter",we="ionViewWillLeave",ye="ionViewDidLeave",be="ionViewWillUnload",De=qe=>new Promise((ut,ft)=>{(0,J.c)(()=>{xe(qe),Ne(qe).then(pt=>{pt.animation&&pt.animation.destroy(),Xe(qe),ut(pt)},pt=>{Xe(qe),ft(pt)})})}),xe=qe=>{const ut=qe.enteringEl,ft=qe.leavingEl;lt(ut,ft,qe.direction),qe.showGoBack?ut.classList.add("can-go-back"):ut.classList.remove("can-go-back"),$(ut,!1),ut.style.setProperty("pointer-events","none"),ft&&($(ft,!1),ft.style.setProperty("pointer-events","none"))},Ne=function(){var qe=(0,m.Z)(function*(ut){const ft=yield Ke(ut);return ft&&J.B.isBrowser?Lt(ft,ut):We(ut)});return function(ft){return qe.apply(this,arguments)}}(),Xe=qe=>{const ut=qe.enteringEl,ft=qe.leavingEl;ut.classList.remove("ion-page-invisible"),ut.style.removeProperty("pointer-events"),void 0!==ft&&(ft.classList.remove("ion-page-invisible"),ft.style.removeProperty("pointer-events"))},Ke=function(){var qe=(0,m.Z)(function*(ut){return ut.leavingEl&&ut.animated&&0!==ut.duration?ut.animationBuilder?ut.animationBuilder:"ios"===ut.mode?(yield Promise.resolve().then(U.bind(U,6439))).iosTransitionAnimation:(yield Promise.resolve().then(U.bind(U,7838))).mdTransitionAnimation:void 0});return function(ft){return qe.apply(this,arguments)}}(),Lt=function(){var qe=(0,m.Z)(function*(ut,ft){yield Fe(ft,!0);const pt=ut(ft.baseEl,ft);At(ft.enteringEl,ft.leavingEl);const mt=yield ct(pt,ft);return ft.progressCallback&&ft.progressCallback(void 0),mt&&yt(ft.enteringEl,ft.leavingEl),{hasCompleted:mt,animation:pt}});return function(ft,pt){return qe.apply(this,arguments)}}(),We=function(){var qe=(0,m.Z)(function*(ut){const ft=ut.enteringEl,pt=ut.leavingEl;return yield Fe(ut,!1),At(ft,pt),yt(ft,pt),{hasCompleted:!0}});return function(ft){return qe.apply(this,arguments)}}(),Fe=function(){var qe=(0,m.Z)(function*(ut,ft){const mt=(void 0!==ut.deepWait?ut.deepWait:ft)?[Ye(ut.enteringEl),Ye(ut.leavingEl)]:[Be(ut.enteringEl),Be(ut.leavingEl)];yield Promise.all(mt),yield Ce(ut.viewIsReady,ut.enteringEl)});return function(ft,pt){return qe.apply(this,arguments)}}(),Ce=function(){var qe=(0,m.Z)(function*(ut,ft){ut&&(yield ut(ft))});return function(ft,pt){return qe.apply(this,arguments)}}(),ct=(qe,ut)=>{const ft=ut.progressCallback,pt=new Promise(mt=>{qe.onFinish(gt=>mt(1===gt))});return ft?(qe.progressStart(!0),ft(qe)):qe.play(),pt},At=(qe,ut)=>{st(ut,we),st(qe,he)},yt=(qe,ut)=>{st(qe,le),st(ut,ye)},st=(qe,ut)=>{if(qe){const ft=new CustomEvent(ut,{bubbles:!1,cancelable:!1});qe.dispatchEvent(ft)}},Be=qe=>qe?new Promise(ut=>(0,H.c)(qe,ut)):Promise.resolve(),Ye=function(){var qe=(0,m.Z)(function*(ut){const ft=ut;if(ft){if(null!=ft.componentOnReady){if(null!=(yield ft.componentOnReady()))return}else if(null!=ft.__registerHost)return void(yield new Promise(mt=>(0,H.r)(mt)));yield Promise.all(Array.from(ft.children).map(Ye))}});return function(ft){return qe.apply(this,arguments)}}(),$=(qe,ut)=>{ut?(qe.setAttribute("aria-hidden","true"),qe.classList.add("ion-page-hidden")):(qe.hidden=!1,qe.removeAttribute("aria-hidden"),qe.classList.remove("ion-page-hidden"))},lt=(qe,ut,ft)=>{void 0!==qe&&(qe.style.zIndex="back"===ft?"99":"101"),void 0!==ut&&(ut.style.zIndex="100")},Qe=qe=>qe.classList.contains("ion-page")?qe:qe.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||qe},6369:(pn,Pe,U)=>{"use strict";U.d(Pe,{m:()=>De});var m=U(5861),J=U(7593),H=U(5730),he=U(5179),le=U(181);const we=xe=>(0,le.c)().duration(xe?400:300),ye=xe=>{let Ne,Xe;const Ke=xe.width+8,Lt=(0,le.c)(),We=(0,le.c)();xe.isEndSide?(Ne=Ke+"px",Xe="0px"):(Ne=-Ke+"px",Xe="0px"),Lt.addElement(xe.menuInnerEl).fromTo("transform",`translateX(${Ne})`,`translateX(${Xe})`);const Ce="ios"===(0,he.b)(xe),ct=Ce?.2:.25;return We.addElement(xe.backdropEl).fromTo("opacity",.01,ct),we(Ce).addAnimation([Lt,We])},be=xe=>{let Ne,Xe;const Ke=(0,he.b)(xe),Lt=xe.width;xe.isEndSide?(Ne=-Lt+"px",Xe=Lt+"px"):(Ne=Lt+"px",Xe=-Lt+"px");const We=(0,le.c)().addElement(xe.menuInnerEl).fromTo("transform",`translateX(${Xe})`,"translateX(0px)"),Fe=(0,le.c)().addElement(xe.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ne})`),Ce=(0,le.c)().addElement(xe.backdropEl).fromTo("opacity",.01,.32);return we("ios"===Ke).addAnimation([We,Fe,Ce])},$e=xe=>{const Ne=(0,he.b)(xe),Xe=xe.width*(xe.isEndSide?-1:1)+"px",Ke=(0,le.c)().addElement(xe.contentEl).fromTo("transform","translateX(0px)",`translateX(${Xe})`);return we("ios"===Ne).addAnimation(Ke)},De=(()=>{const xe=new Map,Ne=[],Xe=function(){var it=(0,m.Z)(function*(Ze){const me=yield At(Ze);return!!me&&me.open()});return function(me){return it.apply(this,arguments)}}(),Ke=function(){var it=(0,m.Z)(function*(Ze){const me=yield void 0!==Ze?At(Ze):yt();return void 0!==me&&me.close()});return function(me){return it.apply(this,arguments)}}(),Lt=function(){var it=(0,m.Z)(function*(Ze){const me=yield At(Ze);return!!me&&me.toggle()});return function(me){return it.apply(this,arguments)}}(),We=function(){var it=(0,m.Z)(function*(Ze,me){const te=yield At(me);return te&&(te.disabled=!Ze),te});return function(me,te){return it.apply(this,arguments)}}(),Fe=function(){var it=(0,m.Z)(function*(Ze,me){const te=yield At(me);return te&&(te.swipeGesture=Ze),te});return function(me,te){return it.apply(this,arguments)}}(),Ce=function(){var it=(0,m.Z)(function*(Ze){if(null!=Ze){const me=yield At(Ze);return void 0!==me&&me.isOpen()}return void 0!==(yield yt())});return function(me){return it.apply(this,arguments)}}(),ct=function(){var it=(0,m.Z)(function*(Ze){const me=yield At(Ze);return!!me&&!me.disabled});return function(me){return it.apply(this,arguments)}}(),At=function(){var it=(0,m.Z)(function*(Ze){return yield Le(),"start"===Ze||"end"===Ze?gt(q=>q.side===Ze&&!q.disabled)||gt(q=>q.side===Ze):null!=Ze?gt(te=>te.menuId===Ze):gt(te=>!te.disabled)||(Ne.length>0?Ne[0].el:void 0)});return function(me){return it.apply(this,arguments)}}(),yt=function(){var it=(0,m.Z)(function*(){return yield Le(),ft()});return function(){return it.apply(this,arguments)}}(),st=function(){var it=(0,m.Z)(function*(){return yield Le(),pt()});return function(){return it.apply(this,arguments)}}(),Be=function(){var it=(0,m.Z)(function*(){return yield Le(),mt()});return function(){return it.apply(this,arguments)}}(),Ye=(it,Ze)=>{xe.set(it,Ze)},Qe=it=>{const Ze=it.side;Ne.filter(me=>me.side===Ze&&me!==it).forEach(me=>me.disabled=!0)},qe=function(){var it=(0,m.Z)(function*(Ze,me,te){if(mt())return!1;if(me){const q=yield yt();q&&Ze.el!==q&&(yield q.setOpen(!1,!1))}return Ze._setOpen(me,te)});return function(me,te,q){return it.apply(this,arguments)}}(),ft=()=>gt(it=>it._isOpen),pt=()=>Ne.map(it=>it.el),mt=()=>Ne.some(it=>it.isAnimating),gt=it=>{const Ze=Ne.find(it);if(void 0!==Ze)return Ze.el},Le=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(it=>new Promise(Ze=>(0,H.c)(it,Ze))));return Ye("reveal",$e),Ye("push",be),Ye("overlay",ye),typeof document<"u"&&document.addEventListener("ionBackButton",it=>{const Ze=ft();Ze&&it.detail.register(J.MENU_BACK_BUTTON_PRIORITY,()=>Ze.close())}),{registerAnimation:Ye,get:At,getMenus:st,getOpen:yt,isEnabled:ct,swipeGesture:Fe,isAnimating:Be,isOpen:Ce,enable:We,toggle:Lt,close:Ke,open:Xe,_getOpenSync:ft,_createAnimation:(it,Ze)=>{const me=xe.get(it);if(!me)throw new Error("animation not registered");return me(Ze)},_register:it=>{Ne.indexOf(it)<0&&(it.disabled||Qe(it),Ne.push(it))},_unregister:it=>{const Ze=Ne.indexOf(it);Ze>-1&&Ne.splice(Ze,1)},_setOpen:qe,_setActiveMenu:Qe}})()},3457:(pn,Pe,U)=>{"use strict";U.d(Pe,{w:()=>m});const m=typeof window<"u"?window:void 0},1898:(pn,Pe,U)=>{"use strict";U.r(Pe),U.d(Pe,{GESTURE_CONTROLLER:()=>m.G,createGesture:()=>$e});var m=U(4349);const J=(Ne,Xe,Ke,Lt)=>{const We=H(Ne)?{capture:!!Lt.capture,passive:!!Lt.passive}:!!Lt.capture;let Fe,Ce;return Ne.__zone_symbol__addEventListener?(Fe="__zone_symbol__addEventListener",Ce="__zone_symbol__removeEventListener"):(Fe="addEventListener",Ce="removeEventListener"),Ne[Fe](Xe,Ke,We),()=>{Ne[Ce](Xe,Ke,We)}},H=Ne=>{if(void 0===he)try{const Xe=Object.defineProperty({},"passive",{get:()=>{he=!0}});Ne.addEventListener("optsTest",()=>{},Xe)}catch(Xe){he=!1}return!!he};let he;const ye=Ne=>Ne instanceof Document?Ne:Ne.ownerDocument,$e=Ne=>{let Xe=!1,Ke=!1,Lt=!0,We=!1;const Fe=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},Ne),Ce=Fe.canStart,ct=Fe.onWillStart,At=Fe.onStart,yt=Fe.onEnd,st=Fe.notCaptured,Be=Fe.onMove,Ye=Fe.threshold,$=Fe.passive,lt=Fe.blurOnStart,Qe={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},qe=((Ne,Xe,Ke)=>{const Lt=Ke*(Math.PI/180),We="x"===Ne,Fe=Math.cos(Lt),Ce=Xe*Xe;let ct=0,At=0,yt=!1,st=0;return{start(Be,Ye){ct=Be,At=Ye,st=0,yt=!0},detect(Be,Ye){if(!yt)return!1;const $=Be-ct,lt=Ye-At,Qe=$*$+lt*lt;if(Qe<Ce)return!1;const qe=Math.sqrt(Qe),ut=(We?$:lt)/qe;return st=ut>Fe?1:ut<-Fe?-1:0,yt=!1,!0},isGesture:()=>0!==st,getDirection:()=>st}})(Fe.direction,Fe.threshold,Fe.maxAngle),ut=m.G.createGesture({name:Ne.gestureName,priority:Ne.gesturePriority,disableScroll:Ne.disableScroll}),mt=()=>{Xe&&(We=!1,Be&&Be(Qe))},gt=()=>!!ut.capture()&&(Xe=!0,Lt=!1,Qe.startX=Qe.currentX,Qe.startY=Qe.currentY,Qe.startTime=Qe.currentTime,ct?ct(Qe).then(it):it(),!0),it=()=>{lt&&(()=>{if(typeof document<"u"){const re=document.activeElement;null!=re&&re.blur&&re.blur()}})(),At&&At(Qe),Lt=!0},Ze=()=>{Xe=!1,Ke=!1,We=!1,Lt=!0,ut.release()},me=re=>{const fe=Xe,ke=Lt;if(Ze(),ke){if(ge(Qe,re),fe)return void(yt&&yt(Qe));st&&st(Qe)}},te=((Ne,Xe,Ke,Lt,We)=>{let Fe,Ce,ct,At,yt,st,Be,Ye=0;const $=Le=>{Ye=Date.now()+2e3,Xe(Le)&&(!Ce&&Ke&&(Ce=J(Ne,"touchmove",Ke,We)),ct||(ct=J(Le.target,"touchend",Qe,We)),At||(At=J(Le.target,"touchcancel",Qe,We)))},lt=Le=>{Ye>Date.now()||Xe(Le)&&(!st&&Ke&&(st=J(ye(Ne),"mousemove",Ke,We)),Be||(Be=J(ye(Ne),"mouseup",qe,We)))},Qe=Le=>{ut(),Lt&&Lt(Le)},qe=Le=>{ft(),Lt&&Lt(Le)},ut=()=>{Ce&&Ce(),ct&&ct(),At&&At(),Ce=ct=At=void 0},ft=()=>{st&&st(),Be&&Be(),st=Be=void 0},pt=()=>{ut(),ft()},mt=(Le=!0)=>{Le?(Fe||(Fe=J(Ne,"touchstart",$,We)),yt||(yt=J(Ne,"mousedown",lt,We))):(Fe&&Fe(),yt&&yt(),Fe=yt=void 0,pt())};return{enable:mt,stop:pt,destroy:()=>{mt(!1),Lt=Ke=Xe=void 0}}})(Fe.el,re=>{const fe=xe(re);return!(Ke||!Lt||(De(re,Qe),Qe.startX=Qe.currentX,Qe.startY=Qe.currentY,Qe.startTime=Qe.currentTime=fe,Qe.velocityX=Qe.velocityY=Qe.deltaX=Qe.deltaY=0,Qe.event=re,Ce&&!1===Ce(Qe))||(ut.release(),!ut.start()))&&(Ke=!0,0===Ye?gt():(qe.start(Qe.startX,Qe.startY),!0))},re=>{Xe?!We&&Lt&&(We=!0,ge(Qe,re),requestAnimationFrame(mt)):(ge(Qe,re),qe.detect(Qe.currentX,Qe.currentY)&&(!qe.isGesture()||!gt())&&q())},me,{capture:!1,passive:$}),q=()=>{Ze(),te.stop(),st&&st(Qe)};return{enable(re=!0){re||(Xe&&me(void 0),Ze()),te.enable(re)},destroy(){ut.destroy(),te.destroy()}}},ge=(Ne,Xe)=>{if(!Xe)return;const Ke=Ne.currentX,Lt=Ne.currentY,We=Ne.currentTime;De(Xe,Ne);const Fe=Ne.currentX,Ce=Ne.currentY,At=(Ne.currentTime=xe(Xe))-We;if(At>0&&At<100){const st=(Ce-Lt)/At;Ne.velocityX=(Fe-Ke)/At*.7+.3*Ne.velocityX,Ne.velocityY=.7*st+.3*Ne.velocityY}Ne.deltaX=Fe-Ne.startX,Ne.deltaY=Ce-Ne.startY,Ne.event=Xe},De=(Ne,Xe)=>{let Ke=0,Lt=0;if(Ne){const We=Ne.changedTouches;if(We&&We.length>0){const Fe=We[0];Ke=Fe.clientX,Lt=Fe.clientY}else void 0!==Ne.pageX&&(Ke=Ne.pageX,Lt=Ne.pageY)}Xe.currentX=Ke,Xe.currentY=Lt},xe=Ne=>Ne.timeStamp||Date.now()},1308:(pn,Pe,U)=>{"use strict";U.d(Pe,{B:()=>Fi,H:()=>Mn,a:()=>q,b:()=>sr,c:()=>Zi,e:()=>Er,f:()=>Vi,g:()=>re,h:()=>Yt,i:()=>Rr,j:()=>He,k:()=>fi,p:()=>Lt,r:()=>ti,s:()=>Xe});var m=U(5861);let H,he,le,we=!1,ye=!1,be=!1,$e=!1,ge=!1;const De=typeof window<"u"?window:{},xe=De.document||{head:{}},Ne={$flags$:0,$resourcesUrl$:"",jmp:Se=>Se(),raf:Se=>requestAnimationFrame(Se),ael:(Se,je,Rt,Ot)=>Se.addEventListener(je,Rt,Ot),rel:(Se,je,Rt,Ot)=>Se.removeEventListener(je,Rt,Ot),ce:(Se,je)=>new CustomEvent(Se,je)},Xe=Se=>{Object.assign(Ne,Se)},Lt=Se=>Promise.resolve(Se),We=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(Se){}return!1})(),Fe=(Se,je,Rt,Ot)=>{Rt&&Rt.map(([Bt,Ge,xt])=>{const Ut=ct(Se,Bt),Zt=Ce(je,xt),on=At(Bt);Ne.ael(Ut,Ge,Zt,on),(je.$rmListeners$=je.$rmListeners$||[]).push(()=>Ne.rel(Ut,Ge,Zt,on))})},Ce=(Se,je)=>Rt=>{try{256&Se.$flags$?Se.$lazyInstance$[je](Rt):(Se.$queuedListeners$=Se.$queuedListeners$||[]).push([je,Rt])}catch(Ot){ki(Ot)}},ct=(Se,je)=>4&je?xe:8&je?De:16&je?xe.body:Se,At=Se=>0!=(2&Se),$="s-id",lt="sty-id",ut="http://www.w3.org/1999/xlink",mt=new WeakMap,gt=(Se,je,Rt)=>{let Ot=pr.get(Se);We&&Rt?(Ot=Ot||new CSSStyleSheet,"string"==typeof Ot?Ot=je:Ot.replaceSync(je)):Ot=je,pr.set(Se,Ot)},Le=(Se,je,Rt,Ot)=>{let Bt=Ze(je,Rt);const Ge=pr.get(Bt);if(Se=11===Se.nodeType?Se:xe,Ge)if("string"==typeof Ge){let Ut,xt=mt.get(Se=Se.head||Se);xt||mt.set(Se,xt=new Set),xt.has(Bt)||(Se.host&&(Ut=Se.querySelector(`[${lt}="${Bt}"]`))?Ut.innerHTML=Ge:(Ut=xe.createElement("style"),Ut.innerHTML=Ge,Se.insertBefore(Ut,Se.querySelector("link"))),xt&&xt.add(Bt))}else Se.adoptedStyleSheets.includes(Ge)||(Se.adoptedStyleSheets=[...Se.adoptedStyleSheets,Ge]);return Bt},Ze=(Se,je)=>"sc-"+(je&&32&Se.$flags$?Se.$tagName$+"-"+je:Se.$tagName$),me=Se=>Se.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),q=Se=>Oi.push(Se),re=Se=>Ei(Se).$modeName$,fe={},Dt=Se=>"object"==(Se=typeof Se)||"function"===Se,Yt=(Se,je,...Rt)=>{let Ot=null,Bt=null,Ge=null,xt=!1,Ut=!1;const Zt=[],on=Zn=>{for(let Jn=0;Jn<Zn.length;Jn++)Ot=Zn[Jn],Array.isArray(Ot)?on(Ot):null!=Ot&&"boolean"!=typeof Ot&&((xt="function"!=typeof Se&&!Dt(Ot))&&(Ot=String(Ot)),xt&&Ut?Zt[Zt.length-1].$text$+=Ot:Zt.push(xt?yn(null,Ot):Ot),Ut=xt)};if(on(Rt),je){je.key&&(Bt=je.key),je.name&&(Ge=je.name);{const Zn=je.className||je.class;Zn&&(je.class="object"!=typeof Zn?Zn:Object.keys(Zn).filter(Jn=>Zn[Jn]).join(" "))}}if("function"==typeof Se)return Se(null===je?{}:je,Zt,Gn);const In=yn(Se,null);return In.$attrs$=je,Zt.length>0&&(In.$children$=Zt),In.$key$=Bt,In.$name$=Ge,In},yn=(Se,je)=>({$flags$:0,$tag$:Se,$text$:je,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),Mn={},Gn={forEach:(Se,je)=>Se.map(Ar).forEach(je),map:(Se,je)=>Se.map(Ar).map(je).map(Nn)},Ar=Se=>({vattrs:Se.$attrs$,vchildren:Se.$children$,vkey:Se.$key$,vname:Se.$name$,vtag:Se.$tag$,vtext:Se.$text$}),Nn=Se=>{if("function"==typeof Se.vtag){const Rt=Object.assign({},Se.vattrs);return Se.vkey&&(Rt.key=Se.vkey),Se.vname&&(Rt.name=Se.vname),Yt(Se.vtag,Rt,...Se.vchildren||[])}const je=yn(Se.vtag,Se.vtext);return je.$attrs$=Se.vattrs,je.$children$=Se.vchildren,je.$key$=Se.vkey,je.$name$=Se.vname,je},Dn=(Se,je,Rt,Ot,Bt,Ge)=>{if(Rt!==Ot){let xt=pi(Se,je),Ut=je.toLowerCase();if("class"===je){const Zt=Se.classList,on=sn(Rt),In=sn(Ot);Zt.remove(...on.filter(Zn=>Zn&&!In.includes(Zn))),Zt.add(...In.filter(Zn=>Zn&&!on.includes(Zn)))}else if("style"===je){for(const Zt in Rt)(!Ot||null==Ot[Zt])&&(Zt.includes("-")?Se.style.removeProperty(Zt):Se.style[Zt]="");for(const Zt in Ot)(!Rt||Ot[Zt]!==Rt[Zt])&&(Zt.includes("-")?Se.style.setProperty(Zt,Ot[Zt]):Se.style[Zt]=Ot[Zt])}else if("key"!==je)if("ref"===je)Ot&&Ot(Se);else if(xt||"o"!==je[0]||"n"!==je[1]){const Zt=Dt(Ot);if((xt||Zt&&null!==Ot)&&!Bt)try{if(Se.tagName.includes("-"))Se[je]=Ot;else{const In=null==Ot?"":Ot;"list"===je?xt=!1:(null==Rt||Se[je]!=In)&&(Se[je]=In)}}catch(In){}let on=!1;Ut!==(Ut=Ut.replace(/^xlink\:?/,""))&&(je=Ut,on=!0),null==Ot||!1===Ot?(!1!==Ot||""===Se.getAttribute(je))&&(on?Se.removeAttributeNS(ut,je):Se.removeAttribute(je)):(!xt||4&Ge||Bt)&&!Zt&&(Ot=!0===Ot?"":Ot,on?Se.setAttributeNS(ut,je,Ot):Se.setAttribute(je,Ot))}else je="-"===je[2]?je.slice(3):pi(De,Ut)?Ut.slice(2):Ut[2]+je.slice(3),Rt&&Ne.rel(Se,je,Rt,!1),Ot&&Ne.ael(Se,je,Ot,!1)}},En=/\s/,sn=Se=>Se?Se.split(En):[],Ir=(Se,je,Rt,Ot)=>{const Bt=11===je.$elm$.nodeType&&je.$elm$.host?je.$elm$.host:je.$elm$,Ge=Se&&Se.$attrs$||fe,xt=je.$attrs$||fe;for(Ot in Ge)Ot in xt||Dn(Bt,Ot,Ge[Ot],void 0,Rt,je.$flags$);for(Ot in xt)Dn(Bt,Ot,Ge[Ot],xt[Ot],Rt,je.$flags$)},Vr=(Se,je,Rt,Ot)=>{const Bt=je.$children$[Rt];let xt,Ut,Zt,Ge=0;if(we||(be=!0,"slot"===Bt.$tag$&&(H&&Ot.classList.add(H+"-s"),Bt.$flags$|=Bt.$children$?2:1)),null!==Bt.$text$)xt=Bt.$elm$=xe.createTextNode(Bt.$text$);else if(1&Bt.$flags$)xt=Bt.$elm$=xe.createTextNode("");else{if($e||($e="svg"===Bt.$tag$),xt=Bt.$elm$=xe.createElementNS($e?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&Bt.$flags$?"slot-fb":Bt.$tag$),$e&&"foreignObject"===Bt.$tag$&&($e=!1),Ir(null,Bt,$e),(Se=>null!=Se)(H)&&xt["s-si"]!==H&&xt.classList.add(xt["s-si"]=H),Bt.$children$)for(Ge=0;Ge<Bt.$children$.length;++Ge)Ut=Vr(Se,Bt,Ge,xt),Ut&&xt.appendChild(Ut);"svg"===Bt.$tag$?$e=!1:"foreignObject"===xt.tagName&&($e=!0)}return xt["s-hn"]=le,3&Bt.$flags$&&(xt["s-sr"]=!0,xt["s-cr"]=he,xt["s-sn"]=Bt.$name$||"",Zt=Se&&Se.$children$&&Se.$children$[Rt],Zt&&Zt.$tag$===Bt.$tag$&&Se.$elm$&&br(Se.$elm$,!1)),xt},br=(Se,je)=>{Ne.$flags$|=1;const Rt=Se.childNodes;for(let Ot=Rt.length-1;Ot>=0;Ot--){const Bt=Rt[Ot];Bt["s-hn"]!==le&&Bt["s-ol"]&&(zi(Bt).insertBefore(Bt,cr(Bt)),Bt["s-ol"].remove(),Bt["s-ol"]=void 0,be=!0),je&&br(Bt,je)}Ne.$flags$&=-2},Kt=(Se,je,Rt,Ot,Bt,Ge)=>{let Ut,xt=Se["s-cr"]&&Se["s-cr"].parentNode||Se;for(xt.shadowRoot&&xt.tagName===le&&(xt=xt.shadowRoot);Bt<=Ge;++Bt)Ot[Bt]&&(Ut=Vr(null,Rt,Bt,Se),Ut&&(Ot[Bt].$elm$=Ut,xt.insertBefore(Ut,cr(je))))},Jr=(Se,je,Rt,Ot,Bt)=>{for(;je<=Rt;++je)(Ot=Se[je])&&(Bt=Ot.$elm$,jr(Ot),ye=!0,Bt["s-ol"]?Bt["s-ol"].remove():br(Bt,!0),Bt.remove())},Bn=(Se,je)=>Se.$tag$===je.$tag$&&("slot"===Se.$tag$?Se.$name$===je.$name$:Se.$key$===je.$key$),cr=Se=>Se&&Se["s-ol"]||Se,zi=Se=>(Se["s-ol"]?Se["s-ol"]:Se).parentNode,qn=(Se,je)=>{const Rt=je.$elm$=Se.$elm$,Ot=Se.$children$,Bt=je.$children$,Ge=je.$tag$,xt=je.$text$;let Ut;null===xt?($e="svg"===Ge||"foreignObject"!==Ge&&$e,"slot"===Ge||Ir(Se,je,$e),null!==Ot&&null!==Bt?((Se,je,Rt,Ot)=>{let Kr,_t,Bt=0,Ge=0,xt=0,Ut=0,Zt=je.length-1,on=je[0],In=je[Zt],Zn=Ot.length-1,Jn=Ot[0],ci=Ot[Zn];for(;Bt<=Zt&&Ge<=Zn;)if(null==on)on=je[++Bt];else if(null==In)In=je[--Zt];else if(null==Jn)Jn=Ot[++Ge];else if(null==ci)ci=Ot[--Zn];else if(Bn(on,Jn))qn(on,Jn),on=je[++Bt],Jn=Ot[++Ge];else if(Bn(In,ci))qn(In,ci),In=je[--Zt],ci=Ot[--Zn];else if(Bn(on,ci))("slot"===on.$tag$||"slot"===ci.$tag$)&&br(on.$elm$.parentNode,!1),qn(on,ci),Se.insertBefore(on.$elm$,In.$elm$.nextSibling),on=je[++Bt],ci=Ot[--Zn];else if(Bn(In,Jn))("slot"===on.$tag$||"slot"===ci.$tag$)&&br(In.$elm$.parentNode,!1),qn(In,Jn),Se.insertBefore(In.$elm$,on.$elm$),In=je[--Zt],Jn=Ot[++Ge];else{for(xt=-1,Ut=Bt;Ut<=Zt;++Ut)if(je[Ut]&&null!==je[Ut].$key$&&je[Ut].$key$===Jn.$key$){xt=Ut;break}xt>=0?(_t=je[xt],_t.$tag$!==Jn.$tag$?Kr=Vr(je&&je[Ge],Rt,xt,Se):(qn(_t,Jn),je[xt]=void 0,Kr=_t.$elm$),Jn=Ot[++Ge]):(Kr=Vr(je&&je[Ge],Rt,Ge,Se),Jn=Ot[++Ge]),Kr&&zi(on.$elm$).insertBefore(Kr,cr(on.$elm$))}Bt>Zt?Kt(Se,null==Ot[Zn+1]?null:Ot[Zn+1].$elm$,Rt,Ot,Ge,Zn):Ge>Zn&&Jr(je,Bt,Zt)})(Rt,Ot,je,Bt):null!==Bt?(null!==Se.$text$&&(Rt.textContent=""),Kt(Rt,null,je,Bt,0,Bt.length-1)):null!==Ot&&Jr(Ot,0,Ot.length-1),$e&&"svg"===Ge&&($e=!1)):(Ut=Rt["s-cr"])?Ut.parentNode.textContent=xt:Se.$text$!==xt&&(Rt.data=xt)},Wr=Se=>{const je=Se.childNodes;let Rt,Ot,Bt,Ge,xt,Ut;for(Ot=0,Bt=je.length;Ot<Bt;Ot++)if(Rt=je[Ot],1===Rt.nodeType){if(Rt["s-sr"])for(xt=Rt["s-sn"],Rt.hidden=!1,Ge=0;Ge<Bt;Ge++)if(Ut=je[Ge].nodeType,je[Ge]["s-hn"]!==Rt["s-hn"]||""!==xt){if(1===Ut&&xt===je[Ge].getAttribute("slot")){Rt.hidden=!0;break}}else if(1===Ut||3===Ut&&""!==je[Ge].textContent.trim()){Rt.hidden=!0;break}Wr(Rt)}},cn=[],_i=Se=>{let je,Rt,Ot,Bt,Ge,xt,Ut=0;const Zt=Se.childNodes,on=Zt.length;for(;Ut<on;Ut++){if(je=Zt[Ut],je["s-sr"]&&(Rt=je["s-cr"])&&Rt.parentNode)for(Ot=Rt.parentNode.childNodes,Bt=je["s-sn"],xt=Ot.length-1;xt>=0;xt--)Rt=Ot[xt],!Rt["s-cn"]&&!Rt["s-nr"]&&Rt["s-hn"]!==je["s-hn"]&&(Wi(Rt,Bt)?(Ge=cn.find(In=>In.$nodeToRelocate$===Rt),ye=!0,Rt["s-sn"]=Rt["s-sn"]||Bt,Ge?Ge.$slotRefNode$=je:cn.push({$slotRefNode$:je,$nodeToRelocate$:Rt}),Rt["s-sr"]&&cn.map(In=>{Wi(In.$nodeToRelocate$,Rt["s-sn"])&&(Ge=cn.find(Zn=>Zn.$nodeToRelocate$===Rt),Ge&&!In.$slotRefNode$&&(In.$slotRefNode$=Ge.$slotRefNode$))})):cn.some(In=>In.$nodeToRelocate$===Rt)||cn.push({$nodeToRelocate$:Rt}));1===je.nodeType&&_i(je)}},Wi=(Se,je)=>1===Se.nodeType?null===Se.getAttribute("slot")&&""===je||Se.getAttribute("slot")===je:Se["s-sn"]===je||""===je,jr=Se=>{Se.$attrs$&&Se.$attrs$.ref&&Se.$attrs$.ref(null),Se.$children$&&Se.$children$.map(jr)},Rr=Se=>Ei(Se).$hostElement$,Er=(Se,je,Rt)=>{const Ot=Rr(Se);return{emit:Bt=>ii(Ot,je,{bubbles:!!(4&Rt),composed:!!(2&Rt),cancelable:!!(1&Rt),detail:Bt})}},ii=(Se,je,Rt)=>{const Ot=Ne.ce(je,Rt);return Se.dispatchEvent(Ot),Ot},wn=(Se,je)=>{je&&!Se.$onRenderResolve$&&je["s-p"]&&je["s-p"].push(new Promise(Rt=>Se.$onRenderResolve$=Rt))},ln=(Se,je)=>{if(Se.$flags$|=16,!(4&Se.$flags$))return wn(Se,Se.$ancestorComponent$),Zi(()=>Un(Se,je));Se.$flags$|=512},Un=(Se,je)=>{const Ot=Se.$lazyInstance$;let Bt;return je&&(Se.$flags$|=256,Se.$queuedListeners$&&(Se.$queuedListeners$.map(([Ge,xt])=>ht(Ot,Ge,xt)),Se.$queuedListeners$=null),Bt=ht(Ot,"componentWillLoad")),Bt=qt(Bt,()=>ht(Ot,"componentWillRender")),qt(Bt,()=>dr(Se,Ot,je))},dr=function(){var Se=(0,m.Z)(function*(je,Rt,Ot){const Bt=je.$hostElement$,xt=Bt["s-rc"];Ot&&(Se=>{const je=Se.$cmpMeta$,Rt=Se.$hostElement$,Ot=je.$flags$,Ge=Le(Rt.shadowRoot?Rt.shadowRoot:Rt.getRootNode(),je,Se.$modeName$);10&Ot&&(Rt["s-sc"]=Ge,Rt.classList.add(Ge+"-h"),2&Ot&&Rt.classList.add(Ge+"-s"))})(je);jn(je,Rt),xt&&(xt.map(Zt=>Zt()),Bt["s-rc"]=void 0);{const Zt=Bt["s-p"],on=()=>hr(je);0===Zt.length?on():(Promise.all(Zt).then(on),je.$flags$|=4,Zt.length=0)}});return function(Rt,Ot,Bt){return Se.apply(this,arguments)}}(),jn=(Se,je,Rt)=>{try{je=je.render&&je.render(),Se.$flags$&=-17,Se.$flags$|=2,((Se,je)=>{const Rt=Se.$hostElement$,Ot=Se.$cmpMeta$,Bt=Se.$vnode$||yn(null,null),Ge=(Se=>Se&&Se.$tag$===Mn)(je)?je:Yt(null,null,je);if(le=Rt.tagName,Ot.$attrsToReflect$&&(Ge.$attrs$=Ge.$attrs$||{},Ot.$attrsToReflect$.map(([xt,Ut])=>Ge.$attrs$[Ut]=Rt[xt])),Ge.$tag$=null,Ge.$flags$|=4,Se.$vnode$=Ge,Ge.$elm$=Bt.$elm$=Rt.shadowRoot||Rt,H=Rt["s-sc"],he=Rt["s-cr"],we=0!=(1&Ot.$flags$),ye=!1,qn(Bt,Ge),Ne.$flags$|=1,be){_i(Ge.$elm$);let xt,Ut,Zt,on,In,Zn,Jn=0;for(;Jn<cn.length;Jn++)xt=cn[Jn],Ut=xt.$nodeToRelocate$,Ut["s-ol"]||(Zt=xe.createTextNode(""),Zt["s-nr"]=Ut,Ut.parentNode.insertBefore(Ut["s-ol"]=Zt,Ut));for(Jn=0;Jn<cn.length;Jn++)if(xt=cn[Jn],Ut=xt.$nodeToRelocate$,xt.$slotRefNode$){for(on=xt.$slotRefNode$.parentNode,In=xt.$slotRefNode$.nextSibling,Zt=Ut["s-ol"];Zt=Zt.previousSibling;)if(Zn=Zt["s-nr"],Zn&&Zn["s-sn"]===Ut["s-sn"]&&on===Zn.parentNode&&(Zn=Zn.nextSibling,!Zn||!Zn["s-nr"])){In=Zn;break}(!In&&on!==Ut.parentNode||Ut.nextSibling!==In)&&Ut!==In&&(!Ut["s-hn"]&&Ut["s-ol"]&&(Ut["s-hn"]=Ut["s-ol"].parentNode.nodeName),on.insertBefore(Ut,In))}else 1===Ut.nodeType&&(Ut.hidden=!0)}ye&&Wr(Ge.$elm$),Ne.$flags$&=-2,cn.length=0})(Se,je)}catch(Ot){ki(Ot,Se.$hostElement$)}return null},hr=Se=>{const Rt=Se.$hostElement$,Bt=Se.$lazyInstance$,Ge=Se.$ancestorComponent$;ht(Bt,"componentDidRender"),64&Se.$flags$?ht(Bt,"componentDidUpdate"):(Se.$flags$|=64,$t(Rt),ht(Bt,"componentDidLoad"),Se.$onReadyResolve$(Rt),Ge||ot()),Se.$onInstanceResolve$(Rt),Se.$onRenderResolve$&&(Se.$onRenderResolve$(),Se.$onRenderResolve$=void 0),512&Se.$flags$&&Gr(()=>ln(Se,!1)),Se.$flags$&=-517},He=Se=>{{const je=Ei(Se),Rt=je.$hostElement$.isConnected;return Rt&&2==(18&je.$flags$)&&ln(je,!1),Rt}},ot=Se=>{$t(xe.documentElement),Gr(()=>ii(De,"appload",{detail:{namespace:"ionic"}}))},ht=(Se,je,Rt)=>{if(Se&&Se[je])try{return Se[je](Rt)}catch(Ot){ki(Ot)}},qt=(Se,je)=>Se&&Se.then?Se.then(je):je(),$t=Se=>Se.classList.add("hydrated"),Cr=(Se,je,Rt,Ot,Bt,Ge,xt)=>{let Ut,Zt,on,In;if(1===Ge.nodeType){for(Ut=Ge.getAttribute("c-id"),Ut&&(Zt=Ut.split("."),(Zt[0]===xt||"0"===Zt[0])&&(on={$flags$:0,$hostId$:Zt[0],$nodeId$:Zt[1],$depth$:Zt[2],$index$:Zt[3],$tag$:Ge.tagName.toLowerCase(),$elm$:Ge,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},je.push(on),Ge.removeAttribute("c-id"),Se.$children$||(Se.$children$=[]),Se.$children$[on.$index$]=on,Se=on,Ot&&"0"===on.$depth$&&(Ot[on.$index$]=on.$elm$))),In=Ge.childNodes.length-1;In>=0;In--)Cr(Se,je,Rt,Ot,Bt,Ge.childNodes[In],xt);if(Ge.shadowRoot)for(In=Ge.shadowRoot.childNodes.length-1;In>=0;In--)Cr(Se,je,Rt,Ot,Bt,Ge.shadowRoot.childNodes[In],xt)}else if(8===Ge.nodeType)Zt=Ge.nodeValue.split("."),(Zt[1]===xt||"0"===Zt[1])&&(Ut=Zt[0],on={$flags$:0,$hostId$:Zt[1],$nodeId$:Zt[2],$depth$:Zt[3],$index$:Zt[4],$elm$:Ge,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===Ut?(on.$elm$=Ge.nextSibling,on.$elm$&&3===on.$elm$.nodeType&&(on.$text$=on.$elm$.textContent,je.push(on),Ge.remove(),Se.$children$||(Se.$children$=[]),Se.$children$[on.$index$]=on,Ot&&"0"===on.$depth$&&(Ot[on.$index$]=on.$elm$))):on.$hostId$===xt&&("s"===Ut?(on.$tag$="slot",Ge["s-sn"]=Zt[5]?on.$name$=Zt[5]:"",Ge["s-sr"]=!0,Ot&&(on.$elm$=xe.createElement(on.$tag$),on.$name$&&on.$elm$.setAttribute("name",on.$name$),Ge.parentNode.insertBefore(on.$elm$,Ge),Ge.remove(),"0"===on.$depth$&&(Ot[on.$index$]=on.$elm$)),Rt.push(on),Se.$children$||(Se.$children$=[]),Se.$children$[on.$index$]=on):"r"===Ut&&(Ot?Ge.remove():(Bt["s-cr"]=Ge,Ge["s-cn"]=!0))));else if(Se&&"style"===Se.$tag$){const Zn=yn(null,Ge.textContent);Zn.$elm$=Ge,Zn.$index$="0",Se.$children$=[Zn]}},Or=(Se,je)=>{if(1===Se.nodeType){let Rt=0;for(;Rt<Se.childNodes.length;Rt++)Or(Se.childNodes[Rt],je);if(Se.shadowRoot)for(Rt=0;Rt<Se.shadowRoot.childNodes.length;Rt++)Or(Se.shadowRoot.childNodes[Rt],je)}else if(8===Se.nodeType){const Rt=Se.nodeValue.split(".");"o"===Rt[0]&&(je.set(Rt[1]+"."+Rt[2],Se),Se.nodeValue="",Se["s-en"]=Rt[3])}},St=(Se,je,Rt)=>{if(je.$members$){Se.watchers&&(je.$watchers$=Se.watchers);const Ot=Object.entries(je.$members$),Bt=Se.prototype;if(Ot.map(([Ge,[xt]])=>{31&xt||2&Rt&&32&xt?Object.defineProperty(Bt,Ge,{get(){return((Se,je)=>Ei(this).$instanceValues$.get(je))(0,Ge)},set(Ut){((Se,je,Rt,Ot)=>{const Bt=Ei(Se),Ge=Bt.$hostElement$,xt=Bt.$instanceValues$.get(je),Ut=Bt.$flags$,Zt=Bt.$lazyInstance$;Rt=((Se,je)=>null==Se||Dt(Se)?Se:4&je?"false"!==Se&&(""===Se||!!Se):2&je?parseFloat(Se):1&je?String(Se):Se)(Rt,Ot.$members$[je][0]);const on=Number.isNaN(xt)&&Number.isNaN(Rt);if((!(8&Ut)||void 0===xt)&&Rt!==xt&&!on&&(Bt.$instanceValues$.set(je,Rt),Zt)){if(Ot.$watchers$&&128&Ut){const Zn=Ot.$watchers$[je];Zn&&Zn.map(Jn=>{try{Zt[Jn](Rt,xt,je)}catch(ci){ki(ci,Ge)}})}2==(18&Ut)&&ln(Bt,!1)}})(this,Ge,Ut,je)},configurable:!0,enumerable:!0}):1&Rt&&64&xt&&Object.defineProperty(Bt,Ge,{value(...Ut){const Zt=Ei(this);return Zt.$onInstancePromise$.then(()=>Zt.$lazyInstance$[Ge](...Ut))}})}),1&Rt){const Ge=new Map;Bt.attributeChangedCallback=function(xt,Ut,Zt){Ne.jmp(()=>{const on=Ge.get(xt);if(this.hasOwnProperty(on))Zt=this[on],delete this[on];else if(Bt.hasOwnProperty(on)&&"number"==typeof this[on]&&this[on]==Zt)return;this[on]=(null!==Zt||"boolean"!=typeof this[on])&&Zt})},Se.observedAttributes=Ot.filter(([xt,Ut])=>15&Ut[0]).map(([xt,Ut])=>{const Zt=Ut[1]||xt;return Ge.set(Zt,xt),512&Ut[0]&&je.$attrsToReflect$.push([xt,Zt]),Zt})}}return Se},vt=function(){var Se=(0,m.Z)(function*(je,Rt,Ot,Bt,Ge){if(!(32&Rt.$flags$)){{if(Rt.$flags$|=32,(Ge=Mr(Ot)).then){const on=()=>{};Ge=yield Ge,on()}Ge.isProxied||(Ot.$watchers$=Ge.watchers,St(Ge,Ot,2),Ge.isProxied=!0);const Zt=()=>{};Rt.$flags$|=8;try{new Ge(Rt)}catch(on){ki(on)}Rt.$flags$&=-9,Rt.$flags$|=128,Zt(),Je(Rt.$lazyInstance$)}if(Ge.style){let Zt=Ge.style;"string"!=typeof Zt&&(Zt=Zt[Rt.$modeName$=(Se=>Oi.map(je=>je(Se)).find(je=>!!je))(je)]);const on=Ze(Ot,Rt.$modeName$);if(!pr.has(on)){const In=()=>{};gt(on,Zt,!!(1&Ot.$flags$)),In()}}}const xt=Rt.$ancestorComponent$,Ut=()=>ln(Rt,!0);xt&&xt["s-rc"]?xt["s-rc"].push(Ut):Ut()});return function(Rt,Ot,Bt,Ge,xt){return Se.apply(this,arguments)}}(),Je=Se=>{ht(Se,"connectedCallback")},an=Se=>{const je=Se["s-cr"]=xe.createComment("");je["s-cn"]=!0,Se.insertBefore(je,Se.firstChild)},sr=(Se,je={})=>{const Ot=[],Bt=je.exclude||[],Ge=De.customElements,xt=xe.head,Ut=xt.querySelector("meta[charset]"),Zt=xe.createElement("style"),on=[],In=xe.querySelectorAll(`[${lt}]`);let Zn,Jn=!0,ci=0;for(Object.assign(Ne,je),Ne.$resourcesUrl$=new URL(je.resourcesUrl||"./",xe.baseURI).href,Ne.$flags$|=2;ci<In.length;ci++)gt(In[ci].getAttribute(lt),me(In[ci].innerHTML),!0);Se.map(Kr=>{Kr[1].map(_t=>{const bt={$flags$:_t[0],$tagName$:_t[1],$members$:_t[2],$listeners$:_t[3]};bt.$members$=_t[2],bt.$listeners$=_t[3],bt.$attrsToReflect$=[],bt.$watchers$={};const Ft=bt.$tagName$,Ht=class extends HTMLElement{constructor(fn){super(fn),Lo(fn=this,bt),1&bt.$flags$&&fn.attachShadow({mode:"open",delegatesFocus:!!(16&bt.$flags$)})}connectedCallback(){Zn&&(clearTimeout(Zn),Zn=null),Jn?on.push(this):Ne.jmp(()=>(Se=>{if(!(1&Ne.$flags$)){const je=Ei(Se),Rt=je.$cmpMeta$,Ot=()=>{};if(1&je.$flags$)Fe(Se,je,Rt.$listeners$),Je(je.$lazyInstance$);else{let Bt;if(je.$flags$|=1,Bt=Se.getAttribute($),Bt){if(1&Rt.$flags$){const Ge=Le(Se.shadowRoot,Rt,Se.getAttribute("s-mode"));Se.classList.remove(Ge+"-h",Ge+"-s")}((Se,je,Rt,Ot)=>{const Ge=Se.shadowRoot,xt=[],Zt=Ge?[]:null,on=Ot.$vnode$=yn(je,null);Ne.$orgLocNodes$||Or(xe.body,Ne.$orgLocNodes$=new Map),Se[$]=Rt,Se.removeAttribute($),Cr(on,xt,[],Zt,Se,Se,Rt),xt.map(In=>{const Zn=In.$hostId$+"."+In.$nodeId$,Jn=Ne.$orgLocNodes$.get(Zn),ci=In.$elm$;Jn&&""===Jn["s-en"]&&Jn.parentNode.insertBefore(ci,Jn.nextSibling),Ge||(ci["s-hn"]=je,Jn&&(ci["s-ol"]=Jn,ci["s-ol"]["s-nr"]=ci)),Ne.$orgLocNodes$.delete(Zn)}),Ge&&Zt.map(In=>{In&&Ge.appendChild(In)})})(Se,Rt.$tagName$,Bt,je)}Bt||12&Rt.$flags$&&an(Se);{let Ge=Se;for(;Ge=Ge.parentNode||Ge.host;)if(1===Ge.nodeType&&Ge.hasAttribute("s-id")&&Ge["s-p"]||Ge["s-p"]){wn(je,je.$ancestorComponent$=Ge);break}}Rt.$members$&&Object.entries(Rt.$members$).map(([Ge,[xt]])=>{if(31&xt&&Se.hasOwnProperty(Ge)){const Ut=Se[Ge];delete Se[Ge],Se[Ge]=Ut}}),Gr(()=>vt(Se,je,Rt))}Ot()}})(this))}disconnectedCallback(){Ne.jmp(()=>(Se=>{if(!(1&Ne.$flags$)){const je=Ei(this),Rt=je.$lazyInstance$;je.$rmListeners$&&(je.$rmListeners$.map(Ot=>Ot()),je.$rmListeners$=void 0),ht(Rt,"disconnectedCallback")}})())}componentOnReady(){return Ei(this).$onReadyPromise$}};bt.$lazyBundleId$=Kr[0],!Bt.includes(Ft)&&!Ge.get(Ft)&&(Ot.push(Ft),Ge.define(Ft,St(Ht,bt,1)))})}),Zt.innerHTML=Ot+"{visibility:hidden}.hydrated{visibility:inherit}",Zt.setAttribute("data-styles",""),xt.insertBefore(Zt,Ut?Ut.nextSibling:xt.firstChild),Jn=!1,on.length?on.map(Kr=>Kr.connectedCallback()):Ne.jmp(()=>Zn=setTimeout(ot,30))},fi=Se=>{const je=new URL(Se,Ne.$resourcesUrl$);return je.origin!==De.location.origin?je.href:je.pathname},Yr=new WeakMap,Ei=Se=>Yr.get(Se),ti=(Se,je)=>Yr.set(je.$lazyInstance$=Se,je),Lo=(Se,je)=>{const Rt={$flags$:0,$hostElement$:Se,$cmpMeta$:je,$instanceValues$:new Map};return Rt.$onInstancePromise$=new Promise(Ot=>Rt.$onInstanceResolve$=Ot),Rt.$onReadyPromise$=new Promise(Ot=>Rt.$onReadyResolve$=Ot),Se["s-p"]=[],Se["s-rc"]=[],Fe(Se,Rt,je.$listeners$),Yr.set(Se,Rt)},pi=(Se,je)=>je in Se,ki=(Se,je)=>(0,console.error)(Se,je),wo=new Map,Mr=(Se,je,Rt)=>{const Ot=Se.$tagName$.replace(/-/g,"_"),Bt=Se.$lazyBundleId$,Ge=wo.get(Bt);return Ge?Ge[Ot]:U(863)(`./${Bt}.entry.js`).then(xt=>(wo.set(Bt,xt),xt[Ot]),ki)},pr=new Map,Oi=[],Tr=[],oi=[],Ln=(Se,je)=>Rt=>{Se.push(Rt),ge||(ge=!0,je&&4&Ne.$flags$?Gr(gr):Ne.raf(gr))},Hn=Se=>{for(let je=0;je<Se.length;je++)try{Se[je](performance.now())}catch(Rt){ki(Rt)}Se.length=0},gr=()=>{Hn(Tr),Hn(oi),(ge=Tr.length>0)&&Ne.raf(gr)},Gr=Se=>Lt().then(Se),Vi=Ln(Tr,!1),Zi=Ln(oi,!0),Fi={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},5179:(pn,Pe,U)=>{"use strict";U.d(Pe,{a:()=>De,b:()=>mt,c:()=>H,g:()=>ge,i:()=>gt});var m=U(1308);class J{constructor(){this.m=new Map}reset(it){this.m=new Map(Object.entries(it))}get(it,Ze){const me=this.m.get(it);return void 0!==me?me:Ze}getBoolean(it,Ze=!1){const me=this.m.get(it);return void 0===me?Ze:"string"==typeof me?"true"===me:!!me}getNumber(it,Ze){const me=parseFloat(this.m.get(it));return isNaN(me)?void 0!==Ze?Ze:NaN:me}set(it,Ze){this.m.set(it,Ze)}}const H=new J,$e="ionic-persist-config",ge=Le=>xe(Le),De=(Le,it)=>("string"==typeof Le&&(it=Le,Le=void 0),ge(Le).includes(it)),xe=(Le=window)=>{if(typeof Le>"u")return[];Le.Ionic=Le.Ionic||{};let it=Le.Ionic.platforms;return null==it&&(it=Le.Ionic.platforms=Ne(Le),it.forEach(Ze=>Le.document.documentElement.classList.add(`plt-${Ze}`))),it},Ne=Le=>{const it=H.get("platform");return Object.keys(ft).filter(Ze=>{const me=null==it?void 0:it[Ze];return"function"==typeof me?me(Le):ft[Ze](Le)})},Ke=Le=>!!(qe(Le,/iPad/i)||qe(Le,/Macintosh/i)&&yt(Le)),Fe=Le=>qe(Le,/android|sink/i),yt=Le=>ut(Le,"(any-pointer:coarse)"),Be=Le=>Ye(Le)||$(Le),Ye=Le=>!!(Le.cordova||Le.phonegap||Le.PhoneGap),$=Le=>{const it=Le.Capacitor;return!(null==it||!it.isNative)},qe=(Le,it)=>it.test(Le.navigator.userAgent),ut=(Le,it)=>{var Ze;return null===(Ze=Le.matchMedia)||void 0===Ze?void 0:Ze.call(Le,it).matches},ft={ipad:Ke,iphone:Le=>qe(Le,/iPhone/i),ios:Le=>qe(Le,/iPhone|iPod/i)||Ke(Le),android:Fe,phablet:Le=>{const it=Le.innerWidth,Ze=Le.innerHeight,me=Math.min(it,Ze),te=Math.max(it,Ze);return me>390&&me<520&&te>620&&te<800},tablet:Le=>{const it=Le.innerWidth,Ze=Le.innerHeight,me=Math.min(it,Ze),te=Math.max(it,Ze);return Ke(Le)||(Le=>Fe(Le)&&!qe(Le,/mobile/i))(Le)||me>460&&me<820&&te>780&&te<1400},cordova:Ye,capacitor:$,electron:Le=>qe(Le,/electron/i),pwa:Le=>{var it;return!!(null!==(it=Le.matchMedia)&&void 0!==it&&it.call(Le,"(display-mode: standalone)").matches||Le.navigator.standalone)},mobile:yt,mobileweb:Le=>yt(Le)&&!Be(Le),desktop:Le=>!yt(Le),hybrid:Be};let pt;const mt=Le=>Le&&(0,m.g)(Le)||pt,gt=(Le={})=>{if(typeof window>"u")return;const it=window.document,Ze=window,me=Ze.Ionic=Ze.Ionic||{},te={};Le._ael&&(te.ael=Le._ael),Le._rel&&(te.rel=Le._rel),Le._ce&&(te.ce=Le._ce),(0,m.s)(te);const q=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Le=>{try{const it=Le.sessionStorage.getItem($e);return null!==it?JSON.parse(it):{}}catch(it){return{}}})(Ze)),{persistConfig:!1}),me.config),(Le=>{const it={};return Le.location.search.slice(1).split("&").map(Ze=>Ze.split("=")).map(([Ze,me])=>[decodeURIComponent(Ze),decodeURIComponent(me)]).filter(([Ze])=>((Le,it)=>Le.substr(0,it.length)===it)(Ze,"ionic:")).map(([Ze,me])=>[Ze.slice("ionic:".length),me]).forEach(([Ze,me])=>{it[Ze]=me}),it})(Ze)),Le);H.reset(q),H.getBoolean("persistConfig")&&((Le,it)=>{try{Le.sessionStorage.setItem($e,JSON.stringify(it))}catch(Ze){return}})(Ze,q),xe(Ze),me.config=H,me.mode=pt=H.get("mode",it.documentElement.getAttribute("mode")||(De(Ze,"ios")?"ios":"md")),H.set("mode",pt),it.documentElement.setAttribute("mode",pt),it.documentElement.classList.add(pt),H.getBoolean("_testing")&&H.set("animated",!1);const re=ke=>{var rt;return null===(rt=ke.tagName)||void 0===rt?void 0:rt.startsWith("ION-")},fe=ke=>["ios","md"].includes(ke);(0,m.a)(ke=>{for(;ke;){const rt=ke.mode||ke.getAttribute("mode");if(rt){if(fe(rt))return rt;re(ke)&&console.warn('Invalid ionic mode: "'+rt+'", expected: "ios" or "md"')}ke=ke.parentElement}return pt})}},6439:(pn,Pe,U)=>{"use strict";U.r(Pe),U.d(Pe,{iosTransitionAnimation:()=>Ne,shadow:()=>ye});var m=U(181),J=U(1843);U(3457),U(1308);const we=Xe=>document.querySelector(`${Xe}.ion-cloned-element`),ye=Xe=>Xe.shadowRoot||Xe,be=Xe=>{const Ke="ION-TABS"===Xe.tagName?Xe:Xe.querySelector("ion-tabs"),Lt="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=Ke){const We=Ke.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=We?We.querySelector(Lt):null}return Xe.querySelector(Lt)},$e=(Xe,Ke)=>{const Lt="ION-TABS"===Xe.tagName?Xe:Xe.querySelector("ion-tabs");let We=[];if(null!=Lt){const Fe=Lt.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=Fe&&(We=Fe.querySelectorAll("ion-buttons"))}else We=Xe.querySelectorAll("ion-buttons");for(const Fe of We){const Ce=Fe.closest("ion-header"),ct=Ce&&!Ce.classList.contains("header-collapse-condense-inactive"),At=Fe.querySelector("ion-back-button"),yt=Fe.classList.contains("buttons-collapse");if(null!==At&&("start"===Fe.slot||""===Fe.slot)&&(yt&&ct&&Ke||!yt))return At}return null},De=(Xe,Ke,Lt,We,Fe,Ce)=>{const ct=Ke?`calc(100% - ${Ce.right+4}px)`:Ce.left-4+"px",At=Ke?"7px":"-7px",yt=Ke?"-4px":"4px",st=Ke?"-4px":"4px",Be=Ke?"right":"left",Ye=Ke?"left":"right",Qe=Lt?[{offset:0,opacity:1,transform:`translate3d(${yt}, ${Ce.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${At}, ${Fe.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${At}, ${Fe.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${yt}, ${Ce.top-46}px, 0) scale(1)`}],ft=Lt?[{offset:0,opacity:1,transform:`translate3d(${st}, ${Ce.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${st}, ${Ce.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${st}, ${Ce.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${st}, ${Ce.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${st}, ${Ce.top-46}px, 0) scale(1)`}],pt=(0,m.c)(),mt=(0,m.c)(),gt=we("ion-back-button"),Le=ye(gt).querySelector(".button-text"),it=ye(gt).querySelector("ion-icon");gt.text=We.text,gt.mode=We.mode,gt.icon=We.icon,gt.color=We.color,gt.disabled=We.disabled,gt.style.setProperty("display","block"),gt.style.setProperty("position","fixed"),mt.addElement(it),pt.addElement(Le),pt.beforeStyles({"transform-origin":`${Be} center`}).beforeAddWrite(()=>{We.style.setProperty("display","none"),gt.style.setProperty(Be,ct)}).afterAddWrite(()=>{We.style.setProperty("display",""),gt.style.setProperty("display","none"),gt.style.removeProperty(Be)}).keyframes(Qe),mt.beforeStyles({"transform-origin":`${Ye} center`}).keyframes(ft),Xe.addAnimation([pt,mt])},xe=(Xe,Ke,Lt,We,Fe,Ce)=>{const ct=Ke?`calc(100% - ${Fe.right}px)`:`${Fe.left}px`,At=Ke?"-18px":"18px",yt=Ke?"right":"left",Ye=Lt?[{offset:0,opacity:0,transform:`translate3d(${At}, ${Ce.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${Fe.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${Fe.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${At}, ${Ce.top-4}px, 0) scale(0.5)`}],$=we("ion-title"),lt=(0,m.c)();$.innerText=We.innerText,$.size=We.size,$.color=We.color,lt.addElement($),lt.beforeStyles({"transform-origin":`${yt} center`,height:"46px",display:"",position:"relative",[yt]:ct}).beforeAddWrite(()=>{We.style.setProperty("display","none")}).afterAddWrite(()=>{We.style.setProperty("display",""),$.style.setProperty("display","none")}).keyframes(Ye),Xe.addAnimation(lt)},Ne=(Xe,Ke)=>{var Lt;try{const We="cubic-bezier(0.32,0.72,0,1)",Fe="opacity",Ce="transform",ct="0%",yt="rtl"===Xe.ownerDocument.dir,st=yt?"-99.5%":"99.5%",Be=yt?"33%":"-33%",Ye=Ke.enteringEl,$=Ke.leavingEl,lt="back"===Ke.direction,Qe=Ye.querySelector(":scope > ion-content"),qe=Ye.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),ut=Ye.querySelectorAll(":scope > ion-header > ion-toolbar"),ft=(0,m.c)(),pt=(0,m.c)();if(ft.addElement(Ye).duration((null!==(Lt=Ke.duration)&&void 0!==Lt?Lt:0)||540).easing(Ke.easing||We).fill("both").beforeRemoveClass("ion-page-invisible"),$&&null!=Xe){const it=(0,m.c)();it.addElement(Xe),ft.addAnimation(it)}if(Qe||0!==ut.length||0!==qe.length?(pt.addElement(Qe),pt.addElement(qe)):pt.addElement(Ye.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),ft.addAnimation(pt),lt?pt.beforeClearStyles([Fe]).fromTo("transform",`translateX(${Be})`,`translateX(${ct})`).fromTo(Fe,.8,1):pt.beforeClearStyles([Fe]).fromTo("transform",`translateX(${st})`,`translateX(${ct})`),Qe){const it=ye(Qe).querySelector(".transition-effect");if(it){const Ze=it.querySelector(".transition-cover"),me=it.querySelector(".transition-shadow"),te=(0,m.c)(),q=(0,m.c)(),re=(0,m.c)();te.addElement(it).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),q.addElement(Ze).beforeClearStyles([Fe]).fromTo(Fe,0,.1),re.addElement(me).beforeClearStyles([Fe]).fromTo(Fe,.03,.7),te.addAnimation([q,re]),pt.addAnimation([te])}}const mt=Ye.querySelector("ion-header.header-collapse-condense"),{forward:gt,backward:Le}=((Xe,Ke,Lt,We,Fe)=>{const Ce=$e(We,Lt),ct=be(Fe),At=be(We),yt=$e(Fe,Lt),st=null!==Ce&&null!==ct&&!Lt,Be=null!==At&&null!==yt&&Lt;if(st){const Ye=ct.getBoundingClientRect(),$=Ce.getBoundingClientRect();xe(Xe,Ke,Lt,ct,Ye,$),De(Xe,Ke,Lt,Ce,Ye,$)}else if(Be){const Ye=At.getBoundingClientRect(),$=yt.getBoundingClientRect();xe(Xe,Ke,Lt,At,Ye,$),De(Xe,Ke,Lt,yt,Ye,$)}return{forward:st,backward:Be}})(ft,yt,lt,Ye,$);if(ut.forEach(it=>{const Ze=(0,m.c)();Ze.addElement(it),ft.addAnimation(Ze);const me=(0,m.c)();me.addElement(it.querySelector("ion-title"));const te=(0,m.c)(),q=Array.from(it.querySelectorAll("ion-buttons,[menuToggle]")),re=it.closest("ion-header"),fe=null==re?void 0:re.classList.contains("header-collapse-condense-inactive");let ke;ke=q.filter(lt?yn=>{const Mn=yn.classList.contains("buttons-collapse");return Mn&&!fe||!Mn}:yn=>!yn.classList.contains("buttons-collapse")),te.addElement(ke);const rt=(0,m.c)();rt.addElement(it.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const Qt=(0,m.c)();Qt.addElement(ye(it).querySelector(".toolbar-background"));const Dt=(0,m.c)(),Yt=it.querySelector("ion-back-button");if(Yt&&Dt.addElement(Yt),Ze.addAnimation([me,te,rt,Qt,Dt]),te.fromTo(Fe,.01,1),rt.fromTo(Fe,.01,1),lt)fe||me.fromTo("transform",`translateX(${Be})`,`translateX(${ct})`).fromTo(Fe,.01,1),rt.fromTo("transform",`translateX(${Be})`,`translateX(${ct})`),Dt.fromTo(Fe,.01,1);else if(mt||me.fromTo("transform",`translateX(${st})`,`translateX(${ct})`).fromTo(Fe,.01,1),rt.fromTo("transform",`translateX(${st})`,`translateX(${ct})`),Qt.beforeClearStyles([Fe,"transform"]),(null==re?void 0:re.translucent)?Qt.fromTo("transform",yt?"translateX(-100%)":"translateX(100%)","translateX(0px)"):Qt.fromTo(Fe,.01,"var(--opacity)"),gt||Dt.fromTo(Fe,.01,1),Yt&&!gt){const Mn=(0,m.c)();Mn.addElement(ye(Yt).querySelector(".button-text")).fromTo("transform",yt?"translateX(-100px)":"translateX(100px)","translateX(0px)"),Ze.addAnimation(Mn)}}),$){const it=(0,m.c)(),Ze=$.querySelector(":scope > ion-content"),me=$.querySelectorAll(":scope > ion-header > ion-toolbar"),te=$.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(Ze||0!==me.length||0!==te.length?(it.addElement(Ze),it.addElement(te)):it.addElement($.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),ft.addAnimation(it),lt){it.beforeClearStyles([Fe]).fromTo("transform",`translateX(${ct})`,yt?"translateX(-100%)":"translateX(100%)");const q=(0,J.g)($);ft.afterAddWrite(()=>{"normal"===ft.getDirection()&&q.style.setProperty("display","none")})}else it.fromTo("transform",`translateX(${ct})`,`translateX(${Be})`).fromTo(Fe,1,.8);if(Ze){const q=ye(Ze).querySelector(".transition-effect");if(q){const re=q.querySelector(".transition-cover"),fe=q.querySelector(".transition-shadow"),ke=(0,m.c)(),rt=(0,m.c)(),Qt=(0,m.c)();ke.addElement(q).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),rt.addElement(re).beforeClearStyles([Fe]).fromTo(Fe,.1,0),Qt.addElement(fe).beforeClearStyles([Fe]).fromTo(Fe,.7,.03),ke.addAnimation([rt,Qt]),it.addAnimation([ke])}}me.forEach(q=>{const re=(0,m.c)();re.addElement(q);const fe=(0,m.c)();fe.addElement(q.querySelector("ion-title"));const ke=(0,m.c)(),rt=q.querySelectorAll("ion-buttons,[menuToggle]"),Qt=q.closest("ion-header"),Dt=null==Qt?void 0:Qt.classList.contains("header-collapse-condense-inactive"),Yt=Array.from(rt).filter(Nn=>{const Dn=Nn.classList.contains("buttons-collapse");return Dn&&!Dt||!Dn});ke.addElement(Yt);const yn=(0,m.c)(),Mn=q.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Mn.length>0&&yn.addElement(Mn);const mn=(0,m.c)();mn.addElement(ye(q).querySelector(".toolbar-background"));const Gn=(0,m.c)(),Ar=q.querySelector("ion-back-button");if(Ar&&Gn.addElement(Ar),re.addAnimation([fe,ke,yn,Gn,mn]),ft.addAnimation(re),Gn.fromTo(Fe,.99,0),ke.fromTo(Fe,.99,0),yn.fromTo(Fe,.99,0),lt){if(Dt||fe.fromTo("transform",`translateX(${ct})`,yt?"translateX(-100%)":"translateX(100%)").fromTo(Fe,.99,0),yn.fromTo("transform",`translateX(${ct})`,yt?"translateX(-100%)":"translateX(100%)"),mn.beforeClearStyles([Fe,"transform"]),(null==Qt?void 0:Qt.translucent)?mn.fromTo("transform","translateX(0px)",yt?"translateX(-100%)":"translateX(100%)"):mn.fromTo(Fe,"var(--opacity)",0),Ar&&!Le){const Dn=(0,m.c)();Dn.addElement(ye(Ar).querySelector(".button-text")).fromTo("transform",`translateX(${ct})`,`translateX(${(yt?-124:124)+"px"})`),re.addAnimation(Dn)}}else Dt||fe.fromTo("transform",`translateX(${ct})`,`translateX(${Be})`).fromTo(Fe,.99,0).afterClearStyles([Ce,Fe]),yn.fromTo("transform",`translateX(${ct})`,`translateX(${Be})`).afterClearStyles([Ce,Fe]),Gn.afterClearStyles([Fe]),fe.afterClearStyles([Fe]),ke.afterClearStyles([Fe])})}return ft}catch(We){throw We}}},7838:(pn,Pe,U)=>{"use strict";U.r(Pe),U.d(Pe,{mdTransitionAnimation:()=>le});var m=U(181),J=U(1843);U(3457),U(1308);const le=(we,ye)=>{var be,$e,ge;const Ne="back"===ye.direction,Ke=ye.leavingEl,Lt=(0,J.g)(ye.enteringEl),We=Lt.querySelector("ion-toolbar"),Fe=(0,m.c)();if(Fe.addElement(Lt).fill("both").beforeRemoveClass("ion-page-invisible"),Ne?Fe.duration((null!==(be=ye.duration)&&void 0!==be?be:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):Fe.duration((null!==($e=ye.duration)&&void 0!==$e?$e:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),We){const Ce=(0,m.c)();Ce.addElement(We),Fe.addAnimation(Ce)}if(Ke&&Ne){Fe.duration((null!==(ge=ye.duration)&&void 0!==ge?ge:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const Ce=(0,m.c)();Ce.addElement((0,J.g)(Ke)).onFinish(ct=>{1===ct&&Ce.elements.length>0&&Ce.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),Fe.addAnimation(Ce)}return Fe}},7996:(pn,Pe,U)=>{"use strict";U.d(Pe,{B:()=>Ze,G:()=>me,a:()=>be,b:()=>$e,c:()=>Ne,d:()=>lt,e:()=>Ke,f:()=>qe,g:()=>pt,h:()=>we,i:()=>gt,j:()=>Fe,k:()=>Ye,l:()=>ge,m:()=>De,s:()=>it});var m=U(5861),J=U(5179),H=U(7593),he=U(5730);let le=0;const we=new WeakMap,ye=te=>({create:q=>Lt(te,q),dismiss:(q,re,fe)=>st(document,q,re,te,fe),getTop:()=>(0,m.Z)(function*(){return Ye(document,te)})()}),be=ye("ion-alert"),$e=ye("ion-action-sheet"),ge=ye("ion-loading"),De=ye("ion-modal"),Ne=ye("ion-popover"),Ke=te=>{typeof document<"u"&&yt(document);const q=le++;te.overlayIndex=q,te.hasAttribute("id")||(te.id=`ion-overlay-${q}`)},Lt=(te,q)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(te).then(()=>{const re=document.createElement(te);return re.classList.add("overlay-hidden"),Object.assign(re,Object.assign(Object.assign({},q),{hasController:!0})),ut(document).appendChild(re),new Promise(fe=>(0,he.c)(re,fe))}):Promise.resolve(),We='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',Fe=(te,q)=>{let re=te.querySelector(We);const fe=null==re?void 0:re.shadowRoot;fe&&(re=fe.querySelector(We)||re),re?(0,he.f)(re):q.focus()},ct=(te,q)=>{const re=Array.from(te.querySelectorAll(We));let fe=re.length>0?re[re.length-1]:null;const ke=null==fe?void 0:fe.shadowRoot;ke&&(fe=ke.querySelector(We)||fe),fe?fe.focus():q.focus()},yt=te=>{0===le&&(le=1,te.addEventListener("focus",q=>{((te,q)=>{const re=Ye(q,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),fe=te.target;re&&fe&&!re.classList.contains("ion-disable-focus-trap")&&(re.shadowRoot?(()=>{if(re.contains(fe))re.lastFocus=fe;else{const Qt=re.lastFocus;Fe(re,re),Qt===q.activeElement&&ct(re,re),re.lastFocus=q.activeElement}})():(()=>{if(re===fe)re.lastFocus=void 0;else{const Qt=(0,he.g)(re);if(!Qt.contains(fe))return;const Dt=Qt.querySelector(".ion-overlay-wrapper");if(!Dt)return;if(Dt.contains(fe))re.lastFocus=fe;else{const Yt=re.lastFocus;Fe(Dt,re),Yt===q.activeElement&&ct(Dt,re),re.lastFocus=q.activeElement}}})())})(q,te)},!0),te.addEventListener("ionBackButton",q=>{const re=Ye(te);null!=re&&re.backdropDismiss&&q.detail.register(H.OVERLAY_BACK_BUTTON_PRIORITY,()=>re.dismiss(void 0,Ze))}),te.addEventListener("keyup",q=>{if("Escape"===q.key){const re=Ye(te);null!=re&&re.backdropDismiss&&re.dismiss(void 0,Ze)}}))},st=(te,q,re,fe,ke)=>{const rt=Ye(te,fe,ke);return rt?rt.dismiss(q,re):Promise.reject("overlay does not exist")},Ye=(te,q,re)=>{const fe=((te,q)=>(void 0===q&&(q="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(te.querySelectorAll(q)).filter(re=>re.overlayIndex>0)))(te,q).filter(ke=>!(te=>te.classList.contains("overlay-hidden"))(ke));return void 0===re?fe[fe.length-1]:fe.find(ke=>ke.id===re)},$=(te=!1)=>{const re=ut(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");re&&(te?re.setAttribute("aria-hidden","true"):re.removeAttribute("aria-hidden"))},lt=function(){var te=(0,m.Z)(function*(q,re,fe,ke,rt){var Qt,Dt;if(q.presented)return;$(!0),q.presented=!0,q.willPresent.emit(),null===(Qt=q.willPresentShorthand)||void 0===Qt||Qt.emit();const Yt=(0,J.b)(q),yn=q.enterAnimation?q.enterAnimation:J.c.get(re,"ios"===Yt?fe:ke);(yield ft(q,yn,q.el,rt))&&(q.didPresent.emit(),null===(Dt=q.didPresentShorthand)||void 0===Dt||Dt.emit()),"ION-TOAST"!==q.el.tagName&&Qe(q.el),q.keyboardClose&&(null===document.activeElement||!q.el.contains(document.activeElement))&&q.el.focus()});return function(re,fe,ke,rt,Qt){return te.apply(this,arguments)}}(),Qe=function(){var te=(0,m.Z)(function*(q){let re=document.activeElement;if(!re)return;const fe=null==re?void 0:re.shadowRoot;fe&&(re=fe.querySelector(We)||re),yield q.onDidDismiss(),re.focus()});return function(re){return te.apply(this,arguments)}}(),qe=function(){var te=(0,m.Z)(function*(q,re,fe,ke,rt,Qt,Dt){var Yt,yn;if(!q.presented)return!1;$(!1),q.presented=!1;try{q.el.style.setProperty("pointer-events","none"),q.willDismiss.emit({data:re,role:fe}),null===(Yt=q.willDismissShorthand)||void 0===Yt||Yt.emit({data:re,role:fe});const Mn=(0,J.b)(q),mn=q.leaveAnimation?q.leaveAnimation:J.c.get(ke,"ios"===Mn?rt:Qt);fe!==me&&(yield ft(q,mn,q.el,Dt)),q.didDismiss.emit({data:re,role:fe}),null===(yn=q.didDismissShorthand)||void 0===yn||yn.emit({data:re,role:fe}),we.delete(q),q.el.classList.add("overlay-hidden"),q.el.style.removeProperty("pointer-events")}catch(Mn){console.error(Mn)}return q.el.remove(),!0});return function(re,fe,ke,rt,Qt,Dt,Yt){return te.apply(this,arguments)}}(),ut=te=>te.querySelector("ion-app")||te.body,ft=function(){var te=(0,m.Z)(function*(q,re,fe,ke){fe.classList.remove("overlay-hidden");const Qt=re(q.el,ke);(!q.animated||!J.c.getBoolean("animated",!0))&&Qt.duration(0),q.keyboardClose&&Qt.beforeAddWrite(()=>{const Yt=fe.ownerDocument.activeElement;null!=Yt&&Yt.matches("input,ion-input, ion-textarea")&&Yt.blur()});const Dt=we.get(q)||[];return we.set(q,[...Dt,Qt]),yield Qt.play(),!0});return function(re,fe,ke,rt){return te.apply(this,arguments)}}(),pt=(te,q)=>{let re;const fe=new Promise(ke=>re=ke);return mt(te,q,ke=>{re(ke.detail)}),fe},mt=(te,q,re)=>{const fe=ke=>{(0,he.b)(te,q,fe),re(ke)};(0,he.a)(te,q,fe)},gt=te=>"cancel"===te||te===Ze,Le=te=>te(),it=(te,q)=>{if("function"==typeof te)return J.c.get("_zoneGate",Le)(()=>{try{return te(q)}catch(fe){throw fe}})},Ze="backdrop",me="gesture"},384:(pn,Pe,U)=>{"use strict";U.d(Pe,{e:()=>J});var m=U(4650);let J=(()=>{class H{constructor(){this._userAuthenticated=!0,this._userId="stark"}get userisAuthenticated(){return this._userAuthenticated}get userId(){return this._userId}login(){this._userAuthenticated=!0}logout(){this._userAuthenticated=!1}}return H.\u0275fac=function(le){return new(le||H)},H.\u0275prov=m.Yz7({token:H,factory:H.\u0275fac,providedIn:"root"}),H})()},8562:(pn,Pe,U)=>{"use strict";var m=U(1481),J=U(4650),H=U(2435),he=U(2078),le=U(384);let we=(()=>{class ee{constructor(Te,nt){this.authService=Te,this.router=nt}canLoad(Te,nt){return this.authService.userisAuthenticated||this.router.navigateByUrl("/tabs/login"),this.authService.userisAuthenticated}}return ee.\u0275fac=function(Te){return new(Te||ee)(J.LFG(le.e),J.LFG(H.F0))},ee.\u0275prov=J.Yz7({token:ee,factory:ee.\u0275fac,providedIn:"root"}),ee})();const ye=[{path:"",loadChildren:()=>U.e(174).then(U.bind(U,5652)).then(ee=>ee.TabsPageModule)},{path:"home",loadChildren:()=>U.e(4851).then(U.bind(U,4851)).then(ee=>ee.HomePageModule)},{path:"auth",loadChildren:()=>U.e(7859).then(U.bind(U,7859)).then(ee=>ee.AuthPageModule)},{path:"contact-us",loadChildren:()=>U.e(5110).then(U.bind(U,5110)).then(ee=>ee.ContactUsPageModule)},{path:"login",loadChildren:()=>U.e(4987).then(U.bind(U,4987)).then(ee=>ee.LoginPageModule)},{path:"profile",loadChildren:()=>U.e(8465).then(U.bind(U,8465)).then(ee=>ee.ProfilePageModule),canLoad:[we]},{path:"qr-generator",loadChildren:()=>Promise.all([U.e(8592),U.e(2)]).then(U.bind(U,2)).then(ee=>ee.QrGeneratorPageModule),canLoad:[we]},{path:"qr-verification",loadChildren:()=>Promise.all([U.e(8592),U.e(2006)]).then(U.bind(U,2006)).then(ee=>ee.QrVerificationPageModule)}];let be=(()=>{class ee{}return ee.\u0275fac=function(Te){return new(Te||ee)},ee.\u0275mod=J.oAB({type:ee}),ee.\u0275inj=J.cJS({imports:[H.Bz.forRoot(ye,{preloadingStrategy:H.wm}),H.Bz]}),ee})(),$e=(()=>{class ee{constructor(Te,nt){this.authService=Te,this.router=nt}onLogout(){this.authService.logout(),this.router.navigateByUrl("/tabs/login")}}return ee.\u0275fac=function(Te){return new(Te||ee)(J.Y36(le.e),J.Y36(H.F0))},ee.\u0275cmp=J.Xpm({type:ee,selectors:[["app-root"]],decls:24,vars:0,consts:[["side","start","menuId","post-login","contentId","main",1,"psot-login-menu"],["lines","none","routerLink","/profile"],["lines","none","routerLink","/qr-generator"],["name","qr-code-outline"],["lines","none","button","",3,"click"],["name","log-out-outline"],["id","main"]],template:function(Te,nt){1&Te&&(J.TgZ(0,"ion-app")(1,"ion-menu",0)(2,"ion-header")(3,"ion-toolbar")(4,"ion-title"),J._uU(5,"CVG"),J.qZA()()(),J.TgZ(6,"ion-content")(7,"ion-list")(8,"ion-menu-toggle")(9,"ion-item",1),J._UZ(10,"ion-icon"),J.TgZ(11,"ion-label"),J._uU(12,"Profile"),J.qZA()()(),J.TgZ(13,"ion-menu-toggle")(14,"ion-item",2),J._UZ(15,"ion-icon",3),J.TgZ(16,"ion-label"),J._uU(17," QR Code Generator"),J.qZA()()(),J.TgZ(18,"ion-menu-toggle")(19,"ion-item",4),J.NdJ("click",function(){return nt.onLogout()}),J._UZ(20,"ion-icon",5),J.TgZ(21,"ion-label"),J._uU(22,"Log out"),J.qZA()()()()()(),J._UZ(23,"ion-router-outlet",6),J.qZA())},dependencies:[he.dr,he.W2,he.Gu,he.gu,he.Ie,he.Q$,he.q_,he.z0,he.zc,he.wd,he.sr,he.jP,he.YI,H.rH]}),ee})();var ge=U(100),De=U(2011),xe=U(1205),Ne=U(9751),Xe=U(9646),Ke=U(8996),Lt=U(4986),We=U(4482),Fe=U(5403),ct=U(4004),At=U(3900),yt=U(2122),st=U(3942),Be=U(5861),Ye=U(9681),$=U(2090),lt=U(4859);const Qe="firebasestorage.googleapis.com",qe="storageBucket";class mt extends $.ZR{constructor(ie,Te,nt=0){super(Le(ie),`Firebase Storage: ${Te} (${Le(ie)})`),this.status_=nt,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mt.prototype)}get status(){return this.status_}set status(ie){this.status_=ie}_codeEquals(ie){return Le(ie)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(ie){this.customData.serverResponse=ie,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var gt=(()=>{return(ee=gt||(gt={})).UNKNOWN="unknown",ee.OBJECT_NOT_FOUND="object-not-found",ee.BUCKET_NOT_FOUND="bucket-not-found",ee.PROJECT_NOT_FOUND="project-not-found",ee.QUOTA_EXCEEDED="quota-exceeded",ee.UNAUTHENTICATED="unauthenticated",ee.UNAUTHORIZED="unauthorized",ee.UNAUTHORIZED_APP="unauthorized-app",ee.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",ee.INVALID_CHECKSUM="invalid-checksum",ee.CANCELED="canceled",ee.INVALID_EVENT_NAME="invalid-event-name",ee.INVALID_URL="invalid-url",ee.INVALID_DEFAULT_BUCKET="invalid-default-bucket",ee.NO_DEFAULT_BUCKET="no-default-bucket",ee.CANNOT_SLICE_BLOB="cannot-slice-blob",ee.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",ee.NO_DOWNLOAD_URL="no-download-url",ee.INVALID_ARGUMENT="invalid-argument",ee.INVALID_ARGUMENT_COUNT="invalid-argument-count",ee.APP_DELETED="app-deleted",ee.INVALID_ROOT_OPERATION="invalid-root-operation",ee.INVALID_FORMAT="invalid-format",ee.INTERNAL_ERROR="internal-error",ee.UNSUPPORTED_ENVIRONMENT="unsupported-environment",gt;var ee})();function Le(ee){return"storage/"+ee}function it(){return new mt(gt.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function fe(){return new mt(gt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ke(){return new mt(gt.CANCELED,"User canceled the upload/download.")}function Yt(){return new mt(gt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Gn(ee){return new mt(gt.INVALID_ARGUMENT,ee)}function Ar(){return new mt(gt.APP_DELETED,"The Firebase app was deleted.")}function Nn(ee){return new mt(gt.INVALID_ROOT_OPERATION,"The operation '"+ee+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Dn(ee,ie){return new mt(gt.INVALID_FORMAT,"String does not match format '"+ee+"': "+ie)}function En(ee){throw new mt(gt.INTERNAL_ERROR,"Internal error: "+ee)}class sn{constructor(ie,Te){this.bucket=ie,this.path_=Te}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const ie=encodeURIComponent;return"/b/"+ie(this.bucket)+"/o/"+ie(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(ie,Te){let nt;try{nt=sn.makeFromUrl(ie,Te)}catch(Et){return new sn(ie,"")}if(""===nt.path)return nt;throw function Qt(ee){return new mt(gt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+ee+"'.")}(ie)}static makeFromUrl(ie,Te){let nt=null;const Et="([A-Za-z0-9.\\-_]+)",lr=new RegExp("^gs://"+Et+"(/(.*))?$","i");function Nr(To){To.path_=decodeURIComponent(To.path)}const go=Te.replace(/[.]/g,"\\."),as=[{regex:lr,indices:{bucket:1,path:3},postModify:function Xt(To){"/"===To.path.charAt(To.path.length-1)&&(To.path_=To.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${go}/v[A-Za-z0-9_]+/b/${Et}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Nr},{regex:new RegExp(`^https?://${Te===Qe?"(?:storage.googleapis.com|storage.cloud.google.com)":Te}/${Et}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Nr}];for(let To=0;To<as.length;To++){const Jo=as[To],Xs=Jo.regex.exec(ie);if(Xs){let Cs=Xs[Jo.indices.path];Cs||(Cs=""),nt=new sn(Xs[Jo.indices.bucket],Cs),Jo.postModify(nt);break}}if(null==nt)throw function rt(ee){return new mt(gt.INVALID_URL,"Invalid URL '"+ee+"'.")}(ie);return nt}}class Ir{constructor(ie){this.promise_=Promise.reject(ie)}getPromise(){return this.promise_}cancel(ie=!1){}}function Bn(ee){return"string"==typeof ee||ee instanceof String}function cr(ee){return zi()&&ee instanceof Blob}function zi(){return typeof Blob<"u"&&!(0,$.UG)()}function qn(ee,ie,Te,nt){if(nt<ie)throw Gn(`Invalid value for '${ee}'. Expected ${ie} or greater.`);if(nt>Te)throw Gn(`Invalid value for '${ee}'. Expected ${Te} or less.`)}function Wr(ee,ie,Te){let nt=ie;return null==Te&&(nt=`https://${ie}`),`${Te}://${nt}/v0${ee}`}function cn(ee){const ie=encodeURIComponent;let Te="?";for(const nt in ee)ee.hasOwnProperty(nt)&&(Te=Te+(ie(nt)+"=")+ie(ee[nt])+"&");return Te=Te.slice(0,-1),Te}var _i=(()=>{return(ee=_i||(_i={}))[ee.NO_ERROR=0]="NO_ERROR",ee[ee.NETWORK_ERROR=1]="NETWORK_ERROR",ee[ee.ABORT=2]="ABORT",_i;var ee})();function Wi(ee,ie){const Te=ee>=500&&ee<600,Et=-1!==[408,429].indexOf(ee),Xt=-1!==ie.indexOf(ee);return Te||Et||Xt}class jr{constructor(ie,Te,nt,Et,Xt,dn,lr,Qn,Nr,ui,go,Ci=!0){this.url_=ie,this.method_=Te,this.headers_=nt,this.body_=Et,this.successCodes_=Xt,this.additionalRetryCodes_=dn,this.callback_=lr,this.errorCallback_=Qn,this.timeout_=Nr,this.progressCallback_=ui,this.connectionFactory_=go,this.retry=Ci,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Ji,oo)=>{this.resolve_=Ji,this.reject_=oo,this.start_()})}start_(){const Te=(nt,Et)=>{const Xt=this.resolve_,dn=this.reject_,lr=Et.connection;if(Et.wasSuccessCode)try{const Qn=this.callback_(lr,lr.getResponse());!function Kt(ee){return void 0!==ee}(Qn)?Xt():Xt(Qn)}catch(Qn){dn(Qn)}else if(null!==lr){const Qn=it();Qn.serverResponse=lr.getErrorText(),dn(this.errorCallback_?this.errorCallback_(lr,Qn):Qn)}else dn(Et.canceled?this.appDelete_?Ar():ke():fe())};this.canceled_?Te(0,new Pi(!1,null,!0)):this.backoffId_=function Vr(ee,ie,Te){let nt=1,Et=null,Xt=null,dn=!1,lr=0;function Qn(){return 2===lr}let Nr=!1;function ui(...Do){Nr||(Nr=!0,ie.apply(null,Do))}function go(Do){Et=setTimeout(()=>{Et=null,ee(Ji,Qn())},Do)}function Ci(){Xt&&clearTimeout(Xt)}function Ji(Do,...mo){if(Nr)return void Ci();if(Do)return Ci(),void ui.call(null,Do,...mo);if(Qn()||dn)return Ci(),void ui.call(null,Do,...mo);let as;nt<64&&(nt*=2),1===lr?(lr=2,as=0):as=1e3*(nt+Math.random()),go(as)}let oo=!1;function Po(Do){oo||(oo=!0,Ci(),!Nr&&(null!==Et?(Do||(lr=2),clearTimeout(Et),go(0)):Do||(lr=1)))}return go(0),Xt=setTimeout(()=>{dn=!0,Po(!0)},Te),Po}((nt,Et)=>{if(Et)return void nt(!1,new Pi(!1,null,!0));const Xt=this.connectionFactory_();this.pendingConnection_=Xt;const dn=lr=>{null!==this.progressCallback_&&this.progressCallback_(lr.loaded,lr.lengthComputable?lr.total:-1)};null!==this.progressCallback_&&Xt.addUploadProgressListener(dn),Xt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Xt.removeUploadProgressListener(dn),this.pendingConnection_=null;const lr=Xt.getErrorCode()===_i.NO_ERROR,Qn=Xt.getStatus();if(!lr||Wi(Qn,this.additionalRetryCodes_)&&this.retry){const ui=Xt.getErrorCode()===_i.ABORT;return void nt(!1,new Pi(!1,null,ui))}const Nr=-1!==this.successCodes_.indexOf(Qn);nt(!0,new Pi(Nr,Xt))})},Te,this.timeout_)}getPromise(){return this.promise_}cancel(ie){this.canceled_=!0,this.appDelete_=ie||!1,null!==this.backoffId_&&function br(ee){ee(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Pi{constructor(ie,Te,nt){this.wasSuccessCode=ie,this.connection=Te,this.canceled=!!nt}}function dr(...ee){const ie=function Un(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==ie){const Te=new ie;for(let nt=0;nt<ee.length;nt++)Te.append(ee[nt]);return Te.getBlob()}if(zi())return new Blob(ee);throw new mt(gt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const He={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ot{constructor(ie,Te){this.data=ie,this.contentType=Te||null}}function ht(ee,ie){switch(ee){case He.RAW:return new ot(qt(ie));case He.BASE64:case He.BASE64URL:return new ot(Wn(ee,ie));case He.DATA_URL:return new ot(function Or(ee){const ie=new Cr(ee);return ie.base64?Wn(He.BASE64,ie.rest):function $t(ee){let ie;try{ie=decodeURIComponent(ee)}catch(Te){throw Dn(He.DATA_URL,"Malformed data URL.")}return qt(ie)}(ie.rest)}(ie),function Zr(ee){return new Cr(ee).contentType}(ie))}throw it()}function qt(ee){const ie=[];for(let Te=0;Te<ee.length;Te++){let nt=ee.charCodeAt(Te);nt<=127?ie.push(nt):nt<=2047?ie.push(192|nt>>6,128|63&nt):55296==(64512&nt)?Te<ee.length-1&&56320==(64512&ee.charCodeAt(Te+1))?(nt=65536|(1023&nt)<<10|1023&ee.charCodeAt(++Te),ie.push(240|nt>>18,128|nt>>12&63,128|nt>>6&63,128|63&nt)):ie.push(239,191,189):56320==(64512&nt)?ie.push(239,191,189):ie.push(224|nt>>12,128|nt>>6&63,128|63&nt)}return new Uint8Array(ie)}function Wn(ee,ie){switch(ee){case He.BASE64:{const Et=-1!==ie.indexOf("-"),Xt=-1!==ie.indexOf("_");if(Et||Xt)throw Dn(ee,"Invalid character '"+(Et?"-":"_")+"' found: is it base64url encoded?");break}case He.BASE64URL:{const Et=-1!==ie.indexOf("+"),Xt=-1!==ie.indexOf("/");if(Et||Xt)throw Dn(ee,"Invalid character '"+(Et?"+":"/")+"' found: is it base64 encoded?");ie=ie.replace(/-/g,"+").replace(/_/g,"/");break}}let Te;try{Te=function hr(ee){if(typeof atob>"u")throw function mn(ee){return new mt(gt.UNSUPPORTED_ENVIRONMENT,`${ee} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(ee)}(ie)}catch(Et){throw Et.message.includes("polyfill")?Et:Dn(ee,"Invalid character found")}const nt=new Uint8Array(Te.length);for(let Et=0;Et<Te.length;Et++)nt[Et]=Te.charCodeAt(Et);return nt}class Cr{constructor(ie){this.base64=!1,this.contentType=null;const Te=ie.match(/^data:([^,]+)?,/);if(null===Te)throw Dn(He.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const nt=Te[1]||null;null!=nt&&(this.base64=function fr(ee,ie){return ee.length>=ie.length&&ee.substring(ee.length-ie.length)===ie}(nt,";base64"),this.contentType=this.base64?nt.substring(0,nt.length-7):nt),this.rest=ie.substring(ie.indexOf(",")+1)}}class vi{constructor(ie,Te){let nt=0,Et="";cr(ie)?(this.data_=ie,nt=ie.size,Et=ie.type):ie instanceof ArrayBuffer?(Te?this.data_=new Uint8Array(ie):(this.data_=new Uint8Array(ie.byteLength),this.data_.set(new Uint8Array(ie))),nt=this.data_.length):ie instanceof Uint8Array&&(Te?this.data_=ie:(this.data_=new Uint8Array(ie.length),this.data_.set(ie)),nt=ie.length),this.size_=nt,this.type_=Et}size(){return this.size_}type(){return this.type_}slice(ie,Te){if(cr(this.data_)){const Et=function jn(ee,ie,Te){return ee.webkitSlice?ee.webkitSlice(ie,Te):ee.mozSlice?ee.mozSlice(ie,Te):ee.slice?ee.slice(ie,Te):null}(this.data_,ie,Te);return null===Et?null:new vi(Et)}{const nt=new Uint8Array(this.data_.buffer,ie,Te-ie);return new vi(nt,!0)}}static getBlob(...ie){if(zi()){const Te=ie.map(nt=>nt instanceof vi?nt.data_:nt);return new vi(dr.apply(null,Te))}{const Te=ie.map(dn=>Bn(dn)?ht(He.RAW,dn).data:dn.data_);let nt=0;Te.forEach(dn=>{nt+=dn.byteLength});const Et=new Uint8Array(nt);let Xt=0;return Te.forEach(dn=>{for(let lr=0;lr<dn.length;lr++)Et[Xt++]=dn[lr]}),new vi(Et,!0)}}uploadData(){return this.data_}}function St(ee){let ie;try{ie=JSON.parse(ee)}catch(Te){return null}return function rr(ee){return"object"==typeof ee&&!Array.isArray(ee)}(ie)?ie:null}function wt(ee){const ie=ee.lastIndexOf("/",ee.length-2);return-1===ie?ee:ee.slice(ie+1)}function an(ee,ie){return ie}class Tn{constructor(ie,Te,nt,Et){this.server=ie,this.local=Te||ie,this.writable=!!nt,this.xform=Et||an}}let sr=null;function Yr(){if(sr)return sr;const ee=[];ee.push(new Tn("bucket")),ee.push(new Tn("generation")),ee.push(new Tn("metageneration")),ee.push(new Tn("name","fullPath",!0));const Te=new Tn("name");Te.xform=function ie(Xt,dn){return function fi(ee){return!Bn(ee)||ee.length<2?ee:wt(ee)}(dn)},ee.push(Te);const Et=new Tn("size");return Et.xform=function nt(Xt,dn){return void 0!==dn?Number(dn):dn},ee.push(Et),ee.push(new Tn("timeCreated")),ee.push(new Tn("updated")),ee.push(new Tn("md5Hash",null,!0)),ee.push(new Tn("cacheControl",null,!0)),ee.push(new Tn("contentDisposition",null,!0)),ee.push(new Tn("contentEncoding",null,!0)),ee.push(new Tn("contentLanguage",null,!0)),ee.push(new Tn("contentType",null,!0)),ee.push(new Tn("metadata","customMetadata",!0)),sr=ee,sr}function Lo(ee,ie,Te){const nt=St(ie);return null===nt?null:function ti(ee,ie,Te){const nt={type:"file"},Et=Te.length;for(let Xt=0;Xt<Et;Xt++){const dn=Te[Xt];nt[dn.local]=dn.xform(nt,ie[dn.server])}return function Ei(ee,ie){Object.defineProperty(ee,"ref",{get:function Te(){const Xt=new sn(ee.bucket,ee.fullPath);return ie._makeStorageReference(Xt)}})}(nt,ee),nt}(ee,nt,Te)}function ki(ee,ie){const Te={},nt=ie.length;for(let Et=0;Et<nt;Et++){const Xt=ie[Et];Xt.writable&&(Te[Xt.server]=ee[Xt.local])}return JSON.stringify(Te)}const wo="prefixes",Mr="items";class Tr{constructor(ie,Te,nt,Et){this.url=ie,this.method=Te,this.handler=nt,this.timeout=Et,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function oi(ee){if(!ee)throw it()}function Ln(ee,ie){return function Te(nt,Et){const Xt=Lo(ee,Et,ie);return oi(null!==Xt),Xt}}function Gr(ee){return function ie(Te,nt){let Et;return Et=401===Te.getStatus()?Te.getErrorText().includes("Firebase App Check token is invalid")?function q(){return new mt(gt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function te(){return new mt(gt.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===Te.getStatus()?function me(ee){return new mt(gt.QUOTA_EXCEEDED,"Quota for bucket '"+ee+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(ee.bucket):403===Te.getStatus()?function re(ee){return new mt(gt.UNAUTHORIZED,"User does not have permission to access '"+ee+"'.")}(ee.path):nt,Et.status=Te.getStatus(),Et.serverResponse=nt.serverResponse,Et}}function Vi(ee){const ie=Gr(ee);return function Te(nt,Et){let Xt=ie(nt,Et);return 404===nt.getStatus()&&(Xt=function Ze(ee){return new mt(gt.OBJECT_NOT_FOUND,"Object '"+ee+"' does not exist.")}(ee.path)),Xt.serverResponse=Et.serverResponse,Xt}}function Zi(ee,ie,Te){const Et=Wr(ie.fullServerUrl(),ee.host,ee._protocol),dn=ee.maxOperationRetryTime,lr=new Tr(Et,"GET",Ln(ee,Te),dn);return lr.errorHandler=Vi(ie),lr}function Fi(ee,ie,Te,nt,Et){const Xt={};Xt.prefix=ie.isRoot?"":ie.path+"/",Te&&Te.length>0&&(Xt.delimiter=Te),nt&&(Xt.pageToken=nt),Et&&(Xt.maxResults=Et);const lr=Wr(ie.bucketOnlyServerUrl(),ee.host,ee._protocol),Nr=ee.maxOperationRetryTime,ui=new Tr(lr,"GET",function Hn(ee,ie){return function Te(nt,Et){const Xt=function Oi(ee,ie,Te){const nt=St(Te);return null===nt?null:function pr(ee,ie,Te){const nt={prefixes:[],items:[],nextPageToken:Te.nextPageToken};if(Te[wo])for(const Et of Te[wo]){const Xt=Et.replace(/\/$/,""),dn=ee._makeStorageReference(new sn(ie,Xt));nt.prefixes.push(dn)}if(Te[Mr])for(const Et of Te[Mr]){const Xt=ee._makeStorageReference(new sn(ie,Et.name));nt.items.push(Xt)}return nt}(ee,ie,nt)}(ee,ie,Et);return oi(null!==Xt),Xt}}(ee,ie.bucket),Nr);return ui.urlParams=Xt,ui.errorHandler=Gr(ie),ui}function Ge(ee,ie,Te){const nt=Object.assign({},Te);return nt.fullPath=ee.path,nt.size=ie.size(),nt.contentType||(nt.contentType=function Bt(ee,ie){return ee&&ee.contentType||ie&&ie.type()||"application/octet-stream"}(null,ie)),nt}class Ut{constructor(ie,Te,nt,Et){this.current=ie,this.total=Te,this.finalized=!!nt,this.metadata=Et||null}}function Zt(ee,ie){let Te=null;try{Te=ee.getResponseHeader("X-Goog-Upload-Status")}catch(Et){oi(!1)}return oi(!!Te&&-1!==(ie||["active"]).indexOf(Te)),Te}const ci={STATE_CHANGED:"state_changed"},Kr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function _t(ee){switch(ee){case"running":case"pausing":case"canceling":return Kr.RUNNING;case"paused":return Kr.PAUSED;case"success":return Kr.SUCCESS;case"canceled":return Kr.CANCELED;default:return Kr.ERROR}}class bt{constructor(ie,Te,nt){if(function Jr(ee){return"function"==typeof ee}(ie)||null!=Te||null!=nt)this.next=ie,this.error=null!=Te?Te:void 0,this.complete=null!=nt?nt:void 0;else{const Xt=ie;this.next=Xt.next,this.error=Xt.error,this.complete=Xt.complete}}}function Ft(ee){return(...ie)=>{Promise.resolve().then(()=>ee(...ie))}}let Ht=null;class fn{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_i.NO_ERROR,this.sendPromise_=new Promise(ie=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_i.ABORT,ie()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_i.NETWORK_ERROR,ie()}),this.xhr_.addEventListener("load",()=>{ie()})})}send(ie,Te,nt,Et){if(this.sent_)throw En("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(Te,ie,!0),void 0!==Et)for(const Xt in Et)Et.hasOwnProperty(Xt)&&this.xhr_.setRequestHeader(Xt,Et[Xt].toString());return void 0!==nt?this.xhr_.send(nt):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw En("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw En("cannot .getStatus() before sending");try{return this.xhr_.status}catch(ie){return-1}}getResponse(){if(!this.sent_)throw En("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw En("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(ie){return this.xhr_.getResponseHeader(ie)}addUploadProgressListener(ie){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",ie)}removeUploadProgressListener(ie){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",ie)}}class Sn extends fn{initXhr(){this.xhr_.responseType="text"}}function er(){return Ht?Ht():new Sn}class uo{constructor(ie,Te,nt=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=ie,this._blob=Te,this._metadata=nt,this._mappings=Yr(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=Et=>{if(this._request=void 0,this._chunkMultiplier=1,Et._codeEquals(gt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const Xt=this.isExponentialBackoffExpired();if(Wi(Et.status,[])){if(!Xt)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();Et=fe()}this._error=Et,this._transition("error")}},this._metadataErrorHandler=Et=>{this._request=void 0,Et._codeEquals(gt.CANCELED)?this.completeTransitions_():(this._error=Et,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((Et,Xt)=>{this._resolve=Et,this._reject=Xt,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const ie=this._transferred;return Te=>this._updateProgress(ie+Te)}_shouldDoResumable(ie){return ie.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(ie){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([Te,nt])=>{switch(this._state){case"running":ie(Te,nt);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((ie,Te)=>{const nt=function on(ee,ie,Te,nt,Et){const Xt=ie.bucketOnlyServerUrl(),dn=Ge(ie,nt,Et),lr={name:dn.fullPath},Qn=Wr(Xt,ee.host,ee._protocol),ui={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${nt.size()}`,"X-Goog-Upload-Header-Content-Type":dn.contentType,"Content-Type":"application/json; charset=utf-8"},go=ki(dn,Te),oo=new Tr(Qn,"POST",function Ji(Po){let Do;Zt(Po);try{Do=Po.getResponseHeader("X-Goog-Upload-URL")}catch(mo){oi(!1)}return oi(Bn(Do)),Do},ee.maxUploadRetryTime);return oo.urlParams=lr,oo.headers=ui,oo.body=go,oo.errorHandler=Gr(ie),oo}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Et=this._ref.storage._makeRequest(nt,er,ie,Te);this._request=Et,Et.getPromise().then(Xt=>{this._request=void 0,this._uploadUrl=Xt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const ie=this._uploadUrl;this._resolveToken((Te,nt)=>{const Et=function In(ee,ie,Te,nt){const Qn=new Tr(Te,"POST",function Xt(Nr){const ui=Zt(Nr,["active","final"]);let go=null;try{go=Nr.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Ji){oi(!1)}go||oi(!1);const Ci=Number(go);return oi(!isNaN(Ci)),new Ut(Ci,nt.size(),"final"===ui)},ee.maxUploadRetryTime);return Qn.headers={"X-Goog-Upload-Command":"query"},Qn.errorHandler=Gr(ie),Qn}(this._ref.storage,this._ref._location,ie,this._blob),Xt=this._ref.storage._makeRequest(Et,er,Te,nt);this._request=Xt,Xt.getPromise().then(dn=>{this._request=void 0,this._updateProgress(dn.current),this._needToFetchStatus=!1,dn.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const ie=262144*this._chunkMultiplier,Te=new Ut(this._transferred,this._blob.size()),nt=this._uploadUrl;this._resolveToken((Et,Xt)=>{let dn;try{dn=function Jn(ee,ie,Te,nt,Et,Xt,dn,lr){const Qn=new Ut(0,0);if(dn?(Qn.current=dn.current,Qn.total=dn.total):(Qn.current=0,Qn.total=nt.size()),nt.size()!==Qn.total)throw function yn(){return new mt(gt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const Nr=Qn.total-Qn.current;let ui=Nr;Et>0&&(ui=Math.min(ui,Et));const go=Qn.current;let Ji="";Ji=0===ui?"finalize":Nr===ui?"upload, finalize":"upload";const oo={"X-Goog-Upload-Command":Ji,"X-Goog-Upload-Offset":`${Qn.current}`},Po=nt.slice(go,go+ui);if(null===Po)throw Yt();const as=new Tr(Te,"POST",function Do(To,Jo){const Xs=Zt(To,["active","final"]),Qs=Qn.current+ui,Cs=nt.size();let ho;return ho="final"===Xs?Ln(ie,Xt)(To,Jo):null,new Ut(Qs,Cs,"final"===Xs,ho)},ie.maxUploadRetryTime);return as.headers=oo,as.body=Po.uploadData(),as.progressCallback=lr||null,as.errorHandler=Gr(ee),as}(this._ref._location,this._ref.storage,nt,this._blob,ie,this._mappings,Te,this._makeProgressCallback())}catch(Qn){return this._error=Qn,void this._transition("error")}const lr=this._ref.storage._makeRequest(dn,er,Et,Xt,!1);this._request=lr,lr.getPromise().then(Qn=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Qn.current),Qn.finalized?(this._metadata=Qn.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((ie,Te)=>{const nt=Zi(this._ref.storage,this._ref._location,this._mappings),Et=this._ref.storage._makeRequest(nt,er,ie,Te);this._request=Et,Et.getPromise().then(Xt=>{this._request=void 0,this._metadata=Xt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((ie,Te)=>{const nt=function xt(ee,ie,Te,nt,Et){const Xt=ie.bucketOnlyServerUrl(),dn={"X-Goog-Upload-Protocol":"multipart"},Qn=function lr(){let as="";for(let To=0;To<2;To++)as+=Math.random().toString().slice(2);return as}();dn["Content-Type"]="multipart/related; boundary="+Qn;const Nr=Ge(ie,nt,Et),ui=ki(Nr,Te),Ji=vi.getBlob("--"+Qn+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+ui+"\r\n--"+Qn+"\r\nContent-Type: "+Nr.contentType+"\r\n\r\n",nt,"\r\n--"+Qn+"--");if(null===Ji)throw Yt();const oo={name:Nr.fullPath},Po=Wr(Xt,ee.host,ee._protocol),mo=ee.maxUploadRetryTime,ws=new Tr(Po,"POST",Ln(ee,Te),mo);return ws.urlParams=oo,ws.headers=dn,ws.body=Ji.uploadData(),ws.errorHandler=Gr(ie),ws}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Et=this._ref.storage._makeRequest(nt,er,ie,Te);this._request=Et,Et.getPromise().then(Xt=>{this._request=void 0,this._metadata=Xt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(ie){const Te=this._transferred;this._transferred=ie,this._transferred!==Te&&this._notifyObservers()}_transition(ie){if(this._state!==ie)switch(ie){case"canceling":case"pausing":this._state=ie,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const Te="paused"===this._state;this._state=ie,Te&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=ie,this._notifyObservers();break;case"canceled":this._error=ke(),this._state=ie,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const ie=_t(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:ie,metadata:this._metadata,task:this,ref:this._ref}}on(ie,Te,nt,Et){const Xt=new bt(Te||void 0,nt||void 0,Et||void 0);return this._addObserver(Xt),()=>{this._removeObserver(Xt)}}then(ie,Te){return this._promise.then(ie,Te)}catch(ie){return this.then(null,ie)}_addObserver(ie){this._observers.push(ie),this._notifyObserver(ie)}_removeObserver(ie){const Te=this._observers.indexOf(ie);-1!==Te&&this._observers.splice(Te,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(Te=>{this._notifyObserver(Te)})}_finishPromise(){if(void 0!==this._resolve){let ie=!0;switch(_t(this._state)){case Kr.SUCCESS:Ft(this._resolve.bind(null,this.snapshot))();break;case Kr.CANCELED:case Kr.ERROR:Ft(this._reject.bind(null,this._error))();break;default:ie=!1}ie&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(ie){switch(_t(this._state)){case Kr.RUNNING:case Kr.PAUSED:ie.next&&Ft(ie.next.bind(ie,this.snapshot))();break;case Kr.SUCCESS:ie.complete&&Ft(ie.complete.bind(ie))();break;default:ie.error&&Ft(ie.error.bind(ie,this._error))()}}resume(){const ie="paused"===this._state||"pausing"===this._state;return ie&&this._transition("running"),ie}pause(){const ie="running"===this._state;return ie&&this._transition("pausing"),ie}cancel(){const ie="running"===this._state||"pausing"===this._state;return ie&&this._transition("canceling"),ie}}class Xr{constructor(ie,Te){this._service=ie,this._location=Te instanceof sn?Te:sn.makeFromUrl(Te,ie.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(ie,Te){return new Xr(ie,Te)}get root(){const ie=new sn(this._location.bucket,"");return this._newRef(this._service,ie)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return wt(this._location.path)}get storage(){return this._service}get parent(){const ie=function vt(ee){if(0===ee.length)return null;const ie=ee.lastIndexOf("/");return-1===ie?"":ee.slice(0,ie)}(this._location.path);if(null===ie)return null;const Te=new sn(this._location.bucket,ie);return new Xr(this._service,Te)}_throwIfRoot(ie){if(""===this._location.path)throw Nn(ie)}}function Bo(ee,ie,Te){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,Be.Z)(function*(ee,ie,Te){const Et=yield Zo(ee,{pageToken:Te});ie.prefixes.push(...Et.prefixes),ie.items.push(...Et.items),null!=Et.nextPageToken&&(yield Bo(ee,ie,Et.nextPageToken))})).apply(this,arguments)}function Zo(ee,ie){null!=ie&&"number"==typeof ie.maxResults&&qn("options.maxResults",1,1e3,ie.maxResults);const Te=ie||{},nt=Fi(ee.storage,ee._location,"/",Te.pageToken,Te.maxResults);return ee.storage.makeRequestWithTokens(nt,er)}function Uo(ee){ee._throwIfRoot("getDownloadURL");const ie=function je(ee,ie,Te){const Et=Wr(ie.fullServerUrl(),ee.host,ee._protocol),dn=ee.maxOperationRetryTime,lr=new Tr(Et,"GET",function gr(ee,ie){return function Te(nt,Et){const Xt=Lo(ee,Et,ie);return oi(null!==Xt),function pi(ee,ie,Te,nt){const Et=St(ie);if(null===Et||!Bn(Et.downloadTokens))return null;const Xt=Et.downloadTokens;if(0===Xt.length)return null;const dn=encodeURIComponent;return Xt.split(",").map(Nr=>{const go=ee.fullPath;return Wr("/b/"+dn(ee.bucket)+"/o/"+dn(go),Te,nt)+cn({alt:"media",token:Nr})})[0]}(Xt,Et,ee.host,ee._protocol)}}(ee,Te),dn);return lr.errorHandler=Vi(ie),lr}(ee.storage,ee._location,Yr());return ee.storage.makeRequestWithTokens(ie,er).then(Te=>{if(null===Te)throw function Mn(){return new mt(gt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return Te})}function ms(ee,ie){const Te=function Je(ee,ie){const Te=ie.split("/").filter(nt=>nt.length>0).join("/");return 0===ee.length?Te:ee+"/"+Te}(ee._location.path,ie),nt=new sn(ee._location.bucket,Te);return new Xr(ee.storage,nt)}function Ws(ee,ie){if(ee instanceof cs){const Te=ee;if(null==Te._bucket)throw function Dt(){return new mt(gt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+qe+"' property when initializing the app?")}();const nt=new Xr(Te,Te._bucket);return null!=ie?Ws(nt,ie):nt}return void 0!==ie?ms(ee,ie):ee}function Ys(ee,ie){if(ie&&function Xo(ee){return/^[A-Za-z]+:\/\//.test(ee)}(ie)){if(ee instanceof cs)return function Ua(ee,ie){return new Xr(ee,ie)}(ee,ie);throw Gn("To use ref(service, url), the first argument must be a Storage instance.")}return Ws(ee,ie)}function Mi(ee,ie){const Te=null==ie?void 0:ie[qe];return null==Te?null:sn.makeFromBucketSpec(Te,ee)}class cs{constructor(ie,Te,nt,Et,Xt){this.app=ie,this._authProvider=Te,this._appCheckProvider=nt,this._url=Et,this._firebaseVersion=Xt,this._bucket=null,this._host=Qe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=Et?sn.makeFromBucketSpec(Et,this._host):Mi(this._host,this.app.options)}get host(){return this._host}set host(ie){this._host=ie,this._bucket=null!=this._url?sn.makeFromBucketSpec(this._url,ie):Mi(ie,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(ie){qn("time",0,Number.POSITIVE_INFINITY,ie),this._maxUploadRetryTime=ie}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(ie){qn("time",0,Number.POSITIVE_INFINITY,ie),this._maxOperationRetryTime=ie}_getAuthToken(){var ie=this;return(0,Be.Z)(function*(){if(ie._overrideAuthToken)return ie._overrideAuthToken;const Te=ie._authProvider.getImmediate({optional:!0});if(Te){const nt=yield Te.getToken();if(null!==nt)return nt.accessToken}return null})()}_getAppCheckToken(){var ie=this;return(0,Be.Z)(function*(){const Te=ie._appCheckProvider.getImmediate({optional:!0});return Te?(yield Te.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(ie=>ie.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(ie){return new Xr(this,ie)}_makeRequest(ie,Te,nt,Et,Xt=!0){if(this._deleted)return new Ir(Ar());{const dn=function ln(ee,ie,Te,nt,Et,Xt,dn=!0){const lr=cn(ee.urlParams),Qn=ee.url+lr,Nr=Object.assign({},ee.headers);return function ii(ee,ie){ie&&(ee["X-Firebase-GMPID"]=ie)}(Nr,ie),function Rr(ee,ie){null!==ie&&ie.length>0&&(ee.Authorization="Firebase "+ie)}(Nr,Te),function Er(ee,ie){ee["X-Firebase-Storage-Version"]="webjs/"+(null!=ie?ie:"AppManager")}(Nr,Xt),function wn(ee,ie){null!==ie&&(ee["X-Firebase-AppCheck"]=ie)}(Nr,nt),new jr(Qn,ee.method,Nr,ee.body,ee.successCodes,ee.additionalRetryCodes,ee.handler,ee.errorHandler,ee.timeout,ee.progressCallback,Et,dn)}(ie,this._appId,nt,Et,Te,this._firebaseVersion,Xt);return this._requests.add(dn),dn.getPromise().then(()=>this._requests.delete(dn),()=>this._requests.delete(dn)),dn}}makeRequestWithTokens(ie,Te){var nt=this;return(0,Be.Z)(function*(){const[Et,Xt]=yield Promise.all([nt._getAuthToken(),nt._getAppCheckToken()]);return nt._makeRequest(ie,Te,Et,Xt).getPromise()})()}}const rs="@firebase/storage";function Xi(ee,ie){return Ys(ee=(0,$.m9)(ee),ie)}function So(ee,{instanceIdentifier:ie}){const Te=ee.getProvider("app").getImmediate(),nt=ee.getProvider("auth-internal"),Et=ee.getProvider("app-check-internal");return new cs(Te,nt,Et,ie,Ye.SDK_VERSION)}!function wi(){(0,Ye._registerComponent)(new lt.wA("storage",So,"PUBLIC").setMultipleInstances(!0)),(0,Ye.registerVersion)(rs,"0.11.1",""),(0,Ye.registerVersion)(rs,"0.11.1","esm2017")}();class ls{constructor(ie,Te,nt){this._delegate=ie,this.task=Te,this.ref=nt}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Ms{constructor(ie,Te){this._delegate=ie,this._ref=Te,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new ls(this._delegate.snapshot,this,this._ref)}then(ie,Te){return this._delegate.then(nt=>{if(ie)return ie(new ls(nt,this,this._ref))},Te)}on(ie,Te,nt,Et){let Xt;return Te&&(Xt="function"==typeof Te?dn=>Te(new ls(dn,this,this._ref)):{next:Te.next?dn=>Te.next(new ls(dn,this,this._ref)):void 0,complete:Te.complete||void 0,error:Te.error||void 0}),this._delegate.on(ie,Xt,nt||void 0,Et||void 0)}}class io{constructor(ie,Te){this._delegate=ie,this._service=Te}get prefixes(){return this._delegate.prefixes.map(ie=>new $i(ie,this._service))}get items(){return this._delegate.items.map(ie=>new $i(ie,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class $i{constructor(ie,Te){this._delegate=ie,this.storage=Te}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(ie){const Te=function Ni(ee,ie){return ms(ee,ie)}(this._delegate,ie);return new $i(Te,this.storage)}get root(){return new $i(this._delegate.root,this.storage)}get parent(){const ie=this._delegate.parent;return null==ie?null:new $i(ie,this.storage)}put(ie,Te){return this._throwIfRoot("put"),new Ms(function lo(ee,ie,Te){return function zs(ee,ie,Te){return ee._throwIfRoot("uploadBytesResumable"),new uo(ee,new vi(ie),Te)}(ee=(0,$.m9)(ee),ie,Te)}(this._delegate,ie,Te),this)}putString(ie,Te=He.RAW,nt){this._throwIfRoot("putString");const Et=ht(Te,ie),Xt=Object.assign({},nt);return null==Xt.contentType&&null!=Et.contentType&&(Xt.contentType=Et.contentType),new Ms(new uo(this._delegate,new vi(Et.data,!0),Xt),this)}listAll(){return function qs(ee){return function ns(ee){const ie={prefixes:[],items:[]};return Bo(ee,ie).then(()=>ie)}(ee=(0,$.m9)(ee))}(this._delegate).then(ie=>new io(ie,this.storage))}list(ie){return function Qo(ee,ie){return Zo(ee=(0,$.m9)(ee),ie)}(this._delegate,ie||void 0).then(Te=>new io(Te,this.storage))}getMetadata(){return function is(ee){return function fs(ee){ee._throwIfRoot("getMetadata");const ie=Zi(ee.storage,ee._location,Yr());return ee.storage.makeRequestWithTokens(ie,er)}(ee=(0,$.m9)(ee))}(this._delegate)}updateMetadata(ie){return function jo(ee,ie){return function ps(ee,ie){ee._throwIfRoot("updateMetadata");const Te=function Rt(ee,ie,Te,nt){const Xt=Wr(ie.fullServerUrl(),ee.host,ee._protocol),lr=ki(Te,nt),Nr=ee.maxOperationRetryTime,ui=new Tr(Xt,"PATCH",Ln(ee,nt),Nr);return ui.headers={"Content-Type":"application/json; charset=utf-8"},ui.body=lr,ui.errorHandler=Vi(ie),ui}(ee.storage,ee._location,ie,Yr());return ee.storage.makeRequestWithTokens(Te,er)}(ee=(0,$.m9)(ee),ie)}(this._delegate,ie)}getDownloadURL(){return function Us(ee){return Uo(ee=(0,$.m9)(ee))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function os(ee){return function gs(ee){ee._throwIfRoot("deleteObject");const ie=function Ot(ee,ie){const nt=Wr(ie.fullServerUrl(),ee.host,ee._protocol),lr=new Tr(nt,"DELETE",function dn(Qn,Nr){},ee.maxOperationRetryTime);return lr.successCodes=[200,204],lr.errorHandler=Vi(ie),lr}(ee.storage,ee._location);return ee.storage.makeRequestWithTokens(ie,er)}(ee=(0,$.m9)(ee))}(this._delegate)}_throwIfRoot(ie){if(""===this._delegate._location.path)throw Nn(ie)}}class Qi{constructor(ie,Te){this.app=ie,this._delegate=Te}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(ie){if(Vo(ie))throw Gn("ref() expected a child path but got a URL, use refFromURL instead.");return new $i(Xi(this._delegate,ie),this)}refFromURL(ie){if(!Vo(ie))throw Gn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{sn.makeFromUrl(ie,this._delegate.host)}catch(Te){throw Gn("refFromUrl() expected a valid full URL but got an invalid one.")}return new $i(Xi(this._delegate,ie),this)}setMaxUploadRetryTime(ie){this._delegate.maxUploadRetryTime=ie}setMaxOperationRetryTime(ie){this._delegate.maxOperationRetryTime=ie}useEmulator(ie,Te,nt={}){!function Ki(ee,ie,Te,nt={}){!function tr(ee,ie,Te,nt={}){ee.host=`${ie}:${Te}`,ee._protocol="http";const{mockUserToken:Et}=nt;Et&&(ee._overrideAuthToken="string"==typeof Et?Et:(0,$.Sg)(Et,ee.app.options.projectId))}(ee,ie,Te,nt)}(this._delegate,ie,Te,nt)}}function Vo(ee){return/^[A-Za-z]+:\/\//.test(ee)}function Br(ee,{instanceIdentifier:ie}){const Te=ee.getProvider("app-compat").getImmediate(),nt=ee.getProvider("storage").getImmediate({identifier:ie});return new Qi(Te,nt)}!function xs(ee){const ie={TaskState:Kr,TaskEvent:ci,StringFormat:He,Storage:Qi,Reference:$i};ee.INTERNAL.registerComponent(new lt.wA("storage-compat",Br,"PUBLIC").setServiceProps(ie).setMultipleInstances(!0)),ee.registerVersion("@firebase/storage-compat","0.3.1")}(st.Z);var Gi=U(6217),Vs=U(9260);function No(ee){const ie=function Ns(ee){return new Ne.y(ie=>{const Te=dn=>ie.next(dn);Te(ee.snapshot);const Xt=ee.on("state_changed",Te);return ee.then(dn=>{Te(dn),ie.complete()},dn=>{Te(ee.snapshot),(dn=>{ie.error(dn)})(dn)}),function(){Xt()}}).pipe(function Ce(ee,ie=Lt.z){return(0,We.e)((Te,nt)=>{let Et=null,Xt=null,dn=null;const lr=()=>{if(Et){Et.unsubscribe(),Et=null;const Nr=Xt;Xt=null,nt.next(Nr)}};function Qn(){const Nr=dn+ee,ui=ie.now();if(ui<Nr)return Et=this.schedule(void 0,Nr-ui),void nt.add(Et);lr()}Te.subscribe((0,Fe.x)(nt,Nr=>{Xt=Nr,dn=ie.now(),Et||(Et=ie.schedule(Qn,ee),nt.add(Et))},()=>{lr(),nt.complete()},void 0,()=>{Xt=Et=null}))})}(0))}(ee);return{task:ee,then:ee.then.bind(ee),catch:ee.catch.bind(ee),pause:ee.pause.bind(ee),cancel:ee.cancel.bind(ee),resume:ee.resume.bind(ee),snapshotChanges:()=>ie,percentageChanges:()=>ie.pipe((0,ct.U)(Te=>Te.bytesTransferred/Te.totalBytes*100))}}function $s(ee){return{getDownloadURL:()=>(0,Xe.of)(void 0).pipe(yt.fc,(0,At.w)(()=>ee.getDownloadURL()),yt.iC),getMetadata:()=>(0,Xe.of)(void 0).pipe(yt.fc,(0,At.w)(()=>ee.getMetadata()),yt.iC),delete:()=>(0,Ke.D)(ee.delete()),child:ie=>$s(ee.child(ie)),updateMetadata:ie=>(0,Ke.D)(ee.updateMetadata(ie)),put:(ie,Te)=>No(ee.put(ie,Te)),putString:(ie,Te,nt)=>No(ee.putString(ie,Te,nt)),list:ie=>(0,Ke.D)(ee.list(ie)),listAll:()=>(0,Ke.D)(ee.listAll())}}const Es=new J.OlP("angularfire2.storageBucket"),ss=new J.OlP("angularfire2.storage.maxUploadRetryTime"),Y=new J.OlP("angularfire2.storage.maxOperationRetryTime"),w=new J.OlP("angularfire2.storage.use-emulator");let T=(()=>{class ee{constructor(Te,nt,Et,Xt,dn,lr,Qn,Nr,ui,go){const Ci=(0,De.on)(Te,dn,nt);this.storage=(0,De.cc)(`${Ci.name}.storage.${Et}`,"AngularFireStorage",Ci.name,()=>{const Ji=dn.runOutsideAngular(()=>Ci.storage(Et||void 0)),oo=ui;return oo&&Ji.useEmulator(...oo),Qn&&Ji.setMaxUploadRetryTime(Qn),Nr&&Ji.setMaxOperationRetryTime(Nr),Ji},[Qn,Nr])}ref(Te){return $s(this.storage.ref(Te))}refFromURL(Te){return $s(this.storage.refFromURL(Te))}upload(Te,nt,Et){return $s(this.storage.ref(Te)).put(nt,Et)}}return ee.\u0275fac=function(Te){return new(Te||ee)(J.LFG(De.Dh),J.LFG(De.xv,8),J.LFG(Es,8),J.LFG(J.Lbi),J.LFG(J.R0b),J.LFG(yt.HU),J.LFG(ss,8),J.LFG(Y,8),J.LFG(w,8),J.LFG(Gi.nm,8))},ee.\u0275prov=J.Yz7({token:ee,factory:ee.\u0275fac,providedIn:"any"}),ee})(),j=(()=>{class ee{}return ee.\u0275fac=function(Te){return new(Te||ee)},ee.\u0275mod=J.oAB({type:ee}),ee.\u0275inj=J.cJS({}),ee})(),ve=(()=>{class ee{constructor(){Vs.Z.registerVersion("angularfire",yt.q4.full,"gcs-compat")}}return ee.\u0275fac=function(Te){return new(Te||ee)},ee.\u0275mod=J.oAB({type:ee}),ee.\u0275inj=J.cJS({providers:[T],imports:[j]}),ee})();var Vt=U(3101),_n=U(5197);const Vn_firebaseConfig={apiKey:"AIzaSyAiQ9JMY02hgAPBdr9pwoS4PPFVa0ObEkc",authDomain:"qrcode-security-4a33c.firebaseapp.com",databaseURL:"https://qrcode-security-4a33c-default-rtdb.firebaseio.com",projectId:"qrcode-security-4a33c",storageBucket:"qrcode-security-4a33c.appspot.com",messagingSenderId:"257430707320",appId:"1:257430707320:web:b76e9bdc5cf228575ce18d",measurementId:"G-79JPPS60R0"};var wr=U(4003);let li=(()=>{class ee{}return ee.\u0275fac=function(Te){return new(Te||ee)},ee.\u0275mod=J.oAB({type:ee,bootstrap:[$e]}),ee.\u0275inj=J.cJS({providers:[{provide:H.wN,useClass:he.r4}],imports:[m.b2,he.Pc.forRoot(),be,ge.N,De.hO.initializeApp(Vn_firebaseConfig),xe.ww,Vt.yb,ve,_n.JS,wr.f]}),ee})();m.q6().bootstrapModule(li).catch(ee=>console.log(ee))},4112:(pn,Pe,U)=>{"use strict";U.d(Pe,{ArgumentException:()=>xe,AztecCodeReader:()=>Kr,BarcodeFormat:()=>He,BinaryBitmap:()=>We,ChecksumException:()=>ct,DataMatrixReader:()=>Li,DecodeHintType:()=>te,EncodeHintType:()=>po,FormatException:()=>fe,HybridBinarizer:()=>qn,IllegalArgumentException:()=>Ke,IllegalStateException:()=>Ei,InvertedLuminanceSource:()=>jr,LuminanceSource:()=>cn,MultiFormatOneDReader:()=>As,MultiFormatReader:()=>qc,NotFoundException:()=>Kt,PDF417Reader:()=>mc,QRCodeDecoderErrorCorrectionLevel:()=>$a,QRCodeEncoder:()=>Bc,QRCodeReader:()=>V});var i,H=(i=function(n,s){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var a in g)Object.prototype.hasOwnProperty.call(g,a)&&(h[a]=g[a])})(n,s)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}),he=function(i){function t(n,s){var h=this.constructor,g=i.call(this,n,s)||this;return Object.defineProperty(g,"name",{value:h.name,enumerable:!1,configurable:!0}),function m(i,t){var n=Object.setPrototypeOf;n?n(i,t):i.__proto__=t}(g,h.prototype),function J(i,t){void 0===t&&(t=i.constructor);var n=Error.captureStackTrace;n&&n(i,t)}(g),g}return H(t,i),t}(Error),ye=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),be=function(i){function t(n){void 0===n&&(n=void 0);var s=i.call(this,n)||this;return s.message=n,s}return ye(t,i),t.prototype.getKind=function(){return this.constructor.kind},t.kind="Exception",t}(he);const $e=be;var ge=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),De=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return ge(t,i),t.kind="ArgumentException",t}($e);const xe=De;var Ne=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Xe=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return Ne(t,i),t.kind="IllegalArgumentException",t}($e);const Ke=Xe;var Lt=function(){function i(t){if(this.binarizer=t,null===t)throw new Ke("Binarizer must be non-null.")}return i.prototype.getWidth=function(){return this.binarizer.getWidth()},i.prototype.getHeight=function(){return this.binarizer.getHeight()},i.prototype.getBlackRow=function(t,n){return this.binarizer.getBlackRow(t,n)},i.prototype.getBlackMatrix=function(){return null==this.matrix&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},i.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},i.prototype.crop=function(t,n,s,h){var g=this.binarizer.getLuminanceSource().crop(t,n,s,h);return new i(this.binarizer.createBinarizer(g))},i.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},i.prototype.rotateCounterClockwise=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new i(this.binarizer.createBinarizer(t))},i.prototype.rotateCounterClockwise45=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new i(this.binarizer.createBinarizer(t))},i.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch(t){return""}},i}();const We=Lt;var Fe=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Ce=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return Fe(t,i),t.getChecksumInstance=function(){return new t},t.kind="ChecksumException",t}($e);const ct=Ce;var At=function(){function i(t){this.source=t}return i.prototype.getLuminanceSource=function(){return this.source},i.prototype.getWidth=function(){return this.source.getWidth()},i.prototype.getHeight=function(){return this.source.getHeight()},i}();const yt=At;var st=function(){function i(){}return i.arraycopy=function(t,n,s,h,g){for(;g--;)s[h++]=t[n++]},i.currentTimeMillis=function(){return Date.now()},i}();const Be=st;var Ye=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),$=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return Ye(t,i),t.kind="IndexOutOfBoundsException",t}($e);const lt=$;var Qe=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),qe=function(i){function t(n,s){void 0===n&&(n=void 0),void 0===s&&(s=void 0);var h=i.call(this,s)||this;return h.index=n,h.message=s,h}return Qe(t,i),t.kind="ArrayIndexOutOfBoundsException",t}(lt);const ut=qe;var pt=function(){function i(){}return i.fill=function(t,n){for(var s=0,h=t.length;s<h;s++)t[s]=n},i.fillWithin=function(t,n,s,h){i.rangeCheck(t.length,n,s);for(var g=n;g<s;g++)t[g]=h},i.rangeCheck=function(t,n,s){if(n>s)throw new Ke("fromIndex("+n+") > toIndex("+s+")");if(n<0)throw new ut(n);if(s>t)throw new ut(s)},i.asList=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t},i.create=function(t,n,s){return Array.from({length:t}).map(function(g){return Array.from({length:n}).fill(s)})},i.createInt32Array=function(t,n,s){return Array.from({length:t}).map(function(g){return Int32Array.from({length:n}).fill(s)})},i.equals=function(t,n){if(!(t&&n&&t.length&&n.length&&t.length===n.length))return!1;for(var s=0,h=t.length;s<h;s++)if(t[s]!==n[s])return!1;return!0},i.hashCode=function(t){var n,s;if(null===t)return 0;var h=1;try{for(var g=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),a=g.next();!a.done;a=g.next())h=31*h+a.value}catch(l){n={error:l}}finally{try{a&&!a.done&&(s=g.return)&&s.call(g)}finally{if(n)throw n.error}}return h},i.fillUint8Array=function(t,n){for(var s=0;s!==t.length;s++)t[s]=n},i.copyOf=function(t,n){return t.slice(0,n)},i.copyOfUint8Array=function(t,n){if(t.length<=n){var s=new Uint8Array(n);return s.set(t),s}return t.slice(0,n)},i.copyOfRange=function(t,n,s){var h=s-n,g=new Int32Array(h);return Be.arraycopy(t,n,g,0,h),g},i.binarySearch=function(t,n,s){void 0===s&&(s=i.numberComparator);for(var h=0,g=t.length-1;h<=g;){var a=g+h>>1,o=s(n,t[a]);if(o>0)h=a+1;else{if(!(o<0))return a;g=a-1}}return-h-1},i.numberComparator=function(t,n){return t-n},i}();const mt=pt;var gt=function(){function i(){}return i.numberOfTrailingZeros=function(t){var n;if(0===t)return 32;var s=31;return 0!=(n=t<<16)&&(s-=16,t=n),0!=(n=t<<8)&&(s-=8,t=n),0!=(n=t<<4)&&(s-=4,t=n),0!=(n=t<<2)&&(s-=2,t=n),s-(t<<1>>>31)},i.numberOfLeadingZeros=function(t){if(0===t)return 32;var n=1;return t>>>16||(n+=16,t<<=16),t>>>24||(n+=8,t<<=8),t>>>28||(n+=4,t<<=4),t>>>30||(n+=2,t<<=2),n-(t>>>31)},i.toHexString=function(t){return t.toString(16)},i.toBinaryString=function(t){return String(parseInt(String(t),2))},i.bitCount=function(t){return t=(t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135,63&(t+=t>>>8)+(t>>>16)},i.truncDivision=function(t,n){return Math.trunc(t/n)},i.parseInt=function(t,n){return void 0===n&&(n=void 0),parseInt(t,n)},i.MIN_VALUE_32_BITS=-2147483648,i.MAX_VALUE=Number.MAX_SAFE_INTEGER,i}();const Le=gt;var it=function(){function i(t,n){void 0===t?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,this.bits=null==n?i.makeArray(t):n)}return i.prototype.getSize=function(){return this.size},i.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},i.prototype.ensureCapacity=function(t){if(t>32*this.bits.length){var n=i.makeArray(t);Be.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}},i.prototype.get=function(t){return 0!=(this.bits[Math.floor(t/32)]&1<<(31&t))},i.prototype.set=function(t){this.bits[Math.floor(t/32)]|=1<<(31&t)},i.prototype.flip=function(t){this.bits[Math.floor(t/32)]^=1<<(31&t)},i.prototype.getNextSet=function(t){var n=this.size;if(t>=n)return n;var s=this.bits,h=Math.floor(t/32),g=s[h];g&=~((1<<(31&t))-1);for(var a=s.length;0===g;){if(++h===a)return n;g=s[h]}var o=32*h+Le.numberOfTrailingZeros(g);return o>n?n:o},i.prototype.getNextUnset=function(t){var n=this.size;if(t>=n)return n;var s=this.bits,h=Math.floor(t/32),g=~s[h];g&=~((1<<(31&t))-1);for(var a=s.length;0===g;){if(++h===a)return n;g=~s[h]}var o=32*h+Le.numberOfTrailingZeros(g);return o>n?n:o},i.prototype.setBulk=function(t,n){this.bits[Math.floor(t/32)]=n},i.prototype.setRange=function(t,n){if(n<t||t<0||n>this.size)throw new Ke;if(n!==t){n--;for(var s=Math.floor(t/32),h=Math.floor(n/32),g=this.bits,a=s;a<=h;a++)g[a]|=(2<<(a<h?31:31&n))-(1<<(a>s?0:31&t))}},i.prototype.clear=function(){for(var t=this.bits.length,n=this.bits,s=0;s<t;s++)n[s]=0},i.prototype.isRange=function(t,n,s){if(n<t||t<0||n>this.size)throw new Ke;if(n===t)return!0;n--;for(var h=Math.floor(t/32),g=Math.floor(n/32),a=this.bits,o=h;o<=g;o++){var E=(2<<(o<g?31:31&n))-(1<<(o>h?0:31&t))&4294967295;if((a[o]&E)!==(s?E:0))return!1}return!0},i.prototype.appendBit=function(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++},i.prototype.appendBits=function(t,n){if(n<0||n>32)throw new Ke("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(var s=n;s>0;s--)this.appendBit(1==(t>>s-1&1))},i.prototype.appendBitArray=function(t){var n=t.size;this.ensureCapacity(this.size+n);for(var s=0;s<n;s++)this.appendBit(t.get(s))},i.prototype.xor=function(t){if(this.size!==t.size)throw new Ke("Sizes don't match");for(var n=this.bits,s=0,h=n.length;s<h;s++)n[s]^=t.bits[s]},i.prototype.toBytes=function(t,n,s,h){for(var g=0;g<h;g++){for(var a=0,o=0;o<8;o++)this.get(t)&&(a|=1<<7-o),t++;n[s+g]=a}},i.prototype.getBitArray=function(){return this.bits},i.prototype.reverse=function(){for(var t=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),s=n+1,h=this.bits,g=0;g<s;g++){var a=h[g];t[n-g]=a=(a=(a=(a=(a=a>>1&1431655765|(1431655765&a)<<1)>>2&858993459|(858993459&a)<<2)>>4&252645135|(252645135&a)<<4)>>8&16711935|(16711935&a)<<8)>>16&65535|(65535&a)<<16}if(this.size!==32*s){var o=32*s-this.size,l=t[0]>>>o;for(g=1;g<s;g++){var v=t[g];t[g-1]=l|=v<<32-o,l=v>>>o}t[s-1]=l}this.bits=t},i.makeArray=function(t){return new Int32Array(Math.floor((t+31)/32))},i.prototype.equals=function(t){return t instanceof i&&(this.size===t.size&&mt.equals(this.bits,t.bits))},i.prototype.hashCode=function(){return 31*this.size+mt.hashCode(this.bits)},i.prototype.toString=function(){for(var t="",n=0,s=this.size;n<s;n++)7&n||(t+=" "),t+=this.get(n)?"X":".";return t},i.prototype.clone=function(){return new i(this.size,this.bits.slice())},i.prototype.toArray=function(){for(var t=[],n=0,s=this.size;n<s;n++)t.push(this.get(n));return t},i}();const Ze=it;var me=(()=>(function(i){i[i.OTHER=0]="OTHER",i[i.PURE_BARCODE=1]="PURE_BARCODE",i[i.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",i[i.TRY_HARDER=3]="TRY_HARDER",i[i.CHARACTER_SET=4]="CHARACTER_SET",i[i.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",i[i.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",i[i.ASSUME_GS1=7]="ASSUME_GS1",i[i.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",i[i.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",i[i.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(me||(me={})),me))();const te=me;var q=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),re=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return q(t,i),t.getFormatInstance=function(){return new t},t.kind="FormatException",t}($e);const fe=re;var ke=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},rt=(()=>(function(i){i[i.Cp437=0]="Cp437",i[i.ISO8859_1=1]="ISO8859_1",i[i.ISO8859_2=2]="ISO8859_2",i[i.ISO8859_3=3]="ISO8859_3",i[i.ISO8859_4=4]="ISO8859_4",i[i.ISO8859_5=5]="ISO8859_5",i[i.ISO8859_6=6]="ISO8859_6",i[i.ISO8859_7=7]="ISO8859_7",i[i.ISO8859_8=8]="ISO8859_8",i[i.ISO8859_9=9]="ISO8859_9",i[i.ISO8859_10=10]="ISO8859_10",i[i.ISO8859_11=11]="ISO8859_11",i[i.ISO8859_13=12]="ISO8859_13",i[i.ISO8859_14=13]="ISO8859_14",i[i.ISO8859_15=14]="ISO8859_15",i[i.ISO8859_16=15]="ISO8859_16",i[i.SJIS=16]="SJIS",i[i.Cp1250=17]="Cp1250",i[i.Cp1251=18]="Cp1251",i[i.Cp1252=19]="Cp1252",i[i.Cp1256=20]="Cp1256",i[i.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",i[i.UTF8=22]="UTF8",i[i.ASCII=23]="ASCII",i[i.Big5=24]="Big5",i[i.GB18030=25]="GB18030",i[i.EUC_KR=26]="EUC_KR"}(rt||(rt={})),rt))(),Qt=function(){function i(t,n,s){for(var h,g,a=[],o=3;o<arguments.length;o++)a[o-3]=arguments[o];this.valueIdentifier=t,this.name=s,this.values="number"==typeof n?Int32Array.from([n]):n,this.otherEncodingNames=a,i.VALUE_IDENTIFIER_TO_ECI.set(t,this),i.NAME_TO_ECI.set(s,this);for(var l=this.values,v=0,E=l.length;v!==E;v++)i.VALUES_TO_ECI.set(l[v],this);try{for(var R=ke(a),k=R.next();!k.done;k=R.next())i.NAME_TO_ECI.set(k.value,this)}catch(se){h={error:se}}finally{try{k&&!k.done&&(g=R.return)&&g.call(R)}finally{if(h)throw h.error}}}return i.prototype.getValueIdentifier=function(){return this.valueIdentifier},i.prototype.getName=function(){return this.name},i.prototype.getValue=function(){return this.values[0]},i.getCharacterSetECIByValue=function(t){if(t<0||t>=900)throw new fe("incorect value");var n=i.VALUES_TO_ECI.get(t);if(void 0===n)throw new fe("incorect value");return n},i.getCharacterSetECIByName=function(t){var n=i.NAME_TO_ECI.get(t);if(void 0===n)throw new fe("incorect value");return n},i.prototype.equals=function(t){if(!(t instanceof i))return!1;var n=t;return this.getName()===n.getName()},i.VALUE_IDENTIFIER_TO_ECI=new Map,i.VALUES_TO_ECI=new Map,i.NAME_TO_ECI=new Map,i.Cp437=new i(rt.Cp437,Int32Array.from([0,2]),"Cp437"),i.ISO8859_1=new i(rt.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),i.ISO8859_2=new i(rt.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),i.ISO8859_3=new i(rt.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),i.ISO8859_4=new i(rt.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),i.ISO8859_5=new i(rt.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),i.ISO8859_6=new i(rt.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),i.ISO8859_7=new i(rt.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),i.ISO8859_8=new i(rt.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),i.ISO8859_9=new i(rt.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),i.ISO8859_10=new i(rt.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),i.ISO8859_11=new i(rt.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),i.ISO8859_13=new i(rt.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),i.ISO8859_14=new i(rt.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),i.ISO8859_15=new i(rt.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),i.ISO8859_16=new i(rt.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),i.SJIS=new i(rt.SJIS,20,"SJIS","Shift_JIS"),i.Cp1250=new i(rt.Cp1250,21,"Cp1250","windows-1250"),i.Cp1251=new i(rt.Cp1251,22,"Cp1251","windows-1251"),i.Cp1252=new i(rt.Cp1252,23,"Cp1252","windows-1252"),i.Cp1256=new i(rt.Cp1256,24,"Cp1256","windows-1256"),i.UnicodeBigUnmarked=new i(rt.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),i.UTF8=new i(rt.UTF8,26,"UTF8","UTF-8"),i.ASCII=new i(rt.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),i.Big5=new i(rt.Big5,28,"Big5"),i.GB18030=new i(rt.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),i.EUC_KR=new i(rt.EUC_KR,30,"EUC_KR","EUC-KR"),i}();const Dt=Qt;var Yt=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),yn=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return Yt(t,i),t.kind="UnsupportedOperationException",t}($e);const Mn=yn;var mn=function(){function i(){}return i.decode=function(t,n){var s=this.encodingName(n);return this.customDecoder?this.customDecoder(t,s):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(s)?this.decodeFallback(t,s):new TextDecoder(s).decode(t)},i.shouldDecodeOnFallback=function(t){return!i.isBrowser()&&"ISO-8859-1"===t},i.encode=function(t,n){var s=this.encodingName(n);return this.customEncoder?this.customEncoder(t,s):typeof TextEncoder>"u"?this.encodeFallback(t):(new TextEncoder).encode(t)},i.isBrowser=function(){return typeof window<"u"&&"[object Window]"==={}.toString.call(window)},i.encodingName=function(t){return"string"==typeof t?t:t.getName()},i.encodingCharacterSet=function(t){return t instanceof Dt?t:Dt.getCharacterSetECIByName(t)},i.decodeFallback=function(t,n){var s=this.encodingCharacterSet(n);if(i.isDecodeFallbackSupported(s)){for(var h="",g=0,a=t.length;g<a;g++){var o=t[g].toString(16);o.length<2&&(o="0"+o),h+="%"+o}return decodeURIComponent(h)}if(s.equals(Dt.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new Mn("Encoding "+this.encodingName(n)+" not supported by fallback.")},i.isDecodeFallbackSupported=function(t){return t.equals(Dt.UTF8)||t.equals(Dt.ISO8859_1)||t.equals(Dt.ASCII)},i.encodeFallback=function(t){for(var s=btoa(unescape(encodeURIComponent(t))).split(""),h=[],g=0;g<s.length;g++)h.push(s[g].charCodeAt(0));return new Uint8Array(h)},i}();const Gn=mn;var Ar=function(){function i(){}return i.castAsNonUtf8Char=function(t,n){void 0===n&&(n=null);var s=n?n.getName():this.ISO88591;return Gn.decode(new Uint8Array([t]),s)},i.guessEncoding=function(t,n){if(null!=n&&void 0!==n.get(te.CHARACTER_SET))return n.get(te.CHARACTER_SET).toString();for(var s=t.length,h=!0,g=!0,a=!0,o=0,l=0,v=0,E=0,A=0,R=0,k=0,Z=0,se=0,Me=0,Ue=0,ze=t.length>3&&239===t[0]&&187===t[1]&&191===t[2],Ct=0;Ct<s&&(h||g||a);Ct++){var Mt=255&t[Ct];a&&(o>0?128&Mt?o--:a=!1:128&Mt&&(64&Mt?(o++,32&Mt?(o++,16&Mt?(o++,8&Mt?a=!1:E++):v++):l++):a=!1)),h&&(Mt>127&&Mt<160?h=!1:Mt>159&&(Mt<192||215===Mt||247===Mt)&&Ue++),g&&(A>0?Mt<64||127===Mt||Mt>252?g=!1:A--:128===Mt||160===Mt||Mt>239?g=!1:Mt>160&&Mt<224?(R++,Z=0,++k>se&&(se=k)):Mt>127?(A++,k=0,++Z>Me&&(Me=Z)):(k=0,Z=0))}return a&&o>0&&(a=!1),g&&A>0&&(g=!1),a&&(ze||l+v+E>0)?i.UTF8:g&&(i.ASSUME_SHIFT_JIS||se>=3||Me>=3)?i.SHIFT_JIS:h&&g?2===se&&2===R||10*Ue>=s?i.SHIFT_JIS:i.ISO88591:h?i.ISO88591:g?i.SHIFT_JIS:a?i.UTF8:i.PLATFORM_DEFAULT_ENCODING},i.format=function(t){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];var h=-1;return t.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function g(o,l,v,E,A,R){if("%%"===o)return"%";if(void 0!==n[++h]){o=E?parseInt(E.substr(1)):void 0;var Z,k=A?parseInt(A.substr(1)):void 0;switch(R){case"s":Z=n[h];break;case"c":Z=n[h][0];break;case"f":Z=parseFloat(n[h]).toFixed(o);break;case"p":Z=parseFloat(n[h]).toPrecision(o);break;case"e":Z=parseFloat(n[h]).toExponential(o);break;case"x":Z=parseInt(n[h]).toString(k||16);break;case"d":Z=parseFloat(parseInt(n[h],k||10).toPrecision(o)).toFixed(0)}Z="object"==typeof Z?JSON.stringify(Z):(+Z).toString(k);for(var se=parseInt(v),Me=v&&v[0]+""=="0"?"0":" ";Z.length<se;)Z=void 0!==l?Z+Me:Me+Z;return Z}})},i.getBytes=function(t,n){return Gn.encode(t,n)},i.getCharCode=function(t,n){return void 0===n&&(n=0),t.charCodeAt(n)},i.getCharAt=function(t){return String.fromCharCode(t)},i.SHIFT_JIS=Dt.SJIS.getName(),i.GB2312="GB2312",i.ISO88591=Dt.ISO8859_1.getName(),i.EUC_JP="EUC_JP",i.UTF8=Dt.UTF8.getName(),i.PLATFORM_DEFAULT_ENCODING=i.UTF8,i.ASSUME_SHIFT_JIS=!1,i}();const Nn=Ar;var Dn=function(){function i(t){void 0===t&&(t=""),this.value=t}return i.prototype.enableDecoding=function(t){return this.encoding=t,this},i.prototype.append=function(t){return this.value+="string"==typeof t?t.toString():this.encoding?Nn.castAsNonUtf8Char(t,this.encoding):String.fromCharCode(t),this},i.prototype.appendChars=function(t,n,s){for(var h=n;n<n+s;h++)this.append(t[h]);return this},i.prototype.length=function(){return this.value.length},i.prototype.charAt=function(t){return this.value.charAt(t)},i.prototype.deleteCharAt=function(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)},i.prototype.setCharAt=function(t,n){this.value=this.value.substr(0,t)+n+this.value.substr(t+1)},i.prototype.substring=function(t,n){return this.value.substring(t,n)},i.prototype.setLengthToZero=function(){this.value=""},i.prototype.toString=function(){return this.value},i.prototype.insert=function(t,n){this.value=this.value.substring(0,t)+n+this.value.substring(t)},i}();const En=Dn;var sn=function(){function i(t,n,s,h){if(this.width=t,this.height=n,this.rowSize=s,this.bits=h,null==n&&(n=t),this.height=n,t<1||n<1)throw new Ke("Both dimensions must be greater than 0");null==s&&(s=Math.floor((t+31)/32)),this.rowSize=s,null==h&&(this.bits=new Int32Array(this.rowSize*this.height))}return i.parseFromBooleanArray=function(t){for(var n=t.length,s=t[0].length,h=new i(s,n),g=0;g<n;g++)for(var a=t[g],o=0;o<s;o++)a[o]&&h.set(o,g);return h},i.parseFromString=function(t,n,s){if(null===t)throw new Ke("stringRepresentation cannot be null");for(var h=new Array(t.length),g=0,a=0,o=-1,l=0,v=0;v<t.length;)if("\n"===t.charAt(v)||"\r"===t.charAt(v)){if(g>a){if(-1===o)o=g-a;else if(g-a!==o)throw new Ke("row lengths do not match");a=g,l++}v++}else if(t.substring(v,v+n.length)===n)v+=n.length,h[g]=!0,g++;else{if(t.substring(v,v+s.length)!==s)throw new Ke("illegal character encountered: "+t.substring(v));v+=s.length,h[g]=!1,g++}if(g>a){if(-1===o)o=g-a;else if(g-a!==o)throw new Ke("row lengths do not match");l++}for(var E=new i(o,l),A=0;A<g;A++)h[A]&&E.set(Math.floor(A%o),Math.floor(A/o));return E},i.prototype.get=function(t,n){var s=n*this.rowSize+Math.floor(t/32);return 0!=(this.bits[s]>>>(31&t)&1)},i.prototype.set=function(t,n){var s=n*this.rowSize+Math.floor(t/32);this.bits[s]|=1<<(31&t)&4294967295},i.prototype.unset=function(t,n){var s=n*this.rowSize+Math.floor(t/32);this.bits[s]&=~(1<<(31&t)&4294967295)},i.prototype.flip=function(t,n){var s=n*this.rowSize+Math.floor(t/32);this.bits[s]^=1<<(31&t)&4294967295},i.prototype.xor=function(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new Ke("input matrix dimensions do not match");for(var n=new Ze(Math.floor(this.width/32)+1),s=this.rowSize,h=this.bits,g=0,a=this.height;g<a;g++)for(var o=g*s,l=t.getRow(g,n).getBitArray(),v=0;v<s;v++)h[o+v]^=l[v]},i.prototype.clear=function(){for(var t=this.bits,n=t.length,s=0;s<n;s++)t[s]=0},i.prototype.setRegion=function(t,n,s,h){if(n<0||t<0)throw new Ke("Left and top must be nonnegative");if(h<1||s<1)throw new Ke("Height and width must be at least 1");var g=t+s,a=n+h;if(a>this.height||g>this.width)throw new Ke("The region must fit inside the matrix");for(var o=this.rowSize,l=this.bits,v=n;v<a;v++)for(var E=v*o,A=t;A<g;A++)l[E+Math.floor(A/32)]|=1<<(31&A)&4294967295},i.prototype.getRow=function(t,n){null==n||n.getSize()<this.width?n=new Ze(this.width):n.clear();for(var s=this.rowSize,h=this.bits,g=t*s,a=0;a<s;a++)n.setBulk(32*a,h[g+a]);return n},i.prototype.setRow=function(t,n){Be.arraycopy(n.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)},i.prototype.rotate180=function(){for(var t=this.getWidth(),n=this.getHeight(),s=new Ze(t),h=new Ze(t),g=0,a=Math.floor((n+1)/2);g<a;g++)s=this.getRow(g,s),h=this.getRow(n-1-g,h),s.reverse(),h.reverse(),this.setRow(g,h),this.setRow(n-1-g,s)},i.prototype.getEnclosingRectangle=function(){for(var n=this.height,s=this.rowSize,h=this.bits,g=this.width,a=n,o=-1,l=-1,v=0;v<n;v++)for(var E=0;E<s;E++){var A=h[v*s+E];if(0!==A){if(v<a&&(a=v),v>l&&(l=v),32*E<g){for(var R=0;!(A<<31-R&4294967295);)R++;32*E+R<g&&(g=32*E+R)}if(32*E+31>o){for(R=31;!(A>>>R);)R--;32*E+R>o&&(o=32*E+R)}}}return o<g||l<a?null:Int32Array.from([g,a,o-g+1,l-a+1])},i.prototype.getTopLeftOnBit=function(){for(var t=this.rowSize,n=this.bits,s=0;s<n.length&&0===n[s];)s++;if(s===n.length)return null;for(var h=s/t,g=s%t*32,a=n[s],o=0;!(a<<31-o&4294967295);)o++;return Int32Array.from([g+=o,h])},i.prototype.getBottomRightOnBit=function(){for(var t=this.rowSize,n=this.bits,s=n.length-1;s>=0&&0===n[s];)s--;if(s<0)return null;for(var h=Math.floor(s/t),g=32*Math.floor(s%t),a=n[s],o=31;!(a>>>o);)o--;return Int32Array.from([g+=o,h])},i.prototype.getWidth=function(){return this.width},i.prototype.getHeight=function(){return this.height},i.prototype.getRowSize=function(){return this.rowSize},i.prototype.equals=function(t){return t instanceof i&&(this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&mt.equals(this.bits,t.bits))},i.prototype.hashCode=function(){var t=this.width;return 31*(t=31*(t=31*(t=31*t+this.width)+this.height)+this.rowSize)+mt.hashCode(this.bits)},i.prototype.toString=function(t,n,s){return void 0===t&&(t="X "),void 0===n&&(n="  "),void 0===s&&(s="\n"),this.buildToString(t,n,s)},i.prototype.buildToString=function(t,n,s){for(var h=new En,g=0,a=this.height;g<a;g++){for(var o=0,l=this.width;o<l;o++)h.append(this.get(o,g)?t:n);h.append(s)}return h.toString()},i.prototype.clone=function(){return new i(this.width,this.height,this.rowSize,this.bits.slice())},i}();const Ir=sn;var Vr=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),br=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return Vr(t,i),t.getNotFoundInstance=function(){return new t},t.kind="NotFoundException",t}($e);const Kt=br;var Jr=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),rr=function(i){function t(n){var s=i.call(this,n)||this;return s.luminances=t.EMPTY,s.buckets=new Int32Array(t.LUMINANCE_BUCKETS),s}return Jr(t,i),t.prototype.getBlackRow=function(n,s){var h=this.getLuminanceSource(),g=h.getWidth();null==s||s.getSize()<g?s=new Ze(g):s.clear(),this.initArrays(g);for(var a=h.getRow(n,this.luminances),o=this.buckets,l=0;l<g;l++)o[(255&a[l])>>t.LUMINANCE_SHIFT]++;var v=t.estimateBlackPoint(o);if(g<3)for(l=0;l<g;l++)(255&a[l])<v&&s.set(l);else{var E=255&a[0],A=255&a[1];for(l=1;l<g-1;l++){var R=255&a[l+1];(4*A-E-R)/2<v&&s.set(l),E=A,A=R}}return s},t.prototype.getBlackMatrix=function(){var n=this.getLuminanceSource(),s=n.getWidth(),h=n.getHeight(),g=new Ir(s,h);this.initArrays(s);for(var a=this.buckets,o=1;o<5;o++)for(var l=Math.floor(h*o/5),v=n.getRow(l,this.luminances),E=Math.floor(4*s/5),A=Math.floor(s/5);A<E;A++)a[(255&v[A])>>t.LUMINANCE_SHIFT]++;var k=t.estimateBlackPoint(a),Z=n.getMatrix();for(o=0;o<h;o++){var se=o*s;for(A=0;A<s;A++)(255&Z[se+A])<k&&g.set(A,o)}return g},t.prototype.createBinarizer=function(n){return new t(n)},t.prototype.initArrays=function(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));for(var s=this.buckets,h=0;h<t.LUMINANCE_BUCKETS;h++)s[h]=0},t.estimateBlackPoint=function(n){for(var s=n.length,h=0,g=0,a=0,o=0;o<s;o++)n[o]>a&&(g=o,a=n[o]),n[o]>h&&(h=n[o]);var l=0,v=0;for(o=0;o<s;o++){var E=o-g;(A=n[o]*E*E)>v&&(l=o,v=A)}if(g>l){var R=g;g=l,l=R}if(l-g<=s/16)throw new Kt;var k=l-1,Z=-1;for(o=l-1;o>g;o--){var A,se=o-g;(A=se*se*(l-o)*(h-n[o]))>Z&&(k=o,Z=A)}return k<<t.LUMINANCE_SHIFT},t.LUMINANCE_SHIFT=8-(t.LUMINANCE_BITS=5),t.LUMINANCE_BUCKETS=1<<t.LUMINANCE_BITS,t.EMPTY=Uint8ClampedArray.from([0]),t}(yt);const Bn=rr;var cr=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),zi=function(i){function t(n){var s=i.call(this,n)||this;return s.matrix=null,s}return cr(t,i),t.prototype.getBlackMatrix=function(){if(null!==this.matrix)return this.matrix;var n=this.getLuminanceSource(),s=n.getWidth(),h=n.getHeight();if(s>=t.MINIMUM_DIMENSION&&h>=t.MINIMUM_DIMENSION){var g=n.getMatrix(),a=s>>t.BLOCK_SIZE_POWER;s&t.BLOCK_SIZE_MASK&&a++;var o=h>>t.BLOCK_SIZE_POWER;h&t.BLOCK_SIZE_MASK&&o++;var l=t.calculateBlackPoints(g,a,o,s,h),v=new Ir(s,h);t.calculateThresholdForBlock(g,a,o,s,h,l,v),this.matrix=v}else this.matrix=i.prototype.getBlackMatrix.call(this);return this.matrix},t.prototype.createBinarizer=function(n){return new t(n)},t.calculateThresholdForBlock=function(n,s,h,g,a,o,l){for(var v=a-t.BLOCK_SIZE,E=g-t.BLOCK_SIZE,A=0;A<h;A++){var R=A<<t.BLOCK_SIZE_POWER;R>v&&(R=v);for(var k=t.cap(A,2,h-3),Z=0;Z<s;Z++){var se=Z<<t.BLOCK_SIZE_POWER;se>E&&(se=E);for(var Me=t.cap(Z,2,s-3),Ue=0,ze=-2;ze<=2;ze++){var Ct=o[k+ze];Ue+=Ct[Me-2]+Ct[Me-1]+Ct[Me]+Ct[Me+1]+Ct[Me+2]}t.thresholdBlock(n,se,R,Ue/25,g,l)}}},t.cap=function(n,s,h){return n<s?s:n>h?h:n},t.thresholdBlock=function(n,s,h,g,a,o){for(var l=0,v=h*a+s;l<t.BLOCK_SIZE;l++,v+=a)for(var E=0;E<t.BLOCK_SIZE;E++)(255&n[v+E])<=g&&o.set(s+E,h+l)},t.calculateBlackPoints=function(n,s,h,g,a){for(var o=a-t.BLOCK_SIZE,l=g-t.BLOCK_SIZE,v=new Array(h),E=0;E<h;E++){v[E]=new Int32Array(s);var A=E<<t.BLOCK_SIZE_POWER;A>o&&(A=o);for(var R=0;R<s;R++){var k=R<<t.BLOCK_SIZE_POWER;k>l&&(k=l);for(var Z=0,se=255,Me=0,Ue=0,ze=A*g+k;Ue<t.BLOCK_SIZE;Ue++,ze+=g){for(var Ct=0;Ct<t.BLOCK_SIZE;Ct++){var Mt=255&n[ze+Ct];Z+=Mt,Mt<se&&(se=Mt),Mt>Me&&(Me=Mt)}if(Me-se>t.MIN_DYNAMIC_RANGE)for(Ue++,ze+=g;Ue<t.BLOCK_SIZE;Ue++,ze+=g)for(Ct=0;Ct<t.BLOCK_SIZE;Ct++)Z+=255&n[ze+Ct]}var gn=Z>>2*t.BLOCK_SIZE_POWER;if(Me-se<=t.MIN_DYNAMIC_RANGE&&(gn=se/2,E>0&&R>0)){var Rn=(v[E-1][R]+2*v[E][R-1]+v[E-1][R-1])/4;se<Rn&&(gn=Rn)}v[E][R]=gn}}return v},t.BLOCK_SIZE_MASK=(t.BLOCK_SIZE=1<<(t.BLOCK_SIZE_POWER=3))-1,t.MINIMUM_DIMENSION=5*t.BLOCK_SIZE,t.MIN_DYNAMIC_RANGE=24,t}(Bn);const qn=zi;var Wr=function(){function i(t,n){this.width=t,this.height=n}return i.prototype.getWidth=function(){return this.width},i.prototype.getHeight=function(){return this.height},i.prototype.isCropSupported=function(){return!1},i.prototype.crop=function(t,n,s,h){throw new Mn("This luminance source does not support cropping.")},i.prototype.isRotateSupported=function(){return!1},i.prototype.rotateCounterClockwise=function(){throw new Mn("This luminance source does not support rotation by 90 degrees.")},i.prototype.rotateCounterClockwise45=function(){throw new Mn("This luminance source does not support rotation by 45 degrees.")},i.prototype.toString=function(){for(var t=new Uint8ClampedArray(this.width),n=new En,s=0;s<this.height;s++){for(var h=this.getRow(s,t),g=0;g<this.width;g++){var a=255&h[g];n.append(a<64?"#":a<128?"+":a<192?".":" ")}n.append("\n")}return n.toString()},i}();const cn=Wr;var _i=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Wi=function(i){function t(n){var s=i.call(this,n.getWidth(),n.getHeight())||this;return s.delegate=n,s}return _i(t,i),t.prototype.getRow=function(n,s){for(var h=this.delegate.getRow(n,s),g=this.getWidth(),a=0;a<g;a++)h[a]=255-(255&h[a]);return h},t.prototype.getMatrix=function(){for(var n=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),h=new Uint8ClampedArray(s),g=0;g<s;g++)h[g]=255-(255&n[g]);return h},t.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},t.prototype.crop=function(n,s,h,g){return new t(this.delegate.crop(n,s,h,g))},t.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},t.prototype.invert=function(){return this.delegate},t.prototype.rotateCounterClockwise=function(){return new t(this.delegate.rotateCounterClockwise())},t.prototype.rotateCounterClockwise45=function(){return new t(this.delegate.rotateCounterClockwise45())},t}(cn);const jr=Wi;var Pi=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Rr=function(i){function t(n){var s=i.call(this,n.width,n.height)||this;return s.canvas=n,s.tempCanvasElement=null,s.buffer=t.makeBufferFromCanvasImageData(n),s}return Pi(t,i),t.makeBufferFromCanvasImageData=function(n){var s=n.getContext("2d").getImageData(0,0,n.width,n.height);return t.toGrayscaleBuffer(s.data,n.width,n.height)},t.toGrayscaleBuffer=function(n,s,h){var g=new Uint8ClampedArray(s*h);if(t.FRAME_INDEX=!t.FRAME_INDEX)for(var a=0,o=0,l=n.length;a<l;a+=4,o++){g[o]=0===n[a+3]?255:306*n[a]+601*n[a+1]+117*n[a+2]+512>>10}else{a=0,o=0;for(var Z=n.length;a<Z;a+=4,o++)void 0,g[o]=255-(0===n[a+3]?255:306*n[a]+601*n[a+1]+117*n[a+2]+512>>10)}return g},t.prototype.getRow=function(n,s){if(n<0||n>=this.getHeight())throw new Ke("Requested row is outside the image: "+n);var h=this.getWidth(),g=n*h;return null===s?s=this.buffer.slice(g,g+h):(s.length<h&&(s=new Uint8ClampedArray(h)),s.set(this.buffer.slice(g,g+h))),s},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(n,s,h,g){return i.prototype.crop.call(this,n,s,h,g),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement},t.prototype.rotate=function(n){var s=this.getTempCanvasElement(),h=s.getContext("2d"),g=n*t.DEGREE_TO_RADIANS,a=this.canvas.width,o=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(g))*a+Math.abs(Math.sin(g))*o),v=Math.ceil(Math.abs(Math.sin(g))*a+Math.abs(Math.cos(g))*o);return s.width=l,s.height=v,h.translate(l/2,v/2),h.rotate(g),h.drawImage(this.canvas,a/-2,o/-2),this.buffer=t.makeBufferFromCanvasImageData(s),this},t.prototype.invert=function(){return new jr(this)},t.DEGREE_TO_RADIANS=Math.PI/180,t.FRAME_INDEX=!0,t}(cn),Er=function(){function i(t,n,s){this.deviceId=t,this.label=n,this.kind="videoinput",this.groupId=s||void 0}return i.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},i}(),ii=function(i,t,n,s){return new(n||(n=Promise))(function(g,a){function o(E){try{v(s.next(E))}catch(A){a(A)}}function l(E){try{v(s.throw(E))}catch(A){a(A)}}function v(E){E.done?g(E.value):function h(g){return g instanceof n?g:new n(function(a){a(g)})}(E.value).then(o,l)}v((s=s.apply(i,t||[])).next())})},wn=function(i,t){var s,h,g,a,n={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(v){return function(E){return function l(v){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,h&&(g=2&v[0]?h.return:v[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,v[1])).done)return g;switch(h=0,g&&(v=[2&v[0],g.value]),v[0]){case 0:case 1:g=v;break;case 4:return n.label++,{value:v[1],done:!1};case 5:n.label++,h=v[1],v=[0];continue;case 7:v=n.ops.pop(),n.trys.pop();continue;default:if(!(g=(g=n.trys).length>0&&g[g.length-1])&&(6===v[0]||2===v[0])){n=0;continue}if(3===v[0]&&(!g||v[1]>g[0]&&v[1]<g[3])){n.label=v[1];break}if(6===v[0]&&n.label<g[1]){n.label=g[1],g=v;break}if(g&&n.label<g[2]){n.label=g[2],n.ops.push(v);break}g[2]&&n.ops.pop(),n.trys.pop();continue}v=t.call(i,n)}catch(E){v=[6,E],h=0}finally{s=g=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([v,E])}}},Un=function(){function i(t,n,s){void 0===n&&(n=500),this.reader=t,this.timeBetweenScansMillis=n,this._hints=s,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(i.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"canEnumerateDevices",{get:function(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(t){this._timeBetweenDecodingAttempts=t<0?0:t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hints",{get:function(){return this._hints},set:function(t){this._hints=t||null},enumerable:!1,configurable:!0}),i.prototype.listVideoInputDevices=function(){return ii(this,void 0,void 0,function(){var t,n,s,h,g,a,A,R;return wn(this,function(k){switch(k.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:t=k.sent(),n=[];try{for(s=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),h=s.next();!h.done;h=s.next())"videoinput"===(a="video"===(g=h.value).kind?"videoinput":g.kind)&&n.push({deviceId:g.deviceId||g.id,label:g.label||"Video device "+(n.length+1),kind:a,groupId:g.groupId})}catch(Z){A={error:Z}}finally{try{h&&!h.done&&(R=s.return)&&R.call(s)}finally{if(A)throw A.error}}return[2,n]}})})},i.prototype.getVideoInputDevices=function(){return ii(this,void 0,void 0,function(){return wn(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return[2,n.sent().map(function(s){return new Er(s.deviceId,s.label)})]}})})},i.prototype.findDeviceById=function(t){return ii(this,void 0,void 0,function(){var n;return wn(this,function(s){switch(s.label){case 0:return[4,this.listVideoInputDevices()];case 1:return(n=s.sent())?[2,n.find(function(h){return h.deviceId===t})]:[2,null]}})})},i.prototype.decodeFromInputVideoDevice=function(t,n){return ii(this,void 0,void 0,function(){return wn(this,function(s){switch(s.label){case 0:return[4,this.decodeOnceFromVideoDevice(t,n)];case 1:return[2,s.sent()]}})})},i.prototype.decodeOnceFromVideoDevice=function(t,n){return ii(this,void 0,void 0,function(){return wn(this,function(g){switch(g.label){case 0:return this.reset(),[4,this.decodeOnceFromConstraints({video:t?{deviceId:{exact:t}}:{facingMode:"environment"}},n)];case 1:return[2,g.sent()]}})})},i.prototype.decodeOnceFromConstraints=function(t,n){return ii(this,void 0,void 0,function(){var s;return wn(this,function(h){switch(h.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return s=h.sent(),[4,this.decodeOnceFromStream(s,n)];case 2:return[2,h.sent()]}})})},i.prototype.decodeOnceFromStream=function(t,n){return ii(this,void 0,void 0,function(){var s;return wn(this,function(g){switch(g.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,n)];case 1:return s=g.sent(),[4,this.decodeOnce(s)];case 2:return[2,g.sent()]}})})},i.prototype.decodeFromInputVideoDeviceContinuously=function(t,n,s){return ii(this,void 0,void 0,function(){return wn(this,function(h){switch(h.label){case 0:return[4,this.decodeFromVideoDevice(t,n,s)];case 1:return[2,h.sent()]}})})},i.prototype.decodeFromVideoDevice=function(t,n,s){return ii(this,void 0,void 0,function(){return wn(this,function(a){switch(a.label){case 0:return[4,this.decodeFromConstraints({video:t?{deviceId:{exact:t}}:{facingMode:"environment"}},n,s)];case 1:return[2,a.sent()]}})})},i.prototype.decodeFromConstraints=function(t,n,s){return ii(this,void 0,void 0,function(){var h;return wn(this,function(g){switch(g.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return h=g.sent(),[4,this.decodeFromStream(h,n,s)];case 2:return[2,g.sent()]}})})},i.prototype.decodeFromStream=function(t,n,s){return ii(this,void 0,void 0,function(){var h;return wn(this,function(g){switch(g.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,n)];case 1:return h=g.sent(),[4,this.decodeContinuously(h,s)];case 2:return[2,g.sent()]}})})},i.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},i.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},i.prototype.attachStreamToVideo=function(t,n){return ii(this,void 0,void 0,function(){var s;return wn(this,function(h){switch(h.label){case 0:return s=this.prepareVideoElement(n),this.addVideoSource(s,t),this.videoElement=s,this.stream=t,[4,this.playVideoOnLoadAsync(s)];case 1:return h.sent(),[2,s]}})})},i.prototype.playVideoOnLoadAsync=function(t){var n=this;return new Promise(function(s,h){return n.playVideoOnLoad(t,function(){return s()})})},i.prototype.playVideoOnLoad=function(t,n){var s=this;this.videoEndedListener=function(){return s.stopStreams()},this.videoCanPlayListener=function(){return s.tryPlayVideo(t)},t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",n),this.tryPlayVideo(t)},i.prototype.isVideoPlaying=function(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2},i.prototype.tryPlayVideo=function(t){return ii(this,void 0,void 0,function(){return wn(this,function(s){switch(s.label){case 0:if(this.isVideoPlaying(t))return console.warn("Trying to play video that is already playing."),[2];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,t.play()];case 2:return s.sent(),[3,4];case 3:return s.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},i.prototype.getMediaElement=function(t,n){var s=document.getElementById(t);if(!s)throw new xe("element with id '"+t+"' not found");if(s.nodeName.toLowerCase()!==n.toLowerCase())throw new xe("element with id '"+t+"' must be an "+n+" element");return s},i.prototype.decodeFromImage=function(t,n){if(!t&&!n)throw new xe("either imageElement with a src set or an url must be provided");return n&&!t?this.decodeFromImageUrl(n):this.decodeFromImageElement(t)},i.prototype.decodeFromVideo=function(t,n){if(!t&&!n)throw new xe("Either an element with a src set or an URL must be provided");return n&&!t?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(t)},i.prototype.decodeFromVideoContinuously=function(t,n,s){if(void 0===t&&void 0===n)throw new xe("Either an element with a src set or an URL must be provided");return n&&!t?this.decodeFromVideoUrlContinuously(n,s):this.decodeFromVideoElementContinuously(t,s)},i.prototype.decodeFromImageElement=function(t){if(!t)throw new xe("An image element must be provided.");this.reset();var n=this.prepareImageElement(t);return this.imageElement=n,this.isImageLoaded(n)?this.decodeOnce(n,!1,!0):this._decodeOnLoadImage(n)},i.prototype.decodeFromVideoElement=function(t){var n=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(n)},i.prototype.decodeFromVideoElementContinuously=function(t,n){var s=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(s,n)},i.prototype._decodeFromVideoElementSetup=function(t){if(!t)throw new xe("A video element must be provided.");this.reset();var n=this.prepareVideoElement(t);return this.videoElement=n,n},i.prototype.decodeFromImageUrl=function(t){if(!t)throw new xe("An URL must be provided.");this.reset();var n=this.prepareImageElement();this.imageElement=n;var s=this._decodeOnLoadImage(n);return n.src=t,s},i.prototype.decodeFromVideoUrl=function(t){if(!t)throw new xe("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),s=this.decodeFromVideoElement(n);return n.src=t,s},i.prototype.decodeFromVideoUrlContinuously=function(t,n){if(!t)throw new xe("An URL must be provided.");this.reset();var s=this.prepareVideoElement(),h=this.decodeFromVideoElementContinuously(s,n);return s.src=t,h},i.prototype._decodeOnLoadImage=function(t){var n=this;return new Promise(function(s,h){n.imageLoadedListener=function(){return n.decodeOnce(t,!1,!0).then(s,h)},t.addEventListener("load",n.imageLoadedListener)})},i.prototype._decodeOnLoadVideo=function(t){return ii(this,void 0,void 0,function(){return wn(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return n.sent(),[4,this.decodeOnce(t)];case 2:return[2,n.sent()]}})})},i.prototype._decodeOnLoadVideoContinuously=function(t,n){return ii(this,void 0,void 0,function(){return wn(this,function(s){switch(s.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return s.sent(),this.decodeContinuously(t,n),[2]}})})},i.prototype.isImageLoaded=function(t){return!(!t.complete||0===t.naturalWidth)},i.prototype.prepareImageElement=function(t){var n;return typeof t>"u"&&((n=document.createElement("img")).width=200,n.height=200),"string"==typeof t&&(n=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(n=t),n},i.prototype.prepareVideoElement=function(t){var n;return!t&&typeof document<"u"&&((n=document.createElement("video")).width=200,n.height=200),"string"==typeof t&&(n=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(n=t),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},i.prototype.decodeOnce=function(t,n,s){var h=this;void 0===n&&(n=!0),void 0===s&&(s=!0),this._stopAsyncDecode=!1;var g=function(a,o){if(h._stopAsyncDecode)return o(new Kt("Video stream has ended before any code could be detected.")),void(h._stopAsyncDecode=void 0);try{a(h.decode(t))}catch(R){if(n&&R instanceof Kt||(R instanceof ct||R instanceof fe)&&s)return setTimeout(g,h._timeBetweenDecodingAttempts,a,o);o(R)}};return new Promise(function(a,o){return g(a,o)})},i.prototype.decodeContinuously=function(t,n){var s=this;this._stopContinuousDecode=!1;var h=function(){if(s._stopContinuousDecode)s._stopContinuousDecode=void 0;else try{var g=s.decode(t);n(g,null),setTimeout(h,s.timeBetweenScansMillis)}catch(l){n(null,l),(l instanceof ct||l instanceof fe||l instanceof Kt)&&setTimeout(h,s._timeBetweenDecodingAttempts)}};h()},i.prototype.decode=function(t){var n=this.createBinaryBitmap(t);return this.decodeBitmap(n)},i.prototype.createBinaryBitmap=function(t){this.getCaptureCanvasContext(t),t instanceof HTMLVideoElement?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);var s=this.getCaptureCanvas(t),h=new Rr(s),g=new qn(h);return new We(g)},i.prototype.getCaptureCanvasContext=function(t){if(!this.captureCanvasContext){var n=this.getCaptureCanvas(t),s=void 0;try{s=n.getContext("2d",{willReadFrequently:!0})}catch(h){s=n.getContext("2d")}this.captureCanvasContext=s}return this.captureCanvasContext},i.prototype.getCaptureCanvas=function(t){if(!this.captureCanvas){var n=this.createCaptureCanvas(t);this.captureCanvas=n}return this.captureCanvas},i.prototype.drawFrameOnCanvas=function(t,n,s){void 0===n&&(n={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),void 0===s&&(s=this.captureCanvasContext),s.drawImage(t,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},i.prototype.drawImageOnCanvas=function(t,n,s){void 0===n&&(n={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),void 0===s&&(s=this.captureCanvasContext),s.drawImage(t,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},i.prototype.decodeBitmap=function(t){return this.reader.decode(t,this._hints)},i.prototype.createCaptureCanvas=function(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var s,h,n=document.createElement("canvas");return typeof t<"u"&&(t instanceof HTMLVideoElement?(s=t.videoWidth,h=t.videoHeight):t instanceof HTMLImageElement&&(s=t.naturalWidth||t.width,h=t.naturalHeight||t.height)),n.style.width=s+"px",n.style.height=h+"px",n.width=s,n.height=h,n},i.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(t){return t.stop()}),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()},i.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},i.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},i.prototype._destroyImageElement=function(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},i.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},i.prototype.addVideoSource=function(t,n){try{t.srcObject=n}catch(s){t.src=URL.createObjectURL(n)}},i.prototype.cleanVideoSource=function(t){try{t.srcObject=null}catch(n){t.src=""}this.videoElement.removeAttribute("src")},i}(),dr=function(){function i(t,n,s,h,g,a){void 0===s&&(s=null==n?0:8*n.length),void 0===a&&(a=Be.currentTimeMillis()),this.text=t,this.rawBytes=n,this.numBits=s,this.resultPoints=h,this.format=g,this.timestamp=a,this.text=t,this.rawBytes=n,this.numBits=null==s?null==n?0:8*n.length:s,this.resultPoints=h,this.format=g,this.resultMetadata=null,this.timestamp=null==a?Be.currentTimeMillis():a}return i.prototype.getText=function(){return this.text},i.prototype.getRawBytes=function(){return this.rawBytes},i.prototype.getNumBits=function(){return this.numBits},i.prototype.getResultPoints=function(){return this.resultPoints},i.prototype.getBarcodeFormat=function(){return this.format},i.prototype.getResultMetadata=function(){return this.resultMetadata},i.prototype.putMetadata=function(t,n){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(t,n)},i.prototype.putAllMetadata=function(t){null!==t&&(this.resultMetadata=null===this.resultMetadata?t:new Map(t))},i.prototype.addResultPoints=function(t){var n=this.resultPoints;if(null===n)this.resultPoints=t;else if(null!==t&&t.length>0){var s=new Array(n.length+t.length);Be.arraycopy(n,0,s,0,n.length),Be.arraycopy(t,0,s,n.length,t.length),this.resultPoints=s}},i.prototype.getTimestamp=function(){return this.timestamp},i.prototype.toString=function(){return this.text},i}();const jn=dr;var hr=(()=>(function(i){i[i.AZTEC=0]="AZTEC",i[i.CODABAR=1]="CODABAR",i[i.CODE_39=2]="CODE_39",i[i.CODE_93=3]="CODE_93",i[i.CODE_128=4]="CODE_128",i[i.DATA_MATRIX=5]="DATA_MATRIX",i[i.EAN_8=6]="EAN_8",i[i.EAN_13=7]="EAN_13",i[i.ITF=8]="ITF",i[i.MAXICODE=9]="MAXICODE",i[i.PDF_417=10]="PDF_417",i[i.QR_CODE=11]="QR_CODE",i[i.RSS_14=12]="RSS_14",i[i.RSS_EXPANDED=13]="RSS_EXPANDED",i[i.UPC_A=14]="UPC_A",i[i.UPC_E=15]="UPC_E",i[i.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(hr||(hr={})),hr))();const He=hr;var ot=(()=>(function(i){i[i.OTHER=0]="OTHER",i[i.ORIENTATION=1]="ORIENTATION",i[i.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",i[i.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",i[i.ISSUE_NUMBER=4]="ISSUE_NUMBER",i[i.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",i[i.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",i[i.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",i[i.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",i[i.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",i[i.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(ot||(ot={})),ot))();const ht=ot;var qt=function(){function i(t,n,s,h,g,a){void 0===g&&(g=-1),void 0===a&&(a=-1),this.rawBytes=t,this.text=n,this.byteSegments=s,this.ecLevel=h,this.structuredAppendSequenceNumber=g,this.structuredAppendParity=a,this.numBits=null==t?0:8*t.length}return i.prototype.getRawBytes=function(){return this.rawBytes},i.prototype.getNumBits=function(){return this.numBits},i.prototype.setNumBits=function(t){this.numBits=t},i.prototype.getText=function(){return this.text},i.prototype.getByteSegments=function(){return this.byteSegments},i.prototype.getECLevel=function(){return this.ecLevel},i.prototype.getErrorsCorrected=function(){return this.errorsCorrected},i.prototype.setErrorsCorrected=function(t){this.errorsCorrected=t},i.prototype.getErasures=function(){return this.erasures},i.prototype.setErasures=function(t){this.erasures=t},i.prototype.getOther=function(){return this.other},i.prototype.setOther=function(t){this.other=t},i.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},i.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},i.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},i}();const $t=qt;var Wn=function(){function i(){}return i.prototype.exp=function(t){return this.expTable[t]},i.prototype.log=function(t){if(0===t)throw new Ke;return this.logTable[t]},i.addOrSubtract=function(t,n){return t^n},i}();const Cr=Wn;var Or=function(){function i(t,n){if(0===n.length)throw new Ke;this.field=t;var s=n.length;if(s>1&&0===n[0]){for(var h=1;h<s&&0===n[h];)h++;h===s?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(s-h),Be.arraycopy(n,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return i.prototype.getCoefficients=function(){return this.coefficients},i.prototype.getDegree=function(){return this.coefficients.length-1},i.prototype.isZero=function(){return 0===this.coefficients[0]},i.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},i.prototype.evaluateAt=function(t){if(0===t)return this.getCoefficient(0);var s,n=this.coefficients;if(1===t){s=0;for(var h=0,g=n.length;h!==g;h++)s=Cr.addOrSubtract(s,n[h]);return s}s=n[0];var o=n.length,l=this.field;for(h=1;h<o;h++)s=Cr.addOrSubtract(l.multiply(t,s),n[h]);return s},i.prototype.addOrSubtract=function(t){if(!this.field.equals(t.field))throw new Ke("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;var n=this.coefficients,s=t.coefficients;if(n.length>s.length){var h=n;n=s,s=h}var g=new Int32Array(s.length),a=s.length-n.length;Be.arraycopy(s,0,g,0,a);for(var o=a;o<s.length;o++)g[o]=Cr.addOrSubtract(n[o-a],s[o]);return new i(this.field,g)},i.prototype.multiply=function(t){if(!this.field.equals(t.field))throw new Ke("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();for(var n=this.coefficients,s=n.length,h=t.coefficients,g=h.length,a=new Int32Array(s+g-1),o=this.field,l=0;l<s;l++)for(var v=n[l],E=0;E<g;E++)a[l+E]=Cr.addOrSubtract(a[l+E],o.multiply(v,h[E]));return new i(o,a)},i.prototype.multiplyScalar=function(t){if(0===t)return this.field.getZero();if(1===t)return this;for(var n=this.coefficients.length,s=this.field,h=new Int32Array(n),g=this.coefficients,a=0;a<n;a++)h[a]=s.multiply(g[a],t);return new i(s,h)},i.prototype.multiplyByMonomial=function(t,n){if(t<0)throw new Ke;if(0===n)return this.field.getZero();for(var s=this.coefficients,h=s.length,g=new Int32Array(h+t),a=this.field,o=0;o<h;o++)g[o]=a.multiply(s[o],n);return new i(a,g)},i.prototype.divide=function(t){if(!this.field.equals(t.field))throw new Ke("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new Ke("Divide by 0");for(var n=this.field,s=n.getZero(),h=this,g=t.getCoefficient(t.getDegree()),a=n.inverse(g);h.getDegree()>=t.getDegree()&&!h.isZero();){var o=h.getDegree()-t.getDegree(),l=n.multiply(h.getCoefficient(h.getDegree()),a),v=t.multiplyByMonomial(o,l),E=n.buildMonomial(o,l);s=s.addOrSubtract(E),h=h.addOrSubtract(v)}return[s,h]},i.prototype.toString=function(){for(var t="",n=this.getDegree();n>=0;n--){var s=this.getCoefficient(n);if(0!==s){if(s<0?(t+=" - ",s=-s):t.length>0&&(t+=" + "),0===n||1!==s){var h=this.field.log(s);0===h?t+="1":1===h?t+="a":(t+="a^",t+=h)}0!==n&&(1===n?t+="x":(t+="x^",t+=n))}}return t},i}();const Zr=Or;var fr=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),vi=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return fr(t,i),t.kind="ArithmeticException",t}($e);const St=vi;var vt=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Je=function(i){function t(n,s,h){var g=i.call(this)||this;g.primitive=n,g.size=s,g.generatorBase=h;for(var a=new Int32Array(s),o=1,l=0;l<s;l++)a[l]=o,(o*=2)>=s&&(o^=n,o&=s-1);g.expTable=a;var v=new Int32Array(s);for(l=0;l<s-1;l++)v[a[l]]=l;return g.logTable=v,g.zero=new Zr(g,Int32Array.from([0])),g.one=new Zr(g,Int32Array.from([1])),g}return vt(t,i),t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(n,s){if(n<0)throw new Ke;if(0===s)return this.zero;var h=new Int32Array(n+1);return h[0]=s,new Zr(this,h)},t.prototype.inverse=function(n){if(0===n)throw new St;return this.expTable[this.size-this.logTable[n]-1]},t.prototype.multiply=function(n,s){return 0===n||0===s?0:this.expTable[(this.logTable[n]+this.logTable[s])%(this.size-1)]},t.prototype.getSize=function(){return this.size},t.prototype.getGeneratorBase=function(){return this.generatorBase},t.prototype.toString=function(){return"GF(0x"+Le.toHexString(this.primitive)+","+this.size+")"},t.prototype.equals=function(n){return n===this},t.AZTEC_DATA_12=new t(4201,4096,1),t.AZTEC_DATA_10=new t(1033,1024,1),t.AZTEC_DATA_6=new t(67,64,1),t.AZTEC_PARAM=new t(19,16,1),t.QR_CODE_FIELD_256=new t(285,256,0),t.DATA_MATRIX_FIELD_256=new t(301,256,1),t.AZTEC_DATA_8=t.DATA_MATRIX_FIELD_256,t.MAXICODE_FIELD_64=t.AZTEC_DATA_6,t}(Cr);const wt=Je;var an=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Tn=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return an(t,i),t.kind="ReedSolomonException",t}($e);const sr=Tn;var fi=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Yr=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return fi(t,i),t.kind="IllegalStateException",t}($e);const Ei=Yr;var ti=function(){function i(t){this.field=t}return i.prototype.decode=function(t,n){for(var s=this.field,h=new Zr(s,t),g=new Int32Array(n),a=!0,o=0;o<n;o++){var l=h.evaluateAt(s.exp(o+s.getGeneratorBase()));g[g.length-1-o]=l,0!==l&&(a=!1)}if(!a){var v=new Zr(s,g),E=this.runEuclideanAlgorithm(s.buildMonomial(n,1),v,n),R=E[1],k=this.findErrorLocations(E[0]),Z=this.findErrorMagnitudes(R,k);for(o=0;o<k.length;o++){var se=t.length-1-s.log(k[o]);if(se<0)throw new sr("Bad error location");t[se]=wt.addOrSubtract(t[se],Z[o])}}},i.prototype.runEuclideanAlgorithm=function(t,n,s){if(t.getDegree()<n.getDegree()){var h=t;t=n,n=h}for(var g=this.field,a=t,o=n,l=g.getZero(),v=g.getOne();o.getDegree()>=(s/2|0);){var E=a,A=l;if(l=v,(a=o).isZero())throw new sr("r_{i-1} was zero");o=E;for(var R=g.getZero(),k=a.getCoefficient(a.getDegree()),Z=g.inverse(k);o.getDegree()>=a.getDegree()&&!o.isZero();){var se=o.getDegree()-a.getDegree(),Me=g.multiply(o.getCoefficient(o.getDegree()),Z);R=R.addOrSubtract(g.buildMonomial(se,Me)),o=o.addOrSubtract(a.multiplyByMonomial(se,Me))}if(v=R.multiply(l).addOrSubtract(A),o.getDegree()>=a.getDegree())throw new Ei("Division algorithm failed to reduce polynomial?")}var Ue=v.getCoefficient(0);if(0===Ue)throw new sr("sigmaTilde(0) was zero");var ze=g.inverse(Ue);return[v.multiplyScalar(ze),o.multiplyScalar(ze)]},i.prototype.findErrorLocations=function(t){var n=t.getDegree();if(1===n)return Int32Array.from([t.getCoefficient(1)]);for(var s=new Int32Array(n),h=0,g=this.field,a=1;a<g.getSize()&&h<n;a++)0===t.evaluateAt(a)&&(s[h]=g.inverse(a),h++);if(h!==n)throw new sr("Error locator degree does not match number of roots");return s},i.prototype.findErrorMagnitudes=function(t,n){for(var s=n.length,h=new Int32Array(s),g=this.field,a=0;a<s;a++){for(var o=g.inverse(n[a]),l=1,v=0;v<s;v++)if(a!==v){var E=g.multiply(n[v],o);l=g.multiply(l,1&E?-2&E:1|E)}h[a]=g.multiply(t.evaluateAt(o),g.inverse(l)),0!==g.getGeneratorBase()&&(h[a]=g.multiply(h[a],o))}return h},i}();const Lo=ti;var pi=(()=>(function(i){i[i.UPPER=0]="UPPER",i[i.LOWER=1]="LOWER",i[i.MIXED=2]="MIXED",i[i.DIGIT=3]="DIGIT",i[i.PUNCT=4]="PUNCT",i[i.BINARY=5]="BINARY"}(pi||(pi={})),pi))(),ki=function(){function i(){}return i.prototype.decode=function(t){this.ddata=t;var n=t.getBits(),s=this.extractBits(n),h=this.correctBits(s),g=i.convertBoolArrayToByteArray(h),a=i.getEncodedData(h),o=new $t(g,a,null,null);return o.setNumBits(h.length),o},i.highLevelDecode=function(t){return this.getEncodedData(t)},i.getEncodedData=function(t){for(var n=t.length,s=pi.UPPER,h=pi.UPPER,g="",a=0;a<n;)if(h===pi.BINARY){if(n-a<5)break;var o=i.readCode(t,a,5);if(a+=5,0===o){if(n-a<11)break;o=i.readCode(t,a,11)+31,a+=11}for(var l=0;l<o;l++){if(n-a<8){a=n;break}var v=i.readCode(t,a,8);g+=Nn.castAsNonUtf8Char(v),a+=8}h=s}else{var E=h===pi.DIGIT?4:5;if(n-a<E)break;v=i.readCode(t,a,E),a+=E;var A=i.getCharacter(h,v);A.startsWith("CTRL_")?(s=h,h=i.getTable(A.charAt(5)),"L"===A.charAt(6)&&(s=h)):(g+=A,h=s)}return g},i.getTable=function(t){switch(t){case"L":return pi.LOWER;case"P":return pi.PUNCT;case"M":return pi.MIXED;case"D":return pi.DIGIT;case"B":return pi.BINARY;default:return pi.UPPER}},i.getCharacter=function(t,n){switch(t){case pi.UPPER:return i.UPPER_TABLE[n];case pi.LOWER:return i.LOWER_TABLE[n];case pi.MIXED:return i.MIXED_TABLE[n];case pi.PUNCT:return i.PUNCT_TABLE[n];case pi.DIGIT:return i.DIGIT_TABLE[n];default:throw new Ei("Bad table")}},i.prototype.correctBits=function(t){var n,s;this.ddata.getNbLayers()<=2?(s=6,n=wt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(s=8,n=wt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(s=10,n=wt.AZTEC_DATA_10):(s=12,n=wt.AZTEC_DATA_12);var h=this.ddata.getNbDatablocks(),g=t.length/s;if(g<h)throw new fe;for(var a=t.length%s,o=new Int32Array(g),l=0;l<g;l++,a+=s)o[l]=i.readCode(t,a,s);try{new Lo(n).decode(o,g-h)}catch(Me){throw new fe(Me)}var E=(1<<s)-1,A=0;for(l=0;l<h;l++){if(0===(R=o[l])||R===E)throw new fe;(1===R||R===E-1)&&A++}var k=new Array(h*s-A),Z=0;for(l=0;l<h;l++){var R;if(1===(R=o[l])||R===E-1)k.fill(R>1,Z,Z+s-1),Z+=s-1;else for(var se=s-1;se>=0;--se)k[Z++]=0!=(R&1<<se)}return k},i.prototype.extractBits=function(t){var n=this.ddata.isCompact(),s=this.ddata.getNbLayers(),h=(n?11:14)+4*s,g=new Int32Array(h),a=new Array(this.totalBitsInLayer(s,n));if(n)for(var o=0;o<g.length;o++)g[o]=o;else{var l=h+1+2*Le.truncDivision(Le.truncDivision(h,2)-1,15),v=h/2,E=Le.truncDivision(l,2);for(o=0;o<v;o++){var A=o+Le.truncDivision(o,15);g[v-o-1]=E-A-1,g[v+o]=E+A+1}}o=0;for(var R=0;o<s;o++){for(var k=4*(s-o)+(n?9:12),Z=2*o,se=h-1-Z,Me=0;Me<k;Me++)for(var Ue=2*Me,ze=0;ze<2;ze++)a[R+Ue+ze]=t.get(g[Z+ze],g[Z+Me]),a[R+2*k+Ue+ze]=t.get(g[Z+Me],g[se-ze]),a[R+4*k+Ue+ze]=t.get(g[se-ze],g[se-Me]),a[R+6*k+Ue+ze]=t.get(g[se-Me],g[Z+ze]);R+=8*k}return a},i.readCode=function(t,n,s){for(var h=0,g=n;g<n+s;g++)h<<=1,t[g]&&(h|=1);return h},i.readByte=function(t,n){var s=t.length-n;return s>=8?i.readCode(t,n,8):i.readCode(t,n,s)<<8-s},i.convertBoolArrayToByteArray=function(t){for(var n=new Uint8Array((t.length+7)/8),s=0;s<n.length;s++)n[s]=i.readByte(t,8*s);return n},i.prototype.totalBitsInLayer=function(t,n){return((n?88:112)+16*t)*t},i.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],i.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],i.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],i.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],i.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],i}();const wo=ki;var Mr=function(){function i(){}return i.round=function(t){return isNaN(t)?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0},i.distance=function(t,n,s,h){var g=t-s,a=n-h;return Math.sqrt(g*g+a*a)},i.sum=function(t){for(var n=0,s=0,h=t.length;s!==h;s++)n+=t[s];return n},i}();const pr=Mr;var Oi=function(){function i(){}return i.floatToIntBits=function(t){return t},i.MAX_VALUE=Number.MAX_SAFE_INTEGER,i}();const Tr=Oi;var oi=function(){function i(t,n){this.x=t,this.y=n}return i.prototype.getX=function(){return this.x},i.prototype.getY=function(){return this.y},i.prototype.equals=function(t){return t instanceof i&&(this.x===t.x&&this.y===t.y)},i.prototype.hashCode=function(){return 31*Tr.floatToIntBits(this.x)+Tr.floatToIntBits(this.y)},i.prototype.toString=function(){return"("+this.x+","+this.y+")"},i.orderBestPatterns=function(t){var g,a,o,n=this.distance(t[0],t[1]),s=this.distance(t[1],t[2]),h=this.distance(t[0],t[2]);if(s>=n&&s>=h?(a=t[0],g=t[1],o=t[2]):h>=s&&h>=n?(a=t[1],g=t[0],o=t[2]):(a=t[2],g=t[0],o=t[1]),this.crossProductZ(g,a,o)<0){var l=g;g=o,o=l}t[0]=g,t[1]=a,t[2]=o},i.distance=function(t,n){return pr.distance(t.x,t.y,n.x,n.y)},i.crossProductZ=function(t,n,s){var h=n.x,g=n.y;return(s.x-h)*(t.y-g)-(s.y-g)*(t.x-h)},i}();const Ln=oi;var Hn=function(){function i(t,n){this.bits=t,this.points=n}return i.prototype.getBits=function(){return this.bits},i.prototype.getPoints=function(){return this.points},i}();const gr=Hn;var Gr=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Vi=function(i){function t(n,s,h,g,a){var o=i.call(this,n,s)||this;return o.compact=h,o.nbDatablocks=g,o.nbLayers=a,o}return Gr(t,i),t.prototype.getNbLayers=function(){return this.nbLayers},t.prototype.getNbDatablocks=function(){return this.nbDatablocks},t.prototype.isCompact=function(){return this.compact},t}(gr);const Zi=Vi;var Fi=function(){function i(t,n,s,h){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),null==n&&(n=i.INIT_SIZE),null==s&&(s=t.getWidth()/2|0),null==h&&(h=t.getHeight()/2|0);var g=n/2|0;if(this.leftInit=s-g,this.rightInit=s+g,this.upInit=h-g,this.downInit=h+g,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Kt}return i.prototype.detect=function(){for(var t=this.leftInit,n=this.rightInit,s=this.upInit,h=this.downInit,g=!1,a=!0,o=!1,l=!1,v=!1,E=!1,A=!1,R=this.width,k=this.height;a;){a=!1;for(var Z=!0;(Z||!l)&&n<R;)(Z=this.containsBlackPoint(s,h,n,!1))?(n++,a=!0,l=!0):l||n++;if(n>=R){g=!0;break}for(var se=!0;(se||!v)&&h<k;)(se=this.containsBlackPoint(t,n,h,!0))?(h++,a=!0,v=!0):v||h++;if(h>=k){g=!0;break}for(var Me=!0;(Me||!E)&&t>=0;)(Me=this.containsBlackPoint(s,h,t,!1))?(t--,a=!0,E=!0):E||t--;if(t<0){g=!0;break}for(var Ue=!0;(Ue||!A)&&s>=0;)(Ue=this.containsBlackPoint(t,n,s,!0))?(s--,a=!0,A=!0):A||s--;if(s<0){g=!0;break}a&&(o=!0)}if(!g&&o){for(var ze=n-t,Ct=null,Mt=1;null===Ct&&Mt<ze;Mt++)Ct=this.getBlackPointOnSegment(t,h-Mt,t+Mt,h);if(null==Ct)throw new Kt;var gn=null;for(Mt=1;null===gn&&Mt<ze;Mt++)gn=this.getBlackPointOnSegment(t,s+Mt,t+Mt,s);if(null==gn)throw new Kt;var Rn=null;for(Mt=1;null===Rn&&Mt<ze;Mt++)Rn=this.getBlackPointOnSegment(n,s+Mt,n-Mt,s);if(null==Rn)throw new Kt;var $n=null;for(Mt=1;null===$n&&Mt<ze;Mt++)$n=this.getBlackPointOnSegment(n,h-Mt,n-Mt,h);if(null==$n)throw new Kt;return this.centerEdges($n,Ct,Rn,gn)}throw new Kt},i.prototype.getBlackPointOnSegment=function(t,n,s,h){for(var g=pr.round(pr.distance(t,n,s,h)),a=(s-t)/g,o=(h-n)/g,l=this.image,v=0;v<g;v++){var E=pr.round(t+v*a),A=pr.round(n+v*o);if(l.get(E,A))return new Ln(E,A)}return null},i.prototype.centerEdges=function(t,n,s,h){var g=t.getX(),a=t.getY(),o=n.getX(),l=n.getY(),v=s.getX(),E=s.getY(),A=h.getX(),R=h.getY(),k=i.CORR;return g<this.width/2?[new Ln(A-k,R+k),new Ln(o+k,l+k),new Ln(v-k,E-k),new Ln(g+k,a-k)]:[new Ln(A+k,R+k),new Ln(o+k,l-k),new Ln(v-k,E+k),new Ln(g-k,a-k)]},i.prototype.containsBlackPoint=function(t,n,s,h){var g=this.image;if(h){for(var a=t;a<=n;a++)if(g.get(a,s))return!0}else for(var o=t;o<=n;o++)if(g.get(s,o))return!0;return!1},i.INIT_SIZE=10,i.CORR=1,i}();const Se=Fi;var je=function(){function i(){}return i.checkAndNudgePoints=function(t,n){for(var s=t.getWidth(),h=t.getHeight(),g=!0,a=0;a<n.length&&g;a+=2){var o=Math.floor(n[a]),l=Math.floor(n[a+1]);if(o<-1||o>s||l<-1||l>h)throw new Kt;g=!1,-1===o?(n[a]=0,g=!0):o===s&&(n[a]=s-1,g=!0),-1===l?(n[a+1]=0,g=!0):l===h&&(n[a+1]=h-1,g=!0)}for(g=!0,a=n.length-2;a>=0&&g;a-=2){if(o=Math.floor(n[a]),l=Math.floor(n[a+1]),o<-1||o>s||l<-1||l>h)throw new Kt;g=!1,-1===o?(n[a]=0,g=!0):o===s&&(n[a]=s-1,g=!0),-1===l?(n[a+1]=0,g=!0):l===h&&(n[a+1]=h-1,g=!0)}},i}();const Rt=je;var Ot=function(){function i(t,n,s,h,g,a,o,l,v){this.a11=t,this.a21=n,this.a31=s,this.a12=h,this.a22=g,this.a32=a,this.a13=o,this.a23=l,this.a33=v}return i.quadrilateralToQuadrilateral=function(t,n,s,h,g,a,o,l,v,E,A,R,k,Z,se,Me){var Ue=i.quadrilateralToSquare(t,n,s,h,g,a,o,l);return i.squareToQuadrilateral(v,E,A,R,k,Z,se,Me).times(Ue)},i.prototype.transformPoints=function(t){for(var n=t.length,s=this.a11,h=this.a12,g=this.a13,a=this.a21,o=this.a22,l=this.a23,v=this.a31,E=this.a32,A=this.a33,R=0;R<n;R+=2){var k=t[R],Z=t[R+1],se=g*k+l*Z+A;t[R]=(s*k+a*Z+v)/se,t[R+1]=(h*k+o*Z+E)/se}},i.prototype.transformPointsWithValues=function(t,n){for(var s=this.a11,h=this.a12,g=this.a13,a=this.a21,o=this.a22,l=this.a23,v=this.a31,E=this.a32,A=this.a33,R=t.length,k=0;k<R;k++){var Z=t[k],se=n[k],Me=g*Z+l*se+A;t[k]=(s*Z+a*se+v)/Me,n[k]=(h*Z+o*se+E)/Me}},i.squareToQuadrilateral=function(t,n,s,h,g,a,o,l){var v=t-s+g-o,E=n-h+a-l;if(0===v&&0===E)return new i(s-t,g-s,t,h-n,a-h,n,0,0,1);var A=s-g,R=o-g,k=h-a,Z=l-a,se=A*Z-R*k,Me=(v*Z-R*E)/se,Ue=(A*E-v*k)/se;return new i(s-t+Me*s,o-t+Ue*o,t,h-n+Me*h,l-n+Ue*l,n,Me,Ue,1)},i.quadrilateralToSquare=function(t,n,s,h,g,a,o,l){return i.squareToQuadrilateral(t,n,s,h,g,a,o,l).buildAdjoint()},i.prototype.buildAdjoint=function(){return new i(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},i.prototype.times=function(t){return new i(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)},i}();const Bt=Ot;var Ge=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),xt=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return Ge(t,i),t.prototype.sampleGrid=function(n,s,h,g,a,o,l,v,E,A,R,k,Z,se,Me,Ue,ze,Ct,Mt){var gn=Bt.quadrilateralToQuadrilateral(g,a,o,l,v,E,A,R,k,Z,se,Me,Ue,ze,Ct,Mt);return this.sampleGridWithTransform(n,s,h,gn)},t.prototype.sampleGridWithTransform=function(n,s,h,g){if(s<=0||h<=0)throw new Kt;for(var a=new Ir(s,h),o=new Float32Array(2*s),l=0;l<h;l++){for(var v=o.length,E=l+.5,A=0;A<v;A+=2)o[A]=A/2+.5,o[A+1]=E;g.transformPoints(o),Rt.checkAndNudgePoints(n,o);try{for(A=0;A<v;A+=2)n.get(Math.floor(o[A]),Math.floor(o[A+1]))&&a.set(A/2,l)}catch(R){throw new Kt}}return a},t}(Rt);const Ut=xt;var Zt=function(){function i(){}return i.setGridSampler=function(t){i.gridSampler=t},i.getInstance=function(){return i.gridSampler},i.gridSampler=new Ut,i}();const on=Zt;var In=function(){function i(t,n){this.x=t,this.y=n}return i.prototype.toResultPoint=function(){return new Ln(this.getX(),this.getY())},i.prototype.getX=function(){return this.x},i.prototype.getY=function(){return this.y},i}(),Zn=function(){function i(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}return i.prototype.detect=function(){return this.detectMirror(!1)},i.prototype.detectMirror=function(t){var n=this.getMatrixCenter(),s=this.getBullsEyeCorners(n);if(t){var h=s[0];s[0]=s[2],s[2]=h}this.extractParameters(s);var g=this.sampleGrid(this.image,s[this.shift%4],s[(this.shift+1)%4],s[(this.shift+2)%4],s[(this.shift+3)%4]),a=this.getMatrixCornerPoints(s);return new Zi(g,a,this.compact,this.nbDataBlocks,this.nbLayers)},i.prototype.extractParameters=function(t){if(!(this.isValidPoint(t[0])&&this.isValidPoint(t[1])&&this.isValidPoint(t[2])&&this.isValidPoint(t[3])))throw new Kt;var n=2*this.nbCenterLayers,s=new Int32Array([this.sampleLine(t[0],t[1],n),this.sampleLine(t[1],t[2],n),this.sampleLine(t[2],t[3],n),this.sampleLine(t[3],t[0],n)]);this.shift=this.getRotation(s,n);for(var h=0,g=0;g<4;g++){var a=s[(this.shift+g)%4];this.compact?(h<<=7,h+=a>>1&127):(h<<=10,h+=(a>>2&992)+(a>>1&31))}var o=this.getCorrectedParameterData(h,this.compact);this.compact?(this.nbLayers=1+(o>>6),this.nbDataBlocks=1+(63&o)):(this.nbLayers=1+(o>>11),this.nbDataBlocks=1+(2047&o))},i.prototype.getRotation=function(t,n){var s=0;t.forEach(function(g,a,o){s=(g>>n-2<<1)+(1&g)+(s<<3)}),s=((1&s)<<11)+(s>>1);for(var h=0;h<4;h++)if(Le.bitCount(s^this.EXPECTED_CORNER_BITS[h])<=2)return h;throw new Kt},i.prototype.getCorrectedParameterData=function(t,n){var s,h;n?(s=7,h=2):(s=10,h=4);for(var g=s-h,a=new Int32Array(s),o=s-1;o>=0;--o)a[o]=15&t,t>>=4;try{new Lo(wt.AZTEC_PARAM).decode(a,g)}catch(E){throw new Kt}var v=0;for(o=0;o<h;o++)v=(v<<4)+a[o];return v},i.prototype.getBullsEyeCorners=function(t){var n=t,s=t,h=t,g=t,a=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var o=this.getFirstDifferent(n,a,1,-1),l=this.getFirstDifferent(s,a,1,1),v=this.getFirstDifferent(h,a,-1,1),E=this.getFirstDifferent(g,a,-1,-1);if(this.nbCenterLayers>2){var A=this.distancePoint(E,o)*this.nbCenterLayers/(this.distancePoint(g,n)*(this.nbCenterLayers+2));if(A<.75||A>1.25||!this.isWhiteOrBlackRectangle(o,l,v,E))break}n=o,s=l,h=v,g=E,a=!a}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new Kt;this.compact=5===this.nbCenterLayers;var R=new Ln(n.getX()+.5,n.getY()-.5),k=new Ln(s.getX()+.5,s.getY()+.5),Z=new Ln(h.getX()-.5,h.getY()+.5),se=new Ln(g.getX()-.5,g.getY()-.5);return this.expandSquare([R,k,Z,se],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},i.prototype.getMatrixCenter=function(){var t,n,s,h;try{t=(g=new Se(this.image).detect())[0],n=g[1],s=g[2],h=g[3]}catch(E){var a=this.image.getWidth()/2,o=this.image.getHeight()/2;t=this.getFirstDifferent(new In(a+7,o-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new In(a+7,o+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new In(a-7,o+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new In(a-7,o-7),!1,-1,-1).toResultPoint()}var l=pr.round((t.getX()+h.getX()+n.getX()+s.getX())/4),v=pr.round((t.getY()+h.getY()+n.getY()+s.getY())/4);try{var g;t=(g=new Se(this.image,15,l,v).detect())[0],n=g[1],s=g[2],h=g[3]}catch(E){t=this.getFirstDifferent(new In(l+7,v-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new In(l+7,v+7),!1,1,1).toResultPoint(),s=this.getFirstDifferent(new In(l-7,v+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new In(l-7,v-7),!1,-1,-1).toResultPoint()}return l=pr.round((t.getX()+h.getX()+n.getX()+s.getX())/4),v=pr.round((t.getY()+h.getY()+n.getY()+s.getY())/4),new In(l,v)},i.prototype.getMatrixCornerPoints=function(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())},i.prototype.sampleGrid=function(t,n,s,h,g){var a=on.getInstance(),o=this.getDimension(),l=o/2-this.nbCenterLayers,v=o/2+this.nbCenterLayers;return a.sampleGrid(t,o,o,l,l,v,l,v,v,l,v,n.getX(),n.getY(),s.getX(),s.getY(),h.getX(),h.getY(),g.getX(),g.getY())},i.prototype.sampleLine=function(t,n,s){for(var h=0,g=this.distanceResultPoint(t,n),a=g/s,o=t.getX(),l=t.getY(),v=a*(n.getX()-t.getX())/g,E=a*(n.getY()-t.getY())/g,A=0;A<s;A++)this.image.get(pr.round(o+A*v),pr.round(l+A*E))&&(h|=1<<s-A-1);return h},i.prototype.isWhiteOrBlackRectangle=function(t,n,s,h){t=new In(t.getX()-3,t.getY()+3),n=new In(n.getX()-3,n.getY()-3),s=new In(s.getX()+3,s.getY()-3),h=new In(h.getX()+3,h.getY()+3);var a=this.getColor(h,t);if(0===a)return!1;var o=this.getColor(t,n);return o===a&&(o=this.getColor(n,s))===a&&(o=this.getColor(s,h))===a},i.prototype.getColor=function(t,n){for(var s=this.distancePoint(t,n),h=(n.getX()-t.getX())/s,g=(n.getY()-t.getY())/s,a=0,o=t.getX(),l=t.getY(),v=this.image.get(t.getX(),t.getY()),E=Math.ceil(s),A=0;A<E;A++)l+=g,this.image.get(pr.round(o+=h),pr.round(l))!==v&&a++;var R=a/s;return R>.1&&R<.9?0:R<=.1===v?1:-1},i.prototype.getFirstDifferent=function(t,n,s,h){for(var g=t.getX()+s,a=t.getY()+h;this.isValid(g,a)&&this.image.get(g,a)===n;)g+=s,a+=h;for(g-=s,a-=h;this.isValid(g,a)&&this.image.get(g,a)===n;)g+=s;for(g-=s;this.isValid(g,a)&&this.image.get(g,a)===n;)a+=h;return new In(g,a-=h)},i.prototype.expandSquare=function(t,n,s){var h=s/(2*n),g=t[0].getX()-t[2].getX(),a=t[0].getY()-t[2].getY(),o=(t[0].getX()+t[2].getX())/2,l=(t[0].getY()+t[2].getY())/2,v=new Ln(o+h*g,l+h*a),E=new Ln(o-h*g,l-h*a);return g=t[1].getX()-t[3].getX(),a=t[1].getY()-t[3].getY(),o=(t[1].getX()+t[3].getX())/2,l=(t[1].getY()+t[3].getY())/2,[v,new Ln(o+h*g,l+h*a),E,new Ln(o-h*g,l-h*a)]},i.prototype.isValid=function(t,n){return t>=0&&t<this.image.getWidth()&&n>0&&n<this.image.getHeight()},i.prototype.isValidPoint=function(t){var n=pr.round(t.getX()),s=pr.round(t.getY());return this.isValid(n,s)},i.prototype.distancePoint=function(t,n){return pr.distance(t.getX(),t.getY(),n.getX(),n.getY())},i.prototype.distanceResultPoint=function(t,n){return pr.distance(t.getX(),t.getY(),n.getX(),n.getY())},i.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Le.truncDivision(this.nbLayers-4,8)+1)+15},i}();const Jn=Zn;var ci=function(){function i(){}return i.prototype.decode=function(t,n){void 0===n&&(n=null);var s=null,h=new Jn(t.getBlackMatrix()),g=null,a=null;try{g=(o=h.detectMirror(!1)).getPoints(),this.reportFoundResultPoints(n,g),a=(new wo).decode(o)}catch(A){s=A}if(null==a)try{var o;g=(o=h.detectMirror(!0)).getPoints(),this.reportFoundResultPoints(n,g),a=(new wo).decode(o)}catch(A){throw null!=s?s:A}var l=new jn(a.getText(),a.getRawBytes(),a.getNumBits(),g,He.AZTEC,Be.currentTimeMillis()),v=a.getByteSegments();null!=v&&l.putMetadata(ht.BYTE_SEGMENTS,v);var E=a.getECLevel();return null!=E&&l.putMetadata(ht.ERROR_CORRECTION_LEVEL,E),l},i.prototype.reportFoundResultPoints=function(t,n){if(null!=t){var s=t.get(te.NEED_RESULT_POINT_CALLBACK);null!=s&&n.forEach(function(h,g,a){s.foundPossibleResultPoint(h)})}},i.prototype.reset=function(){},i}();const Kr=ci;var _t=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Ft=(function(i){_t(function t(n){return void 0===n&&(n=500),i.call(this,new Kr,n)||this},i)}(Un),function(){function i(){}return i.prototype.decode=function(t,n){try{return this.doDecode(t,n)}catch(A){if(n&&!0===n.get(te.TRY_HARDER)&&t.isRotateSupported()){var h=t.rotateCounterClockwise(),g=this.doDecode(h,n),a=g.getResultMetadata(),o=270;null!==a&&!0===a.get(ht.ORIENTATION)&&(o+=a.get(ht.ORIENTATION)%360),g.putMetadata(ht.ORIENTATION,o);var l=g.getResultPoints();if(null!==l)for(var v=h.getHeight(),E=0;E<l.length;E++)l[E]=new Ln(v-l[E].getY()-1,l[E].getX());return g}throw new Kt}},i.prototype.reset=function(){},i.prototype.doDecode=function(t,n){var l,s=t.getWidth(),h=t.getHeight(),g=new Ze(s),a=n&&!0===n.get(te.TRY_HARDER),o=Math.max(1,h>>(a?8:5));l=a?h:15;for(var v=Math.trunc(h/2),E=0;E<l;E++){var A=Math.trunc((E+1)/2),k=v+o*(0==(1&E)?A:-A);if(k<0||k>=h)break;try{g=t.getBlackRow(k,g)}catch(ze){continue}for(var Z=function(ze){if(1===ze&&(g.reverse(),n&&!0===n.get(te.NEED_RESULT_POINT_CALLBACK))){var Ct=new Map;n.forEach(function(Rn,$n){return Ct.set($n,Rn)}),Ct.delete(te.NEED_RESULT_POINT_CALLBACK),n=Ct}try{var Mt=se.decodeRow(k,g,n);if(1===ze){Mt.putMetadata(ht.ORIENTATION,180);var gn=Mt.getResultPoints();null!==gn&&(gn[0]=new Ln(s-gn[0].getX()-1,gn[0].getY()),gn[1]=new Ln(s-gn[1].getX()-1,gn[1].getY()))}return{value:Mt}}catch(Rn){}},se=this,Me=0;Me<2;Me++){var Ue=Z(Me);if("object"==typeof Ue)return Ue.value}}throw new Kt},i.recordPattern=function(t,n,s){for(var h=s.length,g=0;g<h;g++)s[g]=0;var a=t.getSize();if(n>=a)throw new Kt;for(var o=!t.get(n),l=0,v=n;v<a;){if(t.get(v)!==o)s[l]++;else{if(++l===h)break;s[l]=1,o=!o}v++}if(l!==h&&(l!==h-1||v!==a))throw new Kt},i.recordPatternInReverse=function(t,n,s){for(var h=s.length,g=t.get(n);n>0&&h>=0;)t.get(--n)!==g&&(h--,g=!g);if(h>=0)throw new Kt;i.recordPattern(t,n+1,s)},i.patternMatchVariance=function(t,n,s){for(var h=t.length,g=0,a=0,o=0;o<h;o++)g+=t[o],a+=n[o];if(g<a)return Number.POSITIVE_INFINITY;var l=g/a;s*=l;for(var v=0,E=0;E<h;E++){var A=t[E],R=n[E]*l,k=A>R?A-R:R-A;if(k>s)return Number.POSITIVE_INFINITY;v+=k}return v/g},i}());const Ht=Ft;var fn=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Sn=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return fn(t,i),t.findStartPattern=function(n){for(var s=n.getSize(),h=n.getNextSet(0),g=0,a=Int32Array.from([0,0,0,0,0,0]),o=h,l=!1,E=h;E<s;E++)if(n.get(E)!==l)a[g]++;else{if(5===g){for(var A=t.MAX_AVG_VARIANCE,R=-1,k=t.CODE_START_A;k<=t.CODE_START_C;k++){var Z=Ht.patternMatchVariance(a,t.CODE_PATTERNS[k],t.MAX_INDIVIDUAL_VARIANCE);Z<A&&(A=Z,R=k)}if(R>=0&&n.isRange(Math.max(0,o-(E-o)/2),o,!1))return Int32Array.from([o,E,R]);o+=a[0]+a[1],(a=a.slice(2,a.length-1))[g-1]=0,a[g]=0,g--}else g++;a[g]=1,l=!l}throw new Kt},t.decodeCode=function(n,s,h){Ht.recordPattern(n,h,s);for(var g=t.MAX_AVG_VARIANCE,a=-1,o=0;o<t.CODE_PATTERNS.length;o++){var v=this.patternMatchVariance(s,t.CODE_PATTERNS[o],t.MAX_INDIVIDUAL_VARIANCE);v<g&&(g=v,a=o)}if(a>=0)return a;throw new Kt},t.prototype.decodeRow=function(n,s,h){var E,g=h&&!0===h.get(te.ASSUME_GS1),a=t.findStartPattern(s),o=a[2],l=0,v=new Uint8Array(20);switch(v[l++]=o,o){case t.CODE_START_A:E=t.CODE_CODE_A;break;case t.CODE_START_B:E=t.CODE_CODE_B;break;case t.CODE_START_C:E=t.CODE_CODE_C;break;default:throw new fe}for(var A=!1,R=!1,k="",Z=a[0],se=a[1],Me=Int32Array.from([0,0,0,0,0,0]),Ue=0,ze=0,Ct=o,Mt=0,gn=!0,Rn=!1,$n=!1;!A;){var Sr=R;switch(R=!1,Ue=ze,ze=t.decodeCode(s,Me,se),v[l++]=ze,ze!==t.CODE_STOP&&(gn=!0),ze!==t.CODE_STOP&&(Ct+=++Mt*ze),Z=se,se+=Me.reduce(function(ul,ql){return ul+ql},0),ze){case t.CODE_START_A:case t.CODE_START_B:case t.CODE_START_C:throw new fe}switch(E){case t.CODE_CODE_A:if(ze<64)k+=String.fromCharCode($n===Rn?" ".charCodeAt(0)+ze:" ".charCodeAt(0)+ze+128),$n=!1;else if(ze<96)k+=String.fromCharCode($n===Rn?ze-64:ze+64),$n=!1;else switch(ze!==t.CODE_STOP&&(gn=!1),ze){case t.CODE_FNC_1:g&&(k+=0===k.length?"]C1":String.fromCharCode(29));break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_A:!Rn&&$n?(Rn=!0,$n=!1):Rn&&$n?(Rn=!1,$n=!1):$n=!0;break;case t.CODE_SHIFT:R=!0,E=t.CODE_CODE_B;break;case t.CODE_CODE_B:E=t.CODE_CODE_B;break;case t.CODE_CODE_C:E=t.CODE_CODE_C;break;case t.CODE_STOP:A=!0}break;case t.CODE_CODE_B:if(ze<96)k+=String.fromCharCode($n===Rn?" ".charCodeAt(0)+ze:" ".charCodeAt(0)+ze+128),$n=!1;else switch(ze!==t.CODE_STOP&&(gn=!1),ze){case t.CODE_FNC_1:g&&(k+=0===k.length?"]C1":String.fromCharCode(29));break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_B:!Rn&&$n?(Rn=!0,$n=!1):Rn&&$n?(Rn=!1,$n=!1):$n=!0;break;case t.CODE_SHIFT:R=!0,E=t.CODE_CODE_A;break;case t.CODE_CODE_A:E=t.CODE_CODE_A;break;case t.CODE_CODE_C:E=t.CODE_CODE_C;break;case t.CODE_STOP:A=!0}break;case t.CODE_CODE_C:if(ze<100)ze<10&&(k+="0"),k+=ze;else switch(ze!==t.CODE_STOP&&(gn=!1),ze){case t.CODE_FNC_1:g&&(k+=0===k.length?"]C1":String.fromCharCode(29));break;case t.CODE_CODE_A:E=t.CODE_CODE_A;break;case t.CODE_CODE_B:E=t.CODE_CODE_B;break;case t.CODE_STOP:A=!0}}Sr&&(E=E===t.CODE_CODE_A?t.CODE_CODE_B:t.CODE_CODE_A)}var ni=se-Z;if(se=s.getNextUnset(se),!s.isRange(se,Math.min(s.getSize(),se+(se-Z)/2),!1))throw new Kt;if((Ct-=Mt*Ue)%103!==Ue)throw new ct;var di=k.length;if(0===di)throw new Kt;di>0&&gn&&(k=k.substring(0,E===t.CODE_CODE_C?di-2:di-1));for(var sa=(a[1]+a[0])/2,Di=Z+ni/2,Ts=v.length,Ru=new Uint8Array(Ts),sc=0;sc<Ts;sc++)Ru[sc]=v[sc];var Kl=[new Ln(sa,n),new Ln(Di,n)];return new jn(k,Ru,0,Kl,He.CODE_128,(new Date).getTime())},t.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],t.MAX_AVG_VARIANCE=.25,t.MAX_INDIVIDUAL_VARIANCE=.7,t.CODE_SHIFT=98,t.CODE_CODE_C=99,t.CODE_CODE_B=100,t.CODE_CODE_A=101,t.CODE_FNC_1=102,t.CODE_FNC_2=97,t.CODE_FNC_3=96,t.CODE_FNC_4_A=101,t.CODE_FNC_4_B=100,t.CODE_START_A=103,t.CODE_START_B=104,t.CODE_START_C=105,t.CODE_STOP=106,t}(Ht);const er=Sn;var mr=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),hi=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Yi=function(i){function t(n,s){void 0===n&&(n=!1),void 0===s&&(s=!1);var h=i.call(this)||this;return h.usingCheckDigit=n,h.extendedMode=s,h.decodeRowResult="",h.counters=new Int32Array(9),h}return mr(t,i),t.prototype.decodeRow=function(n,s,h){var g,a,o,l,v=this.counters;v.fill(0),this.decodeRowResult="";var k,Z,E=t.findAsteriskPattern(s,v),A=s.getNextSet(E[1]),R=s.getSize();do{t.recordPattern(s,A,v);var se=t.toNarrowWidePattern(v);if(se<0)throw new Kt;k=t.patternToChar(se),this.decodeRowResult+=k,Z=A;try{for(var Me=(g=void 0,hi(v)),Ue=Me.next();!Ue.done;Ue=Me.next())A+=Ue.value}catch(Ts){g={error:Ts}}finally{try{Ue&&!Ue.done&&(a=Me.return)&&a.call(Me)}finally{if(g)throw g.error}}A=s.getNextSet(A)}while("*"!==k);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var di,Ct=0;try{for(var Mt=hi(v),gn=Mt.next();!gn.done;gn=Mt.next())Ct+=gn.value}catch(Ts){o={error:Ts}}finally{try{gn&&!gn.done&&(l=Mt.return)&&l.call(Mt)}finally{if(o)throw o.error}}if(A!==R&&2*(A-Z-Ct)<Ct)throw new Kt;if(this.usingCheckDigit){for(var $n=this.decodeRowResult.length-1,Sr=0,ni=0;ni<$n;ni++)Sr+=t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ni));if(this.decodeRowResult.charAt($n)!==t.ALPHABET_STRING.charAt(Sr%43))throw new ct;this.decodeRowResult=this.decodeRowResult.substring(0,$n)}if(0===this.decodeRowResult.length)throw new Kt;di=this.extendedMode?t.decodeExtended(this.decodeRowResult):this.decodeRowResult;var Di=Z+Ct/2;return new jn(di,null,0,[new Ln((E[1]+E[0])/2,n),new Ln(Di,n)],He.CODE_39,(new Date).getTime())},t.findAsteriskPattern=function(n,s){for(var h=n.getSize(),g=n.getNextSet(0),a=0,o=g,l=!1,v=s.length,E=g;E<h;E++)if(n.get(E)!==l)s[a]++;else{if(a===v-1){if(this.toNarrowWidePattern(s)===t.ASTERISK_ENCODING&&n.isRange(Math.max(0,o-Math.floor((E-o)/2)),o,!1))return[o,E];o+=s[0]+s[1],s.copyWithin(0,2,2+a-1),s[a-1]=0,s[a]=0,a--}else a++;s[a]=1,l=!l}throw new Kt},t.toNarrowWidePattern=function(n){var s,h,o,g=n.length,a=0;do{var l=2147483647;try{for(var v=(s=void 0,hi(n)),E=v.next();!E.done;E=v.next())(A=E.value)<l&&A>a&&(l=A)}catch(se){s={error:se}}finally{try{E&&!E.done&&(h=v.return)&&h.call(v)}finally{if(s)throw s.error}}a=l,o=0;for(var R=0,k=0,Z=0;Z<g;Z++)(A=n[Z])>a&&(k|=1<<g-1-Z,o++,R+=A);if(3===o){for(Z=0;Z<g&&o>0;Z++){var A;if((A=n[Z])>a&&(o--,2*A>=R))return-1}return k}}while(o>3);return-1},t.patternToChar=function(n){for(var s=0;s<t.CHARACTER_ENCODINGS.length;s++)if(t.CHARACTER_ENCODINGS[s]===n)return t.ALPHABET_STRING.charAt(s);if(n===t.ASTERISK_ENCODING)return"*";throw new Kt},t.decodeExtended=function(n){for(var s=n.length,h="",g=0;g<s;g++){var a=n.charAt(g);if("+"===a||"$"===a||"%"===a||"/"===a){var o=n.charAt(g+1),l="\0";switch(a){case"+":if(!(o>="A"&&o<="Z"))throw new fe;l=String.fromCharCode(o.charCodeAt(0)+32);break;case"$":if(!(o>="A"&&o<="Z"))throw new fe;l=String.fromCharCode(o.charCodeAt(0)-64);break;case"%":if(o>="A"&&o<="E")l=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")l=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")l=String.fromCharCode(o.charCodeAt(0)+43);else if("U"===o)l="\0";else if("V"===o)l="@";else if("W"===o)l="`";else{if("X"!==o&&"Y"!==o&&"Z"!==o)throw new fe;l="\x7f"}break;case"/":if(o>="A"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)-32);else{if("Z"!==o)throw new fe;l=":"}}h+=l,g++}else h+=a}return h},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],t.ASTERISK_ENCODING=148,t}(Ht);const ji=Yi;var uo=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Xr=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Qr=function(i){function t(){var n=i.call(this)||this;return n.decodeRowResult="",n.counters=new Int32Array(6),n}return uo(t,i),t.prototype.decodeRow=function(n,s,h){var g,a,o,l,k,Z,v=this.findAsteriskPattern(s),E=s.getNextSet(v[1]),A=s.getSize(),R=this.counters;R.fill(0),this.decodeRowResult="";do{t.recordPattern(s,E,R);var se=this.toPattern(R);if(se<0)throw new Kt;k=this.patternToChar(se),this.decodeRowResult+=k,Z=E;try{for(var Me=(g=void 0,Xr(R)),Ue=Me.next();!Ue.done;Ue=Me.next())E+=Ue.value}catch(ni){g={error:ni}}finally{try{Ue&&!Ue.done&&(a=Me.return)&&a.call(Me)}finally{if(g)throw g.error}}E=s.getNextSet(E)}while("*"!==k);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var Ct=0;try{for(var Mt=Xr(R),gn=Mt.next();!gn.done;gn=Mt.next())Ct+=gn.value}catch(ni){o={error:ni}}finally{try{gn&&!gn.done&&(l=Mt.return)&&l.call(Mt)}finally{if(o)throw o.error}}if(E===A||!s.get(E))throw new Kt;if(this.decodeRowResult.length<2)throw new Kt;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var Rn=this.decodeExtended(this.decodeRowResult),Sr=Z+Ct/2;return new jn(Rn,null,0,[new Ln((v[1]+v[0])/2,n),new Ln(Sr,n)],He.CODE_93,(new Date).getTime())},t.prototype.findAsteriskPattern=function(n){var s=n.getSize(),h=n.getNextSet(0);this.counters.fill(0);for(var g=this.counters,a=h,o=!1,l=g.length,v=0,E=h;E<s;E++)if(n.get(E)!==o)g[v]++;else{if(v===l-1){if(this.toPattern(g)===t.ASTERISK_ENCODING)return new Int32Array([a,E]);a+=g[0]+g[1],g.copyWithin(0,2,2+v-1),g[v-1]=0,g[v]=0,v--}else v++;g[v]=1,o=!o}throw new Kt},t.prototype.toPattern=function(n){var s,h,g=0;try{for(var a=Xr(n),o=a.next();!o.done;o=a.next())g+=o.value}catch(Z){s={error:Z}}finally{try{o&&!o.done&&(h=a.return)&&h.call(a)}finally{if(s)throw s.error}}for(var v=0,E=n.length,A=0;A<E;A++){var R=Math.round(9*n[A]/g);if(R<1||R>4)return-1;if(1&A)v<<=R;else for(var k=0;k<R;k++)v=v<<1|1}return v},t.prototype.patternToChar=function(n){for(var s=0;s<t.CHARACTER_ENCODINGS.length;s++)if(t.CHARACTER_ENCODINGS[s]===n)return t.ALPHABET_STRING.charAt(s);throw new Kt},t.prototype.decodeExtended=function(n){for(var s=n.length,h="",g=0;g<s;g++){var a=n.charAt(g);if(a>="a"&&a<="d"){if(g>=s-1)throw new fe;var o=n.charAt(g+1),l="\0";switch(a){case"d":if(!(o>="A"&&o<="Z"))throw new fe;l=String.fromCharCode(o.charCodeAt(0)+32);break;case"a":if(!(o>="A"&&o<="Z"))throw new fe;l=String.fromCharCode(o.charCodeAt(0)-64);break;case"b":if(o>="A"&&o<="E")l=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")l=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")l=String.fromCharCode(o.charCodeAt(0)+43);else if("U"===o)l="\0";else if("V"===o)l="@";else if("W"===o)l="`";else{if(!(o>="X"&&o<="Z"))throw new fe;l=String.fromCharCode(127)}break;case"c":if(o>="A"&&o<="O")l=String.fromCharCode(o.charCodeAt(0)-32);else{if("Z"!==o)throw new fe;l=":"}}h+=l,g++}else h+=a}return h},t.prototype.checkChecksums=function(n){var s=n.length;this.checkOneChecksum(n,s-2,20),this.checkOneChecksum(n,s-1,15)},t.prototype.checkOneChecksum=function(n,s,h){for(var g=1,a=0,o=s-1;o>=0;o--)a+=g*t.ALPHABET_STRING.indexOf(n.charAt(o)),++g>h&&(g=1);if(n.charAt(s)!==t.ALPHABET_STRING[a%47])throw new ct},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",t.ASTERISK_ENCODING=(t.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350])[47],t}(Ht);const Si=Qr;var Os=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),xo=function(i){function t(){var n=null!==i&&i.apply(this,arguments)||this;return n.narrowLineWidth=-1,n}return Os(t,i),t.prototype.decodeRow=function(n,s,h){var g,a,o=this.decodeStart(s),l=this.decodeEnd(s),v=new En;t.decodeMiddle(s,o[1],l[0],v);var E=v.toString(),A=null;null!=h&&(A=h.get(te.ALLOWED_LENGTHS)),null==A&&(A=t.DEFAULT_ALLOWED_LENGTHS);var R=E.length,k=!1,Z=0;try{for(var se=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(A),Me=se.next();!Me.done;Me=se.next()){var Ue=Me.value;if(R===Ue){k=!0;break}Ue>Z&&(Z=Ue)}}catch(Mt){g={error:Mt}}finally{try{Me&&!Me.done&&(a=se.return)&&a.call(se)}finally{if(g)throw g.error}}if(!k&&R>Z&&(k=!0),!k)throw new fe;var ze=[new Ln(o[1],n),new Ln(l[0],n)];return new jn(E,null,0,ze,He.ITF,(new Date).getTime())},t.decodeMiddle=function(n,s,h,g){var a=new Int32Array(10),o=new Int32Array(5),l=new Int32Array(5);for(a.fill(0),o.fill(0),l.fill(0);s<h;){Ht.recordPattern(n,s,a);for(var v=0;v<5;v++){var E=2*v;o[v]=a[E],l[v]=a[E+1]}var A=t.decodeDigit(o);g.append(A.toString()),A=this.decodeDigit(l),g.append(A.toString()),a.forEach(function(R){s+=R})}},t.prototype.decodeStart=function(n){var s=t.skipWhiteSpace(n),h=t.findGuardPattern(n,s,t.START_PATTERN);return this.narrowLineWidth=(h[1]-h[0])/4,this.validateQuietZone(n,h[0]),h},t.prototype.validateQuietZone=function(n,s){var h=10*this.narrowLineWidth;h=h<s?h:s;for(var g=s-1;h>0&&g>=0&&!n.get(g);g--)h--;if(0!==h)throw new Kt},t.skipWhiteSpace=function(n){var s=n.getSize(),h=n.getNextSet(0);if(h===s)throw new Kt;return h},t.prototype.decodeEnd=function(n){n.reverse();try{var s=t.skipWhiteSpace(n),h=void 0;try{h=t.findGuardPattern(n,s,t.END_PATTERN_REVERSED[0])}catch(a){a instanceof Kt&&(h=t.findGuardPattern(n,s,t.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,h[0]);var g=h[0];return h[0]=n.getSize()-h[1],h[1]=n.getSize()-g,h}finally{n.reverse()}},t.findGuardPattern=function(n,s,h){var g=h.length,a=new Int32Array(g),o=n.getSize(),l=!1,v=0,E=s;a.fill(0);for(var A=s;A<o;A++)if(n.get(A)!==l)a[v]++;else{if(v===g-1){if(Ht.patternMatchVariance(a,h,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return[E,A];E+=a[0]+a[1],Be.arraycopy(a,2,a,0,v-1),a[v-1]=0,a[v]=0,v--}else v++;a[v]=1,l=!l}throw new Kt},t.decodeDigit=function(n){for(var s=t.MAX_AVG_VARIANCE,h=-1,g=t.PATTERNS.length,a=0;a<g;a++){var l=Ht.patternMatchVariance(n,t.PATTERNS[a],t.MAX_INDIVIDUAL_VARIANCE);l<s?(s=l,h=a):l===s&&(h=-1)}if(h>=0)return h%10;throw new Kt},t.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],t.MAX_AVG_VARIANCE=.38,t.MAX_INDIVIDUAL_VARIANCE=.5,t.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],t.START_PATTERN=Int32Array.from([1,1,1,1]),t.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],t}(Ht);const ns=xo;var Bo=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Mo=function(i){function t(){var n=null!==i&&i.apply(this,arguments)||this;return n.decodeRowStringBuffer="",n}return Bo(t,i),t.findStartGuardPattern=function(n){for(var h,s=!1,g=0,a=Int32Array.from([0,0,0]);!s;){a=Int32Array.from([0,0,0]);var o=(h=t.findGuardPattern(n,g,!1,this.START_END_PATTERN,a))[0],l=o-((g=h[1])-o);l>=0&&(s=n.isRange(l,o,!1))}return h},t.checkChecksum=function(n){return t.checkStandardUPCEANChecksum(n)},t.checkStandardUPCEANChecksum=function(n){var s=n.length;if(0===s)return!1;var h=parseInt(n.charAt(s-1),10);return t.getStandardUPCEANChecksum(n.substring(0,s-1))===h},t.getStandardUPCEANChecksum=function(n){for(var s=n.length,h=0,g=s-1;g>=0;g-=2){if((a=n.charAt(g).charCodeAt(0)-"0".charCodeAt(0))<0||a>9)throw new fe;h+=a}for(h*=3,g=s-2;g>=0;g-=2){var a;if((a=n.charAt(g).charCodeAt(0)-"0".charCodeAt(0))<0||a>9)throw new fe;h+=a}return(1e3-h)%10},t.decodeEnd=function(n,s){return t.findGuardPattern(n,s,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t.findGuardPatternWithoutCounters=function(n,s,h,g){return this.findGuardPattern(n,s,h,g,new Int32Array(g.length))},t.findGuardPattern=function(n,s,h,g,a){for(var o=n.getSize(),l=0,v=s=h?n.getNextUnset(s):n.getNextSet(s),E=g.length,A=h,R=s;R<o;R++)if(n.get(R)!==A)a[l]++;else{if(l===E-1){if(Ht.patternMatchVariance(a,g,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return Int32Array.from([v,R]);v+=a[0]+a[1];for(var k=a.slice(2,a.length),Z=0;Z<l-1;Z++)a[Z]=k[Z];a[l-1]=0,a[l]=0,l--}else l++;a[l]=1,A=!A}throw new Kt},t.decodeDigit=function(n,s,h,g){this.recordPattern(n,h,s);for(var a=this.MAX_AVG_VARIANCE,o=-1,l=g.length,v=0;v<l;v++){var A=Ht.patternMatchVariance(s,g[v],t.MAX_INDIVIDUAL_VARIANCE);A<a&&(a=A,o=v)}if(o>=0)return o;throw new Kt},t.MAX_AVG_VARIANCE=.48,t.MAX_INDIVIDUAL_VARIANCE=.7,t.START_END_PATTERN=Int32Array.from([1,1,1]),t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],t}(Ht);const Zo=Mo;var fs=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ps=function(){function i(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return i.prototype.decodeRow=function(t,n,s){var h=this.decodeRowStringBuffer,g=this.decodeMiddle(n,s,h),a=h.toString(),o=i.parseExtensionString(a),l=[new Ln((s[0]+s[1])/2,t),new Ln(g,t)],v=new jn(a,null,0,l,He.UPC_EAN_EXTENSION,(new Date).getTime());return null!=o&&v.putAllMetadata(o),v},i.prototype.decodeMiddle=function(t,n,s){var h,g,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var o=t.getSize(),l=n[1],v=0,E=0;E<5&&l<o;E++){var A=Zo.decodeDigit(t,a,l,Zo.L_AND_G_PATTERNS);s+=String.fromCharCode("0".charCodeAt(0)+A%10);try{for(var R=(h=void 0,fs(a)),k=R.next();!k.done;k=R.next())l+=k.value}catch(Me){h={error:Me}}finally{try{k&&!k.done&&(g=R.return)&&g.call(R)}finally{if(h)throw h.error}}A>=10&&(v|=1<<4-E),4!==E&&(l=t.getNextSet(l),l=t.getNextUnset(l))}if(5!==s.length)throw new Kt;var se=this.determineCheckDigit(v);if(i.extensionChecksum(s.toString())!==se)throw new Kt;return l},i.extensionChecksum=function(t){for(var n=t.length,s=0,h=n-2;h>=0;h-=2)s+=t.charAt(h).charCodeAt(0)-"0".charCodeAt(0);for(s*=3,h=n-1;h>=0;h-=2)s+=t.charAt(h).charCodeAt(0)-"0".charCodeAt(0);return(s*=3)%10},i.prototype.determineCheckDigit=function(t){for(var n=0;n<10;n++)if(t===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new Kt},i.parseExtensionString=function(t){if(5!==t.length)return null;var n=i.parseExtension5String(t);return null==n?null:new Map([[ht.SUGGESTED_PRICE,n]])},i.parseExtension5String=function(t){var n;switch(t.charAt(0)){case"0":n="\xa3";break;case"5":n="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n=""}var s=parseInt(t.substring(1)),g=s%100;return n+(s/100).toString()+"."+(g<10?"0"+g:g.toString())},i}();const Uo=ps;var gs=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ms=function(){function i(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return i.prototype.decodeRow=function(t,n,s){var h=this.decodeRowStringBuffer,g=this.decodeMiddle(n,s,h),a=h.toString(),o=i.parseExtensionString(a),l=[new Ln((s[0]+s[1])/2,t),new Ln(g,t)],v=new jn(a,null,0,l,He.UPC_EAN_EXTENSION,(new Date).getTime());return null!=o&&v.putAllMetadata(o),v},i.prototype.decodeMiddle=function(t,n,s){var h,g,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var o=t.getSize(),l=n[1],v=0,E=0;E<2&&l<o;E++){var A=Zo.decodeDigit(t,a,l,Zo.L_AND_G_PATTERNS);s+=String.fromCharCode("0".charCodeAt(0)+A%10);try{for(var R=(h=void 0,gs(a)),k=R.next();!k.done;k=R.next())l+=k.value}catch(se){h={error:se}}finally{try{k&&!k.done&&(g=R.return)&&g.call(R)}finally{if(h)throw h.error}}A>=10&&(v|=1<<1-E),1!==E&&(l=t.getNextSet(l),l=t.getNextUnset(l))}if(2!==s.length)throw new Kt;if(parseInt(s.toString())%4!==v)throw new Kt;return l},i.parseExtensionString=function(t){return 2!==t.length?null:new Map([[ht.ISSUE_NUMBER,parseInt(t)]])},i}();const Xo=ms;var Ua=function(){function i(){}return i.decodeRow=function(t,n,s){var h=Zo.findGuardPattern(n,s,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new Uo).decodeRow(t,n,h)}catch(o){return(new Xo).decodeRow(t,n,h)}},i.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),i}();const Ws=Ua;var Ys=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Mi=function(i){function t(){var n=i.call(this)||this;n.decodeRowStringBuffer="",t.L_AND_G_PATTERNS=t.L_PATTERNS.map(function(o){return Int32Array.from(o)});for(var s=10;s<20;s++){for(var h=t.L_PATTERNS[s-10],g=new Int32Array(h.length),a=0;a<h.length;a++)g[a]=h[h.length-a-1];t.L_AND_G_PATTERNS[s]=g}return n}return Ys(t,i),t.prototype.decodeRow=function(n,s,h){var g=t.findStartGuardPattern(s),a=null==h?null:h.get(te.NEED_RESULT_POINT_CALLBACK);if(null!=a){var o=new Ln((g[0]+g[1])/2,n);a.foundPossibleResultPoint(o)}var l=this.decodeMiddle(s,g,this.decodeRowStringBuffer),v=l.rowOffset,E=l.resultString;if(null!=a){var A=new Ln(v,n);a.foundPossibleResultPoint(A)}var R=t.decodeEnd(s,v);if(null!=a){var k=new Ln((R[0]+R[1])/2,n);a.foundPossibleResultPoint(k)}var Z=R[1],se=Z+(Z-R[0]);if(se>=s.getSize()||!s.isRange(Z,se,!1))throw new Kt;var Me=E.toString();if(Me.length<8)throw new fe;if(!t.checkChecksum(Me))throw new ct;var Ue=(g[1]+g[0])/2,ze=(R[1]+R[0])/2,Ct=this.getBarcodeFormat(),Mt=[new Ln(Ue,n),new Ln(ze,n)],gn=new jn(Me,null,0,Mt,Ct,(new Date).getTime()),Rn=0;try{var $n=Ws.decodeRow(n,s,R[1]);gn.putMetadata(ht.UPC_EAN_EXTENSION,$n.getText()),gn.putAllMetadata($n.getResultMetadata()),gn.addResultPoints($n.getResultPoints()),Rn=$n.getText().length}catch(sa){}var Sr=null==h?null:h.get(te.ALLOWED_EAN_EXTENSIONS);if(null!=Sr){var ni=!1;for(var di in Sr)if(Rn.toString()===di){ni=!0;break}if(!ni)throw new Kt}return gn},t.checkChecksum=function(n){return t.checkStandardUPCEANChecksum(n)},t.checkStandardUPCEANChecksum=function(n){var s=n.length;if(0===s)return!1;var h=parseInt(n.charAt(s-1),10);return t.getStandardUPCEANChecksum(n.substring(0,s-1))===h},t.getStandardUPCEANChecksum=function(n){for(var s=n.length,h=0,g=s-1;g>=0;g-=2){if((a=n.charAt(g).charCodeAt(0)-"0".charCodeAt(0))<0||a>9)throw new fe;h+=a}for(h*=3,g=s-2;g>=0;g-=2){var a;if((a=n.charAt(g).charCodeAt(0)-"0".charCodeAt(0))<0||a>9)throw new fe;h+=a}return(1e3-h)%10},t.decodeEnd=function(n,s){return t.findGuardPattern(n,s,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t}(Zo);const tr=Mi;var cs=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),rs=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ks=function(i){function t(){var n=i.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return cs(t,i),t.prototype.decodeMiddle=function(n,s,h){var g,a,o,l,v=this.decodeMiddleCounters;v[0]=0,v[1]=0,v[2]=0,v[3]=0;for(var E=n.getSize(),A=s[1],R=0,k=0;k<6&&A<E;k++){var Z=tr.decodeDigit(n,v,A,tr.L_AND_G_PATTERNS);h+=String.fromCharCode("0".charCodeAt(0)+Z%10);try{for(var se=(g=void 0,rs(v)),Me=se.next();!Me.done;Me=se.next())A+=Me.value}catch(gn){g={error:gn}}finally{try{Me&&!Me.done&&(a=se.return)&&a.call(se)}finally{if(g)throw g.error}}Z>=10&&(R|=1<<5-k)}for(h=t.determineFirstDigit(h,R),A=tr.findGuardPattern(n,A,!0,tr.MIDDLE_PATTERN,new Int32Array(tr.MIDDLE_PATTERN.length).fill(0))[1],k=0;k<6&&A<E;k++){Z=tr.decodeDigit(n,v,A,tr.L_PATTERNS),h+=String.fromCharCode("0".charCodeAt(0)+Z);try{for(var Ct=(o=void 0,rs(v)),Mt=Ct.next();!Mt.done;Mt=Ct.next())A+=Mt.value}catch($n){o={error:$n}}finally{try{Mt&&!Mt.done&&(l=Ct.return)&&l.call(Ct)}finally{if(o)throw o.error}}}return{rowOffset:A,resultString:h}},t.prototype.getBarcodeFormat=function(){return He.EAN_13},t.determineFirstDigit=function(n,s){for(var h=0;h<10;h++)if(s===this.FIRST_DIGIT_ENCODINGS[h])return String.fromCharCode("0".charCodeAt(0)+h)+n;throw new Kt},t.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],t}(tr);const $r=Ks;var Ao=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),co=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},vs=function(i){function t(){var n=i.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return Ao(t,i),t.prototype.decodeMiddle=function(n,s,h){var g,a,o,l,v=this.decodeMiddleCounters;v[0]=0,v[1]=0,v[2]=0,v[3]=0;for(var E=n.getSize(),A=s[1],R=0;R<4&&A<E;R++){var k=tr.decodeDigit(n,v,A,tr.L_PATTERNS);h+=String.fromCharCode("0".charCodeAt(0)+k);try{for(var Z=(g=void 0,co(v)),se=Z.next();!se.done;se=Z.next())A+=se.value}catch(Mt){g={error:Mt}}finally{try{se&&!se.done&&(a=Z.return)&&a.call(Z)}finally{if(g)throw g.error}}}for(A=tr.findGuardPattern(n,A,!0,tr.MIDDLE_PATTERN,new Int32Array(tr.MIDDLE_PATTERN.length).fill(0))[1],R=0;R<4&&A<E;R++){k=tr.decodeDigit(n,v,A,tr.L_PATTERNS),h+=String.fromCharCode("0".charCodeAt(0)+k);try{for(var ze=(o=void 0,co(v)),Ct=ze.next();!Ct.done;Ct=ze.next())A+=Ct.value}catch(Rn){o={error:Rn}}finally{try{Ct&&!Ct.done&&(l=ze.return)&&l.call(ze)}finally{if(o)throw o.error}}}return{rowOffset:A,resultString:h}},t.prototype.getBarcodeFormat=function(){return He.EAN_8},t}(tr);const lo=vs;var is=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),jo=function(i){function t(){var n=null!==i&&i.apply(this,arguments)||this;return n.ean13Reader=new $r,n}return is(t,i),t.prototype.getBarcodeFormat=function(){return He.UPC_A},t.prototype.decode=function(n,s){return this.maybeReturnResult(this.ean13Reader.decode(n))},t.prototype.decodeRow=function(n,s,h){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,s,h))},t.prototype.decodeMiddle=function(n,s,h){return this.ean13Reader.decodeMiddle(n,s,h)},t.prototype.maybeReturnResult=function(n){var s=n.getText();if("0"===s.charAt(0)){var h=new jn(s.substring(1),null,null,n.getResultPoints(),He.UPC_A);return null!=n.getResultMetadata()&&h.putAllMetadata(n.getResultMetadata()),h}throw new Kt},t.prototype.reset=function(){this.ean13Reader.reset()},t}(tr);const Qo=jo;var qs=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Us=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},os=function(i){function t(){var n=i.call(this)||this;return n.decodeMiddleCounters=new Int32Array(4),n}return qs(t,i),t.prototype.decodeMiddle=function(n,s,h){var g,a,o=this.decodeMiddleCounters.map(function(Me){return Me});o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=n.getSize(),v=s[1],E=0,A=0;A<6&&v<l;A++){var R=t.decodeDigit(n,o,v,t.L_AND_G_PATTERNS);h+=String.fromCharCode("0".charCodeAt(0)+R%10);try{for(var k=(g=void 0,Us(o)),Z=k.next();!Z.done;Z=k.next())v+=Z.value}catch(Me){g={error:Me}}finally{try{Z&&!Z.done&&(a=k.return)&&a.call(k)}finally{if(g)throw g.error}}R>=10&&(E|=1<<5-A)}return t.determineNumSysAndCheckDigit(new En(h),E),v},t.prototype.decodeEnd=function(n,s){return t.findGuardPatternWithoutCounters(n,s,!0,t.MIDDLE_END_PATTERN)},t.prototype.checkChecksum=function(n){return tr.checkChecksum(t.convertUPCEtoUPCA(n))},t.determineNumSysAndCheckDigit=function(n,s){for(var h=0;h<=1;h++)for(var g=0;g<10;g++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[h][g])return n.insert(0,"0"+h),void n.append("0"+g);throw Kt.getNotFoundInstance()},t.prototype.getBarcodeFormat=function(){return He.UPC_E},t.convertUPCEtoUPCA=function(n){var s=n.slice(1,7).split("").map(function(a){return a.charCodeAt(0)}),h=new En;h.append(n.charAt(0));var g=s[5];switch(g){case 0:case 1:case 2:h.appendChars(s,0,2),h.append(g),h.append("0000"),h.appendChars(s,2,3);break;case 3:h.appendChars(s,0,3),h.append("00000"),h.appendChars(s,3,2);break;case 4:h.appendChars(s,0,4),h.append("00000"),h.append(s[4]);break;default:h.appendChars(s,0,5),h.append("0000"),h.append(g)}return n.length>=8&&h.append(n.charAt(7)),h.toString()},t.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],t}(tr);const Xi=os;var Ni=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),ys=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ki=function(i){function t(n){var s=i.call(this)||this,h=null==n?null:n.get(te.POSSIBLE_FORMATS),g=[];return null!=h&&(h.indexOf(He.EAN_13)>-1&&g.push(new $r),h.indexOf(He.UPC_A)>-1&&g.push(new Qo),h.indexOf(He.EAN_8)>-1&&g.push(new lo),h.indexOf(He.UPC_E)>-1&&g.push(new Xi)),0===g.length&&(g.push(new $r),g.push(new Qo),g.push(new lo),g.push(new Xi)),s.readers=g,s}return Ni(t,i),t.prototype.decodeRow=function(n,s,h){var g,a;try{for(var o=ys(this.readers),l=o.next();!l.done;l=o.next()){var v=l.value;try{var E=v.decodeRow(n,s,h),A=E.getBarcodeFormat()===He.EAN_13&&"0"===E.getText().charAt(0),R=null==h?null:h.get(te.POSSIBLE_FORMATS),k=null==R||R.includes(He.UPC_A);if(A&&k){var Z=E.getRawBytes(),se=new jn(E.getText().substring(1),Z,Z?Z.length:null,E.getResultPoints(),He.UPC_A);return se.putAllMetadata(E.getResultMetadata()),se}return E}catch(Me){}}}catch(Me){g={error:Me}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(g)throw g.error}}throw new Kt},t.prototype.reset=function(){var n,s;try{for(var h=ys(this.readers),g=h.next();!g.done;g=h.next())g.value.reset()}catch(o){n={error:o}}finally{try{g&&!g.done&&(s=h.return)&&s.call(h)}finally{if(n)throw n.error}}},t}(Ht);const _s=Ki;var Zs=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),So=function(i){function t(){var n=null!==i&&i.apply(this,arguments)||this;return n.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},n}return Zs(t,i),t.prototype.decodeRow=function(n,s,h){var g=this.getValidRowData(s);if(!g)throw new Kt;var a=this.codaBarDecodeRow(g.row);if(!a)throw new Kt;return new jn(a,null,0,[new Ln(g.left,n),new Ln(g.right,n)],He.CODABAR,(new Date).getTime())},t.prototype.getValidRowData=function(n){var s=n.toArray(),h=s.indexOf(!0);if(-1===h)return null;var g=s.lastIndexOf(!0);if(g<=h)return null;for(var a=[],o=(s=s.slice(h,g+1))[0],l=1,v=1;v<s.length;v++)s[v]===o?l++:(o=s[v],a.push(l),l=1);return a.push(l),a.length<23&&(a.length+1)%8!=0?null:{row:a,left:h,right:g}},t.prototype.codaBarDecodeRow=function(n){for(var s=[],h=Math.ceil(n.reduce(function(l,v){return(l+v)/2},0));n.length>0;){var a=n.splice(0,8).splice(0,7).map(function(l){return l<h?"n":"w"}).join("");if(void 0===this.CODA_BAR_CHAR_SET[a])return null;s.push(this.CODA_BAR_CHAR_SET[a])}var o=s.join("");return this.validCodaBarString(o)?o:null},t.prototype.validCodaBarString=function(n){return/^[A-D].{1,}[A-D]$/.test(n)},t}(Ht);const wi=So;var ls=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),io=function(i){function t(){var n=i.call(this)||this;return n.decodeFinderCounters=new Int32Array(4),n.dataCharacterCounters=new Int32Array(8),n.oddRoundingErrors=new Array(4),n.evenRoundingErrors=new Array(4),n.oddCounts=new Array(n.dataCharacterCounters.length/2),n.evenCounts=new Array(n.dataCharacterCounters.length/2),n}return ls(t,i),t.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},t.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},t.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},t.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},t.prototype.getOddCounts=function(){return this.oddCounts},t.prototype.getEvenCounts=function(){return this.evenCounts},t.prototype.parseFinderValue=function(n,s){for(var h=0;h<s.length;h++)if(Ht.patternMatchVariance(n,s[h],t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return h;throw new Kt},t.count=function(n){return pr.sum(new Int32Array(n))},t.increment=function(n,s){for(var h=0,g=s[0],a=1;a<n.length;a++)s[a]>g&&(g=s[a],h=a);n[h]++},t.decrement=function(n,s){for(var h=0,g=s[0],a=1;a<n.length;a++)s[a]<g&&(g=s[a],h=a);n[h]--},t.isFinderPattern=function(n){var s,h,g=n[0]+n[1],o=g/(g+n[2]+n[3]);if(o>=t.MIN_FINDER_PATTERN_RATIO&&o<=t.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,v=Number.MIN_SAFE_INTEGER;try{for(var E=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),A=E.next();!A.done;A=E.next()){var R=A.value;R>v&&(v=R),R<l&&(l=R)}}catch(k){s={error:k}}finally{try{A&&!A.done&&(h=E.return)&&h.call(E)}finally{if(s)throw s.error}}return v<10*l}return!1},t.MAX_AVG_VARIANCE=.2,t.MAX_INDIVIDUAL_VARIANCE=.45,t.MIN_FINDER_PATTERN_RATIO=9.5/12,t.MAX_FINDER_PATTERN_RATIO=12.5/14,t}(Ht);const $i=io;var Qi=function(){function i(t,n){this.value=t,this.checksumPortion=n}return i.prototype.getValue=function(){return this.value},i.prototype.getChecksumPortion=function(){return this.checksumPortion},i.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},i.prototype.equals=function(t){return t instanceof i&&(this.value===t.value&&this.checksumPortion===t.checksumPortion)},i.prototype.hashCode=function(){return this.value^this.checksumPortion},i}();const Vo=Qi;var bo=function(){function i(t,n,s,h,g){this.value=t,this.startEnd=n,this.value=t,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new Ln(s,g)),this.resultPoints.push(new Ln(h,g))}return i.prototype.getValue=function(){return this.value},i.prototype.getStartEnd=function(){return this.startEnd},i.prototype.getResultPoints=function(){return this.resultPoints},i.prototype.equals=function(t){return t instanceof i&&this.value===t.value},i.prototype.hashCode=function(){return this.value},i}();const Fr=bo;var Br=function(){function i(){}return i.getRSSvalue=function(t,n,s){var h,g,a=0;try{for(var o=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),l=o.next();!l.done;l=o.next())a+=l.value}catch(ze){h={error:ze}}finally{try{l&&!l.done&&(g=o.return)&&g.call(o)}finally{if(h)throw h.error}}for(var E=0,A=0,R=t.length,k=0;k<R-1;k++){var Z=void 0;for(Z=1,A|=1<<k;Z<t[k];Z++,A&=~(1<<k)){var se=i.combins(a-Z-1,R-k-2);if(s&&0===A&&a-Z-(R-k-1)>=R-k-1&&(se-=i.combins(a-Z-(R-k),R-k-2)),R-k-1>1){for(var Me=0,Ue=a-Z-(R-k-2);Ue>n;Ue--)Me+=i.combins(a-Z-Ue-1,R-k-3);se-=Me*(R-1-k)}else a-Z>n&&se--;E+=se}a-=Z}return E},i.combins=function(t,n){var s,h;t-n>n?(h=n,s=t-n):(h=t-n,s=n);for(var g=1,a=1,o=t;o>s;o--)g*=o,a<=h&&(g/=a,a++);for(;a<=h;)g/=a,a++;return g},i}();const xs=Br;var Gi=function(){function i(){}return i.buildBitArray=function(t){var n=2*t.length-1;null==t[t.length-1].getRightChar()&&(n-=1);for(var h=new Ze(12*n),g=0,o=t[0].getRightChar().getValue(),l=11;l>=0;--l)o&1<<l&&h.set(g),g++;for(l=1;l<t.length;++l){for(var v=t[l],E=v.getLeftChar().getValue(),A=11;A>=0;--A)E&1<<A&&h.set(g),g++;if(null!==v.getRightChar()){var R=v.getRightChar().getValue();for(A=11;A>=0;--A)R&1<<A&&h.set(g),g++}}return h},i}();const Vs=Gi;var Ns=function(){function i(t,n){n?this.decodedInformation=null:(this.finished=t,this.decodedInformation=n)}return i.prototype.getDecodedInformation=function(){return this.decodedInformation},i.prototype.isFinished=function(){return this.finished},i}();const No=Ns;var $s=function(){function i(t){this.newPosition=t}return i.prototype.getNewPosition=function(){return this.newPosition},i}();const Es=$s;var ss=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Y=function(i){function t(n,s){var h=i.call(this,n)||this;return h.value=s,h}return ss(t,i),t.prototype.getValue=function(){return this.value},t.prototype.isFNC1=function(){return this.value===t.FNC1},t.FNC1="$",t}(Es);const w=Y;var T=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),S=function(i){function t(n,s,h){var g=i.call(this,n)||this;return h?(g.remaining=!0,g.remainingValue=g.remainingValue):(g.remaining=!1,g.remainingValue=0),g.newString=s,g}return T(t,i),t.prototype.getNewString=function(){return this.newString},t.prototype.isRemaining=function(){return this.remaining},t.prototype.getRemainingValue=function(){return this.remainingValue},t}(Es);const j=S;var ve=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Vt=function(i){function t(n,s,h){var g=i.call(this,n)||this;if(s<0||s>10||h<0||h>10)throw new fe;return g.firstDigit=s,g.secondDigit=h,g}return ve(t,i),t.prototype.getFirstDigit=function(){return this.firstDigit},t.prototype.getSecondDigit=function(){return this.secondDigit},t.prototype.getValue=function(){return 10*this.firstDigit+this.secondDigit},t.prototype.isFirstDigitFNC1=function(){return this.firstDigit===t.FNC1},t.prototype.isSecondDigitFNC1=function(){return this.secondDigit===t.FNC1},t.prototype.isAnyFNC1=function(){return this.firstDigit===t.FNC1||this.secondDigit===t.FNC1},t.FNC1=10,t}(Es);const _n=Vt;var Vn=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},wr=function(){function i(){}return i.parseFieldsInGeneralPurpose=function(t){var n,s,h,g,a,o,l,v;if(!t)return null;if(t.length<2)throw new Kt;var E=t.substring(0,2);try{for(var A=Vn(i.TWO_DIGIT_DATA_LENGTH),R=A.next();!R.done;R=A.next())if((k=R.value)[0]===E)return k[1]===i.VARIABLE_LENGTH?i.processVariableAI(2,k[2],t):i.processFixedAI(2,k[1],t)}catch(Rn){n={error:Rn}}finally{try{R&&!R.done&&(s=A.return)&&s.call(A)}finally{if(n)throw n.error}}if(t.length<3)throw new Kt;var Z=t.substring(0,3);try{for(var se=Vn(i.THREE_DIGIT_DATA_LENGTH),Me=se.next();!Me.done;Me=se.next())if((k=Me.value)[0]===Z)return k[1]===i.VARIABLE_LENGTH?i.processVariableAI(3,k[2],t):i.processFixedAI(3,k[1],t)}catch(Rn){h={error:Rn}}finally{try{Me&&!Me.done&&(g=se.return)&&g.call(se)}finally{if(h)throw h.error}}try{for(var Ue=Vn(i.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),ze=Ue.next();!ze.done;ze=Ue.next())if((k=ze.value)[0]===Z)return k[1]===i.VARIABLE_LENGTH?i.processVariableAI(4,k[2],t):i.processFixedAI(4,k[1],t)}catch(Rn){a={error:Rn}}finally{try{ze&&!ze.done&&(o=Ue.return)&&o.call(Ue)}finally{if(a)throw a.error}}if(t.length<4)throw new Kt;var Ct=t.substring(0,4);try{for(var Mt=Vn(i.FOUR_DIGIT_DATA_LENGTH),gn=Mt.next();!gn.done;gn=Mt.next()){var k;if((k=gn.value)[0]===Ct)return k[1]===i.VARIABLE_LENGTH?i.processVariableAI(4,k[2],t):i.processFixedAI(4,k[1],t)}}catch(Rn){l={error:Rn}}finally{try{gn&&!gn.done&&(v=Mt.return)&&v.call(Mt)}finally{if(l)throw l.error}}throw new Kt},i.processFixedAI=function(t,n,s){if(s.length<t)throw new Kt;var h=s.substring(0,t);if(s.length<t+n)throw new Kt;var g=s.substring(t,t+n),a=s.substring(t+n),o="("+h+")"+g,l=i.parseFieldsInGeneralPurpose(a);return null==l?o:o+l},i.processVariableAI=function(t,n,s){var g,h=s.substring(0,t),a=s.substring(t,g=s.length<t+n?s.length:t+n),o=s.substring(g),l="("+h+")"+a,v=i.parseFieldsInGeneralPurpose(o);return null==v?l:l+v},i.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",i.VARIABLE_LENGTH=[],20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",i.VARIABLE_LENGTH,20],["22",i.VARIABLE_LENGTH,29],["30",i.VARIABLE_LENGTH,8],["37",i.VARIABLE_LENGTH,8],["90",i.VARIABLE_LENGTH,30],["91",i.VARIABLE_LENGTH,30],["92",i.VARIABLE_LENGTH,30],["93",i.VARIABLE_LENGTH,30],["94",i.VARIABLE_LENGTH,30],["95",i.VARIABLE_LENGTH,30],["96",i.VARIABLE_LENGTH,30],["97",i.VARIABLE_LENGTH,3],["98",i.VARIABLE_LENGTH,30],["99",i.VARIABLE_LENGTH,30]],i.THREE_DIGIT_DATA_LENGTH=[["240",i.VARIABLE_LENGTH,30],["241",i.VARIABLE_LENGTH,30],["242",i.VARIABLE_LENGTH,6],["250",i.VARIABLE_LENGTH,30],["251",i.VARIABLE_LENGTH,30],["253",i.VARIABLE_LENGTH,17],["254",i.VARIABLE_LENGTH,20],["400",i.VARIABLE_LENGTH,30],["401",i.VARIABLE_LENGTH,30],["402",17],["403",i.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",i.VARIABLE_LENGTH,20],["421",i.VARIABLE_LENGTH,15],["422",3],["423",i.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],i.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",i.VARIABLE_LENGTH,15],["391",i.VARIABLE_LENGTH,18],["392",i.VARIABLE_LENGTH,15],["393",i.VARIABLE_LENGTH,18],["703",i.VARIABLE_LENGTH,30]],i.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",i.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",i.VARIABLE_LENGTH,20],["8003",i.VARIABLE_LENGTH,30],["8004",i.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",i.VARIABLE_LENGTH,30],["8008",i.VARIABLE_LENGTH,12],["8018",18],["8020",i.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",i.VARIABLE_LENGTH,70],["8200",i.VARIABLE_LENGTH,70]],i}();const li=wr;var ee=function(){function i(t){this.buffer=new En,this.information=t}return i.prototype.decodeAllCodes=function(t,n){for(var s=n,h=null;;){var g=this.decodeGeneralPurposeField(s,h),a=li.parseFieldsInGeneralPurpose(g.getNewString());if(null!=a&&t.append(a),h=g.isRemaining()?""+g.getRemainingValue():null,s===g.getNewPosition())break;s=g.getNewPosition()}return t.toString()},i.prototype.isStillNumeric=function(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(var n=t;n<t+3;++n)if(this.information.get(n))return!0;return this.information.get(t+3)},i.prototype.decodeNumeric=function(t){if(t+7>this.information.getSize()){var n=this.extractNumericValueFromBitArray(t,4);return new _n(this.information.getSize(),0===n?_n.FNC1:n-1,_n.FNC1)}var s=this.extractNumericValueFromBitArray(t,7);return new _n(t+7,(s-8)/11,(s-8)%11)},i.prototype.extractNumericValueFromBitArray=function(t,n){return i.extractNumericValueFromBitArray(this.information,t,n)},i.extractNumericValueFromBitArray=function(t,n,s){for(var h=0,g=0;g<s;++g)t.get(n+g)&&(h|=1<<s-g-1);return h},i.prototype.decodeGeneralPurposeField=function(t,n){this.buffer.setLengthToZero(),null!=n&&this.buffer.append(n),this.current.setPosition(t);var s=this.parseBlocks();return null!=s&&s.isRemaining()?new j(this.current.getPosition(),this.buffer.toString(),s.getRemainingValue()):new j(this.current.getPosition(),this.buffer.toString())},i.prototype.parseBlocks=function(){var t,n;do{var s=this.current.getPosition();if(t=this.current.isAlpha()?(n=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(n=this.parseIsoIec646Block()).isFinished():(n=this.parseNumericBlock()).isFinished(),s===this.current.getPosition()&&!t)break}while(!t);return n.getDecodedInformation()},i.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){var n=void 0;return n=t.isSecondDigitFNC1()?new j(this.current.getPosition(),this.buffer.toString()):new j(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new No(!0,n)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1())return n=new j(this.current.getPosition(),this.buffer.toString()),new No(!0,n);this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new No(!1)},i.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var n=new j(this.current.getPosition(),this.buffer.toString());return new No(!0,n)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new No(!1)},i.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var n=new j(this.current.getPosition(),this.buffer.toString());return new No(!0,n)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new No(!1)},i.prototype.isStillIsoIec646=function(t){if(t+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(t,5);if(n>=5&&n<16)return!0;if(t+7>this.information.getSize())return!1;var s=this.extractNumericValueFromBitArray(t,7);if(s>=64&&s<116)return!0;if(t+8>this.information.getSize())return!1;var h=this.extractNumericValueFromBitArray(t,8);return h>=232&&h<253},i.prototype.decodeIsoIec646=function(t){var n=this.extractNumericValueFromBitArray(t,5);if(15===n)return new w(t+5,w.FNC1);if(n>=5&&n<15)return new w(t+5,"0"+(n-5));var g,s=this.extractNumericValueFromBitArray(t,7);if(s>=64&&s<90)return new w(t+7,""+(s+1));if(s>=90&&s<116)return new w(t+7,""+(s+7));switch(this.extractNumericValueFromBitArray(t,8)){case 232:g="!";break;case 233:g='"';break;case 234:g="%";break;case 235:g="&";break;case 236:g="'";break;case 237:g="(";break;case 238:g=")";break;case 239:g="*";break;case 240:g="+";break;case 241:g=",";break;case 242:g="-";break;case 243:g=".";break;case 244:g="/";break;case 245:g=":";break;case 246:g=";";break;case 247:g="<";break;case 248:g="=";break;case 249:g=">";break;case 250:g="?";break;case 251:g="_";break;case 252:g=" ";break;default:throw new fe}return new w(t+8,g)},i.prototype.isStillAlpha=function(t){if(t+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(t,5);if(n>=5&&n<16)return!0;if(t+6>this.information.getSize())return!1;var s=this.extractNumericValueFromBitArray(t,6);return s>=16&&s<63},i.prototype.decodeAlphanumeric=function(t){var n=this.extractNumericValueFromBitArray(t,5);if(15===n)return new w(t+5,w.FNC1);if(n>=5&&n<15)return new w(t+5,"0"+(n-5));var h,s=this.extractNumericValueFromBitArray(t,6);if(s>=32&&s<58)return new w(t+6,""+(s+33));switch(s){case 58:h="*";break;case 59:h=",";break;case 60:h="-";break;case 61:h=".";break;case 62:h="/";break;default:throw new Ei("Decoding invalid alphanumeric value: "+s)}return new w(t+6,h)},i.prototype.isAlphaTo646ToAlphaLatch=function(t){if(t+1>this.information.getSize())return!1;for(var n=0;n<5&&n+t<this.information.getSize();++n)if(2===n){if(!this.information.get(t+2))return!1}else if(this.information.get(t+n))return!1;return!0},i.prototype.isAlphaOr646ToNumericLatch=function(t){if(t+3>this.information.getSize())return!1;for(var n=t;n<t+3;++n)if(this.information.get(n))return!1;return!0},i.prototype.isNumericToAlphaNumericLatch=function(t){if(t+1>this.information.getSize())return!1;for(var n=0;n<4&&n+t<this.information.getSize();++n)if(this.information.get(t+n))return!1;return!0},i}();const ie=ee;var Te=function(){function i(t){this.information=t,this.generalDecoder=new ie(t)}return i.prototype.getInformation=function(){return this.information},i.prototype.getGeneralDecoder=function(){return this.generalDecoder},i}();const nt=Te;var Et=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Xt=function(i){function t(n){return i.call(this,n)||this}return Et(t,i),t.prototype.encodeCompressedGtin=function(n,s){n.append("(01)");var h=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,s,h)},t.prototype.encodeCompressedGtinWithoutAI=function(n,s,h){for(var g=0;g<4;++g){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*g,10);a/100==0&&n.append("0"),a/10==0&&n.append("0"),n.append(a)}t.appendCheckDigit(n,h)},t.appendCheckDigit=function(n,s){for(var h=0,g=0;g<13;g++){var a=n.charAt(g+s).charCodeAt(0)-"0".charCodeAt(0);h+=1&g?a:3*a}10==(h=10-h%10)&&(h=0),n.append(h)},t.GTIN_SIZE=40,t}(nt);const dn=Xt;var lr=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Qn=function(i){function t(n){return i.call(this,n)||this}return lr(t,i),t.prototype.parseInformation=function(){var n=new En;n.append("(01)");var s=n.length(),h=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE,4);return n.append(h),this.encodeCompressedGtinWithoutAI(n,t.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(n,t.HEADER_SIZE+44)},t.HEADER_SIZE=4,t}(dn);const Nr=Qn;var ui=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),go=function(i){function t(n){return i.call(this,n)||this}return ui(t,i),t.prototype.parseInformation=function(){var n=new En;return this.getGeneralDecoder().decodeAllCodes(n,t.HEADER_SIZE)},t.HEADER_SIZE=5,t}(nt);const Ci=go;var Ji=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),oo=function(i){function t(n){return i.call(this,n)||this}return Ji(t,i),t.prototype.encodeCompressedWeight=function(n,s,h){var g=this.getGeneralDecoder().extractNumericValueFromBitArray(s,h);this.addWeightCode(n,g);for(var a=this.checkWeight(g),o=1e5,l=0;l<5;++l)a/o==0&&n.append("0"),o/=10;n.append(a)},t}(dn);const Po=oo;var Do=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),mo=function(i){function t(n){return i.call(this,n)||this}return Do(t,i),t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+Po.GTIN_SIZE+t.WEIGHT_SIZE)throw new Kt;var n=new En;return this.encodeCompressedGtin(n,t.HEADER_SIZE),this.encodeCompressedWeight(n,t.HEADER_SIZE+Po.GTIN_SIZE,t.WEIGHT_SIZE),n.toString()},t.HEADER_SIZE=5,t.WEIGHT_SIZE=15,t}(Po);const ws=mo;var as=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),To=function(i){function t(n){return i.call(this,n)||this}return as(t,i),t.prototype.addWeightCode=function(n,s){n.append("(3103)")},t.prototype.checkWeight=function(n){return n},t}(ws);const Jo=To;var Xs=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Qs=function(i){function t(n){return i.call(this,n)||this}return Xs(t,i),t.prototype.addWeightCode=function(n,s){n.append(s<1e4?"(3202)":"(3203)")},t.prototype.checkWeight=function(n){return n<1e4?n:n-1e4},t}(ws);const Cs=Qs;var ho=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Js=function(i){function t(n){return i.call(this,n)||this}return ho(t,i),t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+dn.GTIN_SIZE)throw new Kt;var n=new En;this.encodeCompressedGtin(n,t.HEADER_SIZE);var s=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+dn.GTIN_SIZE,t.LAST_DIGIT_SIZE);n.append("(392"),n.append(s),n.append(")");var h=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+dn.GTIN_SIZE+t.LAST_DIGIT_SIZE,null);return n.append(h.getNewString()),n.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t}(dn);const Ti=Js;var ya=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Mu=function(i){function t(n){return i.call(this,n)||this}return ya(t,i),t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+dn.GTIN_SIZE)throw new Kt;var n=new En;this.encodeCompressedGtin(n,t.HEADER_SIZE);var s=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+dn.GTIN_SIZE,t.LAST_DIGIT_SIZE);n.append("(393"),n.append(s),n.append(")");var h=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+dn.GTIN_SIZE+t.LAST_DIGIT_SIZE,t.FIRST_THREE_DIGITS_SIZE);h/100==0&&n.append("0"),h/10==0&&n.append("0"),n.append(h);var g=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+dn.GTIN_SIZE+t.LAST_DIGIT_SIZE+t.FIRST_THREE_DIGITS_SIZE,null);return n.append(g.getNewString()),n.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t.FIRST_THREE_DIGITS_SIZE=10,t}(dn);const Go=Mu;var Nu=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Pu=function(i){function t(n,s,h){var g=i.call(this,n)||this;return g.dateCode=h,g.firstAIdigits=s,g}return Nu(t,i),t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE+t.DATE_SIZE)throw new Kt;var n=new En;return this.encodeCompressedGtin(n,t.HEADER_SIZE),this.encodeCompressedWeight(n,t.HEADER_SIZE+t.GTIN_SIZE,t.WEIGHT_SIZE),this.encodeCompressedDate(n,t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE),n.toString()},t.prototype.encodeCompressedDate=function(n,s){var h=this.getGeneralDecoder().extractNumericValueFromBitArray(s,t.DATE_SIZE);if(38400!==h){n.append("("),n.append(this.dateCode),n.append(")");var g=h%32,a=(h/=32)%12+1,o=h/=12;o/10==0&&n.append("0"),n.append(o),a/10==0&&n.append("0"),n.append(a),g/10==0&&n.append("0"),n.append(g)}},t.prototype.addWeightCode=function(n,s){n.append("("),n.append(this.firstAIdigits),n.append(s/1e5),n.append(")")},t.prototype.checkWeight=function(n){return n%1e5},t.HEADER_SIZE=8,t.WEIGHT_SIZE=20,t.DATE_SIZE=16,t}(Po);const _a=Pu;var ea=function(){function i(t,n,s,h){this.leftchar=t,this.rightchar=n,this.finderpattern=s,this.maybeLast=h}return i.prototype.mayBeLast=function(){return this.maybeLast},i.prototype.getLeftChar=function(){return this.leftchar},i.prototype.getRightChar=function(){return this.rightchar},i.prototype.getFinderPattern=function(){return this.finderpattern},i.prototype.mustBeLast=function(){return null==this.rightchar},i.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"},i.equals=function(t,n){return t instanceof i&&i.equalsOrNull(t.leftchar,n.leftchar)&&i.equalsOrNull(t.rightchar,n.rightchar)&&i.equalsOrNull(t.finderpattern,n.finderpattern)},i.equalsOrNull=function(t,n){return null===t?null===n:i.equals(t,n)},i.prototype.hashCode=function(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()},i}();const Ya=ea;var W=function(){function i(t,n,s){this.pairs=t,this.rowNumber=n,this.wasReversed=s}return i.prototype.getPairs=function(){return this.pairs},i.prototype.getRowNumber=function(){return this.rowNumber},i.prototype.isReversed=function(){return this.wasReversed},i.prototype.isEquivalent=function(t){return this.checkEqualitity(this,t)},i.prototype.toString=function(){return"{ "+this.pairs+" }"},i.prototype.equals=function(t,n){return t instanceof i&&this.checkEqualitity(t,n)&&t.wasReversed===n.wasReversed},i.prototype.checkEqualitity=function(t,n){var s;if(t&&n)return t.forEach(function(h,g){n.forEach(function(a){h.getLeftChar().getValue()===a.getLeftChar().getValue()&&h.getRightChar().getValue()===a.getRightChar().getValue()&&h.getFinderPatter().getValue()===a.getFinderPatter().getValue()&&(s=!0)})}),s},i}();const ue=W;var Q=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Ie=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},et=function(i){function t(){var n=null!==i&&i.apply(this,arguments)||this;return n.pairs=new Array(t.MAX_PAIRS),n.rows=new Array,n.startEnd=[2],n}return Q(t,i),t.prototype.decodeRow=function(n,s,h){this.pairs.length=0,this.startFromEven=!1;try{return t.constructResult(this.decodeRow2pairs(n,s))}catch(g){}return this.pairs.length=0,this.startFromEven=!0,t.constructResult(this.decodeRow2pairs(n,s))},t.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},t.prototype.decodeRow2pairs=function(n,s){for(var h=!1;!h;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,n))}catch(o){if(o instanceof Kt){if(!this.pairs.length)throw new Kt;h=!0}}if(this.checkChecksum())return this.pairs;var g;if(g=!!this.rows.length,this.storeRow(n,!1),g){var a=this.checkRowsBoolean(!1);if(null!=a||null!=(a=this.checkRowsBoolean(!0)))return a}throw new Kt},t.prototype.checkRowsBoolean=function(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());var s=null;try{s=this.checkRows(new Array,0)}catch(h){console.log(h)}return n&&(this.rows=this.rows.reverse()),s},t.prototype.checkRows=function(n,s){for(var h,g,a=s;a<this.rows.length;a++){var o=this.rows[a];this.pairs.length=0;try{for(var l=(h=void 0,Ie(n)),v=l.next();!v.done;v=l.next())this.pairs.push(v.value.getPairs())}catch(R){h={error:R}}finally{try{v&&!v.done&&(g=l.return)&&g.call(l)}finally{if(h)throw h.error}}if(this.pairs.push(o.getPairs()),t.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var A=new Array(n);A.push(o);try{return this.checkRows(A,a+1)}catch(R){console.log(R)}}}throw new Kt},t.isValidSequence=function(n){var s,h;try{for(var g=Ie(t.FINDER_PATTERN_SEQUENCES),a=g.next();!a.done;a=g.next()){var o=a.value;if(!(n.length>o.length)){for(var l=!0,v=0;v<n.length;v++)if(n[v].getFinderPattern().getValue()!==o[v]){l=!1;break}if(l)return!0}}}catch(E){s={error:E}}finally{try{a&&!a.done&&(h=g.return)&&h.call(g)}finally{if(s)throw s.error}}return!1},t.prototype.storeRow=function(n,s){for(var h=0,g=!1,a=!1;h<this.rows.length;){var o=this.rows[h];if(o.getRowNumber()>n){a=o.isEquivalent(this.pairs);break}g=o.isEquivalent(this.pairs),h++}a||g||t.isPartialRow(this.pairs,this.rows)||(this.rows.push(h,new ue(this.pairs,n,s)),this.removePartialRows(this.pairs,this.rows))},t.prototype.removePartialRows=function(n,s){var h,g,a,o,l,v;try{for(var E=Ie(s),A=E.next();!A.done;A=E.next()){var R=A.value;if(R.getPairs().length!==n.length)try{for(var Z=(a=void 0,Ie(R.getPairs())),se=Z.next();!se.done;se=Z.next()){var Me=se.value;try{for(var ze=(l=void 0,Ie(n)),Ct=ze.next();!Ct.done;Ct=ze.next())if(Ya.equals(Me,Ct.value)){!0;break}}catch(gn){l={error:gn}}finally{try{Ct&&!Ct.done&&(v=ze.return)&&v.call(ze)}finally{if(l)throw l.error}}}}catch(gn){a={error:gn}}finally{try{se&&!se.done&&(o=Z.return)&&o.call(Z)}finally{if(a)throw a.error}}}}catch(gn){h={error:gn}}finally{try{A&&!A.done&&(g=E.return)&&g.call(E)}finally{if(h)throw h.error}}},t.isPartialRow=function(n,s){var h,g,a,o,l,v;try{for(var E=Ie(s),A=E.next();!A.done;A=E.next()){var R=A.value,k=!0;try{for(var Z=(a=void 0,Ie(n)),se=Z.next();!se.done;se=Z.next()){var Me=se.value,Ue=!1;try{for(var ze=(l=void 0,Ie(R.getPairs())),Ct=ze.next();!Ct.done;Ct=ze.next())if(Me.equals(Ct.value)){Ue=!0;break}}catch(gn){l={error:gn}}finally{try{Ct&&!Ct.done&&(v=ze.return)&&v.call(ze)}finally{if(l)throw l.error}}if(!Ue){k=!1;break}}}catch(gn){a={error:gn}}finally{try{se&&!se.done&&(o=Z.return)&&o.call(Z)}finally{if(a)throw a.error}}if(k)return!0}}catch(gn){h={error:gn}}finally{try{A&&!A.done&&(g=E.return)&&g.call(E)}finally{if(h)throw h.error}}return!1},t.prototype.getRows=function(){return this.rows},t.constructResult=function(n){var h=function za(i){try{if(i.get(1))return new Nr(i);if(!i.get(2))return new Ci(i);switch(ie.extractNumericValueFromBitArray(i,1,4)){case 4:return new Jo(i);case 5:return new Cs(i)}switch(ie.extractNumericValueFromBitArray(i,1,5)){case 12:return new Ti(i);case 13:return new Go(i)}switch(ie.extractNumericValueFromBitArray(i,1,7)){case 56:return new _a(i,"310","11");case 57:return new _a(i,"320","11");case 58:return new _a(i,"310","13");case 59:return new _a(i,"320","13");case 60:return new _a(i,"310","15");case 61:return new _a(i,"320","15");case 62:return new _a(i,"310","17");case 63:return new _a(i,"320","17")}}catch(h){throw console.log(h),new Ei("unknown decoder: "+i)}}(Vs.buildBitArray(n)),g=h.parseInformation(),a=n[0].getFinderPattern().getResultPoints(),o=n[n.length-1].getFinderPattern().getResultPoints();return new jn(g,null,null,[a[0],a[1],o[0],o[1]],He.RSS_EXPANDED,null)},t.prototype.checkChecksum=function(){var n=this.pairs.get(0),s=n.getLeftChar(),h=n.getRightChar();if(null===h)return!1;for(var g=h.getChecksumPortion(),a=2,o=1;o<this.pairs.size();++o){var l=this.pairs.get(o);g+=l.getLeftChar().getChecksumPortion(),a++;var v=l.getRightChar();null!=v&&(g+=v.getChecksumPortion(),a++)}return 211*(a-4)+(g%=211)===s.getValue()},t.getNextSecondBar=function(n,s){var h;return n.get(s)?(h=n.getNextUnset(s),h=n.getNextSet(h)):(h=n.getNextSet(s),h=n.getNextUnset(h)),h},t.prototype.retrieveNextPair=function(n,s,h){var g=s.length%2==0;this.startFromEven&&(g=!g);var a,o=!0,l=-1;do{this.findNextPair(n,s,l),null===(a=this.parseFoundFinderPattern(n,h,g))?l=t.getNextSecondBar(n,this.startEnd[0]):o=!1}while(o);var E,v=this.decodeDataCharacter(n,a,g,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new Kt;try{E=this.decodeDataCharacter(n,a,g,!1)}catch(A){E=null,console.log(A)}return new Ya(v,E,a,!0)},t.prototype.isEmptyPair=function(n){return 0===n.length},t.prototype.findNextPair=function(n,s,h){var g=this.getDecodeFinderCounters();g[0]=0,g[1]=0,g[2]=0,g[3]=0;var o,a=n.getSize();o=h>=0?h:this.isEmptyPair(s)?0:s[s.length-1].getFinderPattern().getStartEnd()[1];var v=s.length%2!=0;this.startFromEven&&(v=!v);for(var E=!1;o<a&&(E=!n.get(o));)o++;for(var A=0,R=o,k=o;k<a;k++)if(n.get(k)!==E)g[A]++;else{if(3===A){if(v&&t.reverseCounters(g),t.isFinderPattern(g))return this.startEnd[0]=R,void(this.startEnd[1]=k);v&&t.reverseCounters(g),R+=g[0]+g[1],g[0]=g[2],g[1]=g[3],g[2]=0,g[3]=0,A--}else A++;g[A]=1,E=!E}throw new Kt},t.reverseCounters=function(n){for(var s=n.length,h=0;h<s/2;++h){var g=n[h];n[h]=n[s-h-1],n[s-h-1]=g}},t.prototype.parseFoundFinderPattern=function(n,s,h){var g,a,o;if(h){for(var l=this.startEnd[0]-1;l>=0&&!n.get(l);)l--;l++,g=this.startEnd[0]-l,a=l,o=this.startEnd[1]}else a=this.startEnd[0],g=(o=n.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];var E,v=this.getDecodeFinderCounters();Be.arraycopy(v,0,v,1,v.length-1),v[0]=g;try{E=this.parseFinderValue(v,t.FINDER_PATTERNS)}catch(A){return null}return new Fr(E,[a,o],a,o,s)},t.prototype.decodeDataCharacter=function(n,s,h,g){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(g)t.recordPatternInReverse(n,s.getStartEnd()[0],a);else{t.recordPattern(n,s.getStartEnd()[1],a);for(var l=0,v=a.length-1;l<v;l++,v--){var E=a[l];a[l]=a[v],a[v]=E}}var R=pr.sum(new Int32Array(a))/17,k=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(R-k)/k>.3)throw new Kt;var Z=this.getOddCounts(),se=this.getEvenCounts(),Me=this.getOddRoundingErrors(),Ue=this.getEvenRoundingErrors();for(l=0;l<a.length;l++){var ze=1*a[l]/R,Ct=ze+.5;if(Ct<1){if(ze<.3)throw new Kt;Ct=1}else if(Ct>8){if(ze>8.7)throw new Kt;Ct=8}var Mt=l/2;1&l?(se[Mt]=Ct,Ue[Mt]=ze-Ct):(Z[Mt]=Ct,Me[Mt]=ze-Ct)}this.adjustOddEvenCounts(17);var gn=4*s.getValue()+(h?0:2)+(g?0:1)-1,Rn=0,$n=0;for(l=Z.length-1;l>=0;l--)t.isNotA1left(s,h,g)&&($n+=Z[l]*t.WEIGHTS[gn][2*l]),Rn+=Z[l];var ni=0;for(l=se.length-1;l>=0;l--)t.isNotA1left(s,h,g)&&(ni+=se[l]*t.WEIGHTS[gn][2*l+1]);var di=$n+ni;if(1&Rn||Rn>13||Rn<4)throw new Kt;var sa=(13-Rn)/2,Di=t.SYMBOL_WIDEST[sa],Ts=9-Di,Ru=xs.getRSSvalue(Z,Di,!0),sc=xs.getRSSvalue(se,Ts,!1);return new Vo(Ru*t.EVEN_TOTAL_SUBSET[sa]+sc+t.GSUM[sa],di)},t.isNotA1left=function(n,s,h){return!(0===n.getValue()&&s&&h)},t.prototype.adjustOddEvenCounts=function(n){var s=pr.sum(new Int32Array(this.getOddCounts())),h=pr.sum(new Int32Array(this.getEvenCounts())),g=!1,a=!1;s>13?a=!0:s<4&&(g=!0);var o=!1,l=!1;h>13?l=!0:h<4&&(o=!0);var v=s+h-n,E=1==(1&s),A=0==(1&h);if(1===v)if(E){if(A)throw new Kt;a=!0}else{if(!A)throw new Kt;l=!0}else if(-1===v)if(E){if(A)throw new Kt;g=!0}else{if(!A)throw new Kt;o=!0}else{if(0!==v)throw new Kt;if(E){if(!A)throw new Kt;s<h?(g=!0,l=!0):(a=!0,o=!0)}else if(A)throw new Kt}if(g){if(a)throw new Kt;t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(l)throw new Kt;t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.SYMBOL_WIDEST=[7,5,4,3,1],t.EVEN_TOTAL_SUBSET=[4,20,52,104,204],t.GSUM=[0,348,1388,2948,3988],t.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],t.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],t.FINDER_PATTERN_SEQUENCES=[[t.FINDER_PAT_A=0,t.FINDER_PAT_A],[t.FINDER_PAT_A,t.FINDER_PAT_B=1,t.FINDER_PAT_B],[t.FINDER_PAT_A,t.FINDER_PAT_C=2,t.FINDER_PAT_B,t.FINDER_PAT_D=3],[t.FINDER_PAT_A,t.FINDER_PAT_E=4,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_C],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_F=5],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F]],t.MAX_PAIRS=11,t}($i);const Wt=et;var hn=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),ir=function(i){function t(n,s,h){var g=i.call(this,n,s)||this;return g.count=0,g.finderPattern=h,g}return hn(t,i),t.prototype.getFinderPattern=function(){return this.finderPattern},t.prototype.getCount=function(){return this.count},t.prototype.incrementCount=function(){this.count++},t}(Vo);const gi=ir;var un=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),kr=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Hr=function(i){function t(){var n=null!==i&&i.apply(this,arguments)||this;return n.possibleLeftPairs=[],n.possibleRightPairs=[],n}return un(t,i),t.prototype.decodeRow=function(n,s,h){var g,a,o,l,v=this.decodePair(s,!1,n,h);t.addOrTally(this.possibleLeftPairs,v),s.reverse();var E=this.decodePair(s,!0,n,h);t.addOrTally(this.possibleRightPairs,E),s.reverse();try{for(var A=kr(this.possibleLeftPairs),R=A.next();!R.done;R=A.next()){var k=R.value;if(k.getCount()>1)try{for(var Z=(o=void 0,kr(this.possibleRightPairs)),se=Z.next();!se.done;se=Z.next()){var Me=se.value;if(Me.getCount()>1&&t.checkChecksum(k,Me))return t.constructResult(k,Me)}}catch(Ue){o={error:Ue}}finally{try{se&&!se.done&&(l=Z.return)&&l.call(Z)}finally{if(o)throw o.error}}}}catch(Ue){g={error:Ue}}finally{try{R&&!R.done&&(a=A.return)&&a.call(A)}finally{if(g)throw g.error}}throw new Kt},t.addOrTally=function(n,s){var h,g;if(null!=s){var a=!1;try{for(var o=kr(n),l=o.next();!l.done;l=o.next()){var v=l.value;if(v.getValue()===s.getValue()){v.incrementCount(),a=!0;break}}}catch(E){h={error:E}}finally{try{l&&!l.done&&(g=o.return)&&g.call(o)}finally{if(h)throw h.error}}a||n.push(s)}},t.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},t.constructResult=function(n,s){for(var h=4537077*n.getValue()+s.getValue(),g=new String(h).toString(),a=new En,o=13-g.length;o>0;o--)a.append("0");a.append(g);var l=0;for(o=0;o<13;o++){var v=a.charAt(o).charCodeAt(0)-"0".charCodeAt(0);l+=1&o?v:3*v}10==(l=10-l%10)&&(l=0),a.append(l.toString());var E=n.getFinderPattern().getResultPoints(),A=s.getFinderPattern().getResultPoints();return new jn(a.toString(),null,0,[E[0],E[1],A[0],A[1]],He.RSS_14,(new Date).getTime())},t.checkChecksum=function(n,s){var h=(n.getChecksumPortion()+16*s.getChecksumPortion())%79,g=9*n.getFinderPattern().getValue()+s.getFinderPattern().getValue();return g>72&&g--,g>8&&g--,h===g},t.prototype.decodePair=function(n,s,h,g){try{var a=this.findFinderPattern(n,s),o=this.parseFoundFinderPattern(n,h,s,a),l=null==g?null:g.get(te.NEED_RESULT_POINT_CALLBACK);if(null!=l){var v=(a[0]+a[1])/2;s&&(v=n.getSize()-1-v),l.foundPossibleResultPoint(new Ln(v,h))}var E=this.decodeDataCharacter(n,o,!0),A=this.decodeDataCharacter(n,o,!1);return new gi(1597*E.getValue()+A.getValue(),E.getChecksumPortion()+4*A.getChecksumPortion(),o)}catch(R){return null}},t.prototype.decodeDataCharacter=function(n,s,h){for(var g=this.getDataCharacterCounters(),a=0;a<g.length;a++)g[a]=0;if(h)Ht.recordPatternInReverse(n,s.getStartEnd()[0],g);else{Ht.recordPattern(n,s.getStartEnd()[1]+1,g);for(var o=0,l=g.length-1;o<l;o++,l--){var v=g[o];g[o]=g[l],g[l]=v}}var E=h?16:15,A=pr.sum(new Int32Array(g))/E,R=this.getOddCounts(),k=this.getEvenCounts(),Z=this.getOddRoundingErrors(),se=this.getEvenRoundingErrors();for(o=0;o<g.length;o++){var Me=g[o]/A,Ue=Math.floor(Me+.5);Ue<1?Ue=1:Ue>8&&(Ue=8);var ze=Math.floor(o/2);1&o?(k[ze]=Ue,se[ze]=Me-Ue):(R[ze]=Ue,Z[ze]=Me-Ue)}this.adjustOddEvenCounts(h,E);var Ct=0,Mt=0;for(o=R.length-1;o>=0;o--)Mt*=9,Mt+=R[o],Ct+=R[o];var gn=0,Rn=0;for(o=k.length-1;o>=0;o--)gn*=9,gn+=k[o],Rn+=k[o];var Sr,ni,$n=Mt+3*gn;if(h){if(1&Ct||Ct>12||Ct<4)throw new Kt;var di=9-(ni=t.OUTSIDE_ODD_WIDEST[Sr=(12-Ct)/2]),sa=xs.getRSSvalue(R,ni,!1),Di=xs.getRSSvalue(k,di,!0);return new Vo(sa*t.OUTSIDE_EVEN_TOTAL_SUBSET[Sr]+Di+t.OUTSIDE_GSUM[Sr],$n)}if(1&Rn||Rn>10||Rn<4)throw new Kt;return di=9-(ni=t.INSIDE_ODD_WIDEST[Sr=(10-Rn)/2]),sa=xs.getRSSvalue(R,ni,!0),Di=xs.getRSSvalue(k,di,!1),new Vo(Di*t.INSIDE_ODD_TOTAL_SUBSET[Sr]+sa+t.INSIDE_GSUM[Sr],$n)},t.prototype.findFinderPattern=function(n,s){var h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var g=n.getSize(),a=!1,o=0;o<g&&s!==(a=!n.get(o));)o++;for(var l=0,v=o,E=o;E<g;E++)if(n.get(E)!==a)h[l]++;else{if(3===l){if($i.isFinderPattern(h))return[v,E];v+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,l--}else l++;h[l]=1,a=!a}throw new Kt},t.prototype.parseFoundFinderPattern=function(n,s,h,g){for(var a=n.get(g[0]),o=g[0]-1;o>=0&&a!==n.get(o);)o--;o++;var l=g[0]-o,v=this.getDecodeFinderCounters(),E=new Int32Array(v.length);Be.arraycopy(v,0,E,1,v.length-1),E[0]=l;var A=this.parseFinderValue(E,t.FINDER_PATTERNS),R=o,k=g[1];return h&&(R=n.getSize()-1-R,k=n.getSize()-1-k),new Fr(A,[o,g[1]],R,k,s)},t.prototype.adjustOddEvenCounts=function(n,s){var h=pr.sum(new Int32Array(this.getOddCounts())),g=pr.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1,l=!1,v=!1;n?(h>12?o=!0:h<4&&(a=!0),g>12?v=!0:g<4&&(l=!0)):(h>11?o=!0:h<5&&(a=!0),g>10?v=!0:g<4&&(l=!0));var E=h+g-s,A=(1&h)==(n?1:0),R=1==(1&g);if(1===E)if(A){if(R)throw new Kt;o=!0}else{if(!R)throw new Kt;v=!0}else if(-1===E)if(A){if(R)throw new Kt;a=!0}else{if(!R)throw new Kt;l=!0}else{if(0!==E)throw new Kt;if(A){if(!R)throw new Kt;h<g?(a=!0,v=!0):(o=!0,l=!0)}else if(R)throw new Kt}if(a){if(o)throw new Kt;$i.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&$i.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(v)throw new Kt;$i.increment(this.getEvenCounts(),this.getOddRoundingErrors())}v&&$i.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],t.OUTSIDE_GSUM=[0,161,961,2015,2715],t.INSIDE_GSUM=[0,336,1036,1516],t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],t.INSIDE_ODD_WIDEST=[2,4,6,8],t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],t}($i);const vo=Hr;var Cn=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Xn=function(i){function t(n){var s=i.call(this)||this;s.readers=[];var h=n?n.get(te.POSSIBLE_FORMATS):null,g=n&&void 0!==n.get(te.ASSUME_CODE_39_CHECK_DIGIT);return h&&((h.includes(He.EAN_13)||h.includes(He.UPC_A)||h.includes(He.EAN_8)||h.includes(He.UPC_E))&&s.readers.push(new _s(n)),h.includes(He.CODE_39)&&s.readers.push(new ji(g)),h.includes(He.CODE_93)&&s.readers.push(new Si),h.includes(He.CODE_128)&&s.readers.push(new er),h.includes(He.ITF)&&s.readers.push(new ns),h.includes(He.CODABAR)&&s.readers.push(new wi),h.includes(He.RSS_14)&&s.readers.push(new vo),h.includes(He.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),s.readers.push(new Wt))),0===s.readers.length&&(s.readers.push(new _s(n)),s.readers.push(new ji),s.readers.push(new Si),s.readers.push(new _s(n)),s.readers.push(new er),s.readers.push(new ns),s.readers.push(new vo)),s}return Cn(t,i),t.prototype.decodeRow=function(n,s,h){for(var g=0;g<this.readers.length;g++)try{return this.readers[g].decodeRow(n,s,h)}catch(a){}throw new Kt},t.prototype.reset=function(){this.readers.forEach(function(n){return n.reset()})},t}(Ht);const As=Xn;var Fn=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),vn=(function(i){Fn(function t(n,s){return void 0===n&&(n=500),i.call(this,new As(s),n,s)||this},i)}(Un),function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}),Ur=function(){function i(t,n,s){this.ecCodewords=t,this.ecBlocks=[n],s&&this.ecBlocks.push(s)}return i.prototype.getECCodewords=function(){return this.ecCodewords},i.prototype.getECBlocks=function(){return this.ecBlocks},i}(),bi=function(){function i(t,n){this.count=t,this.dataCodewords=n}return i.prototype.getCount=function(){return this.count},i.prototype.getDataCodewords=function(){return this.dataCodewords},i}(),Ea=function(){function i(t,n,s,h,g,a){var o,l;this.versionNumber=t,this.symbolSizeRows=n,this.symbolSizeColumns=s,this.dataRegionSizeRows=h,this.dataRegionSizeColumns=g,this.ecBlocks=a;var v=0,E=a.getECCodewords(),A=a.getECBlocks();try{for(var R=vn(A),k=R.next();!k.done;k=R.next()){var Z=k.value;v+=Z.getCount()*(Z.getDataCodewords()+E)}}catch(se){o={error:se}}finally{try{k&&!k.done&&(l=R.return)&&l.call(R)}finally{if(o)throw o.error}}this.totalCodewords=v}return i.prototype.getVersionNumber=function(){return this.versionNumber},i.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},i.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},i.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},i.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},i.prototype.getTotalCodewords=function(){return this.totalCodewords},i.prototype.getECBlocks=function(){return this.ecBlocks},i.getVersionForDimensions=function(t,n){var s,h;if(1&t||1&n)throw new fe;try{for(var g=vn(i.VERSIONS),a=g.next();!a.done;a=g.next()){var o=a.value;if(o.symbolSizeRows===t&&o.symbolSizeColumns===n)return o}}catch(l){s={error:l}}finally{try{a&&!a.done&&(h=g.return)&&h.call(g)}finally{if(s)throw s.error}}throw new fe},i.prototype.toString=function(){return""+this.versionNumber},i.buildVersions=function(){return[new i(1,10,10,8,8,new Ur(5,new bi(1,3))),new i(2,12,12,10,10,new Ur(7,new bi(1,5))),new i(3,14,14,12,12,new Ur(10,new bi(1,8))),new i(4,16,16,14,14,new Ur(12,new bi(1,12))),new i(5,18,18,16,16,new Ur(14,new bi(1,18))),new i(6,20,20,18,18,new Ur(18,new bi(1,22))),new i(7,22,22,20,20,new Ur(20,new bi(1,30))),new i(8,24,24,22,22,new Ur(24,new bi(1,36))),new i(9,26,26,24,24,new Ur(28,new bi(1,44))),new i(10,32,32,14,14,new Ur(36,new bi(1,62))),new i(11,36,36,16,16,new Ur(42,new bi(1,86))),new i(12,40,40,18,18,new Ur(48,new bi(1,114))),new i(13,44,44,20,20,new Ur(56,new bi(1,144))),new i(14,48,48,22,22,new Ur(68,new bi(1,174))),new i(15,52,52,24,24,new Ur(42,new bi(2,102))),new i(16,64,64,14,14,new Ur(56,new bi(2,140))),new i(17,72,72,16,16,new Ur(36,new bi(4,92))),new i(18,80,80,18,18,new Ur(48,new bi(4,114))),new i(19,88,88,20,20,new Ur(56,new bi(4,144))),new i(20,96,96,22,22,new Ur(68,new bi(4,174))),new i(21,104,104,24,24,new Ur(56,new bi(6,136))),new i(22,120,120,18,18,new Ur(68,new bi(6,175))),new i(23,132,132,20,20,new Ur(62,new bi(8,163))),new i(24,144,144,22,22,new Ur(62,new bi(8,156),new bi(2,155))),new i(25,8,18,6,16,new Ur(7,new bi(1,5))),new i(26,8,32,6,14,new Ur(11,new bi(1,10))),new i(27,12,26,10,24,new Ur(14,new bi(1,16))),new i(28,12,36,10,16,new Ur(18,new bi(1,22))),new i(29,16,36,14,16,new Ur(24,new bi(1,32))),new i(30,16,48,14,22,new Ur(28,new bi(1,49)))]},i.VERSIONS=i.buildVersions(),i}();const Va=Ea;var qu=function(){function i(t){var n=t.getHeight();if(n<8||n>144||1&n)throw new fe;this.version=i.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new Ir(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return i.prototype.getVersion=function(){return this.version},i.readVersion=function(t){var n=t.getHeight(),s=t.getWidth();return Va.getVersionForDimensions(n,s)},i.prototype.readCodewords=function(){var t=new Int8Array(this.version.getTotalCodewords()),n=0,s=4,h=0,g=this.mappingBitMatrix.getHeight(),a=this.mappingBitMatrix.getWidth(),o=!1,l=!1,v=!1,E=!1;do{if(s!==g||0!==h||o)if(s===g-2&&0===h&&3&a&&!l)t[n++]=255&this.readCorner2(g,a),s-=2,h+=2,l=!0;else if(s!==g+4||2!==h||7&a||v)if(s!==g-2||0!==h||4!=(7&a)||E){do{s<g&&h>=0&&!this.readMappingMatrix.get(h,s)&&(t[n++]=255&this.readUtah(s,h,g,a)),s-=2,h+=2}while(s>=0&&h<a);s+=1,h+=3;do{s>=0&&h<a&&!this.readMappingMatrix.get(h,s)&&(t[n++]=255&this.readUtah(s,h,g,a)),s+=2,h-=2}while(s<g&&h>=0);s+=3,h+=1}else t[n++]=255&this.readCorner4(g,a),s-=2,h+=2,E=!0;else t[n++]=255&this.readCorner3(g,a),s-=2,h+=2,v=!0;else t[n++]=255&this.readCorner1(g,a),s-=2,h+=2,o=!0}while(s<g||h<a);if(n!==this.version.getTotalCodewords())throw new fe;return t},i.prototype.readModule=function(t,n,s,h){return t<0&&(t+=s,n+=4-(s+4&7)),n<0&&(n+=h,t+=4-(h+4&7)),this.readMappingMatrix.set(n,t),this.mappingBitMatrix.get(n,t)},i.prototype.readUtah=function(t,n,s,h){var g=0;return this.readModule(t-2,n-2,s,h)&&(g|=1),g<<=1,this.readModule(t-2,n-1,s,h)&&(g|=1),g<<=1,this.readModule(t-1,n-2,s,h)&&(g|=1),g<<=1,this.readModule(t-1,n-1,s,h)&&(g|=1),g<<=1,this.readModule(t-1,n,s,h)&&(g|=1),g<<=1,this.readModule(t,n-2,s,h)&&(g|=1),g<<=1,this.readModule(t,n-1,s,h)&&(g|=1),g<<=1,this.readModule(t,n,s,h)&&(g|=1),g},i.prototype.readCorner1=function(t,n){var s=0;return this.readModule(t-1,0,t,n)&&(s|=1),s<<=1,this.readModule(t-1,1,t,n)&&(s|=1),s<<=1,this.readModule(t-1,2,t,n)&&(s|=1),s<<=1,this.readModule(0,n-2,t,n)&&(s|=1),s<<=1,this.readModule(0,n-1,t,n)&&(s|=1),s<<=1,this.readModule(1,n-1,t,n)&&(s|=1),s<<=1,this.readModule(2,n-1,t,n)&&(s|=1),s<<=1,this.readModule(3,n-1,t,n)&&(s|=1),s},i.prototype.readCorner2=function(t,n){var s=0;return this.readModule(t-3,0,t,n)&&(s|=1),s<<=1,this.readModule(t-2,0,t,n)&&(s|=1),s<<=1,this.readModule(t-1,0,t,n)&&(s|=1),s<<=1,this.readModule(0,n-4,t,n)&&(s|=1),s<<=1,this.readModule(0,n-3,t,n)&&(s|=1),s<<=1,this.readModule(0,n-2,t,n)&&(s|=1),s<<=1,this.readModule(0,n-1,t,n)&&(s|=1),s<<=1,this.readModule(1,n-1,t,n)&&(s|=1),s},i.prototype.readCorner3=function(t,n){var s=0;return this.readModule(t-1,0,t,n)&&(s|=1),s<<=1,this.readModule(t-1,n-1,t,n)&&(s|=1),s<<=1,this.readModule(0,n-3,t,n)&&(s|=1),s<<=1,this.readModule(0,n-2,t,n)&&(s|=1),s<<=1,this.readModule(0,n-1,t,n)&&(s|=1),s<<=1,this.readModule(1,n-3,t,n)&&(s|=1),s<<=1,this.readModule(1,n-2,t,n)&&(s|=1),s<<=1,this.readModule(1,n-1,t,n)&&(s|=1),s},i.prototype.readCorner4=function(t,n){var s=0;return this.readModule(t-3,0,t,n)&&(s|=1),s<<=1,this.readModule(t-2,0,t,n)&&(s|=1),s<<=1,this.readModule(t-1,0,t,n)&&(s|=1),s<<=1,this.readModule(0,n-2,t,n)&&(s|=1),s<<=1,this.readModule(0,n-1,t,n)&&(s|=1),s<<=1,this.readModule(1,n-1,t,n)&&(s|=1),s<<=1,this.readModule(2,n-1,t,n)&&(s|=1),s<<=1,this.readModule(3,n-1,t,n)&&(s|=1),s},i.prototype.extractDataRegion=function(t){var n=this.version.getSymbolSizeRows(),s=this.version.getSymbolSizeColumns();if(t.getHeight()!==n)throw new Ke("Dimension of bitMatrix must match the version size");for(var h=this.version.getDataRegionSizeRows(),g=this.version.getDataRegionSizeColumns(),a=n/h|0,o=s/g|0,E=new Ir(o*g,a*h),A=0;A<a;++A)for(var R=A*h,k=0;k<o;++k)for(var Z=k*g,se=0;se<h;++se)for(var Me=A*(h+2)+1+se,Ue=R+se,ze=0;ze<g;++ze)t.get(k*(g+2)+1+ze,Me)&&E.set(Z+ze,Ue);return E},i}();const vu=qu;var Ka=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},su=function(){function i(t,n){this.numDataCodewords=t,this.codewords=n}return i.getDataBlocks=function(t,n){var s,h,g,a,o=n.getECBlocks(),l=0,v=o.getECBlocks();try{for(var E=Ka(v),A=E.next();!A.done;A=E.next())l+=(R=A.value).getCount()}catch(Ru){s={error:Ru}}finally{try{A&&!A.done&&(h=E.return)&&h.call(E)}finally{if(s)throw s.error}}var k=new Array(l),Z=0;try{for(var se=Ka(v),Me=se.next();!Me.done;Me=se.next())for(var R=Me.value,Ue=0;Ue<R.getCount();Ue++){var ze=R.getDataCodewords(),Ct=o.getECCodewords()+ze;k[Z++]=new i(ze,new Uint8Array(Ct))}}catch(Ru){g={error:Ru}}finally{try{Me&&!Me.done&&(a=se.return)&&a.call(se)}finally{if(g)throw g.error}}var gn=k[0].codewords.length-o.getECCodewords(),Rn=gn-1,$n=0;for(Ue=0;Ue<Rn;Ue++)for(var Sr=0;Sr<Z;Sr++)k[Sr].codewords[Ue]=t[$n++];var ni=24===n.getVersionNumber(),di=ni?8:Z;for(Sr=0;Sr<di;Sr++)k[Sr].codewords[gn-1]=t[$n++];var sa=k[0].codewords.length;for(Ue=gn;Ue<sa;Ue++)for(Sr=0;Sr<Z;Sr++){var Di=ni?(Sr+8)%Z:Sr;k[Di].codewords[ni&&Di>7?Ue-1:Ue]=t[$n++]}if($n!==t.length)throw new Ke;return k},i.prototype.getNumDataCodewords=function(){return this.numDataCodewords},i.prototype.getCodewords=function(){return this.codewords},i}();const ac=su;var wa=function(){function i(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}return i.prototype.getBitOffset=function(){return this.bitOffset},i.prototype.getByteOffset=function(){return this.byteOffset},i.prototype.readBits=function(t){if(t<1||t>32||t>this.available())throw new Ke(""+t);var n=0,s=this.bitOffset,h=this.byteOffset,g=this.bytes;if(s>0){var a=8-s,o=t<a?t:a;n=(g[h]&255>>8-o<<(l=a-o))>>l,t-=o,8===(s+=o)&&(s=0,h++)}if(t>0){for(;t>=8;)n=n<<8|255&g[h],h++,t-=8;var l;t>0&&(n=n<<t|(g[h]&255>>(l=8-t)<<l)>>l,s+=t)}return this.bitOffset=s,this.byteOffset=h,n},i.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},i}();const yu=wa;var fo=(()=>(function(i){i[i.PAD_ENCODE=0]="PAD_ENCODE",i[i.ASCII_ENCODE=1]="ASCII_ENCODE",i[i.C40_ENCODE=2]="C40_ENCODE",i[i.TEXT_ENCODE=3]="TEXT_ENCODE",i[i.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",i[i.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",i[i.BASE256_ENCODE=6]="BASE256_ENCODE"}(fo||(fo={})),fo))(),qr=function(){function i(){}return i.decode=function(t){var n=new yu(t),s=new En,h=new En,g=new Array,a=fo.ASCII_ENCODE;do{if(a===fo.ASCII_ENCODE)a=this.decodeAsciiSegment(n,s,h);else{switch(a){case fo.C40_ENCODE:this.decodeC40Segment(n,s);break;case fo.TEXT_ENCODE:this.decodeTextSegment(n,s);break;case fo.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,s);break;case fo.EDIFACT_ENCODE:this.decodeEdifactSegment(n,s);break;case fo.BASE256_ENCODE:this.decodeBase256Segment(n,s,g);break;default:throw new fe}a=fo.ASCII_ENCODE}}while(a!==fo.PAD_ENCODE&&n.available()>0);return h.length()>0&&s.append(h.toString()),new $t(t,s.toString(),0===g.length?null:g,null)},i.decodeAsciiSegment=function(t,n,s){var h=!1;do{var g=t.readBits(8);if(0===g)throw new fe;if(g<=128)return h&&(g+=128),n.append(String.fromCharCode(g-1)),fo.ASCII_ENCODE;if(129===g)return fo.PAD_ENCODE;if(g<=229){var a=g-130;a<10&&n.append("0"),n.append(""+a)}else switch(g){case 230:return fo.C40_ENCODE;case 231:return fo.BASE256_ENCODE;case 232:n.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:h=!0;break;case 236:n.append("[)>\x1e05\x1d"),s.insert(0,"\x1e\x04");break;case 237:n.append("[)>\x1e06\x1d"),s.insert(0,"\x1e\x04");break;case 238:return fo.ANSIX12_ENCODE;case 239:return fo.TEXT_ENCODE;case 240:return fo.EDIFACT_ENCODE;default:if(254!==g||0!==t.available())throw new fe}}while(t.available()>0);return fo.ASCII_ENCODE},i.decodeC40Segment=function(t,n){var s=!1,h=[],g=0;do{if(8===t.available())return;var a=t.readBits(8);if(254===a)return;this.parseTwoBytes(a,t.readBits(8),h);for(var o=0;o<3;o++){var l=h[o];switch(g){case 0:if(l<3)g=l+1;else{if(!(l<this.C40_BASIC_SET_CHARS.length))throw new fe;var v=this.C40_BASIC_SET_CHARS[l];s?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),s=!1):n.append(v)}break;case 1:s?(n.append(String.fromCharCode(l+128)),s=!1):n.append(String.fromCharCode(l)),g=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length)v=this.C40_SHIFT2_SET_CHARS[l],s?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),s=!1):n.append(v);else switch(l){case 27:n.append(String.fromCharCode(29));break;case 30:s=!0;break;default:throw new fe}g=0;break;case 3:s?(n.append(String.fromCharCode(l+224)),s=!1):n.append(String.fromCharCode(l+96)),g=0;break;default:throw new fe}}}while(t.available()>0)},i.decodeTextSegment=function(t,n){var s=!1,h=[],g=0;do{if(8===t.available())return;var a=t.readBits(8);if(254===a)return;this.parseTwoBytes(a,t.readBits(8),h);for(var o=0;o<3;o++){var l=h[o];switch(g){case 0:if(l<3)g=l+1;else{if(!(l<this.TEXT_BASIC_SET_CHARS.length))throw new fe;var v=this.TEXT_BASIC_SET_CHARS[l];s?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),s=!1):n.append(v)}break;case 1:s?(n.append(String.fromCharCode(l+128)),s=!1):n.append(String.fromCharCode(l)),g=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length)v=this.TEXT_SHIFT2_SET_CHARS[l],s?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),s=!1):n.append(v);else switch(l){case 27:n.append(String.fromCharCode(29));break;case 30:s=!0;break;default:throw new fe}g=0;break;case 3:if(!(l<this.TEXT_SHIFT3_SET_CHARS.length))throw new fe;v=this.TEXT_SHIFT3_SET_CHARS[l],s?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),s=!1):n.append(v),g=0;break;default:throw new fe}}}while(t.available()>0)},i.decodeAnsiX12Segment=function(t,n){var s=[];do{if(8===t.available())return;var h=t.readBits(8);if(254===h)return;this.parseTwoBytes(h,t.readBits(8),s);for(var g=0;g<3;g++){var a=s[g];switch(a){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(a<14)n.append(String.fromCharCode(a+44));else{if(!(a<40))throw new fe;n.append(String.fromCharCode(a+51))}}}}while(t.available()>0)},i.parseTwoBytes=function(t,n,s){var h=(t<<8)+n-1,g=Math.floor(h/1600);s[0]=g,h-=1600*g,g=Math.floor(h/40),s[1]=g,s[2]=h-40*g},i.decodeEdifactSegment=function(t,n){do{if(t.available()<=16)return;for(var s=0;s<4;s++){var h=t.readBits(6);if(31===h){var g=8-t.getBitOffset();return void(8!==g&&t.readBits(g))}32&h||(h|=64),n.append(String.fromCharCode(h))}}while(t.available()>0)},i.decodeBase256Segment=function(t,n,s){var a,h=1+t.getByteOffset(),g=this.unrandomize255State(t.readBits(8),h++);if((a=0===g?t.available()/8|0:g<250?g:250*(g-249)+this.unrandomize255State(t.readBits(8),h++))<0)throw new fe;for(var o=new Uint8Array(a),l=0;l<a;l++){if(t.available()<8)throw new fe;o[l]=this.unrandomize255State(t.readBits(8),h++)}s.push(o);try{n.append(Gn.decode(o,Nn.ISO88591))}catch(v){throw new Ei("Platform does not support required encoding: "+v.message)}},i.unrandomize255State=function(t,n){var h=t-(149*n%255+1);return h>=0?h:h+256},i.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],i.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],i.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],i.TEXT_SHIFT2_SET_CHARS=i.C40_SHIFT2_SET_CHARS,i.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)],i}();const Ra=qr;var eo=function(){function i(){this.rsDecoder=new Lo(wt.DATA_MATRIX_FIELD_256)}return i.prototype.decode=function(t){var n,s,h=new vu(t),g=h.getVersion(),a=h.readCodewords(),o=ac.getDataBlocks(a,g),l=0;try{for(var v=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),E=v.next();!E.done;E=v.next())l+=E.value.getNumDataCodewords()}catch(Ct){n={error:Ct}}finally{try{E&&!E.done&&(s=v.return)&&s.call(v)}finally{if(n)throw n.error}}for(var R=new Uint8Array(l),k=o.length,Z=0;Z<k;Z++){var se=o[Z],Me=se.getCodewords(),Ue=se.getNumDataCodewords();this.correctErrors(Me,Ue);for(var ze=0;ze<Ue;ze++)R[ze*k+Z]=Me[ze]}return Ra.decode(R)},i.prototype.correctErrors=function(t,n){var s=new Int32Array(t);try{this.rsDecoder.decode(s,t.length-n)}catch(g){throw new ct}for(var h=0;h<n;h++)t[h]=s[h]},i}();const Lr=eo;var Oa=function(){function i(t){this.image=t,this.rectangleDetector=new Se(this.image)}return i.prototype.detect=function(){var t=this.rectangleDetector.detect(),n=this.detectSolid1(t);if((n=this.detectSolid2(n))[3]=this.correctTopRight(n),!n[3])throw new Kt;var s=(n=this.shiftToModuleCenter(n))[0],h=n[1],g=n[2],a=n[3],o=this.transitionsBetween(s,a)+1,l=this.transitionsBetween(g,a)+1;1==(1&o)&&(o+=1),1==(1&l)&&(l+=1),4*o<7*l&&4*l<7*o&&(o=l=Math.max(o,l));var v=i.sampleGrid(this.image,s,h,g,a,o,l);return new gr(v,[s,h,g,a])},i.shiftPoint=function(t,n,s){var h=(n.getX()-t.getX())/(s+1),g=(n.getY()-t.getY())/(s+1);return new Ln(t.getX()+h,t.getY()+g)},i.moveAway=function(t,n,s){var h=t.getX(),g=t.getY();return h<n?h-=1:h+=1,g<s?g-=1:g+=1,new Ln(h,g)},i.prototype.detectSolid1=function(t){var n=t[0],s=t[1],h=t[3],g=t[2],a=this.transitionsBetween(n,s),o=this.transitionsBetween(s,h),l=this.transitionsBetween(h,g),v=this.transitionsBetween(g,n),E=a,A=[g,n,s,h];return E>o&&(E=o,A[0]=n,A[1]=s,A[2]=h,A[3]=g),E>l&&(E=l,A[0]=s,A[1]=h,A[2]=g,A[3]=n),E>v&&(A[0]=h,A[1]=g,A[2]=n,A[3]=s),A},i.prototype.detectSolid2=function(t){var n=t[0],s=t[1],h=t[2],g=t[3],a=this.transitionsBetween(n,g),o=i.shiftPoint(s,h,4*(a+1)),l=i.shiftPoint(h,s,4*(a+1));return this.transitionsBetween(o,n)<this.transitionsBetween(l,g)?(t[0]=n,t[1]=s,t[2]=h,t[3]=g):(t[0]=s,t[1]=h,t[2]=g,t[3]=n),t},i.prototype.correctTopRight=function(t){var n=t[0],s=t[1],h=t[2],g=t[3],a=this.transitionsBetween(n,g),o=this.transitionsBetween(s,g),l=i.shiftPoint(n,s,4*(o+1)),v=i.shiftPoint(h,s,4*(a+1));a=this.transitionsBetween(l,g),o=this.transitionsBetween(v,g);var E=new Ln(g.getX()+(h.getX()-s.getX())/(a+1),g.getY()+(h.getY()-s.getY())/(a+1)),A=new Ln(g.getX()+(n.getX()-s.getX())/(o+1),g.getY()+(n.getY()-s.getY())/(o+1));return this.isValid(E)?this.isValid(A)?this.transitionsBetween(l,E)+this.transitionsBetween(v,E)>this.transitionsBetween(l,A)+this.transitionsBetween(v,A)?E:A:E:this.isValid(A)?A:null},i.prototype.shiftToModuleCenter=function(t){var n=t[0],s=t[1],h=t[2],g=t[3],a=this.transitionsBetween(n,g)+1,o=this.transitionsBetween(h,g)+1,l=i.shiftPoint(n,s,4*o),v=i.shiftPoint(h,s,4*a);1==(1&(a=this.transitionsBetween(l,g)+1))&&(a+=1),1==(1&(o=this.transitionsBetween(v,g)+1))&&(o+=1);var R,k,E=(n.getX()+s.getX()+h.getX()+g.getX())/4,A=(n.getY()+s.getY()+h.getY()+g.getY())/4;return n=i.moveAway(n,E,A),s=i.moveAway(s,E,A),h=i.moveAway(h,E,A),g=i.moveAway(g,E,A),l=i.shiftPoint(n,s,4*o),l=i.shiftPoint(l,g,4*a),R=i.shiftPoint(s,n,4*o),R=i.shiftPoint(R,h,4*a),v=i.shiftPoint(h,g,4*o),v=i.shiftPoint(v,s,4*a),k=i.shiftPoint(g,h,4*o),[l,R,v,k=i.shiftPoint(k,n,4*a)]},i.prototype.isValid=function(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()},i.sampleGrid=function(t,n,s,h,g,a,o){return on.getInstance().sampleGrid(t,a,o,.5,.5,a-.5,.5,a-.5,o-.5,.5,o-.5,n.getX(),n.getY(),g.getX(),g.getY(),h.getX(),h.getY(),s.getX(),s.getY())},i.prototype.transitionsBetween=function(t,n){var s=Math.trunc(t.getX()),h=Math.trunc(t.getY()),g=Math.trunc(n.getX()),a=Math.trunc(n.getY()),o=Math.abs(a-h)>Math.abs(g-s);if(o){var l=s;s=h,h=l,l=g,g=a,a=l}for(var v=Math.abs(g-s),E=Math.abs(a-h),A=-v/2,R=h<a?1:-1,k=s<g?1:-1,Z=0,se=this.image.get(o?h:s,o?s:h),Me=s,Ue=h;Me!==g;Me+=k){var ze=this.image.get(o?Ue:Me,o?Me:Ue);if(ze!==se&&(Z++,se=ze),(A+=E)>0){if(Ue===a)break;Ue+=R,A-=v}}return Z},i}();const Ri=Oa;var Yc=function(){function i(){this.decoder=new Lr}return i.prototype.decode=function(t,n){var s,h;if(void 0===n&&(n=null),null!=n&&n.has(te.PURE_BARCODE)){var g=i.extractPureBits(t.getBlackMatrix());s=this.decoder.decode(g),h=i.NO_POINTS}else{var a=new Ri(t.getBlackMatrix()).detect();s=this.decoder.decode(a.getBits()),h=a.getPoints()}var o=s.getRawBytes(),l=new jn(s.getText(),o,8*o.length,h,He.DATA_MATRIX,Be.currentTimeMillis()),v=s.getByteSegments();null!=v&&l.putMetadata(ht.BYTE_SEGMENTS,v);var E=s.getECLevel();return null!=E&&l.putMetadata(ht.ERROR_CORRECTION_LEVEL,E),l},i.prototype.reset=function(){},i.extractPureBits=function(t){var n=t.getTopLeftOnBit(),s=t.getBottomRightOnBit();if(null==n||null==s)throw new Kt;var h=this.moduleSize(n,t),g=n[1],o=n[0],v=(s[0]-o+1)/h,E=(s[1]-g+1)/h;if(v<=0||E<=0)throw new Kt;var A=h/2;g+=A,o+=A;for(var R=new Ir(v,E),k=0;k<E;k++)for(var Z=g+k*h,se=0;se<v;se++)t.get(o+se*h,Z)&&R.set(se,k);return R},i.moduleSize=function(t,n){for(var s=n.getWidth(),h=t[0],g=t[1];h<s&&n.get(h,g);)h++;if(h===s)throw new Kt;var a=h-t[0];if(0===a)throw new Kt;return a},i.NO_POINTS=[],i}();const Li=Yc;var Yn=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),qi=(function(i){Yn(function t(n){return void 0===n&&(n=500),i.call(this,new Li,n)||this},i)}(Un),(()=>(function(i){i[i.L=0]="L",i[i.M=1]="M",i[i.Q=2]="Q",i[i.H=3]="H"}(qi||(qi={})),qi))()),qa=function(){function i(t,n,s){this.value=t,this.stringValue=n,this.bits=s,i.FOR_BITS.set(s,this),i.FOR_VALUE.set(t,this)}return i.prototype.getValue=function(){return this.value},i.prototype.getBits=function(){return this.bits},i.fromString=function(t){switch(t){case"L":return i.L;case"M":return i.M;case"Q":return i.Q;case"H":return i.H;default:throw new xe(t+"not available")}},i.prototype.toString=function(){return this.stringValue},i.prototype.equals=function(t){return t instanceof i&&this.value===t.value},i.forBits=function(t){if(t<0||t>=i.FOR_BITS.size)throw new Ke;return i.FOR_BITS.get(t)},i.FOR_BITS=new Map,i.FOR_VALUE=new Map,i.L=new i(qi.L,"L",1),i.M=new i(qi.M,"M",0),i.Q=new i(qi.Q,"Q",3),i.H=new i(qi.H,"H",2),i}();const $a=qa;var da=function(){function i(t){this.errorCorrectionLevel=$a.forBits(t>>3&3),this.dataMask=7&t}return i.numBitsDiffering=function(t,n){return Le.bitCount(t^n)},i.decodeFormatInformation=function(t,n){var s=i.doDecodeFormatInformation(t,n);return null!==s?s:i.doDecodeFormatInformation(t^i.FORMAT_INFO_MASK_QR,n^i.FORMAT_INFO_MASK_QR)},i.doDecodeFormatInformation=function(t,n){var s,h,g=Number.MAX_SAFE_INTEGER,a=0;try{for(var o=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i.FORMAT_INFO_DECODE_LOOKUP),l=o.next();!l.done;l=o.next()){var v=l.value,E=v[0];if(E===t||E===n)return new i(v[1]);var A=i.numBitsDiffering(t,E);A<g&&(a=v[1],g=A),t!==n&&(A=i.numBitsDiffering(n,E))<g&&(a=v[1],g=A)}}catch(R){s={error:R}}finally{try{l&&!l.done&&(h=o.return)&&h.call(o)}finally{if(s)throw s.error}}return g<=3?new i(a):null},i.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},i.prototype.getDataMask=function(){return this.dataMask},i.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},i.prototype.equals=function(t){return t instanceof i&&(this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask)},i.FORMAT_INFO_MASK_QR=21522,i.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],i}();const au=da;var bc=function(){function i(t){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];this.ecCodewordsPerBlock=t,this.ecBlocks=n}return i.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},i.prototype.getNumBlocks=function(){var t,n,s=0,h=this.ecBlocks;try{for(var g=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(h),a=g.next();!a.done;a=g.next())s+=a.value.getCount()}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=g.return)&&n.call(g)}finally{if(t)throw t.error}}return s},i.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},i.prototype.getECBlocks=function(){return this.ecBlocks},i}();const jt=bc;var uu=function(){function i(t,n){this.count=t,this.dataCodewords=n}return i.prototype.getCount=function(){return this.count},i.prototype.getDataCodewords=function(){return this.dataCodewords},i}();const tt=uu;var us=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ma=function(){function i(t,n){for(var s,h,g=[],a=2;a<arguments.length;a++)g[a-2]=arguments[a];this.versionNumber=t,this.alignmentPatternCenters=n,this.ecBlocks=g;var o=0,l=g[0].getECCodewordsPerBlock(),v=g[0].getECBlocks();try{for(var E=us(v),A=E.next();!A.done;A=E.next()){var R=A.value;o+=R.getCount()*(R.getDataCodewords()+l)}}catch(k){s={error:k}}finally{try{A&&!A.done&&(h=E.return)&&h.call(E)}finally{if(s)throw s.error}}this.totalCodewords=o}return i.prototype.getVersionNumber=function(){return this.versionNumber},i.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},i.prototype.getTotalCodewords=function(){return this.totalCodewords},i.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},i.prototype.getECBlocksForLevel=function(t){return this.ecBlocks[t.getValue()]},i.getProvisionalVersionForDimension=function(t){if(t%4!=1)throw new fe;try{return this.getVersionForNumber((t-17)/4)}catch(n){throw new fe}},i.getVersionForNumber=function(t){if(t<1||t>40)throw new Ke;return i.VERSIONS[t-1]},i.decodeVersionInformation=function(t){for(var n=Number.MAX_SAFE_INTEGER,s=0,h=0;h<i.VERSION_DECODE_INFO.length;h++){var g=i.VERSION_DECODE_INFO[h];if(g===t)return i.getVersionForNumber(h+7);var a=au.numBitsDiffering(t,g);a<n&&(s=h+7,n=a)}return n<=3?i.getVersionForNumber(s):null},i.prototype.buildFunctionPattern=function(){var t=this.getDimensionForVersion(),n=new Ir(t);n.setRegion(0,0,9,9),n.setRegion(t-8,0,8,9),n.setRegion(0,t-8,9,8);for(var s=this.alignmentPatternCenters.length,h=0;h<s;h++)for(var g=this.alignmentPatternCenters[h]-2,a=0;a<s;a++)0===h&&(0===a||a===s-1)||h===s-1&&0===a||n.setRegion(this.alignmentPatternCenters[a]-2,g,5,5);return n.setRegion(6,9,1,t-17),n.setRegion(9,6,t-17,1),this.versionNumber>6&&(n.setRegion(t-11,0,3,6),n.setRegion(0,t-11,6,3)),n},i.prototype.toString=function(){return""+this.versionNumber},i.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),i.VERSIONS=[new i(1,new Int32Array(0),new jt(7,new tt(1,19)),new jt(10,new tt(1,16)),new jt(13,new tt(1,13)),new jt(17,new tt(1,9))),new i(2,Int32Array.from([6,18]),new jt(10,new tt(1,34)),new jt(16,new tt(1,28)),new jt(22,new tt(1,22)),new jt(28,new tt(1,16))),new i(3,Int32Array.from([6,22]),new jt(15,new tt(1,55)),new jt(26,new tt(1,44)),new jt(18,new tt(2,17)),new jt(22,new tt(2,13))),new i(4,Int32Array.from([6,26]),new jt(20,new tt(1,80)),new jt(18,new tt(2,32)),new jt(26,new tt(2,24)),new jt(16,new tt(4,9))),new i(5,Int32Array.from([6,30]),new jt(26,new tt(1,108)),new jt(24,new tt(2,43)),new jt(18,new tt(2,15),new tt(2,16)),new jt(22,new tt(2,11),new tt(2,12))),new i(6,Int32Array.from([6,34]),new jt(18,new tt(2,68)),new jt(16,new tt(4,27)),new jt(24,new tt(4,19)),new jt(28,new tt(4,15))),new i(7,Int32Array.from([6,22,38]),new jt(20,new tt(2,78)),new jt(18,new tt(4,31)),new jt(18,new tt(2,14),new tt(4,15)),new jt(26,new tt(4,13),new tt(1,14))),new i(8,Int32Array.from([6,24,42]),new jt(24,new tt(2,97)),new jt(22,new tt(2,38),new tt(2,39)),new jt(22,new tt(4,18),new tt(2,19)),new jt(26,new tt(4,14),new tt(2,15))),new i(9,Int32Array.from([6,26,46]),new jt(30,new tt(2,116)),new jt(22,new tt(3,36),new tt(2,37)),new jt(20,new tt(4,16),new tt(4,17)),new jt(24,new tt(4,12),new tt(4,13))),new i(10,Int32Array.from([6,28,50]),new jt(18,new tt(2,68),new tt(2,69)),new jt(26,new tt(4,43),new tt(1,44)),new jt(24,new tt(6,19),new tt(2,20)),new jt(28,new tt(6,15),new tt(2,16))),new i(11,Int32Array.from([6,30,54]),new jt(20,new tt(4,81)),new jt(30,new tt(1,50),new tt(4,51)),new jt(28,new tt(4,22),new tt(4,23)),new jt(24,new tt(3,12),new tt(8,13))),new i(12,Int32Array.from([6,32,58]),new jt(24,new tt(2,92),new tt(2,93)),new jt(22,new tt(6,36),new tt(2,37)),new jt(26,new tt(4,20),new tt(6,21)),new jt(28,new tt(7,14),new tt(4,15))),new i(13,Int32Array.from([6,34,62]),new jt(26,new tt(4,107)),new jt(22,new tt(8,37),new tt(1,38)),new jt(24,new tt(8,20),new tt(4,21)),new jt(22,new tt(12,11),new tt(4,12))),new i(14,Int32Array.from([6,26,46,66]),new jt(30,new tt(3,115),new tt(1,116)),new jt(24,new tt(4,40),new tt(5,41)),new jt(20,new tt(11,16),new tt(5,17)),new jt(24,new tt(11,12),new tt(5,13))),new i(15,Int32Array.from([6,26,48,70]),new jt(22,new tt(5,87),new tt(1,88)),new jt(24,new tt(5,41),new tt(5,42)),new jt(30,new tt(5,24),new tt(7,25)),new jt(24,new tt(11,12),new tt(7,13))),new i(16,Int32Array.from([6,26,50,74]),new jt(24,new tt(5,98),new tt(1,99)),new jt(28,new tt(7,45),new tt(3,46)),new jt(24,new tt(15,19),new tt(2,20)),new jt(30,new tt(3,15),new tt(13,16))),new i(17,Int32Array.from([6,30,54,78]),new jt(28,new tt(1,107),new tt(5,108)),new jt(28,new tt(10,46),new tt(1,47)),new jt(28,new tt(1,22),new tt(15,23)),new jt(28,new tt(2,14),new tt(17,15))),new i(18,Int32Array.from([6,30,56,82]),new jt(30,new tt(5,120),new tt(1,121)),new jt(26,new tt(9,43),new tt(4,44)),new jt(28,new tt(17,22),new tt(1,23)),new jt(28,new tt(2,14),new tt(19,15))),new i(19,Int32Array.from([6,30,58,86]),new jt(28,new tt(3,113),new tt(4,114)),new jt(26,new tt(3,44),new tt(11,45)),new jt(26,new tt(17,21),new tt(4,22)),new jt(26,new tt(9,13),new tt(16,14))),new i(20,Int32Array.from([6,34,62,90]),new jt(28,new tt(3,107),new tt(5,108)),new jt(26,new tt(3,41),new tt(13,42)),new jt(30,new tt(15,24),new tt(5,25)),new jt(28,new tt(15,15),new tt(10,16))),new i(21,Int32Array.from([6,28,50,72,94]),new jt(28,new tt(4,116),new tt(4,117)),new jt(26,new tt(17,42)),new jt(28,new tt(17,22),new tt(6,23)),new jt(30,new tt(19,16),new tt(6,17))),new i(22,Int32Array.from([6,26,50,74,98]),new jt(28,new tt(2,111),new tt(7,112)),new jt(28,new tt(17,46)),new jt(30,new tt(7,24),new tt(16,25)),new jt(24,new tt(34,13))),new i(23,Int32Array.from([6,30,54,78,102]),new jt(30,new tt(4,121),new tt(5,122)),new jt(28,new tt(4,47),new tt(14,48)),new jt(30,new tt(11,24),new tt(14,25)),new jt(30,new tt(16,15),new tt(14,16))),new i(24,Int32Array.from([6,28,54,80,106]),new jt(30,new tt(6,117),new tt(4,118)),new jt(28,new tt(6,45),new tt(14,46)),new jt(30,new tt(11,24),new tt(16,25)),new jt(30,new tt(30,16),new tt(2,17))),new i(25,Int32Array.from([6,32,58,84,110]),new jt(26,new tt(8,106),new tt(4,107)),new jt(28,new tt(8,47),new tt(13,48)),new jt(30,new tt(7,24),new tt(22,25)),new jt(30,new tt(22,15),new tt(13,16))),new i(26,Int32Array.from([6,30,58,86,114]),new jt(28,new tt(10,114),new tt(2,115)),new jt(28,new tt(19,46),new tt(4,47)),new jt(28,new tt(28,22),new tt(6,23)),new jt(30,new tt(33,16),new tt(4,17))),new i(27,Int32Array.from([6,34,62,90,118]),new jt(30,new tt(8,122),new tt(4,123)),new jt(28,new tt(22,45),new tt(3,46)),new jt(30,new tt(8,23),new tt(26,24)),new jt(30,new tt(12,15),new tt(28,16))),new i(28,Int32Array.from([6,26,50,74,98,122]),new jt(30,new tt(3,117),new tt(10,118)),new jt(28,new tt(3,45),new tt(23,46)),new jt(30,new tt(4,24),new tt(31,25)),new jt(30,new tt(11,15),new tt(31,16))),new i(29,Int32Array.from([6,30,54,78,102,126]),new jt(30,new tt(7,116),new tt(7,117)),new jt(28,new tt(21,45),new tt(7,46)),new jt(30,new tt(1,23),new tt(37,24)),new jt(30,new tt(19,15),new tt(26,16))),new i(30,Int32Array.from([6,26,52,78,104,130]),new jt(30,new tt(5,115),new tt(10,116)),new jt(28,new tt(19,47),new tt(10,48)),new jt(30,new tt(15,24),new tt(25,25)),new jt(30,new tt(23,15),new tt(25,16))),new i(31,Int32Array.from([6,30,56,82,108,134]),new jt(30,new tt(13,115),new tt(3,116)),new jt(28,new tt(2,46),new tt(29,47)),new jt(30,new tt(42,24),new tt(1,25)),new jt(30,new tt(23,15),new tt(28,16))),new i(32,Int32Array.from([6,34,60,86,112,138]),new jt(30,new tt(17,115)),new jt(28,new tt(10,46),new tt(23,47)),new jt(30,new tt(10,24),new tt(35,25)),new jt(30,new tt(19,15),new tt(35,16))),new i(33,Int32Array.from([6,30,58,86,114,142]),new jt(30,new tt(17,115),new tt(1,116)),new jt(28,new tt(14,46),new tt(21,47)),new jt(30,new tt(29,24),new tt(19,25)),new jt(30,new tt(11,15),new tt(46,16))),new i(34,Int32Array.from([6,34,62,90,118,146]),new jt(30,new tt(13,115),new tt(6,116)),new jt(28,new tt(14,46),new tt(23,47)),new jt(30,new tt(44,24),new tt(7,25)),new jt(30,new tt(59,16),new tt(1,17))),new i(35,Int32Array.from([6,30,54,78,102,126,150]),new jt(30,new tt(12,121),new tt(7,122)),new jt(28,new tt(12,47),new tt(26,48)),new jt(30,new tt(39,24),new tt(14,25)),new jt(30,new tt(22,15),new tt(41,16))),new i(36,Int32Array.from([6,24,50,76,102,128,154]),new jt(30,new tt(6,121),new tt(14,122)),new jt(28,new tt(6,47),new tt(34,48)),new jt(30,new tt(46,24),new tt(10,25)),new jt(30,new tt(2,15),new tt(64,16))),new i(37,Int32Array.from([6,28,54,80,106,132,158]),new jt(30,new tt(17,122),new tt(4,123)),new jt(28,new tt(29,46),new tt(14,47)),new jt(30,new tt(49,24),new tt(10,25)),new jt(30,new tt(24,15),new tt(46,16))),new i(38,Int32Array.from([6,32,58,84,110,136,162]),new jt(30,new tt(4,122),new tt(18,123)),new jt(28,new tt(13,46),new tt(32,47)),new jt(30,new tt(48,24),new tt(14,25)),new jt(30,new tt(42,15),new tt(32,16))),new i(39,Int32Array.from([6,26,54,82,110,138,166]),new jt(30,new tt(20,117),new tt(4,118)),new jt(28,new tt(40,47),new tt(7,48)),new jt(30,new tt(43,24),new tt(22,25)),new jt(30,new tt(10,15),new tt(67,16))),new i(40,Int32Array.from([6,30,58,86,114,142,170]),new jt(30,new tt(19,118),new tt(6,119)),new jt(28,new tt(18,47),new tt(31,48)),new jt(30,new tt(34,24),new tt(34,25)),new jt(30,new tt(20,15),new tt(61,16)))],i}();const Ss=Ma;var Gt=(()=>(function(i){i[i.DATA_MASK_000=0]="DATA_MASK_000",i[i.DATA_MASK_001=1]="DATA_MASK_001",i[i.DATA_MASK_010=2]="DATA_MASK_010",i[i.DATA_MASK_011=3]="DATA_MASK_011",i[i.DATA_MASK_100=4]="DATA_MASK_100",i[i.DATA_MASK_101=5]="DATA_MASK_101",i[i.DATA_MASK_110=6]="DATA_MASK_110",i[i.DATA_MASK_111=7]="DATA_MASK_111"}(Gt||(Gt={})),Gt))(),ku=function(){function i(t,n){this.value=t,this.isMasked=n}return i.prototype.unmaskBitMatrix=function(t,n){for(var s=0;s<n;s++)for(var h=0;h<n;h++)this.isMasked(s,h)&&t.flip(h,s)},i.values=new Map([[Gt.DATA_MASK_000,new i(Gt.DATA_MASK_000,function(t,n){return 0==(t+n&1)})],[Gt.DATA_MASK_001,new i(Gt.DATA_MASK_001,function(t,n){return 0==(1&t)})],[Gt.DATA_MASK_010,new i(Gt.DATA_MASK_010,function(t,n){return n%3==0})],[Gt.DATA_MASK_011,new i(Gt.DATA_MASK_011,function(t,n){return(t+n)%3==0})],[Gt.DATA_MASK_100,new i(Gt.DATA_MASK_100,function(t,n){return 0==(Math.floor(t/2)+Math.floor(n/3)&1)})],[Gt.DATA_MASK_101,new i(Gt.DATA_MASK_101,function(t,n){return t*n%6==0})],[Gt.DATA_MASK_110,new i(Gt.DATA_MASK_110,function(t,n){return t*n%6<3})],[Gt.DATA_MASK_111,new i(Gt.DATA_MASK_111,function(t,n){return 0==(t+n+t*n%3&1)})]]),i}();const zo=ku;var Dc=function(){function i(t){var n=t.getHeight();if(n<21||1!=(3&n))throw new fe;this.bitMatrix=t}return i.prototype.readFormatInformation=function(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;for(var t=0,n=0;n<6;n++)t=this.copyBit(n,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(var s=5;s>=0;s--)t=this.copyBit(8,s,t);var h=this.bitMatrix.getHeight(),g=0,a=h-7;for(s=h-1;s>=a;s--)g=this.copyBit(8,s,g);for(n=h-8;n<h;n++)g=this.copyBit(n,8,g);if(this.parsedFormatInfo=au.decodeFormatInformation(t,g),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new fe},i.prototype.readVersion=function(){if(null!=this.parsedVersion)return this.parsedVersion;var t=this.bitMatrix.getHeight(),n=Math.floor((t-17)/4);if(n<=6)return Ss.getVersionForNumber(n);for(var s=0,h=t-11,g=5;g>=0;g--)for(var a=t-9;a>=h;a--)s=this.copyBit(a,g,s);var o=Ss.decodeVersionInformation(s);if(null!==o&&o.getDimensionForVersion()===t)return this.parsedVersion=o,o;for(s=0,a=5;a>=0;a--)for(g=t-9;g>=h;g--)s=this.copyBit(a,g,s);if(null!==(o=Ss.decodeVersionInformation(s))&&o.getDimensionForVersion()===t)return this.parsedVersion=o,o;throw new fe},i.prototype.copyBit=function(t,n,s){return(this.isMirror?this.bitMatrix.get(n,t):this.bitMatrix.get(t,n))?s<<1|1:s<<1},i.prototype.readCodewords=function(){var t=this.readFormatInformation(),n=this.readVersion(),s=zo.values.get(t.getDataMask()),h=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,h);for(var g=n.buildFunctionPattern(),a=!0,o=new Uint8Array(n.getTotalCodewords()),l=0,v=0,E=0,A=h-1;A>0;A-=2){6===A&&A--;for(var R=0;R<h;R++)for(var k=a?h-1-R:R,Z=0;Z<2;Z++)g.get(A-Z,k)||(E++,v<<=1,this.bitMatrix.get(A-Z,k)&&(v|=1),8===E&&(o[l++]=v,E=0,v=0));a=!a}if(l!==n.getTotalCodewords())throw new fe;return o},i.prototype.remask=function(){if(null!==this.parsedFormatInfo){var t=zo.values[this.parsedFormatInfo.getDataMask()],n=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,n)}},i.prototype.setMirror=function(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t},i.prototype.mirror=function(){for(var t=this.bitMatrix,n=0,s=t.getWidth();n<s;n++)for(var h=n+1,g=t.getHeight();h<g;h++)t.get(n,h)!==t.get(h,n)&&(t.flip(h,n),t.flip(n,h))},i}();const Fu=Dc;var Bi=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Tc=function(){function i(t,n){this.numDataCodewords=t,this.codewords=n}return i.getDataBlocks=function(t,n,s){var h,g,a,o;if(t.length!==n.getTotalCodewords())throw new Ke;var l=n.getECBlocksForLevel(s),v=0,E=l.getECBlocks();try{for(var A=Bi(E),R=A.next();!R.done;R=A.next())v+=(k=R.value).getCount()}catch(Ts){h={error:Ts}}finally{try{R&&!R.done&&(g=A.return)&&g.call(A)}finally{if(h)throw h.error}}var Z=new Array(v),se=0;try{for(var Me=Bi(E),Ue=Me.next();!Ue.done;Ue=Me.next())for(var k=Ue.value,ze=0;ze<k.getCount();ze++){var Ct=k.getDataCodewords(),Mt=l.getECCodewordsPerBlock()+Ct;Z[se++]=new i(Ct,new Uint8Array(Mt))}}catch(Ts){a={error:Ts}}finally{try{Ue&&!Ue.done&&(o=Me.return)&&o.call(Me)}finally{if(a)throw a.error}}for(var gn=Z[0].codewords.length,Rn=Z.length-1;Rn>=0&&Z[Rn].codewords.length!==gn;)Rn--;Rn++;var Sr=gn-l.getECCodewordsPerBlock(),ni=0;for(ze=0;ze<Sr;ze++)for(var di=0;di<se;di++)Z[di].codewords[ze]=t[ni++];for(di=Rn;di<se;di++)Z[di].codewords[Sr]=t[ni++];var sa=Z[0].codewords.length;for(ze=Sr;ze<sa;ze++)for(di=0;di<se;di++)Z[di].codewords[di<Rn?ze:ze+1]=t[ni++];return Z},i.prototype.getNumDataCodewords=function(){return this.numDataCodewords},i.prototype.getCodewords=function(){return this.codewords},i}();const Eu=Tc;var Ps=(()=>(function(i){i[i.TERMINATOR=0]="TERMINATOR",i[i.NUMERIC=1]="NUMERIC",i[i.ALPHANUMERIC=2]="ALPHANUMERIC",i[i.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",i[i.BYTE=4]="BYTE",i[i.ECI=5]="ECI",i[i.KANJI=6]="KANJI",i[i.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",i[i.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",i[i.HANZI=9]="HANZI"}(Ps||(Ps={})),Ps))(),wu=function(){function i(t,n,s,h){this.value=t,this.stringValue=n,this.characterCountBitsForVersions=s,this.bits=h,i.FOR_BITS.set(h,this),i.FOR_VALUE.set(t,this)}return i.forBits=function(t){var n=i.FOR_BITS.get(t);if(void 0===n)throw new Ke;return n},i.prototype.getCharacterCountBits=function(t){var n=t.getVersionNumber();return this.characterCountBitsForVersions[n<=9?0:n<=26?1:2]},i.prototype.getValue=function(){return this.value},i.prototype.getBits=function(){return this.bits},i.prototype.equals=function(t){return t instanceof i&&this.value===t.value},i.prototype.toString=function(){return this.stringValue},i.FOR_BITS=new Map,i.FOR_VALUE=new Map,i.TERMINATOR=new i(Ps.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),i.NUMERIC=new i(Ps.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),i.ALPHANUMERIC=new i(Ps.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),i.STRUCTURED_APPEND=new i(Ps.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),i.BYTE=new i(Ps.BYTE,"BYTE",Int32Array.from([8,16,16]),4),i.ECI=new i(Ps.ECI,"ECI",Int32Array.from([0,0,0]),7),i.KANJI=new i(Ps.KANJI,"KANJI",Int32Array.from([8,10,12]),8),i.FNC1_FIRST_POSITION=new i(Ps.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),i.FNC1_SECOND_POSITION=new i(Ps.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),i.HANZI=new i(Ps.HANZI,"HANZI",Int32Array.from([8,10,12]),13),i}();const Co=wu;var Rc=function(){function i(){}return i.decode=function(t,n,s,h){var g=new yu(t),a=new En,o=new Array,l=-1,v=-1;try{var E=null,A=!1,R=void 0;do{if(g.available()<4)R=Co.TERMINATOR;else{var k=g.readBits(4);R=Co.forBits(k)}switch(R){case Co.TERMINATOR:break;case Co.FNC1_FIRST_POSITION:case Co.FNC1_SECOND_POSITION:A=!0;break;case Co.STRUCTURED_APPEND:if(g.available()<16)throw new fe;l=g.readBits(8),v=g.readBits(8);break;case Co.ECI:var Z=i.parseECIValue(g);if(null===(E=Dt.getCharacterSetECIByValue(Z)))throw new fe;break;case Co.HANZI:var se=g.readBits(4),Me=g.readBits(R.getCharacterCountBits(n));se===i.GB2312_SUBSET&&i.decodeHanziSegment(g,a,Me);break;default:var Ue=g.readBits(R.getCharacterCountBits(n));switch(R){case Co.NUMERIC:i.decodeNumericSegment(g,a,Ue);break;case Co.ALPHANUMERIC:i.decodeAlphanumericSegment(g,a,Ue,A);break;case Co.BYTE:i.decodeByteSegment(g,a,Ue,E,o,h);break;case Co.KANJI:i.decodeKanjiSegment(g,a,Ue);break;default:throw new fe}}}while(R!==Co.TERMINATOR)}catch(ze){throw new fe}return new $t(t,a.toString(),0===o.length?null:o,null===s?null:s.toString(),l,v)},i.decodeHanziSegment=function(t,n,s){if(13*s>t.available())throw new fe;for(var h=new Uint8Array(2*s),g=0;s>0;){var a=t.readBits(13),o=a/96<<8&4294967295|a%96;h[g]=(o+=o<959?41377:42657)>>8&255,h[g+1]=255&o,g+=2,s--}try{n.append(Gn.decode(h,Nn.GB2312))}catch(l){throw new fe(l)}},i.decodeKanjiSegment=function(t,n,s){if(13*s>t.available())throw new fe;for(var h=new Uint8Array(2*s),g=0;s>0;){var a=t.readBits(13),o=a/192<<8&4294967295|a%192;h[g]=(o+=o<7936?33088:49472)>>8,h[g+1]=o,g+=2,s--}try{n.append(Gn.decode(h,Nn.SHIFT_JIS))}catch(l){throw new fe(l)}},i.decodeByteSegment=function(t,n,s,h,g,a){if(8*s>t.available())throw new fe;for(var o=new Uint8Array(s),l=0;l<s;l++)o[l]=t.readBits(8);var v;v=null===h?Nn.guessEncoding(o,a):h.getName();try{n.append(Gn.decode(o,v))}catch(E){throw new fe(E)}g.push(o)},i.toAlphaNumericChar=function(t){if(t>=i.ALPHANUMERIC_CHARS.length)throw new fe;return i.ALPHANUMERIC_CHARS[t]},i.decodeAlphanumericSegment=function(t,n,s,h){for(var g=n.length();s>1;){if(t.available()<11)throw new fe;var a=t.readBits(11);n.append(i.toAlphaNumericChar(Math.floor(a/45))),n.append(i.toAlphaNumericChar(a%45)),s-=2}if(1===s){if(t.available()<6)throw new fe;n.append(i.toAlphaNumericChar(t.readBits(6)))}if(h)for(var o=g;o<n.length();o++)"%"===n.charAt(o)&&(o<n.length()-1&&"%"===n.charAt(o+1)?n.deleteCharAt(o+1):n.setCharAt(o,String.fromCharCode(29)))},i.decodeNumericSegment=function(t,n,s){for(;s>=3;){if(t.available()<10)throw new fe;var h=t.readBits(10);if(h>=1e3)throw new fe;n.append(i.toAlphaNumericChar(Math.floor(h/100))),n.append(i.toAlphaNumericChar(Math.floor(h/10)%10)),n.append(i.toAlphaNumericChar(h%10)),s-=3}if(2===s){if(t.available()<7)throw new fe;var g=t.readBits(7);if(g>=100)throw new fe;n.append(i.toAlphaNumericChar(Math.floor(g/10))),n.append(i.toAlphaNumericChar(g%10))}else if(1===s){if(t.available()<4)throw new fe;var a=t.readBits(4);if(a>=10)throw new fe;n.append(i.toAlphaNumericChar(a))}},i.parseECIValue=function(t){var n=t.readBits(8);if(!(128&n))return 127&n;if(128==(192&n))return(63&n)<<8&4294967295|t.readBits(8);if(192==(224&n))return(31&n)<<16&4294967295|t.readBits(16);throw new fe},i.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",i.GB2312_SUBSET=1,i}();const ha=Rc;var Xu=function(){function i(t){this.mirrored=t}return i.prototype.isMirrored=function(){return this.mirrored},i.prototype.applyMirroredCorrection=function(t){if(this.mirrored&&null!==t&&!(t.length<3)){var n=t[0];t[0]=t[2],t[2]=n}},i}();const Na=Xu;var Lu=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},to=function(){function i(){this.rsDecoder=new Lo(wt.QR_CODE_FIELD_256)}return i.prototype.decodeBooleanArray=function(t,n){return this.decodeBitMatrix(Ir.parseFromBooleanArray(t),n)},i.prototype.decodeBitMatrix=function(t,n){var s=new Fu(t),h=null;try{return this.decodeBitMatrixParser(s,n)}catch(a){h=a}try{s.remask(),s.setMirror(!0),s.readVersion(),s.readFormatInformation(),s.mirror();var g=this.decodeBitMatrixParser(s,n);return g.setOther(new Na(!0)),g}catch(a){throw null!==h?h:a}},i.prototype.decodeBitMatrixParser=function(t,n){var s,h,g,a,o=t.readVersion(),l=t.readFormatInformation().getErrorCorrectionLevel(),v=t.readCodewords(),E=Eu.getDataBlocks(v,o,l),A=0;try{for(var R=Lu(E),k=R.next();!k.done;k=R.next())A+=(Z=k.value).getNumDataCodewords()}catch(Rn){s={error:Rn}}finally{try{k&&!k.done&&(h=R.return)&&h.call(R)}finally{if(s)throw s.error}}var se=new Uint8Array(A),Me=0;try{for(var Ue=Lu(E),ze=Ue.next();!ze.done;ze=Ue.next()){var Z,Ct=(Z=ze.value).getCodewords(),Mt=Z.getNumDataCodewords();this.correctErrors(Ct,Mt);for(var gn=0;gn<Mt;gn++)se[Me++]=Ct[gn]}}catch(Rn){g={error:Rn}}finally{try{ze&&!ze.done&&(a=Ue.return)&&a.call(Ue)}finally{if(g)throw g.error}}return ha.decode(se,o,l,n)},i.prototype.correctErrors=function(t,n){var s=new Int32Array(t);try{this.rsDecoder.decode(s,t.length-n)}catch(g){throw new ct}for(var h=0;h<n;h++)t[h]=s[h]},i}();const Qu=to;var fa=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Ca=function(i){function t(n,s,h){var g=i.call(this,n,s)||this;return g.estimatedModuleSize=h,g}return fa(t,i),t.prototype.aboutEquals=function(n,s,h){if(Math.abs(s-this.getY())<=n&&Math.abs(h-this.getX())<=n){var g=Math.abs(n-this.estimatedModuleSize);return g<=1||g<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(n,s,h){return new t((this.getX()+s)/2,(this.getY()+n)/2,(this.estimatedModuleSize+h)/2)},t}(Ln);const ks=Ca;var so=function(){function i(t,n,s,h,g,a,o){this.image=t,this.startX=n,this.startY=s,this.width=h,this.height=g,this.moduleSize=a,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return i.prototype.find=function(){for(var t=this.startX,n=this.height,h=t+this.width,g=this.startY+n/2,a=new Int32Array(3),o=this.image,l=0;l<n;l++){var v=g+(1&l?-Math.floor((l+1)/2):Math.floor((l+1)/2));a[0]=0,a[1]=0,a[2]=0;for(var E=t;E<h&&!o.get(E,v);)E++;for(var A=0;E<h;){if(o.get(E,v))if(1===A)a[1]++;else if(2===A){var R;if(this.foundPatternCross(a)&&null!==(R=this.handlePossibleCenter(a,v,E)))return R;a[0]=a[2],a[1]=1,a[2]=0,A=1}else a[++A]++;else 1===A&&A++,a[A]++;E++}if(this.foundPatternCross(a)&&null!==(R=this.handlePossibleCenter(a,v,h)))return R}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new Kt},i.centerFromEnd=function(t,n){return n-t[2]-t[1]/2},i.prototype.foundPatternCross=function(t){for(var n=this.moduleSize,s=n/2,h=0;h<3;h++)if(Math.abs(n-t[h])>=s)return!1;return!0},i.prototype.crossCheckVertical=function(t,n,s,h){var g=this.image,a=g.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;for(var l=t;l>=0&&g.get(n,l)&&o[1]<=s;)o[1]++,l--;if(l<0||o[1]>s)return NaN;for(;l>=0&&!g.get(n,l)&&o[0]<=s;)o[0]++,l--;if(o[0]>s)return NaN;for(l=t+1;l<a&&g.get(n,l)&&o[1]<=s;)o[1]++,l++;if(l===a||o[1]>s)return NaN;for(;l<a&&!g.get(n,l)&&o[2]<=s;)o[2]++,l++;return o[2]>s||5*Math.abs(o[0]+o[1]+o[2]-h)>=2*h?NaN:this.foundPatternCross(o)?i.centerFromEnd(o,l):NaN},i.prototype.handlePossibleCenter=function(t,n,s){var h,g,a=t[0]+t[1]+t[2],o=i.centerFromEnd(t,s),l=this.crossCheckVertical(n,o,2*t[1],a);if(!isNaN(l)){var v=(t[0]+t[1]+t[2])/3;try{for(var E=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.possibleCenters),A=E.next();!A.done;A=E.next()){var R=A.value;if(R.aboutEquals(v,l,o))return R.combineEstimate(l,o,v)}}catch(Z){h={error:Z}}finally{try{A&&!A.done&&(g=E.return)&&g.call(E)}finally{if(h)throw h.error}}var k=new ks(o,l,v);this.possibleCenters.push(k),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(k)}return null},i}();const Za=so;var Fs=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Ro=function(i){function t(n,s,h,g){var a=i.call(this,n,s)||this;return a.estimatedModuleSize=h,a.count=g,void 0===g&&(a.count=1),a}return Fs(t,i),t.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},t.prototype.getCount=function(){return this.count},t.prototype.aboutEquals=function(n,s,h){if(Math.abs(s-this.getY())<=n&&Math.abs(h-this.getX())<=n){var g=Math.abs(n-this.estimatedModuleSize);return g<=1||g<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(n,s,h){var g=this.count+1;return new t((this.count*this.getX()+s)/g,(this.count*this.getY()+n)/g,(this.count*this.estimatedModuleSize+h)/g,g)},t}(Ln);const Ju=Ro;var cc=function(){function i(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}return i.prototype.getBottomLeft=function(){return this.bottomLeft},i.prototype.getTopLeft=function(){return this.topLeft},i.prototype.getTopRight=function(){return this.topRight},i}();const fl=cc;var Oo=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ka=function(){function i(t,n){this.image=t,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}return i.prototype.getImage=function(){return this.image},i.prototype.getPossibleCenters=function(){return this.possibleCenters},i.prototype.find=function(t){var n=null!=t&&void 0!==t.get(te.TRY_HARDER),s=null!=t&&void 0!==t.get(te.PURE_BARCODE),h=this.image,g=h.getHeight(),a=h.getWidth(),o=Math.floor(3*g/(4*i.MAX_MODULES));(o<i.MIN_SKIP||n)&&(o=i.MIN_SKIP);for(var l=!1,v=new Int32Array(5),E=o-1;E<g&&!l;E+=o){v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0;for(var A=0,R=0;R<a;R++)if(h.get(R,E))1==(1&A)&&A++,v[A]++;else if(1&A)v[A]++;else if(4===A)if(i.foundPatternCross(v)){if(!0!==this.handlePossibleCenter(v,E,R,s)){v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,A=3;continue}if(o=2,!0===this.hasSkipped)l=this.haveMultiplyConfirmedCenters();else{var Z=this.findRowSkip();Z>v[2]&&(E+=Z-v[2]-o,R=a-1)}A=0,v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0}else v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,A=3;else v[++A]++;i.foundPatternCross(v)&&!0===this.handlePossibleCenter(v,E,a,s)&&(o=v[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}var se=this.selectBestPatterns();return Ln.orderBestPatterns(se),new fl(se)},i.centerFromEnd=function(t,n){return n-t[4]-t[3]-t[2]/2},i.foundPatternCross=function(t){for(var n=0,s=0;s<5;s++){var h=t[s];if(0===h)return!1;n+=h}if(n<7)return!1;var g=n/7,a=g/2;return Math.abs(g-t[0])<a&&Math.abs(g-t[1])<a&&Math.abs(3*g-t[2])<3*a&&Math.abs(g-t[3])<a&&Math.abs(g-t[4])<a},i.prototype.getCrossCheckStateCount=function(){var t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t},i.prototype.crossCheckDiagonal=function(t,n,s,h){for(var g=this.getCrossCheckStateCount(),a=0,o=this.image;t>=a&&n>=a&&o.get(n-a,t-a);)g[2]++,a++;if(t<a||n<a)return!1;for(;t>=a&&n>=a&&!o.get(n-a,t-a)&&g[1]<=s;)g[1]++,a++;if(t<a||n<a||g[1]>s)return!1;for(;t>=a&&n>=a&&o.get(n-a,t-a)&&g[0]<=s;)g[0]++,a++;if(g[0]>s)return!1;var l=o.getHeight(),v=o.getWidth();for(a=1;t+a<l&&n+a<v&&o.get(n+a,t+a);)g[2]++,a++;if(t+a>=l||n+a>=v)return!1;for(;t+a<l&&n+a<v&&!o.get(n+a,t+a)&&g[3]<s;)g[3]++,a++;if(t+a>=l||n+a>=v||g[3]>=s)return!1;for(;t+a<l&&n+a<v&&o.get(n+a,t+a)&&g[4]<s;)g[4]++,a++;return!(g[4]>=s)&&Math.abs(g[0]+g[1]+g[2]+g[3]+g[4]-h)<2*h&&i.foundPatternCross(g)},i.prototype.crossCheckVertical=function(t,n,s,h){for(var g=this.image,a=g.getHeight(),o=this.getCrossCheckStateCount(),l=t;l>=0&&g.get(n,l);)o[2]++,l--;if(l<0)return NaN;for(;l>=0&&!g.get(n,l)&&o[1]<=s;)o[1]++,l--;if(l<0||o[1]>s)return NaN;for(;l>=0&&g.get(n,l)&&o[0]<=s;)o[0]++,l--;if(o[0]>s)return NaN;for(l=t+1;l<a&&g.get(n,l);)o[2]++,l++;if(l===a)return NaN;for(;l<a&&!g.get(n,l)&&o[3]<s;)o[3]++,l++;if(l===a||o[3]>=s)return NaN;for(;l<a&&g.get(n,l)&&o[4]<s;)o[4]++,l++;return o[4]>=s||5*Math.abs(o[0]+o[1]+o[2]+o[3]+o[4]-h)>=2*h?NaN:i.foundPatternCross(o)?i.centerFromEnd(o,l):NaN},i.prototype.crossCheckHorizontal=function(t,n,s,h){for(var g=this.image,a=g.getWidth(),o=this.getCrossCheckStateCount(),l=t;l>=0&&g.get(l,n);)o[2]++,l--;if(l<0)return NaN;for(;l>=0&&!g.get(l,n)&&o[1]<=s;)o[1]++,l--;if(l<0||o[1]>s)return NaN;for(;l>=0&&g.get(l,n)&&o[0]<=s;)o[0]++,l--;if(o[0]>s)return NaN;for(l=t+1;l<a&&g.get(l,n);)o[2]++,l++;if(l===a)return NaN;for(;l<a&&!g.get(l,n)&&o[3]<s;)o[3]++,l++;if(l===a||o[3]>=s)return NaN;for(;l<a&&g.get(l,n)&&o[4]<s;)o[4]++,l++;return o[4]>=s||5*Math.abs(o[0]+o[1]+o[2]+o[3]+o[4]-h)>=h?NaN:i.foundPatternCross(o)?i.centerFromEnd(o,l):NaN},i.prototype.handlePossibleCenter=function(t,n,s,h){var g=t[0]+t[1]+t[2]+t[3]+t[4],a=i.centerFromEnd(t,s),o=this.crossCheckVertical(n,Math.floor(a),t[2],g);if(!isNaN(o)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(o),t[2],g),!isNaN(a)&&(!h||this.crossCheckDiagonal(Math.floor(o),Math.floor(a),t[2],g)))){for(var l=g/7,v=!1,E=this.possibleCenters,A=0,R=E.length;A<R;A++){var k=E[A];if(k.aboutEquals(l,o,a)){E[A]=k.combineEstimate(o,a,l),v=!0;break}}if(!v){var Z=new Ju(a,o,l);E.push(Z),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(Z)}return!0}return!1},i.prototype.findRowSkip=function(){var t,n;if(this.possibleCenters.length<=1)return 0;var h=null;try{for(var g=Oo(this.possibleCenters),a=g.next();!a.done;a=g.next()){var o=a.value;if(o.getCount()>=i.CENTER_QUORUM){if(null!=h)return this.hasSkipped=!0,Math.floor((Math.abs(h.getX()-o.getX())-Math.abs(h.getY()-o.getY()))/2);h=o}}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=g.return)&&n.call(g)}finally{if(t)throw t.error}}return 0},i.prototype.haveMultiplyConfirmedCenters=function(){var t,n,s,h,g=0,a=0,o=this.possibleCenters.length;try{for(var l=Oo(this.possibleCenters),v=l.next();!v.done;v=l.next())(E=v.value).getCount()>=i.CENTER_QUORUM&&(g++,a+=E.getEstimatedModuleSize())}catch(se){t={error:se}}finally{try{v&&!v.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}if(g<3)return!1;var A=a/o,R=0;try{for(var k=Oo(this.possibleCenters),Z=k.next();!Z.done;Z=k.next()){var E=Z.value;R+=Math.abs(E.getEstimatedModuleSize()-A)}}catch(se){s={error:se}}finally{try{Z&&!Z.done&&(h=k.return)&&h.call(k)}finally{if(s)throw s.error}}return R<=.05*a},i.prototype.selectBestPatterns=function(){var t,n,s,h,g=this.possibleCenters.length;if(g<3)throw new Kt;var o,a=this.possibleCenters;if(g>3){var l=0,v=0;try{for(var E=Oo(this.possibleCenters),A=E.next();!A.done;A=E.next()){var k=A.value.getEstimatedModuleSize();l+=k,v+=k*k}}catch(gn){t={error:gn}}finally{try{A&&!A.done&&(n=E.return)&&n.call(E)}finally{if(t)throw t.error}}o=l/g;var Z=Math.sqrt(v/g-o*o);a.sort(function(gn,Rn){var $n=Math.abs(Rn.getEstimatedModuleSize()-o),Sr=Math.abs(gn.getEstimatedModuleSize()-o);return $n<Sr?-1:$n>Sr?1:0});for(var se=Math.max(.2*o,Z),Me=0;Me<a.length&&a.length>3;Me++)Math.abs(a[Me].getEstimatedModuleSize()-o)>se&&(a.splice(Me,1),Me--)}if(a.length>3){l=0;try{for(var ze=Oo(a),Ct=ze.next();!Ct.done;Ct=ze.next())l+=Ct.value.getEstimatedModuleSize()}catch(Rn){s={error:Rn}}finally{try{Ct&&!Ct.done&&(h=ze.return)&&h.call(ze)}finally{if(s)throw s.error}}o=l/a.length,a.sort(function(Rn,$n){if($n.getCount()===Rn.getCount()){var Sr=Math.abs($n.getEstimatedModuleSize()-o),ni=Math.abs(Rn.getEstimatedModuleSize()-o);return Sr<ni?1:Sr>ni?-1:0}return $n.getCount()-Rn.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]},i.CENTER_QUORUM=2,i.MIN_SKIP=3,i.MAX_MODULES=57,i}();const ds=ka;var F=function(){function i(t){this.image=t}return i.prototype.getImage=function(){return this.image},i.prototype.getResultPointCallback=function(){return this.resultPointCallback},i.prototype.detect=function(t){this.resultPointCallback=null==t?null:t.get(te.NEED_RESULT_POINT_CALLBACK);var s=new ds(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(s)},i.prototype.processFinderPatternInfo=function(t){var n=t.getTopLeft(),s=t.getTopRight(),h=t.getBottomLeft(),g=this.calculateModuleSize(n,s,h);if(g<1)throw new Kt("No pattern found in proccess finder.");var a=i.computeDimension(n,s,h,g),o=Ss.getProvisionalVersionForDimension(a),l=o.getDimensionForVersion()-7,v=null;if(o.getAlignmentPatternCenters().length>0)for(var E=s.getX()-n.getX()+h.getX(),A=s.getY()-n.getY()+h.getY(),R=1-3/l,k=Math.floor(n.getX()+R*(E-n.getX())),Z=Math.floor(n.getY()+R*(A-n.getY())),se=4;se<=16;se<<=1)try{v=this.findAlignmentInRegion(g,k,Z,se);break}catch(Ct){if(!(Ct instanceof Kt))throw Ct}var Me=i.createTransform(n,s,h,v,a),Ue=i.sampleGrid(this.image,Me,a);return new gr(Ue,null===v?[h,n,s]:[h,n,s,v])},i.createTransform=function(t,n,s,h,g){var o,l,v,E,a=g-3.5;return null!==h?(o=h.getX(),l=h.getY(),E=v=a-3):(o=n.getX()-t.getX()+s.getX(),l=n.getY()-t.getY()+s.getY(),v=a,E=a),Bt.quadrilateralToQuadrilateral(3.5,3.5,a,3.5,v,E,3.5,a,t.getX(),t.getY(),n.getX(),n.getY(),o,l,s.getX(),s.getY())},i.sampleGrid=function(t,n,s){return on.getInstance().sampleGridWithTransform(t,s,s,n)},i.computeDimension=function(t,n,s,h){var g=pr.round(Ln.distance(t,n)/h),a=pr.round(Ln.distance(t,s)/h),o=Math.floor((g+a)/2)+7;switch(3&o){case 0:o++;break;case 2:o--;break;case 3:throw new Kt("Dimensions could be not found.")}return o},i.prototype.calculateModuleSize=function(t,n,s){return(this.calculateModuleSizeOneWay(t,n)+this.calculateModuleSizeOneWay(t,s))/2},i.prototype.calculateModuleSizeOneWay=function(t,n){var s=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(n.getX()),Math.floor(n.getY())),h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(s)?h/7:isNaN(h)?s/7:(s+h)/14},i.prototype.sizeOfBlackWhiteBlackRunBothWays=function(t,n,s,h){var g=this.sizeOfBlackWhiteBlackRun(t,n,s,h),a=1,o=t-(s-t);o<0?(a=t/(t-o),o=0):o>=this.image.getWidth()&&(a=(this.image.getWidth()-1-t)/(o-t),o=this.image.getWidth()-1);var l=Math.floor(n-(h-n)*a);return a=1,l<0?(a=n/(n-l),l=0):l>=this.image.getHeight()&&(a=(this.image.getHeight()-1-n)/(l-n),l=this.image.getHeight()-1),o=Math.floor(t+(o-t)*a),(g+=this.sizeOfBlackWhiteBlackRun(t,n,o,l))-1},i.prototype.sizeOfBlackWhiteBlackRun=function(t,n,s,h){var g=Math.abs(h-n)>Math.abs(s-t);if(g){var a=t;t=n,n=a,a=s,s=h,h=a}for(var o=Math.abs(s-t),l=Math.abs(h-n),v=-o/2,E=t<s?1:-1,A=n<h?1:-1,R=0,k=s+E,Z=t,se=n;Z!==k;Z+=E){if(1===R===this.image.get(g?se:Z,g?Z:se)){if(2===R)return pr.distance(Z,se,t,n);R++}if((v+=l)>0){if(se===h)break;se+=A,v-=o}}return 2===R?pr.distance(s+E,h,t,n):NaN},i.prototype.findAlignmentInRegion=function(t,n,s,h){var g=Math.floor(h*t),a=Math.max(0,n-g),o=Math.min(this.image.getWidth()-1,n+g);if(o-a<3*t)throw new Kt("Alignment top exceeds estimated module size.");var l=Math.max(0,s-g),v=Math.min(this.image.getHeight()-1,s+g);if(v-l<3*t)throw new Kt("Alignment bottom exceeds estimated module size.");return new Za(this.image,a,l,o-a,v-l,t,this.resultPointCallback).find()},i}();const B=F;var O=function(){function i(){this.decoder=new Qu}return i.prototype.getDecoder=function(){return this.decoder},i.prototype.decode=function(t,n){var s,h;if(null!=n&&void 0!==n.get(te.PURE_BARCODE)){var g=i.extractPureBits(t.getBlackMatrix());s=this.decoder.decodeBitMatrix(g,n),h=i.NO_POINTS}else{var a=new B(t.getBlackMatrix()).detect(n);s=this.decoder.decodeBitMatrix(a.getBits(),n),h=a.getPoints()}s.getOther()instanceof Na&&s.getOther().applyMirroredCorrection(h);var o=new jn(s.getText(),s.getRawBytes(),void 0,h,He.QR_CODE,void 0),l=s.getByteSegments();null!==l&&o.putMetadata(ht.BYTE_SEGMENTS,l);var v=s.getECLevel();return null!==v&&o.putMetadata(ht.ERROR_CORRECTION_LEVEL,v),s.hasStructuredAppend()&&(o.putMetadata(ht.STRUCTURED_APPEND_SEQUENCE,s.getStructuredAppendSequenceNumber()),o.putMetadata(ht.STRUCTURED_APPEND_PARITY,s.getStructuredAppendParity())),o},i.prototype.reset=function(){},i.extractPureBits=function(t){var n=t.getTopLeftOnBit(),s=t.getBottomRightOnBit();if(null===n||null===s)throw new Kt;var h=this.moduleSize(n,t),g=n[1],a=s[1],o=n[0],l=s[0];if(o>=l||g>=a)throw new Kt;if(a-g!=l-o&&(l=o+(a-g))>=t.getWidth())throw new Kt;var v=Math.round((l-o+1)/h),E=Math.round((a-g+1)/h);if(v<=0||E<=0)throw new Kt;if(E!==v)throw new Kt;var A=Math.floor(h/2);g+=A;var R=(o+=A)+Math.floor((v-1)*h)-l;if(R>0){if(R>A)throw new Kt;o-=R}var k=g+Math.floor((E-1)*h)-a;if(k>0){if(k>A)throw new Kt;g-=k}for(var Z=new Ir(v,E),se=0;se<E;se++)for(var Me=g+Math.floor(se*h),Ue=0;Ue<v;Ue++)t.get(o+Math.floor(Ue*h),Me)&&Z.set(Ue,se);return Z},i.moduleSize=function(t,n){for(var s=n.getHeight(),h=n.getWidth(),g=t[0],a=t[1],o=!0,l=0;g<h&&a<s;){if(o!==n.get(g,a)){if(5==++l)break;o=!o}g++,a++}if(g===h||a===s)throw new Kt;return(g-t[0])/7},i.NO_POINTS=new Array,i}();const V=O;var _e=function(){function i(){}return i.prototype.PDF417Common=function(){},i.getBitCountSum=function(t){return pr.sum(t)},i.toIntArray=function(t){var n,s;if(null==t||!t.length)return i.EMPTY_INT_ARRAY;var h=new Int32Array(t.length),g=0;try{for(var a=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),o=a.next();!o.done;o=a.next())h[g++]=o.value}catch(v){n={error:v}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(n)throw n.error}}return h},i.getCodeword=function(t){var n=mt.binarySearch(i.SYMBOL_TABLE,262143&t);return n<0?-1:(i.CODEWORD_TABLE[n]-1)%i.NUMBER_OF_CODEWORDS},i.MAX_CODEWORDS_IN_BARCODE=(i.NUMBER_OF_CODEWORDS=929)-1,i.MIN_ROWS_IN_BARCODE=3,i.MAX_ROWS_IN_BARCODE=90,i.MODULES_IN_CODEWORD=17,i.MODULES_IN_STOP_PATTERN=18,i.BARS_IN_MODULE=8,i.EMPTY_INT_ARRAY=new Int32Array([]),i.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),i.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),i}();const Ae=_e;var Tt=function(){function i(t,n){this.bits=t,this.points=n}return i.prototype.getBits=function(){return this.bits},i.prototype.getPoints=function(){return this.points},i}();const tn=Tt;var On=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ar=function(){function i(){}return i.detectMultiple=function(t,n,s){var h=t.getBlackMatrix(),g=i.detect(s,h);return g.length||((h=h.clone()).rotate180(),g=i.detect(s,h)),new tn(h,g)},i.detect=function(t,n){for(var s,h,g=new Array,a=0,o=0,l=!1;a<n.getHeight();){var v=i.findVertices(n,a,o);if(null!=v[0]||null!=v[3]){if(l=!0,g.push(v),!t)break;null!=v[2]?(o=Math.trunc(v[2].getX()),a=Math.trunc(v[2].getY())):(o=Math.trunc(v[4].getX()),a=Math.trunc(v[4].getY()))}else{if(!l)break;l=!1,o=0;try{for(var E=(s=void 0,On(g)),A=E.next();!A.done;A=E.next()){var R=A.value;null!=R[1]&&(a=Math.trunc(Math.max(a,R[1].getY()))),null!=R[3]&&(a=Math.max(a,Math.trunc(R[3].getY())))}}catch(k){s={error:k}}finally{try{A&&!A.done&&(h=E.return)&&h.call(E)}finally{if(s)throw s.error}}a+=i.ROW_STEP}}return g},i.findVertices=function(t,n,s){var h=t.getHeight(),g=t.getWidth(),a=new Array(8);return i.copyToResult(a,i.findRowsWithPattern(t,h,g,n,s,i.START_PATTERN),i.INDEXES_START_PATTERN),null!=a[4]&&(s=Math.trunc(a[4].getX()),n=Math.trunc(a[4].getY())),i.copyToResult(a,i.findRowsWithPattern(t,h,g,n,s,i.STOP_PATTERN),i.INDEXES_STOP_PATTERN),a},i.copyToResult=function(t,n,s){for(var h=0;h<s.length;h++)t[s[h]]=n[h]},i.findRowsWithPattern=function(t,n,s,h,g,a){for(var o=new Array(4),l=!1,v=new Int32Array(a.length);h<n;h+=i.ROW_STEP)if(null!=(E=i.findGuardPattern(t,g,h,s,!1,a,v))){for(;h>0;){if(null==(A=i.findGuardPattern(t,g,--h,s,!1,a,v))){h++;break}E=A}o[0]=new Ln(E[0],h),o[1]=new Ln(E[1],h),l=!0;break}var R=h+1;if(l){for(var k=0,A=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);R<n;R++){var E;if(null!=(E=i.findGuardPattern(t,A[0],R,s,!1,a,v))&&Math.abs(A[0]-E[0])<i.MAX_PATTERN_DRIFT&&Math.abs(A[1]-E[1])<i.MAX_PATTERN_DRIFT)A=E,k=0;else{if(k>i.SKIPPED_ROW_COUNT_MAX)break;k++}}o[2]=new Ln(A[0],R-=k+1),o[3]=new Ln(A[1],R)}return R-h<i.BARCODE_MIN_HEIGHT&&mt.fill(o,null),o},i.findGuardPattern=function(t,n,s,h,g,a,o){mt.fillWithin(o,0,o.length,0);for(var l=n,v=0;t.get(l,s)&&l>0&&v++<i.MAX_PIXEL_DRIFT;)l--;for(var E=l,A=0,R=a.length,k=g;E<h;E++)if(t.get(E,s)!==k)o[A]++;else{if(A===R-1){if(i.patternMatchVariance(o,a,i.MAX_INDIVIDUAL_VARIANCE)<i.MAX_AVG_VARIANCE)return new Int32Array([l,E]);l+=o[0]+o[1],Be.arraycopy(o,2,o,0,A-1),o[A-1]=0,o[A]=0,A--}else A++;o[A]=1,k=!k}return A===R-1&&i.patternMatchVariance(o,a,i.MAX_INDIVIDUAL_VARIANCE)<i.MAX_AVG_VARIANCE?new Int32Array([l,E-1]):null},i.patternMatchVariance=function(t,n,s){for(var h=t.length,g=0,a=0,o=0;o<h;o++)g+=t[o],a+=n[o];if(g<a)return 1/0;var l=g/a;s*=l;for(var v=0,E=0;E<h;E++){var A=t[E],R=n[E]*l,k=A>R?A-R:R-A;if(k>s)return 1/0;v+=k}return v/g},i.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),i.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),i.MAX_AVG_VARIANCE=.42,i.MAX_INDIVIDUAL_VARIANCE=.8,i.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),i.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),i.MAX_PIXEL_DRIFT=3,i.MAX_PATTERN_DRIFT=5,i.SKIPPED_ROW_COUNT_MAX=25,i.ROW_STEP=5,i.BARCODE_MIN_HEIGHT=10,i}();const or=ar;var oe=function(){function i(t,n){if(0===n.length)throw new Ke;this.field=t;var s=n.length;if(s>1&&0===n[0]){for(var h=1;h<s&&0===n[h];)h++;h===s?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(s-h),Be.arraycopy(n,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return i.prototype.getCoefficients=function(){return this.coefficients},i.prototype.getDegree=function(){return this.coefficients.length-1},i.prototype.isZero=function(){return 0===this.coefficients[0]},i.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},i.prototype.evaluateAt=function(t){var n,s;if(0===t)return this.getCoefficient(0);if(1===t){var h=0;try{for(var g=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.coefficients),a=g.next();!a.done;a=g.next())h=this.field.add(h,a.value)}catch(A){n={error:A}}finally{try{a&&!a.done&&(s=g.return)&&s.call(g)}finally{if(n)throw n.error}}return h}for(var l=this.coefficients[0],v=this.coefficients.length,E=1;E<v;E++)l=this.field.add(this.field.multiply(t,l),this.coefficients[E]);return l},i.prototype.add=function(t){if(!this.field.equals(t.field))throw new Ke("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;var n=this.coefficients,s=t.coefficients;if(n.length>s.length){var h=n;n=s,s=h}var g=new Int32Array(s.length),a=s.length-n.length;Be.arraycopy(s,0,g,0,a);for(var o=a;o<s.length;o++)g[o]=this.field.add(n[o-a],s[o]);return new i(this.field,g)},i.prototype.subtract=function(t){if(!this.field.equals(t.field))throw new Ke("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())},i.prototype.multiply=function(t){return t instanceof i?this.multiplyOther(t):this.multiplyScalar(t)},i.prototype.multiplyOther=function(t){if(!this.field.equals(t.field))throw new Ke("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new i(this.field,new Int32Array([0]));for(var n=this.coefficients,s=n.length,h=t.coefficients,g=h.length,a=new Int32Array(s+g-1),o=0;o<s;o++)for(var l=n[o],v=0;v<g;v++)a[o+v]=this.field.add(a[o+v],this.field.multiply(l,h[v]));return new i(this.field,a)},i.prototype.negative=function(){for(var t=this.coefficients.length,n=new Int32Array(t),s=0;s<t;s++)n[s]=this.field.subtract(0,this.coefficients[s]);return new i(this.field,n)},i.prototype.multiplyScalar=function(t){if(0===t)return new i(this.field,new Int32Array([0]));if(1===t)return this;for(var n=this.coefficients.length,s=new Int32Array(n),h=0;h<n;h++)s[h]=this.field.multiply(this.coefficients[h],t);return new i(this.field,s)},i.prototype.multiplyByMonomial=function(t,n){if(t<0)throw new Ke;if(0===n)return new i(this.field,new Int32Array([0]));for(var s=this.coefficients.length,h=new Int32Array(s+t),g=0;g<s;g++)h[g]=this.field.multiply(this.coefficients[g],n);return new i(this.field,h)},i.prototype.toString=function(){for(var t=new En,n=this.getDegree();n>=0;n--){var s=this.getCoefficient(n);0!==s&&(s<0?(t.append(" - "),s=-s):t.length()>0&&t.append(" + "),(0===n||1!==s)&&t.append(s),0!==n&&(1===n?t.append("x"):(t.append("x^"),t.append(n))))}return t.toString()},i}();const Ee=oe;var dt=function(){function i(){}return i.prototype.add=function(t,n){return(t+n)%this.modulus},i.prototype.subtract=function(t,n){return(this.modulus+t-n)%this.modulus},i.prototype.exp=function(t){return this.expTable[t]},i.prototype.log=function(t){if(0===t)throw new Ke;return this.logTable[t]},i.prototype.inverse=function(t){if(0===t)throw new St;return this.expTable[this.modulus-this.logTable[t]-1]},i.prototype.multiply=function(t,n){return 0===t||0===n?0:this.expTable[(this.logTable[t]+this.logTable[n])%(this.modulus-1)]},i.prototype.getSize=function(){return this.modulus},i.prototype.equals=function(t){return t===this},i}();const Nt=dt;var zt=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),xn=function(i){function t(n,s){var h=i.call(this)||this;h.modulus=n,h.expTable=new Int32Array(n),h.logTable=new Int32Array(n);for(var g=1,a=0;a<n;a++)h.expTable[a]=g,g=g*s%n;for(a=0;a<n-1;a++)h.logTable[h.expTable[a]]=a;return h.zero=new Ee(h,new Int32Array([0])),h.one=new Ee(h,new Int32Array([1])),h}return zt(t,i),t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(n,s){if(n<0)throw new Ke;if(0===s)return this.zero;var h=new Int32Array(n+1);return h[0]=s,new Ee(this,h)},t.PDF417_GF=new t(Ae.NUMBER_OF_CODEWORDS,3),t}(Nt);const _r=xn;var Pr=function(){function i(){this.field=_r.PDF417_GF}return i.prototype.decode=function(t,n,s){for(var h,g,a=new Ee(this.field,t),o=new Int32Array(n),l=!1,v=n;v>0;v--){var E=a.evaluateAt(this.field.exp(v));o[n-v]=E,0!==E&&(l=!0)}if(!l)return 0;var A=this.field.getOne();if(null!=s)try{for(var R=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(s),k=R.next();!k.done;k=R.next()){var se=this.field.exp(t.length-1-k.value),Me=new Ee(this.field,new Int32Array([this.field.subtract(0,se),1]));A=A.multiply(Me)}}catch(Sr){h={error:Sr}}finally{try{k&&!k.done&&(g=R.return)&&g.call(R)}finally{if(h)throw h.error}}var Ue=new Ee(this.field,o),ze=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),Ue,n),Ct=ze[0],Mt=ze[1],gn=this.findErrorLocations(Ct),Rn=this.findErrorMagnitudes(Mt,Ct,gn);for(v=0;v<gn.length;v++){var $n=t.length-1-this.field.log(gn[v]);if($n<0)throw ct.getChecksumInstance();t[$n]=this.field.subtract(t[$n],Rn[v])}return gn.length},i.prototype.runEuclideanAlgorithm=function(t,n,s){if(t.getDegree()<n.getDegree()){var h=t;t=n,n=h}for(var g=t,a=n,o=this.field.getZero(),l=this.field.getOne();a.getDegree()>=Math.round(s/2);){var v=g,E=o;if(o=l,(g=a).isZero())throw ct.getChecksumInstance();a=v;for(var A=this.field.getZero(),R=g.getCoefficient(g.getDegree()),k=this.field.inverse(R);a.getDegree()>=g.getDegree()&&!a.isZero();){var Z=a.getDegree()-g.getDegree(),se=this.field.multiply(a.getCoefficient(a.getDegree()),k);A=A.add(this.field.buildMonomial(Z,se)),a=a.subtract(g.multiplyByMonomial(Z,se))}l=A.multiply(o).subtract(E).negative()}var Me=l.getCoefficient(0);if(0===Me)throw ct.getChecksumInstance();var Ue=this.field.inverse(Me);return[l.multiply(Ue),a.multiply(Ue)]},i.prototype.findErrorLocations=function(t){for(var n=t.getDegree(),s=new Int32Array(n),h=0,g=1;g<this.field.getSize()&&h<n;g++)0===t.evaluateAt(g)&&(s[h]=this.field.inverse(g),h++);if(h!==n)throw ct.getChecksumInstance();return s},i.prototype.findErrorMagnitudes=function(t,n,s){for(var h=n.getDegree(),g=new Int32Array(h),a=1;a<=h;a++)g[h-a]=this.field.multiply(a,n.getCoefficient(a));var o=new Ee(this.field,g),l=s.length,v=new Int32Array(l);for(a=0;a<l;a++){var E=this.field.inverse(s[a]),A=this.field.subtract(0,t.evaluateAt(E)),R=this.field.inverse(o.evaluateAt(E));v[a]=this.field.multiply(A,R)}return v},i}();const Ii=Pr;var nr=function(){function i(t,n,s,h,g){t instanceof i?this.constructor_2(t):this.constructor_1(t,n,s,h,g)}return i.prototype.constructor_1=function(t,n,s,h,g){var a=null==n||null==s,o=null==h||null==g;if(a&&o)throw new Kt;a?(n=new Ln(0,h.getY()),s=new Ln(0,g.getY())):o&&(h=new Ln(t.getWidth()-1,n.getY()),g=new Ln(t.getWidth()-1,s.getY())),this.image=t,this.topLeft=n,this.bottomLeft=s,this.topRight=h,this.bottomRight=g,this.minX=Math.trunc(Math.min(n.getX(),s.getX())),this.maxX=Math.trunc(Math.max(h.getX(),g.getX())),this.minY=Math.trunc(Math.min(n.getY(),h.getY())),this.maxY=Math.trunc(Math.max(s.getY(),g.getY()))},i.prototype.constructor_2=function(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()},i.merge=function(t,n){return null==t?n:null==n?t:new i(t.image,t.topLeft,t.bottomLeft,n.topRight,n.bottomRight)},i.prototype.addMissingRows=function(t,n,s){var h=this.topLeft,g=this.bottomLeft,a=this.topRight,o=this.bottomRight;if(t>0){var l=s?this.topLeft:this.topRight,v=Math.trunc(l.getY()-t);v<0&&(v=0);var E=new Ln(l.getX(),v);s?h=E:a=E}if(n>0){var A=s?this.bottomLeft:this.bottomRight,R=Math.trunc(A.getY()+n);R>=this.image.getHeight()&&(R=this.image.getHeight()-1);var k=new Ln(A.getX(),R);s?g=k:o=k}return new i(this.image,h,g,a,o)},i.prototype.getMinX=function(){return this.minX},i.prototype.getMaxX=function(){return this.maxX},i.prototype.getMinY=function(){return this.minY},i.prototype.getMaxY=function(){return this.maxY},i.prototype.getTopLeft=function(){return this.topLeft},i.prototype.getTopRight=function(){return this.topRight},i.prototype.getBottomLeft=function(){return this.bottomLeft},i.prototype.getBottomRight=function(){return this.bottomRight},i}();const mi=nr;var Wo=function(){function i(t,n,s,h){this.columnCount=t,this.errorCorrectionLevel=h,this.rowCountUpperPart=n,this.rowCountLowerPart=s,this.rowCount=n+s}return i.prototype.getColumnCount=function(){return this.columnCount},i.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},i.prototype.getRowCount=function(){return this.rowCount},i.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},i.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},i}();const ec=Wo;var lc=function(){function i(){this.buffer=""}return i.form=function(t,n){var s=-1;return t.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function h(a,o,l,v,E,A){if("%%"===a)return"%";if(void 0!==n[++s]){a=v?parseInt(v.substr(1)):void 0;var k,R=E?parseInt(E.substr(1)):void 0;switch(A){case"s":k=n[s];break;case"c":k=n[s][0];break;case"f":k=parseFloat(n[s]).toFixed(a);break;case"p":k=parseFloat(n[s]).toPrecision(a);break;case"e":k=parseFloat(n[s]).toExponential(a);break;case"x":k=parseInt(n[s]).toString(R||16);break;case"d":k=parseFloat(parseInt(n[s],R||10).toPrecision(a)).toFixed(0)}k="object"==typeof k?JSON.stringify(k):(+k).toString(R);for(var Z=parseInt(l),se=l&&l[0]+""=="0"?"0":" ";k.length<Z;)k=void 0!==o?k+se:se+k;return k}})},i.prototype.format=function(t){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];this.buffer+=i.form(t,n)},i.prototype.toString=function(){return this.buffer},i}();const Cu=lc;var Xa=function(){function i(t){this.boundingBox=new mi(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}return i.prototype.getCodewordNearby=function(t){var n=this.getCodeword(t);if(null!=n)return n;for(var s=1;s<i.MAX_NEARBY_DISTANCE;s++){var h=this.imageRowToCodewordIndex(t)-s;if(h>=0&&null!=(n=this.codewords[h])||(h=this.imageRowToCodewordIndex(t)+s)<this.codewords.length&&null!=(n=this.codewords[h]))return n}return null},i.prototype.imageRowToCodewordIndex=function(t){return t-this.boundingBox.getMinY()},i.prototype.setCodeword=function(t,n){this.codewords[this.imageRowToCodewordIndex(t)]=n},i.prototype.getCodeword=function(t){return this.codewords[this.imageRowToCodewordIndex(t)]},i.prototype.getBoundingBox=function(){return this.boundingBox},i.prototype.getCodewords=function(){return this.codewords},i.prototype.toString=function(){var t,n,s=new Cu,h=0;try{for(var g=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.codewords),a=g.next();!a.done;a=g.next()){var o=a.value;null!=o?s.format("%3d: %3d|%3d%n",h++,o.getRowNumber(),o.getValue()):s.format("%3d:    |   %n",h++)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=g.return)&&n.call(g)}finally{if(t)throw t.error}}return s.toString()},i.MAX_NEARBY_DISTANCE=5,i}();const Qa=Xa;var nd=function(i,t){var n="function"==typeof Symbol&&i[Symbol.iterator];if(!n)return i;var h,a,s=n.call(i),g=[];try{for(;(void 0===t||t-- >0)&&!(h=s.next()).done;)g.push(h.value)}catch(o){a={error:o}}finally{try{h&&!h.done&&(n=s.return)&&n.call(s)}finally{if(a)throw a.error}}return g},gl=function(){function i(){this.values=new Map}return i.prototype.setValue=function(t){t=Math.trunc(t);var n=this.values.get(t);null==n&&(n=0),n++,this.values.set(t,n)},i.prototype.getValue=function(){var t,n,s=-1,h=new Array,g=function(A,R){var k_getKey=function(){return A},k_getValue=function(){return R};k_getValue()>s?(s=k_getValue(),(h=[]).push(k_getKey())):k_getValue()===s&&h.push(k_getKey())};try{for(var a=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.values.entries()),o=a.next();!o.done;o=a.next()){var l=nd(o.value,2);g(l[0],l[1])}}catch(A){t={error:A}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return Ae.toIntArray(h)},i.prototype.getConfidence=function(t){return this.values.get(t)},i}();const cu=gl;var ml=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),rd=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},id=function(i){function t(n,s){var h=i.call(this,n)||this;return h._isLeft=s,h}return ml(t,i),t.prototype.setRowNumbers=function(){var n,s;try{for(var h=rd(this.getCodewords()),g=h.next();!g.done;g=h.next()){var a=g.value;null!=a&&a.setRowNumberAsRowIndicatorColumn()}}catch(o){n={error:o}}finally{try{g&&!g.done&&(s=h.return)&&s.call(h)}finally{if(n)throw n.error}}},t.prototype.adjustCompleteIndicatorColumnRowNumbers=function(n){var s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,n);for(var h=this.getBoundingBox(),g=this._isLeft?h.getTopLeft():h.getTopRight(),a=this._isLeft?h.getBottomLeft():h.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(g.getY())),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),v=-1,E=1,A=0,R=o;R<l;R++)if(null!=s[R]){var k=s[R],Z=k.getRowNumber()-v;if(0===Z)A++;else if(1===Z)E=Math.max(E,A),A=1,v=k.getRowNumber();else if(Z<0||k.getRowNumber()>=n.getRowCount()||Z>R)s[R]=null;else{for(var se,Me=(se=E>2?(E-2)*Z:Z)>=R,Ue=1;Ue<=se&&!Me;Ue++)Me=null!=s[R-Ue];Me?s[R]=null:(v=k.getRowNumber(),A=1)}}},t.prototype.getRowHeights=function(){var n,s,h=this.getBarcodeMetadata();if(null==h)return null;this.adjustIncompleteIndicatorColumnRowNumbers(h);var g=new Int32Array(h.getRowCount());try{for(var a=rd(this.getCodewords()),o=a.next();!o.done;o=a.next()){var l=o.value;if(null!=l){var v=l.getRowNumber();if(v>=g.length)continue;g[v]++}}}catch(E){n={error:E}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(n)throw n.error}}return g},t.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(n){for(var s=this.getBoundingBox(),h=this._isLeft?s.getTopLeft():s.getTopRight(),g=this._isLeft?s.getBottomLeft():s.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(h.getY())),o=this.imageRowToCodewordIndex(Math.trunc(g.getY())),l=this.getCodewords(),v=-1,E=1,A=0,R=a;R<o;R++)if(null!=l[R]){var k=l[R];k.setRowNumberAsRowIndicatorColumn();var Z=k.getRowNumber()-v;0===Z?A++:1===Z?(E=Math.max(E,A),A=1,v=k.getRowNumber()):k.getRowNumber()>=n.getRowCount()?l[R]=null:(v=k.getRowNumber(),A=1)}},t.prototype.getBarcodeMetadata=function(){var n,s,h=this.getCodewords(),g=new cu,a=new cu,o=new cu,l=new cu;try{for(var v=rd(h),E=v.next();!E.done;E=v.next()){var A=E.value;if(null!=A){A.setRowNumberAsRowIndicatorColumn();var R=A.getValue()%30,k=A.getRowNumber();switch(this._isLeft||(k+=2),k%3){case 0:a.setValue(3*R+1);break;case 1:l.setValue(R/3),o.setValue(R%3);break;case 2:g.setValue(R+1)}}}}catch(se){n={error:se}}finally{try{E&&!E.done&&(s=v.return)&&s.call(v)}finally{if(n)throw n.error}}if(0===g.getValue().length||0===a.getValue().length||0===o.getValue().length||0===l.getValue().length||g.getValue()[0]<1||a.getValue()[0]+o.getValue()[0]<Ae.MIN_ROWS_IN_BARCODE||a.getValue()[0]+o.getValue()[0]>Ae.MAX_ROWS_IN_BARCODE)return null;var Z=new ec(g.getValue()[0],a.getValue()[0],o.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(h,Z),Z},t.prototype.removeIncorrectCodewords=function(n,s){for(var h=0;h<n.length;h++){var g=n[h];if(null!=n[h]){var a=g.getValue()%30,o=g.getRowNumber();if(o>s.getRowCount()){n[h]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:3*a+1!==s.getRowCountUpperPart()&&(n[h]=null);break;case 1:(Math.trunc(a/3)!==s.getErrorCorrectionLevel()||a%3!==s.getRowCountLowerPart())&&(n[h]=null);break;case 2:a+1!==s.getColumnCount()&&(n[h]=null)}}}},t.prototype.isLeft=function(){return this._isLeft},t.prototype.toString=function(){return"IsLeft: "+this._isLeft+"\n"+i.prototype.toString.call(this)},t}(Qa);const vl=id;var yl=function(){function i(t,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return i.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var n,t=Ae.MAX_CODEWORDS_IN_BARCODE;do{n=t,t=this.adjustRowNumbersAndGetCount()}while(t>0&&t<n);return this.detectionResultColumns},i.prototype.adjustIndicatorColumnRowNumbers=function(t){null!=t&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},i.prototype.adjustRowNumbersAndGetCount=function(){var t=this.adjustRowNumbersByRow();if(0===t)return 0;for(var n=1;n<this.barcodeColumnCount+1;n++)for(var s=this.detectionResultColumns[n].getCodewords(),h=0;h<s.length;h++)null!=s[h]&&(s[h].hasValidRowNumber()||this.adjustRowNumbers(n,h,s));return t},i.prototype.adjustRowNumbersByRow=function(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()},i.prototype.adjustRowNumbersFromBothRI=function(){if(null!=this.detectionResultColumns[0]&&null!=this.detectionResultColumns[this.barcodeColumnCount+1])for(var t=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),s=0;s<t.length;s++)if(null!=t[s]&&null!=n[s]&&t[s].getRowNumber()===n[s].getRowNumber())for(var h=1;h<=this.barcodeColumnCount;h++){var g=this.detectionResultColumns[h].getCodewords()[s];null!=g&&(g.setRowNumber(t[s].getRowNumber()),g.hasValidRowNumber()||(this.detectionResultColumns[h].getCodewords()[s]=null))}},i.prototype.adjustRowNumbersFromRRI=function(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;for(var t=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),s=0;s<n.length;s++)if(null!=n[s])for(var h=n[s].getRowNumber(),g=0,a=this.barcodeColumnCount+1;a>0&&g<this.ADJUST_ROW_NUMBER_SKIP;a--){var o=this.detectionResultColumns[a].getCodewords()[s];null!=o&&(g=i.adjustRowNumberIfValid(h,g,o),o.hasValidRowNumber()||t++)}return t},i.prototype.adjustRowNumbersFromLRI=function(){if(null==this.detectionResultColumns[0])return 0;for(var t=0,n=this.detectionResultColumns[0].getCodewords(),s=0;s<n.length;s++)if(null!=n[s])for(var h=n[s].getRowNumber(),g=0,a=1;a<this.barcodeColumnCount+1&&g<this.ADJUST_ROW_NUMBER_SKIP;a++){var o=this.detectionResultColumns[a].getCodewords()[s];null!=o&&(g=i.adjustRowNumberIfValid(h,g,o),o.hasValidRowNumber()||t++)}return t},i.adjustRowNumberIfValid=function(t,n,s){return null==s||s.hasValidRowNumber()||(s.isValidRowNumber(t)?(s.setRowNumber(t),n=0):++n),n},i.prototype.adjustRowNumbers=function(t,n,s){var h,g;if(null!=this.detectionResultColumns[t-1]){var a=s[n],o=this.detectionResultColumns[t-1].getCodewords(),l=o;null!=this.detectionResultColumns[t+1]&&(l=this.detectionResultColumns[t+1].getCodewords());var v=new Array(14);v[2]=o[n],v[3]=l[n],n>0&&(v[0]=s[n-1],v[4]=o[n-1],v[5]=l[n-1]),n>1&&(v[8]=s[n-2],v[10]=o[n-2],v[11]=l[n-2]),n<s.length-1&&(v[1]=s[n+1],v[6]=o[n+1],v[7]=l[n+1]),n<s.length-2&&(v[9]=s[n+2],v[12]=o[n+2],v[13]=l[n+2]);try{for(var E=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(v),A=E.next();!A.done;A=E.next())if(i.adjustRowNumber(a,A.value))return}catch(k){h={error:k}}finally{try{A&&!A.done&&(g=E.return)&&g.call(E)}finally{if(h)throw h.error}}}},i.adjustRowNumber=function(t,n){return!(null==n||!n.hasValidRowNumber()||n.getBucket()!==t.getBucket()||(t.setRowNumber(n.getRowNumber()),0))},i.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},i.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},i.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},i.prototype.setBoundingBox=function(t){this.boundingBox=t},i.prototype.getBoundingBox=function(){return this.boundingBox},i.prototype.setDetectionResultColumn=function(t,n){this.detectionResultColumns[t]=n},i.prototype.getDetectionResultColumn=function(t){return this.detectionResultColumns[t]},i.prototype.toString=function(){var t=this.detectionResultColumns[0];null==t&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var n=new Cu,s=0;s<t.getCodewords().length;s++){n.format("CW %3d:",s);for(var h=0;h<this.barcodeColumnCount+2;h++)if(null!=this.detectionResultColumns[h]){var g=this.detectionResultColumns[h].getCodewords()[s];null!=g?n.format(" %3d|%3d",g.getRowNumber(),g.getValue()):n.format("    |   ")}else n.format("    |   ");n.format("%n")}return n.toString()},i}();const Fl=yl;var es=function(){function i(t,n,s,h){this.rowNumber=i.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(n),this.bucket=Math.trunc(s),this.value=Math.trunc(h)}return i.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},i.prototype.isValidRowNumber=function(t){return t!==i.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3},i.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))},i.prototype.getWidth=function(){return this.endX-this.startX},i.prototype.getStartX=function(){return this.startX},i.prototype.getEndX=function(){return this.endX},i.prototype.getBucket=function(){return this.bucket},i.prototype.getValue=function(){return this.value},i.prototype.getRowNumber=function(){return this.rowNumber},i.prototype.setRowNumber=function(t){this.rowNumber=t},i.prototype.toString=function(){return this.rowNumber+"|"+this.value},i.BARCODE_ROW_UNKNOWN=-1,i}();const od=es;var Fa=function(){function i(){}return i.initialize=function(){for(var t=0;t<Ae.SYMBOL_TABLE.length;t++)for(var n=Ae.SYMBOL_TABLE[t],s=1&n,h=0;h<Ae.BARS_IN_MODULE;h++){for(var g=0;(1&n)===s;)g+=1,n>>=1;s=1&n,i.RATIOS_TABLE[t]||(i.RATIOS_TABLE[t]=new Array(Ae.BARS_IN_MODULE)),i.RATIOS_TABLE[t][Ae.BARS_IN_MODULE-h-1]=Math.fround(g/Ae.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},i.getDecodedValue=function(t){var n=i.getDecodedCodewordValue(i.sampleBitCounts(t));return-1!==n?n:i.getClosestDecodedValue(t)},i.sampleBitCounts=function(t){for(var n=pr.sum(t),s=new Int32Array(Ae.BARS_IN_MODULE),h=0,g=0,a=0;a<Ae.MODULES_IN_CODEWORD;a++)g+t[h]<=n/(2*Ae.MODULES_IN_CODEWORD)+a*n/Ae.MODULES_IN_CODEWORD&&(g+=t[h],h++),s[h]++;return s},i.getDecodedCodewordValue=function(t){var n=i.getBitValue(t);return-1===Ae.getCodeword(n)?-1:n},i.getBitValue=function(t){for(var n=0,s=0;s<t.length;s++)for(var h=0;h<t[s];h++)n=n<<1|(s%2==0?1:0);return Math.trunc(n)},i.getClosestDecodedValue=function(t){var n=pr.sum(t),s=new Array(Ae.BARS_IN_MODULE);if(n>1)for(var h=0;h<s.length;h++)s[h]=Math.fround(t[h]/n);var g=Tr.MAX_VALUE,a=-1;this.bSymbolTableReady||i.initialize();for(var o=0;o<i.RATIOS_TABLE.length;o++){for(var l=0,v=i.RATIOS_TABLE[o],E=0;E<Ae.BARS_IN_MODULE;E++){var A=Math.fround(v[E]-s[E]);if((l+=Math.fround(A*A))>=g)break}l<g&&(g=l,a=Ae.SYMBOL_TABLE[o])}return a},i.bSymbolTableReady=!1,i.RATIOS_TABLE=new Array(Ae.SYMBOL_TABLE.length).map(function(t){return new Array(Ae.BARS_IN_MODULE)}),i}();const Yo=Fa;var sd=function(){function i(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return i.prototype.getSegmentIndex=function(){return this.segmentIndex},i.prototype.setSegmentIndex=function(t){this.segmentIndex=t},i.prototype.getFileId=function(){return this.fileId},i.prototype.setFileId=function(t){this.fileId=t},i.prototype.getOptionalData=function(){return this.optionalData},i.prototype.setOptionalData=function(t){this.optionalData=t},i.prototype.isLastSegment=function(){return this.lastSegment},i.prototype.setLastSegment=function(t){this.lastSegment=t},i.prototype.getSegmentCount=function(){return this.segmentCount},i.prototype.setSegmentCount=function(t){this.segmentCount=t},i.prototype.getSender=function(){return this.sender||null},i.prototype.setSender=function(t){this.sender=t},i.prototype.getAddressee=function(){return this.addressee||null},i.prototype.setAddressee=function(t){this.addressee=t},i.prototype.getFileName=function(){return this.fileName},i.prototype.setFileName=function(t){this.fileName=t},i.prototype.getFileSize=function(){return this.fileSize},i.prototype.setFileSize=function(t){this.fileSize=t},i.prototype.getChecksum=function(){return this.checksum},i.prototype.setChecksum=function(t){this.checksum=t},i.prototype.getTimestamp=function(){return this.timestamp},i.prototype.setTimestamp=function(t){this.timestamp=t},i}();const dc=sd;var Ia=function(){function i(){}return i.parseLong=function(t,n){return void 0===n&&(n=void 0),parseInt(t,n)},i}();const ta=Ia;var hc=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),no=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return hc(t,i),t.kind="NullPointerException",t}($e);const Kc=no;var Ll=function(){function i(){}return i.prototype.writeBytes=function(t){this.writeBytesOffset(t,0,t.length)},i.prototype.writeBytesOffset=function(t,n,s){if(null==t)throw new Kc;if(n<0||n>t.length||s<0||n+s>t.length||n+s<0)throw new lt;if(0!==s)for(var h=0;h<s;h++)this.write(t[n+h])},i.prototype.flush=function(){},i.prototype.close=function(){},i}();const pa=Ll;var Mc=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),fc=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return Mc(t,i),t}($e);const pc=fc;var ad=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),xa=function(i){function t(n){void 0===n&&(n=32);var s=i.call(this)||this;if(s.count=0,n<0)throw new Ke("Negative initial size: "+n);return s.buf=new Uint8Array(n),s}return ad(t,i),t.prototype.ensureCapacity=function(n){n-this.buf.length>0&&this.grow(n)},t.prototype.grow=function(n){var h=this.buf.length<<1;if(h-n<0&&(h=n),h<0){if(n<0)throw new pc;h=Le.MAX_VALUE}this.buf=mt.copyOfUint8Array(this.buf,h)},t.prototype.write=function(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1},t.prototype.writeBytesOffset=function(n,s,h){if(s<0||s>n.length||h<0||s+h-n.length>0)throw new lt;this.ensureCapacity(this.count+h),Be.arraycopy(n,s,this.buf,this.count,h),this.count+=h},t.prototype.writeTo=function(n){n.writeBytesOffset(this.buf,0,this.count)},t.prototype.reset=function(){this.count=0},t.prototype.toByteArray=function(){return mt.copyOfUint8Array(this.buf,this.count)},t.prototype.size=function(){return this.count},t.prototype.toString=function(n){return n?"string"==typeof n?this.toString_string(n):this.toString_number(n):this.toString_void()},t.prototype.toString_void=function(){return new String(this.buf).toString()},t.prototype.toString_string=function(n){return new String(this.buf).toString()},t.prototype.toString_number=function(n){return new String(this.buf).toString()},t.prototype.close=function(){},t}(pa);const Bu=xa;var gc,yo=(()=>(function(i){i[i.ALPHA=0]="ALPHA",i[i.LOWER=1]="LOWER",i[i.MIXED=2]="MIXED",i[i.PUNCT=3]="PUNCT",i[i.ALPHA_SHIFT=4]="ALPHA_SHIFT",i[i.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(yo||(yo={})),yo))();function Uu(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}function bs(i){if(typeof gc>"u"&&(gc=Uu()),null===gc)throw new Error("BigInt is not supported!");return gc(i)}var La=function(){function i(){}return i.decode=function(t,n){var s=new En(""),h=Dt.ISO8859_1;s.enableDecoding(h);for(var g=1,a=t[g++],o=new dc;g<t[0];){switch(a){case i.TEXT_COMPACTION_MODE_LATCH:g=i.textCompaction(t,g,s);break;case i.BYTE_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH_6:g=i.byteCompaction(a,t,h,g,s);break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:s.append(t[g++]);break;case i.NUMERIC_COMPACTION_MODE_LATCH:g=i.numericCompaction(t,g,s);break;case i.ECI_CHARSET:Dt.getCharacterSetECIByValue(t[g++]);break;case i.ECI_GENERAL_PURPOSE:g+=2;break;case i.ECI_USER_DEFINED:g++;break;case i.BEGIN_MACRO_PDF417_CONTROL_BLOCK:g=i.decodeMacroBlock(t,g,o);break;case i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case i.MACRO_PDF417_TERMINATOR:throw new fe;default:g--,g=i.textCompaction(t,g,s)}if(!(g<t.length))throw fe.getFormatInstance();a=t[g++]}if(0===s.length())throw fe.getFormatInstance();var v=new $t(null,s.toString(),null,n);return v.setOther(o),v},i.decodeMacroBlock=function(t,n,s){if(n+i.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw fe.getFormatInstance();for(var h=new Int32Array(i.NUMBER_OF_SEQUENCE_CODEWORDS),g=0;g<i.NUMBER_OF_SEQUENCE_CODEWORDS;g++,n++)h[g]=t[n];s.setSegmentIndex(Le.parseInt(i.decodeBase900toBase10(h,i.NUMBER_OF_SEQUENCE_CODEWORDS)));var a=new En;n=i.textCompaction(t,n,a),s.setFileId(a.toString());var o=-1;for(t[n]===i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=n+1);n<t[0];)switch(t[n]){case i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t[++n]){case i.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new En;n=i.textCompaction(t,n+1,l),s.setFileName(l.toString());break;case i.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var v=new En;n=i.textCompaction(t,n+1,v),s.setSender(v.toString());break;case i.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var E=new En;n=i.textCompaction(t,n+1,E),s.setAddressee(E.toString());break;case i.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var A=new En;n=i.numericCompaction(t,n+1,A),s.setSegmentCount(Le.parseInt(A.toString()));break;case i.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var R=new En;n=i.numericCompaction(t,n+1,R),s.setTimestamp(ta.parseLong(R.toString()));break;case i.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var k=new En;n=i.numericCompaction(t,n+1,k),s.setChecksum(Le.parseInt(k.toString()));break;case i.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var Z=new En;n=i.numericCompaction(t,n+1,Z),s.setFileSize(ta.parseLong(Z.toString()));break;default:throw fe.getFormatInstance()}break;case i.MACRO_PDF417_TERMINATOR:n++,s.setLastSegment(!0);break;default:throw fe.getFormatInstance()}if(-1!==o){var se=n-o;s.isLastSegment()&&se--,s.setOptionalData(mt.copyOfRange(t,o,o+se))}return n},i.textCompaction=function(t,n,s){for(var h=new Int32Array(2*(t[0]-n)),g=new Int32Array(2*(t[0]-n)),a=0,o=!1;n<t[0]&&!o;){var l=t[n++];if(l<i.TEXT_COMPACTION_MODE_LATCH)h[a]=l/30,h[a+1]=l%30,a+=2;else switch(l){case i.TEXT_COMPACTION_MODE_LATCH:h[a++]=i.TEXT_COMPACTION_MODE_LATCH;break;case i.BYTE_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH_6:case i.NUMERIC_COMPACTION_MODE_LATCH:case i.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case i.MACRO_PDF417_TERMINATOR:n--,o=!0;break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h[a]=i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=t[n++],g[a]=l,a++}}return i.decodeTextCompaction(h,g,a,s),n},i.decodeTextCompaction=function(t,n,s,h){for(var g=yo.ALPHA,a=yo.ALPHA,o=0;o<s;){var l=t[o],v="";switch(g){case yo.ALPHA:if(l<26)v=String.fromCharCode(65+l);else switch(l){case 26:v=" ";break;case i.LL:g=yo.LOWER;break;case i.ML:g=yo.MIXED;break;case i.PS:a=g,g=yo.PUNCT_SHIFT;break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(n[o]);break;case i.TEXT_COMPACTION_MODE_LATCH:g=yo.ALPHA}break;case yo.LOWER:if(l<26)v=String.fromCharCode(97+l);else switch(l){case 26:v=" ";break;case i.AS:a=g,g=yo.ALPHA_SHIFT;break;case i.ML:g=yo.MIXED;break;case i.PS:a=g,g=yo.PUNCT_SHIFT;break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(n[o]);break;case i.TEXT_COMPACTION_MODE_LATCH:g=yo.ALPHA}break;case yo.MIXED:if(l<i.PL)v=i.MIXED_CHARS[l];else switch(l){case i.PL:g=yo.PUNCT;break;case 26:v=" ";break;case i.LL:g=yo.LOWER;break;case i.AL:g=yo.ALPHA;break;case i.PS:a=g,g=yo.PUNCT_SHIFT;break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(n[o]);break;case i.TEXT_COMPACTION_MODE_LATCH:g=yo.ALPHA}break;case yo.PUNCT:if(l<i.PAL)v=i.PUNCT_CHARS[l];else switch(l){case i.PAL:g=yo.ALPHA;break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(n[o]);break;case i.TEXT_COMPACTION_MODE_LATCH:g=yo.ALPHA}break;case yo.ALPHA_SHIFT:if(g=a,l<26)v=String.fromCharCode(65+l);else switch(l){case 26:v=" ";break;case i.TEXT_COMPACTION_MODE_LATCH:g=yo.ALPHA}break;case yo.PUNCT_SHIFT:if(g=a,l<i.PAL)v=i.PUNCT_CHARS[l];else switch(l){case i.PAL:g=yo.ALPHA;break;case i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(n[o]);break;case i.TEXT_COMPACTION_MODE_LATCH:g=yo.ALPHA}}""!==v&&h.append(v),o++}},i.byteCompaction=function(t,n,s,h,g){var a=new Bu,o=0,l=0,v=!1;switch(t){case i.BYTE_COMPACTION_MODE_LATCH:for(var E=new Int32Array(6),A=n[h++];h<n[0]&&!v;)switch(E[o++]=A,l=900*l+A,A=n[h++],A){case i.TEXT_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH:case i.NUMERIC_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH_6:case i.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case i.MACRO_PDF417_TERMINATOR:h--,v=!0;break;default:if(o%5==0&&o>0){for(var R=0;R<6;++R)a.write(Number(bs(l)>>bs(8*(5-R))));l=0,o=0}}h===n[0]&&A<i.TEXT_COMPACTION_MODE_LATCH&&(E[o++]=A);for(var k=0;k<o;k++)a.write(E[k]);break;case i.BYTE_COMPACTION_MODE_LATCH_6:for(;h<n[0]&&!v;){var Z=n[h++];if(Z<i.TEXT_COMPACTION_MODE_LATCH)o++,l=900*l+Z;else switch(Z){case i.TEXT_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH:case i.NUMERIC_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH_6:case i.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case i.MACRO_PDF417_TERMINATOR:h--,v=!0}if(o%5==0&&o>0){for(R=0;R<6;++R)a.write(Number(bs(l)>>bs(8*(5-R))));l=0,o=0}}}return g.append(Gn.decode(a.toByteArray(),s)),h},i.numericCompaction=function(t,n,s){for(var h=0,g=!1,a=new Int32Array(i.MAX_NUMERIC_CODEWORDS);n<t[0]&&!g;){var o=t[n++];if(n===t[0]&&(g=!0),o<i.TEXT_COMPACTION_MODE_LATCH)a[h]=o,h++;else switch(o){case i.TEXT_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH:case i.BYTE_COMPACTION_MODE_LATCH_6:case i.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case i.MACRO_PDF417_TERMINATOR:n--,g=!0}(h%i.MAX_NUMERIC_CODEWORDS==0||o===i.NUMERIC_COMPACTION_MODE_LATCH||g)&&h>0&&(s.append(i.decodeBase900toBase10(a,h)),h=0)}return n},i.decodeBase900toBase10=function(t,n){for(var s=bs(0),h=0;h<n;h++)s+=i.EXP900[n-h-1]*bs(t[h]);var g=s.toString();if("1"!==g.charAt(0))throw new fe;return g.substring(1)},i.TEXT_COMPACTION_MODE_LATCH=900,i.BYTE_COMPACTION_MODE_LATCH=901,i.NUMERIC_COMPACTION_MODE_LATCH=902,i.BYTE_COMPACTION_MODE_LATCH_6=924,i.ECI_USER_DEFINED=925,i.ECI_GENERAL_PURPOSE=926,i.ECI_CHARSET=927,i.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,i.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,i.MACRO_PDF417_TERMINATOR=922,i.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,i.MAX_NUMERIC_CODEWORDS=15,i.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,i.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,i.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,i.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,i.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,i.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,i.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,i.PL=25,i.LL=27,i.AS=27,i.ML=28,i.AL=28,i.PS=29,i.PAL=29,i.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",i.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",i.EXP900=Uu()?function Nc(){var i=[];i[0]=bs(1);var t=bs(900);i[1]=t;for(var n=2;n<16;n++)i[n]=i[n-1]*t;return i}():[],i.NUMBER_OF_SEQUENCE_CODEWORDS=2,i}();const Iu=La;var Ls=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_l=function(){function i(){}return i.decode=function(t,n,s,h,g,a,o){for(var A,l=new mi(t,n,s,h,g),v=null,E=null,R=!0;;R=!1){if(null!=n&&(v=i.getRowIndicatorColumn(t,l,n,!0,a,o)),null!=h&&(E=i.getRowIndicatorColumn(t,l,h,!1,a,o)),null==(A=i.merge(v,E)))throw Kt.getNotFoundInstance();var k=A.getBoundingBox();if(!R||null==k||!(k.getMinY()<l.getMinY()||k.getMaxY()>l.getMaxY()))break;l=k}A.setBoundingBox(l);var Z=A.getBarcodeColumnCount()+1;A.setDetectionResultColumn(0,v),A.setDetectionResultColumn(Z,E);for(var se=null!=v,Me=1;Me<=Z;Me++){var Ue=se?Me:Z-Me;if(void 0===A.getDetectionResultColumn(Ue)){var ze=void 0;ze=0===Ue||Ue===Z?new vl(l,0===Ue):new Qa(l),A.setDetectionResultColumn(Ue,ze);for(var Ct=-1,Mt=Ct,gn=l.getMinY();gn<=l.getMaxY();gn++){if((Ct=i.getStartColumn(A,Ue,gn,se))<0||Ct>l.getMaxX()){if(-1===Mt)continue;Ct=Mt}var Rn=i.detectCodeword(t,l.getMinX(),l.getMaxX(),se,Ct,gn,a,o);null!=Rn&&(ze.setCodeword(gn,Rn),Mt=Ct,a=Math.min(a,Rn.getWidth()),o=Math.max(o,Rn.getWidth()))}}}return i.createDecoderResult(A)},i.merge=function(t,n){if(null==t&&null==n)return null;var s=i.getBarcodeMetadata(t,n);if(null==s)return null;var h=mi.merge(i.adjustBoundingBox(t),i.adjustBoundingBox(n));return new Fl(s,h)},i.adjustBoundingBox=function(t){var n,s;if(null==t)return null;var h=t.getRowHeights();if(null==h)return null;var g=i.getMax(h),a=0;try{for(var o=Ls(h),l=o.next();!l.done;l=o.next()){var v=l.value;if(a+=g-v,v>0)break}}catch(k){n={error:k}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(n)throw n.error}}for(var E=t.getCodewords(),A=0;a>0&&null==E[A];A++)a--;var R=0;for(A=h.length-1;A>=0&&(R+=g-h[A],!(h[A]>0));A--);for(A=E.length-1;R>0&&null==E[A];A--)R--;return t.getBoundingBox().addMissingRows(a,R,t.isLeft())},i.getMax=function(t){var n,s,h=-1;try{for(var g=Ls(t),a=g.next();!a.done;a=g.next())h=Math.max(h,a.value)}catch(l){n={error:l}}finally{try{a&&!a.done&&(s=g.return)&&s.call(g)}finally{if(n)throw n.error}}return h},i.getBarcodeMetadata=function(t,n){var s,h;return null==t||null==(s=t.getBarcodeMetadata())?null==n?null:n.getBarcodeMetadata():null==n||null==(h=n.getBarcodeMetadata())?s:s.getColumnCount()!==h.getColumnCount()&&s.getErrorCorrectionLevel()!==h.getErrorCorrectionLevel()&&s.getRowCount()!==h.getRowCount()?null:s},i.getRowIndicatorColumn=function(t,n,s,h,g,a){for(var o=new vl(n,h),l=0;l<2;l++)for(var v=0===l?1:-1,E=Math.trunc(Math.trunc(s.getX())),A=Math.trunc(Math.trunc(s.getY()));A<=n.getMaxY()&&A>=n.getMinY();A+=v){var R=i.detectCodeword(t,0,t.getWidth(),h,E,A,g,a);null!=R&&(o.setCodeword(A,R),E=h?R.getStartX():R.getEndX())}return o},i.adjustCodewordCount=function(t,n){var s=n[0][1],h=s.getValue(),g=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-i.getNumberOfECCodeWords(t.getBarcodeECLevel());if(0===h.length){if(g<1||g>Ae.MAX_CODEWORDS_IN_BARCODE)throw Kt.getNotFoundInstance();s.setValue(g)}else h[0]!==g&&s.setValue(g)},i.createDecoderResult=function(t){var n=i.createBarcodeMatrix(t);i.adjustCodewordCount(t,n);for(var s=new Array,h=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),g=[],a=new Array,o=0;o<t.getBarcodeRowCount();o++)for(var l=0;l<t.getBarcodeColumnCount();l++){var v=n[o][l+1].getValue(),E=o*t.getBarcodeColumnCount()+l;0===v.length?s.push(E):1===v.length?h[E]=v[0]:(a.push(E),g.push(v))}for(var A=new Array(g.length),R=0;R<A.length;R++)A[R]=g[R];return i.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),h,Ae.toIntArray(s),Ae.toIntArray(a),A)},i.createDecoderResultFromAmbiguousValues=function(t,n,s,h,g){for(var a=new Int32Array(h.length),o=100;o-- >0;){for(var l=0;l<a.length;l++)n[h[l]]=g[l][a[l]];try{return i.decodeCodewords(n,t,s)}catch(E){if(!(E instanceof ct))throw E}if(0===a.length)throw ct.getChecksumInstance();for(l=0;l<a.length;l++){if(a[l]<g[l].length-1){a[l]++;break}if(a[l]=0,l===a.length-1)throw ct.getChecksumInstance()}}throw ct.getChecksumInstance()},i.createBarcodeMatrix=function(t){for(var n,s,h,g,a=Array.from({length:t.getBarcodeRowCount()},function(){return new Array(t.getBarcodeColumnCount()+2)}),o=0;o<a.length;o++)for(var l=0;l<a[o].length;l++)a[o][l]=new cu;var v=0;try{for(var E=Ls(t.getDetectionResultColumns()),A=E.next();!A.done;A=E.next()){var R=A.value;if(null!=R)try{for(var k=(h=void 0,Ls(R.getCodewords())),Z=k.next();!Z.done;Z=k.next()){var se=Z.value;if(null!=se){var Me=se.getRowNumber();if(Me>=0){if(Me>=a.length)continue;a[Me][v].setValue(se.getValue())}}}}catch(Ue){h={error:Ue}}finally{try{Z&&!Z.done&&(g=k.return)&&g.call(k)}finally{if(h)throw h.error}}v++}}catch(Ue){n={error:Ue}}finally{try{A&&!A.done&&(s=E.return)&&s.call(E)}finally{if(n)throw n.error}}return a},i.isValidBarcodeColumn=function(t,n){return n>=0&&n<=t.getBarcodeColumnCount()+1},i.getStartColumn=function(t,n,s,h){var g,a,o=h?1:-1,l=null;if(i.isValidBarcodeColumn(t,n-o)&&(l=t.getDetectionResultColumn(n-o).getCodeword(s)),null!=l)return h?l.getEndX():l.getStartX();if(null!=(l=t.getDetectionResultColumn(n).getCodewordNearby(s)))return h?l.getStartX():l.getEndX();if(i.isValidBarcodeColumn(t,n-o)&&(l=t.getDetectionResultColumn(n-o).getCodewordNearby(s)),null!=l)return h?l.getEndX():l.getStartX();for(var v=0;i.isValidBarcodeColumn(t,n-o);){n-=o;try{for(var E=(g=void 0,Ls(t.getDetectionResultColumn(n).getCodewords())),A=E.next();!A.done;A=E.next()){var R=A.value;if(null!=R)return(h?R.getEndX():R.getStartX())+o*v*(R.getEndX()-R.getStartX())}}catch(k){g={error:k}}finally{try{A&&!A.done&&(a=E.return)&&a.call(E)}finally{if(g)throw g.error}}v++}return h?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()},i.detectCodeword=function(t,n,s,h,g,a,o,l){g=i.adjustCodewordStartColumn(t,n,s,h,g,a);var v=i.getModuleBitCount(t,n,s,h,g,a);if(null==v)return null;var E,A=pr.sum(v);if(h)E=g+A;else{for(var R=0;R<v.length/2;R++){var k=v[R];v[R]=v[v.length-1-R],v[v.length-1-R]=k}g=(E=g)-A}if(!i.checkCodewordSkew(A,o,l))return null;var Z=Yo.getDecodedValue(v),se=Ae.getCodeword(Z);return-1===se?null:new od(g,E,i.getCodewordBucketNumber(Z),se)},i.getModuleBitCount=function(t,n,s,h,g,a){for(var o=g,l=new Int32Array(8),v=0,E=h?1:-1,A=h;(h?o<s:o>=n)&&v<l.length;)t.get(o,a)===A?(l[v]++,o+=E):(v++,A=!A);return v===l.length||o===(h?s:n)&&v===l.length-1?l:null},i.getNumberOfECCodeWords=function(t){return 2<<t},i.adjustCodewordStartColumn=function(t,n,s,h,g,a){for(var o=g,l=h?-1:1,v=0;v<2;v++){for(;(h?o>=n:o<s)&&h===t.get(o,a);){if(Math.abs(g-o)>i.CODEWORD_SKEW_SIZE)return g;o+=l}l=-l,h=!h}return o},i.checkCodewordSkew=function(t,n,s){return n-i.CODEWORD_SKEW_SIZE<=t&&t<=s+i.CODEWORD_SKEW_SIZE},i.decodeCodewords=function(t,n,s){if(0===t.length)throw fe.getFormatInstance();var h=1<<n+1,g=i.correctErrors(t,s,h);i.verifyCodewordCount(t,h);var a=Iu.decode(t,""+n);return a.setErrorsCorrected(g),a.setErasures(s.length),a},i.correctErrors=function(t,n,s){if(null!=n&&n.length>s/2+i.MAX_ERRORS||s<0||s>i.MAX_EC_CODEWORDS)throw ct.getChecksumInstance();return i.errorCorrection.decode(t,s,n)},i.verifyCodewordCount=function(t,n){if(t.length<4)throw fe.getFormatInstance();var s=t[0];if(s>t.length)throw fe.getFormatInstance();if(0===s){if(!(n<t.length))throw fe.getFormatInstance();t[0]=t.length-n}},i.getBitCountForCodeword=function(t){for(var n=new Int32Array(8),s=0,h=n.length-1;!((1&t)!==s&&(s=1&t,h--,h<0));)n[h]++,t>>=1;return n},i.getCodewordBucketNumber=function(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)},i.getCodewordBucketNumber_number=function(t){return i.getCodewordBucketNumber(i.getBitCountForCodeword(t))},i.getCodewordBucketNumber_Int32Array=function(t){return(t[0]-t[2]+t[4]-t[6]+9)%9},i.toString=function(t){for(var n=new Cu,s=0;s<t.length;s++){n.format("Row %2d: ",s);for(var h=0;h<t[s].length;h++){var g=t[s][h];0===g.getValue().length?n.format("        ",null):n.format("%4d(%2d)",g.getValue()[0],g.getConfidence(g.getValue()[0]))}n.format("%n")}return n.toString()},i.CODEWORD_SKEW_SIZE=2,i.MAX_ERRORS=3,i.MAX_EC_CODEWORDS=512,i.errorCorrection=new Ii,i}();const na=_l;var Pc=function(){function i(){}return i.prototype.decode=function(t,n){void 0===n&&(n=null);var s=i.decode(t,n,!1);if(null==s||0===s.length||null==s[0])throw Kt.getNotFoundInstance();return s[0]},i.prototype.decodeMultiple=function(t,n){void 0===n&&(n=null);try{return i.decode(t,n,!0)}catch(s){throw s instanceof fe||s instanceof ct?Kt.getNotFoundInstance():s}},i.decode=function(t,n,s){var h,g,a=new Array,o=or.detectMultiple(t,n,s);try{for(var l=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(o.getPoints()),v=l.next();!v.done;v=l.next()){var E=v.value,A=na.decode(o.getBits(),E[4],E[5],E[6],E[7],i.getMinCodewordWidth(E),i.getMaxCodewordWidth(E)),R=new jn(A.getText(),A.getRawBytes(),void 0,E,He.PDF_417);R.putMetadata(ht.ERROR_CORRECTION_LEVEL,A.getECLevel());var k=A.getOther();null!=k&&R.putMetadata(ht.PDF417_EXTRA_METADATA,k),a.push(R)}}catch(Z){h={error:Z}}finally{try{v&&!v.done&&(g=l.return)&&g.call(l)}finally{if(h)throw h.error}}return a.map(function(Z){return Z})},i.getMaxWidth=function(t,n){return null==t||null==n?0:Math.trunc(Math.abs(t.getX()-n.getX()))},i.getMinWidth=function(t,n){return null==t||null==n?Le.MAX_VALUE:Math.trunc(Math.abs(t.getX()-n.getX()))},i.getMaxCodewordWidth=function(t){return Math.floor(Math.max(Math.max(i.getMaxWidth(t[0],t[4]),i.getMaxWidth(t[6],t[2])*Ae.MODULES_IN_CODEWORD/Ae.MODULES_IN_STOP_PATTERN),Math.max(i.getMaxWidth(t[1],t[5]),i.getMaxWidth(t[7],t[3])*Ae.MODULES_IN_CODEWORD/Ae.MODULES_IN_STOP_PATTERN)))},i.getMinCodewordWidth=function(t){return Math.floor(Math.min(Math.min(i.getMinWidth(t[0],t[4]),i.getMinWidth(t[6],t[2])*Ae.MODULES_IN_CODEWORD/Ae.MODULES_IN_STOP_PATTERN),Math.min(i.getMinWidth(t[1],t[5]),i.getMinWidth(t[7],t[3])*Ae.MODULES_IN_CODEWORD/Ae.MODULES_IN_STOP_PATTERN)))},i.prototype.reset=function(){},i}();const mc=Pc;var kc=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),ud=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return kc(t,i),t.kind="ReaderException",t}($e);const Bl=ud;var lu=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Sd=function(){function i(){}return i.prototype.decode=function(t,n){return this.setHints(n),this.decodeInternal(t)},i.prototype.decodeWithState=function(t){return null==this.readers&&this.setHints(null),this.decodeInternal(t)},i.prototype.setHints=function(t){this.hints=t;var n=null!=t&&void 0!==t.get(te.TRY_HARDER),s=null==t?null:t.get(te.POSSIBLE_FORMATS),h=new Array;if(null!=s){var g=s.some(function(a){return a===He.UPC_A||a===He.UPC_E||a===He.EAN_13||a===He.EAN_8||a===He.CODABAR||a===He.CODE_39||a===He.CODE_93||a===He.CODE_128||a===He.ITF||a===He.RSS_14||a===He.RSS_EXPANDED});g&&!n&&h.push(new As(t)),s.includes(He.QR_CODE)&&h.push(new V),s.includes(He.DATA_MATRIX)&&h.push(new Li),s.includes(He.AZTEC)&&h.push(new Kr),s.includes(He.PDF_417)&&h.push(new mc),g&&n&&h.push(new As(t))}0===h.length&&(n||h.push(new As(t)),h.push(new V),h.push(new Li),h.push(new Kr),h.push(new mc),n&&h.push(new As(t))),this.readers=h},i.prototype.reset=function(){var t,n;if(null!==this.readers)try{for(var s=lu(this.readers),h=s.next();!h.done;h=s.next())h.value.reset()}catch(a){t={error:a}}finally{try{h&&!h.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}},i.prototype.decodeInternal=function(t){var n,s;if(null===this.readers)throw new Bl("No readers where selected, nothing can be read.");try{for(var h=lu(this.readers),g=h.next();!g.done;g=h.next()){var a=g.value;try{return a.decode(t,this.hints)}catch(o){if(o instanceof Bl)continue}}}catch(o){n={error:o}}finally{try{g&&!g.done&&(s=h.return)&&s.call(h)}finally{if(n)throw n.error}}throw new Kt("No MultiFormat Readers were able to detect the code.")},i}();const qc=Sd;var Ul=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),El=(function(i){function t(n,s){void 0===n&&(n=null),void 0===s&&(s=500);var g=new qc;return g.setHints(n),i.call(this,g,s)||this}Ul(t,i),t.prototype.decodeBitmap=function(n){return this.reader.decodeWithState(n)}}(Un),function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}()),bd=(function(i){El(function t(n){return void 0===n&&(n=500),i.call(this,new mc,n)||this},i)}(Un),function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}()),$u=(function(i){bd(function t(n){return void 0===n&&(n=500),i.call(this,new V,n)||this},i)}(Un),(()=>(function(i){i[i.ERROR_CORRECTION=0]="ERROR_CORRECTION",i[i.CHARACTER_SET=1]="CHARACTER_SET",i[i.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",i[i.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",i[i.MIN_SIZE=4]="MIN_SIZE",i[i.MAX_SIZE=5]="MAX_SIZE",i[i.MARGIN=6]="MARGIN",i[i.PDF417_COMPACT=7]="PDF417_COMPACT",i[i.PDF417_COMPACTION=8]="PDF417_COMPACTION",i[i.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",i[i.AZTEC_LAYERS=10]="AZTEC_LAYERS",i[i.QR_VERSION=11]="QR_VERSION",i[i.GS1_FORMAT=12]="GS1_FORMAT",i[i.FORCE_C40=13]="FORCE_C40"}($u||($u={})),$u))());const po=$u;var du=function(){function i(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new Zr(t,Int32Array.from([1])))}return i.prototype.buildGenerator=function(t){var n=this.cachedGenerators;if(t>=n.length)for(var s=n[n.length-1],h=this.field,g=n.length;g<=t;g++){var a=s.multiply(new Zr(h,Int32Array.from([1,h.exp(g-1+h.getGeneratorBase())])));n.push(a),s=a}return n[t]},i.prototype.encode=function(t,n){if(0===n)throw new Ke("No error correction bytes");var s=t.length-n;if(s<=0)throw new Ke("No data bytes provided");var h=this.buildGenerator(n),g=new Int32Array(s);Be.arraycopy(t,0,g,0,s);for(var a=new Zr(this.field,g),l=(a=a.multiplyByMonomial(n,1)).divide(h)[1].getCoefficients(),v=n-l.length,E=0;E<v;E++)t[s+E]=0;Be.arraycopy(l,0,t,s+v,l.length)},i}();const wl=du;var hu=function(){function i(){}return i.applyMaskPenaltyRule1=function(t){return i.applyMaskPenaltyRule1Internal(t,!0)+i.applyMaskPenaltyRule1Internal(t,!1)},i.applyMaskPenaltyRule2=function(t){for(var n=0,s=t.getArray(),h=t.getWidth(),g=t.getHeight(),a=0;a<g-1;a++)for(var o=s[a],l=0;l<h-1;l++){var v=o[l];v===o[l+1]&&v===s[a+1][l]&&v===s[a+1][l+1]&&n++}return i.N2*n},i.applyMaskPenaltyRule3=function(t){for(var n=0,s=t.getArray(),h=t.getWidth(),g=t.getHeight(),a=0;a<g;a++)for(var o=0;o<h;o++){var l=s[a];o+6<h&&1===l[o]&&0===l[o+1]&&1===l[o+2]&&1===l[o+3]&&1===l[o+4]&&0===l[o+5]&&1===l[o+6]&&(i.isWhiteHorizontal(l,o-4,o)||i.isWhiteHorizontal(l,o+7,o+11))&&n++,a+6<g&&1===s[a][o]&&0===s[a+1][o]&&1===s[a+2][o]&&1===s[a+3][o]&&1===s[a+4][o]&&0===s[a+5][o]&&1===s[a+6][o]&&(i.isWhiteVertical(s,o,a-4,a)||i.isWhiteVertical(s,o,a+7,a+11))&&n++}return n*i.N3},i.isWhiteHorizontal=function(t,n,s){n=Math.max(n,0),s=Math.min(s,t.length);for(var h=n;h<s;h++)if(1===t[h])return!1;return!0},i.isWhiteVertical=function(t,n,s,h){s=Math.max(s,0),h=Math.min(h,t.length);for(var g=s;g<h;g++)if(1===t[g][n])return!1;return!0},i.applyMaskPenaltyRule4=function(t){for(var n=0,s=t.getArray(),h=t.getWidth(),g=t.getHeight(),a=0;a<g;a++)for(var o=s[a],l=0;l<h;l++)1===o[l]&&n++;var v=t.getHeight()*t.getWidth();return Math.floor(10*Math.abs(2*n-v)/v)*i.N4},i.getDataMaskBit=function(t,n,s){var h,g;switch(t){case 0:h=s+n&1;break;case 1:h=1&s;break;case 2:h=n%3;break;case 3:h=(s+n)%3;break;case 4:h=Math.floor(s/2)+Math.floor(n/3)&1;break;case 5:h=(1&(g=s*n))+g%3;break;case 6:h=(1&(g=s*n))+g%3&1;break;case 7:h=(g=s*n)%3+(s+n&1)&1;break;default:throw new Ke("Invalid mask pattern: "+t)}return 0===h},i.applyMaskPenaltyRule1Internal=function(t,n){for(var s=0,h=n?t.getHeight():t.getWidth(),g=n?t.getWidth():t.getHeight(),a=t.getArray(),o=0;o<h;o++){for(var l=0,v=-1,E=0;E<g;E++){var A=n?a[o][E]:a[E][o];A===v?l++:(l>=5&&(s+=i.N1+(l-5)),l=1,v=A)}l>=5&&(s+=i.N1+(l-5))}return s},i.N1=3,i.N2=3,i.N3=40,i.N4=10,i}();const ga=hu;var vc=function(){function i(t,n){this.width=t,this.height=n;for(var s=new Array(n),h=0;h!==n;h++)s[h]=new Uint8Array(t);this.bytes=s}return i.prototype.getHeight=function(){return this.height},i.prototype.getWidth=function(){return this.width},i.prototype.get=function(t,n){return this.bytes[n][t]},i.prototype.getArray=function(){return this.bytes},i.prototype.setNumber=function(t,n,s){this.bytes[n][t]=s},i.prototype.setBoolean=function(t,n,s){this.bytes[n][t]=s?1:0},i.prototype.clear=function(t){var n,s;try{for(var h=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.bytes),g=h.next();!g.done;g=h.next())mt.fill(g.value,t)}catch(o){n={error:o}}finally{try{g&&!g.done&&(s=h.return)&&s.call(h)}finally{if(n)throw n.error}}},i.prototype.equals=function(t){if(!(t instanceof i))return!1;var n=t;if(this.width!==n.width||this.height!==n.height)return!1;for(var s=0,h=this.height;s<h;++s)for(var g=this.bytes[s],a=n.bytes[s],o=0,l=this.width;o<l;++o)if(g[o]!==a[o])return!1;return!0},i.prototype.toString=function(){for(var t=new En,n=0,s=this.height;n<s;++n){for(var h=this.bytes[n],g=0,a=this.width;g<a;++g)switch(h[g]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ")}t.append("\n")}return t.toString()},i}();const Zc=vc;var Cl=function(){function i(){this.maskPattern=-1}return i.prototype.getMode=function(){return this.mode},i.prototype.getECLevel=function(){return this.ecLevel},i.prototype.getVersion=function(){return this.version},i.prototype.getMaskPattern=function(){return this.maskPattern},i.prototype.getMatrix=function(){return this.matrix},i.prototype.toString=function(){var t=new En;return t.append("<<\n"),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append("\n ecLevel: "),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append("\n version: "),t.append(this.version?this.version.toString():"null"),t.append("\n maskPattern: "),t.append(this.maskPattern.toString()),this.matrix?(t.append("\n matrix:\n"),t.append(this.matrix.toString())):t.append("\n matrix: null\n"),t.append(">>\n"),t.toString()},i.prototype.setMode=function(t){this.mode=t},i.prototype.setECLevel=function(t){this.ecLevel=t},i.prototype.setVersion=function(t){this.version=t},i.prototype.setMaskPattern=function(t){this.maskPattern=t},i.prototype.setMatrix=function(t){this.matrix=t},i.isValidMaskPattern=function(t){return t>=0&&t<i.NUM_MASK_PATTERNS},i.NUM_MASK_PATTERNS=8,i}();const Io=Cl;var $l=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Fc=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return $l(t,i),t.kind="WriterException",t}($e);const ko=Fc;var Dd=function(){function i(){}return i.clearMatrix=function(t){t.clear(255)},i.buildMatrix=function(t,n,s,h,g){i.clearMatrix(g),i.embedBasicPatterns(s,g),i.embedTypeInfo(n,h,g),i.maybeEmbedVersionInfo(s,g),i.embedDataBits(t,h,g)},i.embedBasicPatterns=function(t,n){i.embedPositionDetectionPatternsAndSeparators(n),i.embedDarkDotAtLeftBottomCorner(n),i.maybeEmbedPositionAdjustmentPatterns(t,n),i.embedTimingPatterns(n)},i.embedTypeInfo=function(t,n,s){var h=new Ze;i.makeTypeInfoBits(t,n,h);for(var g=0,a=h.getSize();g<a;++g){var o=h.get(h.getSize()-1-g),l=i.TYPE_INFO_COORDINATES[g];if(s.setBoolean(l[0],l[1],o),g<8){var A=s.getWidth()-g-1;s.setBoolean(A,R=8,o)}else{A=8;var R=s.getHeight()-7+(g-8);s.setBoolean(A,R,o)}}},i.maybeEmbedVersionInfo=function(t,n){if(!(t.getVersionNumber()<7)){var s=new Ze;i.makeVersionInfoBits(t,s);for(var h=17,g=0;g<6;++g)for(var a=0;a<3;++a){var o=s.get(h);h--,n.setBoolean(g,n.getHeight()-11+a,o),n.setBoolean(n.getHeight()-11+a,g,o)}}},i.embedDataBits=function(t,n,s){for(var h=0,g=-1,a=s.getWidth()-1,o=s.getHeight()-1;a>0;){for(6===a&&(a-=1);o>=0&&o<s.getHeight();){for(var l=0;l<2;++l){var v=a-l;if(i.isEmpty(s.get(v,o))){var E=void 0;h<t.getSize()?(E=t.get(h),++h):E=!1,255!==n&&ga.getDataMaskBit(n,v,o)&&(E=!E),s.setBoolean(v,o,E)}}o+=g}o+=g=-g,a-=2}if(h!==t.getSize())throw new ko("Not all bits consumed: "+h+"/"+t.getSize())},i.findMSBSet=function(t){return 32-Le.numberOfLeadingZeros(t)},i.calculateBCHCode=function(t,n){if(0===n)throw new Ke("0 polynomial");var s=i.findMSBSet(n);for(t<<=s-1;i.findMSBSet(t)>=s;)t^=n<<i.findMSBSet(t)-s;return t},i.makeTypeInfoBits=function(t,n,s){if(!Io.isValidMaskPattern(n))throw new ko("Invalid mask pattern");var h=t.getBits()<<3|n;s.appendBits(h,5);var g=i.calculateBCHCode(h,i.TYPE_INFO_POLY);s.appendBits(g,10);var a=new Ze;if(a.appendBits(i.TYPE_INFO_MASK_PATTERN,15),s.xor(a),15!==s.getSize())throw new ko("should not happen but we got: "+s.getSize())},i.makeVersionInfoBits=function(t,n){n.appendBits(t.getVersionNumber(),6);var s=i.calculateBCHCode(t.getVersionNumber(),i.VERSION_INFO_POLY);if(n.appendBits(s,12),18!==n.getSize())throw new ko("should not happen but we got: "+n.getSize())},i.isEmpty=function(t){return 255===t},i.embedTimingPatterns=function(t){for(var n=8;n<t.getWidth()-8;++n){var s=(n+1)%2;i.isEmpty(t.get(n,6))&&t.setNumber(n,6,s),i.isEmpty(t.get(6,n))&&t.setNumber(6,n,s)}},i.embedDarkDotAtLeftBottomCorner=function(t){if(0===t.get(8,t.getHeight()-8))throw new ko;t.setNumber(8,t.getHeight()-8,1)},i.embedHorizontalSeparationPattern=function(t,n,s){for(var h=0;h<8;++h){if(!i.isEmpty(s.get(t+h,n)))throw new ko;s.setNumber(t+h,n,0)}},i.embedVerticalSeparationPattern=function(t,n,s){for(var h=0;h<7;++h){if(!i.isEmpty(s.get(t,n+h)))throw new ko;s.setNumber(t,n+h,0)}},i.embedPositionAdjustmentPattern=function(t,n,s){for(var h=0;h<5;++h)for(var g=i.POSITION_ADJUSTMENT_PATTERN[h],a=0;a<5;++a)s.setNumber(t+a,n+h,g[a])},i.embedPositionDetectionPattern=function(t,n,s){for(var h=0;h<7;++h)for(var g=i.POSITION_DETECTION_PATTERN[h],a=0;a<7;++a)s.setNumber(t+a,n+h,g[a])},i.embedPositionDetectionPatternsAndSeparators=function(t){var n=i.POSITION_DETECTION_PATTERN[0].length;i.embedPositionDetectionPattern(0,0,t),i.embedPositionDetectionPattern(t.getWidth()-n,0,t),i.embedPositionDetectionPattern(0,t.getWidth()-n,t),i.embedHorizontalSeparationPattern(0,7,t),i.embedHorizontalSeparationPattern(t.getWidth()-8,7,t),i.embedHorizontalSeparationPattern(0,t.getWidth()-8,t),i.embedVerticalSeparationPattern(7,0,t),i.embedVerticalSeparationPattern(t.getHeight()-7-1,0,t),i.embedVerticalSeparationPattern(7,t.getHeight()-7,t)},i.maybeEmbedPositionAdjustmentPatterns=function(t,n){if(!(t.getVersionNumber()<2))for(var s=t.getVersionNumber()-1,h=i.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[s],g=0,a=h.length;g!==a;g++){var o=h[g];if(o>=0)for(var l=0;l!==a;l++){var v=h[l];v>=0&&i.isEmpty(n.get(v,o))&&i.embedPositionAdjustmentPattern(v-2,o-2,n)}}},i.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),i.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),i.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),i.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),i.VERSION_INFO_POLY=7973,i.TYPE_INFO_POLY=1335,i.TYPE_INFO_MASK_PATTERN=21522,i}();const tc=Dd;var Lc=function(){function i(t,n){this.dataBytes=t,this.errorCorrectionBytes=n}return i.prototype.getDataBytes=function(){return this.dataBytes},i.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},i}();const Xc=Lc;var yc=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Au=function(){function i(){}return i.calculateMaskPenalty=function(t){return ga.applyMaskPenaltyRule1(t)+ga.applyMaskPenaltyRule2(t)+ga.applyMaskPenaltyRule3(t)+ga.applyMaskPenaltyRule4(t)},i.encode=function(t,n,s){void 0===s&&(s=null);var h=i.DEFAULT_BYTE_MODE_ENCODING,g=null!==s&&void 0!==s.get(po.CHARACTER_SET);g&&(h=s.get(po.CHARACTER_SET).toString());var a=this.chooseMode(t,h),o=new Ze;if(a===Co.BYTE&&(g||i.DEFAULT_BYTE_MODE_ENCODING!==h)){var l=Dt.getCharacterSetECIByName(h);void 0!==l&&this.appendECI(l,o)}this.appendModeInfo(a,o);var E,v=new Ze;if(this.appendBytes(t,a,v,h),null!==s&&void 0!==s.get(po.QR_VERSION)){var A=Number.parseInt(s.get(po.QR_VERSION).toString(),10);E=Ss.getVersionForNumber(A);var R=this.calculateBitsNeeded(a,o,v,E);if(!this.willFit(R,E,n))throw new ko("Data too big for requested version")}else E=this.recommendVersion(n,a,o,v);var k=new Ze;k.appendBitArray(o);var Z=a===Co.BYTE?v.getSizeInBytes():t.length;this.appendLengthInfo(Z,E,a,k),k.appendBitArray(v);var se=E.getECBlocksForLevel(n),Me=E.getTotalCodewords()-se.getTotalECCodewords();this.terminateBits(Me,k);var Ue=this.interleaveWithECBytes(k,E.getTotalCodewords(),Me,se.getNumBlocks()),ze=new Io;ze.setECLevel(n),ze.setMode(a),ze.setVersion(E);var Ct=E.getDimensionForVersion(),Mt=new Zc(Ct,Ct),gn=this.chooseMaskPattern(Ue,n,E,Mt);return ze.setMaskPattern(gn),tc.buildMatrix(Ue,n,E,gn,Mt),ze.setMatrix(Mt),ze},i.recommendVersion=function(t,n,s,h){var g=this.calculateBitsNeeded(n,s,h,Ss.getVersionForNumber(1)),a=this.chooseVersion(g,t),o=this.calculateBitsNeeded(n,s,h,a);return this.chooseVersion(o,t)},i.calculateBitsNeeded=function(t,n,s,h){return n.getSize()+t.getCharacterCountBits(h)+s.getSize()},i.getAlphanumericCode=function(t){return t<i.ALPHANUMERIC_TABLE.length?i.ALPHANUMERIC_TABLE[t]:-1},i.chooseMode=function(t,n){if(void 0===n&&(n=null),Dt.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(t))return Co.KANJI;for(var s=!1,h=!1,g=0,a=t.length;g<a;++g){var o=t.charAt(g);if(i.isDigit(o))s=!0;else{if(-1===this.getAlphanumericCode(o.charCodeAt(0)))return Co.BYTE;h=!0}}return h?Co.ALPHANUMERIC:s?Co.NUMERIC:Co.BYTE},i.isOnlyDoubleByteKanji=function(t){var n;try{n=Gn.encode(t,Dt.SJIS)}catch(a){return!1}var s=n.length;if(s%2!=0)return!1;for(var h=0;h<s;h+=2){var g=255&n[h];if((g<129||g>159)&&(g<224||g>235))return!1}return!0},i.chooseMaskPattern=function(t,n,s,h){for(var g=Number.MAX_SAFE_INTEGER,a=-1,o=0;o<Io.NUM_MASK_PATTERNS;o++){tc.buildMatrix(t,n,s,o,h);var l=this.calculateMaskPenalty(h);l<g&&(g=l,a=o)}return a},i.chooseVersion=function(t,n){for(var s=1;s<=40;s++){var h=Ss.getVersionForNumber(s);if(i.willFit(t,h,n))return h}throw new ko("Data too big")},i.willFit=function(t,n,s){return n.getTotalCodewords()-n.getECBlocksForLevel(s).getTotalECCodewords()>=(t+7)/8},i.terminateBits=function(t,n){var s=8*t;if(n.getSize()>s)throw new ko("data bits cannot fit in the QR Code"+n.getSize()+" > "+s);for(var h=0;h<4&&n.getSize()<s;++h)n.appendBit(!1);var g=7&n.getSize();if(g>0)for(h=g;h<8;h++)n.appendBit(!1);var a=t-n.getSizeInBytes();for(h=0;h<a;++h)n.appendBits(1&h?17:236,8);if(n.getSize()!==s)throw new ko("Bits size does not equal capacity")},i.getNumDataBytesAndNumECBytesForBlockID=function(t,n,s,h,g,a){if(h>=s)throw new ko("Block ID too large");var o=t%s,l=s-o,v=Math.floor(t/s),E=v+1,A=Math.floor(n/s),R=A+1,k=v-A,Z=E-R;if(k!==Z)throw new ko("EC bytes mismatch");if(s!==l+o)throw new ko("RS blocks mismatch");if(t!==(A+k)*l+(R+Z)*o)throw new ko("Total bytes mismatch");h<l?(g[0]=A,a[0]=k):(g[0]=R,a[0]=Z)},i.interleaveWithECBytes=function(t,n,s,h){var g,a,o,l;if(t.getSizeInBytes()!==s)throw new ko("Number of bits and data bytes does not match");for(var v=0,E=0,A=0,R=new Array,k=0;k<h;++k){var Z=new Int32Array(1),se=new Int32Array(1);i.getNumDataBytesAndNumECBytesForBlockID(n,s,h,k,Z,se);var Me=Z[0],Ue=new Uint8Array(Me);t.toBytes(8*v,Ue,0,Me);var ze=i.generateECBytes(Ue,se[0]);R.push(new Xc(Ue,ze)),E=Math.max(E,Me),A=Math.max(A,ze.length),v+=Z[0]}if(s!==v)throw new ko("Data bytes does not match offset");var Ct=new Ze;for(k=0;k<E;++k)try{for(var Mt=(g=void 0,yc(R)),gn=Mt.next();!gn.done;gn=Mt.next())k<(Ue=gn.value.getDataBytes()).length&&Ct.appendBits(Ue[k],8)}catch(di){g={error:di}}finally{try{gn&&!gn.done&&(a=Mt.return)&&a.call(Mt)}finally{if(g)throw g.error}}for(k=0;k<A;++k)try{for(var $n=(o=void 0,yc(R)),Sr=$n.next();!Sr.done;Sr=$n.next())k<(ze=Sr.value.getErrorCorrectionBytes()).length&&Ct.appendBits(ze[k],8)}catch(di){o={error:di}}finally{try{Sr&&!Sr.done&&(l=$n.return)&&l.call($n)}finally{if(o)throw o.error}}if(n!==Ct.getSizeInBytes())throw new ko("Interleaving error: "+n+" and "+Ct.getSizeInBytes()+" differ.");return Ct},i.generateECBytes=function(t,n){for(var s=t.length,h=new Int32Array(s+n),g=0;g<s;g++)h[g]=255&t[g];new wl(wt.QR_CODE_FIELD_256).encode(h,n);var a=new Uint8Array(n);for(g=0;g<n;g++)a[g]=h[s+g];return a},i.appendModeInfo=function(t,n){n.appendBits(t.getBits(),4)},i.appendLengthInfo=function(t,n,s,h){var g=s.getCharacterCountBits(n);if(t>=1<<g)throw new ko(t+" is bigger than "+((1<<g)-1));h.appendBits(t,g)},i.appendBytes=function(t,n,s,h){switch(n){case Co.NUMERIC:i.appendNumericBytes(t,s);break;case Co.ALPHANUMERIC:i.appendAlphanumericBytes(t,s);break;case Co.BYTE:i.append8BitBytes(t,s,h);break;case Co.KANJI:i.appendKanjiBytes(t,s);break;default:throw new ko("Invalid mode: "+n)}},i.getDigit=function(t){return t.charCodeAt(0)-48},i.isDigit=function(t){var n=i.getDigit(t);return n>=0&&n<=9},i.appendNumericBytes=function(t,n){for(var s=t.length,h=0;h<s;){var g=i.getDigit(t.charAt(h));if(h+2<s){var a=i.getDigit(t.charAt(h+1)),o=i.getDigit(t.charAt(h+2));n.appendBits(100*g+10*a+o,10),h+=3}else h+1<s?(a=i.getDigit(t.charAt(h+1)),n.appendBits(10*g+a,7),h+=2):(n.appendBits(g,4),h++)}},i.appendAlphanumericBytes=function(t,n){for(var s=t.length,h=0;h<s;){var g=i.getAlphanumericCode(t.charCodeAt(h));if(-1===g)throw new ko;if(h+1<s){var a=i.getAlphanumericCode(t.charCodeAt(h+1));if(-1===a)throw new ko;n.appendBits(45*g+a,11),h+=2}else n.appendBits(g,6),h++}},i.append8BitBytes=function(t,n,s){var h;try{h=Gn.encode(t,s)}catch(l){throw new ko(l)}for(var g=0,a=h.length;g!==a;g++)n.appendBits(h[g],8)},i.appendKanjiBytes=function(t,n){var s;try{s=Gn.encode(t,Dt.SJIS)}catch(A){throw new ko(A)}for(var h=s.length,g=0;g<h;g+=2){var l=(255&s[g])<<8&4294967295|255&s[g+1],v=-1;if(l>=33088&&l<=40956?v=l-33088:l>=57408&&l<=60351&&(v=l-49472),-1===v)throw new ko("Invalid byte sequence");n.appendBits(192*(v>>8)+(255&v),13)}},i.appendECI=function(t,n){n.appendBits(Co.ECI.getBits(),4),n.appendBits(t.getValue(),8)},i.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),i.DEFAULT_BYTE_MODE_ENCODING=Dt.UTF8.getName(),i}();const Bc=Au;!function(){function i(){}i.prototype.write=function(t,n,s,h){if(void 0===h&&(h=null),0===t.length)throw new Ke("Found empty contents");if(n<0||s<0)throw new Ke("Requested dimensions are too small: "+n+"x"+s);var g=$a.L,a=i.QUIET_ZONE_SIZE;null!==h&&(void 0!==h.get(po.ERROR_CORRECTION)&&(g=$a.fromString(h.get(po.ERROR_CORRECTION).toString())),void 0!==h.get(po.MARGIN)&&(a=Number.parseInt(h.get(po.MARGIN).toString(),10)));var o=Bc.encode(t,g,h);return this.renderResult(o,n,s,a)},i.prototype.writeToDom=function(t,n,s,h,g){void 0===g&&(g=null),"string"==typeof t&&(t=document.querySelector(t));var a=this.write(n,s,h,g);t&&t.appendChild(a)},i.prototype.renderResult=function(t,n,s,h){var g=t.getMatrix();if(null===g)throw new Ei;for(var a=g.getWidth(),o=g.getHeight(),l=a+2*h,v=o+2*h,E=Math.max(n,l),A=Math.max(s,v),R=Math.min(Math.floor(E/l),Math.floor(A/v)),k=Math.floor((E-a*R)/2),Z=Math.floor((A-o*R)/2),se=this.createSVGElement(E,A),Me=0,Ue=Z;Me<o;Me++,Ue+=R)for(var ze=0,Ct=k;ze<a;ze++,Ct+=R)if(1===g.get(ze,Me)){var Mt=this.createSvgRectElement(Ct,Ue,R,R);se.appendChild(Mt)}return se},i.prototype.createSVGElement=function(t,n){var s=document.createElementNS(i.SVG_NS,"svg");return s.setAttributeNS(null,"height",t.toString()),s.setAttributeNS(null,"width",n.toString()),s},i.prototype.createSvgRectElement=function(t,n,s,h){var g=document.createElementNS(i.SVG_NS,"rect");return g.setAttributeNS(null,"x",t.toString()),g.setAttributeNS(null,"y",n.toString()),g.setAttributeNS(null,"height",s.toString()),g.setAttributeNS(null,"width",h.toString()),g.setAttributeNS(null,"fill","#000000"),g},i.QUIET_ZONE_SIZE=4,i.SVG_NS="http://www.w3.org/2000/svg"}();!function(){function i(){}i.prototype.encode=function(t,n,s,h,g){if(0===t.length)throw new Ke("Found empty contents");if(n!==He.QR_CODE)throw new Ke("Can only encode QR_CODE, but got "+n);if(s<0||h<0)throw new Ke("Requested dimensions are too small: "+s+"x"+h);var a=$a.L,o=i.QUIET_ZONE_SIZE;null!==g&&(void 0!==g.get(po.ERROR_CORRECTION)&&(a=$a.fromString(g.get(po.ERROR_CORRECTION).toString())),void 0!==g.get(po.MARGIN)&&(o=Number.parseInt(g.get(po.MARGIN).toString(),10)));var l=Bc.encode(t,a,g);return i.renderResult(l,s,h,o)},i.renderResult=function(t,n,s,h){var g=t.getMatrix();if(null===g)throw new Ei;for(var a=g.getWidth(),o=g.getHeight(),l=a+2*h,v=o+2*h,E=Math.max(n,l),A=Math.max(s,v),R=Math.min(Math.floor(E/l),Math.floor(A/v)),k=Math.floor((E-a*R)/2),Z=Math.floor((A-o*R)/2),se=new Ir(E,A),Me=0,Ue=Z;Me<o;Me++,Ue+=R)for(var ze=0,Ct=k;ze<a;ze++,Ct+=R)1===g.get(ze,Me)&&se.setRegion(Ct,Ue,R,R);return se},i.QUIET_ZONE_SIZE=4}();var Is=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();!function(i){function t(n,s,h,g,a,o,l,v){var E=i.call(this,o,l)||this;if(E.yuvData=n,E.dataWidth=s,E.dataHeight=h,E.left=g,E.top=a,g+o>s||a+l>h)throw new Ke("Crop rectangle does not fit within image data.");return v&&E.reverseHorizontal(o,l),E}Is(t,i),t.prototype.getRow=function(n,s){if(n<0||n>=this.getHeight())throw new Ke("Requested row is outside the image: "+n);var h=this.getWidth();return(null==s||s.length<h)&&(s=new Uint8ClampedArray(h)),Be.arraycopy(this.yuvData,(n+this.top)*this.dataWidth+this.left,s,0,h),s},t.prototype.getMatrix=function(){var n=this.getWidth(),s=this.getHeight();if(n===this.dataWidth&&s===this.dataHeight)return this.yuvData;var h=n*s,g=new Uint8ClampedArray(h),a=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Be.arraycopy(this.yuvData,a,g,0,h),g;for(var o=0;o<s;o++)Be.arraycopy(this.yuvData,a,g,o*n,n),a+=this.dataWidth;return g},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(n,s,h,g){return new t(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+s,h,g,!1)},t.prototype.renderThumbnail=function(){for(var n=this.getWidth()/t.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/t.THUMBNAIL_SCALE_FACTOR,h=new Int32Array(n*s),g=this.yuvData,a=this.top*this.dataWidth+this.left,o=0;o<s;o++){for(var l=o*n,v=0;v<n;v++)h[l+v]=4278190080|65793*(255&g[a+v*t.THUMBNAIL_SCALE_FACTOR]);a+=this.dataWidth*t.THUMBNAIL_SCALE_FACTOR}return h},t.prototype.getThumbnailWidth=function(){return this.getWidth()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.getThumbnailHeight=function(){return this.getHeight()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.reverseHorizontal=function(n,s){for(var h=this.yuvData,g=0,a=this.top*this.dataWidth+this.left;g<s;g++,a+=this.dataWidth)for(var o=a+n/2,l=a,v=a+n-1;l<o;l++,v--){var E=h[l];h[l]=h[v],h[v]=E}},t.prototype.invert=function(){return new jr(this)},t.THUMBNAIL_SCALE_FACTOR=2}(cn);var _c=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();!function(i){function t(n,s,h,g,a,o,l){var v=i.call(this,s,h)||this;if(v.dataWidth=g,v.dataHeight=a,v.left=o,v.top=l,4===n.BYTES_PER_ELEMENT){for(var E=s*h,A=new Uint8ClampedArray(E),R=0;R<E;R++){var k=n[R];A[R]=((k>>16&255)+(k>>7&510)+(255&k))/4&255}v.luminances=A}else v.luminances=n;if(void 0===g&&(v.dataWidth=s),void 0===a&&(v.dataHeight=h),void 0===o&&(v.left=0),void 0===l&&(v.top=0),v.left+s>v.dataWidth||v.top+h>v.dataHeight)throw new Ke("Crop rectangle does not fit within image data.");return v}_c(t,i),t.prototype.getRow=function(n,s){if(n<0||n>=this.getHeight())throw new Ke("Requested row is outside the image: "+n);var h=this.getWidth();return(null==s||s.length<h)&&(s=new Uint8ClampedArray(h)),Be.arraycopy(this.luminances,(n+this.top)*this.dataWidth+this.left,s,0,h),s},t.prototype.getMatrix=function(){var n=this.getWidth(),s=this.getHeight();if(n===this.dataWidth&&s===this.dataHeight)return this.luminances;var h=n*s,g=new Uint8ClampedArray(h),a=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Be.arraycopy(this.luminances,a,g,0,h),g;for(var o=0;o<s;o++)Be.arraycopy(this.luminances,a,g,o*n,n),a+=this.dataWidth;return g},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(n,s,h,g){return new t(this.luminances,h,g,this.dataWidth,this.dataHeight,this.left+n,this.top+s)},t.prototype.invert=function(){return new jr(this)}}(cn);var Ko=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Su=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return Ko(t,i),t.forName=function(n){return this.getCharacterSetECIByName(n)},t}(Dt);const fu=Su;var Il=function(){function i(){}return i.ISO_8859_1=Dt.ISO8859_1,i}();const Hs=Il;var Jc=function(){function i(t,n,s){this.codewords=t,this.numcols=n,this.numrows=s,this.bits=new Uint8Array(n*s),mt.fill(this.bits,2)}return i.prototype.getNumrows=function(){return this.numrows},i.prototype.getNumcols=function(){return this.numcols},i.prototype.getBits=function(){return this.bits},i.prototype.getBit=function(t,n){return 1===this.bits[n*this.numcols+t]},i.prototype.setBit=function(t,n,s){this.bits[n*this.numcols+t]=s?1:0},i.prototype.noBit=function(t,n){return 2===this.bits[n*this.numcols+t]},i.prototype.place=function(){var t=0,n=4,s=0;do{n===this.numrows&&0===s&&this.corner1(t++),n===this.numrows-2&&0===s&&this.numcols%4!=0&&this.corner2(t++),n===this.numrows-2&&0===s&&this.numcols%8==4&&this.corner3(t++),n===this.numrows+4&&2===s&&this.numcols%8==0&&this.corner4(t++);do{n<this.numrows&&s>=0&&this.noBit(s,n)&&this.utah(n,s,t++),n-=2,s+=2}while(n>=0&&s<this.numcols);n++,s+=3;do{n>=0&&s<this.numcols&&this.noBit(s,n)&&this.utah(n,s,t++),n+=2,s-=2}while(n<this.numrows&&s>=0);n+=3,s++}while(n<this.numrows||s<this.numcols);this.noBit(this.numcols-1,this.numrows-1)&&(this.setBit(this.numcols-1,this.numrows-1,!0),this.setBit(this.numcols-2,this.numrows-2,!0))},i.prototype.module=function(t,n,s,h){t<0&&(t+=this.numrows,n+=4-(this.numrows+4)%8),n<0&&(n+=this.numcols,t+=4-(this.numcols+4)%8);var g=this.codewords.charCodeAt(s);this.setBit(n,t,0!=(g&=1<<8-h))},i.prototype.utah=function(t,n,s){this.module(t-2,n-2,s,1),this.module(t-2,n-1,s,2),this.module(t-1,n-2,s,3),this.module(t-1,n-1,s,4),this.module(t-1,n,s,5),this.module(t,n-2,s,6),this.module(t,n-1,s,7),this.module(t,n,s,8)},i.prototype.corner1=function(t){this.module(this.numrows-1,0,t,1),this.module(this.numrows-1,1,t,2),this.module(this.numrows-1,2,t,3),this.module(0,this.numcols-2,t,4),this.module(0,this.numcols-1,t,5),this.module(1,this.numcols-1,t,6),this.module(2,this.numcols-1,t,7),this.module(3,this.numcols-1,t,8)},i.prototype.corner2=function(t){this.module(this.numrows-3,0,t,1),this.module(this.numrows-2,0,t,2),this.module(this.numrows-1,0,t,3),this.module(0,this.numcols-4,t,4),this.module(0,this.numcols-3,t,5),this.module(0,this.numcols-2,t,6),this.module(0,this.numcols-1,t,7),this.module(1,this.numcols-1,t,8)},i.prototype.corner3=function(t){this.module(this.numrows-3,0,t,1),this.module(this.numrows-2,0,t,2),this.module(this.numrows-1,0,t,3),this.module(0,this.numcols-2,t,4),this.module(0,this.numcols-1,t,5),this.module(1,this.numcols-1,t,6),this.module(2,this.numcols-1,t,7),this.module(3,this.numcols-1,t,8)},i.prototype.corner4=function(t){this.module(this.numrows-1,0,t,1),this.module(this.numrows-1,this.numcols-1,t,2),this.module(0,this.numcols-3,t,3),this.module(0,this.numcols-2,t,4),this.module(0,this.numcols-1,t,5),this.module(1,this.numcols-3,t,6),this.module(1,this.numcols-2,t,7),this.module(1,this.numcols-1,t,8)},i}();const el=Jc;var Aa,Hu=[5,7,10,11,12,14,18,20,24,28,36,42,48,56,62,68],xi=[[228,48,15,111,62],[23,68,144,134,240,92,254],[28,24,185,166,223,248,116,255,110,61],[175,138,205,12,194,168,39,245,60,97,120],[41,153,158,91,61,42,142,213,97,178,100,242],[156,97,192,252,95,9,157,119,138,45,18,186,83,185],[83,195,100,39,188,75,66,61,241,213,109,129,94,254,225,48,90,188],[15,195,244,9,233,71,168,2,188,160,153,145,253,79,108,82,27,174,186,172],[52,190,88,205,109,39,176,21,155,197,251,223,155,21,5,172,254,124,12,181,184,96,50,193],[211,231,43,97,71,96,103,174,37,151,170,53,75,34,249,121,17,138,110,213,141,136,120,151,233,168,93,255],[245,127,242,218,130,250,162,181,102,120,84,179,220,251,80,182,229,18,2,4,68,33,101,137,95,119,115,44,175,184,59,25,225,98,81,112],[77,193,137,31,19,38,22,153,247,105,122,2,245,133,242,8,175,95,100,9,167,105,214,111,57,121,21,1,253,57,54,101,248,202,69,50,150,177,226,5,9,5],[245,132,172,223,96,32,117,22,238,133,238,231,205,188,237,87,191,106,16,147,118,23,37,90,170,205,131,88,120,100,66,138,186,240,82,44,176,87,187,147,160,175,69,213,92,253,225,19],[175,9,223,238,12,17,220,208,100,29,175,170,230,192,215,235,150,159,36,223,38,200,132,54,228,146,218,234,117,203,29,232,144,238,22,150,201,117,62,207,164,13,137,245,127,67,247,28,155,43,203,107,233,53,143,46],[242,93,169,50,144,210,39,118,202,188,201,189,143,108,196,37,185,112,134,230,245,63,197,190,250,106,185,221,175,64,114,71,161,44,147,6,27,218,51,63,87,10,40,130,188,17,163,31,176,170,4,107,232,7,94,166,224,124,86,47,11,204],[220,228,173,89,251,149,159,56,89,33,147,244,154,36,73,127,213,136,248,180,234,197,158,177,68,122,93,213,15,160,227,236,66,139,153,185,202,167,179,25,220,232,96,210,231,136,223,239,181,241,59,52,172,25,49,232,211,189,64,54,108,153,132,63,96,103,82,186]],bu=(Aa=function(i,t){for(var n=1,s=0;s<255;s++)t[s]=n,i[n]=s,(n*=2)>=256&&(n^=301);return{LOG:i,ALOG:t}}([],[]),Aa.LOG),ju=Aa.ALOG,tu="[)>\x1e05\x1d",Gu="[)>\x1e06\x1d",Tl=function(){function i(){}return i.encodeECC200=function(t,n){if(t.length!==n.getDataCapacity())throw new Error("The number of codewords does not match the selected symbol");var s=new En;s.append(t);var h=n.getInterleavedBlockCount();if(1===h){var g=this.createECCBlock(t,n.getErrorCodewords());s.append(g)}else{for(var a=[],o=[],l=0;l<h;l++)a[l]=n.getDataLengthForInterleavedBlock(l+1),o[l]=n.getErrorLengthForInterleavedBlock(l+1);for(var v=0;v<h;v++){for(var E=new En,A=v;A<n.getDataCapacity();A+=h)E.append(t.charAt(A));g=this.createECCBlock(E.toString(),o[v]);for(var R=0,k=v;k<o[v]*h;k+=h)s.setCharAt(n.getDataCapacity()+k,g.charAt(R++))}}return s.toString()},i.createECCBlock=function(t,n){for(var s=-1,h=0;h<Hu.length;h++)if(Hu[h]===n){s=h;break}if(s<0)throw new Error("Illegal number of error correction codewords specified: "+n);var g=xi[s],a=[];for(h=0;h<n;h++)a[h]=0;for(h=0;h<t.length;h++){for(var o=a[n-1]^t.charAt(h).charCodeAt(0),l=n-1;l>0;l--)a[l]=0!==o&&0!==g[l]?a[l-1]^ju[(bu[o]+bu[g[l]])%255]:a[l-1];a[0]=0!==o&&0!==g[0]?ju[(bu[o]+bu[g[0]])%255]:0}var v=[];for(h=0;h<n;h++)v[h]=a[n-h-1];return v.map(function(E){return String.fromCharCode(E)}).join("")},i}();const N=Tl;var I=function(){function i(){}return i.prototype.getEncodingMode=function(){return 0},i.prototype.encode=function(t){if(ai.determineConsecutiveDigitCount(t.getMessage(),t.pos)>=2)t.writeCodeword(this.encodeASCIIDigits(t.getMessage().charCodeAt(t.pos),t.getMessage().charCodeAt(t.pos+1))),t.pos+=2;else{var s=t.getCurrentChar(),h=ai.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(h!==this.getEncodingMode())switch(h){case 5:return t.writeCodeword(231),void t.signalEncoderChange(5);case 1:return t.writeCodeword(230),void t.signalEncoderChange(1);case 3:t.writeCodeword(238),t.signalEncoderChange(3);break;case 2:t.writeCodeword(239),t.signalEncoderChange(2);break;case 4:t.writeCodeword(240),t.signalEncoderChange(4);break;default:throw new Error("Illegal mode: "+h)}else ai.isExtendedASCII(s)?(t.writeCodeword(235),t.writeCodeword(s-128+1),t.pos++):(t.writeCodeword(s+1),t.pos++)}},i.prototype.encodeASCIIDigits=function(t,n){if(ai.isDigit(t)&&ai.isDigit(n))return 10*(t-48)+(n-48)+130;throw new Error("not digits: "+t+n)},i}(),D=function(){function i(){}return i.prototype.getEncodingMode=function(){return 5},i.prototype.encode=function(t){var n=new En;for(n.append(0);t.hasMoreCharacters();){var s=t.getCurrentChar();if(n.append(s),t.pos++,ai.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode())!==this.getEncodingMode()){t.signalEncoderChange(0);break}}var g=n.length()-1,o=t.getCodewordCount()+g+1;t.updateSymbolInfo(o);var l=t.getSymbolInfo().getDataCapacity()-o>0;if(t.hasMoreCharacters()||l)if(g<=249)n.setCharAt(0,Nn.getCharAt(g));else{if(!(g<=1555))throw new Error("Message length not in valid ranges: "+g);n.setCharAt(0,Nn.getCharAt(Math.floor(g/250)+249)),n.insert(1,Nn.getCharAt(g%250))}var v=0;for(s=n.length();v<s;v++)t.writeCodeword(this.randomize255State(n.charAt(v).charCodeAt(0),t.getCodewordCount()+1))},i.prototype.randomize255State=function(t,n){var h=t+(149*n%255+1);return h<=255?h:h-256},i}(),L=function(){function i(){}return i.prototype.getEncodingMode=function(){return 1},i.prototype.encodeMaximal=function(t){for(var n=new En,s=0,h=t.pos,g=0;t.hasMoreCharacters();){var a=t.getCurrentChar();t.pos++,s=this.encodeChar(a,n),n.length()%3==0&&(h=t.pos,g=n.length())}if(g!==n.length()){var o=Math.floor(n.length()/3*2),l=Math.floor(t.getCodewordCount()+o+1);t.updateSymbolInfo(l);var v=t.getSymbolInfo().getDataCapacity()-l,E=Math.floor(n.length()%3);(2===E&&2!==v||1===E&&(s>3||1!==v))&&(t.pos=h)}n.length()>0&&t.writeCodeword(230),this.handleEOD(t,n)},i.prototype.encode=function(t){for(var n=new En;t.hasMoreCharacters();){var s=t.getCurrentChar();t.pos++;var h=this.encodeChar(s,n),g=2*Math.floor(n.length()/3),a=t.getCodewordCount()+g;t.updateSymbolInfo(a);var o=t.getSymbolInfo().getDataCapacity()-a;if(!t.hasMoreCharacters()){var l=new En;for(n.length()%3==2&&2!==o&&(h=this.backtrackOneCharacter(t,n,l,h));n.length()%3==1&&(h>3||1!==o);)h=this.backtrackOneCharacter(t,n,l,h);break}if(n.length()%3==0&&ai.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode())!==this.getEncodingMode()){t.signalEncoderChange(0);break}}this.handleEOD(t,n)},i.prototype.backtrackOneCharacter=function(t,n,s,h){var g=n.length(),a=n.toString().substring(0,g-h);n.setLengthToZero(),n.append(a),t.pos--;var o=t.getCurrentChar();return h=this.encodeChar(o,s),t.resetSymbolInfo(),h},i.prototype.writeNextTriplet=function(t,n){t.writeCodewords(this.encodeToCodewords(n.toString()));var s=n.toString().substring(3);n.setLengthToZero(),n.append(s)},i.prototype.handleEOD=function(t,n){var s=Math.floor(n.length()/3*2),h=n.length()%3,g=t.getCodewordCount()+s;t.updateSymbolInfo(g);var a=t.getSymbolInfo().getDataCapacity()-g;if(2===h){for(n.append("\0");n.length()>=3;)this.writeNextTriplet(t,n);t.hasMoreCharacters()&&t.writeCodeword(254)}else if(1===a&&1===h){for(;n.length()>=3;)this.writeNextTriplet(t,n);t.hasMoreCharacters()&&t.writeCodeword(254),t.pos--}else{if(0!==h)throw new Error("Unexpected case. Please report!");for(;n.length()>=3;)this.writeNextTriplet(t,n);(a>0||t.hasMoreCharacters())&&t.writeCodeword(254)}t.signalEncoderChange(0)},i.prototype.encodeChar=function(t,n){return t===" ".charCodeAt(0)?(n.append(3),1):t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)?(n.append(t-48+4),1):t>="A".charCodeAt(0)&&t<="Z".charCodeAt(0)?(n.append(t-65+14),1):t<" ".charCodeAt(0)?(n.append(0),n.append(t),2):t<="/".charCodeAt(0)?(n.append(1),n.append(t-33),2):t<="@".charCodeAt(0)?(n.append(1),n.append(t-58+15),2):t<="_".charCodeAt(0)?(n.append(1),n.append(t-91+22),2):t<=127?(n.append(2),n.append(t-96),2):(n.append("1\x1e"),2+this.encodeChar(t-128,n))},i.prototype.encodeToCodewords=function(t){var n=1600*t.charCodeAt(0)+40*t.charCodeAt(1)+t.charCodeAt(2)+1,s=n/256,h=n%256,g=new En;return g.append(s),g.append(h),g.toString()},i}(),de=function(){function i(){}return i.prototype.getEncodingMode=function(){return 4},i.prototype.encode=function(t){for(var n=new En;t.hasMoreCharacters();){var s=t.getCurrentChar();if(this.encodeChar(s,n),t.pos++,n.length()>=4){t.writeCodewords(this.encodeToCodewords(n.toString()));var g=n.toString().substring(4);if(n.setLengthToZero(),n.append(g),ai.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode())!==this.getEncodingMode()){t.signalEncoderChange(0);break}}}n.append(Nn.getCharAt(31)),this.handleEOD(t,n)},i.prototype.handleEOD=function(t,n){try{var s=n.length();if(0===s)return;if(1===s){t.updateSymbolInfo();var h=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),g=t.getRemainingCharacters();if(g>h&&(t.updateSymbolInfo(t.getCodewordCount()+1),h=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount()),g<=h&&h<=2)return}if(s>4)throw new Error("Count must not exceed 4");var a=s-1,o=this.encodeToCodewords(n.toString()),v=!t.hasMoreCharacters()&&a<=2;a<=2&&(t.updateSymbolInfo(t.getCodewordCount()+a),(h=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount())>=3&&(v=!1,t.updateSymbolInfo(t.getCodewordCount()+o.length))),v?(t.resetSymbolInfo(),t.pos-=a):t.writeCodewords(o)}finally{t.signalEncoderChange(0)}},i.prototype.encodeChar=function(t,n){t>=" ".charCodeAt(0)&&t<="?".charCodeAt(0)?n.append(t):t>="@".charCodeAt(0)&&t<="^".charCodeAt(0)?n.append(Nn.getCharAt(t-64)):ai.illegalCharacter(Nn.getCharAt(t))},i.prototype.encodeToCodewords=function(t){var n=t.length;if(0===n)throw new Error("StringBuilder must not be empty");var o=(t.charAt(0).charCodeAt(0)<<18)+((n>=2?t.charAt(1).charCodeAt(0):0)<<12)+((n>=3?t.charAt(2).charCodeAt(0):0)<<6)+(n>=4?t.charAt(3).charCodeAt(0):0),l=o>>16&255,v=o>>8&255,E=255&o,A=new En;return A.append(l),n>=2&&A.append(v),n>=3&&A.append(E),A.toString()},i}(),Oe=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Jt=function(){function i(t,n,s,h,g,a,o,l){void 0===o&&(o=0),void 0===l&&(l=0),this.rectangular=t,this.dataCapacity=n,this.errorCodewords=s,this.matrixWidth=h,this.matrixHeight=g,this.dataRegions=a,this.rsBlockData=o,this.rsBlockError=l}return i.lookup=function(t,n,s,h,g){var a,o;void 0===n&&(n=0),void 0===s&&(s=null),void 0===h&&(h=null),void 0===g&&(g=!0);try{for(var l=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(si),v=l.next();!v.done;v=l.next()){var E=v.value;if((1!==n||!E.rectangular)&&(2!==n||E.rectangular)&&(null==s||!(E.getSymbolWidth()<s.getWidth()||E.getSymbolHeight()<s.getHeight()))&&(null==h||!(E.getSymbolWidth()>h.getWidth()||E.getSymbolHeight()>h.getHeight()))&&t<=E.dataCapacity)return E}}catch(A){a={error:A}}finally{try{v&&!v.done&&(o=l.return)&&o.call(l)}finally{if(a)throw a.error}}if(g)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+t);return null},i.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},i.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},i.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},i.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},i.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+2*this.getHorizontalDataRegions()},i.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+2*this.getVerticalDataRegions()},i.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},i.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},i.prototype.getDataCapacity=function(){return this.dataCapacity},i.prototype.getErrorCodewords=function(){return this.errorCodewords},i.prototype.getDataLengthForInterleavedBlock=function(t){return this.rsBlockData},i.prototype.getErrorLengthForInterleavedBlock=function(t){return this.rsBlockError},i}();const Kn=Jt;var ur=function(i){function t(){return i.call(this,!1,1558,620,22,22,36,-1,62)||this}return Oe(t,i),t.prototype.getInterleavedBlockCount=function(){return 10},t.prototype.getDataLengthForInterleavedBlock=function(n){return n<=8?156:155},t}(Jt),si=[new Jt(!1,3,5,8,8,1),new Jt(!1,5,7,10,10,1),new Jt(!0,5,7,16,6,1),new Jt(!1,8,10,12,12,1),new Jt(!0,10,11,14,6,2),new Jt(!1,12,12,14,14,1),new Jt(!0,16,14,24,10,1),new Jt(!1,18,14,16,16,1),new Jt(!1,22,18,18,18,1),new Jt(!0,22,18,16,10,2),new Jt(!1,30,20,20,20,1),new Jt(!0,32,24,16,14,2),new Jt(!1,36,24,22,22,1),new Jt(!1,44,28,24,24,1),new Jt(!0,49,28,22,14,2),new Jt(!1,62,36,14,14,4),new Jt(!1,86,42,16,16,4),new Jt(!1,114,48,18,18,4),new Jt(!1,144,56,20,20,4),new Jt(!1,174,68,22,22,4),new Jt(!1,204,84,24,24,4,102,42),new Jt(!1,280,112,14,14,16,140,56),new Jt(!1,368,144,16,16,16,92,36),new Jt(!1,456,192,18,18,16,114,48),new Jt(!1,576,224,20,20,16,144,56),new Jt(!1,696,272,22,22,16,174,68),new Jt(!1,816,336,24,24,16,136,56),new Jt(!1,1050,408,18,18,36,175,68),new Jt(!1,1304,496,20,20,36,163,62),new ur],zr=function(){function i(t){this.msg=t,this.pos=0,this.skipAtEnd=0;for(var n=t.split("").map(function(o){return o.charCodeAt(0)}),s=new En,h=0,g=n.length;h<g;h++){var a=String.fromCharCode(255&n[h]);if("?"===a&&"?"!==t.charAt(h))throw new Error("Message contains characters outside ISO-8859-1 encoding.");s.append(a)}this.msg=s.toString(),this.shape=0,this.codewords=new En,this.newEncoding=-1}return i.prototype.setSymbolShape=function(t){this.shape=t},i.prototype.setSizeConstraints=function(t,n){this.minSize=t,this.maxSize=n},i.prototype.getMessage=function(){return this.msg},i.prototype.setSkipAtEnd=function(t){this.skipAtEnd=t},i.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},i.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},i.prototype.getCodewords=function(){return this.codewords},i.prototype.writeCodewords=function(t){this.codewords.append(t)},i.prototype.writeCodeword=function(t){this.codewords.append(t)},i.prototype.getCodewordCount=function(){return this.codewords.length()},i.prototype.getNewEncoding=function(){return this.newEncoding},i.prototype.signalEncoderChange=function(t){this.newEncoding=t},i.prototype.resetEncoderSignal=function(){this.newEncoding=-1},i.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},i.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},i.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},i.prototype.getSymbolInfo=function(){return this.symbolInfo},i.prototype.updateSymbolInfo=function(t){void 0===t&&(t=this.getCodewordCount()),(null==this.symbolInfo||t>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Kn.lookup(t,this.shape,this.minSize,this.maxSize,!0))},i.prototype.resetSymbolInfo=function(){this.symbolInfo=null},i}(),Bs=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Du=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return Bs(t,i),t.prototype.getEncodingMode=function(){return 3},t.prototype.encode=function(n){for(var s=new En;n.hasMoreCharacters();){var h=n.getCurrentChar();if(n.pos++,this.encodeChar(h,s),s.length()%3==0&&(this.writeNextTriplet(n,s),ai.lookAheadTest(n.getMessage(),n.pos,this.getEncodingMode())!==this.getEncodingMode())){n.signalEncoderChange(0);break}}this.handleEOD(n,s)},t.prototype.encodeChar=function(n,s){switch(n){case 13:s.append(0);break;case"*".charCodeAt(0):s.append(1);break;case">".charCodeAt(0):s.append(2);break;case" ".charCodeAt(0):s.append(3);break;default:n>="0".charCodeAt(0)&&n<="9".charCodeAt(0)?s.append(n-48+4):n>="A".charCodeAt(0)&&n<="Z".charCodeAt(0)?s.append(n-65+14):ai.illegalCharacter(Nn.getCharAt(n))}return 1},t.prototype.handleEOD=function(n,s){n.updateSymbolInfo();var h=n.getSymbolInfo().getDataCapacity()-n.getCodewordCount(),g=s.length();n.pos-=g,(n.getRemainingCharacters()>1||h>1||n.getRemainingCharacters()!==h)&&n.writeCodeword(254),n.getNewEncoding()<0&&n.signalEncoderChange(0)},t}(L),Rl=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Td=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return Rl(t,i),t.prototype.getEncodingMode=function(){return 2},t.prototype.encodeChar=function(n,s){return n===" ".charCodeAt(0)?(s.append(3),1):n>="0".charCodeAt(0)&&n<="9".charCodeAt(0)?(s.append(n-48+4),1):n>="a".charCodeAt(0)&&n<="z".charCodeAt(0)?(s.append(n-97+14),1):n<" ".charCodeAt(0)?(s.append(0),s.append(n),2):n<="/".charCodeAt(0)?(s.append(1),s.append(n-33),2):n<="@".charCodeAt(0)?(s.append(1),s.append(n-58+15),2):n>="[".charCodeAt(0)&&n<="_".charCodeAt(0)?(s.append(1),s.append(n-91+22),2):n==="`".charCodeAt(0)?(s.append(2),s.append(0),2):n<="Z".charCodeAt(0)?(s.append(2),s.append(n-65+1),2):n<=127?(s.append(2),s.append(n-123+27),2):(s.append("1\x1e"),2+this.encodeChar(n-128,s))},t}(L),Tu=function(){function i(){}return i.randomize253State=function(t){var s=149*t%253+1+129;return s<=254?s:s-254},i.encodeHighLevel=function(t,n,s,h,g){void 0===n&&(n=0),void 0===s&&(s=null),void 0===h&&(h=null),void 0===g&&(g=!1);var a=new L,o=[new I,a,new Td,new Du,new de,new D],l=new zr(t);l.setSymbolShape(n),l.setSizeConstraints(s,h),t.startsWith(tu)&&t.endsWith("\x1e\x04")?(l.writeCodeword(236),l.setSkipAtEnd(2),l.pos+=tu.length):t.startsWith(Gu)&&t.endsWith("\x1e\x04")&&(l.writeCodeword(237),l.setSkipAtEnd(2),l.pos+=Gu.length);var v=0;for(g&&(a.encodeMaximal(l),v=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)o[v].encode(l),l.getNewEncoding()>=0&&(v=l.getNewEncoding(),l.resetEncoderSignal());var E=l.getCodewordCount();l.updateSymbolInfo();var A=l.getSymbolInfo().getDataCapacity();E<A&&0!==v&&5!==v&&4!==v&&l.writeCodeword("\xfe");var R=l.getCodewords();for(R.length()<A&&R.append(129);R.length()<A;)R.append(this.randomize253State(R.length()+1));return l.getCodewords().toString()},i.lookAheadTest=function(t,n,s){var h=this.lookAheadTestIntern(t,n,s);if(3===s&&3===h){for(var g=Math.min(n+3,t.length),a=n;a<g;a++)if(!this.isNativeX12(t.charCodeAt(a)))return 0}else if(4===s&&4===h)for(g=Math.min(n+4,t.length),a=n;a<g;a++)if(!this.isNativeEDIFACT(t.charCodeAt(a)))return 0;return h},i.lookAheadTestIntern=function(t,n,s){if(n>=t.length)return s;var h;0===s?h=[0,1,1,1,1,1.25]:(h=[1,2,2,2,2,2.25])[s]=0;for(var g=0,a=new Uint8Array(6),o=[];;){if(n+g===t.length){mt.fill(a,0),mt.fill(o,0);var l=this.findMinimums(h,o,Le.MAX_VALUE,a),v=this.getMinimumCount(a);if(o[0]===l)return 0;if(1===v){if(a[5]>0)return 5;if(a[4]>0)return 4;if(a[2]>0)return 2;if(a[3]>0)return 3}return 1}var E=t.charCodeAt(n+g);if(g++,this.isDigit(E)?h[0]+=.5:this.isExtendedASCII(E)?(h[0]=Math.ceil(h[0]),h[0]+=2):(h[0]=Math.ceil(h[0]),h[0]++),this.isNativeC40(E)?h[1]+=2/3:this.isExtendedASCII(E)?h[1]+=8/3:h[1]+=4/3,this.isNativeText(E)?h[2]+=2/3:this.isExtendedASCII(E)?h[2]+=8/3:h[2]+=4/3,this.isNativeX12(E)?h[3]+=2/3:this.isExtendedASCII(E)?h[3]+=13/3:h[3]+=10/3,this.isNativeEDIFACT(E)?h[4]+=3/4:this.isExtendedASCII(E)?h[4]+=4.25:h[4]+=3.25,this.isSpecialB256(E)?h[5]+=4:h[5]++,g>=4){if(mt.fill(a,0),mt.fill(o,0),this.findMinimums(h,o,Le.MAX_VALUE,a),o[0]<this.min(o[5],o[1],o[2],o[3],o[4]))return 0;if(o[5]<o[0]||o[5]+1<this.min(o[1],o[2],o[3],o[4]))return 5;if(o[4]+1<this.min(o[5],o[1],o[2],o[3],o[0]))return 4;if(o[2]+1<this.min(o[5],o[1],o[4],o[3],o[0]))return 2;if(o[3]+1<this.min(o[5],o[1],o[4],o[2],o[0]))return 3;if(o[1]+1<this.min(o[0],o[5],o[4],o[2])){if(o[1]<o[3])return 1;if(o[1]===o[3]){for(var A=n+g+1;A<t.length;){var R=t.charCodeAt(A);if(this.isX12TermSep(R))return 3;if(!this.isNativeX12(R))break;A++}return 1}}}}},i.min=function(t,n,s,h,g){var a=Math.min(t,Math.min(n,Math.min(s,h)));return void 0===g?a:Math.min(a,g)},i.findMinimums=function(t,n,s,h){for(var g=0;g<6;g++){var a=n[g]=Math.ceil(t[g]);s>a&&(s=a,mt.fill(h,0)),s===a&&(h[g]=h[g]+1)}return s},i.getMinimumCount=function(t){for(var n=0,s=0;s<6;s++)n+=t[s];return n||0},i.isDigit=function(t){return t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)},i.isExtendedASCII=function(t){return t>=128&&t<=255},i.isNativeC40=function(t){return t===" ".charCodeAt(0)||t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t>="A".charCodeAt(0)&&t<="Z".charCodeAt(0)},i.isNativeText=function(t){return t===" ".charCodeAt(0)||t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t>="a".charCodeAt(0)&&t<="z".charCodeAt(0)},i.isNativeX12=function(t){return this.isX12TermSep(t)||t===" ".charCodeAt(0)||t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t>="A".charCodeAt(0)&&t<="Z".charCodeAt(0)},i.isX12TermSep=function(t){return 13===t||t==="*".charCodeAt(0)||t===">".charCodeAt(0)},i.isNativeEDIFACT=function(t){return t>=" ".charCodeAt(0)&&t<="^".charCodeAt(0)},i.isSpecialB256=function(t){return!1},i.determineConsecutiveDigitCount=function(t,n){void 0===n&&(n=0);for(var s=t.length,h=n;h<s&&this.isDigit(t.charCodeAt(h));)h++;return h-n},i.illegalCharacter=function(t){var n=Le.toHexString(t.charCodeAt(0));throw n="0000".substring(0,4-n.length)+n,new Error("Illegal character: "+t+" (0x"+n+")")},i}();const ai=Tu;var rc=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},nl=function(){function i(t){this.charset=t,this.name=t.name}return i.prototype.canEncode=function(t){try{return null!=Gn.encode(t,this.charset)}catch(n){return!1}},i}(),Gl=function(){function i(t,n,s){var h,g,a,o,l,v;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(ni){return new nl(fu.forName(ni))}),this.encoders=[];var E=[];E.push(new nl(Hs.ISO_8859_1));for(var A=null!=n&&n.name.startsWith("UTF"),R=0;R<t.length;R++){var k=!1;try{for(var Z=(h=void 0,rc(E)),se=Z.next();!se.done;se=Z.next()){var Me=se.value,Ue=t.charAt(R);if(Ue.charCodeAt(0)===s||Me.canEncode(Ue)){k=!0;break}}}catch(ni){h={error:ni}}finally{try{se&&!se.done&&(g=Z.return)&&g.call(Z)}finally{if(h)throw h.error}}if(!k)try{for(var Ct=(a=void 0,rc(this.ENCODERS)),Mt=Ct.next();!Mt.done;Mt=Ct.next())if((Me=Mt.value).canEncode(t.charAt(R))){E.push(Me),k=!0;break}}catch(ni){a={error:ni}}finally{try{Mt&&!Mt.done&&(o=Ct.return)&&o.call(Ct)}finally{if(a)throw a.error}}k||(A=!0)}if(1!==E.length||A){this.encoders=[];var gn=0;try{for(var Rn=rc(E),$n=Rn.next();!$n.done;$n=Rn.next())this.encoders[gn++]=Me=$n.value}catch(ni){l={error:ni}}finally{try{$n&&!$n.done&&(v=Rn.return)&&v.call(Rn)}finally{if(l)throw l.error}}}else this.encoders=[E[0]];var Sr=-1;if(null!=n)for(R=0;R<this.encoders.length;R++)if(null!=this.encoders[R]&&n.name===this.encoders[R].name){Sr=R;break}this.priorityEncoderIndex=Sr}return i.prototype.length=function(){return this.encoders.length},i.prototype.getCharsetName=function(t){if(!(t<this.length()))throw new Error("index must be less than length");return this.encoders[t].name},i.prototype.getCharset=function(t){if(!(t<this.length()))throw new Error("index must be less than length");return this.encoders[t].charset},i.prototype.getECIValue=function(t){return this.encoders[t].charset.getValueIdentifier()},i.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},i.prototype.canEncode=function(t,n){if(!(n<this.length()))throw new Error("index must be less than length");return!0},i.prototype.encode=function(t,n){if(!(n<this.length()))throw new Error("index must be less than length");return Gn.encode(Nn.getCharAt(t),this.encoders[n].name)},i}(),ba=3,Zd=function(){function i(t,n,s){this.fnc1=s;var h=new Gl(t,n,s);if(1===h.length())for(var g=0;g<this.bytes.length;g++){var a=t.charAt(g).charCodeAt(0);this.bytes[g]=a===s?1e3:a}else this.bytes=this.encodeMinimally(t,h,s)}return i.prototype.getFNC1Character=function(){return this.fnc1},i.prototype.length=function(){return this.bytes.length},i.prototype.haveNCharacters=function(t,n){if(t+n-1>=this.bytes.length)return!1;for(var s=0;s<n;s++)if(this.isECI(t+s))return!1;return!0},i.prototype.charAt=function(t){if(t<0||t>=this.length())throw new Error(""+t);if(this.isECI(t))throw new Error("value at "+t+" is not a character but an ECI");return this.isFNC1(t)?this.fnc1:this.bytes[t]},i.prototype.subSequence=function(t,n){if(t<0||t>n||n>this.length())throw new Error(""+t);for(var s=new En,h=t;h<n;h++){if(this.isECI(h))throw new Error("value at "+h+" is not a character but an ECI");s.append(this.charAt(h))}return s.toString()},i.prototype.isECI=function(t){if(t<0||t>=this.length())throw new Error(""+t);return this.bytes[t]>255&&this.bytes[t]<=999},i.prototype.isFNC1=function(t){if(t<0||t>=this.length())throw new Error(""+t);return 1e3===this.bytes[t]},i.prototype.getECIValue=function(t){if(t<0||t>=this.length())throw new Error(""+t);if(!this.isECI(t))throw new Error("value at "+t+" is not an ECI but a character");return this.bytes[t]-256},i.prototype.addEdge=function(t,n,s){(null==t[n][s.encoderIndex]||t[n][s.encoderIndex].cachedTotalSize>s.cachedTotalSize)&&(t[n][s.encoderIndex]=s)},i.prototype.addEdges=function(t,n,s,h,g,a){var o=t.charAt(h).charCodeAt(0),l=0,v=n.length();n.getPriorityEncoderIndex()>=0&&(o===a||n.canEncode(o,n.getPriorityEncoderIndex()))&&(v=(l=n.getPriorityEncoderIndex())+1);for(var E=l;E<v;E++)(o===a||n.canEncode(o,E))&&this.addEdge(s,h+1,new zl(o,n,E,g,a))},i.prototype.encodeMinimally=function(t,n,s){var h=t.length,g=new(zl[h+1][n.length()]);this.addEdges(t,n,g,0,null,s);for(var a=1;a<=h;a++){for(var o=0;o<n.length();o++)null!=g[a][o]&&a<h&&this.addEdges(t,n,g,a,g[a][o],s);for(o=0;o<n.length();o++)g[a-1][o]=null}var l=-1,v=Le.MAX_VALUE;for(o=0;o<n.length();o++)if(null!=g[h][o]){var E=g[h][o];E.cachedTotalSize<v&&(v=E.cachedTotalSize,l=o)}if(l<0)throw new Error('Failed to encode "'+t+'"');for(var A=[],R=g[h][l];null!=R;){if(R.isFNC1())A.unshift(1e3);else{var k=n.encode(R.c,R.encoderIndex);for(a=k.length-1;a>=0;a--)A.unshift(255&k[a])}(null===R.previous?0:R.previous.encoderIndex)!==R.encoderIndex&&A.unshift(256+n.getECIValue(R.encoderIndex)),R=R.previous}var se=[];for(a=0;a<se.length;a++)se[a]=A[a];return se},i}(),zl=function(){function i(t,n,s,h,g){this.c=t,this.encoderSet=n,this.encoderIndex=s,this.previous=h,this.fnc1=g,this.c=t===g?1e3:t;var a=this.isFNC1()?1:n.encode(t,s).length;(null===h?0:h.encoderIndex)!==s&&(a+=ba),null!=h&&(a+=h.cachedTotalSize),this.cachedTotalSize=a}return i.prototype.isFNC1=function(){return 1e3===this.c},i}(),ic=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),zu=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},rl=function(i,t){var n="function"==typeof Symbol&&i[Symbol.iterator];if(!n)return i;var h,a,s=n.call(i),g=[];try{for(;(void 0===t||t-- >0)&&!(h=s.next()).done;)g.push(h.value)}catch(o){a={error:o}}finally{try{h&&!h.done&&(n=s.return)&&n.call(s)}finally{if(a)throw a.error}}return g},yr=(()=>(function(i){i[i.ASCII=0]="ASCII",i[i.C40=1]="C40",i[i.TEXT=2]="TEXT",i[i.X12=3]="X12",i[i.EDF=4]="EDF",i[i.B256=5]="B256"}(yr||(yr={})),yr))(),yh=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],pu=function(){function i(){}return i.isExtendedASCII=function(t,n){return t!==n&&t>=128&&t<=255},i.isInC40Shift1Set=function(t){return t<=31},i.isInC40Shift2Set=function(t,n){var s,h;try{for(var g=zu(yh),a=g.next();!a.done;a=g.next())if(a.value.charCodeAt(0)===t)return!0}catch(l){s={error:l}}finally{try{a&&!a.done&&(h=g.return)&&h.call(g)}finally{if(s)throw s.error}}return t===n},i.isInTextShift1Set=function(t){return this.isInC40Shift1Set(t)},i.isInTextShift2Set=function(t,n){return this.isInC40Shift2Set(t,n)},i.encodeHighLevel=function(t,n,s,h){void 0===n&&(n=null),void 0===s&&(s=-1),void 0===h&&(h=0);var g=0;return t.startsWith(tu)&&t.endsWith("\x1e\x04")?(g=5,t=t.substring(tu.length,t.length-2)):t.startsWith(Gu)&&t.endsWith("\x1e\x04")&&(g=6,t=t.substring(Gu.length,t.length-2)),decodeURIComponent(escape(String.fromCharCode.apply(String,function(){for(var i=[],t=0;t<arguments.length;t++)i=i.concat(rl(arguments[t]));return i}(this.encode(t,n,s,h,g)))))},i.encode=function(t,n,s,h,g){return this.encodeMinimally(new jf(t,n,s,h,g)).getBytes()},i.addEdge=function(t,n){var s=n.fromPosition+n.characterLength;(null===t[s][n.getEndMode()]||t[s][n.getEndMode()].cachedTotalSize>n.cachedTotalSize)&&(t[s][n.getEndMode()]=n)},i.getNumberOfC40Words=function(t,n,s,h){for(var g=0,a=n;a<t.length();a++){if(t.isECI(a))return h[0]=0,0;var o=t.charAt(a);if(s&&ai.isNativeC40(o)||!s&&ai.isNativeText(o))g++;else if(i.isExtendedASCII(o,t.getFNC1Character())){var l=255&o;l>=128&&(s&&ai.isNativeC40(l-128)||!s&&ai.isNativeText(l-128))?g+=3:g+=4}else g+=2;if(g%3==0||(g-2)%3==0&&a+1===t.length())return h[0]=a-n+1,Math.ceil(g/3)}return h[0]=0,0},i.addEdges=function(t,n,s,h){var g,a;if(t.isECI(s))this.addEdge(n,new Wu(t,yr.ASCII,s,1,h));else{var k,o=t.charAt(s);if(null===h||h.getEndMode()!==yr.EDF){ai.isDigit(o)&&t.haveNCharacters(s,2)&&ai.isDigit(t.charAt(s+1))?this.addEdge(n,new Wu(t,yr.ASCII,s,2,h)):this.addEdge(n,new Wu(t,yr.ASCII,s,1,h));var l=[yr.C40,yr.TEXT];try{for(var v=zu(l),E=v.next();!E.done;E=v.next()){var A=E.value,R=[];i.getNumberOfC40Words(t,s,A===yr.C40,R)>0&&this.addEdge(n,new Wu(t,A,s,R[0],h))}}catch(se){g={error:se}}finally{try{E&&!E.done&&(a=v.return)&&a.call(v)}finally{if(g)throw g.error}}t.haveNCharacters(s,3)&&ai.isNativeX12(t.charAt(s))&&ai.isNativeX12(t.charAt(s+1))&&ai.isNativeX12(t.charAt(s+2))&&this.addEdge(n,new Wu(t,yr.X12,s,3,h)),this.addEdge(n,new Wu(t,yr.B256,s,1,h))}for(k=0;k<3;k++){var Z=s+k;if(!t.haveNCharacters(Z,1)||!ai.isNativeEDIFACT(t.charAt(Z)))break;this.addEdge(n,new Wu(t,yr.EDF,s,k+1,h))}3===k&&t.haveNCharacters(s,4)&&ai.isNativeEDIFACT(t.charAt(s+3))&&this.addEdge(n,new Wu(t,yr.EDF,s,4,h))}},i.encodeMinimally=function(t){var n=t.length(),s=Array(n+1).fill(null).map(function(){return Array(6).fill(0)});this.addEdges(t,s,0,null);for(var h=1;h<=n;h++){for(var g=0;g<6;g++)null!==s[h][g]&&h<n&&this.addEdges(t,s,h,s[h][g]);for(g=0;g<6;g++)s[h-1][g]=null}var a=-1,o=Le.MAX_VALUE;for(g=0;g<6;g++)if(null!==s[n][g]){var l=s[n][g],v=g>=1&&g<=3?l.cachedTotalSize+1:l.cachedTotalSize;v<o&&(o=v,a=g)}if(a<0)throw new Error('Failed to encode "'+t+'"');return new Xh(s[n][a])},i}(),Xh=function(){function i(t){var n=t.input,s=0,h=[],g=[],a=[];(t.mode===yr.C40||t.mode===yr.TEXT||t.mode===yr.X12)&&t.getEndMode()!==yr.ASCII&&(s+=this.prepend(Wu.getBytes(254),h));for(var o=t;null!==o;)s+=this.prepend(o.getDataBytes(),h),(null===o.previous||o.getPreviousStartMode()!==o.getMode())&&(o.getMode()===yr.B256&&(s<=249?(h.unshift(s),s++):(h.unshift(s%250),h.unshift(s/250+249),s+=2),g.push(h.length),a.push(s)),this.prepend(o.getLatchBytes(),h),s=0),o=o.previous;5===n.getMacroId()?s+=this.prepend(Wu.getBytes(236),h):6===n.getMacroId()&&(s+=this.prepend(Wu.getBytes(237),h)),n.getFNC1Character()>0&&(s+=this.prepend(Wu.getBytes(232),h));for(var l=0;l<g.length;l++)this.applyRandomPattern(h,h.length-g[l],a[l]);var v=t.getMinSymbolSize(h.length);for(h.length<v&&h.push(129);h.length<v;)h.push(this.randomize253State(h.length+1));for(this.bytes=new Uint8Array(h.length),l=0;l<this.bytes.length;l++)this.bytes[l]=h[l]}return i.prototype.prepend=function(t,n){for(var s=t.length-1;s>=0;s--)n.unshift(t[s]);return t.length},i.prototype.randomize253State=function(t){var s=149*t%253+1+129;return s<=254?s:s-254},i.prototype.applyRandomPattern=function(t,n,s){for(var h=0;h<s;h++){var g=n+h,l=149*(g+1)%255+1+(255&t[g]);t[g]=l<=255?l:l-256}},i.prototype.getBytes=function(){return this.bytes},i}(),Wu=function(){function i(t,n,s,h,g){if(this.input=t,this.mode=n,this.fromPosition=s,this.characterLength=h,this.previous=g,this.allCodewordCapacities=[3,5,8,10,12,16,18,22,30,32,36,44,49,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.squareCodewordCapacities=[3,5,8,12,18,22,30,36,44,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.rectangularCodewordCapacities=[5,10,16,33,32,49],!(s+h<=t.length()))throw new Error("Invalid edge");var a=null!==g?g.cachedTotalSize:0,o=this.getPreviousMode();switch(n){case yr.ASCII:a++,(t.isECI(s)||pu.isExtendedASCII(t.charAt(s),t.getFNC1Character()))&&a++,(o===yr.C40||o===yr.TEXT||o===yr.X12)&&a++;break;case yr.B256:a++,(o!==yr.B256||250===this.getB256Size())&&a++,o===yr.ASCII?a++:(o===yr.C40||o===yr.TEXT||o===yr.X12)&&(a+=2);break;case yr.C40:case yr.TEXT:case yr.X12:a+=n===yr.X12?2:2*pu.getNumberOfC40Words(t,s,n===yr.C40,[]),o===yr.ASCII||o===yr.B256?a++:o!==n&&(o===yr.C40||o===yr.TEXT||o===yr.X12)&&(a+=2);break;case yr.EDF:a+=3,o===yr.ASCII||o===yr.B256?a++:(o===yr.C40||o===yr.TEXT||o===yr.X12)&&(a+=2)}this.cachedTotalSize=a}return i.prototype.getB256Size=function(){for(var t=0,n=this;null!==n&&n.mode===yr.B256&&t<=250;)t++,n=n.previous;return t},i.prototype.getPreviousStartMode=function(){return null===this.previous?yr.ASCII:this.previous.mode},i.prototype.getPreviousMode=function(){return null===this.previous?yr.ASCII:this.previous.getEndMode()},i.prototype.getEndMode=function(){if(this.mode===yr.EDF){if(this.characterLength<4)return yr.ASCII;if((t=this.getLastASCII())>0&&this.getCodewordsRemaining(this.cachedTotalSize+t)<=2-t)return yr.ASCII}if(this.mode===yr.C40||this.mode===yr.TEXT||this.mode===yr.X12){if(this.fromPosition+this.characterLength>=this.input.length()&&0===this.getCodewordsRemaining(this.cachedTotalSize))return yr.ASCII;var t;if(1===(t=this.getLastASCII())&&0===this.getCodewordsRemaining(this.cachedTotalSize+1))return yr.ASCII}return this.mode},i.prototype.getMode=function(){return this.mode},i.prototype.getLastASCII=function(){var t=this.input.length(),n=this.fromPosition+this.characterLength;return t-n>4||n>=t?0:t-n==1?pu.isExtendedASCII(this.input.charAt(n),this.input.getFNC1Character())?0:1:t-n==2?pu.isExtendedASCII(this.input.charAt(n),this.input.getFNC1Character())||pu.isExtendedASCII(this.input.charAt(n+1),this.input.getFNC1Character())?0:ai.isDigit(this.input.charAt(n))&&ai.isDigit(this.input.charAt(n+1))?1:2:t-n==3?ai.isDigit(this.input.charAt(n))&&ai.isDigit(this.input.charAt(n+1))&&!pu.isExtendedASCII(this.input.charAt(n+2),this.input.getFNC1Character())||ai.isDigit(this.input.charAt(n+1))&&ai.isDigit(this.input.charAt(n+2))&&!pu.isExtendedASCII(this.input.charAt(n),this.input.getFNC1Character())?2:0:ai.isDigit(this.input.charAt(n))&&ai.isDigit(this.input.charAt(n+1))&&ai.isDigit(this.input.charAt(n+2))&&ai.isDigit(this.input.charAt(n+3))?2:0},i.prototype.getMinSymbolSize=function(t){var n,s,h,g,a,o;switch(this.input.getShapeHint()){case 1:try{for(var l=zu(this.squareCodewordCapacities),v=l.next();!v.done;v=l.next())if((E=v.value)>=t)return E}catch(se){n={error:se}}finally{try{v&&!v.done&&(s=l.return)&&s.call(l)}finally{if(n)throw n.error}}break;case 2:try{for(var A=zu(this.rectangularCodewordCapacities),R=A.next();!R.done;R=A.next())if((E=R.value)>=t)return E}catch(se){h={error:se}}finally{try{R&&!R.done&&(g=A.return)&&g.call(A)}finally{if(h)throw h.error}}}try{for(var k=zu(this.allCodewordCapacities),Z=k.next();!Z.done;Z=k.next()){var E;if((E=Z.value)>=t)return E}}catch(se){a={error:se}}finally{try{Z&&!Z.done&&(o=k.return)&&o.call(k)}finally{if(a)throw a.error}}return this.allCodewordCapacities[this.allCodewordCapacities.length-1]},i.prototype.getCodewordsRemaining=function(t){return this.getMinSymbolSize(t)-t},i.getBytes=function(t,n){var s=new Uint8Array(n?2:1);return s[0]=t,n&&(s[1]=n),s},i.prototype.setC40Word=function(t,n,s,h,g){var a=1600*(255&s)+40*(255&h)+(255&g)+1;t[n]=a/256,t[n+1]=a%256},i.prototype.getX12Value=function(t){return 13===t?0:42===t?1:62===t?2:32===t?3:t>=48&&t<=57?t-44:t>=65&&t<=90?t-51:t},i.prototype.getX12Words=function(){if(this.characterLength%3!=0)throw new Error("X12 words must be a multiple of 3");for(var t=new Uint8Array(this.characterLength/3*2),n=0;n<t.length;n+=2)this.setC40Word(t,n,this.getX12Value(this.input.charAt(this.fromPosition+n/2*3)),this.getX12Value(this.input.charAt(this.fromPosition+n/2*3+1)),this.getX12Value(this.input.charAt(this.fromPosition+n/2*3+2)));return t},i.prototype.getShiftValue=function(t,n,s){return n&&pu.isInC40Shift1Set(t)||!n&&pu.isInTextShift1Set(t)?0:n&&pu.isInC40Shift2Set(t,s)||!n&&pu.isInTextShift2Set(t,s)?1:2},i.prototype.getC40Value=function(t,n,s,h){if(s===h){if(2!==n)throw new Error("FNC1 cannot be used in C40 shift 2");return 27}return t?s<=31?s:32===s?3:s<=47?s-33:s<=57?s-44:s<=64?s-43:s<=90?s-51:s<=95?s-69:s<=127?s-96:s:0===s?0:0===n&&s<=3?s-1:1===n&&s<=31?s:32===s?3:s>=33&&s<=47?s-33:s>=48&&s<=57?s-44:s>=58&&s<=64?s-43:s>=65&&s<=90?s-64:s>=91&&s<=95?s-69:96===s?0:s>=97&&s<=122?s-83:s>=123&&s<=127?s-96:s},i.prototype.getC40Words=function(t,n){for(var s=[],h=0;h<this.characterLength;h++){var g=this.input.charAt(this.fromPosition+h);if(t&&ai.isNativeC40(g)||!t&&ai.isNativeText(g))s.push(this.getC40Value(t,0,g,n));else if(pu.isExtendedASCII(g,n)){var o=(255&g)-128;if(t&&ai.isNativeC40(o)||!t&&ai.isNativeText(o))s.push(1),s.push(30),s.push(this.getC40Value(t,0,o,n));else{s.push(1),s.push(30);var a=this.getShiftValue(o,t,n);s.push(a),s.push(this.getC40Value(t,a,o,n))}}else a=this.getShiftValue(g,t,n),s.push(a),s.push(this.getC40Value(t,a,g,n))}if(s.length%3!=0){if((s.length-2)%3!=0||this.fromPosition+this.characterLength!==this.input.length())throw new Error("C40 words must be a multiple of 3");s.push(0)}var l=new Uint8Array(s.length/3*2),v=0;for(h=0;h<s.length;h+=3)this.setC40Word(l,v,255&s[h],255&s[h+1],255&s[h+2]),v+=2;return l},i.prototype.getEDFBytes=function(){for(var t=Math.ceil(this.characterLength/4),n=new Uint8Array(3*t),s=this.fromPosition,h=Math.min(this.fromPosition+this.characterLength-1,this.input.length()-1),g=0;g<t;g+=3){for(var a=[],o=0;o<4;o++)a[o]=s<=h?63&this.input.charAt(s++):s===h+1?31:0;var l=a[0]<<18;l|=a[1]<<12,l|=a[2]<<6,n[g]=(l|=a[3])>>16&255,n[g+1]=l>>8&255,n[g+2]=255&l}return n},i.prototype.getLatchBytes=function(){switch(this.getPreviousMode()){case yr.ASCII:case yr.B256:switch(this.mode){case yr.B256:return i.getBytes(231);case yr.C40:return i.getBytes(230);case yr.TEXT:return i.getBytes(239);case yr.X12:return i.getBytes(238);case yr.EDF:return i.getBytes(240)}break;case yr.C40:case yr.TEXT:case yr.X12:if(this.mode!==this.getPreviousMode())switch(this.mode){case yr.ASCII:return i.getBytes(254);case yr.B256:return i.getBytes(254,231);case yr.C40:return i.getBytes(254,230);case yr.TEXT:return i.getBytes(254,239);case yr.X12:return i.getBytes(254,238);case yr.EDF:return i.getBytes(254,240)}break;case yr.EDF:if(this.mode!==yr.EDF)throw new Error("Cannot switch from EDF to "+this.mode)}return new Uint8Array(0)},i.prototype.getDataBytes=function(){switch(this.mode){case yr.ASCII:return this.input.isECI(this.fromPosition)?i.getBytes(241,this.input.getECIValue(this.fromPosition)+1):pu.isExtendedASCII(this.input.charAt(this.fromPosition),this.input.getFNC1Character())?i.getBytes(235,this.input.charAt(this.fromPosition)-127):2===this.characterLength?i.getBytes(10*this.input.charAt(this.fromPosition)+this.input.charAt(this.fromPosition+1)+130):this.input.isFNC1(this.fromPosition)?i.getBytes(232):i.getBytes(this.input.charAt(this.fromPosition)+1);case yr.B256:return i.getBytes(this.input.charAt(this.fromPosition));case yr.C40:return this.getC40Words(!0,this.input.getFNC1Character());case yr.TEXT:return this.getC40Words(!1,this.input.getFNC1Character());case yr.X12:return this.getX12Words();case yr.EDF:return this.getEDFBytes()}},i}(),jf=function(i){function t(n,s,h,g,a){var o=i.call(this,n,s,h)||this;return o.shape=g,o.macroId=a,o}return ic(t,i),t.prototype.getMacroId=function(){return this.macroId},t.prototype.getShapeHint=function(){return this.shape},t}(Zd);!function(){function i(){}i.prototype.encode=function(t,n,s,h,g){if(void 0===g&&(g=null),""===t.trim())throw new Error("Found empty contents");if(n!==He.DATA_MATRIX)throw new Error("Can only encode DATA_MATRIX, but got "+n);if(s<0||h<0)throw new Error("Requested dimensions can't be negative: "+s+"x"+h);var R,a=0,o=null,l=null;if(null!=g){var v=g.get(po.DATA_MATRIX_SHAPE);null!=v&&(a=v);var E=g.get(po.MIN_SIZE);null!=E&&(o=E);var A=g.get(po.MAX_SIZE);null!=A&&(l=A)}if(null!=g&&g.has(po.DATA_MATRIX_COMPACT)&&Boolean(g.get(po.DATA_MATRIX_COMPACT).toString())){var Z=g.has(po.GS1_FORMAT)&&Boolean(g.get(po.GS1_FORMAT).toString()),se=null;g.has(po.CHARACTER_SET)&&(se=fu.forName(g.get(po.CHARACTER_SET).toString())),R=pu.encodeHighLevel(t,se,Z?29:-1,a)}else{var Ue=null!=g&&g.has(po.FORCE_C40)&&Boolean(g.get(po.FORCE_C40).toString());R=ai.encodeHighLevel(t,a,o,l,Ue)}var ze=Kn.lookup(R.length,a,o,l,!0),Ct=N.encodeECC200(R,ze),Mt=new el(Ct,ze.getSymbolDataWidth(),ze.getSymbolDataHeight());return Mt.place(),this.encodeLowLevel(Mt,ze,s,h)},i.prototype.encodeLowLevel=function(t,n,s,h){for(var g=n.getSymbolDataWidth(),a=n.getSymbolDataHeight(),o=new Zc(n.getSymbolWidth(),n.getSymbolHeight()),l=0,v=0;v<a;v++){var E=void 0;if(v%n.matrixHeight==0){E=0;for(var A=0;A<n.getSymbolWidth();A++)o.setBoolean(E,l,A%2==0),E++;l++}for(E=0,A=0;A<g;A++)A%n.matrixWidth==0&&(o.setBoolean(E,l,!0),E++),o.setBoolean(E,l,t.getBit(A,v)),E++,A%n.matrixWidth==n.matrixWidth-1&&(o.setBoolean(E,l,v%2==0),E++);if(l++,v%n.matrixHeight==n.matrixHeight-1){for(E=0,A=0;A<n.getSymbolWidth();A++)o.setBoolean(E,l,!0),E++;l++}}return this.convertByteMatrixToBitMatrix(o,s,h)},i.prototype.convertByteMatrixToBitMatrix=function(t,n,s){var A,h=t.getWidth(),g=t.getHeight(),a=Math.max(n,h),o=Math.max(s,g),l=Math.min(a/h,o/g),v=(a-h*l)/2,E=(o-g*l)/2;s<g||n<h?(v=0,E=0,A=new Ir(h,g)):A=new Ir(n,s),A.clear();for(var R=0,k=E;R<g;R++,k+=l)for(var Z=0,se=v;Z<h;Z++,se+=l)1===t.get(Z,R)&&A.setRegion(se,k,l,l);return A}}();var _h=function(){function i(){}return i.prototype.isCompact=function(){return this.compact},i.prototype.setCompact=function(t){this.compact=t},i.prototype.getSize=function(){return this.size},i.prototype.setSize=function(t){this.size=t},i.prototype.getLayers=function(){return this.layers},i.prototype.setLayers=function(t){this.layers=t},i.prototype.getCodeWords=function(){return this.codeWords},i.prototype.setCodeWords=function(t){this.codeWords=t},i.prototype.getMatrix=function(){return this.matrix},i.prototype.setMatrix=function(t){this.matrix=t},i}();const Qd=_h;var Eh=function(){function i(){}return i.singletonList=function(t){return[t]},i.min=function(t,n){return t.sort(n)[0]},i}();const js=Eh;var Qh=function(){function i(t){this.previous=t}return i.prototype.getPrevious=function(){return this.previous},i}();const Jh=Qh;var wh=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Cc=function(i){function t(n,s,h){var g=i.call(this,n)||this;return g.value=s,g.bitCount=h,g}return wh(t,i),t.prototype.appendTo=function(n,s){n.appendBits(this.value,this.bitCount)},t.prototype.add=function(n,s){return new t(this,n,s)},t.prototype.addBinaryShift=function(n,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new t(this,n,s)},t.prototype.toString=function(){var n=this.value&(1<<this.bitCount)-1;return"<"+Le.toBinaryString((n|=1<<this.bitCount)|1<<this.bitCount).substring(1)+">"},t}(Jh);const Da=Cc;var gu=function(){var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,h){s.__proto__=h}||function(s,h){for(var g in h)h.hasOwnProperty(g)&&(s[g]=h[g])})(t,n)};return function(t,n){function s(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}(),Wl=function(i){function t(n,s,h){var g=i.call(this,n,0,0)||this;return g.binaryShiftStart=s,g.binaryShiftByteCount=h,g}return gu(t,i),t.prototype.appendTo=function(n,s){for(var h=0;h<this.binaryShiftByteCount;h++)(0===h||31===h&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):n.appendBits(0===h?Math.min(this.binaryShiftByteCount,31):this.binaryShiftByteCount-31,5)),n.appendBits(s[this.binaryShiftStart+h],8)},t.prototype.addBinaryShift=function(n,s){return new t(this,n,s)},t.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},t}(Da);const ef=Wl;function ia(i,t,n){return new Da(i,t,n)}var Ch=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ih=new Da(null,0,0),Ol=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])],mu=function jc(i){var t,n;try{for(var s=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),h=s.next();!h.done;h=s.next())mt.fill(h.value,-1)}catch(a){t={error:a}}finally{try{h&&!h.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i[0][4]=0,i[1][4]=0,i[1][0]=28,i[3][4]=0,i[2][4]=0,i[2][0]=15,i}(mt.createInt32Array(6,6)),fd=function(){function i(t,n,s,h){this.token=t,this.mode=n,this.binaryShiftByteCount=s,this.bitCount=h}return i.prototype.getMode=function(){return this.mode},i.prototype.getToken=function(){return this.token},i.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},i.prototype.getBitCount=function(){return this.bitCount},i.prototype.latchAndAppend=function(t,n){var s=this.bitCount,h=this.token;if(t!==this.mode){var g=Ol[this.mode][t];h=ia(h,65535&g,g>>16),s+=g>>16}var a=2===t?4:5;return new i(h=ia(h,n,a),t,0,s+a)},i.prototype.shiftAndAppend=function(t,n){var s=this.token,h=2===this.mode?4:5;return s=ia(s,mu[this.mode][t],h),new i(s=ia(s,n,5),this.mode,0,this.bitCount+h+5)},i.prototype.addBinaryShiftChar=function(t){var n=this.token,s=this.mode,h=this.bitCount;if(4===this.mode||2===this.mode){var g=Ol[s][0];n=ia(n,65535&g,g>>16),h+=g>>16,s=0}var o=new i(n,s,this.binaryShiftByteCount+1,h+(0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8));return 2078===o.binaryShiftByteCount&&(o=o.endBinaryShift(t+1)),o},i.prototype.endBinaryShift=function(t){if(0===this.binaryShiftByteCount)return this;var n=this.token;return n=function Rd(i,t,n){return new ef(i,t,n)}(n,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new i(n,this.mode,0,this.bitCount)},i.prototype.isBetterThanOrEqualTo=function(t){var n=this.bitCount+(Ol[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?n+=i.calculateBinaryShiftCost(t)-i.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(n+=10),n<=t.bitCount},i.prototype.toBitArray=function(t){for(var n,s,h=[],g=this.endBinaryShift(t.length).token;null!==g;g=g.getPrevious())h.unshift(g);var a=new Ze;try{for(var o=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(h),l=o.next();!l.done;l=o.next())l.value.appendTo(a,t)}catch(E){n={error:E}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(n)throw n.error}}return a},i.prototype.toString=function(){return Nn.format("%s bits=%d bytes=%d",Ch[this.mode],this.bitCount,this.binaryShiftByteCount)},i.calculateBinaryShiftCost=function(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0},i.INITIAL_STATE=new i(Ih,0,0,0),i}();const Jd=fd;var Yl=function pd(i){var t=Nn.getCharCode(" "),n=Nn.getCharCode("."),s=Nn.getCharCode(",");i[0][t]=1;for(var h=Nn.getCharCode("Z"),g=Nn.getCharCode("A"),a=g;a<=h;a++)i[0][a]=a-g+2;i[1][t]=1;var o=Nn.getCharCode("z"),l=Nn.getCharCode("a");for(a=l;a<=o;a++)i[1][a]=a-l+2;i[2][t]=1;var v=Nn.getCharCode("9"),E=Nn.getCharCode("0");for(a=E;a<=v;a++)i[2][a]=a-E+2;i[2][s]=12,i[2][n]=13;for(var A=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"],R=0;R<A.length;R++)i[3][Nn.getCharCode(A[R])]=R;var k=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(R=0;R<k.length;R++)Nn.getCharCode(k[R])>0&&(i[4][Nn.getCharCode(k[R])]=R);return i}(mt.createInt32Array(5,256)),Ml=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ol=function(){function i(t){this.text=t}return i.prototype.encode=function(){for(var t=Nn.getCharCode(" "),n=Nn.getCharCode("\n"),s=js.singletonList(Jd.INITIAL_STATE),h=0;h<this.text.length;h++){var g=void 0,a=h+1<this.text.length?this.text[h+1]:0;switch(this.text[h]){case Nn.getCharCode("\r"):g=a===n?2:0;break;case Nn.getCharCode("."):g=a===t?3:0;break;case Nn.getCharCode(","):g=a===t?4:0;break;case Nn.getCharCode(":"):g=a===t?5:0;break;default:g=0}g>0?(s=i.updateStateListForPair(s,h,g),h++):s=this.updateStateListForChar(s,h)}return js.min(s,function(l,v){return l.getBitCount()-v.getBitCount()}).toBitArray(this.text)},i.prototype.updateStateListForChar=function(t,n){var s,h,g=[];try{for(var a=Ml(t),o=a.next();!o.done;o=a.next())this.updateStateForChar(o.value,n,g)}catch(v){s={error:v}}finally{try{o&&!o.done&&(h=a.return)&&h.call(a)}finally{if(s)throw s.error}}return i.simplifyStates(g)},i.prototype.updateStateForChar=function(t,n,s){for(var h=255&this.text[n],g=Yl[t.getMode()][h]>0,a=null,o=0;o<=4;o++){var l=Yl[o][h];if(l>0){if(null==a&&(a=t.endBinaryShift(n)),!g||o===t.getMode()||2===o){var v=a.latchAndAppend(o,l);s.push(v)}if(!g&&mu[t.getMode()][o]>=0){var E=a.shiftAndAppend(o,l);s.push(E)}}}if(t.getBinaryShiftByteCount()>0||0===Yl[t.getMode()][h]){var A=t.addBinaryShiftChar(n);s.push(A)}},i.updateStateListForPair=function(t,n,s){var h,g,a=[];try{for(var o=Ml(t),l=o.next();!l.done;l=o.next())this.updateStateForPair(l.value,n,s,a)}catch(E){h={error:E}}finally{try{l&&!l.done&&(g=o.return)&&g.call(o)}finally{if(h)throw h.error}}return this.simplifyStates(a)},i.updateStateForPair=function(t,n,s,h){var g=t.endBinaryShift(n);if(h.push(g.latchAndAppend(4,s)),4!==t.getMode()&&h.push(g.shiftAndAppend(4,s)),3===s||4===s){var a=g.latchAndAppend(2,16-s).latchAndAppend(2,1);h.push(a)}if(t.getBinaryShiftByteCount()>0){var o=t.addBinaryShiftChar(n).addBinaryShiftChar(n+1);h.push(o)}},i.simplifyStates=function(t){var n,s,h,g,a=[];try{for(var o=Ml(t),l=o.next();!l.done;l=o.next()){var v=l.value,E=!0,A=function(Me){if(Me.isBetterThanOrEqualTo(v))return E=!1,"break";v.isBetterThanOrEqualTo(Me)&&(a=a.filter(function(Ue){return Ue!==Me}))};try{for(var R=(h=void 0,Ml(a)),k=R.next();!k.done&&"break"!==A(k.value);k=R.next());}catch(Me){h={error:Me}}finally{try{k&&!k.done&&(g=R.return)&&g.call(R)}finally{if(h)throw h.error}}E&&a.push(v)}}catch(Me){n={error:Me}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(n)throw n.error}}return a},i}();const xh=ol;var Nl=function(){function i(){}return i.encodeBytes=function(t){return i.encode(t,i.DEFAULT_EC_PERCENT,i.DEFAULT_AZTEC_LAYERS)},i.encode=function(t,n,s){var o,l,v,E,A,h=new xh(t).encode(),g=Le.truncDivision(h.getSize()*n,100)+11,a=h.getSize()+g;if(s!==i.DEFAULT_AZTEC_LAYERS){if(o=s<0,(l=Math.abs(s))>(o?i.MAX_NB_BITS_COMPACT:i.MAX_NB_BITS))throw new Ke(Nn.format("Illegal value %s for layers",s));var R=(v=i.totalBitsInLayer(l,o))-v%(E=i.WORD_SIZE[l]);if((A=i.stuffBits(h,E)).getSize()+g>R)throw new Ke("Data to large for user specified layer");if(o&&A.getSize()>64*E)throw new Ke("Data to large for user specified layer")}else{E=0,A=null;for(var k=0;;k++){if(k>i.MAX_NB_BITS)throw new Ke("Data too large for an Aztec code");if(!(a>(v=i.totalBitsInLayer(l=(o=k<=3)?k+1:k,o)))&&((null==A||E!==i.WORD_SIZE[l])&&(A=i.stuffBits(h,E=i.WORD_SIZE[l])),R=v-v%E,!(o&&A.getSize()>64*E)&&A.getSize()+g<=R))break}}var Ct,Z=i.generateCheckWords(A,v,E),se=A.getSize()/E,Me=i.generateModeMessage(o,l,se),Ue=(o?11:14)+4*l,ze=new Int32Array(Ue);if(o)for(Ct=Ue,k=0;k<ze.length;k++)ze[k]=k;else{Ct=Ue+1+2*Le.truncDivision(Le.truncDivision(Ue,2)-1,15);var Mt=Le.truncDivision(Ue,2),gn=Le.truncDivision(Ct,2);for(k=0;k<Mt;k++){var Rn=k+Le.truncDivision(k,15);ze[Mt-k-1]=gn-Rn-1,ze[Mt+k]=gn+Rn+1}}for(var $n=new Ir(Ct),Sr=(k=0,0);k<l;k++){for(var ni=4*(l-k)+(o?9:12),di=0;di<ni;di++)for(var sa=2*di,Di=0;Di<2;Di++)Z.get(Sr+sa+Di)&&$n.set(ze[2*k+Di],ze[2*k+di]),Z.get(Sr+2*ni+sa+Di)&&$n.set(ze[2*k+di],ze[Ue-1-2*k-Di]),Z.get(Sr+4*ni+sa+Di)&&$n.set(ze[Ue-1-2*k-Di],ze[Ue-1-2*k-di]),Z.get(Sr+6*ni+sa+Di)&&$n.set(ze[Ue-1-2*k-di],ze[2*k+Di]);Sr+=8*ni}if(i.drawModeMessage($n,o,Ct,Me),o)i.drawBullsEye($n,Le.truncDivision(Ct,2),5);else for(i.drawBullsEye($n,Le.truncDivision(Ct,2),7),k=0,di=0;k<Le.truncDivision(Ue,2)-1;k+=15,di+=16)for(Di=1&Le.truncDivision(Ct,2);Di<Ct;Di+=2)$n.set(Le.truncDivision(Ct,2)-di,Di),$n.set(Le.truncDivision(Ct,2)+di,Di),$n.set(Di,Le.truncDivision(Ct,2)-di),$n.set(Di,Le.truncDivision(Ct,2)+di);var Ts=new Qd;return Ts.setCompact(o),Ts.setSize(Ct),Ts.setLayers(l),Ts.setCodeWords(se),Ts.setMatrix($n),Ts},i.drawBullsEye=function(t,n,s){for(var h=0;h<s;h+=2)for(var g=n-h;g<=n+h;g++)t.set(g,n-h),t.set(g,n+h),t.set(n-h,g),t.set(n+h,g);t.set(n-s,n-s),t.set(n-s+1,n-s),t.set(n-s,n-s+1),t.set(n+s,n-s),t.set(n+s,n-s+1),t.set(n+s,n+s-1)},i.generateModeMessage=function(t,n,s){var h=new Ze;return t?(h.appendBits(n-1,2),h.appendBits(s-1,6),h=i.generateCheckWords(h,28,4)):(h.appendBits(n-1,5),h.appendBits(s-1,11),h=i.generateCheckWords(h,40,4)),h},i.drawModeMessage=function(t,n,s,h){var g=Le.truncDivision(s,2);if(n)for(var a=0;a<7;a++){var o=g-3+a;h.get(a)&&t.set(o,g-5),h.get(a+7)&&t.set(g+5,o),h.get(20-a)&&t.set(o,g+5),h.get(27-a)&&t.set(g-5,o)}else for(a=0;a<10;a++)o=g-5+a+Le.truncDivision(a,5),h.get(a)&&t.set(o,g-7),h.get(a+10)&&t.set(g+7,o),h.get(29-a)&&t.set(o,g+7),h.get(39-a)&&t.set(g-7,o)},i.generateCheckWords=function(t,n,s){var h,g,a=t.getSize()/s,o=new wl(i.getGF(s)),l=Le.truncDivision(n,s),v=i.bitsToWords(t,s,l);o.encode(v,l-a);var E=n%s,A=new Ze;A.appendBits(0,E);try{for(var R=function(i){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&i[t],s=0;if(n)return n.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(Array.from(v)),k=R.next();!k.done;k=R.next())A.appendBits(k.value,s)}catch(se){h={error:se}}finally{try{k&&!k.done&&(g=R.return)&&g.call(R)}finally{if(h)throw h.error}}return A},i.bitsToWords=function(t,n,s){var g,a,h=new Int32Array(s);for(g=0,a=t.getSize()/n;g<a;g++){for(var o=0,l=0;l<n;l++)o|=t.get(g*n+l)?1<<n-l-1:0;h[g]=o}return h},i.getGF=function(t){switch(t){case 4:return wt.AZTEC_PARAM;case 6:return wt.AZTEC_DATA_6;case 8:return wt.AZTEC_DATA_8;case 10:return wt.AZTEC_DATA_10;case 12:return wt.AZTEC_DATA_12;default:throw new Ke("Unsupported word size "+t)}},i.stuffBits=function(t,n){for(var s=new Ze,h=t.getSize(),g=(1<<n)-2,a=0;a<h;a+=n){for(var o=0,l=0;l<n;l++)(a+l>=h||t.get(a+l))&&(o|=1<<n-1-l);(o&g)===g?(s.appendBits(o&g,n),a--):o&g?s.appendBits(o,n):(s.appendBits(1|o,n),a--)}return s},i.totalBitsInLayer=function(t,n){return((n?88:112)+16*t)*t},i.DEFAULT_EC_PERCENT=33,i.DEFAULT_AZTEC_LAYERS=0,i.MAX_NB_BITS=32,i.MAX_NB_BITS_COMPACT=4,i.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),i}();const sl=Nl;!function(){function i(){}i.prototype.encode=function(t,n,s,h){return this.encodeWithHints(t,n,s,h,null)},i.prototype.encodeWithHints=function(t,n,s,h,g){var a=Hs.ISO_8859_1,o=sl.DEFAULT_EC_PERCENT,l=sl.DEFAULT_AZTEC_LAYERS;return null!=g&&(g.has(po.CHARACTER_SET)&&(a=fu.forName(g.get(po.CHARACTER_SET).toString())),g.has(po.ERROR_CORRECTION)&&(o=Le.parseInt(g.get(po.ERROR_CORRECTION).toString())),g.has(po.AZTEC_LAYERS)&&(l=Le.parseInt(g.get(po.AZTEC_LAYERS).toString()))),i.encodeLayers(t,n,s,h,a,o,l)},i.encodeLayers=function(t,n,s,h,g,a,o){if(n!==He.AZTEC)throw new Ke("Can only encode AZTEC, but got "+n);var l=sl.encode(Nn.getBytes(t,g),a,o);return i.renderResult(l,s,h)},i.renderResult=function(t,n,s){var h=t.getMatrix();if(null==h)throw new Ei;for(var g=h.getWidth(),a=h.getHeight(),o=Math.max(n,g),l=Math.max(s,a),v=Math.min(o/g,l/a),E=(o-g*v)/2,A=(l-a*v)/2,R=new Ir(o,l),k=0,Z=A;k<a;k++,Z+=v)for(var se=0,Me=E;se<g;se++,Me+=v)h.get(se,k)&&R.setRegion(Me,Z,v,v);return R}}()},4901:pn=>{"use strict";var Pe={single_source_shortest_paths:function(U,m,J){var H={},he={};he[m]=0;var we,ye,be,$e,ge,xe,le=Pe.PriorityQueue.make();for(le.push(m,0);!le.empty();)for(be in $e=(we=le.pop()).cost,ge=U[ye=we.value]||{})ge.hasOwnProperty(be)&&(xe=$e+ge[be],(typeof he[be]>"u"||he[be]>xe)&&(he[be]=xe,le.push(be,xe),H[be]=ye));if(typeof J<"u"&&typeof he[J]>"u"){var Ke=["Could not find a path from ",m," to ",J,"."].join("");throw new Error(Ke)}return H},extract_shortest_path_from_predecessor_list:function(U,m){for(var J=[],H=m;H;)J.push(H),H=U[H];return J.reverse(),J},find_path:function(U,m,J){var H=Pe.single_source_shortest_paths(U,m,J);return Pe.extract_shortest_path_from_predecessor_list(H,J)},PriorityQueue:{make:function(U){var H,m=Pe.PriorityQueue,J={};for(H in U=U||{},m)m.hasOwnProperty(H)&&(J[H]=m[H]);return J.queue=[],J.sorter=U.sorter||m.default_sorter,J},default_sorter:function(U,m){return U.cost-m.cost},push:function(U,m){this.queue.push({value:U,cost:m}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};pn.exports=Pe},8419:pn=>{"use strict";pn.exports=function(U){for(var m=[],J=U.length,H=0;H<J;H++){var he=U.charCodeAt(H);if(he>=55296&&he<=56319&&J>H+1){var le=U.charCodeAt(H+1);le>=56320&&le<=57343&&(he=1024*(he-55296)+le-56320+65536,H+=1)}he<128?m.push(he):he<2048?(m.push(he>>6|192),m.push(63&he|128)):he<55296||he>=57344&&he<65536?(m.push(he>>12|224),m.push(he>>6&63|128),m.push(63&he|128)):he>=65536&&he<=1114111?(m.push(he>>18|240),m.push(he>>12&63|128),m.push(he>>6&63|128),m.push(63&he|128)):m.push(239,191,189)}return new Uint8Array(m).buffer}},3259:(pn,Pe,U)=>{const J=U(8695),H=U(1465),he=U(3210),le=U(2334);function we(ye,be,$e,ge,De){const xe=[].slice.call(arguments,1),Ne=xe.length,Xe="function"==typeof xe[Ne-1];if(!Xe&&!J())throw new Error("Callback required as last argument");if(!Xe){if(Ne<1)throw new Error("Too few arguments provided");return 1===Ne?($e=be,be=ge=void 0):2===Ne&&!be.getContext&&(ge=$e,$e=be,be=void 0),new Promise(function(Ke,Lt){try{const We=H.create($e,ge);Ke(ye(We,be,ge))}catch(We){Lt(We)}})}if(Ne<2)throw new Error("Too few arguments provided");2===Ne?(De=$e,$e=be,be=ge=void 0):3===Ne&&(be.getContext&&typeof De>"u"?(De=ge,ge=void 0):(De=ge,ge=$e,$e=be,be=void 0));try{const Ke=H.create($e,ge);De(null,ye(Ke,be,ge))}catch(Ke){De(Ke)}}Pe.rT=we.bind(null,he.render),Pe.hz=we.bind(null,he.renderToDataURL),Pe.toString=we.bind(null,function(ye,be,$e){return le.render(ye,$e)})},8695:pn=>{pn.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},6221:(pn,Pe,U)=>{const m=U(4792).getSymbolSize;Pe.getRowColCoords=function(H){if(1===H)return[];const he=Math.floor(H/7)+2,le=m(H),we=145===le?26:2*Math.ceil((le-13)/(2*he-2)),ye=[le-7];for(let be=1;be<he-1;be++)ye[be]=ye[be-1]-we;return ye.push(6),ye.reverse()},Pe.getPositions=function(H){const he=[],le=Pe.getRowColCoords(H),we=le.length;for(let ye=0;ye<we;ye++)for(let be=0;be<we;be++)0===ye&&0===be||0===ye&&be===we-1||ye===we-1&&0===be||he.push([le[ye],le[be]]);return he}},2424:(pn,Pe,U)=>{const m=U(4016),J=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function H(he){this.mode=m.ALPHANUMERIC,this.data=he}H.getBitsLength=function(le){return 11*Math.floor(le/2)+le%2*6},H.prototype.getLength=function(){return this.data.length},H.prototype.getBitsLength=function(){return H.getBitsLength(this.data.length)},H.prototype.write=function(le){let we;for(we=0;we+2<=this.data.length;we+=2){let ye=45*J.indexOf(this.data[we]);ye+=J.indexOf(this.data[we+1]),le.put(ye,11)}this.data.length%2&&le.put(J.indexOf(this.data[we]),6)},pn.exports=H},2118:pn=>{function Pe(){this.buffer=[],this.length=0}Pe.prototype={get:function(U){const m=Math.floor(U/8);return 1==(this.buffer[m]>>>7-U%8&1)},put:function(U,m){for(let J=0;J<m;J++)this.putBit(1==(U>>>m-J-1&1))},getLengthInBits:function(){return this.length},putBit:function(U){const m=Math.floor(this.length/8);this.buffer.length<=m&&this.buffer.push(0),U&&(this.buffer[m]|=128>>>this.length%8),this.length++}},pn.exports=Pe},4425:pn=>{function Pe(U){if(!U||U<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=U,this.data=new Uint8Array(U*U),this.reservedBit=new Uint8Array(U*U)}Pe.prototype.set=function(U,m,J,H){const he=U*this.size+m;this.data[he]=J,H&&(this.reservedBit[he]=!0)},Pe.prototype.get=function(U,m){return this.data[U*this.size+m]},Pe.prototype.xor=function(U,m,J){this.data[U*this.size+m]^=J},Pe.prototype.isReserved=function(U,m){return this.reservedBit[U*this.size+m]},pn.exports=Pe},5663:(pn,Pe,U)=>{const m=U(8419),J=U(4016);function H(he){this.mode=J.BYTE,"string"==typeof he&&(he=m(he)),this.data=new Uint8Array(he)}H.getBitsLength=function(le){return 8*le},H.prototype.getLength=function(){return this.data.length},H.prototype.getBitsLength=function(){return H.getBitsLength(this.data.length)},H.prototype.write=function(he){for(let le=0,we=this.data.length;le<we;le++)he.put(this.data[le],8)},pn.exports=H},4655:(pn,Pe,U)=>{const m=U(2259),J=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],H=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Pe.getBlocksCount=function(le,we){switch(we){case m.L:return J[4*(le-1)+0];case m.M:return J[4*(le-1)+1];case m.Q:return J[4*(le-1)+2];case m.H:return J[4*(le-1)+3];default:return}},Pe.getTotalCodewordsCount=function(le,we){switch(we){case m.L:return H[4*(le-1)+0];case m.M:return H[4*(le-1)+1];case m.Q:return H[4*(le-1)+2];case m.H:return H[4*(le-1)+3];default:return}}},2259:(pn,Pe)=>{Pe.L={bit:1},Pe.M={bit:0},Pe.Q={bit:3},Pe.H={bit:2},Pe.isValid=function(J){return J&&typeof J.bit<"u"&&J.bit>=0&&J.bit<4},Pe.from=function(J,H){if(Pe.isValid(J))return J;try{return function U(m){if("string"!=typeof m)throw new Error("Param is not a string");switch(m.toLowerCase()){case"l":case"low":return Pe.L;case"m":case"medium":return Pe.M;case"q":case"quartile":return Pe.Q;case"h":case"high":return Pe.H;default:throw new Error("Unknown EC Level: "+m)}}(J)}catch(he){return H}}},3114:(pn,Pe,U)=>{const m=U(4792).getSymbolSize;Pe.getPositions=function(he){const le=m(he);return[[0,0],[le-7,0],[0,le-7]]}},7078:(pn,Pe,U)=>{const m=U(4792),he=m.getBCHDigit(1335);Pe.getEncodedBits=function(we,ye){const be=we.bit<<3|ye;let $e=be<<10;for(;m.getBCHDigit($e)-he>=0;)$e^=1335<<m.getBCHDigit($e)-he;return 21522^(be<<10|$e)}},5339:(pn,Pe)=>{const U=new Uint8Array(512),m=new Uint8Array(256);(function(){let H=1;for(let he=0;he<255;he++)U[he]=H,m[H]=he,H<<=1,256&H&&(H^=285);for(let he=255;he<512;he++)U[he]=U[he-255]})(),Pe.log=function(H){if(H<1)throw new Error("log("+H+")");return m[H]},Pe.exp=function(H){return U[H]},Pe.mul=function(H,he){return 0===H||0===he?0:U[m[H]+m[he]]}},449:(pn,Pe,U)=>{const m=U(4016),J=U(4792);function H(he){this.mode=m.KANJI,this.data=he}H.getBitsLength=function(le){return 13*le},H.prototype.getLength=function(){return this.data.length},H.prototype.getBitsLength=function(){return H.getBitsLength(this.data.length)},H.prototype.write=function(he){let le;for(le=0;le<this.data.length;le++){let we=J.toSJIS(this.data[le]);if(we>=33088&&we<=40956)we-=33088;else{if(!(we>=57408&&we<=60351))throw new Error("Invalid SJIS character: "+this.data[le]+"\nMake sure your charset is UTF-8");we-=49472}we=192*(we>>>8&255)+(255&we),he.put(we,13)}},pn.exports=H},3667:(pn,Pe)=>{Pe.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function m(J,H,he){switch(J){case Pe.Patterns.PATTERN000:return(H+he)%2==0;case Pe.Patterns.PATTERN001:return H%2==0;case Pe.Patterns.PATTERN010:return he%3==0;case Pe.Patterns.PATTERN011:return(H+he)%3==0;case Pe.Patterns.PATTERN100:return(Math.floor(H/2)+Math.floor(he/3))%2==0;case Pe.Patterns.PATTERN101:return H*he%2+H*he%3==0;case Pe.Patterns.PATTERN110:return(H*he%2+H*he%3)%2==0;case Pe.Patterns.PATTERN111:return(H*he%3+(H+he)%2)%2==0;default:throw new Error("bad maskPattern:"+J)}}Pe.isValid=function(H){return null!=H&&""!==H&&!isNaN(H)&&H>=0&&H<=7},Pe.from=function(H){return Pe.isValid(H)?parseInt(H,10):void 0},Pe.getPenaltyN1=function(H){const he=H.size;let le=0,we=0,ye=0,be=null,$e=null;for(let ge=0;ge<he;ge++){we=ye=0,be=$e=null;for(let De=0;De<he;De++){let xe=H.get(ge,De);xe===be?we++:(we>=5&&(le+=we-5+3),be=xe,we=1),xe=H.get(De,ge),xe===$e?ye++:(ye>=5&&(le+=ye-5+3),$e=xe,ye=1)}we>=5&&(le+=we-5+3),ye>=5&&(le+=ye-5+3)}return le},Pe.getPenaltyN2=function(H){const he=H.size;let le=0;for(let we=0;we<he-1;we++)for(let ye=0;ye<he-1;ye++){const be=H.get(we,ye)+H.get(we,ye+1)+H.get(we+1,ye)+H.get(we+1,ye+1);(4===be||0===be)&&le++}return 3*le},Pe.getPenaltyN3=function(H){const he=H.size;let le=0,we=0,ye=0;for(let be=0;be<he;be++){we=ye=0;for(let $e=0;$e<he;$e++)we=we<<1&2047|H.get(be,$e),$e>=10&&(1488===we||93===we)&&le++,ye=ye<<1&2047|H.get($e,be),$e>=10&&(1488===ye||93===ye)&&le++}return 40*le},Pe.getPenaltyN4=function(H){let he=0;const le=H.data.length;for(let ye=0;ye<le;ye++)he+=H.data[ye];return 10*Math.abs(Math.ceil(100*he/le/5)-10)},Pe.applyMask=function(H,he){const le=he.size;for(let we=0;we<le;we++)for(let ye=0;ye<le;ye++)he.isReserved(ye,we)||he.xor(ye,we,m(H,ye,we))},Pe.getBestMask=function(H,he){const le=Object.keys(Pe.Patterns).length;let we=0,ye=1/0;for(let be=0;be<le;be++){he(be),Pe.applyMask(be,H);const $e=Pe.getPenaltyN1(H)+Pe.getPenaltyN2(H)+Pe.getPenaltyN3(H)+Pe.getPenaltyN4(H);Pe.applyMask(be,H),$e<ye&&(ye=$e,we=be)}return we}},4016:(pn,Pe,U)=>{const m=U(4406),J=U(2699);Pe.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},Pe.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},Pe.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},Pe.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},Pe.MIXED={bit:-1},Pe.getCharCountIndicator=function(le,we){if(!le.ccBits)throw new Error("Invalid mode: "+le);if(!m.isValid(we))throw new Error("Invalid version: "+we);return we>=1&&we<10?le.ccBits[0]:we<27?le.ccBits[1]:le.ccBits[2]},Pe.getBestModeForData=function(le){return J.testNumeric(le)?Pe.NUMERIC:J.testAlphanumeric(le)?Pe.ALPHANUMERIC:J.testKanji(le)?Pe.KANJI:Pe.BYTE},Pe.toString=function(le){if(le&&le.id)return le.id;throw new Error("Invalid mode")},Pe.isValid=function(le){return le&&le.bit&&le.ccBits},Pe.from=function(le,we){if(Pe.isValid(le))return le;try{return function H(he){if("string"!=typeof he)throw new Error("Param is not a string");switch(he.toLowerCase()){case"numeric":return Pe.NUMERIC;case"alphanumeric":return Pe.ALPHANUMERIC;case"kanji":return Pe.KANJI;case"byte":return Pe.BYTE;default:throw new Error("Unknown mode: "+he)}}(le)}catch(ye){return we}}},7783:(pn,Pe,U)=>{const m=U(4016);function J(H){this.mode=m.NUMERIC,this.data=H.toString()}J.getBitsLength=function(he){return 10*Math.floor(he/3)+(he%3?he%3*3+1:0)},J.prototype.getLength=function(){return this.data.length},J.prototype.getBitsLength=function(){return J.getBitsLength(this.data.length)},J.prototype.write=function(he){let le,we,ye;for(le=0;le+3<=this.data.length;le+=3)we=this.data.substr(le,3),ye=parseInt(we,10),he.put(ye,10);const be=this.data.length-le;be>0&&(we=this.data.substr(le),ye=parseInt(we,10),he.put(ye,3*be+1))},pn.exports=J},1106:(pn,Pe,U)=>{const m=U(5339);Pe.mul=function(H,he){const le=new Uint8Array(H.length+he.length-1);for(let we=0;we<H.length;we++)for(let ye=0;ye<he.length;ye++)le[we+ye]^=m.mul(H[we],he[ye]);return le},Pe.mod=function(H,he){let le=new Uint8Array(H);for(;le.length-he.length>=0;){const we=le[0];for(let be=0;be<he.length;be++)le[be]^=m.mul(he[be],we);let ye=0;for(;ye<le.length&&0===le[ye];)ye++;le=le.slice(ye)}return le},Pe.generateECPolynomial=function(H){let he=new Uint8Array([1]);for(let le=0;le<H;le++)he=Pe.mul(he,new Uint8Array([1,m.exp(le)]));return he}},1465:(pn,Pe,U)=>{const m=U(4792),J=U(2259),H=U(2118),he=U(4425),le=U(6221),we=U(3114),ye=U(3667),be=U(4655),$e=U(2636),ge=U(2088),De=U(7078),xe=U(4016),Ne=U(2033);function Fe(st,Be,Ye){const $=st.size,lt=De.getEncodedBits(Be,Ye);let Qe,qe;for(Qe=0;Qe<15;Qe++)qe=1==(lt>>Qe&1),st.set(Qe<6?Qe:Qe<8?Qe+1:$-15+Qe,8,qe,!0),st.set(8,Qe<8?$-Qe-1:Qe<9?15-Qe-1+1:15-Qe-1,qe,!0);st.set($-8,8,1,!0)}function yt(st,Be,Ye,$){let lt;if(Array.isArray(st))lt=Ne.fromArray(st);else{if("string"!=typeof st)throw new Error("Invalid data");{let pt=Be;if(!pt){const mt=Ne.rawSplit(st);pt=ge.getBestVersionForData(mt,Ye)}lt=Ne.fromString(st,pt||40)}}const Qe=ge.getBestVersionForData(lt,Ye);if(!Qe)throw new Error("The amount of data is too big to be stored in a QR Code");if(Be){if(Be<Qe)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+Qe+".\n")}else Be=Qe;const qe=function ct(st,Be,Ye){const $=new H;Ye.forEach(function(ft){$.put(ft.mode.bit,4),$.put(ft.getLength(),xe.getCharCountIndicator(ft.mode,st)),ft.write($)});const qe=8*(m.getSymbolTotalCodewords(st)-be.getTotalCodewordsCount(st,Be));for($.getLengthInBits()+4<=qe&&$.put(0,4);$.getLengthInBits()%8!=0;)$.putBit(0);const ut=(qe-$.getLengthInBits())/8;for(let ft=0;ft<ut;ft++)$.put(ft%2?17:236,8);return function At(st,Be,Ye){const $=m.getSymbolTotalCodewords(Be),Qe=$-be.getTotalCodewordsCount(Be,Ye),qe=be.getBlocksCount(Be,Ye),ft=qe-$%qe,pt=Math.floor($/qe),mt=Math.floor(Qe/qe),gt=mt+1,Le=pt-mt,it=new $e(Le);let Ze=0;const me=new Array(qe),te=new Array(qe);let q=0;const re=new Uint8Array(st.buffer);for(let Dt=0;Dt<qe;Dt++){const Yt=Dt<ft?mt:gt;me[Dt]=re.slice(Ze,Ze+Yt),te[Dt]=it.encode(me[Dt]),Ze+=Yt,q=Math.max(q,Yt)}const fe=new Uint8Array($);let rt,Qt,ke=0;for(rt=0;rt<q;rt++)for(Qt=0;Qt<qe;Qt++)rt<me[Qt].length&&(fe[ke++]=me[Qt][rt]);for(rt=0;rt<Le;rt++)for(Qt=0;Qt<qe;Qt++)fe[ke++]=te[Qt][rt];return fe}($,st,Be)}(Be,Ye,lt),ut=m.getSymbolSize(Be),ft=new he(ut);return function Xe(st,Be){const Ye=st.size,$=we.getPositions(Be);for(let lt=0;lt<$.length;lt++){const Qe=$[lt][0],qe=$[lt][1];for(let ut=-1;ut<=7;ut++)if(!(Qe+ut<=-1||Ye<=Qe+ut))for(let ft=-1;ft<=7;ft++)qe+ft<=-1||Ye<=qe+ft||st.set(Qe+ut,qe+ft,ut>=0&&ut<=6&&(0===ft||6===ft)||ft>=0&&ft<=6&&(0===ut||6===ut)||ut>=2&&ut<=4&&ft>=2&&ft<=4,!0)}}(ft,Be),function Ke(st){const Be=st.size;for(let Ye=8;Ye<Be-8;Ye++){const $=Ye%2==0;st.set(Ye,6,$,!0),st.set(6,Ye,$,!0)}}(ft),function Lt(st,Be){const Ye=le.getPositions(Be);for(let $=0;$<Ye.length;$++){const lt=Ye[$][0],Qe=Ye[$][1];for(let qe=-2;qe<=2;qe++)for(let ut=-2;ut<=2;ut++)st.set(lt+qe,Qe+ut,-2===qe||2===qe||-2===ut||2===ut||0===qe&&0===ut,!0)}}(ft,Be),Fe(ft,Ye,0),Be>=7&&function We(st,Be){const Ye=st.size,$=ge.getEncodedBits(Be);let lt,Qe,qe;for(let ut=0;ut<18;ut++)lt=Math.floor(ut/3),Qe=ut%3+Ye-8-3,qe=1==($>>ut&1),st.set(lt,Qe,qe,!0),st.set(Qe,lt,qe,!0)}(ft,Be),function Ce(st,Be){const Ye=st.size;let $=-1,lt=Ye-1,Qe=7,qe=0;for(let ut=Ye-1;ut>0;ut-=2)for(6===ut&&ut--;;){for(let ft=0;ft<2;ft++)if(!st.isReserved(lt,ut-ft)){let pt=!1;qe<Be.length&&(pt=1==(Be[qe]>>>Qe&1)),st.set(lt,ut-ft,pt),Qe--,-1===Qe&&(qe++,Qe=7)}if(lt+=$,lt<0||Ye<=lt){lt-=$,$=-$;break}}}(ft,qe),isNaN($)&&($=ye.getBestMask(ft,Fe.bind(null,ft,Ye))),ye.applyMask($,ft),Fe(ft,Ye,$),{modules:ft,version:Be,errorCorrectionLevel:Ye,maskPattern:$,segments:lt}}Pe.create=function(Be,Ye){if(typeof Be>"u"||""===Be)throw new Error("No input text");let lt,Qe,$=J.M;return typeof Ye<"u"&&($=J.from(Ye.errorCorrectionLevel,J.M),lt=ge.from(Ye.version),Qe=ye.from(Ye.maskPattern),Ye.toSJISFunc&&m.setToSJISFunction(Ye.toSJISFunc)),yt(Be,lt,$,Qe)}},2636:(pn,Pe,U)=>{const m=U(1106);function J(H){this.genPoly=void 0,this.degree=H,this.degree&&this.initialize(this.degree)}J.prototype.initialize=function(he){this.degree=he,this.genPoly=m.generateECPolynomial(this.degree)},J.prototype.encode=function(he){if(!this.genPoly)throw new Error("Encoder not initialized");const le=new Uint8Array(he.length+this.degree);le.set(he);const we=m.mod(le,this.genPoly),ye=this.degree-we.length;if(ye>0){const be=new Uint8Array(this.degree);return be.set(we,ye),be}return we},pn.exports=J},2699:(pn,Pe)=>{const U="[0-9]+";let J="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";J=J.replace(/u/g,"\\u");const H="(?:(?![A-Z0-9 $%*+\\-./:]|"+J+")(?:.|[\r\n]))+";Pe.KANJI=new RegExp(J,"g"),Pe.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Pe.BYTE=new RegExp(H,"g"),Pe.NUMERIC=new RegExp(U,"g"),Pe.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const he=new RegExp("^"+J+"$"),le=new RegExp("^"+U+"$"),we=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Pe.testKanji=function(be){return he.test(be)},Pe.testNumeric=function(be){return le.test(be)},Pe.testAlphanumeric=function(be){return we.test(be)}},2033:(pn,Pe,U)=>{const m=U(4016),J=U(7783),H=U(2424),he=U(5663),le=U(449),we=U(2699),ye=U(4792),be=U(4901);function $e(We){return unescape(encodeURIComponent(We)).length}function ge(We,Fe,Ce){const ct=[];let At;for(;null!==(At=We.exec(Ce));)ct.push({data:At[0],index:At.index,mode:Fe,length:At[0].length});return ct}function De(We){const Fe=ge(we.NUMERIC,m.NUMERIC,We),Ce=ge(we.ALPHANUMERIC,m.ALPHANUMERIC,We);let ct,At;return ye.isKanjiModeEnabled()?(ct=ge(we.BYTE,m.BYTE,We),At=ge(we.KANJI,m.KANJI,We)):(ct=ge(we.BYTE_KANJI,m.BYTE,We),At=[]),Fe.concat(Ce,ct,At).sort(function(st,Be){return st.index-Be.index}).map(function(st){return{data:st.data,mode:st.mode,length:st.length}})}function xe(We,Fe){switch(Fe){case m.NUMERIC:return J.getBitsLength(We);case m.ALPHANUMERIC:return H.getBitsLength(We);case m.KANJI:return le.getBitsLength(We);case m.BYTE:return he.getBitsLength(We)}}function Lt(We,Fe){let Ce;const ct=m.getBestModeForData(We);if(Ce=m.from(Fe,ct),Ce!==m.BYTE&&Ce.bit<ct.bit)throw new Error('"'+We+'" cannot be encoded with mode '+m.toString(Ce)+".\n Suggested mode is: "+m.toString(ct));switch(Ce===m.KANJI&&!ye.isKanjiModeEnabled()&&(Ce=m.BYTE),Ce){case m.NUMERIC:return new J(We);case m.ALPHANUMERIC:return new H(We);case m.KANJI:return new le(We);case m.BYTE:return new he(We)}}Pe.fromArray=function(Fe){return Fe.reduce(function(Ce,ct){return"string"==typeof ct?Ce.push(Lt(ct,null)):ct.data&&Ce.push(Lt(ct.data,ct.mode)),Ce},[])},Pe.fromString=function(Fe,Ce){const At=function Xe(We){const Fe=[];for(let Ce=0;Ce<We.length;Ce++){const ct=We[Ce];switch(ct.mode){case m.NUMERIC:Fe.push([ct,{data:ct.data,mode:m.ALPHANUMERIC,length:ct.length},{data:ct.data,mode:m.BYTE,length:ct.length}]);break;case m.ALPHANUMERIC:Fe.push([ct,{data:ct.data,mode:m.BYTE,length:ct.length}]);break;case m.KANJI:Fe.push([ct,{data:ct.data,mode:m.BYTE,length:$e(ct.data)}]);break;case m.BYTE:Fe.push([{data:ct.data,mode:m.BYTE,length:$e(ct.data)}])}}return Fe}(De(Fe,ye.isKanjiModeEnabled())),yt=function Ke(We,Fe){const Ce={},ct={start:{}};let At=["start"];for(let yt=0;yt<We.length;yt++){const st=We[yt],Be=[];for(let Ye=0;Ye<st.length;Ye++){const $=st[Ye],lt=""+yt+Ye;Be.push(lt),Ce[lt]={node:$,lastCount:0},ct[lt]={};for(let Qe=0;Qe<At.length;Qe++){const qe=At[Qe];Ce[qe]&&Ce[qe].node.mode===$.mode?(ct[qe][lt]=xe(Ce[qe].lastCount+$.length,$.mode)-xe(Ce[qe].lastCount,$.mode),Ce[qe].lastCount+=$.length):(Ce[qe]&&(Ce[qe].lastCount=$.length),ct[qe][lt]=xe($.length,$.mode)+4+m.getCharCountIndicator($.mode,Fe))}}At=Be}for(let yt=0;yt<At.length;yt++)ct[At[yt]].end=0;return{map:ct,table:Ce}}(At,Ce),st=be.find_path(yt.map,"start","end"),Be=[];for(let Ye=1;Ye<st.length-1;Ye++)Be.push(yt.table[st[Ye]].node);return Pe.fromArray(function Ne(We){return We.reduce(function(Fe,Ce){const ct=Fe.length-1>=0?Fe[Fe.length-1]:null;return ct&&ct.mode===Ce.mode?(Fe[Fe.length-1].data+=Ce.data,Fe):(Fe.push(Ce),Fe)},[])}(Be))},Pe.rawSplit=function(Fe){return Pe.fromArray(De(Fe,ye.isKanjiModeEnabled()))}},4792:(pn,Pe)=>{let U;const m=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Pe.getSymbolSize=function(H){if(!H)throw new Error('"version" cannot be null or undefined');if(H<1||H>40)throw new Error('"version" should be in range from 1 to 40');return 4*H+17},Pe.getSymbolTotalCodewords=function(H){return m[H]},Pe.getBCHDigit=function(J){let H=0;for(;0!==J;)H++,J>>>=1;return H},Pe.setToSJISFunction=function(H){if("function"!=typeof H)throw new Error('"toSJISFunc" is not a valid function.');U=H},Pe.isKanjiModeEnabled=function(){return typeof U<"u"},Pe.toSJIS=function(H){return U(H)}},4406:(pn,Pe)=>{Pe.isValid=function(m){return!isNaN(m)&&m>=1&&m<=40}},2088:(pn,Pe,U)=>{const m=U(4792),J=U(4655),H=U(2259),he=U(4016),le=U(4406),ye=m.getBCHDigit(7973);function $e(xe,Ne){return he.getCharCountIndicator(xe,Ne)+4}function ge(xe,Ne){let Xe=0;return xe.forEach(function(Ke){const Lt=$e(Ke.mode,Ne);Xe+=Lt+Ke.getBitsLength()}),Xe}Pe.from=function(Ne,Xe){return le.isValid(Ne)?parseInt(Ne,10):Xe},Pe.getCapacity=function(Ne,Xe,Ke){if(!le.isValid(Ne))throw new Error("Invalid QR Code version");typeof Ke>"u"&&(Ke=he.BYTE);const Fe=8*(m.getSymbolTotalCodewords(Ne)-J.getTotalCodewordsCount(Ne,Xe));if(Ke===he.MIXED)return Fe;const Ce=Fe-$e(Ke,Ne);switch(Ke){case he.NUMERIC:return Math.floor(Ce/10*3);case he.ALPHANUMERIC:return Math.floor(Ce/11*2);case he.KANJI:return Math.floor(Ce/13);default:return Math.floor(Ce/8)}},Pe.getBestVersionForData=function(Ne,Xe){let Ke;const Lt=H.from(Xe,H.M);if(Array.isArray(Ne)){if(Ne.length>1)return function De(xe,Ne){for(let Xe=1;Xe<=40;Xe++)if(ge(xe,Xe)<=Pe.getCapacity(Xe,Ne,he.MIXED))return Xe}(Ne,Lt);if(0===Ne.length)return 1;Ke=Ne[0]}else Ke=Ne;return function be(xe,Ne,Xe){for(let Ke=1;Ke<=40;Ke++)if(Ne<=Pe.getCapacity(Ke,Xe,xe))return Ke}(Ke.mode,Ke.getLength(),Lt)},Pe.getEncodedBits=function(Ne){if(!le.isValid(Ne)||Ne<7)throw new Error("Invalid QR Code version");let Xe=Ne<<12;for(;m.getBCHDigit(Xe)-ye>=0;)Xe^=7973<<m.getBCHDigit(Xe)-ye;return Ne<<12|Xe}},3210:(pn,Pe,U)=>{const m=U(6355);Pe.render=function(le,we,ye){let be=ye,$e=we;typeof be>"u"&&(!we||!we.getContext)&&(be=we,we=void 0),we||($e=function H(){try{return document.createElement("canvas")}catch(he){throw new Error("You need to specify a canvas element")}}()),be=m.getOptions(be);const ge=m.getImageWidth(le.modules.size,be),De=$e.getContext("2d"),xe=De.createImageData(ge,ge);return m.qrToImageData(xe.data,le,be),function J(he,le,we){he.clearRect(0,0,le.width,le.height),le.style||(le.style={}),le.height=we,le.width=we,le.style.height=we+"px",le.style.width=we+"px"}(De,$e,ge),De.putImageData(xe,0,0),$e},Pe.renderToDataURL=function(le,we,ye){let be=ye;return typeof be>"u"&&(!we||!we.getContext)&&(be=we,we=void 0),be||(be={}),Pe.render(le,we,be).toDataURL(be.type||"image/png",(be.rendererOpts||{}).quality)}},2334:(pn,Pe,U)=>{const m=U(6355);function J(le,we){const ye=le.a/255,be=we+'="'+le.hex+'"';return ye<1?be+" "+we+'-opacity="'+ye.toFixed(2).slice(1)+'"':be}function H(le,we,ye){let be=le+we;return typeof ye<"u"&&(be+=" "+ye),be}Pe.render=function(we,ye,be){const $e=m.getOptions(ye),ge=we.modules.size,De=we.modules.data,xe=ge+2*$e.margin,Ne=$e.color.light.a?"<path "+J($e.color.light,"fill")+' d="M0 0h'+xe+"v"+xe+'H0z"/>':"",Xe="<path "+J($e.color.dark,"stroke")+' d="'+function he(le,we,ye){let be="",$e=0,ge=!1,De=0;for(let xe=0;xe<le.length;xe++){const Ne=Math.floor(xe%we),Xe=Math.floor(xe/we);!Ne&&!ge&&(ge=!0),le[xe]?(De++,xe>0&&Ne>0&&le[xe-1]||(be+=ge?H("M",Ne+ye,.5+Xe+ye):H("m",$e,0),$e=0,ge=!1),Ne+1<we&&le[xe+1]||(be+=H("h",De),De=0)):$e++}return be}(De,ge,$e.margin)+'"/>',We='<svg xmlns="http://www.w3.org/2000/svg" '+($e.width?'width="'+$e.width+'" height="'+$e.width+'" ':"")+'viewBox="0 0 '+xe+" "+xe+'" shape-rendering="crispEdges">'+Ne+Xe+"</svg>\n";return"function"==typeof be&&be(null,We),We}},6355:(pn,Pe)=>{function U(m){if("number"==typeof m&&(m=m.toString()),"string"!=typeof m)throw new Error("Color should be defined as hex string");let J=m.slice().replace("#","").split("");if(J.length<3||5===J.length||J.length>8)throw new Error("Invalid hex color: "+m);(3===J.length||4===J.length)&&(J=Array.prototype.concat.apply([],J.map(function(he){return[he,he]}))),6===J.length&&J.push("F","F");const H=parseInt(J.join(""),16);return{r:H>>24&255,g:H>>16&255,b:H>>8&255,a:255&H,hex:"#"+J.slice(0,6).join("")}}Pe.getOptions=function(J){J||(J={}),J.color||(J.color={});const he=J.width&&J.width>=21?J.width:void 0;return{width:he,scale:he?4:J.scale||4,margin:typeof J.margin>"u"||null===J.margin||J.margin<0?4:J.margin,color:{dark:U(J.color.dark||"#000000ff"),light:U(J.color.light||"#ffffffff")},type:J.type,rendererOpts:J.rendererOpts||{}}},Pe.getScale=function(J,H){return H.width&&H.width>=J+2*H.margin?H.width/(J+2*H.margin):H.scale},Pe.getImageWidth=function(J,H){const he=Pe.getScale(J,H);return Math.floor((J+2*H.margin)*he)},Pe.qrToImageData=function(J,H,he){const le=H.modules.size,we=H.modules.data,ye=Pe.getScale(le,he),be=Math.floor((le+2*he.margin)*ye),$e=he.margin*ye,ge=[he.color.light,he.color.dark];for(let De=0;De<be;De++)for(let xe=0;xe<be;xe++){let Ne=4*(De*be+xe),Xe=he.color.light;De>=$e&&xe>=$e&&De<be-$e&&xe<be-$e&&(Xe=ge[we[Math.floor((De-$e)/ye)*le+Math.floor((xe-$e)/ye)]?1:0]),J[Ne++]=Xe.r,J[Ne++]=Xe.g,J[Ne++]=Xe.b,J[Ne]=Xe.a}}},1135:(pn,Pe,U)=>{"use strict";U.d(Pe,{X:()=>J});var m=U(7579);class J extends m.x{constructor(he){super(),this._value=he}get value(){return this.getValue()}_subscribe(he){const le=super._subscribe(he);return!le.closed&&he.next(this._value),le}getValue(){const{hasError:he,thrownError:le,_value:we}=this;if(he)throw le;return this._throwIfClosed(),we}next(he){super.next(this._value=he)}}},9751:(pn,Pe,U)=>{"use strict";U.d(Pe,{y:()=>be});var m=U(930),J=U(727),H=U(8822),he=U(9635),le=U(2416),we=U(576),ye=U(2806);let be=(()=>{class xe{constructor(Xe){Xe&&(this._subscribe=Xe)}lift(Xe){const Ke=new xe;return Ke.source=this,Ke.operator=Xe,Ke}subscribe(Xe,Ke,Lt){const We=function De(xe){return xe&&xe instanceof m.Lv||function ge(xe){return xe&&(0,we.m)(xe.next)&&(0,we.m)(xe.error)&&(0,we.m)(xe.complete)}(xe)&&(0,J.Nn)(xe)}(Xe)?Xe:new m.Hp(Xe,Ke,Lt);return(0,ye.x)(()=>{const{operator:Fe,source:Ce}=this;We.add(Fe?Fe.call(We,Ce):Ce?this._subscribe(We):this._trySubscribe(We))}),We}_trySubscribe(Xe){try{return this._subscribe(Xe)}catch(Ke){Xe.error(Ke)}}forEach(Xe,Ke){return new(Ke=$e(Ke))((Lt,We)=>{const Fe=new m.Hp({next:Ce=>{try{Xe(Ce)}catch(ct){We(ct),Fe.unsubscribe()}},error:We,complete:Lt});this.subscribe(Fe)})}_subscribe(Xe){var Ke;return null===(Ke=this.source)||void 0===Ke?void 0:Ke.subscribe(Xe)}[H.L](){return this}pipe(...Xe){return(0,he.U)(Xe)(this)}toPromise(Xe){return new(Xe=$e(Xe))((Ke,Lt)=>{let We;this.subscribe(Fe=>We=Fe,Fe=>Lt(Fe),()=>Ke(We))})}}return xe.create=Ne=>new xe(Ne),xe})();function $e(xe){var Ne;return null!==(Ne=null!=xe?xe:le.v.Promise)&&void 0!==Ne?Ne:Promise}},7579:(pn,Pe,U)=>{"use strict";U.d(Pe,{x:()=>ye});var m=U(9751),J=U(727);const he=(0,U(3888).d)($e=>function(){$e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=U(8737),we=U(2806);let ye=(()=>{class $e extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(De){const xe=new be(this,this);return xe.operator=De,xe}_throwIfClosed(){if(this.closed)throw new he}next(De){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const xe of this.currentObservers)xe.next(De)}})}error(De){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=De;const{observers:xe}=this;for(;xe.length;)xe.shift().error(De)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:De}=this;for(;De.length;)De.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var De;return(null===(De=this.observers)||void 0===De?void 0:De.length)>0}_trySubscribe(De){return this._throwIfClosed(),super._trySubscribe(De)}_subscribe(De){return this._throwIfClosed(),this._checkFinalizedStatuses(De),this._innerSubscribe(De)}_innerSubscribe(De){const{hasError:xe,isStopped:Ne,observers:Xe}=this;return xe||Ne?J.Lc:(this.currentObservers=null,Xe.push(De),new J.w0(()=>{this.currentObservers=null,(0,le.P)(Xe,De)}))}_checkFinalizedStatuses(De){const{hasError:xe,thrownError:Ne,isStopped:Xe}=this;xe?De.error(Ne):Xe&&De.complete()}asObservable(){const De=new m.y;return De.source=this,De}}return $e.create=(ge,De)=>new be(ge,De),$e})();class be extends ye{constructor(ge,De){super(),this.destination=ge,this.source=De}next(ge){var De,xe;null===(xe=null===(De=this.destination)||void 0===De?void 0:De.next)||void 0===xe||xe.call(De,ge)}error(ge){var De,xe;null===(xe=null===(De=this.destination)||void 0===De?void 0:De.error)||void 0===xe||xe.call(De,ge)}complete(){var ge,De;null===(De=null===(ge=this.destination)||void 0===ge?void 0:ge.complete)||void 0===De||De.call(ge)}_subscribe(ge){var De,xe;return null!==(xe=null===(De=this.source)||void 0===De?void 0:De.subscribe(ge))&&void 0!==xe?xe:J.Lc}}},930:(pn,Pe,U)=>{"use strict";U.d(Pe,{Hp:()=>Lt,Lv:()=>xe});var m=U(576),J=U(727),H=U(2416),he=U(7849),le=U(5032);const we=$e("C",void 0,void 0);function $e(At,yt,st){return{kind:At,value:yt,error:st}}var ge=U(3410),De=U(2806);class xe extends J.w0{constructor(yt){super(),this.isStopped=!1,yt?(this.destination=yt,(0,J.Nn)(yt)&&yt.add(this)):this.destination=ct}static create(yt,st,Be){return new Lt(yt,st,Be)}next(yt){this.isStopped?Ce(function be(At){return $e("N",At,void 0)}(yt),this):this._next(yt)}error(yt){this.isStopped?Ce(function ye(At){return $e("E",void 0,At)}(yt),this):(this.isStopped=!0,this._error(yt))}complete(){this.isStopped?Ce(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(yt){this.destination.next(yt)}_error(yt){try{this.destination.error(yt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ne=Function.prototype.bind;function Xe(At,yt){return Ne.call(At,yt)}class Ke{constructor(yt){this.partialObserver=yt}next(yt){const{partialObserver:st}=this;if(st.next)try{st.next(yt)}catch(Be){We(Be)}}error(yt){const{partialObserver:st}=this;if(st.error)try{st.error(yt)}catch(Be){We(Be)}else We(yt)}complete(){const{partialObserver:yt}=this;if(yt.complete)try{yt.complete()}catch(st){We(st)}}}class Lt extends xe{constructor(yt,st,Be){let Ye;if(super(),(0,m.m)(yt)||!yt)Ye={next:null!=yt?yt:void 0,error:null!=st?st:void 0,complete:null!=Be?Be:void 0};else{let $;this&&H.v.useDeprecatedNextContext?($=Object.create(yt),$.unsubscribe=()=>this.unsubscribe(),Ye={next:yt.next&&Xe(yt.next,$),error:yt.error&&Xe(yt.error,$),complete:yt.complete&&Xe(yt.complete,$)}):Ye=yt}this.destination=new Ke(Ye)}}function We(At){H.v.useDeprecatedSynchronousErrorHandling?(0,De.O)(At):(0,he.h)(At)}function Ce(At,yt){const{onStoppedNotification:st}=H.v;st&&ge.z.setTimeout(()=>st(At,yt))}const ct={closed:!0,next:le.Z,error:function Fe(At){throw At},complete:le.Z}},727:(pn,Pe,U)=>{"use strict";U.d(Pe,{Lc:()=>we,w0:()=>le,Nn:()=>ye});var m=U(576);const H=(0,U(3888).d)($e=>function(De){$e(this),this.message=De?`${De.length} errors occurred during unsubscription:\n${De.map((xe,Ne)=>`${Ne+1}) ${xe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=De});var he=U(8737);class le{constructor(ge){this.initialTeardown=ge,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ge;if(!this.closed){this.closed=!0;const{_parentage:De}=this;if(De)if(this._parentage=null,Array.isArray(De))for(const Xe of De)Xe.remove(this);else De.remove(this);const{initialTeardown:xe}=this;if((0,m.m)(xe))try{xe()}catch(Xe){ge=Xe instanceof H?Xe.errors:[Xe]}const{_finalizers:Ne}=this;if(Ne){this._finalizers=null;for(const Xe of Ne)try{be(Xe)}catch(Ke){ge=null!=ge?ge:[],Ke instanceof H?ge=[...ge,...Ke.errors]:ge.push(Ke)}}if(ge)throw new H(ge)}}add(ge){var De;if(ge&&ge!==this)if(this.closed)be(ge);else{if(ge instanceof le){if(ge.closed||ge._hasParent(this))return;ge._addParent(this)}(this._finalizers=null!==(De=this._finalizers)&&void 0!==De?De:[]).push(ge)}}_hasParent(ge){const{_parentage:De}=this;return De===ge||Array.isArray(De)&&De.includes(ge)}_addParent(ge){const{_parentage:De}=this;this._parentage=Array.isArray(De)?(De.push(ge),De):De?[De,ge]:ge}_removeParent(ge){const{_parentage:De}=this;De===ge?this._parentage=null:Array.isArray(De)&&(0,he.P)(De,ge)}remove(ge){const{_finalizers:De}=this;De&&(0,he.P)(De,ge),ge instanceof le&&ge._removeParent(this)}}le.EMPTY=(()=>{const $e=new le;return $e.closed=!0,$e})();const we=le.EMPTY;function ye($e){return $e instanceof le||$e&&"closed"in $e&&(0,m.m)($e.remove)&&(0,m.m)($e.add)&&(0,m.m)($e.unsubscribe)}function be($e){(0,m.m)($e)?$e():$e.unsubscribe()}},2416:(pn,Pe,U)=>{"use strict";U.d(Pe,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(pn,Pe,U)=>{"use strict";U.d(Pe,{z:()=>le});var m=U(8189),H=U(7669),he=U(8996);function le(...we){return function J(){return(0,m.J)(1)}()((0,he.D)(we,(0,H.yG)(we)))}},515:(pn,Pe,U)=>{"use strict";U.d(Pe,{E:()=>J});const J=new(U(9751).y)(le=>le.complete())},8996:(pn,Pe,U)=>{"use strict";U.d(Pe,{D:()=>yt});var m=U(8421),J=U(5363),H=U(9468),we=U(9751),be=U(2202),$e=U(576),ge=U(9672);function xe(st,Be){if(!st)throw new Error("Iterable cannot be null");return new we.y(Ye=>{(0,ge.f)(Ye,Be,()=>{const $=st[Symbol.asyncIterator]();(0,ge.f)(Ye,Be,()=>{$.next().then(lt=>{lt.done?Ye.complete():Ye.next(lt.value)})},0,!0)})})}var Ne=U(3670),Xe=U(8239),Ke=U(1144),Lt=U(6495),We=U(2206),Fe=U(4532),Ce=U(3260);function yt(st,Be){return Be?function At(st,Be){if(null!=st){if((0,Ne.c)(st))return function he(st,Be){return(0,m.Xf)(st).pipe((0,H.R)(Be),(0,J.Q)(Be))}(st,Be);if((0,Ke.z)(st))return function ye(st,Be){return new we.y(Ye=>{let $=0;return Be.schedule(function(){$===st.length?Ye.complete():(Ye.next(st[$++]),Ye.closed||this.schedule())})})}(st,Be);if((0,Xe.t)(st))return function le(st,Be){return(0,m.Xf)(st).pipe((0,H.R)(Be),(0,J.Q)(Be))}(st,Be);if((0,We.D)(st))return xe(st,Be);if((0,Lt.T)(st))return function De(st,Be){return new we.y(Ye=>{let $;return(0,ge.f)(Ye,Be,()=>{$=st[be.h](),(0,ge.f)(Ye,Be,()=>{let lt,Qe;try{({value:lt,done:Qe}=$.next())}catch(qe){return void Ye.error(qe)}Qe?Ye.complete():Ye.next(lt)},0,!0)}),()=>(0,$e.m)(null==$?void 0:$.return)&&$.return()})}(st,Be);if((0,Ce.L)(st))return function ct(st,Be){return xe((0,Ce.Q)(st),Be)}(st,Be)}throw(0,Fe.z)(st)}(st,Be):(0,m.Xf)(st)}},8421:(pn,Pe,U)=>{"use strict";U.d(Pe,{Xf:()=>Ne});var m=U(655),J=U(1144),H=U(8239),he=U(9751),le=U(3670),we=U(2206),ye=U(4532),be=U(6495),$e=U(3260),ge=U(576),De=U(7849),xe=U(8822);function Ne(At){if(At instanceof he.y)return At;if(null!=At){if((0,le.c)(At))return function Xe(At){return new he.y(yt=>{const st=At[xe.L]();if((0,ge.m)(st.subscribe))return st.subscribe(yt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(At);if((0,J.z)(At))return function Ke(At){return new he.y(yt=>{for(let st=0;st<At.length&&!yt.closed;st++)yt.next(At[st]);yt.complete()})}(At);if((0,H.t)(At))return function Lt(At){return new he.y(yt=>{At.then(st=>{yt.closed||(yt.next(st),yt.complete())},st=>yt.error(st)).then(null,De.h)})}(At);if((0,we.D)(At))return Fe(At);if((0,be.T)(At))return function We(At){return new he.y(yt=>{for(const st of At)if(yt.next(st),yt.closed)return;yt.complete()})}(At);if((0,$e.L)(At))return function Ce(At){return Fe((0,$e.Q)(At))}(At)}throw(0,ye.z)(At)}function Fe(At){return new he.y(yt=>{(function ct(At,yt){var st,Be,Ye,$;return(0,m.mG)(this,void 0,void 0,function*(){try{for(st=(0,m.KL)(At);!(Be=yield st.next()).done;)if(yt.next(Be.value),yt.closed)return}catch(lt){Ye={error:lt}}finally{try{Be&&!Be.done&&($=st.return)&&(yield $.call(st))}finally{if(Ye)throw Ye.error}}yt.complete()})})(At,yt).catch(st=>yt.error(st))})}},6451:(pn,Pe,U)=>{"use strict";U.d(Pe,{T:()=>we});var m=U(8189),J=U(8421),H=U(515),he=U(7669),le=U(8996);function we(...ye){const be=(0,he.yG)(ye),$e=(0,he._6)(ye,1/0),ge=ye;return ge.length?1===ge.length?(0,J.Xf)(ge[0]):(0,m.J)($e)((0,le.D)(ge,be)):H.E}},9646:(pn,Pe,U)=>{"use strict";U.d(Pe,{of:()=>H});var m=U(7669),J=U(8996);function H(...he){const le=(0,m.yG)(he);return(0,J.D)(he,le)}},5403:(pn,Pe,U)=>{"use strict";U.d(Pe,{x:()=>J});var m=U(930);function J(he,le,we,ye,be){return new H(he,le,we,ye,be)}class H extends m.Lv{constructor(le,we,ye,be,$e,ge){super(le),this.onFinalize=$e,this.shouldUnsubscribe=ge,this._next=we?function(De){try{we(De)}catch(xe){le.error(xe)}}:super._next,this._error=be?function(De){try{be(De)}catch(xe){le.error(xe)}finally{this.unsubscribe()}}:super._error,this._complete=ye?function(){try{ye()}catch(De){le.error(De)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:we}=this;super.unsubscribe(),!we&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},6590:(pn,Pe,U)=>{"use strict";U.d(Pe,{d:()=>H});var m=U(4482),J=U(5403);function H(he){return(0,m.e)((le,we)=>{let ye=!1;le.subscribe((0,J.x)(we,be=>{ye=!0,we.next(be)},()=>{ye||we.next(he),we.complete()}))})}},1884:(pn,Pe,U)=>{"use strict";U.d(Pe,{x:()=>he});var m=U(4671),J=U(4482),H=U(5403);function he(we,ye=m.y){return we=null!=we?we:le,(0,J.e)((be,$e)=>{let ge,De=!0;be.subscribe((0,H.x)($e,xe=>{const Ne=ye(xe);(De||!we(ge,Ne))&&(De=!1,ge=Ne,$e.next(xe))}))})}function le(we,ye){return we===ye}},9300:(pn,Pe,U)=>{"use strict";U.d(Pe,{h:()=>H});var m=U(4482),J=U(5403);function H(he,le){return(0,m.e)((we,ye)=>{let be=0;we.subscribe((0,J.x)(ye,$e=>he.call(le,$e,be++)&&ye.next($e)))})}},590:(pn,Pe,U)=>{"use strict";U.d(Pe,{P:()=>ye});var m=U(6805),J=U(9300),H=U(5698),he=U(6590),le=U(8068),we=U(4671);function ye(be,$e){const ge=arguments.length>=2;return De=>De.pipe(be?(0,J.h)((xe,Ne)=>be(xe,Ne,De)):we.y,(0,H.q)(1),ge?(0,he.d)($e):(0,le.T)(()=>new m.K))}},4004:(pn,Pe,U)=>{"use strict";U.d(Pe,{U:()=>H});var m=U(4482),J=U(5403);function H(he,le){return(0,m.e)((we,ye)=>{let be=0;we.subscribe((0,J.x)(ye,$e=>{ye.next(he.call(le,$e,be++))}))})}},8189:(pn,Pe,U)=>{"use strict";U.d(Pe,{J:()=>H});var m=U(5577),J=U(4671);function H(he=1/0){return(0,m.z)(J.y,he)}},5577:(pn,Pe,U)=>{"use strict";U.d(Pe,{z:()=>be});var m=U(4004),J=U(8421),H=U(4482),he=U(9672),le=U(5403),ye=U(576);function be($e,ge,De=1/0){return(0,ye.m)(ge)?be((xe,Ne)=>(0,m.U)((Xe,Ke)=>ge(xe,Xe,Ne,Ke))((0,J.Xf)($e(xe,Ne))),De):("number"==typeof ge&&(De=ge),(0,H.e)((xe,Ne)=>function we($e,ge,De,xe,Ne,Xe,Ke,Lt){const We=[];let Fe=0,Ce=0,ct=!1;const At=()=>{ct&&!We.length&&!Fe&&ge.complete()},yt=Be=>Fe<xe?st(Be):We.push(Be),st=Be=>{Xe&&ge.next(Be),Fe++;let Ye=!1;(0,J.Xf)(De(Be,Ce++)).subscribe((0,le.x)(ge,$=>{null==Ne||Ne($),Xe?yt($):ge.next($)},()=>{Ye=!0},void 0,()=>{if(Ye)try{for(Fe--;We.length&&Fe<xe;){const $=We.shift();Ke?(0,he.f)(ge,Ke,()=>st($)):st($)}At()}catch($){ge.error($)}}))};return $e.subscribe((0,le.x)(ge,yt,()=>{ct=!0,At()})),()=>{null==Lt||Lt()}}(xe,Ne,$e,De)))}},5363:(pn,Pe,U)=>{"use strict";U.d(Pe,{Q:()=>he});var m=U(9672),J=U(4482),H=U(5403);function he(le,we=0){return(0,J.e)((ye,be)=>{ye.subscribe((0,H.x)(be,$e=>(0,m.f)(be,le,()=>be.next($e),we),()=>(0,m.f)(be,le,()=>be.complete(),we),$e=>(0,m.f)(be,le,()=>be.error($e),we)))})}},5026:(pn,Pe,U)=>{"use strict";U.d(Pe,{R:()=>he});var m=U(4482),J=U(5403);function he(le,we){return(0,m.e)(function H(le,we,ye,be,$e){return(ge,De)=>{let xe=ye,Ne=we,Xe=0;ge.subscribe((0,J.x)(De,Ke=>{const Lt=Xe++;Ne=xe?le(Ne,Ke,Lt):(xe=!0,Ke),be&&De.next(Ne)},$e&&(()=>{xe&&De.next(Ne),De.complete()})))}}(le,we,arguments.length>=2,!0))}},3099:(pn,Pe,U)=>{"use strict";U.d(Pe,{B:()=>le});var m=U(8421),J=U(7579),H=U(930),he=U(4482);function le(ye={}){const{connector:be=(()=>new J.x),resetOnError:$e=!0,resetOnComplete:ge=!0,resetOnRefCountZero:De=!0}=ye;return xe=>{let Ne,Xe,Ke,Lt=0,We=!1,Fe=!1;const Ce=()=>{null==Xe||Xe.unsubscribe(),Xe=void 0},ct=()=>{Ce(),Ne=Ke=void 0,We=Fe=!1},At=()=>{const yt=Ne;ct(),null==yt||yt.unsubscribe()};return(0,he.e)((yt,st)=>{Lt++,!Fe&&!We&&Ce();const Be=Ke=null!=Ke?Ke:be();st.add(()=>{Lt--,0===Lt&&!Fe&&!We&&(Xe=we(At,De))}),Be.subscribe(st),!Ne&&Lt>0&&(Ne=new H.Hp({next:Ye=>Be.next(Ye),error:Ye=>{Fe=!0,Ce(),Xe=we(ct,$e,Ye),Be.error(Ye)},complete:()=>{We=!0,Ce(),Xe=we(ct,ge),Be.complete()}}),(0,m.Xf)(yt).subscribe(Ne))})(xe)}}function we(ye,be,...$e){if(!0===be)return void ye();if(!1===be)return;const ge=new H.Hp({next:()=>{ge.unsubscribe(),ye()}});return be(...$e).subscribe(ge)}},8675:(pn,Pe,U)=>{"use strict";U.d(Pe,{O:()=>he});var m=U(7272),J=U(7669),H=U(4482);function he(...le){const we=(0,J.yG)(le);return(0,H.e)((ye,be)=>{(we?(0,m.z)(le,ye,we):(0,m.z)(le,ye)).subscribe(be)})}},9468:(pn,Pe,U)=>{"use strict";U.d(Pe,{R:()=>J});var m=U(4482);function J(H,he=0){return(0,m.e)((le,we)=>{we.add(H.schedule(()=>le.subscribe(we),he))})}},3900:(pn,Pe,U)=>{"use strict";U.d(Pe,{w:()=>he});var m=U(8421),J=U(4482),H=U(5403);function he(le,we){return(0,J.e)((ye,be)=>{let $e=null,ge=0,De=!1;const xe=()=>De&&!$e&&be.complete();ye.subscribe((0,H.x)(be,Ne=>{null==$e||$e.unsubscribe();let Xe=0;const Ke=ge++;(0,m.Xf)(le(Ne,Ke)).subscribe($e=(0,H.x)(be,Lt=>be.next(we?we(Ne,Lt,Ke,Xe++):Lt),()=>{$e=null,xe()}))},()=>{De=!0,xe()}))})}},5698:(pn,Pe,U)=>{"use strict";U.d(Pe,{q:()=>he});var m=U(515),J=U(4482),H=U(5403);function he(le){return le<=0?()=>m.E:(0,J.e)((we,ye)=>{let be=0;we.subscribe((0,H.x)(ye,$e=>{++be<=le&&(ye.next($e),le<=be&&ye.complete())}))})}},8505:(pn,Pe,U)=>{"use strict";U.d(Pe,{b:()=>le});var m=U(576),J=U(4482),H=U(5403),he=U(4671);function le(we,ye,be){const $e=(0,m.m)(we)||ye||be?{next:we,error:ye,complete:be}:we;return $e?(0,J.e)((ge,De)=>{var xe;null===(xe=$e.subscribe)||void 0===xe||xe.call($e);let Ne=!0;ge.subscribe((0,H.x)(De,Xe=>{var Ke;null===(Ke=$e.next)||void 0===Ke||Ke.call($e,Xe),De.next(Xe)},()=>{var Xe;Ne=!1,null===(Xe=$e.complete)||void 0===Xe||Xe.call($e),De.complete()},Xe=>{var Ke;Ne=!1,null===(Ke=$e.error)||void 0===Ke||Ke.call($e,Xe),De.error(Xe)},()=>{var Xe,Ke;Ne&&(null===(Xe=$e.unsubscribe)||void 0===Xe||Xe.call($e)),null===(Ke=$e.finalize)||void 0===Ke||Ke.call($e)}))}):he.y}},8068:(pn,Pe,U)=>{"use strict";U.d(Pe,{T:()=>he});var m=U(6805),J=U(4482),H=U(5403);function he(we=le){return(0,J.e)((ye,be)=>{let $e=!1;ye.subscribe((0,H.x)(be,ge=>{$e=!0,be.next(ge)},()=>$e?be.complete():be.error(we())))})}function le(){return new m.K}},4408:(pn,Pe,U)=>{"use strict";U.d(Pe,{o:()=>le});var m=U(727);class J extends m.w0{constructor(ye,be){super()}schedule(ye,be=0){return this}}const H={setInterval(we,ye,...be){const{delegate:$e}=H;return null!=$e&&$e.setInterval?$e.setInterval(we,ye,...be):setInterval(we,ye,...be)},clearInterval(we){const{delegate:ye}=H;return((null==ye?void 0:ye.clearInterval)||clearInterval)(we)},delegate:void 0};var he=U(8737);class le extends J{constructor(ye,be){super(ye,be),this.scheduler=ye,this.work=be,this.pending=!1}schedule(ye,be=0){var $e;if(this.closed)return this;this.state=ye;const ge=this.id,De=this.scheduler;return null!=ge&&(this.id=this.recycleAsyncId(De,ge,be)),this.pending=!0,this.delay=be,this.id=null!==($e=this.id)&&void 0!==$e?$e:this.requestAsyncId(De,this.id,be),this}requestAsyncId(ye,be,$e=0){return H.setInterval(ye.flush.bind(ye,this),$e)}recycleAsyncId(ye,be,$e=0){if(null!=$e&&this.delay===$e&&!1===this.pending)return be;null!=be&&H.clearInterval(be)}execute(ye,be){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const $e=this._execute(ye,be);if($e)return $e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ye,be){let ge,$e=!1;try{this.work(ye)}catch(De){$e=!0,ge=De||new Error("Scheduled action threw falsy error")}if($e)return this.unsubscribe(),ge}unsubscribe(){if(!this.closed){const{id:ye,scheduler:be}=this,{actions:$e}=be;this.work=this.state=this.scheduler=null,this.pending=!1,(0,he.P)($e,this),null!=ye&&(this.id=this.recycleAsyncId(be,ye,null)),this.delay=null,super.unsubscribe()}}}},7565:(pn,Pe,U)=>{"use strict";U.d(Pe,{v:()=>H});var m=U(6063);class J{constructor(le,we=J.now){this.schedulerActionCtor=le,this.now=we}schedule(le,we=0,ye){return new this.schedulerActionCtor(this,le).schedule(ye,we)}}J.now=m.l.now;class H extends J{constructor(le,we=J.now){super(le,we),this.actions=[],this._active=!1}flush(le){const{actions:we}=this;if(this._active)return void we.push(le);let ye;this._active=!0;do{if(ye=le.execute(le.state,le.delay))break}while(le=we.shift());if(this._active=!1,ye){for(;le=we.shift();)le.unsubscribe();throw ye}}}},4986:(pn,Pe,U)=>{"use strict";U.d(Pe,{z:()=>H});var m=U(4408);const H=new(U(7565).v)(m.o)},6063:(pn,Pe,U)=>{"use strict";U.d(Pe,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(pn,Pe,U)=>{"use strict";U.d(Pe,{z:()=>m});const m={setTimeout(J,H,...he){const{delegate:le}=m;return null!=le&&le.setTimeout?le.setTimeout(J,H,...he):setTimeout(J,H,...he)},clearTimeout(J){const{delegate:H}=m;return((null==H?void 0:H.clearTimeout)||clearTimeout)(J)},delegate:void 0}},2202:(pn,Pe,U)=>{"use strict";U.d(Pe,{h:()=>J});const J=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pn,Pe,U)=>{"use strict";U.d(Pe,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(pn,Pe,U)=>{"use strict";U.d(Pe,{K:()=>J});const J=(0,U(3888).d)(H=>function(){H(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(pn,Pe,U)=>{"use strict";U.d(Pe,{_6:()=>we,jO:()=>he,yG:()=>le});var m=U(576);function H(ye){return ye[ye.length-1]}function he(ye){return(0,m.m)(H(ye))?ye.pop():void 0}function le(ye){return function J(ye){return ye&&(0,m.m)(ye.schedule)}(H(ye))?ye.pop():void 0}function we(ye,be){return"number"==typeof H(ye)?ye.pop():be}},4742:(pn,Pe,U)=>{"use strict";U.d(Pe,{D:()=>le});const{isArray:m}=Array,{getPrototypeOf:J,prototype:H,keys:he}=Object;function le(ye){if(1===ye.length){const be=ye[0];if(m(be))return{args:be,keys:null};if(function we(ye){return ye&&"object"==typeof ye&&J(ye)===H}(be)){const $e=he(be);return{args:$e.map(ge=>be[ge]),keys:$e}}}return{args:ye,keys:null}}},8737:(pn,Pe,U)=>{"use strict";function m(J,H){if(J){const he=J.indexOf(H);0<=he&&J.splice(he,1)}}U.d(Pe,{P:()=>m})},3888:(pn,Pe,U)=>{"use strict";function m(J){const he=J(le=>{Error.call(le),le.stack=(new Error).stack});return he.prototype=Object.create(Error.prototype),he.prototype.constructor=he,he}U.d(Pe,{d:()=>m})},1810:(pn,Pe,U)=>{"use strict";function m(J,H){return J.reduce((he,le,we)=>(he[le]=H[we],he),{})}U.d(Pe,{n:()=>m})},2806:(pn,Pe,U)=>{"use strict";U.d(Pe,{O:()=>he,x:()=>H});var m=U(2416);let J=null;function H(le){if(m.v.useDeprecatedSynchronousErrorHandling){const we=!J;if(we&&(J={errorThrown:!1,error:null}),le(),we){const{errorThrown:ye,error:be}=J;if(J=null,ye)throw be}}else le()}function he(le){m.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=le)}},9672:(pn,Pe,U)=>{"use strict";function m(J,H,he,le=0,we=!1){const ye=H.schedule(function(){he(),we?J.add(this.schedule(null,le)):this.unsubscribe()},le);if(J.add(ye),!we)return ye}U.d(Pe,{f:()=>m})},4671:(pn,Pe,U)=>{"use strict";function m(J){return J}U.d(Pe,{y:()=>m})},1144:(pn,Pe,U)=>{"use strict";U.d(Pe,{z:()=>m});const m=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(pn,Pe,U)=>{"use strict";U.d(Pe,{D:()=>J});var m=U(576);function J(H){return Symbol.asyncIterator&&(0,m.m)(null==H?void 0:H[Symbol.asyncIterator])}},576:(pn,Pe,U)=>{"use strict";function m(J){return"function"==typeof J}U.d(Pe,{m:()=>m})},3670:(pn,Pe,U)=>{"use strict";U.d(Pe,{c:()=>H});var m=U(8822),J=U(576);function H(he){return(0,J.m)(he[m.L])}},6495:(pn,Pe,U)=>{"use strict";U.d(Pe,{T:()=>H});var m=U(2202),J=U(576);function H(he){return(0,J.m)(null==he?void 0:he[m.h])}},8239:(pn,Pe,U)=>{"use strict";U.d(Pe,{t:()=>J});var m=U(576);function J(H){return(0,m.m)(null==H?void 0:H.then)}},3260:(pn,Pe,U)=>{"use strict";U.d(Pe,{L:()=>he,Q:()=>H});var m=U(655),J=U(576);function H(le){return(0,m.FC)(this,arguments,function*(){const ye=le.getReader();try{for(;;){const{value:be,done:$e}=yield(0,m.qq)(ye.read());if($e)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(be)}}finally{ye.releaseLock()}})}function he(le){return(0,J.m)(null==le?void 0:le.getReader)}},4482:(pn,Pe,U)=>{"use strict";U.d(Pe,{A:()=>J,e:()=>H});var m=U(576);function J(he){return(0,m.m)(null==he?void 0:he.lift)}function H(he){return le=>{if(J(le))return le.lift(function(we){try{return he(we,this)}catch(ye){this.error(ye)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(pn,Pe,U)=>{"use strict";U.d(Pe,{Z:()=>he});var m=U(4004);const{isArray:J}=Array;function he(le){return(0,m.U)(we=>function H(le,we){return J(we)?le(...we):le(we)}(le,we))}},5032:(pn,Pe,U)=>{"use strict";function m(){}U.d(Pe,{Z:()=>m})},9635:(pn,Pe,U)=>{"use strict";U.d(Pe,{U:()=>H,z:()=>J});var m=U(4671);function J(...he){return H(he)}function H(he){return 0===he.length?m.y:1===he.length?he[0]:function(we){return he.reduce((ye,be)=>be(ye),we)}}},7849:(pn,Pe,U)=>{"use strict";U.d(Pe,{h:()=>H});var m=U(2416),J=U(3410);function H(he){J.z.setTimeout(()=>{const{onUnhandledError:le}=m.v;if(!le)throw he;le(he)})}},4532:(pn,Pe,U)=>{"use strict";function m(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Pe,{z:()=>m})},863:(pn,Pe,U)=>{var m={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,3236],"./ion-avatar_3.entry.js":[4753,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[8372,5652],"./ion-card_5.entry.js":[388,388],"./ion-checkbox.entry.js":[9922,9922],"./ion-chip.entry.js":[657,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime-button.entry.js":[9230,1435,9230],"./ion-datetime_3.entry.js":[4959,1435,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,5817],"./ion-input.entry.js":[1217,8592,1217],"./ion-item-option_3.entry.js":[2933,8592,4651],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,8592,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,8592,3804],"./ion-progress-bar.entry.js":[4174,4174],"./ion-radio_2.entry.js":[4432,4432],"./ion-range.entry.js":[1709,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,2175],"./ion-reorder_2.entry.js":[3583,8592,1186],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,2773],"./ion-slide_2.entry.js":[1650,1650],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,8592,1536],"./ion-text.entry.js":[4376,4376],"./ion-textarea.entry.js":[6560,6560],"./ion-toast.entry.js":[6120,8592,6120],"./ion-toggle.entry.js":[5168,8592,5168],"./ion-virtual-scroll.entry.js":[2289,2289]};function J(H){if(!U.o(m,H))return Promise.resolve().then(()=>{var we=new Error("Cannot find module '"+H+"'");throw we.code="MODULE_NOT_FOUND",we});var he=m[H],le=he[0];return Promise.all(he.slice(1).map(U.e)).then(()=>U(le))}J.keys=()=>Object.keys(m),J.id=863,pn.exports=J},655:(pn,Pe,U)=>{"use strict";function he(pt,mt){var gt={};for(var Le in pt)Object.prototype.hasOwnProperty.call(pt,Le)&&mt.indexOf(Le)<0&&(gt[Le]=pt[Le]);if(null!=pt&&"function"==typeof Object.getOwnPropertySymbols){var it=0;for(Le=Object.getOwnPropertySymbols(pt);it<Le.length;it++)mt.indexOf(Le[it])<0&&Object.prototype.propertyIsEnumerable.call(pt,Le[it])&&(gt[Le[it]]=pt[Le[it]])}return gt}function le(pt,mt,gt,Le){var me,it=arguments.length,Ze=it<3?mt:null===Le?Le=Object.getOwnPropertyDescriptor(mt,gt):Le;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ze=Reflect.decorate(pt,mt,gt,Le);else for(var te=pt.length-1;te>=0;te--)(me=pt[te])&&(Ze=(it<3?me(Ze):it>3?me(mt,gt,Ze):me(mt,gt))||Ze);return it>3&&Ze&&Object.defineProperty(mt,gt,Ze),Ze}function xe(pt,mt,gt,Le){return new(gt||(gt=Promise))(function(Ze,me){function te(fe){try{re(Le.next(fe))}catch(ke){me(ke)}}function q(fe){try{re(Le.throw(fe))}catch(ke){me(ke)}}function re(fe){fe.done?Ze(fe.value):function it(Ze){return Ze instanceof gt?Ze:new gt(function(me){me(Ze)})}(fe.value).then(te,q)}re((Le=Le.apply(pt,mt||[])).next())})}function At(pt){return this instanceof At?(this.v=pt,this):new At(pt)}function yt(pt,mt,gt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var it,Le=gt.apply(pt,mt||[]),Ze=[];return it={},me("next"),me("throw"),me("return"),it[Symbol.asyncIterator]=function(){return this},it;function me(rt){Le[rt]&&(it[rt]=function(Qt){return new Promise(function(Dt,Yt){Ze.push([rt,Qt,Dt,Yt])>1||te(rt,Qt)})})}function te(rt,Qt){try{!function q(rt){rt.value instanceof At?Promise.resolve(rt.value.v).then(re,fe):ke(Ze[0][2],rt)}(Le[rt](Qt))}catch(Dt){ke(Ze[0][3],Dt)}}function re(rt){te("next",rt)}function fe(rt){te("throw",rt)}function ke(rt,Qt){rt(Qt),Ze.shift(),Ze.length&&te(Ze[0][0],Ze[0][1])}}function Be(pt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var gt,mt=pt[Symbol.asyncIterator];return mt?mt.call(pt):(pt=function Lt(pt){var mt="function"==typeof Symbol&&Symbol.iterator,gt=mt&&pt[mt],Le=0;if(gt)return gt.call(pt);if(pt&&"number"==typeof pt.length)return{next:function(){return pt&&Le>=pt.length&&(pt=void 0),{value:pt&&pt[Le++],done:!pt}}};throw new TypeError(mt?"Object is not iterable.":"Symbol.iterator is not defined.")}(pt),gt={},Le("next"),Le("throw"),Le("return"),gt[Symbol.asyncIterator]=function(){return this},gt);function Le(Ze){gt[Ze]=pt[Ze]&&function(me){return new Promise(function(te,q){!function it(Ze,me,te,q){Promise.resolve(q).then(function(re){Ze({value:re,done:te})},me)}(te,q,(me=pt[Ze](me)).done,me.value)})}}}U.d(Pe,{FC:()=>yt,KL:()=>Be,_T:()=>he,gn:()=>le,mG:()=>xe,qq:()=>At})},6895:(pn,Pe,U)=>{"use strict";U.d(Pe,{Do:()=>Ce,EM:()=>vs,HT:()=>he,JF:()=>qs,K0:()=>we,Mx:()=>oi,O5:()=>Ot,PM:()=>Ks,S$:()=>Lt,V_:()=>$e,Ye:()=>ct,b0:()=>Fe,bD:()=>Ys,ez:()=>Ws,q:()=>H,sg:()=>Se,tP:()=>Kr,w_:()=>le});var m=U(4650);let J=null;function H(){return J}function he(W){J||(J=W)}class le{}const we=new m.OlP("DocumentToken");let ye=(()=>{class W{historyGo(Q){throw new Error("Not implemented")}}return W.\u0275fac=function(Q){return new(Q||W)},W.\u0275prov=m.Yz7({token:W,factory:function(){return function be(){return(0,m.LFG)(ge)}()},providedIn:"platform"}),W})();const $e=new m.OlP("Location Initialized");let ge=(()=>{class W extends ye{constructor(Q){super(),this._doc=Q,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return H().getBaseHref(this._doc)}onPopState(Q){const Ie=H().getGlobalEventTarget(this._doc,"window");return Ie.addEventListener("popstate",Q,!1),()=>Ie.removeEventListener("popstate",Q)}onHashChange(Q){const Ie=H().getGlobalEventTarget(this._doc,"window");return Ie.addEventListener("hashchange",Q,!1),()=>Ie.removeEventListener("hashchange",Q)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(Q){this._location.pathname=Q}pushState(Q,Ie,et){De()?this._history.pushState(Q,Ie,et):this._location.hash=et}replaceState(Q,Ie,et){De()?this._history.replaceState(Q,Ie,et):this._location.hash=et}forward(){this._history.forward()}back(){this._history.back()}historyGo(Q=0){this._history.go(Q)}getState(){return this._history.state}}return W.\u0275fac=function(Q){return new(Q||W)(m.LFG(we))},W.\u0275prov=m.Yz7({token:W,factory:function(){return function xe(){return new ge((0,m.LFG)(we))}()},providedIn:"platform"}),W})();function De(){return!!window.history.pushState}function Ne(W,ue){if(0==W.length)return ue;if(0==ue.length)return W;let Q=0;return W.endsWith("/")&&Q++,ue.startsWith("/")&&Q++,2==Q?W+ue.substring(1):1==Q?W+ue:W+"/"+ue}function Xe(W){const ue=W.match(/#|\?|$/),Q=ue&&ue.index||W.length;return W.slice(0,Q-("/"===W[Q-1]?1:0))+W.slice(Q)}function Ke(W){return W&&"?"!==W[0]?"?"+W:W}let Lt=(()=>{class W{historyGo(Q){throw new Error("Not implemented")}}return W.\u0275fac=function(Q){return new(Q||W)},W.\u0275prov=m.Yz7({token:W,factory:function(){return(0,m.f3M)(Fe)},providedIn:"root"}),W})();const We=new m.OlP("appBaseHref");let Fe=(()=>{class W extends Lt{constructor(Q,Ie){var et,Wt,hn;super(),this._platformLocation=Q,this._removeListenerFns=[],this._baseHref=null!==(et=null!==(Wt=null!=Ie?Ie:this._platformLocation.getBaseHrefFromDOM())&&void 0!==Wt?Wt:null===(hn=(0,m.f3M)(we).location)||void 0===hn?void 0:hn.origin)&&void 0!==et?et:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(Q){this._removeListenerFns.push(this._platformLocation.onPopState(Q),this._platformLocation.onHashChange(Q))}getBaseHref(){return this._baseHref}prepareExternalUrl(Q){return Ne(this._baseHref,Q)}path(Q=!1){const Ie=this._platformLocation.pathname+Ke(this._platformLocation.search),et=this._platformLocation.hash;return et&&Q?`${Ie}${et}`:Ie}pushState(Q,Ie,et,Wt){const hn=this.prepareExternalUrl(et+Ke(Wt));this._platformLocation.pushState(Q,Ie,hn)}replaceState(Q,Ie,et,Wt){const hn=this.prepareExternalUrl(et+Ke(Wt));this._platformLocation.replaceState(Q,Ie,hn)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(Q=0){var Ie,et;null===(Ie=(et=this._platformLocation).historyGo)||void 0===Ie||Ie.call(et,Q)}}return W.\u0275fac=function(Q){return new(Q||W)(m.LFG(ye),m.LFG(We,8))},W.\u0275prov=m.Yz7({token:W,factory:W.\u0275fac,providedIn:"root"}),W})(),Ce=(()=>{class W extends Lt{constructor(Q,Ie){super(),this._platformLocation=Q,this._baseHref="",this._removeListenerFns=[],null!=Ie&&(this._baseHref=Ie)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(Q){this._removeListenerFns.push(this._platformLocation.onPopState(Q),this._platformLocation.onHashChange(Q))}getBaseHref(){return this._baseHref}path(Q=!1){let Ie=this._platformLocation.hash;return null==Ie&&(Ie="#"),Ie.length>0?Ie.substring(1):Ie}prepareExternalUrl(Q){const Ie=Ne(this._baseHref,Q);return Ie.length>0?"#"+Ie:Ie}pushState(Q,Ie,et,Wt){let hn=this.prepareExternalUrl(et+Ke(Wt));0==hn.length&&(hn=this._platformLocation.pathname),this._platformLocation.pushState(Q,Ie,hn)}replaceState(Q,Ie,et,Wt){let hn=this.prepareExternalUrl(et+Ke(Wt));0==hn.length&&(hn=this._platformLocation.pathname),this._platformLocation.replaceState(Q,Ie,hn)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(Q=0){var Ie,et;null===(Ie=(et=this._platformLocation).historyGo)||void 0===Ie||Ie.call(et,Q)}}return W.\u0275fac=function(Q){return new(Q||W)(m.LFG(ye),m.LFG(We,8))},W.\u0275prov=m.Yz7({token:W,factory:W.\u0275fac}),W})(),ct=(()=>{class W{constructor(Q){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=Q;const Ie=this._locationStrategy.getBaseHref();this._basePath=function Be(W){if(new RegExp("^(https?:)?//").test(W)){const[,Q]=W.split(/\/\/[^\/]+/);return Q}return W}(Xe(st(Ie))),this._locationStrategy.onPopState(et=>{this._subject.emit({url:this.path(!0),pop:!0,state:et.state,type:et.type})})}ngOnDestroy(){var Q;null===(Q=this._urlChangeSubscription)||void 0===Q||Q.unsubscribe(),this._urlChangeListeners=[]}path(Q=!1){return this.normalize(this._locationStrategy.path(Q))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(Q,Ie=""){return this.path()==this.normalize(Q+Ke(Ie))}normalize(Q){return W.stripTrailingSlash(function yt(W,ue){return W&&new RegExp(`^${W}([/;?#]|$)`).test(ue)?ue.substring(W.length):ue}(this._basePath,st(Q)))}prepareExternalUrl(Q){return Q&&"/"!==Q[0]&&(Q="/"+Q),this._locationStrategy.prepareExternalUrl(Q)}go(Q,Ie="",et=null){this._locationStrategy.pushState(et,"",Q,Ie),this._notifyUrlChangeListeners(this.prepareExternalUrl(Q+Ke(Ie)),et)}replaceState(Q,Ie="",et=null){this._locationStrategy.replaceState(et,"",Q,Ie),this._notifyUrlChangeListeners(this.prepareExternalUrl(Q+Ke(Ie)),et)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(Q=0){var Ie,et;null===(Ie=(et=this._locationStrategy).historyGo)||void 0===Ie||Ie.call(et,Q)}onUrlChange(Q){return this._urlChangeListeners.push(Q),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Ie=>{this._notifyUrlChangeListeners(Ie.url,Ie.state)})),()=>{const Ie=this._urlChangeListeners.indexOf(Q);var et;this._urlChangeListeners.splice(Ie,1),0===this._urlChangeListeners.length&&(null===(et=this._urlChangeSubscription)||void 0===et||et.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(Q="",Ie){this._urlChangeListeners.forEach(et=>et(Q,Ie))}subscribe(Q,Ie,et){return this._subject.subscribe({next:Q,error:Ie,complete:et})}}return W.normalizeQueryParams=Ke,W.joinWithSlash=Ne,W.stripTrailingSlash=Xe,W.\u0275fac=function(Q){return new(Q||W)(m.LFG(Lt))},W.\u0275prov=m.Yz7({token:W,factory:function(){return function At(){return new ct((0,m.LFG)(Lt))}()},providedIn:"root"}),W})();function st(W){return W.replace(/\/index.html$/,"")}function oi(W,ue){ue=encodeURIComponent(ue);for(const Q of W.split(";")){const Ie=Q.indexOf("="),[et,Wt]=-1==Ie?[Q,""]:[Q.slice(0,Ie),Q.slice(Ie+1)];if(et.trim()===ue)return decodeURIComponent(Wt)}return null}class Fi{constructor(ue,Q,Ie,et){this.$implicit=ue,this.ngForOf=Q,this.index=Ie,this.count=et}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Se=(()=>{class W{set ngForOf(Q){this._ngForOf=Q,this._ngForOfDirty=!0}set ngForTrackBy(Q){this._trackByFn=Q}get ngForTrackBy(){return this._trackByFn}constructor(Q,Ie,et){this._viewContainer=Q,this._template=Ie,this._differs=et,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(Q){Q&&(this._template=Q)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const Q=this._ngForOf;!this._differ&&Q&&(this._differ=this._differs.find(Q).create(this.ngForTrackBy))}if(this._differ){const Q=this._differ.diff(this._ngForOf);Q&&this._applyChanges(Q)}}_applyChanges(Q){const Ie=this._viewContainer;Q.forEachOperation((et,Wt,hn)=>{if(null==et.previousIndex)Ie.createEmbeddedView(this._template,new Fi(et.item,this._ngForOf,-1,-1),null===hn?void 0:hn);else if(null==hn)Ie.remove(null===Wt?void 0:Wt);else if(null!==Wt){const ir=Ie.get(Wt);Ie.move(ir,hn),je(ir,et)}});for(let et=0,Wt=Ie.length;et<Wt;et++){const ir=Ie.get(et).context;ir.index=et,ir.count=Wt,ir.ngForOf=this._ngForOf}Q.forEachIdentityChange(et=>{je(Ie.get(et.currentIndex),et)})}static ngTemplateContextGuard(Q,Ie){return!0}}return W.\u0275fac=function(Q){return new(Q||W)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},W.\u0275dir=m.lG2({type:W,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),W})();function je(W,ue){W.context.$implicit=ue.item}let Ot=(()=>{class W{constructor(Q,Ie){this._viewContainer=Q,this._context=new Bt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Ie}set ngIf(Q){this._context.$implicit=this._context.ngIf=Q,this._updateView()}set ngIfThen(Q){Ge("ngIfThen",Q),this._thenTemplateRef=Q,this._thenViewRef=null,this._updateView()}set ngIfElse(Q){Ge("ngIfElse",Q),this._elseTemplateRef=Q,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(Q,Ie){return!0}}return W.\u0275fac=function(Q){return new(Q||W)(m.Y36(m.s_b),m.Y36(m.Rgc))},W.\u0275dir=m.lG2({type:W,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),W})();class Bt{constructor(){this.$implicit=null,this.ngIf=null}}function Ge(W,ue){if(ue&&!ue.createEmbeddedView)throw new Error(`${W} must be a TemplateRef, but received '${(0,m.AaK)(ue)}'.`)}let Kr=(()=>{class W{constructor(Q){this._viewContainerRef=Q,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(Q){if(Q.ngTemplateOutlet||Q.ngTemplateOutletInjector){const Ie=this._viewContainerRef;if(this._viewRef&&Ie.remove(Ie.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:et,ngTemplateOutletContext:Wt,ngTemplateOutletInjector:hn}=this;this._viewRef=Ie.createEmbeddedView(et,Wt,hn?{injector:hn}:void 0)}else this._viewRef=null}else this._viewRef&&Q.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return W.\u0275fac=function(Q){return new(Q||W)(m.Y36(m.s_b))},W.\u0275dir=m.lG2({type:W,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[m.TTD]}),W})(),Ws=(()=>{class W{}return W.\u0275fac=function(Q){return new(Q||W)},W.\u0275mod=m.oAB({type:W}),W.\u0275inj=m.cJS({}),W})();const Ys="browser",Mi="server";function Ks(W){return W===Mi}let vs=(()=>{class W{}return W.\u0275prov=(0,m.Yz7)({token:W,providedIn:"root",factory:()=>new lo((0,m.LFG)(we),window)}),W})();class lo{constructor(ue,Q){this.document=ue,this.window=Q,this.offset=()=>[0,0]}setOffset(ue){this.offset=Array.isArray(ue)?()=>ue:ue}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(ue){this.supportsScrolling()&&this.window.scrollTo(ue[0],ue[1])}scrollToAnchor(ue){if(!this.supportsScrolling())return;const Q=function jo(W,ue){const Q=W.getElementById(ue)||W.getElementsByName(ue)[0];if(Q)return Q;if("function"==typeof W.createTreeWalker&&W.body&&(W.body.createShadowRoot||W.body.attachShadow)){const Ie=W.createTreeWalker(W.body,NodeFilter.SHOW_ELEMENT);let et=Ie.currentNode;for(;et;){const Wt=et.shadowRoot;if(Wt){const hn=Wt.getElementById(ue)||Wt.querySelector(`[name="${ue}"]`);if(hn)return hn}et=Ie.nextNode()}}return null}(this.document,ue);Q&&(this.scrollToElement(Q),Q.focus())}setHistoryScrollRestoration(ue){if(this.supportScrollRestoration()){const Q=this.window.history;Q&&Q.scrollRestoration&&(Q.scrollRestoration=ue)}}scrollToElement(ue){const Q=ue.getBoundingClientRect(),Ie=Q.left+this.window.pageXOffset,et=Q.top+this.window.pageYOffset,Wt=this.offset();this.window.scrollTo(Ie-Wt[0],et-Wt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const ue=is(this.window.history)||is(Object.getPrototypeOf(this.window.history));return!(!ue||!ue.writable&&!ue.set)}catch(ue){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(ue){return!1}}}function is(W){return Object.getOwnPropertyDescriptor(W,"scrollRestoration")}class qs{}},4650:(pn,Pe,U)=>{"use strict";U.d(Pe,{$8M:()=>tt,$WT:()=>Tr,$Z:()=>Hm,AFp:()=>o_,AaK:()=>be,CHM:()=>T,CRH:()=>F1,CZH:()=>cv,CqO:()=>xp,D6c:()=>Tw,EJc:()=>GE,EiD:()=>_h,EpF:()=>p0,F$t:()=>y0,F4k:()=>Bg,FYo:()=>Rn,FiY:()=>or,G48:()=>dw,Gf:()=>P1,GfV:()=>di,GkF:()=>Ip,Gpc:()=>De,Hsn:()=>Ug,JOm:()=>pa,JVY:()=>kt,JZr:()=>Lt,KtG:()=>S,L6k:()=>Jt,LAX:()=>ur,LFG:()=>wn,Lbi:()=>$E,Lck:()=>ou,MAs:()=>_f,MMx:()=>Ty,NdJ:()=>Ap,OlP:()=>Bi,Oqu:()=>xd,P3R:()=>Rd,PXZ:()=>ow,Q6J:()=>_o,QGY:()=>Uh,Qsj:()=>$n,R0b:()=>td,RDi:()=>tu,Rgc:()=>Cm,SBq:()=>Mt,Sil:()=>WE,Suo:()=>k1,TTD:()=>co,TgZ:()=>Ef,Tol:()=>Ql,Udp:()=>Yg,VKq:()=>C1,X6Q:()=>lw,XFs:()=>sn,Xpm:()=>sr,Xts:()=>il,Y36:()=>Th,YKP:()=>qo,YNc:()=>Lg,Yjl:()=>wo,Yz7:()=>ke,Z0I:()=>Yt,ZZ4:()=>e1,_Bn:()=>Ta,_UZ:()=>Cp,_Vd:()=>Ue,_c5:()=>bw,_uU:()=>Qg,aQg:()=>t1,c2e:()=>HE,cJS:()=>Qt,cg1:()=>ed,dDg:()=>tw,dqk:()=>rr,eBb:()=>Kn,eFA:()=>y_,ekj:()=>Kg,eoX:()=>g_,f3M:()=>Un,g9A:()=>a_,h0i:()=>Eo,hGG:()=>Dw,hij:()=>Af,iGM:()=>N1,ifc:()=>Or,ip1:()=>i_,jDz:()=>g1,kL8:()=>cm,lG2:()=>ki,lqb:()=>i,lri:()=>f_,mCW:()=>Tu,n5z:()=>uc,oAB:()=>ti,oxw:()=>v0,pB0:()=>si,q3G:()=>js,q4F:()=>sa,qLn:()=>Kl,qOj:()=>Sg,qZA:()=>jd,qzn:()=>de,rWj:()=>p_,sBO:()=>hw,s_b:()=>sv,soG:()=>lv,tb:()=>u_,tp0:()=>oe,uIk:()=>Ng,vHH:()=>We,vpe:()=>Kd,wAp:()=>yi,xp6:()=>Jp,z2F:()=>dv,z3N:()=>L,zSh:()=>Nd,zs3:()=>Pd});var m=U(7579),J=U(727),H=U(9751),he=U(6451),le=U(3099);function we(u){for(let c in u)if(u[c]===we)return c;throw Error("Could not find renamed property on target object.")}function ye(u,c){for(const p in c)c.hasOwnProperty(p)&&!u.hasOwnProperty(p)&&(u[p]=c[p])}function be(u){if("string"==typeof u)return u;if(Array.isArray(u))return"["+u.map(be).join(", ")+"]";if(null==u)return""+u;if(u.overriddenName)return`${u.overriddenName}`;if(u.name)return`${u.name}`;const c=u.toString();if(null==c)return""+c;const p=c.indexOf("\n");return-1===p?c:c.substring(0,p)}function $e(u,c){return null==u||""===u?null===c?"":c:null==c||""===c?u:u+" "+c}const ge=we({__forward_ref__:we});function De(u){return u.__forward_ref__=De,u.toString=function(){return be(this())},u}function xe(u){return Ne(u)?u():u}function Ne(u){return"function"==typeof u&&u.hasOwnProperty(ge)&&u.__forward_ref__===De}function Xe(u){return u&&!!u.\u0275providers}const Lt="https://g.co/ng/security#xss";class We extends Error{constructor(c,p){super(Fe(c,p)),this.code=c}}function Fe(u,c){return`NG0${Math.abs(u)}${c?": "+c.trim():""}`}function Ce(u){return"string"==typeof u?u:null==u?"":String(u)}function Be(u,c){throw new We(-201,!1)}function me(u,c){null==u&&function te(u,c,p,y){throw new Error(`ASSERTION ERROR: ${u}`+(null==y?"":` [Expected=> ${p} ${y} ${c} <=Actual]`))}(c,u,null,"!=")}function ke(u){return{token:u.token,providedIn:u.providedIn||null,factory:u.factory,value:void 0}}function Qt(u){return{providers:u.providers||[],imports:u.imports||[]}}function Dt(u){return yn(u,Ar)||yn(u,Dn)}function Yt(u){return null!==Dt(u)}function yn(u,c){return u.hasOwnProperty(c)?u[c]:null}function Gn(u){return u&&(u.hasOwnProperty(Nn)||u.hasOwnProperty(En))?u[Nn]:null}const Ar=we({\u0275prov:we}),Nn=we({\u0275inj:we}),Dn=we({ngInjectableDef:we}),En=we({ngInjectorDef:we});var sn=(()=>((sn=sn||{})[sn.Default=0]="Default",sn[sn.Host=1]="Host",sn[sn.Self=2]="Self",sn[sn.SkipSelf=4]="SkipSelf",sn[sn.Optional=8]="Optional",sn))();let Ir;function br(u){const c=Ir;return Ir=u,c}function Kt(u,c,p){const y=Dt(u);return y&&"root"==y.providedIn?void 0===y.value?y.value=y.factory():y.value:p&sn.Optional?null:void 0!==c?c:void Be(be(u))}const rr=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),qn={},Wr="__NG_DI_FLAG__",cn="ngTempTokenPath",_i="ngTokenPath",Wi=/\n/gm,jr="\u0275",Pi="__source";let Rr;function Er(u){const c=Rr;return Rr=u,c}function ii(u,c=sn.Default){if(void 0===Rr)throw new We(-203,!1);return null===Rr?Kt(u,void 0,c):Rr.get(u,c&sn.Optional?null:void 0,c)}function wn(u,c=sn.Default){return(function Vr(){return Ir}()||ii)(xe(u),c)}function Un(u,c=sn.Default){return wn(u,dr(c))}function dr(u){return typeof u>"u"||"number"==typeof u?u:0|(u.optional&&8)|(u.host&&1)|(u.self&&2)|(u.skipSelf&&4)}function jn(u){const c=[];for(let p=0;p<u.length;p++){const y=xe(u[p]);if(Array.isArray(y)){if(0===y.length)throw new We(900,!1);let C,b=sn.Default;for(let P=0;P<y.length;P++){const G=y[P],X=He(G);"number"==typeof X?-1===X?C=G.token:b|=X:C=G}c.push(wn(C,b))}else c.push(wn(y))}return c}function hr(u,c){return u[Wr]=c,u.prototype[Wr]=c,u}function He(u){return u[Wr]}function qt(u){return{toString:u}.toString()}var $t=(()=>(($t=$t||{})[$t.OnPush=0]="OnPush",$t[$t.Default=1]="Default",$t))(),Or=(()=>{return(u=Or||(Or={}))[u.Emulated=0]="Emulated",u[u.None=2]="None",u[u.ShadowDom=3]="ShadowDom",Or;var u})();const Zr={},fr=[],vi=we({\u0275cmp:we}),St=we({\u0275dir:we}),vt=we({\u0275pipe:we}),Je=we({\u0275mod:we}),wt=we({\u0275fac:we}),an=we({__NG_ELEMENT_ID__:we});let Tn=0;function sr(u){return qt(()=>{const p=!0===u.standalone,y={},C={type:u.type,providersResolver:null,decls:u.decls,vars:u.vars,factory:null,template:u.template||null,consts:u.consts||null,ngContentSelectors:u.ngContentSelectors,hostBindings:u.hostBindings||null,hostVars:u.hostVars||0,hostAttrs:u.hostAttrs||null,contentQueries:u.contentQueries||null,declaredInputs:y,inputs:null,outputs:null,exportAs:u.exportAs||null,onPush:u.changeDetection===$t.OnPush,directiveDefs:null,pipeDefs:null,standalone:p,dependencies:p&&u.dependencies||null,getStandaloneInjector:null,selectors:u.selectors||fr,viewQuery:u.viewQuery||null,features:u.features||null,data:u.data||{},encapsulation:u.encapsulation||Or.Emulated,id:"c"+Tn++,styles:u.styles||fr,_:null,setInput:null,schemas:u.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},b=u.dependencies,P=u.features;return C.inputs=pi(u.inputs,y),C.outputs=pi(u.outputs),P&&P.forEach(G=>G(C)),C.directiveDefs=b?()=>("function"==typeof b?b():b).map(Yr).filter(Ei):null,C.pipeDefs=b?()=>("function"==typeof b?b():b).map(Oi).filter(Ei):null,C})}function Yr(u){return Mr(u)||pr(u)}function Ei(u){return null!==u}function ti(u){return qt(()=>({type:u.type,bootstrap:u.bootstrap||fr,declarations:u.declarations||fr,imports:u.imports||fr,exports:u.exports||fr,transitiveCompileScopes:null,schemas:u.schemas||null,id:u.id||null}))}function pi(u,c){if(null==u)return Zr;const p={};for(const y in u)if(u.hasOwnProperty(y)){let C=u[y],b=C;Array.isArray(C)&&(b=C[1],C=C[0]),p[C]=y,c&&(c[C]=b)}return p}const ki=sr;function wo(u){return{type:u.type,name:u.name,factory:null,pure:!1!==u.pure,standalone:!0===u.standalone,onDestroy:u.type.prototype.ngOnDestroy||null}}function Mr(u){return u[vi]||null}function pr(u){return u[St]||null}function Oi(u){return u[vt]||null}function Tr(u){const c=Mr(u)||pr(u)||Oi(u);return null!==c&&c.standalone}function oi(u,c){const p=u[Je]||null;if(!p&&!0===c)throw new Error(`Type ${be(u)} does not have '\u0275mod' property.`);return p}const Ln=0,Hn=1,gr=2,Gr=3,Vi=4,Zi=5,Fi=6,Se=7,je=8,Rt=9,Ot=10,Bt=11,Ge=12,xt=13,Ut=14,Zt=15,on=16,In=17,Zn=18,Jn=19,ci=20,Kr=21,_t=22,Ft=1,Ht=2,fn=7,Sn=8,er=9,mr=10;function Yi(u){return Array.isArray(u)&&"object"==typeof u[Ft]}function ji(u){return Array.isArray(u)&&!0===u[Ft]}function uo(u){return 0!=(4&u.flags)}function Xr(u){return u.componentOffset>-1}function Qr(u){return 1==(1&u.flags)}function Si(u){return null!==u.template}function Os(u){return 0!=(256&u[gr])}function $r(u,c){return u.hasOwnProperty(wt)?u[wt]:null}class Ao{constructor(c,p,y){this.previousValue=c,this.currentValue=p,this.firstChange=y}isFirstChange(){return this.firstChange}}function co(){return vs}function vs(u){return u.type.prototype.ngOnChanges&&(u.setInput=is),lo}function lo(){const u=Qo(this),c=null==u?void 0:u.current;if(c){const p=u.previous;if(p===Zr)u.previous=c;else for(let y in c)p[y]=c[y];u.current=null,this.ngOnChanges(c)}}function is(u,c,p,y){const C=this.declaredInputs[p],b=Qo(u)||function qs(u,c){return u[jo]=c}(u,{previous:Zr,current:null}),P=b.current||(b.current={}),G=b.previous,X=G[C];P[C]=new Ao(X&&X.currentValue,c,G===Zr),u[y]=c}co.ngInherit=!0;const jo="__ngSimpleChanges__";function Qo(u){return u[jo]||null}const Xi=function(u,c,p){};function Ki(u){for(;Array.isArray(u);)u=u[Ln];return u}function Zs(u,c){return Ki(c[u])}function So(u,c){return Ki(c[u.index])}function ls(u,c){return u.data[c]}function io(u,c){const p=c[u];return Yi(p)?p:p[Ln]}function Qi(u){return 64==(64&u[gr])}function bo(u,c){return null==c?null:u[c]}function Fr(u){u[Zn]=0}function va(u,c){u[Zi]+=c;let p=u,y=u[Gr];for(;null!==y&&(1===c&&1===p[Zi]||-1===c&&0===p[Zi]);)y[Zi]+=c,p=y,y=y[Gr]}const Br={lFrame:as(null),bindingsEnabled:!0};function $s(){return Br.bindingsEnabled}function Y(){return Br.lFrame.lView}function w(){return Br.lFrame.tView}function T(u){return Br.lFrame.contextLView=u,u[je]}function S(u){return Br.lFrame.contextLView=null,u}function j(){let u=ve();for(;null!==u&&64===u.type;)u=u.parent;return u}function ve(){return Br.lFrame.currentTNode}function _n(u,c){const p=Br.lFrame;p.currentTNode=u,p.isParent=c}function Vn(){return Br.lFrame.isParent}function wr(){Br.lFrame.isParent=!1}function Xt(){return Br.lFrame.bindingIndex++}function dn(u){const c=Br.lFrame,p=c.bindingIndex;return c.bindingIndex=c.bindingIndex+u,p}function Nr(u,c){const p=Br.lFrame;p.bindingIndex=p.bindingRootIndex=u,go(c)}function go(u){Br.lFrame.currentDirectiveIndex=u}function Ji(){return Br.lFrame.currentQueryIndex}function oo(u){Br.lFrame.currentQueryIndex=u}function Po(u){const c=u[Hn];return 2===c.type?c.declTNode:1===c.type?u[Fi]:null}function Do(u,c,p){if(p&sn.SkipSelf){let C=c,b=u;for(;!(C=C.parent,null!==C||p&sn.Host||(C=Po(b),null===C||(b=b[Zt],10&C.type))););if(null===C)return!1;c=C,u=b}const y=Br.lFrame=ws();return y.currentTNode=c,y.lView=u,!0}function mo(u){const c=ws(),p=u[Hn];Br.lFrame=c,c.currentTNode=p.firstChild,c.lView=u,c.tView=p,c.contextLView=u,c.bindingIndex=p.bindingStartIndex,c.inI18n=!1}function ws(){const u=Br.lFrame,c=null===u?null:u.child;return null===c?as(u):c}function as(u){const c={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:u,child:null,inI18n:!1};return null!==u&&(u.child=c),c}function To(){const u=Br.lFrame;return Br.lFrame=u.parent,u.currentTNode=null,u.lView=null,u}const Jo=To;function Xs(){const u=To();u.isParent=!0,u.tView=null,u.selectedIndex=-1,u.contextLView=null,u.elementDepthCount=0,u.currentDirectiveIndex=-1,u.currentNamespace=null,u.bindingRootIndex=-1,u.bindingIndex=-1,u.currentQueryIndex=0}function ho(){return Br.lFrame.selectedIndex}function Js(u){Br.lFrame.selectedIndex=u}function Ti(){const u=Br.lFrame;return ls(u.tView,u.selectedIndex)}function za(u,c){for(let p=c.directiveStart,y=c.directiveEnd;p<y;p++){const b=u.data[p].type.prototype,{ngAfterContentInit:P,ngAfterContentChecked:G,ngAfterViewInit:X,ngAfterViewChecked:ce,ngOnDestroy:Re}=b;P&&(u.contentHooks||(u.contentHooks=[])).push(-p,P),G&&((u.contentHooks||(u.contentHooks=[])).push(p,G),(u.contentCheckHooks||(u.contentCheckHooks=[])).push(p,G)),X&&(u.viewHooks||(u.viewHooks=[])).push(-p,X),ce&&((u.viewHooks||(u.viewHooks=[])).push(p,ce),(u.viewCheckHooks||(u.viewCheckHooks=[])).push(p,ce)),null!=Re&&(u.destroyHooks||(u.destroyHooks=[])).push(p,Re)}}function ea(u,c,p){ue(u,c,3,p)}function Ya(u,c,p,y){(3&u[gr])===p&&ue(u,c,p,y)}function W(u,c){let p=u[gr];(3&p)===c&&(p&=2047,p+=1,u[gr]=p)}function ue(u,c,p,y){const b=null!=y?y:-1,P=c.length-1;let G=0;for(let X=void 0!==y?65535&u[Zn]:0;X<P;X++)if("number"==typeof c[X+1]){if(G=c[X],null!=y&&G>=y)break}else c[X]<0&&(u[Zn]+=65536),(G<b||-1==b)&&(Q(u,p,c,X),u[Zn]=(4294901760&u[Zn])+X+2),X++}function Q(u,c,p,y){const C=p[y]<0,b=p[y+1],G=u[C?-p[y]:p[y]];if(C){if(u[gr]>>11<u[Zn]>>16&&(3&u[gr])===c){u[gr]+=2048,Xi(4,G,b);try{b.call(G)}finally{Xi(5,G,b)}}}else{Xi(4,G,b);try{b.call(G)}finally{Xi(5,G,b)}}}const Ie=-1;class et{constructor(c,p,y){this.factory=c,this.resolving=!1,this.canSeeViewProviders=p,this.injectImpl=y}}function Cn(u,c,p){let y=0;for(;y<p.length;){const C=p[y];if("number"==typeof C){if(0!==C)break;y++;const b=p[y++],P=p[y++],G=p[y++];u.setAttribute(c,P,G,b)}else{const b=C,P=p[++y];As(b)?u.setProperty(c,b,P):u.setAttribute(c,b,P),y++}}return y}function Xn(u){return 3===u||4===u||6===u}function As(u){return 64===u.charCodeAt(0)}function Fn(u,c){if(null!==c&&0!==c.length)if(null===u||0===u.length)u=c.slice();else{let p=-1;for(let y=0;y<c.length;y++){const C=c[y];"number"==typeof C?p=C:0===p||nn(u,p,C,null,-1===p||2===p?c[++y]:null)}}return u}function nn(u,c,p,y,C){let b=0,P=u.length;if(-1===c)P=-1;else for(;b<u.length;){const G=u[b++];if("number"==typeof G){if(G===c){P=-1;break}if(G>c){P=b-1;break}}}for(;b<u.length;){const G=u[b];if("number"==typeof G)break;if(G===p){if(null===y)return void(null!==C&&(u[b+1]=C));if(y===u[b+1])return void(u[b+2]=C)}b++,null!==y&&b++,null!==C&&b++}-1!==P&&(u.splice(P,0,c),b=P+1),u.splice(b++,0,p),null!==y&&u.splice(b++,0,y),null!==C&&u.splice(b++,0,C)}function vn(u){return u!==Ie}function Ur(u){return 32767&u}function Ea(u,c){let p=function bi(u){return u>>16}(u),y=c;for(;p>0;)y=y[Zt],p--;return y}let Va=!0;function qu(u){const c=Va;return Va=u,c}const Ka=255,su=5;let ac=0;const wa={};function fo(u,c){const p=Ra(u,c);if(-1!==p)return p;const y=c[Hn];y.firstCreatePass&&(u.injectorIndex=c.length,qr(y.data,u),qr(c,null),qr(y.blueprint,null));const C=Zu(u,c),b=u.injectorIndex;if(vn(C)){const P=Ur(C),G=Ea(C,c),X=G[Hn].data;for(let ce=0;ce<8;ce++)c[b+ce]=G[P+ce]|X[P+ce]}return c[b+8]=C,b}function qr(u,c){u.push(0,0,0,0,0,0,0,0,c)}function Ra(u,c){return-1===u.injectorIndex||u.parent&&u.parent.injectorIndex===u.injectorIndex||null===c[u.injectorIndex+8]?-1:u.injectorIndex}function Zu(u,c){if(u.parent&&-1!==u.parent.injectorIndex)return u.parent.injectorIndex;let p=0,y=null,C=c;for(;null!==C;){if(y=uu(C),null===y)return Ie;if(p++,C=C[Zt],-1!==y.injectorIndex)return y.injectorIndex|p<<16}return Ie}function eo(u,c,p){!function yu(u,c,p){let y;"string"==typeof p?y=p.charCodeAt(0)||0:p.hasOwnProperty(an)&&(y=p[an]),null==y&&(y=p[an]=ac++);const C=y&Ka;c.data[u+(C>>su)]|=1<<C}(u,c,p)}function Oa(u,c,p){if(p&sn.Optional||void 0!==u)return u;Be()}function Ri(u,c,p,y){if(p&sn.Optional&&void 0===y&&(y=null),!(p&(sn.Self|sn.Host))){const C=u[Rt],b=br(void 0);try{return C?C.get(c,y,p&sn.Optional):Kt(c,y,p&sn.Optional)}finally{br(b)}}return Oa(y,0,p)}function Yc(u,c,p,y=sn.Default,C){if(null!==u){if(1024&c[gr]){const P=function jt(u,c,p,y,C){let b=u,P=c;for(;null!==b&&null!==P&&1024&P[gr]&&!(256&P[gr]);){const G=Li(b,P,p,y|sn.Self,wa);if(G!==wa)return G;let X=b.parent;if(!X){const ce=P[Kr];if(ce){const Re=ce.get(p,wa,y);if(Re!==wa)return Re}X=uu(P),P=P[Zt]}b=X}return C}(u,c,p,y,wa);if(P!==wa)return P}const b=Li(u,c,p,y,wa);if(b!==wa)return b}return Ri(c,p,y,C)}function Li(u,c,p,y,C){const b=function qa(u){if("string"==typeof u)return u.charCodeAt(0)||0;const c=u.hasOwnProperty(an)?u[an]:void 0;return"number"==typeof c?c>=0?c&Ka:au:c}(p);if("function"==typeof b){if(!Do(c,u,y))return y&sn.Host?Oa(C,0,y):Ri(c,p,y,C);try{const P=b(y);if(null!=P||y&sn.Optional)return P;Be()}finally{Jo()}}else if("number"==typeof b){let P=null,G=Ra(u,c),X=Ie,ce=y&sn.Host?c[on][Fi]:null;for((-1===G||y&sn.SkipSelf)&&(X=-1===G?Zu(u,c):c[G+8],X!==Ie&&la(y,!1)?(P=c[Hn],G=Ur(X),c=Ea(X,c)):G=-1);-1!==G;){const Re=c[Hn];if($a(b,G,Re.data)){const at=Yn(G,c,p,P,y,ce);if(at!==wa)return at}X=c[G+8],X!==Ie&&la(y,c[Hn].data[G+8]===ce)&&$a(b,G,c)?(P=Re,G=Ur(X),c=Ea(X,c)):G=-1}}return C}function Yn(u,c,p,y,C,b){const P=c[Hn],G=P.data[u+8],Re=_u(G,P,p,null==y?Xr(G)&&Va:y!=P&&0!=(3&G.type),C&sn.Host&&b===G);return null!==Re?qi(c,P,Re,G):wa}function _u(u,c,p,y,C){const b=u.providerIndexes,P=c.data,G=1048575&b,X=u.directiveStart,Re=b>>20,Pt=C?G+Re:u.directiveEnd;for(let rn=y?G:G+Re;rn<Pt;rn++){const bn=P[rn];if(rn<X&&p===bn||rn>=X&&bn.type===p)return rn}if(C){const rn=P[X];if(rn&&Si(rn)&&rn.type===p)return X}return null}function qi(u,c,p,y){let C=u[p];const b=c.data;if(function Wt(u){return u instanceof et}(C)){const P=C;P.resolving&&function At(u,c){const p=c?`. Dependency path: ${c.join(" > ")} > ${u}`:"";throw new We(-200,`Circular dependency in DI detected for ${u}${p}`)}(function ct(u){return"function"==typeof u?u.name||u.toString():"object"==typeof u&&null!=u&&"function"==typeof u.type?u.type.name||u.type.toString():Ce(u)}(b[p]));const G=qu(P.canSeeViewProviders);P.resolving=!0;const X=P.injectImpl?br(P.injectImpl):null;Do(u,y,sn.Default);try{C=u[p]=P.factory(void 0,b,u,y),c.firstCreatePass&&p>=y.directiveStart&&function _a(u,c,p){const{ngOnChanges:y,ngOnInit:C,ngDoCheck:b}=c.type.prototype;if(y){const P=vs(c);(p.preOrderHooks||(p.preOrderHooks=[])).push(u,P),(p.preOrderCheckHooks||(p.preOrderCheckHooks=[])).push(u,P)}C&&(p.preOrderHooks||(p.preOrderHooks=[])).push(0-u,C),b&&((p.preOrderHooks||(p.preOrderHooks=[])).push(u,b),(p.preOrderCheckHooks||(p.preOrderCheckHooks=[])).push(u,b))}(p,b[p],c)}finally{null!==X&&br(X),qu(G),P.resolving=!1,Jo()}}return C}function $a(u,c,p){return!!(p[c+(u>>su)]&1<<u)}function la(u,c){return!(u&sn.Self||u&sn.Host&&c)}class da{constructor(c,p){this._tNode=c,this._lView=p}get(c,p,y){return Yc(this._tNode,this._lView,c,dr(y),p)}}function au(){return new da(j(),Y())}function uc(u){return qt(()=>{const c=u.prototype.constructor,p=c[wt]||bc(c),y=Object.prototype;let C=Object.getPrototypeOf(u.prototype).constructor;for(;C&&C!==y;){const b=C[wt]||bc(C);if(b&&b!==p)return b;C=Object.getPrototypeOf(C)}return b=>new b})}function bc(u){return Ne(u)?()=>{const c=bc(xe(u));return c&&c()}:$r(u)}function uu(u){const c=u[Hn],p=c.type;return 2===p?c.declTNode:1===p?u[Fi]:null}function tt(u){return function Lr(u,c){if("class"===c)return u.classes;if("style"===c)return u.styles;const p=u.attrs;if(p){const y=p.length;let C=0;for(;C<y;){const b=p[C];if(Xn(b))break;if(0===b)C+=2;else if("number"==typeof b)for(C++;C<y&&"string"==typeof p[C];)C++;else{if(b===c)return p[C+1];C+=2}}}return null}(j(),u)}const Ma="__parameters__";function zo(u,c,p){return qt(()=>{const y=function ku(u){return function(...p){if(u){const y=u(...p);for(const C in y)this[C]=y[C]}}}(c);function C(...b){if(this instanceof C)return y.apply(this,b),this;const P=new C(...b);return G.annotation=P,G;function G(X,ce,Re){const at=X.hasOwnProperty(Ma)?X[Ma]:Object.defineProperty(X,Ma,{value:[]})[Ma];for(;at.length<=Re;)at.push(null);return(at[Re]=at[Re]||[]).push(P),X}}return p&&(C.prototype=Object.create(p.prototype)),C.prototype.ngMetadataName=u,C.annotationCls=C,C})}class Bi{constructor(c,p){this._desc=c,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof p?this.__NG_ELEMENT_ID__=p:void 0!==p&&(this.\u0275prov=ke({token:this,providedIn:p.providedIn||"root",factory:p.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Pa(u,c){u.forEach(p=>Array.isArray(p)?Pa(p,c):c(p))}function so(u,c,p){c>=u.length?u.push(p):u.splice(c,0,p)}function Za(u,c){return c>=u.length-1?u.pop():u.splice(c,1)[0]}function Fs(u,c){const p=[];for(let y=0;y<u;y++)p.push(c);return p}function Oo(u,c,p){let y=ds(u,c);return y>=0?u[1|y]=p:(y=~y,function cc(u,c,p,y){let C=u.length;if(C==c)u.push(p,y);else if(1===C)u.push(y,u[0]),u[0]=p;else{for(C--,u.push(u[C-1],u[C]);C>c;)u[C]=u[C-2],C--;u[c]=p,u[c+1]=y}}(u,y,c,p)),y}function ka(u,c){const p=ds(u,c);if(p>=0)return u[1|p]}function ds(u,c){return function B(u,c,p){let y=0,C=u.length>>p;for(;C!==y;){const b=y+(C-y>>1),P=u[b<<p];if(c===P)return b<<p;P>c?C=b:y=b+1}return~(C<<p)}(u,c,1)}const or=hr(zo("Optional"),8),oe=hr(zo("SkipSelf"),4);var pa=(()=>((pa=pa||{})[pa.Important=1]="Important",pa[pa.DashCase=2]="DashCase",pa))();const xa=new Map;let Bu=0;const _l="__ngContext__";function na(u,c){Yi(c)?(u[_l]=c[ci],function Uu(u){xa.set(u[ci],u)}(c)):u[_l]=c}let El;function ld(u,c){return El(u,c)}function xu(u){const c=u[Gr];return ji(c)?c[Gr]:c}function du(u){return hu(u[xt])}function wl(u){return hu(u[Vi])}function hu(u){for(;null!==u&&!ji(u);)u=u[Vi];return u}function ga(u,c,p,y,C){if(null!=y){let b,P=!1;ji(y)?b=y:Yi(y)&&(P=!0,y=y[Ln]);const G=Ki(y);0===u&&null!==p?null==C?Qc(c,p,G):nc(c,p,G,C||null,!0):1===u&&null!==p?nc(c,p,G,C||null,!0):2===u?function Hu(u,c,p){const y=_c(u,c);y&&function ro(u,c,p,y){u.removeChild(c,p,y)}(u,y,c,p)}(c,G,P):3===u&&c.destroyNode(G),null!=b&&function ju(u,c,p,y,C){const b=p[fn];b!==Ki(p)&&ga(c,u,y,b,C);for(let G=mr;G<p.length;G++){const X=p[G];xl(X[Hn],X,u,c,y,b)}}(c,u,b,p,C)}}function Cl(u,c,p){return u.createElement(c,p)}function Lc(u,c){const p=u[er],y=p.indexOf(c),C=c[Gr];512&c[gr]&&(c[gr]&=-513,va(C,-1)),p.splice(y,1)}function Xc(u,c){if(u.length<=mr)return;const p=mr+c,y=u[p];if(y){const C=y[In];null!==C&&C!==u&&Lc(C,y),c>0&&(u[p-1][Vi]=y[Vi]);const b=Za(u,mr+c);!function Io(u,c){xl(u,c,c[Bt],2,null,null),c[Ln]=null,c[Fi]=null}(y[Hn],y);const P=b[Jn];null!==P&&P.detachView(b[Hn]),y[Gr]=null,y[Vi]=null,y[gr]&=-65}return y}function yc(u,c){if(!(128&c[gr])){const p=c[Bt];p.destroyNode&&xl(u,c,p,3,null,null),function ko(u){let c=u[xt];if(!c)return Au(u[Hn],u);for(;c;){let p=null;if(Yi(c))p=c[xt];else{const y=c[mr];y&&(p=y)}if(!p){for(;c&&!c[Vi]&&c!==u;)Yi(c)&&Au(c[Hn],c),c=c[Gr];null===c&&(c=u),Yi(c)&&Au(c[Hn],c),p=c&&c[Vi]}c=p}}(c)}}function Au(u,c){if(!(128&c[gr])){c[gr]&=-65,c[gr]|=128,function qd(u,c){let p;if(null!=u&&null!=(p=u.destroyHooks))for(let y=0;y<p.length;y+=2){const C=c[p[y]];if(!(C instanceof et)){const b=p[y+1];if(Array.isArray(b))for(let P=0;P<b.length;P+=2){const G=C[b[P]],X=b[P+1];Xi(4,G,X);try{X.call(G)}finally{Xi(5,G,X)}}else{Xi(4,C,b);try{b.call(C)}finally{Xi(5,C,b)}}}}}(u,c),function Bc(u,c){const p=u.cleanup,y=c[Se];let C=-1;if(null!==p)for(let b=0;b<p.length-1;b+=2)if("string"==typeof p[b]){const P=p[b+3];P>=0?y[C=P]():y[C=-P].unsubscribe(),b+=2}else{const P=y[C=p[b+1]];p[b].call(P)}if(null!==y){for(let b=C+1;b<y.length;b++)(0,y[b])();c[Se]=null}}(u,c),1===c[Hn].type&&c[Bt].destroy();const p=c[In];if(null!==p&&ji(c[Gr])){p!==c[Gr]&&Lc(p,c);const y=c[Jn];null!==y&&y.detachView(u)}!function bs(u){xa.delete(u[ci])}(c)}}function Hl(u,c,p){return function Uc(u,c,p){let y=c;for(;null!==y&&40&y.type;)y=(c=y).parent;if(null===y)return p[Ln];{const{componentOffset:C}=y;if(C>-1){const{encapsulation:b}=u.data[y.directiveStart+C];if(b===Or.None||b===Or.Emulated)return null}return So(y,p)}}(u,c.parent,p)}function nc(u,c,p,y,C){u.insertBefore(c,p,y,C)}function Qc(u,c,p){u.appendChild(c,p)}function Is(u,c,p,y,C){null!==y?nc(u,c,p,y,C):Qc(u,c,p)}function _c(u,c){return u.parentNode(c)}function jl(u,c,p){return Su(u,c,p)}let fu,Sl,wc,$o,Su=function Ko(u,c,p){return 40&u.type?So(u,p):null};function Hs(u,c,p,y){const C=Hl(u,y,c),b=c[Bt],G=jl(y.parent||c[Fi],y,c);if(null!=C)if(Array.isArray(p))for(let X=0;X<p.length;X++)Is(b,C,p[X],G,!1);else Is(b,C,p,G,!1);void 0!==fu&&fu(b,y,c,p,C)}function Jc(u,c){if(null!==c){const p=c.type;if(3&p)return So(c,u);if(4&p)return Aa(-1,u[c.index]);if(8&p){const y=c.child;if(null!==y)return Jc(u,y);{const C=u[c.index];return ji(C)?Aa(-1,C):Ki(C)}}if(32&p)return ld(c,u)()||Ki(u[c.index]);{const y=el(u,c);return null!==y?Array.isArray(y)?y[0]:Jc(xu(u[on]),y):Jc(u,c.next)}}return null}function el(u,c){return null!==c?u[on][Fi].projection[c.projection]:null}function Aa(u,c){const p=mr+u+1;if(p<c.length){const y=c[p],C=y[Hn].firstChild;if(null!==C)return Jc(y,C)}return c[fn]}function xi(u,c,p,y,C,b,P){for(;null!=p;){const G=y[p.index],X=p.type;if(P&&0===c&&(G&&na(Ki(G),y),p.flags|=2),32!=(32&p.flags))if(8&X)xi(u,c,p.child,y,C,b,!1),ga(c,u,C,G,b);else if(32&X){const ce=ld(p,y);let Re;for(;Re=ce();)ga(c,u,C,Re,b);ga(c,u,C,G,b)}else 16&X?bu(u,c,y,p,C,b):ga(c,u,C,G,b);p=P?p.projectionNext:p.next}}function xl(u,c,p,y,C,b){xi(p,y,u.firstChild,c,C,b,!1)}function bu(u,c,p,y,C,b){const P=p[on],X=P[Fi].projection[y.projection];if(Array.isArray(X))for(let ce=0;ce<X.length;ce++)ga(c,u,C,X[ce],b);else xi(u,c,X,P[Gr],C,b,!0)}function eu(u,c,p){""===p?u.removeAttribute(c,"class"):u.setAttribute(c,"class",p)}function Al(u,c,p){const{mergedAttrs:y,classes:C,styles:b}=p;null!==y&&Cn(u,c,y),null!==C&&eu(u,c,C),null!==b&&function $c(u,c,p){u.setAttribute(c,"style",p)}(u,c,b)}function Ec(u){var c;return(null===(c=function bl(){if(void 0===Sl&&(Sl=null,rr.trustedTypes))try{Sl=rr.trustedTypes.createPolicy("angular",{createHTML:u=>u,createScript:u=>u,createScriptURL:u=>u})}catch(u){}return Sl}())||void 0===c?void 0:c.createHTML(u))||u}function tu(u){wc=u}function Fo(u){var c;return(null===(c=function ao(){if(void 0===$o&&($o=null,rr.trustedTypes))try{$o=rr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:u=>u,createScript:u=>u,createScriptURL:u=>u})}catch(u){}return $o}())||void 0===c?void 0:c.createScriptURL(u))||u}class ts{constructor(c){this.changingThisBreaksApplicationSecurity=c}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Lt})`}}class Sa extends ts{getTypeName(){return"HTML"}}class Tl extends ts{getTypeName(){return"Style"}}class N extends ts{getTypeName(){return"Script"}}class I extends ts{getTypeName(){return"URL"}}class D extends ts{getTypeName(){return"ResourceURL"}}function L(u){return u instanceof ts?u.changingThisBreaksApplicationSecurity:u}function de(u,c){const p=function Oe(u){return u instanceof ts&&u.getTypeName()||null}(u);if(null!=p&&p!==c){if("ResourceURL"===p&&"URL"===c)return!0;throw new Error(`Required a safe ${c}, got a ${p} (see ${Lt})`)}return p===c}function kt(u){return new Sa(u)}function Jt(u){return new Tl(u)}function Kn(u){return new N(u)}function ur(u){return new I(u)}function si(u){return new D(u)}class Bs{constructor(c){this.inertDocumentHelper=c}getInertBodyElement(c){c="<body><remove></remove>"+c;try{const p=(new window.DOMParser).parseFromString(Ec(c),"text/html").body;return null===p?this.inertDocumentHelper.getInertBodyElement(c):(p.removeChild(p.firstChild),p)}catch(p){return null}}}class Du{constructor(c){this.defaultDoc=c,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(c){const p=this.inertDocument.createElement("template");return p.innerHTML=Ec(c),p}}const Td=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Tu(u){return(u=String(u)).match(Td)?u:"unsafe:"+u}function ai(u){const c={};for(const p of u.split(","))c[p]=!0;return c}function rc(...u){const c={};for(const p of u)for(const y in p)p.hasOwnProperty(y)&&(c[y]=!0);return c}const nl=ai("area,br,col,hr,img,wbr"),Gl=ai("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ba=ai("rp,rt"),zu=rc(nl,rc(Gl,ai("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),rc(ba,ai("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),rc(ba,Gl)),rl=ai("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yh=rc(rl,ai("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ai("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),pu=ai("script,style,template");class Xh{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(c){let p=c.firstChild,y=!0;for(;p;)if(p.nodeType===Node.ELEMENT_NODE?y=this.startElement(p):p.nodeType===Node.TEXT_NODE?this.chars(p.nodeValue):this.sanitizedSomething=!0,y&&p.firstChild)p=p.firstChild;else for(;p;){p.nodeType===Node.ELEMENT_NODE&&this.endElement(p);let C=this.checkClobberedElement(p,p.nextSibling);if(C){p=C;break}p=this.checkClobberedElement(p,p.parentNode)}return this.buf.join("")}startElement(c){const p=c.nodeName.toLowerCase();if(!zu.hasOwnProperty(p))return this.sanitizedSomething=!0,!pu.hasOwnProperty(p);this.buf.push("<"),this.buf.push(p);const y=c.attributes;for(let C=0;C<y.length;C++){const b=y.item(C),P=b.name,G=P.toLowerCase();if(!yh.hasOwnProperty(G)){this.sanitizedSomething=!0;continue}let X=b.value;rl[G]&&(X=Tu(X)),this.buf.push(" ",P,'="',Gf(X),'"')}return this.buf.push(">"),!0}endElement(c){const p=c.nodeName.toLowerCase();zu.hasOwnProperty(p)&&!nl.hasOwnProperty(p)&&(this.buf.push("</"),this.buf.push(p),this.buf.push(">"))}chars(c){this.buf.push(Gf(c))}checkClobberedElement(c,p){if(p&&(c.compareDocumentPosition(p)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${c.outerHTML}`);return p}}const Wu=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,jf=/([^\#-~ |!])/g;function Gf(u){return u.replace(/&/g,"&amp;").replace(Wu,function(c){return"&#"+(1024*(c.charCodeAt(0)-55296)+(c.charCodeAt(1)-56320)+65536)+";"}).replace(jf,function(c){return"&#"+c.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Xd;function _h(u,c){let p=null;try{Xd=Xd||function zr(u){const c=new Du(u);return function Rl(){try{return!!(new window.DOMParser).parseFromString(Ec(""),"text/html")}catch(u){return!1}}()?new Bs(c):c}(u);let y=c?String(c):"";p=Xd.getInertBodyElement(y);let C=5,b=y;do{if(0===C)throw new Error("Failed to sanitize html because the input is unstable");C--,y=b,b=p.innerHTML,p=Xd.getInertBodyElement(y)}while(y!==b);return Ec((new Xh).sanitizeChildren(Qd(p)||p))}finally{if(p){const y=Qd(p)||p;for(;y.firstChild;)y.removeChild(y.firstChild)}}}function Qd(u){return"content"in u&&function Eh(u){return u.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===u.nodeName}(u)?u.content:null}var js=(()=>((js=js||{})[js.NONE=0]="NONE",js[js.HTML=1]="HTML",js[js.STYLE=2]="STYLE",js[js.SCRIPT=3]="SCRIPT",js[js.URL=4]="URL",js[js.RESOURCE_URL=5]="RESOURCE_URL",js))();function wh(u){const c=oa();return c?c.sanitize(js.URL,u)||"":de(u,"URL")?L(u):Tu(Ce(u))}function Cc(u){const c=oa();if(c)return Fo(c.sanitize(js.RESOURCE_URL,u)||"");if(de(u,"ResourceURL"))return Fo(L(u));throw new We(904,!1)}function Rd(u,c,p){return function ef(u,c){return"src"===c&&("embed"===u||"frame"===u||"iframe"===u||"media"===u||"script"===u)||"href"===c&&("base"===u||"link"===u)?Cc:wh}(c,p)(u)}function oa(){const u=Y();return u&&u[Ge]}const il=new Bi("ENVIRONMENT_INITIALIZER"),ma=new Bi("INJECTOR",-1),Od=new Bi("INJECTOR_DEF_TYPES");class oc{get(c,p=qn){if(p===qn){const y=new Error(`NullInjectorError: No provider for ${be(c)}!`);throw y.name="NullInjectorError",y}return p}}function Ol(...u){return{\u0275providers:Hc(0,u),\u0275fromNgModule:!0}}function Hc(u,...c){const p=[],y=new Set;let C;return Pa(c,b=>{const P=b;mu(P,p,[],y)&&(C||(C=[]),C.push(P))}),void 0!==C&&jc(C,p),p}function jc(u,c){for(let p=0;p<u.length;p++){const{providers:C}=u[p];fd(C,b=>{c.push(b)})}}function mu(u,c,p,y){if(!(u=xe(u)))return!1;let C=null,b=Gn(u);const P=!b&&Mr(u);if(b||P){if(P&&!P.standalone)return!1;C=u}else{const X=u.ngModule;if(b=Gn(X),!b)return!1;C=X}const G=y.has(C);if(P){if(G)return!1;if(y.add(C),P.dependencies){const X="function"==typeof P.dependencies?P.dependencies():P.dependencies;for(const ce of X)mu(ce,c,p,y)}}else{if(!b)return!1;{if(null!=b.imports&&!G){let ce;y.add(C);try{Pa(b.imports,Re=>{mu(Re,c,p,y)&&(ce||(ce=[]),ce.push(Re))})}finally{}void 0!==ce&&jc(ce,c)}if(!G){const ce=$r(C)||(()=>new C);c.push({provide:C,useFactory:ce,deps:fr},{provide:Od,useValue:C,multi:!0},{provide:il,useValue:()=>wn(C),multi:!0})}const X=b.providers;null==X||G||fd(X,Re=>{c.push(Re)})}}return C!==u&&void 0!==u.providers}function fd(u,c){for(let p of u)Xe(p)&&(p=p.\u0275providers),Array.isArray(p)?fd(p,c):c(p)}const Jd=we({provide:String,useValue:we});function pd(u){return null!==u&&"object"==typeof u&&Jd in u}function ol(u){return"function"==typeof u}const Nd=new Bi("Set Injector scope."),Nl={},sl={};let al;function eh(){return void 0===al&&(al=new oc),al}class i{}class t extends i{get destroyed(){return this._destroyed}constructor(c,p,y,C){super(),this.parent=p,this.source=y,this.scopes=C,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,E(c,P=>this.processProvider(P)),this.records.set(ma,a(void 0,this)),C.has("environment")&&this.records.set(i,a(void 0,this));const b=this.records.get(Nd);null!=b&&"string"==typeof b.value&&this.scopes.add(b.value),this.injectorDefTypes=new Set(this.get(Od.multi,fr,sn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();for(const c of this._onDestroyHooks)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(c){this._onDestroyHooks.push(c)}runInContext(c){this.assertNotDestroyed();const p=Er(this),y=br(void 0);try{return c()}finally{Er(p),br(y)}}get(c,p=qn,y=sn.Default){this.assertNotDestroyed(),y=dr(y);const C=Er(this),b=br(void 0);try{if(!(y&sn.SkipSelf)){let G=this.records.get(c);if(void 0===G){const X=function v(u){return"function"==typeof u||"object"==typeof u&&u instanceof Bi}(c)&&Dt(c);G=X&&this.injectableDefInScope(X)?a(n(c),Nl):null,this.records.set(c,G)}if(null!=G)return this.hydrate(c,G)}return(y&sn.Self?eh():this.parent).get(c,p=y&sn.Optional&&p===qn?null:p)}catch(P){if("NullInjectorError"===P.name){if((P[cn]=P[cn]||[]).unshift(be(c)),C)throw P;return function ot(u,c,p,y){const C=u[cn];throw c[Pi]&&C.unshift(c[Pi]),u.message=function ht(u,c,p,y=null){u=u&&"\n"===u.charAt(0)&&u.charAt(1)==jr?u.slice(2):u;let C=be(c);if(Array.isArray(c))C=c.map(be).join(" -> ");else if("object"==typeof c){let b=[];for(let P in c)if(c.hasOwnProperty(P)){let G=c[P];b.push(P+":"+("string"==typeof G?JSON.stringify(G):be(G)))}C=`{${b.join(", ")}}`}return`${p}${y?"("+y+")":""}[${C}]: ${u.replace(Wi,"\n  ")}`}("\n"+u.message,C,p,y),u[_i]=C,u[cn]=null,u}(P,c,"R3InjectorError",this.source)}throw P}finally{br(b),Er(C)}}resolveInjectorInitializers(){const c=Er(this),p=br(void 0);try{const y=this.get(il.multi,fr,sn.Self);for(const C of y)C()}finally{Er(c),br(p)}}toString(){const c=[],p=this.records;for(const y of p.keys())c.push(be(y));return`R3Injector[${c.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new We(205,!1)}processProvider(c){let p=ol(c=xe(c))?c:xe(c&&c.provide);const y=function h(u){return pd(u)?a(void 0,u.useValue):a(g(u),Nl)}(c);if(ol(c)||!0!==c.multi)this.records.get(p);else{let C=this.records.get(p);C||(C=a(void 0,Nl,!0),C.factory=()=>jn(C.multi),this.records.set(p,C)),p=c,C.multi.push(c)}this.records.set(p,y)}hydrate(c,p){return p.value===Nl&&(p.value=sl,p.value=p.factory()),"object"==typeof p.value&&p.value&&function l(u){return null!==u&&"object"==typeof u&&"function"==typeof u.ngOnDestroy}(p.value)&&this._ngOnDestroyHooks.add(p.value),p.value}injectableDefInScope(c){if(!c.providedIn)return!1;const p=xe(c.providedIn);return"string"==typeof p?"any"===p||this.scopes.has(p):this.injectorDefTypes.has(p)}}function n(u){const c=Dt(u),p=null!==c?c.factory:$r(u);if(null!==p)return p;if(u instanceof Bi)throw new We(204,!1);if(u instanceof Function)return function s(u){const c=u.length;if(c>0)throw Fs(c,"?"),new We(204,!1);const p=function Mn(u){const c=u&&(u[Ar]||u[Dn]);return c?(function mn(u){if(u.hasOwnProperty("name"))return u.name;(""+u).match(/^function\s*([^\s(]+)/)}(u),c):null}(u);return null!==p?()=>p.factory(u):()=>new u}(u);throw new We(204,!1)}function g(u,c,p){let y;if(ol(u)){const C=xe(u);return $r(C)||n(C)}if(pd(u))y=()=>xe(u.useValue);else if(function Ml(u){return!(!u||!u.useFactory)}(u))y=()=>u.useFactory(...jn(u.deps||[]));else if(function Yl(u){return!(!u||!u.useExisting)}(u))y=()=>wn(xe(u.useExisting));else{const C=xe(u&&(u.useClass||u.provide));if(!function o(u){return!!u.deps}(u))return $r(C)||n(C);y=()=>new C(...jn(u.deps))}return y}function a(u,c,p=!1){return{factory:u,value:c,multi:p?[]:void 0}}function E(u,c){for(const p of u)Array.isArray(p)?E(p,c):p&&Xe(p)?E(p.\u0275providers,c):c(p)}class A{}class R{}class Me{resolveComponentFactory(c){throw function k(u){const c=Error(`No component factory found for ${be(u)}. Did you add it to @NgModule.entryComponents?`);return c.ngComponent=u,c}(c)}}let Ue=(()=>{class u{}return u.NULL=new Me,u})();function ze(){return Ct(j(),Y())}function Ct(u,c){return new Mt(So(u,c))}let Mt=(()=>{class u{constructor(p){this.nativeElement=p}}return u.__NG_ELEMENT_ID__=ze,u})();function gn(u){return u instanceof Mt?u.nativeElement:u}class Rn{}let $n=(()=>{class u{}return u.__NG_ELEMENT_ID__=()=>function Sr(){const u=Y(),p=io(j().index,u);return(Yi(p)?p:u)[Bt]}(),u})(),ni=(()=>{class u{}return u.\u0275prov=ke({token:u,providedIn:"root",factory:()=>null}),u})();class di{constructor(c){this.full=c,this.major=c.split(".")[0],this.minor=c.split(".")[1],this.patch=c.split(".").slice(2).join(".")}}const sa=new di("15.2.0"),Di={},Ts="ngOriginalError";function sc(u){return u[Ts]}class Kl{constructor(){this._console=console}handleError(c){const p=this._findOriginalError(c);this._console.error("ERROR",c),p&&this._console.error("ORIGINAL ERROR",p)}_findOriginalError(c){let p=c&&sc(c);for(;p&&sc(p);)p=sc(p);return p||null}}function Zl(u){return u instanceof Function?u():u}function Sm(u,c,p){let y=u.length;for(;;){const C=u.indexOf(c,p);if(-1===C)return C;if(0===C||u.charCodeAt(C-1)<=32){const b=c.length;if(C+b===y||u.charCodeAt(C+b)<=32)return C}p=C+1}}const Zp="ng-template";function _v(u,c,p){let y=0;for(;y<u.length;){let C=u[y++];if(p&&"class"===C){if(C=u[y],-1!==Sm(C.toLowerCase(),c,0))return!0}else if(1===C){for(;y<u.length&&"string"==typeof(C=u[y++]);)if(C.toLowerCase()===c)return!0;return!1}}return!1}function Xp(u){return 4===u.type&&u.value!==Zp}function nh(u,c,p){return c===(4!==u.type||p?u.value:Zp)}function nf(u,c,p){let y=4;const C=u.attrs||[],b=function Ev(u){for(let c=0;c<u.length;c++)if(Xn(u[c]))return c;return u.length}(C);let P=!1;for(let G=0;G<c.length;G++){const X=c[G];if("number"!=typeof X){if(!P)if(4&y){if(y=2|1&y,""!==X&&!nh(u,X,p)||""===X&&1===c.length){if(cl(y))return!1;P=!0}}else{const ce=8&y?X:c[++G];if(8&y&&null!==u.attrs){if(!_v(u.attrs,ce,p)){if(cl(y))return!1;P=!0}continue}const at=bm(8&y?"class":X,C,Xp(u),p);if(-1===at){if(cl(y))return!1;P=!0;continue}if(""!==ce){let Pt;Pt=at>b?"":C[at+1].toLowerCase();const rn=8&y?Pt:null;if(rn&&-1!==Sm(rn,ce,0)||2&y&&ce!==Pt){if(cl(y))return!1;P=!0}}}}else{if(!P&&!cl(y)&&!cl(X))return!1;if(P&&cl(X))continue;P=!1,y=X|1&y}}return cl(y)||P}function cl(u){return 0==(1&u)}function bm(u,c,p,y){if(null===c)return-1;let C=0;if(y||!p){let b=!1;for(;C<c.length;){const P=c[C];if(P===u)return C;if(3===P||6===P)b=!0;else{if(1===P||2===P){let G=c[++C];for(;"string"==typeof G;)G=c[++C];continue}if(4===P)break;if(0===P){C+=4;continue}}C+=b?1:2}return-1}return function wv(u,c){let p=u.indexOf(4);if(p>-1)for(p++;p<u.length;){const y=u[p];if("number"==typeof y)return-1;if(y===c)return p;p++}return-1}(c,u)}function Dm(u,c,p=!1){for(let y=0;y<c.length;y++)if(nf(u,c[y],p))return!0;return!1}function Qp(u,c){e:for(let p=0;p<c.length;p++){const y=c[p];if(u.length===y.length){for(let C=0;C<u.length;C++)if(u[C]!==y[C])continue e;return!0}}return!1}function nu(u,c){return u?":not("+c.trim()+")":c}function Cv(u){let c=u[0],p=1,y=2,C="",b=!1;for(;p<u.length;){let P=u[p];if("string"==typeof P)if(2&y){const G=u[++p];C+="["+P+(G.length>0?'="'+G+'"':"")+"]"}else 8&y?C+="."+P:4&y&&(C+=" "+P);else""!==C&&!cl(P)&&(c+=nu(b,C),C=""),y=P,b=b||!cl(y);p++}return""!==C&&(c+=nu(b,C)),c}const Hi={};function Jp(u){Rm(w(),Y(),ho()+u,!1)}function Rm(u,c,p,y){if(!y)if(3==(3&c[gr])){const b=u.preOrderCheckHooks;null!==b&&ea(c,b,p)}else{const b=u.preOrderHooks;null!==b&&Ya(c,b,0,p)}Js(p)}function ng(u,c=null,p=null,y){const C=Nm(u,c,p,y);return C.resolveInjectorInitializers(),C}function Nm(u,c=null,p=null,y,C=new Set){const b=[p||fr,Ol(u)];return y=y||("object"==typeof u?void 0:be(u)),new t(b,c||eh(),y||null,C)}let Pd=(()=>{class u{static create(p,y){if(Array.isArray(p))return ng({name:""},y,p,"");{var C;const b=null!==(C=p.name)&&void 0!==C?C:"";return ng({name:b},p.parent,p.providers,b)}}}return u.THROW_IF_NOT_FOUND=qn,u.NULL=new oc,u.\u0275prov=ke({token:u,providedIn:"any",factory:()=>wn(ma)}),u.__NG_ELEMENT_ID__=-1,u})();function Th(u,c=sn.Default){const p=Y();return null===p?wn(u,c):Yc(j(),p,xe(u),c)}function Hm(){throw new Error("invalid")}function uf(u,c){const p=u.contentQueries;if(null!==p)for(let y=0;y<p.length;y+=2){const b=p[y+1];if(-1!==b){const P=u.data[b];oo(p[y]),P.contentQueries(2,c[b],b)}}}function lf(u,c,p,y,C,b,P,G,X,ce,Re){const at=c.blueprint.slice();return at[Ln]=C,at[gr]=76|y,(null!==Re||u&&1024&u[gr])&&(at[gr]|=1024),Fr(at),at[Gr]=at[Zt]=u,at[je]=p,at[Ot]=P||u&&u[Ot],at[Bt]=G||u&&u[Bt],at[Ge]=X||u&&u[Ge]||null,at[Rt]=ce||u&&u[Rt]||null,at[Fi]=b,at[ci]=function yo(){return Bu++}(),at[Kr]=Re,at[on]=2==c.type?u[on]:at,at}function Rh(u,c,p,y,C){let b=u.data[c];if(null===b)b=function lg(u,c,p,y,C){const b=ve(),P=Vn(),X=u.data[c]=function zm(u,c,p,y,C,b){return{type:p,index:y,insertBeforeIndex:null,injectorIndex:c?c.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:C,attrs:b,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:c,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,P?b:b&&b.parent,p,c,y,C);return null===u.firstChild&&(u.firstChild=X),null!==b&&(P?null==b.child&&null!==X.parent&&(b.child=X):null===b.next&&(b.next=X)),X}(u,c,p,y,C),function lr(){return Br.lFrame.inI18n}()&&(b.flags|=32);else if(64&b.type){b.type=p,b.value=y,b.attrs=C;const P=function Vt(){const u=Br.lFrame,c=u.currentTNode;return u.isParent?c:c.parent}();b.injectorIndex=null===P?-1:P.injectorIndex}return _n(b,!0),b}function df(u,c,p,y){if(0===p)return-1;const C=c.length;for(let b=0;b<p;b++)c.push(y),u.blueprint.push(y),u.data.push(null);return C}function dg(u,c,p){mo(c);try{const y=u.viewQuery;null!==y&&Ld(1,y,p);const C=u.template;null!==C&&Gm(u,c,C,1,p),u.firstCreatePass&&(u.firstCreatePass=!1),u.staticContentQueries&&uf(u,c),u.staticViewQueries&&Ld(2,u.viewQuery,p);const b=u.components;null!==b&&function cg(u,c){for(let p=0;p<c.length;p++)Mh(u,c[p])}(c,b)}catch(y){throw u.firstCreatePass&&(u.incompleteFirstPass=!0,u.firstCreatePass=!1),y}finally{c[gr]&=-5,Xs()}}function Oh(u,c,p,y){const C=c[gr];if(128!=(128&C)){mo(c);try{Fr(c),function Et(u){return Br.lFrame.bindingIndex=u}(u.bindingStartIndex),null!==p&&Gm(u,c,p,2,y);const P=3==(3&C);if(P){const ce=u.preOrderCheckHooks;null!==ce&&ea(c,ce,null)}else{const ce=u.preOrderHooks;null!==ce&&Ya(c,ce,0,null),W(c,0)}if(function Eg(u){for(let c=du(u);null!==c;c=wl(c)){if(!c[Ht])continue;const p=c[er];for(let y=0;y<p.length;y++){const C=p[y];512&C[gr]||va(C[Gr],1),C[gr]|=512}}}(c),function Xm(u){for(let c=du(u);null!==c;c=wl(c))for(let p=mr;p<c.length;p++){const y=c[p],C=y[Hn];Qi(y)&&Oh(C,y,C.template,y[je])}}(c),null!==u.contentQueries&&uf(u,c),P){const ce=u.contentCheckHooks;null!==ce&&ea(c,ce)}else{const ce=u.contentHooks;null!==ce&&Ya(c,ce,1),W(c,1)}!function jm(u,c){const p=u.hostBindingOpCodes;if(null!==p)try{for(let y=0;y<p.length;y++){const C=p[y];if(C<0)Js(~C);else{const b=C,P=p[++y],G=p[++y];Nr(P,b),G(2,c[b])}}}finally{Js(-1)}}(u,c);const G=u.components;null!==G&&function cf(u,c){for(let p=0;p<c.length;p++)wg(u,c[p])}(c,G);const X=u.viewQuery;if(null!==X&&Ld(2,X,y),P){const ce=u.viewCheckHooks;null!==ce&&ea(c,ce)}else{const ce=u.viewHooks;null!==ce&&Ya(c,ce,2),W(c,2)}!0===u.firstUpdatePass&&(u.firstUpdatePass=!1),c[gr]&=-41,512&c[gr]&&(c[gr]&=-513,va(c[Gr],-1))}finally{Xs()}}}function Gm(u,c,p,y,C){const b=ho(),P=2&y;try{Js(-1),P&&c.length>_t&&Rm(u,c,_t,!1),Xi(P?2:0,C),p(y,C)}finally{Js(b),Xi(P?3:1,C)}}function hg(u,c,p){if(uo(c)){const C=c.directiveEnd;for(let b=c.directiveStart;b<C;b++){const P=u.data[b];P.contentQueries&&P.contentQueries(1,p[b],b)}}}function oh(u,c,p){$s()&&(function Km(u,c,p,y){const C=p.directiveStart,b=p.directiveEnd;Xr(p)&&function Ov(u,c,p){const y=So(c,u),C=sh(p),b=u[Ot],P=Nh(u,lf(u,C,null,p.onPush?32:16,y,c,b,b.createRenderer(y,p),null,null,null));u[c.index]=P}(c,p,u.data[C+p.componentOffset]),u.firstCreatePass||fo(p,c),na(y,c);const P=p.initialInputs;for(let G=C;G<b;G++){const X=u.data[G],ce=qi(c,u,G,p);na(ce,c),null!==P&&_g(0,G-C,ce,X,0,P),Si(X)&&(io(p.index,c)[je]=qi(c,u,G,p))}}(u,c,p,So(p,c)),64==(64&p.flags)&&ah(u,c,p))}function hf(u,c,p=So){const y=c.localNames;if(null!==y){let C=c.index+1;for(let b=0;b<y.length;b+=2){const P=y[b+1],G=-1===P?p(c,u):u[P];u[C++]=G}}}function sh(u){const c=u.tView;return null===c||c.incompleteFirstPass?u.tView=ff(1,null,u.template,u.decls,u.vars,u.directiveDefs,u.pipeDefs,u.viewQuery,u.schemas,u.consts):c}function ff(u,c,p,y,C,b,P,G,X,ce){const Re=_t+y,at=Re+C,Pt=function Jf(u,c){const p=[];for(let y=0;y<c;y++)p.push(y<u?null:Hi);return p}(Re,at),rn="function"==typeof ce?ce():ce;return Pt[Hn]={type:u,blueprint:Pt,template:p,queries:null,viewQuery:G,declTNode:c,data:Pt.slice().fill(null,Re),bindingStartIndex:Re,expandoStartIndex:at,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof b?b():b,pipeRegistry:"function"==typeof P?P():P,firstChild:null,schemas:X,consts:rn,incompleteFirstPass:!1}}function ep(u,c,p,y){const C=Qm(c);null===p?C.push(y):(C.push(p),u.firstCreatePass&&ap(u).push(y,C.length-1))}function tp(u,c,p,y){for(let C in u)if(u.hasOwnProperty(C)){p=null===p?{}:p;const b=u[C];null===y?np(p,c,C,b):y.hasOwnProperty(C)&&np(p,c,y[C],b)}return p}function np(u,c,p,y){u.hasOwnProperty(p)?u[p].push(c,y):u[p]=[c,y]}function rp(u,c){const p=io(c,u);16&p[gr]||(p[gr]|=32)}function fg(u,c,p,y){let C=!1;if($s()){const b=null===y?null:{"":-1},P=function Tv(u,c){const p=u.directiveRegistry;let y=null,C=null;if(p)for(let P=0;P<p.length;P++){const G=p[P];if(Dm(c,G.selectors,!1))if(y||(y=[]),Si(G))if(null!==G.findHostDirectiveDefs){const X=[];C=C||new Map,G.findHostDirectiveDefs(G,X,C),y.unshift(...X,G),mg(u,c,X.length)}else y.unshift(G),mg(u,c,0);else{var b;C=C||new Map,null===(b=G.findHostDirectiveDefs)||void 0===b||b.call(G,G,y,C),y.push(G)}}return null===y?null:[y,C]}(u,p);let G,X;null===P?G=X=null:[G,X]=P,null!==G&&(C=!0,ip(u,c,p,G,b,X)),b&&function qm(u,c,p){if(c){const y=u.localNames=[];for(let C=0;C<c.length;C+=2){const b=p[c[C+1]];if(null==b)throw new We(-301,!1);y.push(c[C],b)}}}(p,y,b)}return p.mergedAttrs=Fn(p.mergedAttrs,p.attrs),C}function ip(u,c,p,y,C,b){for(let ce=0;ce<y.length;ce++)eo(fo(p,c),u,y[ce].type);!function Rv(u,c,p){u.flags|=1,u.directiveStart=c,u.directiveEnd=c+p,u.providerIndexes=c}(p,u.data.length,y.length);for(let ce=0;ce<y.length;ce++){const Re=y[ce];Re.providersResolver&&Re.providersResolver(Re)}let P=!1,G=!1,X=df(u,c,y.length,null);for(let ce=0;ce<y.length;ce++){const Re=y[ce];p.mergedAttrs=Fn(p.mergedAttrs,Re.hostAttrs),vg(u,p,c,X,Re),Zm(X,Re,C),null!==Re.contentQueries&&(p.flags|=4),(null!==Re.hostBindings||null!==Re.hostAttrs||0!==Re.hostVars)&&(p.flags|=64);const at=Re.type.prototype;!P&&(at.ngOnChanges||at.ngOnInit||at.ngDoCheck)&&((u.preOrderHooks||(u.preOrderHooks=[])).push(p.index),P=!0),!G&&(at.ngOnChanges||at.ngDoCheck)&&((u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(p.index),G=!0),X++}!function gd(u,c,p){const C=c.directiveEnd,b=u.data,P=c.attrs,G=[];let X=null,ce=null;for(let Re=c.directiveStart;Re<C;Re++){const at=b[Re],Pt=p?p.get(at):null,bn=Pt?Pt.outputs:null;X=tp(at.inputs,Re,X,Pt?Pt.inputs:null),ce=tp(at.outputs,Re,ce,bn);const zn=null===X||null===P||Xp(c)?null:Mv(X,Re,P);G.push(zn)}null!==X&&(X.hasOwnProperty("class")&&(c.flags|=8),X.hasOwnProperty("style")&&(c.flags|=16)),c.initialInputs=G,c.inputs=X,c.outputs=ce}(u,p,b)}function ah(u,c,p){const y=p.directiveStart,C=p.directiveEnd,b=p.index,P=function ui(){return Br.lFrame.currentDirectiveIndex}();try{Js(b);for(let G=y;G<C;G++){const X=u.data[G],ce=c[G];go(G),(null!==X.hostBindings||0!==X.hostVars||null!==X.hostAttrs)&&gg(X,ce)}}finally{Js(-1),go(P)}}function gg(u,c){null!==u.hostBindings&&u.hostBindings(1,c)}function mg(u,c,p){c.componentOffset=p,(u.components||(u.components=[])).push(c.index)}function Zm(u,c,p){if(p){if(c.exportAs)for(let y=0;y<c.exportAs.length;y++)p[c.exportAs[y]]=u;Si(c)&&(p[""]=u)}}function vg(u,c,p,y,C){u.data[y]=C;const b=C.factory||(C.factory=$r(C.type)),P=new et(b,Si(C),Th);u.blueprint[y]=P,p[y]=P,function op(u,c,p,y,C){const b=C.hostBindings;if(b){let P=u.hostBindingOpCodes;null===P&&(P=u.hostBindingOpCodes=[]);const G=~c.index;(function pg(u){let c=u.length;for(;c>0;){const p=u[--c];if("number"==typeof p&&p<0)return p}return 0})(P)!=G&&P.push(G),P.push(p,y,b)}}(u,c,y,df(u,p,C.hostVars,Hi),C)}function ll(u,c,p,y,C,b){const P=So(u,c);!function yg(u,c,p,y,C,b,P){if(null==b)u.removeAttribute(c,C,p);else{const G=null==P?Ce(b):P(b,y||"",C);u.setAttribute(c,C,G,p)}}(c[Bt],P,b,u.value,p,y,C)}function _g(u,c,p,y,C,b){const P=b[c];if(null!==P){const G=y.setInput;for(let X=0;X<P.length;){const ce=P[X++],Re=P[X++],at=P[X++];null!==G?y.setInput(p,at,ce,Re):p[Re]=at}}}function Mv(u,c,p){let y=null,C=0;for(;C<p.length;){const b=p[C];if(0!==b)if(5!==b){if("number"==typeof b)break;if(u.hasOwnProperty(b)){null===y&&(y=[]);const P=u[b];for(let G=0;G<P.length;G+=2)if(P[G]===c){y.push(b,P[G+1],p[C+1]);break}}C+=2}else C+=2;else C+=4}return y}function sp(u,c,p,y){return[u,!0,!1,c,null,0,y,p,null,null]}function wg(u,c){const p=io(c,u);if(Qi(p)){const y=p[Hn];48&p[gr]?Oh(y,p,y.template,p[je]):p[Zi]>0&&gf(p)}}function gf(u){for(let y=du(u);null!==y;y=wl(y))for(let C=mr;C<y.length;C++){const b=y[C];if(Qi(b))if(512&b[gr]){const P=b[Hn];Oh(P,b,P.template,b[je])}else b[Zi]>0&&gf(b)}const p=u[Hn].components;if(null!==p)for(let y=0;y<p.length;y++){const C=io(p[y],u);Qi(C)&&C[Zi]>0&&gf(C)}}function Mh(u,c){const p=io(c,u),y=p[Hn];(function kd(u,c){for(let p=c.length;p<u.blueprint.length;p++)c.push(u.blueprint[p])})(y,p),dg(y,p,p[je])}function Nh(u,c){return u[xt]?u[Ut][Vi]=c:u[xt]=c,u[Ut]=c,c}function Fd(u){for(;u;){u[gr]|=32;const c=xu(u);if(Os(u)&&!c)return u;u=c}return null}function md(u,c,p,y=!0){const C=c[Ot];C.begin&&C.begin();try{Oh(u,c,u.template,p)}catch(P){throw y&&cp(c,P),P}finally{C.end&&C.end()}}function Ld(u,c,p){oo(0),c(u,p)}function Qm(u){return u[Se]||(u[Se]=[])}function ap(u){return u.cleanup||(u.cleanup=[])}function cp(u,c){const p=u[Rt],y=p?p.get(Kl,null):null;y&&y.handleError(c)}function mf(u,c,p,y,C){for(let b=0;b<p.length;){const P=p[b++],G=p[b++],X=c[P],ce=u.data[P];null!==ce.setInput?ce.setInput(X,C,y,G):X[G]=C}}function lp(u,c,p){let y=p?u.styles:null,C=p?u.classes:null,b=0;if(null!==c)for(let P=0;P<c.length;P++){const G=c[P];"number"==typeof G?b=G:1==b?C=$e(C,G):2==b&&(y=$e(y,G+": "+c[++P]+";"))}p?u.styles=y:u.stylesWithoutHost=y,p?u.classes=C:u.classesWithoutHost=C}function Ph(u,c,p,y,C=!1){for(;null!==p;){const b=c[p.index];if(null!==b&&y.push(Ki(b)),ji(b))for(let G=mr;G<b.length;G++){const X=b[G],ce=X[Hn].firstChild;null!==ce&&Ph(X[Hn],X,ce,y)}const P=p.type;if(8&P)Ph(u,c,p.child,y);else if(32&P){const G=ld(p,c);let X;for(;X=G();)y.push(X)}else if(16&P){const G=el(c,p);if(Array.isArray(G))y.push(...G);else{const X=xu(c[on]);Ph(X[Hn],X,G,y,!0)}}p=C?p.projectionNext:p.next}return y}class uh{get rootNodes(){const c=this._lView,p=c[Hn];return Ph(p,c,p.firstChild,[])}constructor(c,p){this._lView=c,this._cdRefInjectingView=p,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[je]}set context(c){this._lView[je]=c}get destroyed(){return 128==(128&this._lView[gr])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const c=this._lView[Gr];if(ji(c)){const p=c[Sn],y=p?p.indexOf(this):-1;y>-1&&(Xc(c,y),Za(p,y))}this._attachedToViewContainer=!1}yc(this._lView[Hn],this._lView)}onDestroy(c){ep(this._lView[Hn],this._lView,null,c)}markForCheck(){Fd(this._cdRefInjectingView||this._lView)}detach(){this._lView[gr]&=-65}reattach(){this._lView[gr]|=64}detectChanges(){md(this._lView[Hn],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new We(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Fc(u,c){xl(u,c,c[Bt],2,null,null)}(this._lView[Hn],this._lView)}attachToAppRef(c){if(this._attachedToViewContainer)throw new We(902,!1);this._appRef=c}}class Pv extends uh{constructor(c){super(c),this._view=c}detectChanges(){const c=this._view;md(c[Hn],c,c[je],!1)}checkNoChanges(){}get context(){return null}}class Cg extends Ue{constructor(c){super(),this.ngModule=c}resolveComponentFactory(c){const p=Mr(c);return new kh(p,this.ngModule)}}function Jm(u){const c=[];for(let p in u)u.hasOwnProperty(p)&&c.push({propName:u[p],templateName:p});return c}class t0{constructor(c,p){this.injector=c,this.parentInjector=p}get(c,p,y){y=dr(y);const C=this.injector.get(c,Di,y);return C!==Di||p===Di?C:this.parentInjector.get(c,p,y)}}class kh extends R{get inputs(){return Jm(this.componentDef.inputs)}get outputs(){return Jm(this.componentDef.outputs)}constructor(c,p){super(),this.componentDef=c,this.ngModule=p,this.componentType=c.type,this.selector=function Iv(u){return u.map(Cv).join(",")}(c.selectors),this.ngContentSelectors=c.ngContentSelectors?c.ngContentSelectors:[],this.isBoundToModule=!!p}create(c,p,y,C){var b;let P=(C=C||this.ngModule)instanceof i?C:null===(b=C)||void 0===b?void 0:b.injector;P&&null!==this.componentDef.getStandaloneInjector&&(P=this.componentDef.getStandaloneInjector(P)||P);const G=P?new t0(c,P):c,X=G.get(Rn,null);if(null===X)throw new We(407,!1);const ce=G.get(ni,null),Re=X.createRenderer(null,this.componentDef),at=this.componentDef.selectors[0][0]||"div",Pt=y?function pf(u,c,p){return u.selectRootElement(c,p===Or.ShadowDom)}(Re,y,this.componentDef.encapsulation):Cl(Re,at,function e0(u){const c=u.toLowerCase();return"svg"===c?"svg":"math"===c?"math":null}(at)),rn=this.componentDef.onPush?288:272,bn=ff(0,null,null,1,0,null,null,null,null,null),zn=lf(null,bn,null,rn,null,null,X,Re,ce,G,null);let Dr,ri;mo(zn);try{const Ai=this.componentDef;let kn,Ui=null;Ai.findHostDirectiveDefs?(kn=[],Ui=new Map,Ai.findHostDirectiveDefs(Ai,kn,Ui),kn.push(Ai)):kn=[Ai];const ca=function kv(u,c){const p=u[Hn],y=_t;return u[y]=c,Rh(p,y,2,"#host",null)}(zn,Pt),Ga=function Fv(u,c,p,y,C,b,P,G){const X=C[Hn];!function Lv(u,c,p,y){for(const C of u)c.mergedAttrs=Fn(c.mergedAttrs,C.hostAttrs);null!==c.mergedAttrs&&(lp(c,c.mergedAttrs,!0),null!==p&&Al(y,p,c))}(y,u,c,P);const ce=b.createRenderer(c,p),Re=lf(C,sh(p),null,p.onPush?32:16,C[u.index],u,b,ce,G||null,null,null);return X.firstCreatePass&&mg(X,u,y.length-1),Nh(C,Re),C[u.index]=Re}(ca,Pt,Ai,kn,zn,X,Re);ri=ls(bn,_t),Pt&&function xg(u,c,p,y){if(y)Cn(u,p,["ng-version",sa.full]);else{const{attrs:C,classes:b}=function xv(u){const c=[],p=[];let y=1,C=2;for(;y<u.length;){let b=u[y];if("string"==typeof b)2===C?""!==b&&c.push(b,u[++y]):8===C&&p.push(b);else{if(!cl(C))break;C=b}y++}return{attrs:c,classes:p}}(c.selectors[0]);C&&Cn(u,p,C),b&&b.length>0&&eu(u,p,b.join(" "))}}(Re,Ai,Pt,y),void 0!==p&&function Ag(u,c,p){const y=u.projection=[];for(let C=0;C<c.length;C++){const b=p[C];y.push(null!=b?Array.from(b):null)}}(ri,this.ngContentSelectors,p),Dr=function Ig(u,c,p,y,C,b){const P=j(),G=C[Hn],X=So(P,C);ip(G,C,P,p,null,y);for(let Re=0;Re<p.length;Re++)na(qi(C,G,P.directiveStart+Re,P),C);ah(G,C,P),X&&na(X,C);const ce=qi(C,G,P.directiveStart+P.componentOffset,P);if(u[je]=C[je]=ce,null!==b)for(const Re of b)Re(ce,c);return hg(G,P,u),ce}(Ga,Ai,kn,Ui,zn,[Bv]),dg(bn,zn,null)}finally{Xs()}return new n0(this.componentType,Dr,Ct(ri,zn),zn,ri)}}class n0 extends A{constructor(c,p,y,C,b){super(),this.location=y,this._rootLView=C,this._tNode=b,this.instance=p,this.hostView=this.changeDetectorRef=new Pv(C),this.componentType=c}setInput(c,p){const y=this._tNode.inputs;let C;if(null!==y&&(C=y[c])){const b=this._rootLView;mf(b[Hn],b,C,c,p),rp(b,this._tNode.index)}}get injector(){return new da(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(c){this.hostView.onDestroy(c)}}function Bv(){const u=j();za(Y()[Hn],u)}function Sg(u){let c=function dp(u){return Object.getPrototypeOf(u.prototype).constructor}(u.type),p=!0;const y=[u];for(;c;){let C;if(Si(u))C=c.\u0275cmp||c.\u0275dir;else{if(c.\u0275cmp)throw new We(903,!1);C=c.\u0275dir}if(C){if(p){y.push(C);const P=u;P.inputs=hp(u.inputs),P.declaredInputs=hp(u.declaredInputs),P.outputs=hp(u.outputs);const G=C.hostBindings;G&&Uv(u,G);const X=C.viewQuery,ce=C.contentQueries;if(X&&Dg(u,X),ce&&r0(u,ce),ye(u.inputs,C.inputs),ye(u.declaredInputs,C.declaredInputs),ye(u.outputs,C.outputs),Si(C)&&C.data.animation){const Re=u.data;Re.animation=(Re.animation||[]).concat(C.data.animation)}}const b=C.features;if(b)for(let P=0;P<b.length;P++){const G=b[P];G&&G.ngInherit&&G(u),G===Sg&&(p=!1)}}c=Object.getPrototypeOf(c)}!function bg(u){let c=0,p=null;for(let y=u.length-1;y>=0;y--){const C=u[y];C.hostVars=c+=C.hostVars,C.hostAttrs=Fn(C.hostAttrs,p=Fn(p,C.hostAttrs))}}(y)}function hp(u){return u===Zr?{}:u===fr?[]:u}function Dg(u,c){const p=u.viewQuery;u.viewQuery=p?(y,C)=>{c(y,C),p(y,C)}:c}function r0(u,c){const p=u.contentQueries;u.contentQueries=p?(y,C,b)=>{c(y,C,b),p(y,C,b)}:c}function Uv(u,c){const p=u.hostBindings;u.hostBindings=p?(y,C)=>{c(y,C),p(y,C)}:c}let yd=null;function Bd(){if(!yd){const u=rr.Symbol;if(u&&u.iterator)yd=u.iterator;else{const c=Object.getOwnPropertyNames(Map.prototype);for(let p=0;p<c.length;++p){const y=c[p];"entries"!==y&&"size"!==y&&Map.prototype[y]===Map.prototype.entries&&(yd=y)}}}return yd}function gp(u){return!!vf(u)&&(Array.isArray(u)||!(u instanceof Map)&&Bd()in u)}function vf(u){return null!==u&&("function"==typeof u||"object"==typeof u)}function Yu(u,c,p){return!Object.is(u[c],p)&&(u[c]=p,!0)}function Ng(u,c,p,y){const C=Y();return Yu(C,Xt(),c)&&(w(),ll(Ti(),C,u,c,p,y)),Ng}function Lg(u,c,p,y,C,b,P,G){const X=Y(),ce=w(),Re=u+_t,at=ce.firstCreatePass?function d0(u,c,p,y,C,b,P,G,X){const ce=c.consts,Re=Rh(c,u,4,P||null,bo(ce,G));fg(c,p,Re,bo(ce,X)),za(c,Re);const at=Re.tViews=ff(2,Re,y,C,b,c.directiveRegistry,c.pipeRegistry,null,c.schemas,ce);return null!==c.queries&&(c.queries.template(c,Re),at.queries=c.queries.embeddedTView(Re)),Re}(Re,ce,X,c,p,y,C,b,P):ce.data[Re];_n(at,!1);const Pt=X[Bt].createComment("");Hs(ce,X,Pt,at),na(Pt,X),Nh(X,X[Re]=sp(Pt,X,Pt,at)),Qr(at)&&oh(ce,X,at),null!=P&&hf(X,at,G)}function _f(u){return function Ms(u,c){return u[c]}(function li(){return Br.lFrame.contextLView}(),_t+u)}function _o(u,c,p){const y=Y();return Yu(y,Xt(),c)&&function zc(u,c,p,y,C,b,P,G){const X=So(c,p);let Re,ce=c.inputs;!G&&null!=ce&&(Re=ce[y])?(mf(u,p,Re,y,C),Xr(c)&&rp(p,c.index)):3&c.type&&(y=function Wm(u){return"class"===u?"className":"for"===u?"htmlFor":"formaction"===u?"formAction":"innerHtml"===u?"innerHTML":"readonly"===u?"readOnly":"tabindex"===u?"tabIndex":u}(y),C=null!=P?P(C,c.value||"",y):C,b.setProperty(X,y,C))}(w(),Ti(),y,u,c,y[Bt],p,!1),_o}function wp(u,c,p,y,C){const P=C?"class":"style";mf(u,p,c.inputs[P],P,y)}function Ef(u,c,p,y){const C=Y(),b=w(),P=_t+u,G=C[Bt],X=C[P]=Cl(G,c,function Pu(){return Br.lFrame.currentNamespace}()),ce=b.firstCreatePass?function f0(u,c,p,y,C,b,P){const G=c.consts,ce=Rh(c,u,2,C,bo(G,b));return fg(c,p,ce,bo(G,P)),null!==ce.attrs&&lp(ce,ce.attrs,!1),null!==ce.mergedAttrs&&lp(ce,ce.mergedAttrs,!0),null!==c.queries&&c.queries.elementStart(c,ce),ce}(P,b,C,0,c,p,y):b.data[P];return _n(ce,!0),Al(G,X,ce),32!=(32&ce.flags)&&Hs(b,C,X,ce),0===function Vs(){return Br.lFrame.elementDepthCount}()&&na(X,C),function Ns(){Br.lFrame.elementDepthCount++}(),Qr(ce)&&(oh(b,C,ce),hg(b,ce,C)),null!==y&&hf(C,ce),Ef}function jd(){let u=j();Vn()?wr():(u=u.parent,_n(u,!1));const c=u;!function No(){Br.lFrame.elementDepthCount--}();const p=w();return p.firstCreatePass&&(za(p,u),uo(u)&&p.queries.elementEnd(u)),null!=c.classesWithoutHost&&function un(u){return 0!=(8&u.flags)}(c)&&wp(p,c,Y(),c.classesWithoutHost,!0),null!=c.stylesWithoutHost&&function kr(u){return 0!=(16&u.flags)}(c)&&wp(p,c,Y(),c.stylesWithoutHost,!1),jd}function Cp(u,c,p,y){return Ef(u,c,p,y),jd(),Cp}function ru(u,c,p){const y=Y(),C=w(),b=u+_t,P=C.firstCreatePass?function aa(u,c,p,y,C){const b=c.consts,P=bo(b,y),G=Rh(c,u,8,"ng-container",P);return null!==P&&lp(G,P,!0),fg(c,p,G,bo(b,C)),null!==c.queries&&c.queries.elementStart(c,G),G}(b,C,y,c,p):C.data[b];_n(P,!0);const G=y[b]=y[Bt].createComment("");return Hs(C,y,G,P),na(G,y),Qr(P)&&(oh(C,y,P),hg(C,P,y)),null!=p&&hf(y,P),ru}function hl(){let u=j();const c=w();return Vn()?wr():(u=u.parent,_n(u,!1)),c.firstCreatePass&&(za(c,u),uo(u)&&c.queries.elementEnd(u)),hl}function Ip(u,c,p){return ru(u,c,p),hl(),Ip}function p0(){return Y()}function Uh(u){return!!u&&"function"==typeof u.then}function Bg(u){return!!u&&"function"==typeof u.subscribe}const xp=Bg;function Ap(u,c,p,y){const C=Y(),b=w(),P=j();return function Gv(u,c,p,y,C,b,P){const G=Qr(y),ce=u.firstCreatePass&&ap(u),Re=c[je],at=Qm(c);let Pt=!0;if(3&y.type||P){const zn=So(y,c),Dr=P?P(zn):zn,ri=at.length,Ai=P?Ui=>P(Ki(Ui[y.index])):y.index;let kn=null;if(!P&&G&&(kn=function jv(u,c,p,y){const C=u.cleanup;if(null!=C)for(let b=0;b<C.length-1;b+=2){const P=C[b];if(P===p&&C[b+1]===y){const G=c[Se],X=C[b+2];return G.length>X?G[X]:null}"string"==typeof P&&(b+=2)}return null}(u,c,C,y.index)),null!==kn)(kn.__ngLastListenerFn__||kn).__ngNextListenerFn__=b,kn.__ngLastListenerFn__=b,Pt=!1;else{b=m0(y,c,Re,b,!1);const Ui=p.listen(Dr,C,b);at.push(b,Ui),ce&&ce.push(C,Ai,ri,ri+1)}}else b=m0(y,c,Re,b,!1);const rn=y.outputs;let bn;if(Pt&&null!==rn&&(bn=rn[C])){const zn=bn.length;if(zn)for(let Dr=0;Dr<zn;Dr+=2){const ca=c[bn[Dr]][bn[Dr+1]].subscribe(b),Ga=at.length;at.push(b,ca),ce&&ce.push(C,y.index,Ga,-(Ga+1))}}}(b,C,C[Bt],P,u,c,y),Ap}function g0(u,c,p,y){try{return Xi(6,c,p),!1!==p(y)}catch(C){return cp(u,C),!1}finally{Xi(7,c,p)}}function m0(u,c,p,y,C){return function b(P){if(P===Function)return y;Fd(u.componentOffset>-1?io(u.index,c):c);let X=g0(c,p,y,P),ce=b.__ngNextListenerFn__;for(;ce;)X=g0(c,p,ce,P)&&X,ce=ce.__ngNextListenerFn__;return C&&!1===X&&(P.preventDefault(),P.returnValue=!1),X}}function v0(u=1){return function Qs(u){return(Br.lFrame.contextLView=function Cs(u,c){for(;u>0;)c=c[Zt],u--;return c}(u,Br.lFrame.contextLView))[je]}(u)}function zv(u,c){let p=null;const y=function Tm(u){const c=u.attrs;if(null!=c){const p=c.indexOf(5);if(!(1&p))return c[p+1]}return null}(u);for(let C=0;C<c.length;C++){const b=c[C];if("*"!==b){if(null===y?Dm(u,b,!0):Qp(y,b))return C}else p=C}return p}function y0(u){const c=Y()[on][Fi];if(!c.projection){const y=c.projection=Fs(u?u.length:1,null),C=y.slice();let b=c.child;for(;null!==b;){const P=u?zv(b,u):0;null!==P&&(C[P]?C[P].projectionNext=b:y[P]=b,C[P]=b),b=b.next}}}function Ug(u,c=0,p){const y=Y(),C=w(),b=Rh(C,_t+u,16,null,p||null);null===b.projection&&(b.projection=c),wr(),32!=(32&b.flags)&&function tl(u,c,p){bu(c[Bt],0,c,p,Hl(u,p,c),jl(p.parent||c[Fi],p,c))}(C,y,b)}function Vh(u,c){return u<<17|c<<2}function wd(u){return u>>17&32767}function Hg(u){return 2|u}function dh(u){return(131068&u)>>2}function jg(u,c){return-131069&u|c<<2}function Gg(u){return 1|u}function E0(u,c,p,y,C){const b=u[p+1],P=null===c;let G=y?wd(b):dh(b),X=!1;for(;0!==G&&(!1===X||P);){const Re=u[G+1];zg(u[G],c)&&(X=!0,u[G+1]=y?Gg(Re):Hg(Re)),G=y?wd(Re):dh(Re)}X&&(u[p+1]=y?Hg(b):Gg(b))}function zg(u,c){return null===u||null==c||(Array.isArray(u)?u[1]:u)===c||!(!Array.isArray(u)||"string"!=typeof c)&&ds(u,c)>=0}const iu={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function w0(u){return u.substring(iu.key,iu.keyEnd)}function qv(u,c){const p=iu.textEnd;return p===c?-1:(c=iu.keyEnd=function I0(u,c,p){for(;c<p&&u.charCodeAt(c)>32;)c++;return c}(u,iu.key=c,p),Hh(u,c,p))}function Hh(u,c,p){for(;c<p&&u.charCodeAt(c)<=32;)c++;return c}function Yg(u,c,p){return Ou(u,c,p,!1),Yg}function Kg(u,c){return Ou(u,c,null,!0),Kg}function Ql(u){!function xc(u,c,p,y){const C=w(),b=dn(2);C.firstUpdatePass&&b0(C,null,b,y);const P=Y();if(p!==Hi&&Yu(P,b,p)){const G=C.data[ho()];if(kp(G,y)&&!S0(C,b)){let X=y?G.classesWithoutHost:G.stylesWithoutHost;null!==X&&(p=$e(X,p||"")),wp(C,G,P,p,y)}else!function Zg(u,c,p,y,C,b,P,G){C===Hi&&(C=fr);let X=0,ce=0,Re=0<C.length?C[0]:null,at=0<b.length?b[0]:null;for(;null!==Re||null!==at;){const Pt=X<C.length?C[X+1]:void 0,rn=ce<b.length?b[ce+1]:void 0;let zn,bn=null;Re===at?(X+=2,ce+=2,Pt!==rn&&(bn=at,zn=rn)):null===at||null!==Re&&Re<at?(X+=2,bn=Re):(ce+=2,bn=at,zn=rn),null!==bn&&R0(u,c,p,y,bn,zn,P,G),Re=X<C.length?C[X]:null,at=ce<b.length?b[ce]:null}}(C,G,P,P[Bt],P[b+1],P[b+1]=function xf(u,c,p){if(null==p||""===p)return fr;const y=[],C=L(p);if(Array.isArray(C))for(let b=0;b<C.length;b++)u(y,C[b],!0);else if("object"==typeof C)for(const b in C)C.hasOwnProperty(b)&&u(y,b,C[b]);else"string"==typeof C&&c(y,C);return y}(u,c,p),y,b)}}(Oo,Cd,u,!0)}function Cd(u,c){for(let p=function l1(u){return function C0(u){iu.key=0,iu.keyEnd=0,iu.value=0,iu.valueEnd=0,iu.textEnd=u.length}(u),qv(u,Hh(u,0,iu.textEnd))}(c);p>=0;p=qv(c,p))Oo(u,w0(c),!0)}function Ou(u,c,p,y){const C=Y(),b=w(),P=dn(2);b.firstUpdatePass&&b0(b,u,P,y),c!==Hi&&Yu(C,P,c)&&R0(b,b.data[ho()],C,C[Bt],u,C[P+1]=function Xg(u,c){return null==u||("string"==typeof c?u+=c:"object"==typeof u&&(u=be(L(u)))),u}(c,p),y,P)}function S0(u,c){return c>=u.expandoStartIndex}function b0(u,c,p,y){const C=u.data;if(null===C[p+1]){const b=C[ho()],P=S0(u,p);kp(b,y)&&null===c&&!P&&(c=!1),c=function D0(u,c,p,y){const C=function Ci(u){const c=Br.lFrame.currentDirectiveIndex;return-1===c?null:u[c]}(u);let b=y?c.residualClasses:c.residualStyles;if(null===C)0===(y?c.classBindings:c.styleBindings)&&(p=Gd(p=Id(null,u,c,p,y),c.attrs,y),b=null);else{const P=c.directiveStylingLast;if(-1===P||u[P]!==C)if(p=Id(C,u,c,p,y),null===b){let X=function T0(u,c,p){const y=p?c.classBindings:c.styleBindings;if(0!==dh(y))return u[wd(y)]}(u,c,y);void 0!==X&&Array.isArray(X)&&(X=Id(null,u,c,X[1],y),X=Gd(X,c.attrs,y),function Np(u,c,p,y){u[wd(p?c.classBindings:c.styleBindings)]=y}(u,c,y,X))}else b=function Qv(u,c,p){let y;const C=c.directiveEnd;for(let b=1+c.directiveStylingLast;b<C;b++)y=Gd(y,u[b].hostAttrs,p);return Gd(y,c.attrs,p)}(u,c,y)}return void 0!==b&&(y?c.residualClasses=b:c.residualStyles=b),p}(C,b,c,y),function Yv(u,c,p,y,C,b){let P=b?c.classBindings:c.styleBindings,G=wd(P),X=dh(P);u[y]=p;let Re,ce=!1;if(Array.isArray(p)?(Re=p[1],(null===Re||ds(p,Re)>0)&&(ce=!0)):Re=p,C)if(0!==X){const Pt=wd(u[G+1]);u[y+1]=Vh(Pt,G),0!==Pt&&(u[Pt+1]=jg(u[Pt+1],y)),u[G+1]=function $g(u,c){return 131071&u|c<<17}(u[G+1],y)}else u[y+1]=Vh(G,0),0!==G&&(u[G+1]=jg(u[G+1],y)),G=y;else u[y+1]=Vh(X,0),0===G?G=y:u[X+1]=jg(u[X+1],y),X=y;ce&&(u[y+1]=Hg(u[y+1])),E0(u,Re,y,!0),E0(u,Re,y,!1),function Kv(u,c,p,y,C){const b=C?u.residualClasses:u.residualStyles;null!=b&&"string"==typeof c&&ds(b,c)>=0&&(p[y+1]=Gg(p[y+1]))}(c,Re,u,y,b),P=Vh(G,X),b?c.classBindings=P:c.styleBindings=P}(C,b,c,p,P,y)}}function Id(u,c,p,y,C){let b=null;const P=p.directiveEnd;let G=p.directiveStylingLast;for(-1===G?G=p.directiveStart:G++;G<P&&(b=c[G],y=Gd(y,b.hostAttrs,C),b!==u);)G++;return null!==u&&(p.directiveStylingLast=G),y}function Gd(u,c,p){const y=p?1:2;let C=-1;if(null!==c)for(let b=0;b<c.length;b++){const P=c[b];"number"==typeof P?C=P:C===y&&(Array.isArray(u)||(u=void 0===u?[]:["",u]),Oo(u,P,!!p||c[++b]))}return void 0===u?null:u}function R0(u,c,p,y,C,b,P,G){if(!(3&c.type))return;const X=u.data,ce=X[G+1],Re=function _0(u){return 1==(1&u)}(ce)?O0(X,c,p,C,dh(ce),P):void 0;Pp(Re)||(Pp(b)||function $h(u){return 2==(2&u)}(ce)&&(b=O0(X,null,p,C,G,P)),function Vc(u,c,p,y,C){if(c)C?u.addClass(p,y):u.removeClass(p,y);else{let b=-1===y.indexOf("-")?void 0:pa.DashCase;null==C?u.removeStyle(p,y,b):("string"==typeof C&&C.endsWith("!important")&&(C=C.slice(0,-10),b|=pa.Important),u.setStyle(p,y,C,b))}}(y,P,Zs(ho(),p),C,b))}function O0(u,c,p,y,C,b){const P=null===c;let G;for(;C>0;){const X=u[C],ce=Array.isArray(X),Re=ce?X[1]:X,at=null===Re;let Pt=p[C+1];Pt===Hi&&(Pt=at?fr:void 0);let rn=at?ka(Pt,y):Re===y?Pt:void 0;if(ce&&!Pp(rn)&&(rn=ka(X,y)),Pp(rn)&&(G=rn,P))return G;const bn=u[C+1];C=P?wd(bn):dh(bn)}if(null!==c){let X=b?c.residualClasses:c.residualStyles;null!=X&&(G=ka(X,y))}return G}function Pp(u){return void 0!==u}function kp(u,c){return 0!=(u.flags&(c?8:16))}function Qg(u,c=""){const p=Y(),y=w(),C=u+_t,b=y.firstCreatePass?Rh(y,C,1,c,null):y.data[C],P=p[C]=function Vl(u,c){return u.createText(c)}(p[Bt],c);Hs(y,p,P,b),_n(b,!1)}function xd(u){return Af("",u,""),xd}function Af(u,c,p){const y=Y(),C=function Fh(u,c,p,y){return Yu(u,Xt(),p)?c+Ce(p)+y:Hi}(y,u,c,p);return C!==Hi&&function vd(u,c,p){const y=Zs(c,u);!function vc(u,c,p){u.setValue(c,p)}(u[Bt],y,p)}(y,ho(),C),Af}const Jl=void 0;var hh=["en",[["a","p"],["AM","PM"],Jl],[["AM","PM"],Jl,Jl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Jl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Jl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Jl,"{1} 'at' {0}",Jl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function oy(u){const p=Math.floor(Math.abs(u)),y=u.toString().replace(/^[^.]*\.?/,"").length;return 1===p&&0===y?1:5}];let Ac={};function ed(u){const c=function sy(u){return u.toLowerCase().replace(/_/g,"-")}(u);let p=L0(c);if(p)return p;const y=c.split("-")[0];if(p=L0(y),p)return p;if("en"===y)return hh;throw new We(701,!1)}function cm(u){return ed(u)[yi.PluralCase]}function L0(u){return u in Ac||(Ac[u]=rr.ng&&rr.ng.common&&rr.ng.common.locales&&rr.ng.common.locales[u]),Ac[u]}var yi=(()=>((yi=yi||{})[yi.LocaleId=0]="LocaleId",yi[yi.DayPeriodsFormat=1]="DayPeriodsFormat",yi[yi.DayPeriodsStandalone=2]="DayPeriodsStandalone",yi[yi.DaysFormat=3]="DaysFormat",yi[yi.DaysStandalone=4]="DaysStandalone",yi[yi.MonthsFormat=5]="MonthsFormat",yi[yi.MonthsStandalone=6]="MonthsStandalone",yi[yi.Eras=7]="Eras",yi[yi.FirstDayOfWeek=8]="FirstDayOfWeek",yi[yi.WeekendRange=9]="WeekendRange",yi[yi.DateFormat=10]="DateFormat",yi[yi.TimeFormat=11]="TimeFormat",yi[yi.DateTimeFormat=12]="DateTimeFormat",yi[yi.NumberSymbols=13]="NumberSymbols",yi[yi.NumberFormats=14]="NumberFormats",yi[yi.CurrencyCode=15]="CurrencyCode",yi[yi.CurrencySymbol=16]="CurrencySymbol",yi[yi.CurrencyName=17]="CurrencyName",yi[yi.Currencies=18]="Currencies",yi[yi.Directionality=19]="Directionality",yi[yi.PluralCase=20]="PluralCase",yi[yi.ExtraData=21]="ExtraData",yi))();const zh="en-US";let U0=zh;function en(u,c,p,y,C){if(u=xe(u),Array.isArray(u))for(let b=0;b<u.length;b++)en(u[b],c,p,y,C);else{const b=w(),P=Y();let G=ol(u)?u:xe(u.provide),X=g(u);const ce=j(),Re=1048575&ce.providerIndexes,at=ce.directiveStart,Pt=ce.providerIndexes>>20;if(ol(u)||!u.multi){const rn=new et(X,C,Th),bn=xr(G,c,C?Re:Re+Pt,at);-1===bn?(eo(fo(ce,P),b,G),An(b,u,c.length),c.push(G),ce.directiveStart++,ce.directiveEnd++,C&&(ce.providerIndexes+=1048576),p.push(rn),P.push(rn)):(p[bn]=rn,P[bn]=rn)}else{const rn=xr(G,c,Re+Pt,at),bn=xr(G,c,Re,Re+Pt),Dr=bn>=0&&p[bn];if(C&&!Dr||!C&&!(rn>=0&&p[rn])){eo(fo(ce,P),b,G);const ri=function Ho(u,c,p,y,C){const b=new et(u,p,Th);return b.multi=[],b.index=c,b.componentProviders=0,Pn(b,C,y&&!p),b}(C?Rs:ei,p.length,C,y,X);!C&&Dr&&(p[bn].providerFactory=ri),An(b,u,c.length,0),c.push(G),ce.directiveStart++,ce.directiveEnd++,C&&(ce.providerIndexes+=1048576),p.push(ri),P.push(ri)}else An(b,u,rn>-1?rn:bn,Pn(p[C?bn:rn],X,!C&&y));!C&&y&&Dr&&p[bn].componentProviders++}}}function An(u,c,p,y){const C=ol(c),b=function xh(u){return!!u.useClass}(c);if(C||b){const X=(b?xe(c.useClass):c).prototype.ngOnDestroy;if(X){const ce=u.destroyHooks||(u.destroyHooks=[]);if(!C&&c.multi){const Re=ce.indexOf(p);-1===Re?ce.push(p,[y,X]):ce[Re+1].push(y,X)}else ce.push(p,X)}}}function Pn(u,c,p){return p&&u.componentProviders++,u.multi.push(c)-1}function xr(u,c,p,y){for(let C=p;C<y;C++)if(c[C]===u)return C;return-1}function ei(u,c,p,y){return Gs(this.multi,[])}function Rs(u,c,p,y){const C=this.multi;let b;if(this.providerFactory){const P=this.providerFactory.componentProviders,G=qi(p,p[Hn],this.providerFactory.index,y);b=G.slice(0,P),Gs(C,b);for(let X=P;X<G.length;X++)b.push(G[X])}else b=[],Gs(C,b);return b}function Gs(u,c){for(let p=0;p<u.length;p++)c.push((0,u[p])());return c}function Ta(u,c=[]){return p=>{p.providersResolver=(y,C)=>function It(u,c,p){const y=w();if(y.firstCreatePass){const C=Si(u);en(p,y.data,y.blueprint,C,!0),en(c,y.data,y.blueprint,C,!1)}}(y,C?C(u):u,c)}}class Eo{}class qo{}function ou(u,c){return new p1(u,null!=c?c:null)}class p1 extends Eo{constructor(c,p){super(),this._parent=p,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Cg(this);const y=oi(c);this._bootstrapComponents=Zl(y.bootstrap),this._r3Injector=Nm(c,p,[{provide:Eo,useValue:this},{provide:Ue,useValue:this.componentFactoryResolver}],be(c),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(c)}get injector(){return this._r3Injector}destroy(){const c=this._r3Injector;!c.destroyed&&c.destroy(),this.destroyCbs.forEach(p=>p()),this.destroyCbs=null}onDestroy(c){this.destroyCbs.push(c)}}class Dy extends qo{constructor(c){super(),this.moduleType=c}create(c){return new p1(this.moduleType,c)}}class F_ extends Eo{constructor(c,p,y){super(),this.componentFactoryResolver=new Cg(this),this.instance=null;const C=new t([...c,{provide:Eo,useValue:this},{provide:Ue,useValue:this.componentFactoryResolver}],p||eh(),y,new Set(["environment"]));this.injector=C,C.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(c){this.injector.onDestroy(c)}}function Ty(u,c,p=null){return new F_(u,c,p).injector}let L_=(()=>{class u{constructor(p){this._injector=p,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(p){if(!p.standalone)return null;if(!this.cachedInjectors.has(p.id)){const y=Hc(0,p.type),C=y.length>0?Ty([y],this._injector,`Standalone[${p.type.name}]`):null;this.cachedInjectors.set(p.id,C)}return this.cachedInjectors.get(p.id)}ngOnDestroy(){try{for(const p of this.cachedInjectors.values())null!==p&&p.destroy()}finally{this.cachedInjectors.clear()}}}return u.\u0275prov=ke({token:u,providedIn:"environment",factory:()=>new u(wn(i))}),u})();function g1(u){u.getStandaloneInjector=c=>c.get(L_).getOrCreateStandaloneInjector(u)}function C1(u,c,p,y){return function I1(u,c,p,y,C,b){const P=c+p;return Yu(u,P,C)?function dl(u,c,p){return u[c]=p}(u,P+1,b?y.call(b,C):y(C)):function Em(u,c){const p=u[c];return p===Hi?void 0:p}(u,P+1)}(Y(),function Te(){const u=Br.lFrame;let c=u.bindingRootIndex;return-1===c&&(c=u.bindingRootIndex=u.tView.bindingStartIndex),c}(),u,c,p,y)}function Oy(u){return c=>{setTimeout(u,void 0,c)}}const Kd=class uE extends m.x{constructor(c=!1){super(),this.__isAsync=c}emit(c){super.next(c)}subscribe(c,p,y){let C=c,b=p||(()=>null),P=y;if(c&&"object"==typeof c){var G,X,ce;const at=c;C=null===(G=at.next)||void 0===G?void 0:G.bind(at),b=null===(X=at.error)||void 0===X?void 0:X.bind(at),P=null===(ce=at.complete)||void 0===ce?void 0:ce.bind(at)}this.__isAsync&&(b=Oy(b),C&&(C=Oy(C)),P&&(P=Oy(P)));const Re=super.subscribe({next:C,error:b,complete:P});return c instanceof J.w0&&c.add(Re),Re}};function cE(){return this._results[Bd()]()}class My{get changes(){return this._changes||(this._changes=new Kd)}constructor(c=!1){this._emitDistinctChangesOnly=c,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const p=Bd(),y=My.prototype;y[p]||(y[p]=cE)}get(c){return this._results[c]}map(c){return this._results.map(c)}filter(c){return this._results.filter(c)}find(c){return this._results.find(c)}reduce(c,p){return this._results.reduce(c,p)}forEach(c){this._results.forEach(c)}some(c){return this._results.some(c)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(c,p){const y=this;y.dirty=!1;const C=function ks(u){return u.flat(Number.POSITIVE_INFINITY)}(c);(this._changesDetected=!function Ca(u,c,p){if(u.length!==c.length)return!1;for(let y=0;y<u.length;y++){let C=u[y],b=c[y];if(p&&(C=p(C),b=p(b)),b!==C)return!1}return!0}(y._results,C,p))&&(y._results=C,y.length=C.length,y.last=C[this.length-1],y.first=C[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Cm=(()=>{class u{}return u.__NG_ELEMENT_ID__=hE,u})();const lE=Cm,dE=class extends lE{constructor(c,p,y){super(),this._declarationLView=c,this._declarationTContainer=p,this.elementRef=y}createEmbeddedView(c,p){const y=this._declarationTContainer.tViews,C=lf(this._declarationLView,y,c,16,null,y.declTNode,null,null,null,null,p||null);C[In]=this._declarationLView[this._declarationTContainer.index];const P=this._declarationLView[Jn];return null!==P&&(C[Jn]=P.createEmbeddedView(y)),dg(y,C,c),new uh(C)}};function hE(){return ov(j(),Y())}function ov(u,c){return 4&u.type?new dE(c,u,Ct(u,c)):null}let sv=(()=>{class u{}return u.__NG_ELEMENT_ID__=fE,u})();function fE(){return R1(j(),Y())}const pE=sv,D1=class extends pE{constructor(c,p,y){super(),this._lContainer=c,this._hostTNode=p,this._hostLView=y}get element(){return Ct(this._hostTNode,this._hostLView)}get injector(){return new da(this._hostTNode,this._hostLView)}get parentInjector(){const c=Zu(this._hostTNode,this._hostLView);if(vn(c)){const p=Ea(c,this._hostLView),y=Ur(c);return new da(p[Hn].data[y+8],p)}return new da(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(c){const p=T1(this._lContainer);return null!==p&&p[c]||null}get length(){return this._lContainer.length-mr}createEmbeddedView(c,p,y){let C,b;"number"==typeof y?C=y:null!=y&&(C=y.index,b=y.injector);const P=c.createEmbeddedView(p||{},b);return this.insert(P,C),P}createComponent(c,p,y,C,b){const P=c&&!function fa(u){return"function"==typeof u}(c);let G;if(P)G=p;else{const at=p||{};G=at.index,y=at.injector,C=at.projectableNodes,b=at.environmentInjector||at.ngModuleRef}const X=P?c:new kh(Mr(c)),ce=y||this.parentInjector;if(!b&&null==X.ngModule){const Pt=(P?ce:this.parentInjector).get(i,null);Pt&&(b=Pt)}const Re=X.create(ce,C,void 0,b);return this.insert(Re.hostView,G),Re}insert(c,p){const y=c._lView,C=y[Hn];if(function Vo(u){return ji(u[Gr])}(y)){const Re=this.indexOf(c);if(-1!==Re)this.detach(Re);else{const at=y[Gr],Pt=new D1(at,at[Fi],at[Gr]);Pt.detach(Pt.indexOf(c))}}const b=this._adjustIndex(p),P=this._lContainer;!function Dd(u,c,p,y){const C=mr+y,b=p.length;y>0&&(p[C-1][Vi]=c),y<b-mr?(c[Vi]=p[C],so(p,mr+y,c)):(p.push(c),c[Vi]=null),c[Gr]=p;const P=c[In];null!==P&&p!==P&&function tc(u,c){const p=u[er];c[on]!==c[Gr][Gr][on]&&(u[Ht]=!0),null===p?u[er]=[c]:p.push(c)}(P,c);const G=c[Jn];null!==G&&G.insertView(u),c[gr]|=64}(C,y,P,b);const G=Aa(b,P),X=y[Bt],ce=_c(X,P[fn]);return null!==ce&&function $l(u,c,p,y,C,b){y[Ln]=C,y[Fi]=c,xl(u,y,p,1,C,b)}(C,P[Fi],X,y,ce,G),c.attachToViewContainerRef(),so(Ny(P),b,c),c}move(c,p){return this.insert(c,p)}indexOf(c){const p=T1(this._lContainer);return null!==p?p.indexOf(c):-1}remove(c){const p=this._adjustIndex(c,-1),y=Xc(this._lContainer,p);y&&(Za(Ny(this._lContainer),p),yc(y[Hn],y))}detach(c){const p=this._adjustIndex(c,-1),y=Xc(this._lContainer,p);return y&&null!=Za(Ny(this._lContainer),p)?new uh(y):null}_adjustIndex(c,p=0){return null==c?this.length+p:c}};function T1(u){return u[Sn]}function Ny(u){return u[Sn]||(u[Sn]=[])}function R1(u,c){let p;const y=c[u.index];if(ji(y))p=y;else{let C;if(8&u.type)C=Ki(y);else{const b=c[Bt];C=b.createComment("");const P=So(u,c);nc(b,_c(b,P),C,function Wa(u,c){return u.nextSibling(c)}(b,P),!1)}c[u.index]=p=sp(y,c,C,u),Nh(c,p)}return new D1(p,u,c)}class Py{constructor(c){this.queryList=c,this.matches=null}clone(){return new Py(this.queryList)}setDirty(){this.queryList.setDirty()}}class ky{constructor(c=[]){this.queries=c}createEmbeddedView(c){const p=c.queries;if(null!==p){const y=null!==c.contentQueries?c.contentQueries[0]:p.length,C=[];for(let b=0;b<y;b++){const P=p.getByIndex(b);C.push(this.queries[P.indexInDeclarationView].clone())}return new ky(C)}return null}insertView(c){this.dirtyQueriesWithMatches(c)}detachView(c){this.dirtyQueriesWithMatches(c)}dirtyQueriesWithMatches(c){for(let p=0;p<this.queries.length;p++)null!==U1(c,p).matches&&this.queries[p].setDirty()}}class O1{constructor(c,p,y=null){this.predicate=c,this.flags=p,this.read=y}}class Fy{constructor(c=[]){this.queries=c}elementStart(c,p){for(let y=0;y<this.queries.length;y++)this.queries[y].elementStart(c,p)}elementEnd(c){for(let p=0;p<this.queries.length;p++)this.queries[p].elementEnd(c)}embeddedTView(c){let p=null;for(let y=0;y<this.length;y++){const C=null!==p?p.length:0,b=this.getByIndex(y).embeddedTView(c,C);b&&(b.indexInDeclarationView=y,null!==p?p.push(b):p=[b])}return null!==p?new Fy(p):null}template(c,p){for(let y=0;y<this.queries.length;y++)this.queries[y].template(c,p)}getByIndex(c){return this.queries[c]}get length(){return this.queries.length}track(c){this.queries.push(c)}}class Ly{constructor(c,p=-1){this.metadata=c,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=p}elementStart(c,p){this.isApplyingToNode(p)&&this.matchTNode(c,p)}elementEnd(c){this._declarationNodeIndex===c.index&&(this._appliesToNextNode=!1)}template(c,p){this.elementStart(c,p)}embeddedTView(c,p){return this.isApplyingToNode(c)?(this.crossesNgTemplate=!0,this.addMatch(-c.index,p),new Ly(this.metadata)):null}isApplyingToNode(c){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const p=this._declarationNodeIndex;let y=c.parent;for(;null!==y&&8&y.type&&y.index!==p;)y=y.parent;return p===(null!==y?y.index:-1)}return this._appliesToNextNode}matchTNode(c,p){const y=this.metadata.predicate;if(Array.isArray(y))for(let C=0;C<y.length;C++){const b=y[C];this.matchTNodeWithReadOption(c,p,gE(p,b)),this.matchTNodeWithReadOption(c,p,_u(p,c,b,!1,!1))}else y===Cm?4&p.type&&this.matchTNodeWithReadOption(c,p,-1):this.matchTNodeWithReadOption(c,p,_u(p,c,y,!1,!1))}matchTNodeWithReadOption(c,p,y){if(null!==y){const C=this.metadata.read;if(null!==C)if(C===Mt||C===sv||C===Cm&&4&p.type)this.addMatch(p.index,-2);else{const b=_u(p,c,C,!1,!1);null!==b&&this.addMatch(p.index,b)}else this.addMatch(p.index,y)}}addMatch(c,p){null===this.matches?this.matches=[c,p]:this.matches.push(c,p)}}function gE(u,c){const p=u.localNames;if(null!==p)for(let y=0;y<p.length;y+=2)if(p[y]===c)return p[y+1];return null}function vE(u,c,p,y){return-1===p?function mE(u,c){return 11&u.type?Ct(u,c):4&u.type?ov(u,c):null}(c,u):-2===p?function yE(u,c,p){return p===Mt?Ct(c,u):p===Cm?ov(c,u):p===sv?R1(c,u):void 0}(u,c,y):qi(u,u[Hn],p,c)}function M1(u,c,p,y){const C=c[Jn].queries[y];if(null===C.matches){const b=u.data,P=p.matches,G=[];for(let X=0;X<P.length;X+=2){const ce=P[X];G.push(ce<0?null:vE(c,b[ce],P[X+1],p.metadata.read))}C.matches=G}return C.matches}function By(u,c,p,y){const C=u.queries.getByIndex(p),b=C.matches;if(null!==b){const P=M1(u,c,C,p);for(let G=0;G<b.length;G+=2){const X=b[G];if(X>0)y.push(P[G/2]);else{const ce=b[G+1],Re=c[-X];for(let at=mr;at<Re.length;at++){const Pt=Re[at];Pt[In]===Pt[Gr]&&By(Pt[Hn],Pt,ce,y)}if(null!==Re[er]){const at=Re[er];for(let Pt=0;Pt<at.length;Pt++){const rn=at[Pt];By(rn[Hn],rn,ce,y)}}}}}return y}function N1(u){const c=Y(),p=w(),y=Ji();oo(y+1);const C=U1(p,y);if(u.dirty&&function $i(u){return 4==(4&u[gr])}(c)===(2==(2&C.metadata.flags))){if(null===C.matches)u.reset([]);else{const b=C.crossesNgTemplate?By(p,c,y,[]):M1(p,c,C,y);u.reset(b,gn),u.notifyOnChanges()}return!0}return!1}function P1(u,c,p){const y=w();y.firstCreatePass&&(B1(y,new O1(u,c,p),-1),2==(2&c)&&(y.staticViewQueries=!0)),L1(y,Y(),c)}function k1(u,c,p,y){const C=w();if(C.firstCreatePass){const b=j();B1(C,new O1(c,p,y),b.index),function EE(u,c){const p=u.contentQueries||(u.contentQueries=[]);c!==(p.length?p[p.length-1]:-1)&&p.push(u.queries.length-1,c)}(C,u),2==(2&p)&&(C.staticContentQueries=!0)}L1(C,Y(),p)}function F1(){return function _E(u,c){return u[Jn].queries[c].queryList}(Y(),Ji())}function L1(u,c,p){const y=new My(4==(4&p));ep(u,c,y,y.destroy),null===c[Jn]&&(c[Jn]=new ky),c[Jn].queries.push(new Py(y))}function B1(u,c,p){null===u.queries&&(u.queries=new Fy),u.queries.track(new Ly(c,p))}function U1(u,c){return u.queries.getByIndex(c)}function uv(...u){}const i_=new Bi("Application Initializer");let cv=(()=>{class u{constructor(p){this.appInits=p,this.resolve=uv,this.reject=uv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((y,C)=>{this.resolve=y,this.reject=C})}runInitializers(){if(this.initialized)return;const p=[],y=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let C=0;C<this.appInits.length;C++){const b=this.appInits[C]();if(Uh(b))p.push(b);else if(xp(b)){const P=new Promise((G,X)=>{b.subscribe({complete:G,error:X})});p.push(P)}}Promise.all(p).then(()=>{y()}).catch(C=>{this.reject(C)}),0===p.length&&y(),this.initialized=!0}}return u.\u0275fac=function(p){return new(p||u)(wn(i_,8))},u.\u0275prov=ke({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();const o_=new Bi("AppId",{providedIn:"root",factory:function s_(){return`${jy()}${jy()}${jy()}`}});function jy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const a_=new Bi("Platform Initializer"),$E=new Bi("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),u_=new Bi("appBootstrapListener");let HE=(()=>{class u{log(p){console.log(p)}warn(p){console.warn(p)}}return u.\u0275fac=function(p){return new(p||u)},u.\u0275prov=ke({token:u,factory:u.\u0275fac,providedIn:"platform"}),u})();const lv=new Bi("LocaleId",{providedIn:"root",factory:()=>Un(lv,sn.Optional|sn.SkipSelf)||function jE(){return typeof $localize<"u"&&$localize.locale||zh}()}),GE=new Bi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class zE{constructor(c,p){this.ngModuleFactory=c,this.componentFactories=p}}let WE=(()=>{class u{compileModuleSync(p){return new Dy(p)}compileModuleAsync(p){return Promise.resolve(this.compileModuleSync(p))}compileModuleAndAllComponentsSync(p){const y=this.compileModuleSync(p),b=Zl(oi(p).declarations).reduce((P,G)=>{const X=Mr(G);return X&&P.push(new kh(X)),P},[]);return new zE(y,b)}compileModuleAndAllComponentsAsync(p){return Promise.resolve(this.compileModuleAndAllComponentsSync(p))}clearCache(){}clearCacheFor(p){}getModuleId(p){}}return u.\u0275fac=function(p){return new(p||u)},u.\u0275prov=ke({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();const qE=(()=>Promise.resolve(0))();function Gy(u){typeof Zone>"u"?qE.then(()=>{u&&u.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",u)}class td{constructor({enableLongStackTrace:c=!1,shouldCoalesceEventChangeDetection:p=!1,shouldCoalesceRunChangeDetection:y=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Kd(!1),this.onMicrotaskEmpty=new Kd(!1),this.onStable=new Kd(!1),this.onError=new Kd(!1),typeof Zone>"u")throw new We(908,!1);Zone.assertZonePatched();const C=this;C._nesting=0,C._outer=C._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(C._inner=C._inner.fork(new Zone.TaskTrackingZoneSpec)),c&&Zone.longStackTraceZoneSpec&&(C._inner=C._inner.fork(Zone.longStackTraceZoneSpec)),C.shouldCoalesceEventChangeDetection=!y&&p,C.shouldCoalesceRunChangeDetection=y,C.lastRequestAnimationFrameId=-1,C.nativeRequestAnimationFrame=function ZE(){let u=rr.requestAnimationFrame,c=rr.cancelAnimationFrame;if(typeof Zone<"u"&&u&&c){const p=u[Zone.__symbol__("OriginalDelegate")];p&&(u=p);const y=c[Zone.__symbol__("OriginalDelegate")];y&&(c=y)}return{nativeRequestAnimationFrame:u,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function JE(u){const c=()=>{!function QE(u){u.isCheckStableRunning||-1!==u.lastRequestAnimationFrameId||(u.lastRequestAnimationFrameId=u.nativeRequestAnimationFrame.call(rr,()=>{u.fakeTopEventTask||(u.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{u.lastRequestAnimationFrameId=-1,Wy(u),u.isCheckStableRunning=!0,zy(u),u.isCheckStableRunning=!1},void 0,()=>{},()=>{})),u.fakeTopEventTask.invoke()}),Wy(u))}(u)};u._inner=u._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(p,y,C,b,P,G)=>{try{return d_(u),p.invokeTask(C,b,P,G)}finally{(u.shouldCoalesceEventChangeDetection&&"eventTask"===b.type||u.shouldCoalesceRunChangeDetection)&&c(),h_(u)}},onInvoke:(p,y,C,b,P,G,X)=>{try{return d_(u),p.invoke(C,b,P,G,X)}finally{u.shouldCoalesceRunChangeDetection&&c(),h_(u)}},onHasTask:(p,y,C,b)=>{p.hasTask(C,b),y===C&&("microTask"==b.change?(u._hasPendingMicrotasks=b.microTask,Wy(u),zy(u)):"macroTask"==b.change&&(u.hasPendingMacrotasks=b.macroTask))},onHandleError:(p,y,C,b)=>(p.handleError(C,b),u.runOutsideAngular(()=>u.onError.emit(b)),!1)})}(C)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!td.isInAngularZone())throw new We(909,!1)}static assertNotInAngularZone(){if(td.isInAngularZone())throw new We(909,!1)}run(c,p,y){return this._inner.run(c,p,y)}runTask(c,p,y,C){const b=this._inner,P=b.scheduleEventTask("NgZoneEvent: "+C,c,XE,uv,uv);try{return b.runTask(P,p,y)}finally{b.cancelTask(P)}}runGuarded(c,p,y){return this._inner.runGuarded(c,p,y)}runOutsideAngular(c){return this._outer.run(c)}}const XE={};function zy(u){if(0==u._nesting&&!u.hasPendingMicrotasks&&!u.isStable)try{u._nesting++,u.onMicrotaskEmpty.emit(null)}finally{if(u._nesting--,!u.hasPendingMicrotasks)try{u.runOutsideAngular(()=>u.onStable.emit(null))}finally{u.isStable=!0}}}function Wy(u){u.hasPendingMicrotasks=!!(u._hasPendingMicrotasks||(u.shouldCoalesceEventChangeDetection||u.shouldCoalesceRunChangeDetection)&&-1!==u.lastRequestAnimationFrameId)}function d_(u){u._nesting++,u.isStable&&(u.isStable=!1,u.onUnstable.emit(null))}function h_(u){u._nesting--,zy(u)}class ew{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Kd,this.onMicrotaskEmpty=new Kd,this.onStable=new Kd,this.onError=new Kd}run(c,p,y){return c.apply(p,y)}runGuarded(c,p,y){return c.apply(p,y)}runOutsideAngular(c){return c()}runTask(c,p,y,C){return c.apply(p,y)}}const f_=new Bi(""),p_=new Bi("");let Yy,tw=(()=>{class u{constructor(p,y,C){this._ngZone=p,this.registry=y,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Yy||(function nw(u){Yy=u}(C),C.addToWindow(y)),this._watchAngularEvents(),p.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{td.assertNotInAngularZone(),Gy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Gy(()=>{for(;0!==this._callbacks.length;){let p=this._callbacks.pop();clearTimeout(p.timeoutId),p.doneCb(this._didWork)}this._didWork=!1});else{let p=this.getPendingTasks();this._callbacks=this._callbacks.filter(y=>!y.updateCb||!y.updateCb(p)||(clearTimeout(y.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(p=>({source:p.source,creationLocation:p.creationLocation,data:p.data})):[]}addCallback(p,y,C){let b=-1;y&&y>0&&(b=setTimeout(()=>{this._callbacks=this._callbacks.filter(P=>P.timeoutId!==b),p(this._didWork,this.getPendingTasks())},y)),this._callbacks.push({doneCb:p,timeoutId:b,updateCb:C})}whenStable(p,y,C){if(C&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(p,y,C),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(p){this.registry.registerApplication(p,this)}unregisterApplication(p){this.registry.unregisterApplication(p)}findProviders(p,y,C){return[]}}return u.\u0275fac=function(p){return new(p||u)(wn(td),wn(g_),wn(p_))},u.\u0275prov=ke({token:u,factory:u.\u0275fac}),u})(),g_=(()=>{class u{constructor(){this._applications=new Map}registerApplication(p,y){this._applications.set(p,y)}unregisterApplication(p){this._applications.delete(p)}unregisterAllApplications(){this._applications.clear()}getTestability(p){return this._applications.get(p)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(p,y=!0){var C,b;return null!==(C=null===(b=Yy)||void 0===b?void 0:b.findTestabilityInTree(this,p,y))&&void 0!==C?C:null}}return u.\u0275fac=function(p){return new(p||u)},u.\u0275prov=ke({token:u,factory:u.\u0275fac,providedIn:"platform"}),u})(),qh=null;const m_=new Bi("AllowMultipleToken"),Ky=new Bi("PlatformDestroyListeners"),vh=!1;class ow{constructor(c,p){this.name=c,this.token=p}}function y_(u,c,p=[]){const y=`Platform: ${c}`,C=new Bi(y);return(b=[])=>{let P=qy();if(!P||P.injector.get(m_,!1)){const G=[...p,...b,{provide:C,useValue:!0}];u?u(G):function sw(u){if(qh&&!qh.get(m_,!1))throw new We(400,!1);qh=u;const c=u.get(E_);(function v_(u){const c=u.get(a_,null);c&&c.forEach(p=>p())})(u)}(function __(u=[],c){return Pd.create({name:c,providers:[{provide:Nd,useValue:"platform"},{provide:Ky,useValue:new Set([()=>qh=null])},...u]})}(G,y))}return function uw(u){const c=qy();if(!c)throw new We(401,!1);return c}()}}function qy(){var u,c;return null!==(u=null===(c=qh)||void 0===c?void 0:c.get(E_))&&void 0!==u?u:null}let E_=(()=>{class u{constructor(p){this._injector=p,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(p,y){const C=function C_(u,c){let p;return p="noop"===u?new ew:("zone.js"===u?void 0:u)||new td(c),p}(null==y?void 0:y.ngZone,function w_(u){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!u||!u.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!u||!u.ngZoneRunCoalescing)||!1}}(y)),b=[{provide:td,useValue:C}];return C.run(()=>{const P=Pd.create({providers:b,parent:this.injector,name:p.moduleType.name}),G=p.create(P),X=G.injector.get(Kl,null);if(!X)throw new We(402,!1);return C.runOutsideAngular(()=>{const ce=C.onError.subscribe({next:Re=>{X.handleError(Re)}});G.onDestroy(()=>{hv(this._modules,G),ce.unsubscribe()})}),function I_(u,c,p){try{const y=p();return Uh(y)?y.catch(C=>{throw c.runOutsideAngular(()=>u.handleError(C)),C}):y}catch(y){throw c.runOutsideAngular(()=>u.handleError(y)),y}}(X,C,()=>{const ce=G.injector.get(cv);return ce.runInitializers(),ce.donePromise.then(()=>(function ph(u){me(u,"Expected localeId to be defined"),"string"==typeof u&&(U0=u.toLowerCase().replace(/_/g,"-"))}(G.injector.get(lv,zh)||zh),this._moduleDoBootstrap(G),G))})})}bootstrapModule(p,y=[]){const C=x_({},y);return function rw(u,c,p){const y=new Dy(p);return Promise.resolve(y)}(0,0,p).then(b=>this.bootstrapModuleFactory(b,C))}_moduleDoBootstrap(p){const y=p.injector.get(dv);if(p._bootstrapComponents.length>0)p._bootstrapComponents.forEach(C=>y.bootstrap(C));else{if(!p.instance.ngDoBootstrap)throw new We(-403,!1);p.instance.ngDoBootstrap(y)}this._modules.push(p)}onDestroy(p){this._destroyListeners.push(p)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new We(404,!1);this._modules.slice().forEach(y=>y.destroy()),this._destroyListeners.forEach(y=>y());const p=this._injector.get(Ky,null);p&&(p.forEach(y=>y()),p.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return u.\u0275fac=function(p){return new(p||u)(wn(Pd))},u.\u0275prov=ke({token:u,factory:u.\u0275fac,providedIn:"platform"}),u})();function x_(u,c){return Array.isArray(c)?c.reduce(x_,u):{...u,...c}}let dv=(()=>{class u{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(p,y,C){this._zone=p,this._injector=y,this._exceptionHandler=C,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new H.y(G=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{G.next(this._stable),G.complete()})}),P=new H.y(G=>{let X;this._zone.runOutsideAngular(()=>{X=this._zone.onStable.subscribe(()=>{td.assertNotInAngularZone(),Gy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,G.next(!0))})})});const ce=this._zone.onUnstable.subscribe(()=>{td.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{G.next(!1)}))});return()=>{X.unsubscribe(),ce.unsubscribe()}});this.isStable=(0,he.T)(b,P.pipe((0,le.B)()))}bootstrap(p,y){const C=p instanceof R;if(!this._injector.get(cv).done){!C&&Tr(p);throw new We(405,vh)}let P;P=C?p:this._injector.get(Ue).resolveComponentFactory(p),this.componentTypes.push(P.componentType);const G=function iw(u){return u.isBoundToModule}(P)?void 0:this._injector.get(Eo),ce=P.create(Pd.NULL,[],y||P.selector,G),Re=ce.location.nativeElement,at=ce.injector.get(f_,null);return null==at||at.registerApplication(Re),ce.onDestroy(()=>{this.detachView(ce.hostView),hv(this.components,ce),null==at||at.unregisterApplication(Re)}),this._loadComponent(ce),ce}tick(){if(this._runningTick)throw new We(101,!1);try{this._runningTick=!0;for(let p of this._views)p.detectChanges()}catch(p){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(p))}finally{this._runningTick=!1}}attachView(p){const y=p;this._views.push(y),y.attachToAppRef(this)}detachView(p){const y=p;hv(this._views,y),y.detachFromAppRef()}_loadComponent(p){this.attachView(p.hostView),this.tick(),this.components.push(p);const y=this._injector.get(u_,[]);y.push(...this._bootstrapListeners),y.forEach(C=>C(p))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(p=>p()),this._views.slice().forEach(p=>p.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(p){return this._destroyListeners.push(p),()=>hv(this._destroyListeners,p)}destroy(){if(this._destroyed)throw new We(406,!1);const p=this._injector;p.destroy&&!p.destroyed&&p.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return u.\u0275fac=function(p){return new(p||u)(wn(td),wn(i),wn(Kl))},u.\u0275prov=ke({token:u,factory:u.\u0275fac,providedIn:"root"}),u})();function hv(u,c){const p=u.indexOf(c);p>-1&&u.splice(p,1)}function lw(){return!1}function dw(){}let hw=(()=>{class u{}return u.__NG_ELEMENT_ID__=fw,u})();function fw(u){return function pw(u,c,p){if(Xr(u)&&!p){const y=io(u.index,c);return new uh(y,y)}return 47&u.type?new uh(c[on],c):null}(j(),Y(),16==(16&u))}class T_{constructor(){}supports(c){return gp(c)}create(c){return new Ew(c)}}const _w=(u,c)=>c;class Ew{constructor(c){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=c||_w}forEachItem(c){let p;for(p=this._itHead;null!==p;p=p._next)c(p)}forEachOperation(c){let p=this._itHead,y=this._removalsHead,C=0,b=null;for(;p||y;){const P=!y||p&&p.currentIndex<O_(y,C,b)?p:y,G=O_(P,C,b),X=P.currentIndex;if(P===y)C--,y=y._nextRemoved;else if(p=p._next,null==P.previousIndex)C++;else{b||(b=[]);const ce=G-C,Re=X-C;if(ce!=Re){for(let Pt=0;Pt<ce;Pt++){const rn=Pt<b.length?b[Pt]:b[Pt]=0,bn=rn+Pt;Re<=bn&&bn<ce&&(b[Pt]=rn+1)}b[P.previousIndex]=Re-ce}}G!==X&&c(P,G,X)}}forEachPreviousItem(c){let p;for(p=this._previousItHead;null!==p;p=p._nextPrevious)c(p)}forEachAddedItem(c){let p;for(p=this._additionsHead;null!==p;p=p._nextAdded)c(p)}forEachMovedItem(c){let p;for(p=this._movesHead;null!==p;p=p._nextMoved)c(p)}forEachRemovedItem(c){let p;for(p=this._removalsHead;null!==p;p=p._nextRemoved)c(p)}forEachIdentityChange(c){let p;for(p=this._identityChangesHead;null!==p;p=p._nextIdentityChange)c(p)}diff(c){if(null==c&&(c=[]),!gp(c))throw new We(900,!1);return this.check(c)?this:null}onDestroy(){}check(c){this._reset();let C,b,P,p=this._itHead,y=!1;if(Array.isArray(c)){this.length=c.length;for(let G=0;G<this.length;G++)b=c[G],P=this._trackByFn(G,b),null!==p&&Object.is(p.trackById,P)?(y&&(p=this._verifyReinsertion(p,b,P,G)),Object.is(p.item,b)||this._addIdentityChange(p,b)):(p=this._mismatch(p,b,P,G),y=!0),p=p._next}else C=0,function _d(u,c){if(Array.isArray(u))for(let p=0;p<u.length;p++)c(u[p]);else{const p=u[Bd()]();let y;for(;!(y=p.next()).done;)c(y.value)}}(c,G=>{P=this._trackByFn(C,G),null!==p&&Object.is(p.trackById,P)?(y&&(p=this._verifyReinsertion(p,G,P,C)),Object.is(p.item,G)||this._addIdentityChange(p,G)):(p=this._mismatch(p,G,P,C),y=!0),p=p._next,C++}),this.length=C;return this._truncate(p),this.collection=c,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let c;for(c=this._previousItHead=this._itHead;null!==c;c=c._next)c._nextPrevious=c._next;for(c=this._additionsHead;null!==c;c=c._nextAdded)c.previousIndex=c.currentIndex;for(this._additionsHead=this._additionsTail=null,c=this._movesHead;null!==c;c=c._nextMoved)c.previousIndex=c.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(c,p,y,C){let b;return null===c?b=this._itTail:(b=c._prev,this._remove(c)),null!==(c=null===this._unlinkedRecords?null:this._unlinkedRecords.get(y,null))?(Object.is(c.item,p)||this._addIdentityChange(c,p),this._reinsertAfter(c,b,C)):null!==(c=null===this._linkedRecords?null:this._linkedRecords.get(y,C))?(Object.is(c.item,p)||this._addIdentityChange(c,p),this._moveAfter(c,b,C)):c=this._addAfter(new ww(p,y),b,C),c}_verifyReinsertion(c,p,y,C){let b=null===this._unlinkedRecords?null:this._unlinkedRecords.get(y,null);return null!==b?c=this._reinsertAfter(b,c._prev,C):c.currentIndex!=C&&(c.currentIndex=C,this._addToMoves(c,C)),c}_truncate(c){for(;null!==c;){const p=c._next;this._addToRemovals(this._unlink(c)),c=p}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(c,p,y){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(c);const C=c._prevRemoved,b=c._nextRemoved;return null===C?this._removalsHead=b:C._nextRemoved=b,null===b?this._removalsTail=C:b._prevRemoved=C,this._insertAfter(c,p,y),this._addToMoves(c,y),c}_moveAfter(c,p,y){return this._unlink(c),this._insertAfter(c,p,y),this._addToMoves(c,y),c}_addAfter(c,p,y){return this._insertAfter(c,p,y),this._additionsTail=null===this._additionsTail?this._additionsHead=c:this._additionsTail._nextAdded=c,c}_insertAfter(c,p,y){const C=null===p?this._itHead:p._next;return c._next=C,c._prev=p,null===C?this._itTail=c:C._prev=c,null===p?this._itHead=c:p._next=c,null===this._linkedRecords&&(this._linkedRecords=new R_),this._linkedRecords.put(c),c.currentIndex=y,c}_remove(c){return this._addToRemovals(this._unlink(c))}_unlink(c){null!==this._linkedRecords&&this._linkedRecords.remove(c);const p=c._prev,y=c._next;return null===p?this._itHead=y:p._next=y,null===y?this._itTail=p:y._prev=p,c}_addToMoves(c,p){return c.previousIndex===p||(this._movesTail=null===this._movesTail?this._movesHead=c:this._movesTail._nextMoved=c),c}_addToRemovals(c){return null===this._unlinkedRecords&&(this._unlinkedRecords=new R_),this._unlinkedRecords.put(c),c.currentIndex=null,c._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=c,c._prevRemoved=null):(c._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=c),c}_addIdentityChange(c,p){return c.item=p,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=c:this._identityChangesTail._nextIdentityChange=c,c}}class ww{constructor(c,p){this.item=c,this.trackById=p,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Cw{constructor(){this._head=null,this._tail=null}add(c){null===this._head?(this._head=this._tail=c,c._nextDup=null,c._prevDup=null):(this._tail._nextDup=c,c._prevDup=this._tail,c._nextDup=null,this._tail=c)}get(c,p){let y;for(y=this._head;null!==y;y=y._nextDup)if((null===p||p<=y.currentIndex)&&Object.is(y.trackById,c))return y;return null}remove(c){const p=c._prevDup,y=c._nextDup;return null===p?this._head=y:p._nextDup=y,null===y?this._tail=p:y._prevDup=p,null===this._head}}class R_{constructor(){this.map=new Map}put(c){const p=c.trackById;let y=this.map.get(p);y||(y=new Cw,this.map.set(p,y)),y.add(c)}get(c,p){const C=this.map.get(c);return C?C.get(c,p):null}remove(c){const p=c.trackById;return this.map.get(p).remove(c)&&this.map.delete(p),c}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function O_(u,c,p){const y=u.previousIndex;if(null===y)return y;let C=0;return p&&y<p.length&&(C=p[y]),y+c+C}class M_{constructor(){}supports(c){return c instanceof Map||vf(c)}create(){return new Iw}}class Iw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(c){let p;for(p=this._mapHead;null!==p;p=p._next)c(p)}forEachPreviousItem(c){let p;for(p=this._previousMapHead;null!==p;p=p._nextPrevious)c(p)}forEachChangedItem(c){let p;for(p=this._changesHead;null!==p;p=p._nextChanged)c(p)}forEachAddedItem(c){let p;for(p=this._additionsHead;null!==p;p=p._nextAdded)c(p)}forEachRemovedItem(c){let p;for(p=this._removalsHead;null!==p;p=p._nextRemoved)c(p)}diff(c){if(c){if(!(c instanceof Map||vf(c)))throw new We(900,!1)}else c=new Map;return this.check(c)?this:null}onDestroy(){}check(c){this._reset();let p=this._mapHead;if(this._appendAfter=null,this._forEach(c,(y,C)=>{if(p&&p.key===C)this._maybeAddToChanges(p,y),this._appendAfter=p,p=p._next;else{const b=this._getOrCreateRecordForKey(C,y);p=this._insertBeforeOrAppend(p,b)}}),p){p._prev&&(p._prev._next=null),this._removalsHead=p;for(let y=p;null!==y;y=y._nextRemoved)y===this._mapHead&&(this._mapHead=null),this._records.delete(y.key),y._nextRemoved=y._next,y.previousValue=y.currentValue,y.currentValue=null,y._prev=null,y._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(c,p){if(c){const y=c._prev;return p._next=c,p._prev=y,c._prev=p,y&&(y._next=p),c===this._mapHead&&(this._mapHead=p),this._appendAfter=c,c}return this._appendAfter?(this._appendAfter._next=p,p._prev=this._appendAfter):this._mapHead=p,this._appendAfter=p,null}_getOrCreateRecordForKey(c,p){if(this._records.has(c)){const C=this._records.get(c);this._maybeAddToChanges(C,p);const b=C._prev,P=C._next;return b&&(b._next=P),P&&(P._prev=b),C._next=null,C._prev=null,C}const y=new xw(c);return this._records.set(c,y),y.currentValue=p,this._addToAdditions(y),y}_reset(){if(this.isDirty){let c;for(this._previousMapHead=this._mapHead,c=this._previousMapHead;null!==c;c=c._next)c._nextPrevious=c._next;for(c=this._changesHead;null!==c;c=c._nextChanged)c.previousValue=c.currentValue;for(c=this._additionsHead;null!=c;c=c._nextAdded)c.previousValue=c.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(c,p){Object.is(p,c.currentValue)||(c.previousValue=c.currentValue,c.currentValue=p,this._addToChanges(c))}_addToAdditions(c){null===this._additionsHead?this._additionsHead=this._additionsTail=c:(this._additionsTail._nextAdded=c,this._additionsTail=c)}_addToChanges(c){null===this._changesHead?this._changesHead=this._changesTail=c:(this._changesTail._nextChanged=c,this._changesTail=c)}_forEach(c,p){c instanceof Map?c.forEach(p):Object.keys(c).forEach(y=>p(c[y],y))}}class xw{constructor(c){this.key=c,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function N_(){return new e1([new T_])}let e1=(()=>{class u{constructor(p){this.factories=p}static create(p,y){if(null!=y){const C=y.factories.slice();p=p.concat(C)}return new u(p)}static extend(p){return{provide:u,useFactory:y=>u.create(p,y||N_()),deps:[[u,new oe,new or]]}}find(p){const y=this.factories.find(C=>C.supports(p));if(null!=y)return y;throw new We(901,!1)}}return u.\u0275prov=ke({token:u,providedIn:"root",factory:N_}),u})();function P_(){return new t1([new M_])}let t1=(()=>{class u{constructor(p){this.factories=p}static create(p,y){if(y){const C=y.factories.slice();p=p.concat(C)}return new u(p)}static extend(p){return{provide:u,useFactory:y=>u.create(p,y||P_()),deps:[[u,new oe,new or]]}}find(p){const y=this.factories.find(C=>C.supports(p));if(y)return y;throw new We(901,!1)}}return u.\u0275prov=ke({token:u,providedIn:"root",factory:P_}),u})();const bw=y_(null,"core",[]);let Dw=(()=>{class u{constructor(p){}}return u.\u0275fac=function(p){return new(p||u)(wn(dv))},u.\u0275mod=ti({type:u}),u.\u0275inj=Qt({}),u})();function Tw(u){return"boolean"==typeof u?u:null!=u&&"false"!==u}},433:(pn,Pe,U)=>{"use strict";U.d(Pe,{on:()=>Zs,u5:()=>Es,wO:()=>wi,JU:()=>Ke,a5:()=>Ir,JJ:()=>Jr,JL:()=>rr,F:()=>xt,On:()=>er,Q7:()=>ys,_Y:()=>mr});var m=U(4650),J=U(6895),H=U(8996),he=U(9751),le=U(4742),we=U(8421),ye=U(7669),be=U(5403),$e=U(3268),ge=U(1810),xe=U(4004);let Ne=(()=>{class Y{constructor(T,S){this._renderer=T,this._elementRef=S,this.onChange=j=>{},this.onTouched=()=>{}}setProperty(T,S){this._renderer.setProperty(this._elementRef.nativeElement,T,S)}registerOnTouched(T){this.onTouched=T}registerOnChange(T){this.onChange=T}setDisabledState(T){this.setProperty("disabled",T)}}return Y.\u0275fac=function(T){return new(T||Y)(m.Y36(m.Qsj),m.Y36(m.SBq))},Y.\u0275dir=m.lG2({type:Y}),Y})(),Xe=(()=>{class Y extends Ne{}return Y.\u0275fac=function(){let w;return function(S){return(w||(w=m.n5z(Y)))(S||Y)}}(),Y.\u0275dir=m.lG2({type:Y,features:[m.qOj]}),Y})();const Ke=new m.OlP("NgValueAccessor"),Fe={provide:Ke,useExisting:(0,m.Gpc)(()=>At),multi:!0},ct=new m.OlP("CompositionEventMode");let At=(()=>{class Y extends Ne{constructor(T,S,j){super(T,S),this._compositionMode=j,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ce(){const Y=(0,J.q)()?(0,J.q)().getUserAgent():"";return/android (\d+)/.test(Y.toLowerCase())}())}writeValue(T){this.setProperty("value",null==T?"":T)}_handleInput(T){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(T)}_compositionStart(){this._composing=!0}_compositionEnd(T){this._composing=!1,this._compositionMode&&this.onChange(T)}}return Y.\u0275fac=function(T){return new(T||Y)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(ct,8))},Y.\u0275dir=m.lG2({type:Y,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(T,S){1&T&&m.NdJ("input",function(ve){return S._handleInput(ve.target.value)})("blur",function(){return S.onTouched()})("compositionstart",function(){return S._compositionStart()})("compositionend",function(ve){return S._compositionEnd(ve.target.value)})},features:[m._Bn([Fe]),m.qOj]}),Y})();const yt=!1;function st(Y){return null==Y||("string"==typeof Y||Array.isArray(Y))&&0===Y.length}const Ye=new m.OlP("NgValidators"),$=new m.OlP("NgAsyncValidators"),lt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function ft(Y){return st(Y.value)?{required:!0}:null}function mt(Y){return st(Y.value)||lt.test(Y.value)?null:{email:!0}}function Ze(Y){return null}function me(Y){return null!=Y}function te(Y){const w=(0,m.QGY)(Y)?(0,H.D)(Y):Y;if(yt&&!(0,m.CqO)(w)){let T="Expected async validator to return Promise or Observable.";throw"object"==typeof Y&&(T+=" Are you using a synchronous validator where an async validator is expected?"),new m.vHH(-1101,T)}return w}function q(Y){let w={};return Y.forEach(T=>{w=null!=T?{...w,...T}:w}),0===Object.keys(w).length?null:w}function re(Y,w){return w.map(T=>T(Y))}function ke(Y){return Y.map(w=>function fe(Y){return!Y.validate}(w)?w:T=>w.validate(T))}function Qt(Y){return null!=Y?function rt(Y){if(!Y)return null;const w=Y.filter(me);return 0==w.length?null:function(T){return q(re(T,w))}}(ke(Y)):null}function Yt(Y){return null!=Y?function Dt(Y){if(!Y)return null;const w=Y.filter(me);return 0==w.length?null:function(T){return function De(...Y){const w=(0,ye.jO)(Y),{args:T,keys:S}=(0,le.D)(Y),j=new he.y(ve=>{const{length:Vt}=T;if(!Vt)return void ve.complete();const _n=new Array(Vt);let Vn=Vt,wr=Vt;for(let li=0;li<Vt;li++){let ee=!1;(0,we.Xf)(T[li]).subscribe((0,be.x)(ve,ie=>{ee||(ee=!0,wr--),_n[li]=ie},()=>Vn--,void 0,()=>{(!Vn||!ee)&&(wr||ve.next(S?(0,ge.n)(S,_n):_n),ve.complete())}))}});return w?j.pipe((0,$e.Z)(w)):j}(re(T,w).map(te)).pipe((0,xe.U)(q))}}(ke(Y)):null}function yn(Y,w){return null===Y?[w]:Array.isArray(Y)?[...Y,w]:[Y,w]}function Gn(Y){return Y?Array.isArray(Y)?Y:[Y]:[]}function Ar(Y,w){return Array.isArray(Y)?Y.includes(w):Y===w}function Nn(Y,w){const T=Gn(w);return Gn(Y).forEach(j=>{Ar(T,j)||T.push(j)}),T}function Dn(Y,w){return Gn(w).filter(T=>!Ar(Y,T))}class En{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(w){this._rawValidators=w||[],this._composedValidatorFn=Qt(this._rawValidators)}_setAsyncValidators(w){this._rawAsyncValidators=w||[],this._composedAsyncValidatorFn=Yt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(w){this._onDestroyCallbacks.push(w)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(w=>w()),this._onDestroyCallbacks=[]}reset(w){this.control&&this.control.reset(w)}hasError(w,T){return!!this.control&&this.control.hasError(w,T)}getError(w,T){return this.control?this.control.getError(w,T):null}}class sn extends En{get formDirective(){return null}get path(){return null}}class Ir extends En{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Vr{constructor(w){this._cd=w}get isTouched(){var w,T;return!(null===(w=this._cd)||void 0===w||null===(T=w.control)||void 0===T||!T.touched)}get isUntouched(){var w,T;return!(null===(w=this._cd)||void 0===w||null===(T=w.control)||void 0===T||!T.untouched)}get isPristine(){var w,T;return!(null===(w=this._cd)||void 0===w||null===(T=w.control)||void 0===T||!T.pristine)}get isDirty(){var w,T;return!(null===(w=this._cd)||void 0===w||null===(T=w.control)||void 0===T||!T.dirty)}get isValid(){var w,T;return!(null===(w=this._cd)||void 0===w||null===(T=w.control)||void 0===T||!T.valid)}get isInvalid(){var w,T;return!(null===(w=this._cd)||void 0===w||null===(T=w.control)||void 0===T||!T.invalid)}get isPending(){var w,T;return!(null===(w=this._cd)||void 0===w||null===(T=w.control)||void 0===T||!T.pending)}get isSubmitted(){var w;return!(null===(w=this._cd)||void 0===w||!w.submitted)}}let Jr=(()=>{class Y extends Vr{constructor(T){super(T)}}return Y.\u0275fac=function(T){return new(T||Y)(m.Y36(Ir,2))},Y.\u0275dir=m.lG2({type:Y,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(T,S){2&T&&m.ekj("ng-untouched",S.isUntouched)("ng-touched",S.isTouched)("ng-pristine",S.isPristine)("ng-dirty",S.isDirty)("ng-valid",S.isValid)("ng-invalid",S.isInvalid)("ng-pending",S.isPending)},features:[m.qOj]}),Y})(),rr=(()=>{class Y extends Vr{constructor(T){super(T)}}return Y.\u0275fac=function(T){return new(T||Y)(m.Y36(sn,10))},Y.\u0275dir=m.lG2({type:Y,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(T,S){2&T&&m.ekj("ng-untouched",S.isUntouched)("ng-touched",S.isTouched)("ng-pristine",S.isPristine)("ng-dirty",S.isDirty)("ng-valid",S.isValid)("ng-invalid",S.isInvalid)("ng-pending",S.isPending)("ng-submitted",S.isSubmitted)},features:[m.qOj]}),Y})();function wn(Y,w){return Y?`with name: '${w}'`:`at index: ${w}`}const jn=!1,hr="VALID",He="INVALID",ot="PENDING",ht="DISABLED";function qt(Y){return(Or(Y)?Y.validators:Y)||null}function Wn(Y,w){return(Or(w)?w.asyncValidators:Y)||null}function Or(Y){return null!=Y&&!Array.isArray(Y)&&"object"==typeof Y}class vi{constructor(w,T){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(w),this._assignAsyncValidators(T)}get validator(){return this._composedValidatorFn}set validator(w){this._rawValidators=this._composedValidatorFn=w}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(w){this._rawAsyncValidators=this._composedAsyncValidatorFn=w}get parent(){return this._parent}get valid(){return this.status===hr}get invalid(){return this.status===He}get pending(){return this.status==ot}get disabled(){return this.status===ht}get enabled(){return this.status!==ht}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(w){this._assignValidators(w)}setAsyncValidators(w){this._assignAsyncValidators(w)}addValidators(w){this.setValidators(Nn(w,this._rawValidators))}addAsyncValidators(w){this.setAsyncValidators(Nn(w,this._rawAsyncValidators))}removeValidators(w){this.setValidators(Dn(w,this._rawValidators))}removeAsyncValidators(w){this.setAsyncValidators(Dn(w,this._rawAsyncValidators))}hasValidator(w){return Ar(this._rawValidators,w)}hasAsyncValidator(w){return Ar(this._rawAsyncValidators,w)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(w={}){this.touched=!0,this._parent&&!w.onlySelf&&this._parent.markAsTouched(w)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(w=>w.markAllAsTouched())}markAsUntouched(w={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(T=>{T.markAsUntouched({onlySelf:!0})}),this._parent&&!w.onlySelf&&this._parent._updateTouched(w)}markAsDirty(w={}){this.pristine=!1,this._parent&&!w.onlySelf&&this._parent.markAsDirty(w)}markAsPristine(w={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(T=>{T.markAsPristine({onlySelf:!0})}),this._parent&&!w.onlySelf&&this._parent._updatePristine(w)}markAsPending(w={}){this.status=ot,!1!==w.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!w.onlySelf&&this._parent.markAsPending(w)}disable(w={}){const T=this._parentMarkedDirty(w.onlySelf);this.status=ht,this.errors=null,this._forEachChild(S=>{S.disable({...w,onlySelf:!0})}),this._updateValue(),!1!==w.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...w,skipPristineCheck:T}),this._onDisabledChange.forEach(S=>S(!0))}enable(w={}){const T=this._parentMarkedDirty(w.onlySelf);this.status=hr,this._forEachChild(S=>{S.enable({...w,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:w.emitEvent}),this._updateAncestors({...w,skipPristineCheck:T}),this._onDisabledChange.forEach(S=>S(!1))}_updateAncestors(w){this._parent&&!w.onlySelf&&(this._parent.updateValueAndValidity(w),w.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(w){this._parent=w}getRawValue(){return this.value}updateValueAndValidity(w={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hr||this.status===ot)&&this._runAsyncValidator(w.emitEvent)),!1!==w.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!w.onlySelf&&this._parent.updateValueAndValidity(w)}_updateTreeValidity(w={emitEvent:!0}){this._forEachChild(T=>T._updateTreeValidity(w)),this.updateValueAndValidity({onlySelf:!0,emitEvent:w.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ht:hr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(w){if(this.asyncValidator){this.status=ot,this._hasOwnPendingAsyncValidator=!0;const T=te(this.asyncValidator(this));this._asyncValidationSubscription=T.subscribe(S=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(S,{emitEvent:w})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(w,T={}){this.errors=w,this._updateControlsErrors(!1!==T.emitEvent)}get(w){let T=w;return null==T||(Array.isArray(T)||(T=T.split(".")),0===T.length)?null:T.reduce((S,j)=>S&&S._find(j),this)}getError(w,T){const S=T?this.get(T):this;return S&&S.errors?S.errors[w]:null}hasError(w,T){return!!this.getError(w,T)}get root(){let w=this;for(;w._parent;)w=w._parent;return w}_updateControlsErrors(w){this.status=this._calculateStatus(),w&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(w)}_initObservables(){this.valueChanges=new m.vpe,this.statusChanges=new m.vpe}_calculateStatus(){return this._allControlsDisabled()?ht:this.errors?He:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ot)?ot:this._anyControlsHaveStatus(He)?He:hr}_anyControlsHaveStatus(w){return this._anyControls(T=>T.status===w)}_anyControlsDirty(){return this._anyControls(w=>w.dirty)}_anyControlsTouched(){return this._anyControls(w=>w.touched)}_updatePristine(w={}){this.pristine=!this._anyControlsDirty(),this._parent&&!w.onlySelf&&this._parent._updatePristine(w)}_updateTouched(w={}){this.touched=this._anyControlsTouched(),this._parent&&!w.onlySelf&&this._parent._updateTouched(w)}_registerOnCollectionChange(w){this._onCollectionChange=w}_setUpdateStrategy(w){Or(w)&&null!=w.updateOn&&(this._updateOn=w.updateOn)}_parentMarkedDirty(w){return!w&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(w){return null}_assignValidators(w){this._rawValidators=Array.isArray(w)?w.slice():w,this._composedValidatorFn=function $t(Y){return Array.isArray(Y)?Qt(Y):Y||null}(this._rawValidators)}_assignAsyncValidators(w){this._rawAsyncValidators=Array.isArray(w)?w.slice():w,this._composedAsyncValidatorFn=function Cr(Y){return Array.isArray(Y)?Yt(Y):Y||null}(this._rawAsyncValidators)}}class St extends vi{constructor(w,T,S){super(qt(T),Wn(S,T)),this.controls=w,this._initObservables(),this._setUpdateStrategy(T),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(w,T){return this.controls[w]?this.controls[w]:(this.controls[w]=T,T.setParent(this),T._registerOnCollectionChange(this._onCollectionChange),T)}addControl(w,T,S={}){this.registerControl(w,T),this.updateValueAndValidity({emitEvent:S.emitEvent}),this._onCollectionChange()}removeControl(w,T={}){this.controls[w]&&this.controls[w]._registerOnCollectionChange(()=>{}),delete this.controls[w],this.updateValueAndValidity({emitEvent:T.emitEvent}),this._onCollectionChange()}setControl(w,T,S={}){this.controls[w]&&this.controls[w]._registerOnCollectionChange(()=>{}),delete this.controls[w],T&&this.registerControl(w,T),this.updateValueAndValidity({emitEvent:S.emitEvent}),this._onCollectionChange()}contains(w){return this.controls.hasOwnProperty(w)&&this.controls[w].enabled}setValue(w,T={}){(function fr(Y,w,T){Y._forEachChild((S,j)=>{if(void 0===T[j])throw new m.vHH(1002,jn?function dr(Y,w){return`Must supply a value for form control ${wn(Y,w)}`}(w,j):"")})})(this,!0,w),Object.keys(w).forEach(S=>{(function Zr(Y,w,T){const S=Y.controls;if(!(w?Object.keys(S):S).length)throw new m.vHH(1e3,jn?function ln(Y){return`\n    There are no form controls registered with this ${Y?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(w):"");if(!S[T])throw new m.vHH(1001,jn?function Un(Y,w){return`Cannot find form control ${wn(Y,w)}`}(w,T):"")})(this,!0,S),this.controls[S].setValue(w[S],{onlySelf:!0,emitEvent:T.emitEvent})}),this.updateValueAndValidity(T)}patchValue(w,T={}){null!=w&&(Object.keys(w).forEach(S=>{const j=this.controls[S];j&&j.patchValue(w[S],{onlySelf:!0,emitEvent:T.emitEvent})}),this.updateValueAndValidity(T))}reset(w={},T={}){this._forEachChild((S,j)=>{S.reset(w[j],{onlySelf:!0,emitEvent:T.emitEvent})}),this._updatePristine(T),this._updateTouched(T),this.updateValueAndValidity(T)}getRawValue(){return this._reduceChildren({},(w,T,S)=>(w[S]=T.getRawValue(),w))}_syncPendingControls(){let w=this._reduceChildren(!1,(T,S)=>!!S._syncPendingControls()||T);return w&&this.updateValueAndValidity({onlySelf:!0}),w}_forEachChild(w){Object.keys(this.controls).forEach(T=>{const S=this.controls[T];S&&w(S,T)})}_setUpControls(){this._forEachChild(w=>{w.setParent(this),w._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(w){for(const[T,S]of Object.entries(this.controls))if(this.contains(T)&&w(S))return!0;return!1}_reduceValue(){return this._reduceChildren({},(T,S,j)=>((S.enabled||this.disabled)&&(T[j]=S.value),T))}_reduceChildren(w,T){let S=w;return this._forEachChild((j,ve)=>{S=T(S,j,ve)}),S}_allControlsDisabled(){for(const w of Object.keys(this.controls))if(this.controls[w].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(w){return this.controls.hasOwnProperty(w)?this.controls[w]:null}}const Tn=new m.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>sr}),sr="always";function Yr(Y,w,T=sr){var S,j;pi(Y,w),w.valueAccessor.writeValue(Y.value),(Y.disabled||"always"===T)&&(null===(S=(j=w.valueAccessor).setDisabledState)||void 0===S||S.call(j,Y.disabled)),function wo(Y,w){w.valueAccessor.registerOnChange(T=>{Y._pendingValue=T,Y._pendingChange=!0,Y._pendingDirty=!0,"change"===Y.updateOn&&pr(Y,w)})}(Y,w),function Oi(Y,w){const T=(S,j)=>{w.valueAccessor.writeValue(S),j&&w.viewToModelUpdate(S)};Y.registerOnChange(T),w._registerOnDestroy(()=>{Y._unregisterOnChange(T)})}(Y,w),function Mr(Y,w){w.valueAccessor.registerOnTouched(()=>{Y._pendingTouched=!0,"blur"===Y.updateOn&&Y._pendingChange&&pr(Y,w),"submit"!==Y.updateOn&&Y.markAsTouched()})}(Y,w),function Lo(Y,w){if(w.valueAccessor.setDisabledState){const T=S=>{w.valueAccessor.setDisabledState(S)};Y.registerOnDisabledChange(T),w._registerOnDestroy(()=>{Y._unregisterOnDisabledChange(T)})}}(Y,w)}function ti(Y,w){Y.forEach(T=>{T.registerOnValidatorChange&&T.registerOnValidatorChange(w)})}function pi(Y,w){const T=function Mn(Y){return Y._rawValidators}(Y);null!==w.validator?Y.setValidators(yn(T,w.validator)):"function"==typeof T&&Y.setValidators([T]);const S=function mn(Y){return Y._rawAsyncValidators}(Y);null!==w.asyncValidator?Y.setAsyncValidators(yn(S,w.asyncValidator)):"function"==typeof S&&Y.setAsyncValidators([S]);const j=()=>Y.updateValueAndValidity();ti(w._rawValidators,j),ti(w._rawAsyncValidators,j)}function pr(Y,w){Y._pendingDirty&&Y.markAsDirty(),Y.setValue(Y._pendingValue,{emitModelToViewChange:!1}),w.viewToModelUpdate(Y._pendingValue),Y._pendingChange=!1}const Bt={provide:sn,useExisting:(0,m.Gpc)(()=>xt)},Ge=(()=>Promise.resolve())();let xt=(()=>{class Y extends sn{constructor(T,S,j){super(),this.callSetDisabledState=j,this.submitted=!1,this._directives=new Set,this.ngSubmit=new m.vpe,this.form=new St({},Qt(T),Yt(S))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(T){Ge.then(()=>{const S=this._findContainer(T.path);T.control=S.registerControl(T.name,T.control),Yr(T.control,T,this.callSetDisabledState),T.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(T)})}getControl(T){return this.form.get(T.path)}removeControl(T){Ge.then(()=>{const S=this._findContainer(T.path);S&&S.removeControl(T.name),this._directives.delete(T)})}addFormGroup(T){Ge.then(()=>{const S=this._findContainer(T.path),j=new St({});(function Tr(Y,w){pi(Y,w)})(j,T),S.registerControl(T.name,j),j.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(T){Ge.then(()=>{const S=this._findContainer(T.path);S&&S.removeControl(T.name)})}getFormGroup(T){return this.form.get(T.path)}updateModel(T,S){Ge.then(()=>{this.form.get(T.path).setValue(S)})}setValue(T){this.control.setValue(T)}onSubmit(T){var S;return this.submitted=!0,function Se(Y,w){Y._syncPendingControls(),w.forEach(T=>{const S=T.control;"submit"===S.updateOn&&S._pendingChange&&(T.viewToModelUpdate(S._pendingValue),S._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(T),"dialog"===(null==T||null===(S=T.target)||void 0===S?void 0:S.method)}onReset(){this.resetForm()}resetForm(T){this.form.reset(T),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(T){return T.pop(),T.length?this.form.get(T):this.form}}return Y.\u0275fac=function(T){return new(T||Y)(m.Y36(Ye,10),m.Y36($,10),m.Y36(Tn,8))},Y.\u0275dir=m.lG2({type:Y,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(T,S){1&T&&m.NdJ("submit",function(ve){return S.onSubmit(ve)})("reset",function(){return S.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[m._Bn([Bt]),m.qOj]}),Y})();function Ut(Y,w){const T=Y.indexOf(w);T>-1&&Y.splice(T,1)}function Zt(Y){return"object"==typeof Y&&null!==Y&&2===Object.keys(Y).length&&"value"in Y&&"disabled"in Y}const on=class extends vi{constructor(w=null,T,S){super(qt(T),Wn(S,T)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(w),this._setUpdateStrategy(T),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Or(T)&&(T.nonNullable||T.initialValueIsDefault)&&(this.defaultValue=Zt(w)?w.value:w)}setValue(w,T={}){this.value=this._pendingValue=w,this._onChange.length&&!1!==T.emitModelToViewChange&&this._onChange.forEach(S=>S(this.value,!1!==T.emitViewToModelChange)),this.updateValueAndValidity(T)}patchValue(w,T={}){this.setValue(w,T)}reset(w=this.defaultValue,T={}){this._applyFormState(w),this.markAsPristine(T),this.markAsUntouched(T),this.setValue(this.value,T),this._pendingChange=!1}_updateValue(){}_anyControls(w){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(w){this._onChange.push(w)}_unregisterOnChange(w){Ut(this._onChange,w)}registerOnDisabledChange(w){this._onDisabledChange.push(w)}_unregisterOnDisabledChange(w){Ut(this._onDisabledChange,w)}_forEachChild(w){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(w){Zt(w)?(this.value=this._pendingValue=w.value,w.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=w}},fn={provide:Ir,useExisting:(0,m.Gpc)(()=>er)},Sn=(()=>Promise.resolve())();let er=(()=>{class Y extends Ir{constructor(T,S,j,ve,Vt,_n){super(),this._changeDetectorRef=Vt,this.callSetDisabledState=_n,this.control=new on,this._registered=!1,this.update=new m.vpe,this._parent=T,this._setValidators(S),this._setAsyncValidators(j),this.valueAccessor=function je(Y,w){if(!w)return null;let T,S,j;return Array.isArray(w),w.forEach(ve=>{ve.constructor===At?T=ve:function Fi(Y){return Object.getPrototypeOf(Y.constructor)===Xe}(ve)?S=ve:j=ve}),j||S||T||null}(0,ve)}ngOnChanges(T){if(this._checkForErrors(),!this._registered||"name"in T){if(this._registered&&(this._checkName(),this.formDirective)){const S=T.name.previousValue;this.formDirective.removeControl({name:S,path:this._getPath(S)})}this._setUpControl()}"isDisabled"in T&&this._updateDisabled(T),function Zi(Y,w){if(!Y.hasOwnProperty("model"))return!1;const T=Y.model;return!!T.isFirstChange()||!Object.is(w,T.currentValue)}(T,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(T){this.viewModel=T,this.update.emit(T)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Yr(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(T){Sn.then(()=>{var S;this.control.setValue(T,{emitViewToModelChange:!1}),null===(S=this._changeDetectorRef)||void 0===S||S.markForCheck()})}_updateDisabled(T){const S=T.isDisabled.currentValue,j=0!==S&&(0,m.D6c)(S);Sn.then(()=>{var ve;j&&!this.control.disabled?this.control.disable():!j&&this.control.disabled&&this.control.enable(),null===(ve=this._changeDetectorRef)||void 0===ve||ve.markForCheck()})}_getPath(T){return this._parent?function fi(Y,w){return[...w.path,Y]}(T,this._parent):[T]}}return Y.\u0275fac=function(T){return new(T||Y)(m.Y36(sn,9),m.Y36(Ye,10),m.Y36($,10),m.Y36(Ke,10),m.Y36(m.sBO,8),m.Y36(Tn,8))},Y.\u0275dir=m.lG2({type:Y,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[m._Bn([fn]),m.qOj,m.TTD]}),Y})(),mr=(()=>{class Y{}return Y.\u0275fac=function(T){return new(T||Y)},Y.\u0275dir=m.lG2({type:Y,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),Y})(),Xr=(()=>{class Y{}return Y.\u0275fac=function(T){return new(T||Y)},Y.\u0275mod=m.oAB({type:Y}),Y.\u0275inj=m.cJS({}),Y})();let jo=(()=>{class Y{constructor(){this._validator=Ze}ngOnChanges(T){if(this.inputName in T){const S=this.normalizeInput(T[this.inputName].currentValue);this._enabled=this.enabled(S),this._validator=this._enabled?this.createValidator(S):Ze,this._onChange&&this._onChange()}}validate(T){return this._validator(T)}registerOnValidatorChange(T){this._onChange=T}enabled(T){return null!=T}}return Y.\u0275fac=function(T){return new(T||Y)},Y.\u0275dir=m.lG2({type:Y,features:[m.TTD]}),Y})();const Xi={provide:Ye,useExisting:(0,m.Gpc)(()=>ys),multi:!0};let ys=(()=>{class Y extends jo{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=m.D6c,this.createValidator=T=>ft}enabled(T){return T}}return Y.\u0275fac=function(){let w;return function(S){return(w||(w=m.n5z(Y)))(S||Y)}}(),Y.\u0275dir=m.lG2({type:Y,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(T,S){2&T&&m.uIk("required",S._enabled?"":null)},inputs:{required:"required"},features:[m._Bn([Xi]),m.qOj]}),Y})();const _s={provide:Ye,useExisting:(0,m.Gpc)(()=>Zs),multi:!0};let Zs=(()=>{class Y extends jo{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=m.D6c,this.createValidator=T=>mt}enabled(T){return T}}return Y.\u0275fac=function(){let w;return function(S){return(w||(w=m.n5z(Y)))(S||Y)}}(),Y.\u0275dir=m.lG2({type:Y,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[m._Bn([_s]),m.qOj]}),Y})();const So={provide:Ye,useExisting:(0,m.Gpc)(()=>wi),multi:!0};let wi=(()=>{class Y extends jo{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=T=>function lo(Y){return"number"==typeof Y?Y:parseInt(Y,10)}(T),this.createValidator=T=>function gt(Y){return w=>st(w.value)||!function Be(Y){return null!=Y&&"number"==typeof Y.length}(w.value)?null:w.value.length<Y?{minlength:{requiredLength:Y,actualLength:w.value.length}}:null}(T)}}return Y.\u0275fac=function(){let w;return function(S){return(w||(w=m.n5z(Y)))(S||Y)}}(),Y.\u0275dir=m.lG2({type:Y,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(T,S){2&T&&m.uIk("minlength",S._enabled?S.minlength:null)},inputs:{minlength:"minlength"},features:[m._Bn([So]),m.qOj]}),Y})(),Fr=(()=>{class Y{}return Y.\u0275fac=function(T){return new(T||Y)},Y.\u0275mod=m.oAB({type:Y}),Y.\u0275inj=m.cJS({imports:[Xr]}),Y})(),Es=(()=>{class Y{static withConfig(T){var S;return{ngModule:Y,providers:[{provide:Tn,useValue:null!==(S=T.callSetDisabledState)&&void 0!==S?S:sr}]}}}return Y.\u0275fac=function(T){return new(T||Y)},Y.\u0275mod=m.oAB({type:Y}),Y.\u0275inj=m.cJS({imports:[Fr]}),Y})()},1481:(pn,Pe,U)=>{"use strict";U.d(Pe,{Dx:()=>rr,H7:()=>Or,b2:()=>Ir,q6:()=>Nn});var m=U(6895),J=U(4650);class H extends m.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class he extends H{static makeCurrent(){(0,m.HT)(new he)}onAndCancel(vt,Je,wt){return vt.addEventListener(Je,wt,!1),()=>{vt.removeEventListener(Je,wt,!1)}}dispatchEvent(vt,Je){vt.dispatchEvent(Je)}remove(vt){vt.parentNode&&vt.parentNode.removeChild(vt)}createElement(vt,Je){return(Je=Je||this.getDefaultDocument()).createElement(vt)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(vt){return vt.nodeType===Node.ELEMENT_NODE}isShadowRoot(vt){return vt instanceof DocumentFragment}getGlobalEventTarget(vt,Je){return"window"===Je?window:"document"===Je?vt:"body"===Je?vt.body:null}getBaseHref(vt){const Je=function we(){return le=le||document.querySelector("base"),le?le.getAttribute("href"):null}();return null==Je?null:function be(St){ye=ye||document.createElement("a"),ye.setAttribute("href",St);const vt=ye.pathname;return"/"===vt.charAt(0)?vt:`/${vt}`}(Je)}resetBaseElement(){le=null}getUserAgent(){return window.navigator.userAgent}getCookie(vt){return(0,m.Mx)(document.cookie,vt)}}let ye,le=null;const $e=new J.OlP("TRANSITION_ID"),De=[{provide:J.ip1,useFactory:function ge(St,vt,Je){return()=>{Je.get(J.CZH).donePromise.then(()=>{const wt=(0,m.q)(),an=vt.querySelectorAll(`style[ng-transition="${St}"]`);for(let Tn=0;Tn<an.length;Tn++)wt.remove(an[Tn])})}},deps:[$e,m.K0,J.zs3],multi:!0}];let Ne=(()=>{class St{build(){return new XMLHttpRequest}}return St.\u0275fac=function(Je){return new(Je||St)},St.\u0275prov=J.Yz7({token:St,factory:St.\u0275fac}),St})();const Xe=new J.OlP("EventManagerPlugins");let Ke=(()=>{class St{constructor(Je,wt){this._zone=wt,this._eventNameToPlugin=new Map,Je.forEach(an=>an.manager=this),this._plugins=Je.slice().reverse()}addEventListener(Je,wt,an){return this._findPluginFor(wt).addEventListener(Je,wt,an)}addGlobalEventListener(Je,wt,an){return this._findPluginFor(wt).addGlobalEventListener(Je,wt,an)}getZone(){return this._zone}_findPluginFor(Je){const wt=this._eventNameToPlugin.get(Je);if(wt)return wt;const an=this._plugins;for(let Tn=0;Tn<an.length;Tn++){const sr=an[Tn];if(sr.supports(Je))return this._eventNameToPlugin.set(Je,sr),sr}throw new Error(`No event manager plugin found for event ${Je}`)}}return St.\u0275fac=function(Je){return new(Je||St)(J.LFG(Xe),J.LFG(J.R0b))},St.\u0275prov=J.Yz7({token:St,factory:St.\u0275fac}),St})();class Lt{constructor(vt){this._doc=vt}addGlobalEventListener(vt,Je,wt){const an=(0,m.q)().getGlobalEventTarget(this._doc,vt);if(!an)throw new Error(`Unsupported event target ${an} for event ${Je}`);return this.addEventListener(an,Je,wt)}}let We=(()=>{class St{constructor(){this.usageCount=new Map}addStyles(Je){for(const wt of Je)1===this.changeUsageCount(wt,1)&&this.onStyleAdded(wt)}removeStyles(Je){for(const wt of Je)0===this.changeUsageCount(wt,-1)&&this.onStyleRemoved(wt)}onStyleRemoved(Je){}onStyleAdded(Je){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(Je,wt){var an;const Tn=this.usageCount;let sr=null!==(an=Tn.get(Je))&&void 0!==an?an:0;return sr+=wt,sr>0?Tn.set(Je,sr):Tn.delete(Je),sr}ngOnDestroy(){for(const Je of this.getAllStyles())this.onStyleRemoved(Je);this.usageCount.clear()}}return St.\u0275fac=function(Je){return new(Je||St)},St.\u0275prov=J.Yz7({token:St,factory:St.\u0275fac}),St})(),Fe=(()=>{class St extends We{constructor(Je){super(),this.doc=Je,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(Je){for(const wt of this.hostNodes)this.addStyleToHost(wt,Je)}onStyleRemoved(Je){const wt=this.styleRef,an=wt.get(Je);null==an||an.forEach(Tn=>Tn.remove()),wt.delete(Je)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(Je){this.hostNodes.add(Je);for(const wt of this.getAllStyles())this.addStyleToHost(Je,wt)}removeHost(Je){this.hostNodes.delete(Je)}addStyleToHost(Je,wt){const an=this.doc.createElement("style");an.textContent=wt,Je.appendChild(an);const Tn=this.styleRef.get(wt);Tn?Tn.push(an):this.styleRef.set(wt,[an])}resetHostNodes(){const Je=this.hostNodes;Je.clear(),Je.add(this.doc.head)}}return St.\u0275fac=function(Je){return new(Je||St)(J.LFG(m.K0))},St.\u0275prov=J.Yz7({token:St,factory:St.\u0275fac}),St})();const Ce={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ct=/%COMP%/g,$=new J.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function qe(St,vt){return vt.flat(100).map(Je=>Je.replace(ct,St))}function ut(St){return vt=>{if("__ngUnwrap__"===vt)return St;!1===St(vt)&&(vt.preventDefault(),vt.returnValue=!1)}}let ft=(()=>{class St{constructor(Je,wt,an,Tn){this.eventManager=Je,this.sharedStylesHost=wt,this.appId=an,this.removeStylesOnCompDestory=Tn,this.rendererByCompId=new Map,this.defaultRenderer=new pt(Je)}createRenderer(Je,wt){if(!Je||!wt)return this.defaultRenderer;const an=this.getOrCreateRenderer(Je,wt);return an instanceof me?an.applyToHost(Je):an instanceof Ze&&an.applyStyles(),an}getOrCreateRenderer(Je,wt){const an=this.rendererByCompId;let Tn=an.get(wt.id);if(!Tn){const sr=this.eventManager,fi=this.sharedStylesHost,Yr=this.removeStylesOnCompDestory;switch(wt.encapsulation){case J.ifc.Emulated:Tn=new me(sr,fi,wt,this.appId,Yr);break;case J.ifc.ShadowDom:return new it(sr,fi,Je,wt);default:Tn=new Ze(sr,fi,wt,Yr)}Tn.onDestroy=()=>an.delete(wt.id),an.set(wt.id,Tn)}return Tn}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return St.\u0275fac=function(Je){return new(Je||St)(J.LFG(Ke),J.LFG(Fe),J.LFG(J.AFp),J.LFG($))},St.\u0275prov=J.Yz7({token:St,factory:St.\u0275fac}),St})();class pt{constructor(vt){this.eventManager=vt,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(vt,Je){return Je?document.createElementNS(Ce[Je]||Je,vt):document.createElement(vt)}createComment(vt){return document.createComment(vt)}createText(vt){return document.createTextNode(vt)}appendChild(vt,Je){(Le(vt)?vt.content:vt).appendChild(Je)}insertBefore(vt,Je,wt){vt&&(Le(vt)?vt.content:vt).insertBefore(Je,wt)}removeChild(vt,Je){vt&&vt.removeChild(Je)}selectRootElement(vt,Je){let wt="string"==typeof vt?document.querySelector(vt):vt;if(!wt)throw new Error(`The selector "${vt}" did not match any elements`);return Je||(wt.textContent=""),wt}parentNode(vt){return vt.parentNode}nextSibling(vt){return vt.nextSibling}setAttribute(vt,Je,wt,an){if(an){Je=an+":"+Je;const Tn=Ce[an];Tn?vt.setAttributeNS(Tn,Je,wt):vt.setAttribute(Je,wt)}else vt.setAttribute(Je,wt)}removeAttribute(vt,Je,wt){if(wt){const an=Ce[wt];an?vt.removeAttributeNS(an,Je):vt.removeAttribute(`${wt}:${Je}`)}else vt.removeAttribute(Je)}addClass(vt,Je){vt.classList.add(Je)}removeClass(vt,Je){vt.classList.remove(Je)}setStyle(vt,Je,wt,an){an&(J.JOm.DashCase|J.JOm.Important)?vt.style.setProperty(Je,wt,an&J.JOm.Important?"important":""):vt.style[Je]=wt}removeStyle(vt,Je,wt){wt&J.JOm.DashCase?vt.style.removeProperty(Je):vt.style[Je]=""}setProperty(vt,Je,wt){vt[Je]=wt}setValue(vt,Je){vt.nodeValue=Je}listen(vt,Je,wt){return"string"==typeof vt?this.eventManager.addGlobalEventListener(vt,Je,ut(wt)):this.eventManager.addEventListener(vt,Je,ut(wt))}}function Le(St){return"TEMPLATE"===St.tagName&&void 0!==St.content}class it extends pt{constructor(vt,Je,wt,an){super(vt),this.sharedStylesHost=Je,this.hostEl=wt,this.shadowRoot=wt.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Tn=qe(an.id,an.styles);for(const sr of Tn){const fi=document.createElement("style");fi.textContent=sr,this.shadowRoot.appendChild(fi)}}nodeOrShadowRoot(vt){return vt===this.hostEl?this.shadowRoot:vt}appendChild(vt,Je){return super.appendChild(this.nodeOrShadowRoot(vt),Je)}insertBefore(vt,Je,wt){return super.insertBefore(this.nodeOrShadowRoot(vt),Je,wt)}removeChild(vt,Je){return super.removeChild(this.nodeOrShadowRoot(vt),Je)}parentNode(vt){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(vt)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ze extends pt{constructor(vt,Je,wt,an,Tn=wt.id){super(vt),this.sharedStylesHost=Je,this.removeStylesOnCompDestory=an,this.rendererUsageCount=0,this.styles=qe(Tn,wt.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){var vt;this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount)&&(null===(vt=this.onDestroy)||void 0===vt||vt.call(this))}}class me extends Ze{constructor(vt,Je,wt,an,Tn){const sr=an+"-"+wt.id;super(vt,Je,wt,Tn,sr),this.contentAttr=function lt(St){return"_ngcontent-%COMP%".replace(ct,St)}(sr),this.hostAttr=function Qe(St){return"_nghost-%COMP%".replace(ct,St)}(sr)}applyToHost(vt){this.applyStyles(),this.setAttribute(vt,this.hostAttr,"")}createElement(vt,Je){const wt=super.createElement(vt,Je);return super.setAttribute(wt,this.contentAttr,""),wt}}let te=(()=>{class St extends Lt{constructor(Je){super(Je)}supports(Je){return!0}addEventListener(Je,wt,an){return Je.addEventListener(wt,an,!1),()=>this.removeEventListener(Je,wt,an)}removeEventListener(Je,wt,an){return Je.removeEventListener(wt,an)}}return St.\u0275fac=function(Je){return new(Je||St)(J.LFG(m.K0))},St.\u0275prov=J.Yz7({token:St,factory:St.\u0275fac}),St})();const q=["alt","control","meta","shift"],re={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fe={alt:St=>St.altKey,control:St=>St.ctrlKey,meta:St=>St.metaKey,shift:St=>St.shiftKey};let ke=(()=>{class St extends Lt{constructor(Je){super(Je)}supports(Je){return null!=St.parseEventName(Je)}addEventListener(Je,wt,an){const Tn=St.parseEventName(wt),sr=St.eventCallback(Tn.fullKey,an,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,m.q)().onAndCancel(Je,Tn.domEventName,sr))}static parseEventName(Je){const wt=Je.toLowerCase().split("."),an=wt.shift();if(0===wt.length||"keydown"!==an&&"keyup"!==an)return null;const Tn=St._normalizeKey(wt.pop());let sr="",fi=wt.indexOf("code");if(fi>-1&&(wt.splice(fi,1),sr="code."),q.forEach(Ei=>{const ti=wt.indexOf(Ei);ti>-1&&(wt.splice(ti,1),sr+=Ei+".")}),sr+=Tn,0!=wt.length||0===Tn.length)return null;const Yr={};return Yr.domEventName=an,Yr.fullKey=sr,Yr}static matchEventFullKeyCode(Je,wt){let an=re[Je.key]||Je.key,Tn="";return wt.indexOf("code.")>-1&&(an=Je.code,Tn="code."),!(null==an||!an)&&(an=an.toLowerCase()," "===an?an="space":"."===an&&(an="dot"),q.forEach(sr=>{sr!==an&&(0,fe[sr])(Je)&&(Tn+=sr+".")}),Tn+=an,Tn===wt)}static eventCallback(Je,wt,an){return Tn=>{St.matchEventFullKeyCode(Tn,Je)&&an.runGuarded(()=>wt(Tn))}}static _normalizeKey(Je){return"esc"===Je?"escape":Je}}return St.\u0275fac=function(Je){return new(Je||St)(J.LFG(m.K0))},St.\u0275prov=J.Yz7({token:St,factory:St.\u0275fac}),St})();const Nn=(0,J.eFA)(J._c5,"browser",[{provide:J.Lbi,useValue:m.bD},{provide:J.g9A,useValue:function Mn(){he.makeCurrent()},multi:!0},{provide:m.K0,useFactory:function Gn(){return(0,J.RDi)(document),document},deps:[]}]),Dn=new J.OlP(""),En=[{provide:J.rWj,useClass:class xe{addToWindow(vt){J.dqk.getAngularTestability=(wt,an=!0)=>{const Tn=vt.findTestabilityInTree(wt,an);if(null==Tn)throw new Error("Could not find testability for element.");return Tn},J.dqk.getAllAngularTestabilities=()=>vt.getAllTestabilities(),J.dqk.getAllAngularRootElements=()=>vt.getAllRootElements(),J.dqk.frameworkStabilizers||(J.dqk.frameworkStabilizers=[]),J.dqk.frameworkStabilizers.push(wt=>{const an=J.dqk.getAllAngularTestabilities();let Tn=an.length,sr=!1;const fi=function(Yr){sr=sr||Yr,Tn--,0==Tn&&wt(sr)};an.forEach(function(Yr){Yr.whenStable(fi)})})}findTestabilityInTree(vt,Je,wt){if(null==Je)return null;const an=vt.getTestability(Je);return null!=an?an:wt?(0,m.q)().isShadowRoot(Je)?this.findTestabilityInTree(vt,Je.host,!0):this.findTestabilityInTree(vt,Je.parentElement,!0):null}},deps:[]},{provide:J.lri,useClass:J.dDg,deps:[J.R0b,J.eoX,J.rWj]},{provide:J.dDg,useClass:J.dDg,deps:[J.R0b,J.eoX,J.rWj]}],sn=[{provide:J.zSh,useValue:"root"},{provide:J.qLn,useFactory:function mn(){return new J.qLn},deps:[]},{provide:Xe,useClass:te,multi:!0,deps:[m.K0,J.R0b,J.Lbi]},{provide:Xe,useClass:ke,multi:!0,deps:[m.K0]},{provide:ft,useClass:ft,deps:[Ke,Fe,J.AFp,$]},{provide:J.FYo,useExisting:ft},{provide:We,useExisting:Fe},{provide:Fe,useClass:Fe,deps:[m.K0]},{provide:Ke,useClass:Ke,deps:[Xe,J.R0b]},{provide:m.JF,useClass:Ne,deps:[]},[]];let Ir=(()=>{class St{constructor(Je){}static withServerTransition(Je){return{ngModule:St,providers:[{provide:J.AFp,useValue:Je.appId},{provide:$e,useExisting:J.AFp},De]}}}return St.\u0275fac=function(Je){return new(Je||St)(J.LFG(Dn,12))},St.\u0275mod=J.oAB({type:St}),St.\u0275inj=J.cJS({providers:[...sn,...En],imports:[m.ez,J.hGG]}),St})(),rr=(()=>{class St{constructor(Je){this._doc=Je}getTitle(){return this._doc.title}setTitle(Je){this._doc.title=Je||""}}return St.\u0275fac=function(Je){return new(Je||St)(J.LFG(m.K0))},St.\u0275prov=J.Yz7({token:St,factory:function(Je){let wt=null;return wt=Je?new Je:function Jr(){return new rr((0,J.LFG)(m.K0))}(),wt},providedIn:"root"}),St})();typeof window<"u"&&window;let Or=(()=>{class St{}return St.\u0275fac=function(Je){return new(Je||St)},St.\u0275prov=J.Yz7({token:St,factory:function(Je){let wt=null;return wt=Je?new(Je||St):J.LFG(fr),wt},providedIn:"root"}),St})(),fr=(()=>{class St extends Or{constructor(Je){super(),this._doc=Je}sanitize(Je,wt){if(null==wt)return null;switch(Je){case J.q3G.NONE:return wt;case J.q3G.HTML:return(0,J.qzn)(wt,"HTML")?(0,J.z3N)(wt):(0,J.EiD)(this._doc,String(wt)).toString();case J.q3G.STYLE:return(0,J.qzn)(wt,"Style")?(0,J.z3N)(wt):wt;case J.q3G.SCRIPT:if((0,J.qzn)(wt,"Script"))return(0,J.z3N)(wt);throw new Error("unsafe value used in a script context");case J.q3G.URL:return(0,J.qzn)(wt,"URL")?(0,J.z3N)(wt):(0,J.mCW)(String(wt));case J.q3G.RESOURCE_URL:if((0,J.qzn)(wt,"ResourceURL"))return(0,J.z3N)(wt);throw new Error(`unsafe value used in a resource URL context (see ${J.JZr})`);default:throw new Error(`Unexpected SecurityContext ${Je} (see ${J.JZr})`)}}bypassSecurityTrustHtml(Je){return(0,J.JVY)(Je)}bypassSecurityTrustStyle(Je){return(0,J.L6k)(Je)}bypassSecurityTrustScript(Je){return(0,J.eBb)(Je)}bypassSecurityTrustUrl(Je){return(0,J.LAX)(Je)}bypassSecurityTrustResourceUrl(Je){return(0,J.pB0)(Je)}}return St.\u0275fac=function(Je){return new(Je||St)(J.LFG(m.K0))},St.\u0275prov=J.Yz7({token:St,factory:function(Je){let wt=null;return wt=Je?new Je:function Zr(St){return new fr(St.get(m.K0))}(J.LFG(J.zs3)),wt},providedIn:"root"}),St})()},2435:(pn,Pe,U)=>{"use strict";U.d(Pe,{gz:()=>Uo,y6:()=>Qo,OD:()=>on,eC:()=>mn,wm:()=>uc,wN:()=>fo,F0:()=>qi,rH:()=>$a,Bz:()=>Za,Hx:()=>dr});var m=U(4650),J=U(8996),H=U(9646),he=U(1135),le=U(6805),we=U(9751),ye=U(4742),be=U(4671),$e=U(3268),ge=U(7669),De=U(1810),xe=U(5403),Ne=U(9672);function Xe(...F){const B=(0,ge.yG)(F),O=(0,ge.jO)(F),{args:V,keys:ne}=(0,ye.D)(F);if(0===V.length)return(0,J.D)([],B);const _e=new we.y(function Ke(F,B,O=be.y){return V=>{Lt(B,()=>{const{length:ne}=F,_e=new Array(ne);let Ae=ne,Tt=ne;for(let tn=0;tn<ne;tn++)Lt(B,()=>{const On=(0,J.D)(F[tn],B);let ar=!1;On.subscribe((0,xe.x)(V,or=>{_e[tn]=or,ar||(ar=!0,Tt--),Tt||V.next(O(_e.slice()))},()=>{--Ae||V.complete()}))},V)},V)}}(V,B,ne?Ae=>(0,De.n)(ne,Ae):be.y));return O?_e.pipe((0,$e.Z)(O)):_e}function Lt(F,B,O){F?(0,Ne.f)(O,F,B):B()}var We=U(7272),Fe=U(8421);function Ce(F){return new we.y(B=>{(0,Fe.Xf)(F()).subscribe(B)})}var ct=U(9635),At=U(576);function yt(F,B){const O=(0,At.m)(F)?F:()=>F,V=ne=>ne.error(O());return new we.y(B?ne=>B.schedule(V,0,ne):V)}var st=U(515),Be=U(727),Ye=U(4482);function $(){return(0,Ye.e)((F,B)=>{let O=null;F._refCount++;const V=(0,xe.x)(B,void 0,void 0,void 0,()=>{if(!F||F._refCount<=0||0<--F._refCount)return void(O=null);const ne=F._connection,_e=O;O=null,ne&&(!_e||ne===_e)&&ne.unsubscribe(),B.unsubscribe()});F.subscribe(V),V.closed||(O=F.connect())})}class lt extends we.y{constructor(B,O){super(),this.source=B,this.subjectFactory=O,this._subject=null,this._refCount=0,this._connection=null,(0,Ye.A)(B)&&(this.lift=B.lift)}_subscribe(B){return this.getSubject().subscribe(B)}getSubject(){const B=this._subject;return(!B||B.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:B}=this;this._subject=this._connection=null,null==B||B.unsubscribe()}connect(){let B=this._connection;if(!B){B=this._connection=new Be.w0;const O=this.getSubject();B.add(this.source.subscribe((0,xe.x)(O,void 0,()=>{this._teardown(),O.complete()},V=>{this._teardown(),O.error(V)},()=>this._teardown()))),B.closed&&(this._connection=null,B=Be.w0.EMPTY)}return B}refCount(){return $()(this)}}var Qe=U(7579),qe=U(6895),ut=U(4004),ft=U(3900),pt=U(5698),mt=U(8675),gt=U(9300),Le=U(5577),it=U(590);function Ze(F,B){return(0,At.m)(B)?(0,Le.z)(F,B,1):(0,Le.z)(F,1)}var me=U(8505);function te(F){return(0,Ye.e)((B,O)=>{let _e,V=null,ne=!1;V=B.subscribe((0,xe.x)(O,void 0,void 0,Ae=>{_e=(0,Fe.Xf)(F(Ae,te(F)(B))),V?(V.unsubscribe(),V=null,_e.subscribe(O)):ne=!0})),ne&&(V.unsubscribe(),V=null,_e.subscribe(O))})}var q=U(5026);function re(F){return F<=0?()=>st.E:(0,Ye.e)((B,O)=>{let V=[];B.subscribe((0,xe.x)(O,ne=>{V.push(ne),F<V.length&&V.shift()},()=>{for(const ne of V)O.next(ne);O.complete()},void 0,()=>{V=null}))})}var fe=U(8068),ke=U(6590);function rt(F,B){const O=arguments.length>=2;return V=>V.pipe(F?(0,gt.h)((ne,_e)=>F(ne,_e,V)):be.y,re(1),O?(0,ke.d)(B):(0,fe.T)(()=>new le.K))}function Yt(F){return(0,Ye.e)((B,O)=>{try{B.subscribe(O)}finally{O.add(F)}})}var yn=U(8189),Mn=U(1481);const mn="primary",Gn=Symbol("RouteTitle");class Ar{constructor(B){this.params=B||{}}has(B){return Object.prototype.hasOwnProperty.call(this.params,B)}get(B){if(this.has(B)){const O=this.params[B];return Array.isArray(O)?O[0]:O}return null}getAll(B){if(this.has(B)){const O=this.params[B];return Array.isArray(O)?O:[O]}return[]}get keys(){return Object.keys(this.params)}}function Nn(F){return new Ar(F)}function Dn(F,B,O){const V=O.path.split("/");if(V.length>F.length||"full"===O.pathMatch&&(B.hasChildren()||V.length<F.length))return null;const ne={};for(let _e=0;_e<V.length;_e++){const Ae=V[_e],Tt=F[_e];if(Ae.startsWith(":"))ne[Ae.substring(1)]=Tt;else if(Ae!==Tt.path)return null}return{consumed:F.slice(0,V.length),posParams:ne}}function sn(F,B){const O=F?Object.keys(F):void 0,V=B?Object.keys(B):void 0;if(!O||!V||O.length!=V.length)return!1;let ne;for(let _e=0;_e<O.length;_e++)if(ne=O[_e],!Ir(F[ne],B[ne]))return!1;return!0}function Ir(F,B){if(Array.isArray(F)&&Array.isArray(B)){if(F.length!==B.length)return!1;const O=[...F].sort(),V=[...B].sort();return O.every((ne,_e)=>V[_e]===ne)}return F===B}function Vr(F){return Array.prototype.concat.apply([],F)}function br(F){return F.length>0?F[F.length-1]:null}function Jr(F,B){for(const O in F)F.hasOwnProperty(O)&&B(F[O],O)}function rr(F){return(0,m.CqO)(F)?F:(0,m.QGY)(F)?(0,J.D)(Promise.resolve(F)):(0,H.of)(F)}const Bn=!1,cr={exact:function cn(F,B,O){if(!ln(F.segments,B.segments)||!Pi(F.segments,B.segments,O)||F.numberOfChildren!==B.numberOfChildren)return!1;for(const V in B.children)if(!F.children[V]||!cn(F.children[V],B.children[V],O))return!1;return!0},subset:Wi},zi={exact:function Wr(F,B){return sn(F,B)},subset:function _i(F,B){return Object.keys(B).length<=Object.keys(F).length&&Object.keys(B).every(O=>Ir(F[O],B[O]))},ignored:()=>!0};function qn(F,B,O){return cr[O.paths](F.root,B.root,O.matrixParams)&&zi[O.queryParams](F.queryParams,B.queryParams)&&!("exact"===O.fragment&&F.fragment!==B.fragment)}function Wi(F,B,O){return jr(F,B,B.segments,O)}function jr(F,B,O,V){if(F.segments.length>O.length){const ne=F.segments.slice(0,O.length);return!(!ln(ne,O)||B.hasChildren()||!Pi(ne,O,V))}if(F.segments.length===O.length){if(!ln(F.segments,O)||!Pi(F.segments,O,V))return!1;for(const ne in B.children)if(!F.children[ne]||!Wi(F.children[ne],B.children[ne],V))return!1;return!0}{const ne=O.slice(0,F.segments.length),_e=O.slice(F.segments.length);return!!(ln(F.segments,ne)&&Pi(F.segments,ne,V)&&F.children[mn])&&jr(F.children[mn],B,_e,V)}}function Pi(F,B,O){return B.every((V,ne)=>zi[O](F[ne].parameters,V.parameters))}class Rr{constructor(B=new Er([],{}),O={},V=null){this.root=B,this.queryParams=O,this.fragment=V}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nn(this.queryParams)),this._queryParamMap}toString(){return hr.serialize(this)}}class Er{constructor(B,O){this.segments=B,this.children=O,this.parent=null,Jr(O,(V,ne)=>V.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return He(this)}}class ii{constructor(B,O){this.path=B,this.parameters=O}get parameterMap(){return this._parameterMap||(this._parameterMap=Nn(this.parameters)),this._parameterMap}toString(){return Zr(this)}}function ln(F,B){return F.length===B.length&&F.every((O,V)=>O.path===B[V].path)}let dr=(()=>{class F{}return F.\u0275fac=function(O){return new(O||F)},F.\u0275prov=m.Yz7({token:F,factory:function(){return new jn},providedIn:"root"}),F})();class jn{parse(B){const O=new sr(B);return new Rr(O.parseRootSegment(),O.parseQueryParams(),O.parseFragment())}serialize(B){const O=`/${ot(B.root,!0)}`,V=function vi(F){const B=Object.keys(F).map(O=>{const V=F[O];return Array.isArray(V)?V.map(ne=>`${qt(O)}=${qt(ne)}`).join("&"):`${qt(O)}=${qt(V)}`}).filter(O=>!!O);return B.length?`?${B.join("&")}`:""}(B.queryParams);return`${O}${V}${"string"==typeof B.fragment?`#${function $t(F){return encodeURI(F)}(B.fragment)}`:""}`}}const hr=new jn;function He(F){return F.segments.map(B=>Zr(B)).join("/")}function ot(F,B){if(!F.hasChildren())return He(F);if(B){const O=F.children[mn]?ot(F.children[mn],!1):"",V=[];return Jr(F.children,(ne,_e)=>{_e!==mn&&V.push(`${_e}:${ot(ne,!1)}`)}),V.length>0?`${O}(${V.join("//")})`:O}{const O=function Un(F,B){let O=[];return Jr(F.children,(V,ne)=>{ne===mn&&(O=O.concat(B(V,ne)))}),Jr(F.children,(V,ne)=>{ne!==mn&&(O=O.concat(B(V,ne)))}),O}(F,(V,ne)=>ne===mn?[ot(F.children[mn],!1)]:[`${ne}:${ot(V,!1)}`]);return 1===Object.keys(F.children).length&&null!=F.children[mn]?`${He(F)}/${O[0]}`:`${He(F)}/(${O.join("//")})`}}function ht(F){return encodeURIComponent(F).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qt(F){return ht(F).replace(/%3B/gi,";")}function Wn(F){return ht(F).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Cr(F){return decodeURIComponent(F)}function Or(F){return Cr(F.replace(/\+/g,"%20"))}function Zr(F){return`${Wn(F.path)}${function fr(F){return Object.keys(F).map(B=>`;${Wn(B)}=${Wn(F[B])}`).join("")}(F.parameters)}`}const St=/^[^\/()?;=#]+/;function vt(F){const B=F.match(St);return B?B[0]:""}const Je=/^[^=?&#]+/,an=/^[^&#]+/;class sr{constructor(B){this.url=B,this.remaining=B}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Er([],{}):new Er([],this.parseChildren())}parseQueryParams(){const B={};if(this.consumeOptional("?"))do{this.parseQueryParam(B)}while(this.consumeOptional("&"));return B}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const B=[];for(this.peekStartsWith("(")||B.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),B.push(this.parseSegment());let O={};this.peekStartsWith("/(")&&(this.capture("/"),O=this.parseParens(!0));let V={};return this.peekStartsWith("(")&&(V=this.parseParens(!1)),(B.length>0||Object.keys(O).length>0)&&(V[mn]=new Er(B,O)),V}parseSegment(){const B=vt(this.remaining);if(""===B&&this.peekStartsWith(";"))throw new m.vHH(4009,Bn);return this.capture(B),new ii(Cr(B),this.parseMatrixParams())}parseMatrixParams(){const B={};for(;this.consumeOptional(";");)this.parseParam(B);return B}parseParam(B){const O=vt(this.remaining);if(!O)return;this.capture(O);let V="";if(this.consumeOptional("=")){const ne=vt(this.remaining);ne&&(V=ne,this.capture(V))}B[Cr(O)]=Cr(V)}parseQueryParam(B){const O=function wt(F){const B=F.match(Je);return B?B[0]:""}(this.remaining);if(!O)return;this.capture(O);let V="";if(this.consumeOptional("=")){const Ae=function Tn(F){const B=F.match(an);return B?B[0]:""}(this.remaining);Ae&&(V=Ae,this.capture(V))}const ne=Or(O),_e=Or(V);if(B.hasOwnProperty(ne)){let Ae=B[ne];Array.isArray(Ae)||(Ae=[Ae],B[ne]=Ae),Ae.push(_e)}else B[ne]=_e}parseParens(B){const O={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const V=vt(this.remaining),ne=this.remaining[V.length];if("/"!==ne&&")"!==ne&&";"!==ne)throw new m.vHH(4010,Bn);let _e;V.indexOf(":")>-1?(_e=V.slice(0,V.indexOf(":")),this.capture(_e),this.capture(":")):B&&(_e=mn);const Ae=this.parseChildren();O[_e]=1===Object.keys(Ae).length?Ae[mn]:new Er([],Ae),this.consumeOptional("//")}return O}peekStartsWith(B){return this.remaining.startsWith(B)}consumeOptional(B){return!!this.peekStartsWith(B)&&(this.remaining=this.remaining.substring(B.length),!0)}capture(B){if(!this.consumeOptional(B))throw new m.vHH(4011,Bn)}}function fi(F){return F.segments.length>0?new Er([],{[mn]:F}):F}function Yr(F){const B={};for(const V of Object.keys(F.children)){const _e=Yr(F.children[V]);(_e.segments.length>0||_e.hasChildren())&&(B[V]=_e)}return function Ei(F){if(1===F.numberOfChildren&&F.children[mn]){const B=F.children[mn];return new Er(F.segments.concat(B.segments),B.children)}return F}(new Er(F.segments,B))}function ti(F){return F instanceof Rr}const Lo=!1;function Mr(F,B,O,V,ne){var _e;if(0===O.length)return Tr(B.root,B.root,B.root,V,ne);const Ae=function Hn(F){if("string"==typeof F[0]&&1===F.length&&"/"===F[0])return new Ln(!0,0,F);let B=0,O=!1;const V=F.reduce((ne,_e,Ae)=>{if("object"==typeof _e&&null!=_e){if(_e.outlets){const Tt={};return Jr(_e.outlets,(tn,On)=>{Tt[On]="string"==typeof tn?tn.split("/"):tn}),[...ne,{outlets:Tt}]}if(_e.segmentPath)return[...ne,_e.segmentPath]}return"string"!=typeof _e?[...ne,_e]:0===Ae?(_e.split("/").forEach((Tt,tn)=>{0==tn&&"."===Tt||(0==tn&&""===Tt?O=!0:".."===Tt?B++:""!=Tt&&ne.push(Tt))}),ne):[...ne,_e]},[]);return new Ln(O,B,V)}(O);return Ae.toRoot()?Tr(B.root,B.root,new Er([],{}),V,ne):function Tt(On){var ar;const or=function Vi(F,B,O,V){if(F.isAbsolute)return new gr(B.root,!0,0);if(-1===V)return new gr(O,O===B.root,0);return function Zi(F,B,O){let V=F,ne=B,_e=O;for(;_e>ne;){if(_e-=ne,V=V.parent,!V)throw new m.vHH(4005,Lo&&"Invalid number of '../'");ne=V.segments.length}return new gr(V,!1,ne-_e)}(O,V+(pr(F.commands[0])?0:1),F.numberOfDoubleDots)}(Ae,B,null===(ar=F.snapshot)||void 0===ar?void 0:ar._urlSegment,On),K=or.processChildren?je(or.segmentGroup,or.index,Ae.commands):Se(or.segmentGroup,or.index,Ae.commands);return Tr(B.root,or.segmentGroup,K,V,ne)}(null===(_e=F.snapshot)||void 0===_e?void 0:_e._lastPathIndex)}function pr(F){return"object"==typeof F&&null!=F&&!F.outlets&&!F.segmentPath}function Oi(F){return"object"==typeof F&&null!=F&&F.outlets}function Tr(F,B,O,V,ne){let Ae,_e={};V&&Jr(V,(tn,On)=>{_e[On]=Array.isArray(tn)?tn.map(ar=>`${ar}`):`${tn}`}),Ae=F===B?O:oi(F,B,O);const Tt=fi(Yr(Ae));return new Rr(Tt,_e,ne)}function oi(F,B,O){const V={};return Jr(F.children,(ne,_e)=>{V[_e]=ne===B?O:oi(ne,B,O)}),new Er(F.segments,V)}class Ln{constructor(B,O,V){if(this.isAbsolute=B,this.numberOfDoubleDots=O,this.commands=V,B&&V.length>0&&pr(V[0]))throw new m.vHH(4003,Lo&&"Root segment cannot have matrix parameters");const ne=V.find(Oi);if(ne&&ne!==br(V))throw new m.vHH(4004,Lo&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gr{constructor(B,O,V){this.segmentGroup=B,this.processChildren=O,this.index=V}}function Se(F,B,O){if(F||(F=new Er([],{})),0===F.segments.length&&F.hasChildren())return je(F,B,O);const V=function Rt(F,B,O){let V=0,ne=B;const _e={match:!1,pathIndex:0,commandIndex:0};for(;ne<F.segments.length;){if(V>=O.length)return _e;const Ae=F.segments[ne],Tt=O[V];if(Oi(Tt))break;const tn=`${Tt}`,On=V<O.length-1?O[V+1]:null;if(ne>0&&void 0===tn)break;if(tn&&On&&"object"==typeof On&&void 0===On.outlets){if(!xt(tn,On,Ae))return _e;V+=2}else{if(!xt(tn,{},Ae))return _e;V++}ne++}return{match:!0,pathIndex:ne,commandIndex:V}}(F,B,O),ne=O.slice(V.commandIndex);if(V.match&&V.pathIndex<F.segments.length){const _e=new Er(F.segments.slice(0,V.pathIndex),{});return _e.children[mn]=new Er(F.segments.slice(V.pathIndex),F.children),je(_e,0,ne)}return V.match&&0===ne.length?new Er(F.segments,{}):V.match&&!F.hasChildren()?Ot(F,B,O):V.match?je(F,0,ne):Ot(F,B,O)}function je(F,B,O){if(0===O.length)return new Er(F.segments,{});{const V=function Fi(F){return Oi(F[0])?F[0].outlets:{[mn]:F}}(O),ne={};return!V[mn]&&F.children[mn]&&1===F.numberOfChildren&&0===F.children[mn].segments.length?je(F.children[mn],B,O):(Jr(V,(_e,Ae)=>{"string"==typeof _e&&(_e=[_e]),null!==_e&&(ne[Ae]=Se(F.children[Ae],B,_e))}),Jr(F.children,(_e,Ae)=>{void 0===V[Ae]&&(ne[Ae]=_e)}),new Er(F.segments,ne))}}function Ot(F,B,O){const V=F.segments.slice(0,B);let ne=0;for(;ne<O.length;){const _e=O[ne];if(Oi(_e)){const tn=Bt(_e.outlets);return new Er(V,tn)}if(0===ne&&pr(O[0])){V.push(new ii(F.segments[B].path,Ge(O[0]))),ne++;continue}const Ae=Oi(_e)?_e.outlets[mn]:`${_e}`,Tt=ne<O.length-1?O[ne+1]:null;Ae&&Tt&&pr(Tt)?(V.push(new ii(Ae,Ge(Tt))),ne+=2):(V.push(new ii(Ae,{})),ne++)}return new Er(V,{})}function Bt(F){const B={};return Jr(F,(O,V)=>{"string"==typeof O&&(O=[O]),null!==O&&(B[V]=Ot(new Er([],{}),0,O))}),B}function Ge(F){const B={};return Jr(F,(O,V)=>B[V]=`${O}`),B}function xt(F,B,O){return F==O.path&&sn(B,O.parameters)}const Ut="imperative";class Zt{constructor(B,O){this.id=B,this.url=O}}class on extends Zt{constructor(B,O,V="imperative",ne=null){super(B,O),this.type=0,this.navigationTrigger=V,this.restoredState=ne}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class In extends Zt{constructor(B,O,V){super(B,O),this.urlAfterRedirects=V,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Zn extends Zt{constructor(B,O,V,ne){super(B,O),this.reason=V,this.code=ne,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Jn extends Zt{constructor(B,O,V,ne){super(B,O),this.reason=V,this.code=ne,this.type=16}}class ci extends Zt{constructor(B,O,V,ne){super(B,O),this.error=V,this.target=ne,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Kr extends Zt{constructor(B,O,V,ne){super(B,O),this.urlAfterRedirects=V,this.state=ne,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _t extends Zt{constructor(B,O,V,ne){super(B,O),this.urlAfterRedirects=V,this.state=ne,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bt extends Zt{constructor(B,O,V,ne,_e){super(B,O),this.urlAfterRedirects=V,this.state=ne,this.shouldActivate=_e,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ft extends Zt{constructor(B,O,V,ne){super(B,O),this.urlAfterRedirects=V,this.state=ne,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ht extends Zt{constructor(B,O,V,ne){super(B,O),this.urlAfterRedirects=V,this.state=ne,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fn{constructor(B){this.route=B,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Sn{constructor(B){this.route=B,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class er{constructor(B){this.snapshot=B,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mr{constructor(B){this.snapshot=B,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hi{constructor(B){this.snapshot=B,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yi{constructor(B){this.snapshot=B,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ji{constructor(B,O,V){this.routerEvent=B,this.position=O,this.anchor=V,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Qr=(()=>{class F{createUrlTree(O,V,ne,_e,Ae,Tt){return Mr(O||V.root,ne,_e,Ae,Tt)}}return F.\u0275fac=function(O){return new(O||F)},F.\u0275prov=m.Yz7({token:F,factory:F.\u0275fac}),F})(),Os=(()=>{class F{}return F.\u0275fac=function(O){return new(O||F)},F.\u0275prov=m.Yz7({token:F,factory:function(B){return Qr.\u0275fac(B)},providedIn:"root"}),F})();class zs{constructor(B){this._root=B}get root(){return this._root.value}parent(B){const O=this.pathFromRoot(B);return O.length>1?O[O.length-2]:null}children(B){const O=xo(B,this._root);return O?O.children.map(V=>V.value):[]}firstChild(B){const O=xo(B,this._root);return O&&O.children.length>0?O.children[0].value:null}siblings(B){const O=ns(B,this._root);return O.length<2?[]:O[O.length-2].children.map(ne=>ne.value).filter(ne=>ne!==B)}pathFromRoot(B){return ns(B,this._root).map(O=>O.value)}}function xo(F,B){if(F===B.value)return B;for(const O of B.children){const V=xo(F,O);if(V)return V}return null}function ns(F,B){if(F===B.value)return[B];for(const O of B.children){const V=ns(F,O);if(V.length)return V.unshift(B),V}return[]}class Bo{constructor(B,O){this.value=B,this.children=O}toString(){return`TreeNode(${this.value})`}}function Mo(F){const B={};return F&&F.children.forEach(O=>B[O.value.outlet]=O),B}class Zo extends zs{constructor(B,O){super(B),this.snapshot=O,Ws(this,B)}toString(){return this.snapshot.toString()}}function fs(F,B){const O=function ps(F,B){const Ae=new Xo([],{},{},"",{},mn,B,null,F.root,-1,{});return new Ua("",new Bo(Ae,[]))}(F,B),V=new he.X([new ii("",{})]),ne=new he.X({}),_e=new he.X({}),Ae=new he.X({}),Tt=new he.X(""),tn=new Uo(V,ne,Ae,Tt,_e,mn,B,O.root);return tn.snapshot=O.root,new Zo(new Bo(tn,[]),O)}class Uo{constructor(B,O,V,ne,_e,Ae,Tt,tn){var On,ar;this.url=B,this.params=O,this.queryParams=V,this.fragment=ne,this.data=_e,this.outlet=Ae,this.component=Tt,this.title=null!==(On=null===(ar=this.data)||void 0===ar?void 0:ar.pipe((0,ut.U)(or=>or[Gn])))&&void 0!==On?On:(0,H.of)(void 0),this._futureSnapshot=tn}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ut.U)(B=>Nn(B)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ut.U)(B=>Nn(B)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function gs(F,B="emptyOnly"){const O=F.pathFromRoot;let V=0;if("always"!==B)for(V=O.length-1;V>=1;){const ne=O[V],_e=O[V-1];if(ne.routeConfig&&""===ne.routeConfig.path)V--;else{if(_e.component)break;V--}}return function ms(F){return F.reduce((B,O)=>{var V;return{params:{...B.params,...O.params},data:{...B.data,...O.data},resolve:{...O.data,...B.resolve,...null===(V=O.routeConfig)||void 0===V?void 0:V.data,...O._resolvedData}}},{params:{},data:{},resolve:{}})}(O.slice(V))}class Xo{get title(){var B;return null===(B=this.data)||void 0===B?void 0:B[Gn]}constructor(B,O,V,ne,_e,Ae,Tt,tn,On,ar,or){this.url=B,this.params=O,this.queryParams=V,this.fragment=ne,this.data=_e,this.outlet=Ae,this.component=Tt,this.routeConfig=tn,this._urlSegment=On,this._lastPathIndex=ar,this._resolve=or}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Nn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(V=>V.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ua extends zs{constructor(B,O){super(O),this.url=B,Ws(this,O)}toString(){return Ys(this._root)}}function Ws(F,B){B.value._routerState=F,B.children.forEach(O=>Ws(F,O))}function Ys(F){const B=F.children.length>0?` { ${F.children.map(Ys).join(", ")} } `:"";return`${F.value}${B}`}function Mi(F){if(F.snapshot){const B=F.snapshot,O=F._futureSnapshot;F.snapshot=O,sn(B.queryParams,O.queryParams)||F.queryParams.next(O.queryParams),B.fragment!==O.fragment&&F.fragment.next(O.fragment),sn(B.params,O.params)||F.params.next(O.params),function En(F,B){if(F.length!==B.length)return!1;for(let O=0;O<F.length;++O)if(!sn(F[O],B[O]))return!1;return!0}(B.url,O.url)||F.url.next(O.url),sn(B.data,O.data)||F.data.next(O.data)}else F.snapshot=F._futureSnapshot,F.data.next(F._futureSnapshot.data)}function tr(F,B){const O=sn(F.params,B.params)&&function wn(F,B){return ln(F,B)&&F.every((O,V)=>sn(O.parameters,B[V].parameters))}(F.url,B.url);return O&&!(!F.parent!=!B.parent)&&(!F.parent||tr(F.parent,B.parent))}function rs(F,B,O){if(O&&F.shouldReuseRoute(B.value,O.value.snapshot)){const V=O.value;V._futureSnapshot=B.value;const ne=function Ks(F,B,O){return B.children.map(V=>{for(const ne of O.children)if(F.shouldReuseRoute(V.value,ne.value.snapshot))return rs(F,V,ne);return rs(F,V)})}(F,B,O);return new Bo(V,ne)}{if(F.shouldAttach(B.value)){const _e=F.retrieve(B.value);if(null!==_e){const Ae=_e.route;return Ae.value._futureSnapshot=B.value,Ae.children=B.children.map(Tt=>rs(F,Tt)),Ae}}const V=function $r(F){return new Uo(new he.X(F.url),new he.X(F.params),new he.X(F.queryParams),new he.X(F.fragment),new he.X(F.data),F.outlet,F.component,F)}(B.value),ne=B.children.map(_e=>rs(F,_e));return new Bo(V,ne)}}const Ao="ngNavigationCancelingError";function co(F,B){const{redirectTo:O,navigationBehaviorOptions:V}=ti(B)?{redirectTo:B,navigationBehaviorOptions:void 0}:B,ne=vs(!1,0,B);return ne.url=O,ne.navigationBehaviorOptions=V,ne}function vs(F,B,O){const V=new Error("NavigationCancelingError: "+(F||""));return V[Ao]=!0,V.cancellationCode=B,O&&(V.url=O),V}function lo(F){return is(F)&&ti(F.url)}function is(F){return F&&F[Ao]}class jo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Qo,this.attachRef=null}}let Qo=(()=>{class F{constructor(){this.contexts=new Map}onChildOutletCreated(O,V){const ne=this.getOrCreateContext(O);ne.outlet=V,this.contexts.set(O,ne)}onChildOutletDestroyed(O){const V=this.getContext(O);V&&(V.outlet=null,V.attachRef=null)}onOutletDeactivated(){const O=this.contexts;return this.contexts=new Map,O}onOutletReAttached(O){this.contexts=O}getOrCreateContext(O){let V=this.getContext(O);return V||(V=new jo,this.contexts.set(O,V)),V}getContext(O){return this.contexts.get(O)||null}}return F.\u0275fac=function(O){return new(O||F)},F.\u0275prov=m.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();const qs=!1;let Us=(()=>{class F{constructor(){this.activated=null,this._activatedRoute=null,this.name=mn,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.parentContexts=(0,m.f3M)(Qo),this.location=(0,m.f3M)(m.s_b),this.changeDetector=(0,m.f3M)(m.sBO),this.environmentInjector=(0,m.f3M)(m.lqb)}ngOnChanges(O){if(O.name){const{firstChange:V,previousValue:ne}=O.name;if(V)return;this.isTrackedInParentContexts(ne)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(ne)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(O){var V;return(null===(V=this.parentContexts.getContext(O))||void 0===V?void 0:V.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const O=this.parentContexts.getContext(this.name);null!=O&&O.route&&(O.attachRef?this.attach(O.attachRef,O.route):this.activateWith(O.route,O.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,qs);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,qs);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,qs);this.location.detach();const O=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(O.instance),O}attach(O,V){this.activated=O,this._activatedRoute=V,this.location.insert(O.hostView),this.attachEvents.emit(O.instance)}deactivate(){if(this.activated){const O=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(O)}}activateWith(O,V){if(this.isActivated)throw new m.vHH(4013,qs);this._activatedRoute=O;const ne=this.location,Ae=O.snapshot.component,Tt=this.parentContexts.getOrCreateContext(this.name).children,tn=new os(O,Tt,ne.injector);if(V&&function Xi(F){return!!F.resolveComponentFactory}(V)){const On=V.resolveComponentFactory(Ae);this.activated=ne.createComponent(On,ne.length,tn)}else this.activated=ne.createComponent(Ae,{index:ne.length,injector:tn,environmentInjector:null!=V?V:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return F.\u0275fac=function(O){return new(O||F)},F.\u0275dir=m.lG2({type:F,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[m.TTD]}),F})();class os{constructor(B,O,V){this.route=B,this.childContexts=O,this.parent=V}get(B,O){return B===Uo?this.route:B===Qo?this.childContexts:this.parent.get(B,O)}}let Ni=(()=>{class F{}return F.\u0275fac=function(O){return new(O||F)},F.\u0275cmp=m.Xpm({type:F,selectors:[["ng-component"]],standalone:!0,features:[m.jDz],decls:1,vars:0,template:function(O,V){1&O&&m._UZ(0,"router-outlet")},dependencies:[Us],encapsulation:2}),F})();function ys(F,B){var O;return F.providers&&!F._injector&&(F._injector=(0,m.MMx)(F.providers,B,`Route: ${F.path}`)),null!==(O=F._injector)&&void 0!==O?O:B}function $i(F){const B=F.children&&F.children.map($i),O=B?{...F,children:B}:{...F};return!O.component&&!O.loadComponent&&(B||O.loadChildren)&&O.outlet&&O.outlet!==mn&&(O.component=Ni),O}function Qi(F){return F.outlet||mn}function Vo(F,B){const O=F.filter(V=>Qi(V)===B);return O.push(...F.filter(V=>Qi(V)!==B)),O}function bo(F){var B;if(!F)return null;if(null!==(B=F.routeConfig)&&void 0!==B&&B._injector)return F.routeConfig._injector;for(let O=F.parent;O;O=O.parent){const V=O.routeConfig;if(null!=V&&V._loadedInjector)return V._loadedInjector;if(null!=V&&V._injector)return V._injector}return null}class va{constructor(B,O,V,ne){this.routeReuseStrategy=B,this.futureState=O,this.currState=V,this.forwardEvent=ne}activate(B){const O=this.futureState._root,V=this.currState?this.currState._root:null;this.deactivateChildRoutes(O,V,B),Mi(this.futureState.root),this.activateChildRoutes(O,V,B)}deactivateChildRoutes(B,O,V){const ne=Mo(O);B.children.forEach(_e=>{const Ae=_e.value.outlet;this.deactivateRoutes(_e,ne[Ae],V),delete ne[Ae]}),Jr(ne,(_e,Ae)=>{this.deactivateRouteAndItsChildren(_e,V)})}deactivateRoutes(B,O,V){const ne=B.value,_e=O?O.value:null;if(ne===_e)if(ne.component){const Ae=V.getContext(ne.outlet);Ae&&this.deactivateChildRoutes(B,O,Ae.children)}else this.deactivateChildRoutes(B,O,V);else _e&&this.deactivateRouteAndItsChildren(O,V)}deactivateRouteAndItsChildren(B,O){B.value.component&&this.routeReuseStrategy.shouldDetach(B.value.snapshot)?this.detachAndStoreRouteSubtree(B,O):this.deactivateRouteAndOutlet(B,O)}detachAndStoreRouteSubtree(B,O){const V=O.getContext(B.value.outlet),ne=V&&B.value.component?V.children:O,_e=Mo(B);for(const Ae of Object.keys(_e))this.deactivateRouteAndItsChildren(_e[Ae],ne);if(V&&V.outlet){const Ae=V.outlet.detach(),Tt=V.children.onOutletDeactivated();this.routeReuseStrategy.store(B.value.snapshot,{componentRef:Ae,route:B,contexts:Tt})}}deactivateRouteAndOutlet(B,O){const V=O.getContext(B.value.outlet),ne=V&&B.value.component?V.children:O,_e=Mo(B);for(const Ae of Object.keys(_e))this.deactivateRouteAndItsChildren(_e[Ae],ne);V&&V.outlet&&(V.outlet.deactivate(),V.children.onOutletDeactivated(),V.attachRef=null,V.resolver=null,V.route=null)}activateChildRoutes(B,O,V){const ne=Mo(O);B.children.forEach(_e=>{this.activateRoutes(_e,ne[_e.value.outlet],V),this.forwardEvent(new Yi(_e.value.snapshot))}),B.children.length&&this.forwardEvent(new mr(B.value.snapshot))}activateRoutes(B,O,V){const ne=B.value,_e=O?O.value:null;if(Mi(ne),ne===_e)if(ne.component){const Tt=V.getOrCreateContext(ne.outlet);this.activateChildRoutes(B,O,Tt.children)}else this.activateChildRoutes(B,O,V);else if(ne.component){const Tt=V.getOrCreateContext(ne.outlet);if(this.routeReuseStrategy.shouldAttach(ne.snapshot)){const tn=this.routeReuseStrategy.retrieve(ne.snapshot);this.routeReuseStrategy.store(ne.snapshot,null),Tt.children.onOutletReAttached(tn.contexts),Tt.attachRef=tn.componentRef,Tt.route=tn.route.value,Tt.outlet&&Tt.outlet.attach(tn.componentRef,tn.route.value),Mi(tn.route.value),this.activateChildRoutes(B,null,Tt.children)}else{var Ae;const tn=bo(ne.snapshot),On=null!==(Ae=null==tn?void 0:tn.get(m._Vd))&&void 0!==Ae?Ae:null;Tt.attachRef=null,Tt.route=ne,Tt.resolver=On,Tt.injector=tn,Tt.outlet&&Tt.outlet.activateWith(ne,Tt.injector),this.activateChildRoutes(B,null,Tt.children)}}else this.activateChildRoutes(B,null,V)}}class Br{constructor(B){this.path=B,this.route=this.path[this.path.length-1]}}class xs{constructor(B,O){this.component=B,this.route=O}}function Gi(F,B,O){const V=F._root;return No(V,B?B._root:null,O,[V.value])}function Ns(F,B){const O=Symbol(),V=B.get(F,O);return V===O?"function"!=typeof F||(0,m.Z0I)(F)?B.get(F):F:V}function No(F,B,O,V,ne={canDeactivateChecks:[],canActivateChecks:[]}){const _e=Mo(B);return F.children.forEach(Ae=>{(function $s(F,B,O,V,ne={canDeactivateChecks:[],canActivateChecks:[]}){const _e=F.value,Ae=B?B.value:null,Tt=O?O.getContext(F.value.outlet):null;if(Ae&&_e.routeConfig===Ae.routeConfig){const tn=function Es(F,B,O){if("function"==typeof O)return O(F,B);switch(O){case"pathParamsChange":return!ln(F.url,B.url);case"pathParamsOrQueryParamsChange":return!ln(F.url,B.url)||!sn(F.queryParams,B.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tr(F,B)||!sn(F.queryParams,B.queryParams);default:return!tr(F,B)}}(Ae,_e,_e.routeConfig.runGuardsAndResolvers);tn?ne.canActivateChecks.push(new Br(V)):(_e.data=Ae.data,_e._resolvedData=Ae._resolvedData),No(F,B,_e.component?Tt?Tt.children:null:O,V,ne),tn&&Tt&&Tt.outlet&&Tt.outlet.isActivated&&ne.canDeactivateChecks.push(new xs(Tt.outlet.component,Ae))}else Ae&&ss(B,Tt,ne),ne.canActivateChecks.push(new Br(V)),No(F,null,_e.component?Tt?Tt.children:null:O,V,ne)})(Ae,_e[Ae.value.outlet],O,V.concat([Ae.value]),ne),delete _e[Ae.value.outlet]}),Jr(_e,(Ae,Tt)=>ss(Ae,O.getContext(Tt),ne)),ne}function ss(F,B,O){const V=Mo(F),ne=F.value;Jr(V,(_e,Ae)=>{ss(_e,ne.component?B?B.children.getContext(Ae):null:B,O)}),O.canDeactivateChecks.push(new xs(ne.component&&B&&B.outlet&&B.outlet.isActivated?B.outlet.component:null,ne))}function Y(F){return"function"==typeof F}function wr(F){return F instanceof le.K||"EmptyError"===(null==F?void 0:F.name)}const li=Symbol("INITIAL_VALUE");function ee(){return(0,ft.w)(F=>Xe(F.map(B=>B.pipe((0,pt.q)(1),(0,mt.O)(li)))).pipe((0,ut.U)(B=>{for(const O of B)if(!0!==O){if(O===li)return li;if(!1===O||O instanceof Rr)return O}return!0}),(0,gt.h)(B=>B!==li),(0,pt.q)(1)))}function ui(F){return(0,ct.z)((0,me.b)(B=>{if(ti(B))throw co(0,B)}),(0,ut.U)(B=>!0===B))}const Ci={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ji(F,B,O,V,ne){const _e=oo(F,B,O);return _e.matched?function go(F,B,O,V){const ne=B.canMatch;if(!ne||0===ne.length)return(0,H.of)(!0);const _e=ne.map(Ae=>{const Tt=Ns(Ae,F);return rr(function Vt(F){return F&&Y(F.canMatch)}(Tt)?Tt.canMatch(B,O):F.runInContext(()=>Tt(B,O)))});return(0,H.of)(_e).pipe(ee(),ui())}(V=ys(B,V),B,O).pipe((0,ut.U)(Ae=>!0===Ae?_e:{...Ci})):(0,H.of)(_e)}function oo(F,B,O){var V;if(""===B.path)return"full"===B.pathMatch&&(F.hasChildren()||O.length>0)?{...Ci}:{matched:!0,consumedSegments:[],remainingSegments:O,parameters:{},positionalParamSegments:{}};const _e=(B.matcher||Dn)(O,F,B);if(!_e)return{...Ci};const Ae={};Jr(_e.posParams,(tn,On)=>{Ae[On]=tn.path});const Tt=_e.consumed.length>0?{...Ae,..._e.consumed[_e.consumed.length-1].parameters}:Ae;return{matched:!0,consumedSegments:_e.consumed,remainingSegments:O.slice(_e.consumed.length),parameters:Tt,positionalParamSegments:null!==(V=_e.posParams)&&void 0!==V?V:{}}}function Po(F,B,O,V){if(O.length>0&&function ws(F,B,O){return O.some(V=>To(F,B,V)&&Qi(V)!==mn)}(F,O,V)){const _e=new Er(B,function mo(F,B,O,V){const ne={};ne[mn]=V,V._sourceSegment=F,V._segmentIndexShift=B.length;for(const _e of O)if(""===_e.path&&Qi(_e)!==mn){const Ae=new Er([],{});Ae._sourceSegment=F,Ae._segmentIndexShift=B.length,ne[Qi(_e)]=Ae}return ne}(F,B,V,new Er(O,F.children)));return _e._sourceSegment=F,_e._segmentIndexShift=B.length,{segmentGroup:_e,slicedSegments:[]}}if(0===O.length&&function as(F,B,O){return O.some(V=>To(F,B,V))}(F,O,V)){const _e=new Er(F.segments,function Do(F,B,O,V,ne){const _e={};for(const Ae of V)if(To(F,O,Ae)&&!ne[Qi(Ae)]){const Tt=new Er([],{});Tt._sourceSegment=F,Tt._segmentIndexShift=B.length,_e[Qi(Ae)]=Tt}return{...ne,..._e}}(F,B,O,V,F.children));return _e._sourceSegment=F,_e._segmentIndexShift=B.length,{segmentGroup:_e,slicedSegments:O}}const ne=new Er(F.segments,F.children);return ne._sourceSegment=F,ne._segmentIndexShift=B.length,{segmentGroup:ne,slicedSegments:O}}function To(F,B,O){return(!(F.hasChildren()||B.length>0)||"full"!==O.pathMatch)&&""===O.path}function Jo(F,B,O,V){return!!(Qi(F)===V||V!==mn&&To(B,O,F))&&("**"===F.path||oo(B,F,O).matched)}function Xs(F,B,O){return 0===B.length&&!F.children[O]}const Qs=!1;class Cs{constructor(B){this.segmentGroup=B||null}}class ho{constructor(B){this.urlTree=B}}function Js(F){return yt(new Cs(F))}function Ti(F){return yt(new ho(F))}class Nu{constructor(B,O,V,ne,_e){this.injector=B,this.configLoader=O,this.urlSerializer=V,this.urlTree=ne,this.config=_e,this.allowRedirects=!0}apply(){const B=Po(this.urlTree.root,[],[],this.config).segmentGroup,O=new Er(B.segments,B.children);return this.expandSegmentGroup(this.injector,this.config,O,mn).pipe((0,ut.U)(_e=>this.createUrlTree(Yr(_e),this.urlTree.queryParams,this.urlTree.fragment))).pipe(te(_e=>{if(_e instanceof ho)return this.allowRedirects=!1,this.match(_e.urlTree);throw _e instanceof Cs?this.noMatchError(_e):_e}))}match(B){return this.expandSegmentGroup(this.injector,this.config,B.root,mn).pipe((0,ut.U)(ne=>this.createUrlTree(Yr(ne),B.queryParams,B.fragment))).pipe(te(ne=>{throw ne instanceof Cs?this.noMatchError(ne):ne}))}noMatchError(B){return new m.vHH(4002,Qs)}createUrlTree(B,O,V){const ne=fi(B);return new Rr(ne,O,V)}expandSegmentGroup(B,O,V,ne){return 0===V.segments.length&&V.hasChildren()?this.expandChildren(B,O,V).pipe((0,ut.U)(_e=>new Er([],_e))):this.expandSegment(B,V,O,V.segments,ne,!0)}expandChildren(B,O,V){const ne=[];for(const _e of Object.keys(V.children))"primary"===_e?ne.unshift(_e):ne.push(_e);return(0,J.D)(ne).pipe(Ze(_e=>{const Ae=V.children[_e],Tt=Vo(O,_e);return this.expandSegmentGroup(B,Tt,Ae,_e).pipe((0,ut.U)(tn=>({segment:tn,outlet:_e})))}),(0,q.R)((_e,Ae)=>(_e[Ae.outlet]=Ae.segment,_e),{}),rt())}expandSegment(B,O,V,ne,_e,Ae){return(0,J.D)(V).pipe(Ze(Tt=>this.expandSegmentAgainstRoute(B,O,V,Tt,ne,_e,Ae).pipe(te(On=>{if(On instanceof Cs)return(0,H.of)(null);throw On}))),(0,it.P)(Tt=>!!Tt),te((Tt,tn)=>{if(wr(Tt))return Xs(O,ne,_e)?(0,H.of)(new Er([],{})):Js(O);throw Tt}))}expandSegmentAgainstRoute(B,O,V,ne,_e,Ae,Tt){return Jo(ne,O,_e,Ae)?void 0===ne.redirectTo?this.matchSegmentAgainstRoute(B,O,ne,_e,Ae):Tt&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(B,O,V,ne,_e,Ae):Js(O):Js(O)}expandSegmentAgainstRouteUsingRedirect(B,O,V,ne,_e,Ae){return"**"===ne.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(B,V,ne,Ae):this.expandRegularSegmentAgainstRouteUsingRedirect(B,O,V,ne,_e,Ae)}expandWildCardWithParamsAgainstRouteUsingRedirect(B,O,V,ne){const _e=this.applyRedirectCommands([],V.redirectTo,{});return V.redirectTo.startsWith("/")?Ti(_e):this.lineralizeSegments(V,_e).pipe((0,Le.z)(Ae=>{const Tt=new Er(Ae,{});return this.expandSegment(B,Tt,O,Ae,ne,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(B,O,V,ne,_e,Ae){const{matched:Tt,consumedSegments:tn,remainingSegments:On,positionalParamSegments:ar}=oo(O,ne,_e);if(!Tt)return Js(O);const or=this.applyRedirectCommands(tn,ne.redirectTo,ar);return ne.redirectTo.startsWith("/")?Ti(or):this.lineralizeSegments(ne,or).pipe((0,Le.z)(K=>this.expandSegment(B,O,V,K.concat(On),Ae,!1)))}matchSegmentAgainstRoute(B,O,V,ne,_e){return"**"===V.path?(B=ys(V,B),V.loadChildren?(V._loadedRoutes?(0,H.of)({routes:V._loadedRoutes,injector:V._loadedInjector}):this.configLoader.loadChildren(B,V)).pipe((0,ut.U)(Tt=>(V._loadedRoutes=Tt.routes,V._loadedInjector=Tt.injector,new Er(ne,{})))):(0,H.of)(new Er(ne,{}))):Ji(O,V,ne,B).pipe((0,ft.w)(({matched:Ae,consumedSegments:Tt,remainingSegments:tn})=>{var On;return Ae?(B=null!==(On=V._injector)&&void 0!==On?On:B,this.getChildConfig(B,V,ne).pipe((0,Le.z)(or=>{var K;const oe=null!==(K=or.injector)&&void 0!==K?K:B,Ee=or.routes,{segmentGroup:dt,slicedSegments:Nt}=Po(O,Tt,tn,Ee),zt=new Er(dt.segments,dt.children);if(0===Nt.length&&zt.hasChildren())return this.expandChildren(oe,Ee,zt).pipe((0,ut.U)(Pr=>new Er(Tt,Pr)));if(0===Ee.length&&0===Nt.length)return(0,H.of)(new Er(Tt,{}));const xn=Qi(V)===_e;return this.expandSegment(oe,zt,Ee,Nt,xn?mn:_e,!0).pipe((0,ut.U)(vr=>new Er(Tt.concat(vr.segments),vr.children)))}))):Js(O)}))}getChildConfig(B,O,V){return O.children?(0,H.of)({routes:O.children,injector:B}):O.loadChildren?void 0!==O._loadedRoutes?(0,H.of)({routes:O._loadedRoutes,injector:O._loadedInjector}):function Nr(F,B,O,V){const ne=B.canLoad;if(void 0===ne||0===ne.length)return(0,H.of)(!0);const _e=ne.map(Ae=>{const Tt=Ns(Ae,F);return rr(function T(F){return F&&Y(F.canLoad)}(Tt)?Tt.canLoad(B,O):F.runInContext(()=>Tt(B,O)))});return(0,H.of)(_e).pipe(ee(),ui())}(B,O,V).pipe((0,Le.z)(ne=>ne?this.configLoader.loadChildren(B,O).pipe((0,me.b)(_e=>{O._loadedRoutes=_e.routes,O._loadedInjector=_e.injector})):function Mu(F){return yt(vs(Qs,3))}())):(0,H.of)({routes:[],injector:B})}lineralizeSegments(B,O){let V=[],ne=O.root;for(;;){if(V=V.concat(ne.segments),0===ne.numberOfChildren)return(0,H.of)(V);if(ne.numberOfChildren>1||!ne.children[mn])return B.redirectTo,yt(new m.vHH(4e3,Qs));ne=ne.children[mn]}}applyRedirectCommands(B,O,V){return this.applyRedirectCreateUrlTree(O,this.urlSerializer.parse(O),B,V)}applyRedirectCreateUrlTree(B,O,V,ne){const _e=this.createSegmentGroup(B,O.root,V,ne);return new Rr(_e,this.createQueryParams(O.queryParams,this.urlTree.queryParams),O.fragment)}createQueryParams(B,O){const V={};return Jr(B,(ne,_e)=>{if("string"==typeof ne&&ne.startsWith(":")){const Tt=ne.substring(1);V[_e]=O[Tt]}else V[_e]=ne}),V}createSegmentGroup(B,O,V,ne){const _e=this.createSegments(B,O.segments,V,ne);let Ae={};return Jr(O.children,(Tt,tn)=>{Ae[tn]=this.createSegmentGroup(B,Tt,V,ne)}),new Er(_e,Ae)}createSegments(B,O,V,ne){return O.map(_e=>_e.path.startsWith(":")?this.findPosParam(B,_e,ne):this.findOrReturn(_e,V))}findPosParam(B,O,V){const ne=V[O.path.substring(1)];if(!ne)throw new m.vHH(4001,Qs);return ne}findOrReturn(B,O){let V=0;for(const ne of O){if(ne.path===B.path)return O.splice(V),ne;V++}return B}}class za{}class W{constructor(B,O,V,ne,_e,Ae,Tt){this.injector=B,this.rootComponentType=O,this.config=V,this.urlTree=ne,this.url=_e,this.paramsInheritanceStrategy=Ae,this.urlSerializer=Tt}recognize(){const B=Po(this.urlTree.root,[],[],this.config.filter(O=>void 0===O.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,B,mn).pipe((0,ut.U)(O=>{if(null===O)return null;const V=new Xo([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},mn,this.rootComponentType,null,this.urlTree.root,-1,{}),ne=new Bo(V,O),_e=new Ua(this.url,ne);return this.inheritParamsAndData(_e._root),_e}))}inheritParamsAndData(B){const O=B.value,V=gs(O,this.paramsInheritanceStrategy);O.params=Object.freeze(V.params),O.data=Object.freeze(V.data),B.children.forEach(ne=>this.inheritParamsAndData(ne))}processSegmentGroup(B,O,V,ne){return 0===V.segments.length&&V.hasChildren()?this.processChildren(B,O,V):this.processSegment(B,O,V,V.segments,ne)}processChildren(B,O,V){return(0,J.D)(Object.keys(V.children)).pipe(Ze(ne=>{const _e=V.children[ne],Ae=Vo(O,ne);return this.processSegmentGroup(B,Ae,_e,ne)}),(0,q.R)((ne,_e)=>ne&&_e?(ne.push(..._e),ne):null),function Qt(F,B=!1){return(0,Ye.e)((O,V)=>{let ne=0;O.subscribe((0,xe.x)(V,_e=>{const Ae=F(_e,ne++);(Ae||B)&&V.next(_e),!Ae&&V.complete()}))})}(ne=>null!==ne),(0,ke.d)(null),rt(),(0,ut.U)(ne=>{if(null===ne)return null;const _e=et(ne);return function ue(F){F.sort((B,O)=>B.value.outlet===mn?-1:O.value.outlet===mn?1:B.value.outlet.localeCompare(O.value.outlet))}(_e),_e}))}processSegment(B,O,V,ne,_e){return(0,J.D)(O).pipe(Ze(Ae=>{var Tt;return this.processSegmentAgainstRoute(null!==(Tt=Ae._injector)&&void 0!==Tt?Tt:B,Ae,V,ne,_e)}),(0,it.P)(Ae=>!!Ae),te(Ae=>{if(wr(Ae))return Xs(V,ne,_e)?(0,H.of)([]):(0,H.of)(null);throw Ae}))}processSegmentAgainstRoute(B,O,V,ne,_e){if(O.redirectTo||!Jo(O,V,ne,_e))return(0,H.of)(null);let Ae;if("**"===O.path){var Tt,tn;const On=ne.length>0?br(ne).parameters:{},ar=ir(V)+ne.length,or=new Xo(ne,On,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,un(O),Qi(O),null!==(Tt=null!==(tn=O.component)&&void 0!==tn?tn:O._loadedComponent)&&void 0!==Tt?Tt:null,O,hn(V),ar,kr(O));Ae=(0,H.of)({snapshot:or,consumedSegments:[],remainingSegments:[]})}else Ae=Ji(V,O,ne,B).pipe((0,ut.U)(({matched:On,consumedSegments:ar,remainingSegments:or,parameters:K})=>{var oe,Ee;if(!On)return null;const dt=ir(V)+ar.length;return{snapshot:new Xo(ar,K,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,un(O),Qi(O),null!==(oe=null!==(Ee=O.component)&&void 0!==Ee?Ee:O._loadedComponent)&&void 0!==oe?oe:null,O,hn(V),dt,kr(O)),consumedSegments:ar,remainingSegments:or}}));return Ae.pipe((0,ft.w)(On=>{var ar,or;if(null===On)return(0,H.of)(null);const{snapshot:K,consumedSegments:oe,remainingSegments:Ee}=On;B=null!==(ar=O._injector)&&void 0!==ar?ar:B;const dt=null!==(or=O._loadedInjector)&&void 0!==or?or:B,Nt=function Q(F){return F.children?F.children:F.loadChildren?F._loadedRoutes:[]}(O),{segmentGroup:zt,slicedSegments:xn}=Po(V,oe,Ee,Nt.filter(vr=>void 0===vr.redirectTo));if(0===xn.length&&zt.hasChildren())return this.processChildren(dt,Nt,zt).pipe((0,ut.U)(vr=>null===vr?null:[new Bo(K,vr)]));if(0===Nt.length&&0===xn.length)return(0,H.of)([new Bo(K,[])]);const _r=Qi(O)===_e;return this.processSegment(dt,Nt,zt,xn,_r?mn:_e).pipe((0,ut.U)(vr=>null===vr?null:[new Bo(K,vr)]))}))}}function Ie(F){const B=F.value.routeConfig;return B&&""===B.path&&void 0===B.redirectTo}function et(F){const B=[],O=new Set;for(const V of F){if(!Ie(V)){B.push(V);continue}const ne=B.find(_e=>V.value.routeConfig===_e.value.routeConfig);void 0!==ne?(ne.children.push(...V.children),O.add(ne)):B.push(V)}for(const V of O){const ne=et(V.children);B.push(new Bo(V.value,ne))}return B.filter(V=>!O.has(V))}function hn(F){let B=F;for(;B._sourceSegment;)B=B._sourceSegment;return B}function ir(F){var B;let O=F,V=null!==(B=O._segmentIndexShift)&&void 0!==B?B:0;for(;O._sourceSegment;){var ne;O=O._sourceSegment,V+=null!==(ne=O._segmentIndexShift)&&void 0!==ne?ne:0}return V-1}function un(F){return F.data||{}}function kr(F){return F.resolve||{}}function nn(F){return"string"==typeof F.title||null===F.title}function vn(F){return(0,ft.w)(B=>{const O=F(B);return O?(0,J.D)(O).pipe((0,ut.U)(()=>B)):(0,H.of)(B)})}const Ea=new m.OlP("ROUTES");let Va=(()=>{class F{constructor(O,V){this.injector=O,this.compiler=V,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(O){if(this.componentLoaders.get(O))return this.componentLoaders.get(O);if(O._loadedComponent)return(0,H.of)(O._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(O);const V=rr(O.loadComponent()).pipe((0,ut.U)(vu),(0,me.b)(_e=>{this.onLoadEndListener&&this.onLoadEndListener(O),O._loadedComponent=_e}),Yt(()=>{this.componentLoaders.delete(O)})),ne=new lt(V,()=>new Qe.x).pipe($());return this.componentLoaders.set(O,ne),ne}loadChildren(O,V){if(this.childrenLoaders.get(V))return this.childrenLoaders.get(V);if(V._loadedRoutes)return(0,H.of)({routes:V._loadedRoutes,injector:V._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(V);const _e=this.loadModuleFactoryOrRoutes(V.loadChildren).pipe((0,ut.U)(Tt=>{this.onLoadEndListener&&this.onLoadEndListener(V);let tn,On,ar=!1;Array.isArray(Tt)?On=Tt:(tn=Tt.create(O).injector,On=Vr(tn.get(Ea,[],m.XFs.Self|m.XFs.Optional)));return{routes:On.map($i),injector:tn}}),Yt(()=>{this.childrenLoaders.delete(V)})),Ae=new lt(_e,()=>new Qe.x).pipe($());return this.childrenLoaders.set(V,Ae),Ae}loadModuleFactoryOrRoutes(O){return rr(O()).pipe((0,ut.U)(vu),(0,Le.z)(ne=>ne instanceof m.YKP||Array.isArray(ne)?(0,H.of)(ne):(0,J.D)(this.compiler.compileModuleAsync(ne))))}}return F.\u0275fac=function(O){return new(O||F)(m.LFG(m.zs3),m.LFG(m.Sil))},F.\u0275prov=m.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();function vu(F){return function qu(F){return F&&"object"==typeof F&&"default"in F}(F)?F.default:F}let su=(()=>{class F{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Qe.x,this.configLoader=(0,m.f3M)(Va),this.environmentInjector=(0,m.f3M)(m.lqb),this.urlSerializer=(0,m.f3M)(dr),this.rootContexts=(0,m.f3M)(Qo),this.navigationId=0,this.afterPreactivation=()=>(0,H.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=ne=>this.events.next(new Sn(ne)),this.configLoader.onLoadStartListener=ne=>this.events.next(new fn(ne))}complete(){var O;null===(O=this.transitions)||void 0===O||O.complete()}handleNavigationRequest(O){var V;const ne=++this.navigationId;null===(V=this.transitions)||void 0===V||V.next({...this.transitions.value,...O,id:ne})}setupNavigations(O){return this.transitions=new he.X({id:0,targetPageId:0,currentUrlTree:O.currentUrlTree,currentRawUrl:O.currentUrlTree,extractedUrl:O.urlHandlingStrategy.extract(O.currentUrlTree),urlAfterRedirects:O.urlHandlingStrategy.extract(O.currentUrlTree),rawUrl:O.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ut,restoredState:null,currentSnapshot:O.routerState.snapshot,targetSnapshot:null,currentRouterState:O.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,gt.h)(V=>0!==V.id),(0,ut.U)(V=>({...V,extractedUrl:O.urlHandlingStrategy.extract(V.rawUrl)})),(0,ft.w)(V=>{let ne=!1,_e=!1;return(0,H.of)(V).pipe((0,me.b)(Ae=>{this.currentNavigation={id:Ae.id,initialUrl:Ae.rawUrl,extractedUrl:Ae.extractedUrl,trigger:Ae.source,extras:Ae.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,ft.w)(Ae=>{var Tt;const tn=O.browserUrlTree.toString(),On=!O.navigated||Ae.extractedUrl.toString()!==tn||tn!==O.currentUrlTree.toString(),ar=null!==(Tt=Ae.extras.onSameUrlNavigation)&&void 0!==Tt?Tt:O.onSameUrlNavigation;if(!On&&"reload"!==ar){const or="";return this.events.next(new Jn(Ae.id,O.serializeUrl(V.rawUrl),or,0)),O.rawUrlTree=Ae.rawUrl,Ae.resolve(null),st.E}if(O.urlHandlingStrategy.shouldProcessUrl(Ae.rawUrl))return ac(Ae.source)&&(O.browserUrlTree=Ae.extractedUrl),(0,H.of)(Ae).pipe((0,ft.w)(or=>{var K,oe;const Ee=null===(K=this.transitions)||void 0===K?void 0:K.getValue();return this.events.next(new on(or.id,this.urlSerializer.serialize(or.extractedUrl),or.source,or.restoredState)),Ee!==(null===(oe=this.transitions)||void 0===oe?void 0:oe.getValue())?st.E:Promise.resolve(or)}),function Pu(F,B,O,V){return(0,ft.w)(ne=>function Go(F,B,O,V,ne){return new Nu(F,B,O,V,ne).apply()}(F,B,O,ne.extractedUrl,V).pipe((0,ut.U)(_e=>({...ne,urlAfterRedirects:_e}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,O.config),(0,me.b)(or=>{this.currentNavigation={...this.currentNavigation,finalUrl:or.urlAfterRedirects},V.urlAfterRedirects=or.urlAfterRedirects}),function Hr(F,B,O,V,ne){return(0,Le.z)(_e=>function Ya(F,B,O,V,ne,_e,Ae="emptyOnly"){return new W(F,B,O,V,ne,Ae,_e).recognize().pipe((0,ft.w)(Tt=>null===Tt?function ea(F){return new we.y(B=>B.error(F))}(new za):(0,H.of)(Tt)))}(F,B,O,_e.urlAfterRedirects,V.serialize(_e.urlAfterRedirects),V,ne).pipe((0,ut.U)(Ae=>({..._e,targetSnapshot:Ae}))))}(this.environmentInjector,this.rootComponentType,O.config,this.urlSerializer,O.paramsInheritanceStrategy),(0,me.b)(or=>{if(V.targetSnapshot=or.targetSnapshot,"eager"===O.urlUpdateStrategy){if(!or.extras.skipLocationChange){const oe=O.urlHandlingStrategy.merge(or.urlAfterRedirects,or.rawUrl);O.setBrowserUrl(oe,or)}O.browserUrlTree=or.urlAfterRedirects}const K=new Kr(or.id,this.urlSerializer.serialize(or.extractedUrl),this.urlSerializer.serialize(or.urlAfterRedirects),or.targetSnapshot);this.events.next(K)}));if(On&&O.urlHandlingStrategy.shouldProcessUrl(O.rawUrlTree)){const{id:or,extractedUrl:K,source:oe,restoredState:Ee,extras:dt}=Ae,Nt=new on(or,this.urlSerializer.serialize(K),oe,Ee);this.events.next(Nt);const zt=fs(K,this.rootComponentType).snapshot;return V={...Ae,targetSnapshot:zt,urlAfterRedirects:K,extras:{...dt,skipLocationChange:!1,replaceUrl:!1}},(0,H.of)(V)}{const or="";return this.events.next(new Jn(Ae.id,O.serializeUrl(V.extractedUrl),or,1)),O.rawUrlTree=Ae.rawUrl,Ae.resolve(null),st.E}}),(0,me.b)(Ae=>{const Tt=new _t(Ae.id,this.urlSerializer.serialize(Ae.extractedUrl),this.urlSerializer.serialize(Ae.urlAfterRedirects),Ae.targetSnapshot);this.events.next(Tt)}),(0,ut.U)(Ae=>V={...Ae,guards:Gi(Ae.targetSnapshot,Ae.currentSnapshot,this.rootContexts)}),function ie(F,B){return(0,Le.z)(O=>{const{targetSnapshot:V,currentSnapshot:ne,guards:{canActivateChecks:_e,canDeactivateChecks:Ae}}=O;return 0===Ae.length&&0===_e.length?(0,H.of)({...O,guardsResult:!0}):function Te(F,B,O,V){return(0,J.D)(F).pipe((0,Le.z)(ne=>function Qn(F,B,O,V,ne){const _e=B&&B.routeConfig?B.routeConfig.canDeactivate:null;if(!_e||0===_e.length)return(0,H.of)(!0);const Ae=_e.map(Tt=>{var tn;const On=null!==(tn=bo(B))&&void 0!==tn?tn:ne,ar=Ns(Tt,On);return rr(function ve(F){return F&&Y(F.canDeactivate)}(ar)?ar.canDeactivate(F,B,O,V):On.runInContext(()=>ar(F,B,O,V))).pipe((0,it.P)())});return(0,H.of)(Ae).pipe(ee())}(ne.component,ne.route,O,B,V)),(0,it.P)(ne=>!0!==ne,!0))}(Ae,V,ne,F).pipe((0,Le.z)(Tt=>Tt&&function w(F){return"boolean"==typeof F}(Tt)?function nt(F,B,O,V){return(0,J.D)(B).pipe(Ze(ne=>(0,We.z)(function Xt(F,B){return null!==F&&B&&B(new er(F)),(0,H.of)(!0)}(ne.route.parent,V),function Et(F,B){return null!==F&&B&&B(new hi(F)),(0,H.of)(!0)}(ne.route,V),function lr(F,B,O){const V=B[B.length-1],_e=B.slice(0,B.length-1).reverse().map(Ae=>function Vs(F){const B=F.routeConfig?F.routeConfig.canActivateChild:null;return B&&0!==B.length?{node:F,guards:B}:null}(Ae)).filter(Ae=>null!==Ae).map(Ae=>Ce(()=>{const Tt=Ae.guards.map(tn=>{var On;const ar=null!==(On=bo(Ae.node))&&void 0!==On?On:O,or=Ns(tn,ar);return rr(function j(F){return F&&Y(F.canActivateChild)}(or)?or.canActivateChild(V,F):ar.runInContext(()=>or(V,F))).pipe((0,it.P)())});return(0,H.of)(Tt).pipe(ee())}));return(0,H.of)(_e).pipe(ee())}(F,ne.path,O),function dn(F,B,O){const V=B.routeConfig?B.routeConfig.canActivate:null;if(!V||0===V.length)return(0,H.of)(!0);const ne=V.map(_e=>Ce(()=>{var Ae;const Tt=null!==(Ae=bo(B))&&void 0!==Ae?Ae:O,tn=Ns(_e,Tt);return rr(function S(F){return F&&Y(F.canActivate)}(tn)?tn.canActivate(B,F):Tt.runInContext(()=>tn(B,F))).pipe((0,it.P)())}));return(0,H.of)(ne).pipe(ee())}(F,ne.route,O))),(0,it.P)(ne=>!0!==ne,!0))}(V,_e,F,B):(0,H.of)(Tt)),(0,ut.U)(Tt=>({...O,guardsResult:Tt})))})}(this.environmentInjector,Ae=>this.events.next(Ae)),(0,me.b)(Ae=>{if(V.guardsResult=Ae.guardsResult,ti(Ae.guardsResult))throw co(0,Ae.guardsResult);const Tt=new bt(Ae.id,this.urlSerializer.serialize(Ae.extractedUrl),this.urlSerializer.serialize(Ae.urlAfterRedirects),Ae.targetSnapshot,!!Ae.guardsResult);this.events.next(Tt)}),(0,gt.h)(Ae=>!!Ae.guardsResult||(O.restoreHistory(Ae),this.cancelNavigationTransition(Ae,"",3),!1)),vn(Ae=>{if(Ae.guards.canActivateChecks.length)return(0,H.of)(Ae).pipe((0,me.b)(Tt=>{const tn=new Ft(Tt.id,this.urlSerializer.serialize(Tt.extractedUrl),this.urlSerializer.serialize(Tt.urlAfterRedirects),Tt.targetSnapshot);this.events.next(tn)}),(0,ft.w)(Tt=>{let tn=!1;return(0,H.of)(Tt).pipe(function vo(F,B){return(0,Le.z)(O=>{const{targetSnapshot:V,guards:{canActivateChecks:ne}}=O;if(!ne.length)return(0,H.of)(O);let _e=0;return(0,J.D)(ne).pipe(Ze(Ae=>function Cn(F,B,O,V){const ne=F.routeConfig,_e=F._resolve;return void 0!==(null==ne?void 0:ne.title)&&!nn(ne)&&(_e[Gn]=ne.title),function Xn(F,B,O,V){const ne=function As(F){return[...Object.keys(F),...Object.getOwnPropertySymbols(F)]}(F);if(0===ne.length)return(0,H.of)({});const _e={};return(0,J.D)(ne).pipe((0,Le.z)(Ae=>function Fn(F,B,O,V){var ne;const _e=null!==(ne=bo(B))&&void 0!==ne?ne:V,Ae=Ns(F,_e);return rr(Ae.resolve?Ae.resolve(B,O):_e.runInContext(()=>Ae(B,O)))}(F[Ae],B,O,V).pipe((0,it.P)(),(0,me.b)(Tt=>{_e[Ae]=Tt}))),re(1),function Dt(F){return(0,ut.U)(()=>F)}(_e),te(Ae=>wr(Ae)?st.E:yt(Ae)))}(_e,F,B,V).pipe((0,ut.U)(Ae=>(F._resolvedData=Ae,F.data=gs(F,O).resolve,ne&&nn(ne)&&(F.data[Gn]=ne.title),null)))}(Ae.route,V,F,B)),(0,me.b)(()=>_e++),re(1),(0,Le.z)(Ae=>_e===ne.length?(0,H.of)(O):st.E))})}(O.paramsInheritanceStrategy,this.environmentInjector),(0,me.b)({next:()=>tn=!0,complete:()=>{tn||(O.restoreHistory(Tt),this.cancelNavigationTransition(Tt,"",2))}}))}),(0,me.b)(Tt=>{const tn=new Ht(Tt.id,this.urlSerializer.serialize(Tt.extractedUrl),this.urlSerializer.serialize(Tt.urlAfterRedirects),Tt.targetSnapshot);this.events.next(tn)}))}),vn(Ae=>{const Tt=tn=>{var On;const ar=[];null!==(On=tn.routeConfig)&&void 0!==On&&On.loadComponent&&!tn.routeConfig._loadedComponent&&ar.push(this.configLoader.loadComponent(tn.routeConfig).pipe((0,me.b)(or=>{tn.component=or}),(0,ut.U)(()=>{})));for(const or of tn.children)ar.push(...Tt(or));return ar};return Xe(Tt(Ae.targetSnapshot.root)).pipe((0,ke.d)(),(0,pt.q)(1))}),vn(()=>this.afterPreactivation()),(0,ut.U)(Ae=>{const Tt=function cs(F,B,O){const V=rs(F,B._root,O?O._root:void 0);return new Zo(V,B)}(O.routeReuseStrategy,Ae.targetSnapshot,Ae.currentRouterState);return V={...Ae,targetRouterState:Tt}}),(0,me.b)(Ae=>{O.currentUrlTree=Ae.urlAfterRedirects,O.rawUrlTree=O.urlHandlingStrategy.merge(Ae.urlAfterRedirects,Ae.rawUrl),O.routerState=Ae.targetRouterState,"deferred"===O.urlUpdateStrategy&&(Ae.extras.skipLocationChange||O.setBrowserUrl(O.rawUrlTree,Ae),O.browserUrlTree=Ae.urlAfterRedirects)}),((F,B,O)=>(0,ut.U)(V=>(new va(B,V.targetRouterState,V.currentRouterState,O).activate(F),V)))(this.rootContexts,O.routeReuseStrategy,Ae=>this.events.next(Ae)),(0,me.b)({next:Ae=>{var Tt;ne=!0,this.lastSuccessfulNavigation=this.currentNavigation,O.navigated=!0,this.events.next(new In(Ae.id,this.urlSerializer.serialize(Ae.extractedUrl),this.urlSerializer.serialize(O.currentUrlTree))),null===(Tt=O.titleStrategy)||void 0===Tt||Tt.updateTitle(Ae.targetRouterState.snapshot),Ae.resolve(!0)},complete:()=>{ne=!0}}),Yt(()=>{var Ae;ne||_e||this.cancelNavigationTransition(V,"",1),(null===(Ae=this.currentNavigation)||void 0===Ae?void 0:Ae.id)===V.id&&(this.currentNavigation=null)}),te(Ae=>{if(_e=!0,is(Ae)){lo(Ae)||(O.navigated=!0,O.restoreHistory(V,!0));const tn=new Zn(V.id,this.urlSerializer.serialize(V.extractedUrl),Ae.message,Ae.cancellationCode);if(this.events.next(tn),lo(Ae)){const On=O.urlHandlingStrategy.merge(Ae.url,O.rawUrlTree),ar={skipLocationChange:V.extras.skipLocationChange,replaceUrl:"eager"===O.urlUpdateStrategy||ac(V.source)};O.scheduleNavigation(On,Ut,null,ar,{resolve:V.resolve,reject:V.reject,promise:V.promise})}else V.resolve(!1)}else{var Tt;O.restoreHistory(V,!0);const tn=new ci(V.id,this.urlSerializer.serialize(V.extractedUrl),Ae,null!==(Tt=V.targetSnapshot)&&void 0!==Tt?Tt:void 0);this.events.next(tn);try{V.resolve(O.errorHandler(Ae))}catch(On){V.reject(On)}}return st.E}))}))}cancelNavigationTransition(O,V,ne){const _e=new Zn(O.id,this.urlSerializer.serialize(O.extractedUrl),V,ne);this.events.next(_e),O.resolve(!1)}}return F.\u0275fac=function(O){return new(O||F)},F.\u0275prov=m.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();function ac(F){return F!==Ut}let wa=(()=>{class F{buildTitle(O){let V,ne=O.root;for(;void 0!==ne;){var _e;V=null!==(_e=this.getResolvedTitleForRoute(ne))&&void 0!==_e?_e:V,ne=ne.children.find(Ae=>Ae.outlet===mn)}return V}getResolvedTitleForRoute(O){return O.data[Gn]}}return F.\u0275fac=function(O){return new(O||F)},F.\u0275prov=m.Yz7({token:F,factory:function(){return(0,m.f3M)(yu)},providedIn:"root"}),F})(),yu=(()=>{class F extends wa{constructor(O){super(),this.title=O}updateTitle(O){const V=this.buildTitle(O);void 0!==V&&this.title.setTitle(V)}}return F.\u0275fac=function(O){return new(O||F)(m.LFG(Mn.Dx))},F.\u0275prov=m.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})(),fo=(()=>{class F{}return F.\u0275fac=function(O){return new(O||F)},F.\u0275prov=m.Yz7({token:F,factory:function(){return(0,m.f3M)(Ra)},providedIn:"root"}),F})();class qr{shouldDetach(B){return!1}store(B,O){}shouldAttach(B){return!1}retrieve(B){return null}shouldReuseRoute(B,O){return B.routeConfig===O.routeConfig}}let Ra=(()=>{class F extends qr{}return F.\u0275fac=function(){let B;return function(V){return(B||(B=m.n5z(F)))(V||F)}}(),F.\u0275prov=m.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();const eo=new m.OlP("",{providedIn:"root",factory:()=>({})});let Lr=(()=>{class F{}return F.\u0275fac=function(O){return new(O||F)},F.\u0275prov=m.Yz7({token:F,factory:function(){return(0,m.f3M)(Oa)},providedIn:"root"}),F})(),Oa=(()=>{class F{shouldProcessUrl(O){return!0}extract(O){return O}merge(O,V){return O}}return F.\u0275fac=function(O){return new(O||F)},F.\u0275prov=m.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();function Yc(F){throw F}function Li(F,B,O){return B.parse("/")}const Yn={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_u={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let qi=(()=>{class F{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){var O;return null===(O=this.location.getState())||void 0===O?void 0:O.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){var O;this.disposed=!1,this.currentPageId=0,this.console=(0,m.f3M)(m.c2e),this.isNgZoneEnabled=!1,this.options=(0,m.f3M)(eo,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Yc,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Li,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,m.f3M)(Lr),this.routeReuseStrategy=(0,m.f3M)(fo),this.urlCreationStrategy=(0,m.f3M)(Os),this.titleStrategy=(0,m.f3M)(wa),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Vr(null!==(O=(0,m.f3M)(Ea,{optional:!0}))&&void 0!==O?O:[]),this.navigationTransitions=(0,m.f3M)(su),this.urlSerializer=(0,m.f3M)(dr),this.location=(0,m.f3M)(qe.Ye),this.isNgZoneEnabled=(0,m.f3M)(m.R0b)instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Rr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=fs(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(V=>{this.lastSuccessfulId=V.id,this.currentPageId=V.targetPageId},V=>{this.console.warn(`Unhandled Navigation Error: ${V}`)})}resetRootComponentType(O){this.routerState.root.component=O,this.navigationTransitions.rootComponentType=O}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const O=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ut,O)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(O=>{const V="popstate"===O.type?"popstate":"hashchange";"popstate"===V&&setTimeout(()=>{this.navigateToSyncWithBrowser(O.url,V,O.state)},0)}))}navigateToSyncWithBrowser(O,V,ne){const _e={replaceUrl:!0},Ae=null!=ne&&ne.navigationId?ne:null;if(ne){const tn={...ne};delete tn.navigationId,delete tn.\u0275routerPageId,0!==Object.keys(tn).length&&(_e.state=tn)}const Tt=this.parseUrl(O);this.scheduleNavigation(Tt,V,Ae,_e)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(O){this.config=O.map($i),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(O,V={}){const{relativeTo:ne,queryParams:_e,fragment:Ae,queryParamsHandling:Tt,preserveFragment:tn}=V,On=tn?this.currentUrlTree.fragment:Ae;let ar=null;switch(Tt){case"merge":ar={...this.currentUrlTree.queryParams,..._e};break;case"preserve":ar=this.currentUrlTree.queryParams;break;default:ar=_e||null}return null!==ar&&(ar=this.removeEmptyProps(ar)),this.urlCreationStrategy.createUrlTree(ne,this.routerState,this.currentUrlTree,O,ar,null!=On?On:null)}navigateByUrl(O,V={skipLocationChange:!1}){const ne=ti(O)?O:this.parseUrl(O),_e=this.urlHandlingStrategy.merge(ne,this.rawUrlTree);return this.scheduleNavigation(_e,Ut,null,V)}navigate(O,V={skipLocationChange:!1}){return function qa(F){for(let B=0;B<F.length;B++){const O=F[B];if(null==O)throw new m.vHH(4008,false)}}(O),this.navigateByUrl(this.createUrlTree(O,V),V)}serializeUrl(O){return this.urlSerializer.serialize(O)}parseUrl(O){let V;try{V=this.urlSerializer.parse(O)}catch(ne){V=this.malformedUriErrorHandler(ne,this.urlSerializer,O)}return V}isActive(O,V){let ne;if(ne=!0===V?{...Yn}:!1===V?{..._u}:V,ti(O))return qn(this.currentUrlTree,O,ne);const _e=this.parseUrl(O);return qn(this.currentUrlTree,_e,ne)}removeEmptyProps(O){return Object.keys(O).reduce((V,ne)=>{const _e=O[ne];return null!=_e&&(V[ne]=_e),V},{})}scheduleNavigation(O,V,ne,_e,Ae){if(this.disposed)return Promise.resolve(!1);let Tt,tn,On,ar;if(Ae?(Tt=Ae.resolve,tn=Ae.reject,On=Ae.promise):On=new Promise((oe,Ee)=>{Tt=oe,tn=Ee}),"computed"===this.canceledNavigationResolution)if(ne&&ne.\u0275routerPageId)ar=ne.\u0275routerPageId;else if(_e.replaceUrl||_e.skipLocationChange){var or;ar=null!==(or=this.browserPageId)&&void 0!==or?or:0}else{var K;ar=(null!==(K=this.browserPageId)&&void 0!==K?K:0)+1}else ar=0;return this.navigationTransitions.handleNavigationRequest({targetPageId:ar,source:V,restoredState:ne,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:O,extras:_e,resolve:Tt,reject:tn,promise:On,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),On.catch(oe=>Promise.reject(oe))}setBrowserUrl(O,V){const ne=this.urlSerializer.serialize(O),_e={...V.extras.state,...this.generateNgRouterState(V.id,V.targetPageId)};this.location.isCurrentPathEqualTo(ne)||V.extras.replaceUrl?this.location.replaceState(ne,"",_e):this.location.go(ne,"",_e)}restoreHistory(O,V=!1){if("computed"===this.canceledNavigationResolution){var ne,_e;const Ae=this.currentPageId-O.targetPageId;"popstate"!==O.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(ne=this.getCurrentNavigation())||void 0===ne?void 0:ne.finalUrl)||0===Ae?this.currentUrlTree===(null===(_e=this.getCurrentNavigation())||void 0===_e?void 0:_e.finalUrl)&&0===Ae&&(this.resetState(O),this.browserUrlTree=O.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Ae)}else"replace"===this.canceledNavigationResolution&&(V&&this.resetState(O),this.resetUrlToCurrentUrlTree())}resetState(O){this.routerState=O.currentRouterState,this.currentUrlTree=O.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,O.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(O,V){return"computed"===this.canceledNavigationResolution?{navigationId:O,\u0275routerPageId:V}:{navigationId:O}}}return F.\u0275fac=function(O){return new(O||F)},F.\u0275prov=m.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})(),$a=(()=>{class F{constructor(O,V,ne,_e,Ae,Tt){var tn;this.router=O,this.route=V,this.tabIndexAttribute=ne,this.renderer=_e,this.el=Ae,this.locationStrategy=Tt,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Qe.x;const On=null===(tn=Ae.nativeElement.tagName)||void 0===tn?void 0:tn.toLowerCase();this.isAnchorElement="a"===On||"area"===On,this.isAnchorElement?this.subscription=O.events.subscribe(ar=>{ar instanceof In&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(O){this._preserveFragment=(0,m.D6c)(O)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(O){this._skipLocationChange=(0,m.D6c)(O)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(O){this._replaceUrl=(0,m.D6c)(O)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(O){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",O)}ngOnChanges(O){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(O){null!=O?(this.commands=Array.isArray(O)?O:[O],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(O,V,ne,_e,Ae){return!!(null===this.urlTree||this.isAnchorElement&&(0!==O||V||ne||_e||Ae||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){var O;null===(O=this.subscription)||void 0===O||O.unsubscribe()}updateHref(){var O;this.href=null!==this.urlTree&&this.locationStrategy?null===(O=this.locationStrategy)||void 0===O?void 0:O.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const V=null===this.href?null:(0,m.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",V)}applyAttributeValue(O,V){const ne=this.renderer,_e=this.el.nativeElement;null!==V?ne.setAttribute(_e,O,V):ne.removeAttribute(_e,O)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return F.\u0275fac=function(O){return new(O||F)(m.Y36(qi),m.Y36(Uo),m.$8M("tabindex"),m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(qe.S$))},F.\u0275dir=m.lG2({type:F,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(O,V){1&O&&m.NdJ("click",function(_e){return V.onClick(_e.button,_e.ctrlKey,_e.shiftKey,_e.altKey,_e.metaKey)}),2&O&&m.uIk("target",V.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[m.TTD]}),F})();class au{}let uc=(()=>{class F{preload(O,V){return V().pipe(te(()=>(0,H.of)(null)))}}return F.\u0275fac=function(O){return new(O||F)},F.\u0275prov=m.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})(),jt=(()=>{class F{constructor(O,V,ne,_e,Ae){this.router=O,this.injector=ne,this.preloadingStrategy=_e,this.loader=Ae}setUpPreloading(){this.subscription=this.router.events.pipe((0,gt.h)(O=>O instanceof In),Ze(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(O,V){const ne=[];for(const tn of V){var _e,Ae;tn.providers&&!tn._injector&&(tn._injector=(0,m.MMx)(tn.providers,O,`Route: ${tn.path}`));const On=null!==(_e=tn._injector)&&void 0!==_e?_e:O,ar=null!==(Ae=tn._loadedInjector)&&void 0!==Ae?Ae:On;if(tn.loadChildren&&!tn._loadedRoutes&&void 0===tn.canLoad||tn.loadComponent&&!tn._loadedComponent)ne.push(this.preloadConfig(On,tn));else if(tn.children||tn._loadedRoutes){var Tt;ne.push(this.processRoutes(ar,null!==(Tt=tn.children)&&void 0!==Tt?Tt:tn._loadedRoutes))}}return(0,J.D)(ne).pipe((0,yn.J)())}preloadConfig(O,V){return this.preloadingStrategy.preload(V,()=>{let ne;ne=V.loadChildren&&void 0===V.canLoad?this.loader.loadChildren(O,V):(0,H.of)(null);const _e=ne.pipe((0,Le.z)(Ae=>{var Tt;return null===Ae?(0,H.of)(void 0):(V._loadedRoutes=Ae.routes,V._loadedInjector=Ae.injector,this.processRoutes(null!==(Tt=Ae.injector)&&void 0!==Tt?Tt:O,Ae.routes))}));if(V.loadComponent&&!V._loadedComponent){const Ae=this.loader.loadComponent(V);return(0,J.D)([_e,Ae]).pipe((0,yn.J)())}return _e})}}return F.\u0275fac=function(O){return new(O||F)(m.LFG(qi),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(au),m.LFG(Va))},F.\u0275prov=m.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();const uu=new m.OlP("");let tt=(()=>{class F{constructor(O,V,ne,_e,Ae={}){this.urlSerializer=O,this.transitions=V,this.viewportScroller=ne,this.zone=_e,this.options=Ae,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Ae.scrollPositionRestoration=Ae.scrollPositionRestoration||"disabled",Ae.anchorScrolling=Ae.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(O=>{O instanceof on?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=O.navigationTrigger,this.restoredId=O.restoredState?O.restoredState.navigationId:0):O instanceof In&&(this.lastId=O.id,this.scheduleScrollEvent(O,this.urlSerializer.parse(O.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(O=>{O instanceof ji&&(O.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(O.position):O.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(O.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(O,V){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ji(O,"popstate"===this.lastSource?this.store[this.restoredId]:null,V))})},0)})}ngOnDestroy(){var O,V;null===(O=this.routerEventsSubscription)||void 0===O||O.unsubscribe(),null===(V=this.scrollEventsSubscription)||void 0===V||V.unsubscribe()}}return F.\u0275fac=function(O){m.$Z()},F.\u0275prov=m.Yz7({token:F,factory:F.\u0275fac}),F})();var us=(()=>((us=us||{})[us.COMPLETE=0]="COMPLETE",us[us.FAILED=1]="FAILED",us[us.REDIRECTING=2]="REDIRECTING",us))();const Ss=!1;function zo(F,B){return{\u0275kind:F,\u0275providers:B}}const Dc=new m.OlP("",{providedIn:"root",factory:()=>!1});function Eu(){const F=(0,m.f3M)(m.zs3);return B=>{var O,V;const ne=F.get(m.z2F);if(B!==ne.components[0])return;const _e=F.get(qi),Ae=F.get(Ps);1===F.get(wu)&&_e.initialNavigation(),null===(O=F.get(Xu,null,m.XFs.Optional))||void 0===O||O.setUpPreloading(),null===(V=F.get(uu,null,m.XFs.Optional))||void 0===V||V.init(),_e.resetRootComponentType(ne.componentTypes[0]),Ae.closed||(Ae.next(),Ae.unsubscribe())}}const Ps=new m.OlP(Ss?"bootstrap done indicator":"",{factory:()=>new Qe.x}),wu=new m.OlP(Ss?"initial navigation":"",{providedIn:"root",factory:()=>1});function ha(){let F=[];return F=Ss?[{provide:m.Xts,multi:!0,useFactory:()=>{const B=(0,m.f3M)(qi);return()=>B.events.subscribe(O=>{var V,ne,_e,Ae;null===(V=(ne=console).group)||void 0===V||V.call(ne,`Router Event: ${O.constructor.name}`),console.log(function uo(F){var B,O,V,ne;if(!("type"in F))return`Unknown Router Event: ${F.constructor.name}`;switch(F.type){case 14:return`ActivationEnd(path: '${(null===(B=F.snapshot.routeConfig)||void 0===B?void 0:B.path)||""}')`;case 13:return`ActivationStart(path: '${(null===(O=F.snapshot.routeConfig)||void 0===O?void 0:O.path)||""}')`;case 12:return`ChildActivationEnd(path: '${(null===(V=F.snapshot.routeConfig)||void 0===V?void 0:V.path)||""}')`;case 11:return`ChildActivationStart(path: '${(null===(ne=F.snapshot.routeConfig)||void 0===ne?void 0:ne.path)||""}')`;case 8:return`GuardsCheckEnd(id: ${F.id}, url: '${F.url}', urlAfterRedirects: '${F.urlAfterRedirects}', state: ${F.state}, shouldActivate: ${F.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${F.id}, url: '${F.url}', urlAfterRedirects: '${F.urlAfterRedirects}', state: ${F.state})`;case 2:return`NavigationCancel(id: ${F.id}, url: '${F.url}')`;case 16:return`NavigationSkipped(id: ${F.id}, url: '${F.url}')`;case 1:return`NavigationEnd(id: ${F.id}, url: '${F.url}', urlAfterRedirects: '${F.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${F.id}, url: '${F.url}', error: ${F.error})`;case 0:return`NavigationStart(id: ${F.id}, url: '${F.url}')`;case 6:return`ResolveEnd(id: ${F.id}, url: '${F.url}', urlAfterRedirects: '${F.urlAfterRedirects}', state: ${F.state})`;case 5:return`ResolveStart(id: ${F.id}, url: '${F.url}', urlAfterRedirects: '${F.urlAfterRedirects}', state: ${F.state})`;case 10:return`RouteConfigLoadEnd(path: ${F.route.path})`;case 9:return`RouteConfigLoadStart(path: ${F.route.path})`;case 4:return`RoutesRecognized(id: ${F.id}, url: '${F.url}', urlAfterRedirects: '${F.urlAfterRedirects}', state: ${F.state})`;case 15:return`Scroll(anchor: '${F.anchor}', position: '${F.position?`${F.position[0]}, ${F.position[1]}`:null}')`}}(O)),console.log(O),null===(_e=(Ae=console).groupEnd)||void 0===_e||_e.call(Ae)})}}]:[],zo(1,F)}const Xu=new m.OlP(Ss?"router preloader":"");function Na(F){return zo(0,[{provide:Xu,useExisting:jt},{provide:au,useExisting:F}])}const fa=!1,ks=new m.OlP(fa?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Pa=[qe.Ye,{provide:dr,useClass:jn},qi,Qo,{provide:Uo,useFactory:function ku(F){return F.routerState.root},deps:[qi]},Va,fa?{provide:Dc,useValue:!0}:[]];function so(){return new m.PXZ("Router",qi)}let Za=(()=>{class F{constructor(O){}static forRoot(O,V){return{ngModule:F,providers:[Pa,fa&&null!=V&&V.enableTracing?ha().\u0275providers:[],{provide:Ea,multi:!0,useValue:O},{provide:ks,useFactory:cc,deps:[[qi,new m.FiY,new m.tp0]]},{provide:eo,useValue:V||{}},null!=V&&V.useHash?{provide:qe.S$,useClass:qe.Do}:{provide:qe.S$,useClass:qe.b0},{provide:uu,useFactory:()=>{const F=(0,m.f3M)(qe.EM),B=(0,m.f3M)(m.R0b),O=(0,m.f3M)(eo),V=(0,m.f3M)(su),ne=(0,m.f3M)(dr);return O.scrollOffset&&F.setOffset(O.scrollOffset),new tt(ne,V,F,B,O)}},null!=V&&V.preloadingStrategy?Na(V.preloadingStrategy).\u0275providers:[],{provide:m.PXZ,multi:!0,useFactory:so},null!=V&&V.initialNavigation?fl(V):[],[{provide:Oo,useFactory:Eu},{provide:m.tb,multi:!0,useExisting:Oo}]]}}static forChild(O){return{ngModule:F,providers:[{provide:Ea,multi:!0,useValue:O}]}}}return F.\u0275fac=function(O){return new(O||F)(m.LFG(ks,8))},F.\u0275mod=m.oAB({type:F}),F.\u0275inj=m.cJS({imports:[Ni]}),F})();function cc(F){if(fa&&F)throw new m.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function fl(F){return["disabled"===F.initialNavigation?zo(3,[{provide:m.ip1,multi:!0,useFactory:()=>{const B=(0,m.f3M)(qi);return()=>{B.setUpLocationChangeListener()}}},{provide:wu,useValue:2}]).\u0275providers:[],"enabledBlocking"===F.initialNavigation?zo(2,[{provide:wu,useValue:0},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:B=>{const O=B.get(qe.V_,Promise.resolve());return()=>O.then(()=>new Promise(V=>{const ne=B.get(qi),_e=B.get(Ps);(function Ma(F,B){F.events.pipe((0,gt.h)(O=>O instanceof In||O instanceof Zn||O instanceof ci||O instanceof Jn),(0,ut.U)(O=>O instanceof In||O instanceof Jn?us.COMPLETE:O instanceof Zn&&(0===O.code||1===O.code)?us.REDIRECTING:us.FAILED),(0,gt.h)(O=>O!==us.REDIRECTING),(0,pt.q)(1)).subscribe(()=>{B()})})(ne,()=>{V(!0)}),B.get(su).afterPreactivation=()=>(V(!0),_e.closed?(0,H.of)(void 0):_e),ne.initialNavigation()}))}}]).\u0275providers:[]]}const Oo=new m.OlP(fa?"Router Initializer":"")},3942:(pn,Pe,U)=>{"use strict";U.d(Pe,{Z:()=>Ke});var m=U(2090),J=U(4859),H=U(9681),he=U(1877);class le{constructor(We,Fe){this._delegate=We,this.firebase=Fe,(0,H._addComponent)(We,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=We.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(We){this._delegate.automaticDataCollectionEnabled=We}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(We=>{this._delegate.checkDestroyed(),We()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,H.deleteApp)(this._delegate)))}_getService(We,Fe=H._DEFAULT_ENTRY_NAME){var Ce;this._delegate.checkDestroyed();const ct=this._delegate.container.getProvider(We);return!ct.isInitialized()&&"EXPLICIT"===(null===(Ce=ct.getComponent())||void 0===Ce?void 0:Ce.instantiationMode)&&ct.initialize(),ct.getImmediate({identifier:Fe})}_removeServiceInstance(We,Fe=H._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(We).clearInstance(Fe)}_addComponent(We){(0,H._addComponent)(this._delegate,We)}_addOrOverwriteComponent(We){(0,H._addOrOverwriteComponent)(this._delegate,We)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ye=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ge=function $e(){const Lt=function be(Lt){const We={},Fe={__esModule:!0,initializeApp:function At(Ye,$={}){const lt=H.initializeApp(Ye,$);if((0,m.r3)(We,lt.name))return We[lt.name];const Qe=new Lt(lt,Fe);return We[lt.name]=Qe,Qe},app:ct,registerVersion:H.registerVersion,setLogLevel:H.setLogLevel,onLog:H.onLog,apps:null,SDK_VERSION:H.SDK_VERSION,INTERNAL:{registerComponent:function st(Ye){const $=Ye.name,lt=$.replace("-compat","");if(H._registerComponent(Ye)&&"PUBLIC"===Ye.type){const Qe=(qe=ct())=>{if("function"!=typeof qe[lt])throw ye.create("invalid-app-argument",{appName:$});return qe[lt]()};void 0!==Ye.serviceProps&&(0,m.ZB)(Qe,Ye.serviceProps),Fe[lt]=Qe,Lt.prototype[lt]=function(...qe){return this._getService.bind(this,$).apply(this,Ye.multipleInstances?qe:[])}}return"PUBLIC"===Ye.type?Fe[lt]:null},removeApp:function Ce(Ye){delete We[Ye]},useAsService:function Be(Ye,$){return"serverAuth"===$?null:$},modularAPIs:H}};function ct(Ye){if(!(0,m.r3)(We,Ye=Ye||H._DEFAULT_ENTRY_NAME))throw ye.create("no-app",{appName:Ye});return We[Ye]}return Fe.default=Fe,Object.defineProperty(Fe,"apps",{get:function yt(){return Object.keys(We).map(Ye=>We[Ye])}}),ct.App=Lt,Fe}(le);return Lt.INTERNAL=Object.assign(Object.assign({},Lt.INTERNAL),{createFirebaseNamespace:$e,extendNamespace:function We(Fe){(0,m.ZB)(Lt,Fe)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),Lt}(),De=new he.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){De.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Lt=self.firebase.SDK_VERSION;Lt&&Lt.indexOf("LITE")>=0&&De.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ke=ge;!function Xe(Lt){(0,H.registerVersion)("@firebase/app-compat","0.2.3",Lt)}()},9681:(pn,Pe,U)=>{"use strict";U.r(Pe),U.d(Pe,{FirebaseError:()=>he.ZR,SDK_VERSION:()=>Mn,_DEFAULT_ENTRY_NAME:()=>it,_addComponent:()=>q,_addOrOverwriteComponent:()=>re,_apps:()=>me,_clearComponents:()=>Qt,_components:()=>te,_getProvider:()=>ke,_registerComponent:()=>fe,_removeServiceInstance:()=>rt,deleteApp:()=>Nn,getApp:()=>Gn,getApps:()=>Ar,initializeApp:()=>mn,onLog:()=>sn,registerVersion:()=>En,setLogLevel:()=>Ir});var m=U(5861),J=U(4859),H=U(1877),he=U(2090),le=U(8766);class we{constructor(ln){this.container=ln}getPlatformInfoString(){return this.container.getProviders().map(Un=>{if(function ye(wn){const ln=wn.getComponent();return"VERSION"===(null==ln?void 0:ln.type)}(Un)){const dr=Un.getImmediate();return`${dr.library}/${dr.version}`}return null}).filter(Un=>Un).join(" ")}}const be="@firebase/app",ge=new H.Yd("@firebase/app"),it="[DEFAULT]",Ze={[be]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},me=new Map,te=new Map;function q(wn,ln){try{wn.container.addComponent(ln)}catch(Un){ge.debug(`Component ${ln.name} failed to register with FirebaseApp ${wn.name}`,Un)}}function re(wn,ln){wn.container.addOrOverwriteComponent(ln)}function fe(wn){const ln=wn.name;if(te.has(ln))return ge.debug(`There were multiple attempts to register component ${ln}.`),!1;te.set(ln,wn);for(const Un of me.values())q(Un,wn);return!0}function ke(wn,ln){const Un=wn.container.getProvider("heartbeat").getImmediate({optional:!0});return Un&&Un.triggerHeartbeat(),wn.container.getProvider(ln)}function rt(wn,ln,Un=it){ke(wn,ln).clearInstance(Un)}function Qt(){te.clear()}const Yt=new he.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class yn{constructor(ln,Un,dr){this._isDeleted=!1,this._options=Object.assign({},ln),this._config=Object.assign({},Un),this._name=Un.name,this._automaticDataCollectionEnabled=Un.automaticDataCollectionEnabled,this._container=dr,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ln){this.checkDestroyed(),this._automaticDataCollectionEnabled=ln}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ln){this._isDeleted=ln}checkDestroyed(){if(this.isDeleted)throw Yt.create("app-deleted",{appName:this._name})}}const Mn="9.17.1";function mn(wn,ln={}){let Un=wn;"object"!=typeof ln&&(ln={name:ln});const dr=Object.assign({name:it,automaticDataCollectionEnabled:!1},ln),jn=dr.name;if("string"!=typeof jn||!jn)throw Yt.create("bad-app-name",{appName:String(jn)});if(Un||(Un=(0,he.aH)()),!Un)throw Yt.create("no-options");const hr=me.get(jn);if(hr){if((0,he.vZ)(Un,hr.options)&&(0,he.vZ)(dr,hr.config))return hr;throw Yt.create("duplicate-app",{appName:jn})}const He=new J.H0(jn);for(const ht of te.values())He.addComponent(ht);const ot=new yn(Un,dr,He);return me.set(jn,ot),ot}function Gn(wn=it){const ln=me.get(wn);if(!ln&&wn===it)return mn();if(!ln)throw Yt.create("no-app",{appName:wn});return ln}function Ar(){return Array.from(me.values())}function Nn(wn){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,m.Z)(function*(wn){const ln=wn.name;me.has(ln)&&(me.delete(ln),yield Promise.all(wn.container.getProviders().map(Un=>Un.delete())),wn.isDeleted=!0)})).apply(this,arguments)}function En(wn,ln,Un){var dr;let jn=null!==(dr=Ze[wn])&&void 0!==dr?dr:wn;Un&&(jn+=`-${Un}`);const hr=jn.match(/\s|\//),He=ln.match(/\s|\//);if(hr||He){const ot=[`Unable to register library "${jn}" with version "${ln}":`];return hr&&ot.push(`library name "${jn}" contains illegal characters (whitespace or "/")`),hr&&He&&ot.push("and"),He&&ot.push(`version name "${ln}" contains illegal characters (whitespace or "/")`),void ge.warn(ot.join(" "))}fe(new J.wA(`${jn}-version`,()=>({library:jn,version:ln}),"VERSION"))}function sn(wn,ln){if(null!==wn&&"function"!=typeof wn)throw Yt.create("invalid-log-argument");(0,H.Am)(wn,ln)}function Ir(wn){(0,H.Ub)(wn)}const Vr="firebase-heartbeat-database",br=1,Kt="firebase-heartbeat-store";let Jr=null;function rr(){return Jr||(Jr=(0,le.X3)(Vr,br,{upgrade:(wn,ln)=>{0===ln&&wn.createObjectStore(Kt)}}).catch(wn=>{throw Yt.create("idb-open",{originalErrorMessage:wn.message})})),Jr}function cr(){return(cr=(0,m.Z)(function*(wn){try{return(yield rr()).transaction(Kt).objectStore(Kt).get(Wr(wn))}catch(ln){if(ln instanceof he.ZR)ge.warn(ln.message);else{const Un=Yt.create("idb-get",{originalErrorMessage:null==ln?void 0:ln.message});ge.warn(Un.message)}}})).apply(this,arguments)}function zi(wn,ln){return qn.apply(this,arguments)}function qn(){return(qn=(0,m.Z)(function*(wn,ln){try{const dr=(yield rr()).transaction(Kt,"readwrite");return yield dr.objectStore(Kt).put(ln,Wr(wn)),dr.done}catch(Un){if(Un instanceof he.ZR)ge.warn(Un.message);else{const dr=Yt.create("idb-set",{originalErrorMessage:null==Un?void 0:Un.message});ge.warn(dr.message)}}})).apply(this,arguments)}function Wr(wn){return`${wn.name}!${wn.options.appId}`}class Wi{constructor(ln){this.container=ln,this._heartbeatsCache=null;const Un=this.container.getProvider("app").getImmediate();this._storage=new Rr(Un),this._heartbeatsCachePromise=this._storage.read().then(dr=>(this._heartbeatsCache=dr,dr))}triggerHeartbeat(){var ln=this;return(0,m.Z)(function*(){const dr=ln.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),jn=jr();if(null===ln._heartbeatsCache&&(ln._heartbeatsCache=yield ln._heartbeatsCachePromise),ln._heartbeatsCache.lastSentHeartbeatDate!==jn&&!ln._heartbeatsCache.heartbeats.some(hr=>hr.date===jn))return ln._heartbeatsCache.heartbeats.push({date:jn,agent:dr}),ln._heartbeatsCache.heartbeats=ln._heartbeatsCache.heartbeats.filter(hr=>{const He=new Date(hr.date).valueOf();return Date.now()-He<=2592e6}),ln._storage.overwrite(ln._heartbeatsCache)})()}getHeartbeatsHeader(){var ln=this;return(0,m.Z)(function*(){if(null===ln._heartbeatsCache&&(yield ln._heartbeatsCachePromise),null===ln._heartbeatsCache||0===ln._heartbeatsCache.heartbeats.length)return"";const Un=jr(),{heartbeatsToSend:dr,unsentEntries:jn}=function Pi(wn,ln=1024){const Un=[];let dr=wn.slice();for(const jn of wn){const hr=Un.find(He=>He.agent===jn.agent);if(hr){if(hr.dates.push(jn.date),Er(Un)>ln){hr.dates.pop();break}}else if(Un.push({agent:jn.agent,dates:[jn.date]}),Er(Un)>ln){Un.pop();break}dr=dr.slice(1)}return{heartbeatsToSend:Un,unsentEntries:dr}}(ln._heartbeatsCache.heartbeats),hr=(0,he.L)(JSON.stringify({version:2,heartbeats:dr}));return ln._heartbeatsCache.lastSentHeartbeatDate=Un,jn.length>0?(ln._heartbeatsCache.heartbeats=jn,yield ln._storage.overwrite(ln._heartbeatsCache)):(ln._heartbeatsCache.heartbeats=[],ln._storage.overwrite(ln._heartbeatsCache)),hr})()}}function jr(){return(new Date).toISOString().substring(0,10)}class Rr{constructor(ln){this.app=ln,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,he.hl)()&&(0,he.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ln=this;return(0,m.Z)(function*(){return(yield ln._canUseIndexedDBPromise)&&(yield function Bn(wn){return cr.apply(this,arguments)}(ln.app))||{heartbeats:[]}})()}overwrite(ln){var Un=this;return(0,m.Z)(function*(){var dr;if(yield Un._canUseIndexedDBPromise){const hr=yield Un.read();return zi(Un.app,{lastSentHeartbeatDate:null!==(dr=ln.lastSentHeartbeatDate)&&void 0!==dr?dr:hr.lastSentHeartbeatDate,heartbeats:ln.heartbeats})}})()}add(ln){var Un=this;return(0,m.Z)(function*(){var dr;if(yield Un._canUseIndexedDBPromise){const hr=yield Un.read();return zi(Un.app,{lastSentHeartbeatDate:null!==(dr=ln.lastSentHeartbeatDate)&&void 0!==dr?dr:hr.lastSentHeartbeatDate,heartbeats:[...hr.heartbeats,...ln.heartbeats]})}})()}}function Er(wn){return(0,he.L)(JSON.stringify({version:2,heartbeats:wn})).length}!function ii(wn){fe(new J.wA("platform-logger",ln=>new we(ln),"PRIVATE")),fe(new J.wA("heartbeat",ln=>new Wi(ln),"PRIVATE")),En(be,"0.9.3",wn),En(be,"0.9.3","esm2017"),En("fire-js","")}("")},4859:(pn,Pe,U)=>{"use strict";U.d(Pe,{H0:()=>be,wA:()=>H,zt:()=>le});var m=U(5861),J=U(2090);class H{constructor(ge,De,xe){this.name=ge,this.instanceFactory=De,this.type=xe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ge){return this.instantiationMode=ge,this}setMultipleInstances(ge){return this.multipleInstances=ge,this}setServiceProps(ge){return this.serviceProps=ge,this}setInstanceCreatedCallback(ge){return this.onInstanceCreated=ge,this}}const he="[DEFAULT]";class le{constructor(ge,De){this.name=ge,this.container=De,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ge){const De=this.normalizeInstanceIdentifier(ge);if(!this.instancesDeferred.has(De)){const xe=new J.BH;if(this.instancesDeferred.set(De,xe),this.isInitialized(De)||this.shouldAutoInitialize())try{const Ne=this.getOrInitializeService({instanceIdentifier:De});Ne&&xe.resolve(Ne)}catch(Ne){}}return this.instancesDeferred.get(De).promise}getImmediate(ge){var De;const xe=this.normalizeInstanceIdentifier(null==ge?void 0:ge.identifier),Ne=null!==(De=null==ge?void 0:ge.optional)&&void 0!==De&&De;if(!this.isInitialized(xe)&&!this.shouldAutoInitialize()){if(Ne)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:xe})}catch(Xe){if(Ne)return null;throw Xe}}getComponent(){return this.component}setComponent(ge){if(ge.name!==this.name)throw Error(`Mismatching Component ${ge.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ge,this.shouldAutoInitialize()){if(function ye($e){return"EAGER"===$e.instantiationMode}(ge))try{this.getOrInitializeService({instanceIdentifier:he})}catch(De){}for(const[De,xe]of this.instancesDeferred.entries()){const Ne=this.normalizeInstanceIdentifier(De);try{const Xe=this.getOrInitializeService({instanceIdentifier:Ne});xe.resolve(Xe)}catch(Xe){}}}}clearInstance(ge=he){this.instancesDeferred.delete(ge),this.instancesOptions.delete(ge),this.instances.delete(ge)}delete(){var ge=this;return(0,m.Z)(function*(){const De=Array.from(ge.instances.values());yield Promise.all([...De.filter(xe=>"INTERNAL"in xe).map(xe=>xe.INTERNAL.delete()),...De.filter(xe=>"_delete"in xe).map(xe=>xe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ge=he){return this.instances.has(ge)}getOptions(ge=he){return this.instancesOptions.get(ge)||{}}initialize(ge={}){const{options:De={}}=ge,xe=this.normalizeInstanceIdentifier(ge.instanceIdentifier);if(this.isInitialized(xe))throw Error(`${this.name}(${xe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ne=this.getOrInitializeService({instanceIdentifier:xe,options:De});for(const[Xe,Ke]of this.instancesDeferred.entries())xe===this.normalizeInstanceIdentifier(Xe)&&Ke.resolve(Ne);return Ne}onInit(ge,De){var xe;const Ne=this.normalizeInstanceIdentifier(De),Xe=null!==(xe=this.onInitCallbacks.get(Ne))&&void 0!==xe?xe:new Set;Xe.add(ge),this.onInitCallbacks.set(Ne,Xe);const Ke=this.instances.get(Ne);return Ke&&ge(Ke,Ne),()=>{Xe.delete(ge)}}invokeOnInitCallbacks(ge,De){const xe=this.onInitCallbacks.get(De);if(xe)for(const Ne of xe)try{Ne(ge,De)}catch(Xe){}}getOrInitializeService({instanceIdentifier:ge,options:De={}}){let xe=this.instances.get(ge);if(!xe&&this.component&&(xe=this.component.instanceFactory(this.container,{instanceIdentifier:($e=ge,$e===he?void 0:$e),options:De}),this.instances.set(ge,xe),this.instancesOptions.set(ge,De),this.invokeOnInitCallbacks(xe,ge),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ge,xe)}catch(Ne){}var $e;return xe||null}normalizeInstanceIdentifier(ge=he){return this.component?this.component.multipleInstances?ge:he:ge}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class be{constructor(ge){this.name=ge,this.providers=new Map}addComponent(ge){const De=this.getProvider(ge.name);if(De.isComponentSet())throw new Error(`Component ${ge.name} has already been registered with ${this.name}`);De.setComponent(ge)}addOrOverwriteComponent(ge){this.getProvider(ge.name).isComponentSet()&&this.providers.delete(ge.name),this.addComponent(ge)}getProvider(ge){if(this.providers.has(ge))return this.providers.get(ge);const De=new le(ge,this);return this.providers.set(ge,De),De}getProviders(){return Array.from(this.providers.values())}}},1877:(pn,Pe,U)=>{"use strict";U.d(Pe,{Am:()=>$e,Ub:()=>be,Yd:()=>ye,in:()=>J});const m=[];var J=(()=>{return(ge=J||(J={}))[ge.DEBUG=0]="DEBUG",ge[ge.VERBOSE=1]="VERBOSE",ge[ge.INFO=2]="INFO",ge[ge.WARN=3]="WARN",ge[ge.ERROR=4]="ERROR",ge[ge.SILENT=5]="SILENT",J;var ge})();const H={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},he=J.INFO,le={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},we=(ge,De,...xe)=>{if(De<ge.logLevel)return;const Ne=(new Date).toISOString(),Xe=le[De];if(!Xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${De})`);console[Xe](`[${Ne}]  ${ge.name}:`,...xe)};class ye{constructor(De){this.name=De,this._logLevel=he,this._logHandler=we,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(De){if(!(De in J))throw new TypeError(`Invalid value "${De}" assigned to \`logLevel\``);this._logLevel=De}setLogLevel(De){this._logLevel="string"==typeof De?H[De]:De}get logHandler(){return this._logHandler}set logHandler(De){if("function"!=typeof De)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=De}get userLogHandler(){return this._userLogHandler}set userLogHandler(De){this._userLogHandler=De}debug(...De){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...De),this._logHandler(this,J.DEBUG,...De)}log(...De){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...De),this._logHandler(this,J.VERBOSE,...De)}info(...De){this._userLogHandler&&this._userLogHandler(this,J.INFO,...De),this._logHandler(this,J.INFO,...De)}warn(...De){this._userLogHandler&&this._userLogHandler(this,J.WARN,...De),this._logHandler(this,J.WARN,...De)}error(...De){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...De),this._logHandler(this,J.ERROR,...De)}}function be(ge){m.forEach(De=>{De.setLogLevel(ge)})}function $e(ge,De){for(const xe of m){let Ne=null;De&&De.level&&(Ne=H[De.level]),xe.userLogHandler=null===ge?null:(Xe,Ke,...Lt)=>{const We=Lt.map(Fe=>{if(null==Fe)return null;if("string"==typeof Fe)return Fe;if("number"==typeof Fe||"boolean"==typeof Fe)return Fe.toString();if(Fe instanceof Error)return Fe.message;try{return JSON.stringify(Fe)}catch(Ce){return null}}).filter(Fe=>Fe).join(" ");Ke>=(null!=Ne?Ne:Xe.logLevel)&&ge({level:J[Ke].toLowerCase(),message:We,args:Lt,type:Xe.name})}}}},4003:(pn,Pe,U)=>{"use strict";U.d(Pe,{S:()=>it,f:()=>Ze});var me,m=U(5861),J=U(6895),H=U(4650),he=U(433),le=U(4112),we=(me=function(te,q){return(me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(re,fe){re.__proto__=fe}||function(re,fe){for(var ke in fe)Object.prototype.hasOwnProperty.call(fe,ke)&&(re[ke]=fe[ke])})(te,q)},function(te,q){if("function"!=typeof q&&null!==q)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");function re(){this.constructor=te}me(te,q),te.prototype=null===q?Object.create(q):(re.prototype=q.prototype,new re)}),ye=function(me){function te(q){var re=me.call(this,q.width,q.height)||this;return re.canvas=q,re.tempCanvasElement=null,re.buffer=te.makeBufferFromCanvasImageData(q),re}return we(te,me),te.makeBufferFromCanvasImageData=function(q){var re=q.getContext("2d");if(!re)throw new Error("Couldn't get canvas context.");var fe=re.getImageData(0,0,q.width,q.height);return te.toGrayscaleBuffer(fe.data,q.width,q.height)},te.toGrayscaleBuffer=function(q,re,fe){for(var ke=new Uint8ClampedArray(re*fe),rt=0,Qt=0,Dt=q.length;rt<Dt;rt+=4,Qt++){ke[Qt]=0===q[rt+3]?255:306*q[rt]+601*q[rt+1]+117*q[rt+2]+512>>10}return ke},te.prototype.getRow=function(q,re){if(q<0||q>=this.getHeight())throw new le.IllegalArgumentException("Requested row is outside the image: "+q);var fe=this.getWidth(),ke=q*fe;return null===re?re=this.buffer.slice(ke,ke+fe):(re.length<fe&&(re=new Uint8ClampedArray(fe)),re.set(this.buffer.slice(ke,ke+fe))),re},te.prototype.getMatrix=function(){return this.buffer},te.prototype.isCropSupported=function(){return!0},te.prototype.crop=function(q,re,fe,ke){return me.prototype.crop.call(this,q,re,fe,ke),this},te.prototype.isRotateSupported=function(){return!0},te.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},te.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},te.prototype.invert=function(){return new le.InvertedLuminanceSource(this)},te.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var q=this.canvas.ownerDocument.createElement("canvas");q.width=this.canvas.width,q.height=this.canvas.height,this.tempCanvasElement=q}return this.tempCanvasElement},te.prototype.rotate=function(q){var re=this.getTempCanvasElement();if(!re)throw new Error("Could not create a Canvas element.");var fe=q*te.DEGREE_TO_RADIANS,ke=this.canvas.width,rt=this.canvas.height,Qt=Math.ceil(Math.abs(Math.cos(fe))*ke+Math.abs(Math.sin(fe))*rt),Dt=Math.ceil(Math.abs(Math.sin(fe))*ke+Math.abs(Math.cos(fe))*rt);re.width=Qt,re.height=Dt;var Yt=re.getContext("2d");if(!Yt)throw new Error("Could not create a Canvas Context element.");return Yt.translate(Qt/2,Dt/2),Yt.rotate(fe),Yt.drawImage(this.canvas,ke/-2,rt/-2),this.buffer=te.makeBufferFromCanvasImageData(re),this},te.DEGREE_TO_RADIANS=Math.PI/180,te}(le.LuminanceSource);function be(){return typeof navigator<"u"}var De=function(){return De=Object.assign||function(me){for(var te,q=1,re=arguments.length;q<re;q++)for(var fe in te=arguments[q])Object.prototype.hasOwnProperty.call(te,fe)&&(me[fe]=te[fe]);return me},De.apply(this,arguments)},xe=function(me,te,q,re){return new(q||(q=Promise))(function(ke,rt){function Qt(yn){try{Yt(re.next(yn))}catch(Mn){rt(Mn)}}function Dt(yn){try{Yt(re.throw(yn))}catch(Mn){rt(Mn)}}function Yt(yn){yn.done?ke(yn.value):function fe(ke){return ke instanceof q?ke:new q(function(rt){rt(ke)})}(yn.value).then(Qt,Dt)}Yt((re=re.apply(me,te||[])).next())})},Ne=function(me,te){var re,fe,ke,rt,q={label:0,sent:function(){if(1&ke[0])throw ke[1];return ke[1]},trys:[],ops:[]};return rt={next:Qt(0),throw:Qt(1),return:Qt(2)},"function"==typeof Symbol&&(rt[Symbol.iterator]=function(){return this}),rt;function Qt(Yt){return function(yn){return function Dt(Yt){if(re)throw new TypeError("Generator is already executing.");for(;q;)try{if(re=1,fe&&(ke=2&Yt[0]?fe.return:Yt[0]?fe.throw||((ke=fe.return)&&ke.call(fe),0):fe.next)&&!(ke=ke.call(fe,Yt[1])).done)return ke;switch(fe=0,ke&&(Yt=[2&Yt[0],ke.value]),Yt[0]){case 0:case 1:ke=Yt;break;case 4:return q.label++,{value:Yt[1],done:!1};case 5:q.label++,fe=Yt[1],Yt=[0];continue;case 7:Yt=q.ops.pop(),q.trys.pop();continue;default:if(!(ke=(ke=q.trys).length>0&&ke[ke.length-1])&&(6===Yt[0]||2===Yt[0])){q=0;continue}if(3===Yt[0]&&(!ke||Yt[1]>ke[0]&&Yt[1]<ke[3])){q.label=Yt[1];break}if(6===Yt[0]&&q.label<ke[1]){q.label=ke[1],ke=Yt;break}if(ke&&q.label<ke[2]){q.label=ke[2],q.ops.push(Yt);break}ke[2]&&q.ops.pop(),q.trys.pop();continue}Yt=te.call(me,q)}catch(yn){Yt=[6,yn],fe=0}finally{re=ke=0}if(5&Yt[0])throw Yt[1];return{value:Yt[0]?Yt[1]:void 0,done:!0}}([Yt,yn])}}},Xe=function(me){var te="function"==typeof Symbol&&Symbol.iterator,q=te&&me[te],re=0;if(q)return q.call(me);if(me&&"number"==typeof me.length)return{next:function(){return me&&re>=me.length&&(me=void 0),{value:me&&me[re++],done:!me}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")},Ke={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Lt=function(){function me(te,q,re){void 0===q&&(q=new Map),void 0===re&&(re={}),this.reader=te,this.hints=q,this.options=De(De({},Ke),re)}return Object.defineProperty(me.prototype,"possibleFormats",{set:function(te){this.hints.set(le.DecodeHintType.POSSIBLE_FORMATS,te)},enumerable:!1,configurable:!0}),me.addVideoSource=function(te,q){try{te.srcObject=q}catch(re){console.error("got interrupted by new loading request")}},me.mediaStreamSetTorch=function(te,q){return xe(this,void 0,void 0,function(){return Ne(this,function(re){switch(re.label){case 0:return[4,te.applyConstraints({advanced:[{fillLightMode:q?"flash":"off",torch:!!q}]})];case 1:return re.sent(),[2]}})})},me.mediaStreamIsTorchCompatible=function(te){var q,re,fe=te.getVideoTracks();try{for(var ke=Xe(fe),rt=ke.next();!rt.done;rt=ke.next())if(me.mediaStreamIsTorchCompatibleTrack(rt.value))return!0}catch(Dt){q={error:Dt}}finally{try{rt&&!rt.done&&(re=ke.return)&&re.call(ke)}finally{if(q)throw q.error}}return!1},me.mediaStreamIsTorchCompatibleTrack=function(te){try{return"torch"in te.getCapabilities()}catch(re){return console.error(re),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},me.isVideoPlaying=function(te){return te.currentTime>0&&!te.paused&&te.readyState>2},me.getMediaElement=function(te,q){var re=document.getElementById(te);if(!re)throw new le.ArgumentException("element with id '".concat(te,"' not found"));if(re.nodeName.toLowerCase()!==q.toLowerCase())throw new le.ArgumentException("element with id '".concat(te,"' must be an ").concat(q," element"));return re},me.createVideoElement=function(te){if(te instanceof HTMLVideoElement)return te;if("string"==typeof te)return me.getMediaElement(te,"video");if(!te&&typeof document<"u"){var q=document.createElement("video");return q.width=200,q.height=200,q}throw new Error("Couldn't get videoElement from videoSource!")},me.prepareImageElement=function(te){if(te instanceof HTMLImageElement)return te;if("string"==typeof te)return me.getMediaElement(te,"img");if(typeof te>"u"){var q=document.createElement("img");return q.width=200,q.height=200,q}throw new Error("Couldn't get imageElement from imageSource!")},me.prepareVideoElement=function(te){var q=me.createVideoElement(te);return q.setAttribute("autoplay","true"),q.setAttribute("muted","true"),q.setAttribute("playsinline","true"),q},me.isImageLoaded=function(te){return!(!te.complete||0===te.naturalWidth)},me.createBinaryBitmapFromCanvas=function(te){var q=new ye(te),re=new le.HybridBinarizer(q);return new le.BinaryBitmap(re)},me.drawImageOnCanvas=function(te,q){te.drawImage(q,0,0)},me.getMediaElementDimensions=function(te){if(te instanceof HTMLVideoElement)return{height:te.videoHeight,width:te.videoWidth};if(te instanceof HTMLImageElement)return{height:te.naturalHeight||te.height,width:te.naturalWidth||te.width};throw new Error("Couldn't find the Source's dimensions!")},me.createCaptureCanvas=function(te){if(!te)throw new le.ArgumentException("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error('The page "Document" is undefined, make sure you\'re running in a browser.');var q=document.createElement("canvas"),re=me.getMediaElementDimensions(te),fe=re.width,ke=re.height;return q.style.width=fe+"px",q.style.height=ke+"px",q.width=fe,q.height=ke,q},me.tryPlayVideo=function(te){return xe(this,void 0,void 0,function(){var q;return Ne(this,function(re){switch(re.label){case 0:if(null!=te&&te.ended)return console.error("Trying to play video that has ended."),[2,!1];if(me.isVideoPlaying(te))return console.warn("Trying to play video that is already playing."),[2,!0];re.label=1;case 1:return re.trys.push([1,3,,4]),[4,te.play()];case 2:return re.sent(),[2,!0];case 3:return q=re.sent(),console.warn("It was not possible to play the video.",q),[2,!1];case 4:return[2]}})})},me.createCanvasFromMediaElement=function(te){var q=me.createCaptureCanvas(te),re=q.getContext("2d");if(!re)throw new Error("Couldn't find Canvas 2D Context.");return me.drawImageOnCanvas(re,te),q},me.createBinaryBitmapFromMediaElem=function(te){var q=me.createCanvasFromMediaElement(te);return me.createBinaryBitmapFromCanvas(q)},me.destroyImageElement=function(te){te.src="",te.removeAttribute("src"),te=void 0},me.listVideoInputDevices=function(){return xe(this,void 0,void 0,function(){var te,q,re,fe,ke,rt,Qt,Dt,Mn,mn;return Ne(this,function(Gn){switch(Gn.label){case 0:if(!be())throw new Error("Can't enumerate devices, navigator is not present.");if(!function ge(){return!(!function $e(){return be()&&!!navigator.mediaDevices}()||!navigator.mediaDevices.enumerateDevices)}())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:te=Gn.sent(),q=[];try{for(re=Xe(te),fe=re.next();!fe.done;fe=re.next())"videoinput"===(rt="video"===(ke=fe.value).kind?"videoinput":ke.kind)&&(Qt=ke.deviceId||ke.id,Dt=ke.label||"Video device ".concat(q.length+1),q.push({deviceId:Qt,label:Dt,kind:rt,groupId:ke.groupId}))}catch(Ar){Mn={error:Ar}}finally{try{fe&&!fe.done&&(mn=re.return)&&mn.call(re)}finally{if(Mn)throw Mn.error}}return[2,q]}})})},me.findDeviceById=function(te){return xe(this,void 0,void 0,function(){var q;return Ne(this,function(re){switch(re.label){case 0:return[4,me.listVideoInputDevices()];case 1:return(q=re.sent())?[2,q.find(function(fe){return fe.deviceId===te})]:[2]}})})},me.cleanVideoSource=function(te){if(te){try{te.srcObject=null}catch(q){te.src=""}te&&te.removeAttribute("src")}},me.releaseAllStreams=function(){0!==me.streamTracker.length&&me.streamTracker.forEach(function(te){te.getTracks().forEach(function(q){return q.stop()})}),me.streamTracker=[]},me.playVideoOnLoadAsync=function(te,q){return xe(this,void 0,void 0,function(){return Ne(this,function(fe){switch(fe.label){case 0:return[4,me.tryPlayVideo(te)];case 1:return fe.sent()?[2,!0]:[2,new Promise(function(ke,rt){var Qt=setTimeout(function(){me.isVideoPlaying(te)||(rt(!1),te.removeEventListener("canplay",Dt))},q),Dt=function(){me.tryPlayVideo(te).then(function(Yt){clearTimeout(Qt),te.removeEventListener("canplay",Dt),ke(Yt)})};te.addEventListener("canplay",Dt)})]}})})},me.attachStreamToVideo=function(te,q,re){return void 0===re&&(re=5e3),xe(this,void 0,void 0,function(){var fe;return Ne(this,function(ke){switch(ke.label){case 0:return fe=me.prepareVideoElement(q),me.addVideoSource(fe,te),[4,me.playVideoOnLoadAsync(fe,re)];case 1:return ke.sent(),[2,fe]}})})},me._waitImageLoad=function(te){return new Promise(function(q,re){var ke=setTimeout(function(){me.isImageLoaded(te)||(te.removeEventListener("load",rt),re())},1e4),rt=function(){clearTimeout(ke),te.removeEventListener("load",rt),q()};te.addEventListener("load",rt)})},me.checkCallbackFnOrThrow=function(te){if(!te)throw new le.ArgumentException("`callbackFn` is a required parameter, you cannot capture results without it.")},me.disposeMediaStream=function(te){te.getVideoTracks().forEach(function(q){return q.stop()}),te=void 0},me.prototype.decode=function(te){var q=me.createCanvasFromMediaElement(te);return this.decodeFromCanvas(q)},me.prototype.decodeBitmap=function(te){return this.reader.decode(te,this.hints)},me.prototype.decodeFromCanvas=function(te){var q=me.createBinaryBitmapFromCanvas(te);return this.decodeBitmap(q)},me.prototype.decodeFromImageElement=function(te){return xe(this,void 0,void 0,function(){var q;return Ne(this,function(re){switch(re.label){case 0:if(!te)throw new le.ArgumentException("An image element must be provided.");return q=me.prepareImageElement(te),[4,this._decodeOnLoadImage(q)];case 1:return[2,re.sent()]}})})},me.prototype.decodeFromImageUrl=function(te){return xe(this,void 0,void 0,function(){var q;return Ne(this,function(re){switch(re.label){case 0:if(!te)throw new le.ArgumentException("An URL must be provided.");(q=me.prepareImageElement()).src=te,re.label=1;case 1:return re.trys.push([1,,3,4]),[4,this.decodeFromImageElement(q)];case 2:return[2,re.sent()];case 3:return me.destroyImageElement(q),[7];case 4:return[2]}})})},me.prototype.decodeFromConstraints=function(te,q,re){return xe(this,void 0,void 0,function(){var fe,ke;return Ne(this,function(rt){switch(rt.label){case 0:return me.checkCallbackFnOrThrow(re),[4,this.getUserMedia(te)];case 1:fe=rt.sent(),rt.label=2;case 2:return rt.trys.push([2,4,,5]),[4,this.decodeFromStream(fe,q,re)];case 3:return[2,rt.sent()];case 4:throw ke=rt.sent(),me.disposeMediaStream(fe),ke;case 5:return[2]}})})},me.prototype.decodeFromStream=function(te,q,re){return xe(this,void 0,void 0,function(){var ke,Qt,Dt,Yt,Mn,mn,Ar=this;return Ne(this,function(Nn){switch(Nn.label){case 0:return me.checkCallbackFnOrThrow(re),[4,me.attachStreamToVideo(te,q,this.options.tryPlayVideoTimeout)];case 1:return ke=Nn.sent(),Qt=this.scan(ke,re,function(){me.disposeMediaStream(te),me.cleanVideoSource(ke)}),Dt=te.getVideoTracks(),Yt=De(De({},Qt),{stop:function(){Qt.stop()},streamVideoConstraintsApply:function(Dn,En){return xe(this,void 0,void 0,function(){var sn,Ir,Vr,Kt,Jr,rr;return Ne(this,function(Bn){switch(Bn.label){case 0:sn=En?Dt.filter(En):Dt,Bn.label=1;case 1:Bn.trys.push([1,6,7,8]),Ir=Xe(sn),Vr=Ir.next(),Bn.label=2;case 2:return Vr.done?[3,5]:[4,Vr.value.applyConstraints(Dn)];case 3:Bn.sent(),Bn.label=4;case 4:return Vr=Ir.next(),[3,2];case 5:return[3,8];case 6:return Kt=Bn.sent(),Jr={error:Kt},[3,8];case 7:try{Vr&&!Vr.done&&(rr=Ir.return)&&rr.call(Ir)}finally{if(Jr)throw Jr.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(Dn){return Dt.find(Dn).getConstraints()},streamVideoSettingsGet:function(Dn){return Dt.find(Dn).getSettings()},streamVideoCapabilitiesGet:function(Dn){return Dt.find(Dn).getCapabilities()}}),me.mediaStreamIsTorchCompatible(te)&&(Mn=null==Dt?void 0:Dt.find(function(Dn){return me.mediaStreamIsTorchCompatibleTrack(Dn)}),Yt.switchTorch=mn=function(Dn){return xe(Ar,void 0,void 0,function(){return Ne(this,function(En){switch(En.label){case 0:return[4,me.mediaStreamSetTorch(Mn,Dn)];case 1:return En.sent(),[2]}})})},Yt.stop=function(){Qt.stop(),mn(!1)}),[2,Yt]}})})},me.prototype.decodeFromVideoDevice=function(te,q,re){return xe(this,void 0,void 0,function(){return Ne(this,function(rt){switch(rt.label){case 0:return me.checkCallbackFnOrThrow(re),[4,this.decodeFromConstraints({video:te?{deviceId:{exact:te}}:{facingMode:"environment"}},q,re)];case 1:return[2,rt.sent()]}})})},me.prototype.decodeFromVideoElement=function(te,q){return xe(this,void 0,void 0,function(){var re;return Ne(this,function(ke){switch(ke.label){case 0:if(me.checkCallbackFnOrThrow(q),!te)throw new le.ArgumentException("A video element must be provided.");return re=me.prepareVideoElement(te),[4,me.playVideoOnLoadAsync(re,this.options.tryPlayVideoTimeout)];case 1:return ke.sent(),[2,this.scan(re,q)]}})})},me.prototype.decodeFromVideoUrl=function(te,q){return xe(this,void 0,void 0,function(){var re,fe;return Ne(this,function(Qt){switch(Qt.label){case 0:if(me.checkCallbackFnOrThrow(q),!te)throw new le.ArgumentException("An URL must be provided.");return(re=me.prepareVideoElement()).src=te,fe=function(){me.cleanVideoSource(re)},[4,me.playVideoOnLoadAsync(re,this.options.tryPlayVideoTimeout)];case 1:return Qt.sent(),[2,this.scan(re,q,fe)]}})})},me.prototype.decodeOnceFromConstraints=function(te,q){return xe(this,void 0,void 0,function(){var re;return Ne(this,function(fe){switch(fe.label){case 0:return[4,this.getUserMedia(te)];case 1:return re=fe.sent(),[4,this.decodeOnceFromStream(re,q)];case 2:return[2,fe.sent()]}})})},me.prototype.decodeOnceFromStream=function(te,q){return xe(this,void 0,void 0,function(){var re,fe;return Ne(this,function(rt){switch(rt.label){case 0:return re=Boolean(q),[4,me.attachStreamToVideo(te,q)];case 1:fe=rt.sent(),rt.label=2;case 2:return rt.trys.push([2,,4,5]),[4,this.scanOneResult(fe)];case 3:return[2,rt.sent()];case 4:return re||me.cleanVideoSource(fe),[7];case 5:return[2]}})})},me.prototype.decodeOnceFromVideoDevice=function(te,q){return xe(this,void 0,void 0,function(){return Ne(this,function(ke){switch(ke.label){case 0:return[4,this.decodeOnceFromConstraints({video:te?{deviceId:{exact:te}}:{facingMode:"environment"}},q)];case 1:return[2,ke.sent()]}})})},me.prototype.decodeOnceFromVideoElement=function(te){return xe(this,void 0,void 0,function(){var q;return Ne(this,function(fe){switch(fe.label){case 0:if(!te)throw new le.ArgumentException("A video element must be provided.");return q=me.prepareVideoElement(te),[4,me.playVideoOnLoadAsync(q,this.options.tryPlayVideoTimeout)];case 1:return fe.sent(),[4,this.scanOneResult(q)];case 2:return[2,fe.sent()]}})})},me.prototype.decodeOnceFromVideoUrl=function(te){return xe(this,void 0,void 0,function(){var q,re;return Ne(this,function(fe){switch(fe.label){case 0:if(!te)throw new le.ArgumentException("An URL must be provided.");(q=me.prepareVideoElement()).src=te,re=this.decodeOnceFromVideoElement(q),fe.label=1;case 1:return fe.trys.push([1,,3,4]),[4,re];case 2:return[2,fe.sent()];case 3:return me.cleanVideoSource(q),[7];case 4:return[2]}})})},me.prototype.scanOneResult=function(te,q,re,fe){var ke=this;return void 0===q&&(q=!0),void 0===re&&(re=!0),void 0===fe&&(fe=!0),new Promise(function(rt,Qt){ke.scan(te,function(Dt,Yt,yn){if(Dt)return rt(Dt),void yn.stop();if(Yt){if(Yt instanceof le.NotFoundException&&q||Yt instanceof le.ChecksumException&&re||Yt instanceof le.FormatException&&fe)return;yn.stop(),Qt(Yt)}})})},me.prototype.scan=function(te,q,re){var fe=this;me.checkCallbackFnOrThrow(q);var ke=me.createCaptureCanvas(te),rt=ke.getContext("2d");if(!rt)throw new Error("Couldn't create canvas for visual element scan.");var Yt,Qt=function(){rt=void 0,ke=void 0},Dt=!1,Mn={stop:function(){Dt=!0,clearTimeout(Yt),Qt(),re&&re()}},mn=function(){if(!Dt)try{me.drawImageOnCanvas(rt,te);var Gn=fe.decodeFromCanvas(ke);q(Gn,void 0,Mn),Yt=setTimeout(mn,fe.options.delayBetweenScanSuccess)}catch(En){if(q(void 0,En,Mn),En instanceof le.ChecksumException||En instanceof le.FormatException||En instanceof le.NotFoundException)return void(Yt=setTimeout(mn,fe.options.delayBetweenScanAttempts));Qt(),re&&re(En)}};return mn(),Mn},me.prototype._decodeOnLoadImage=function(te){return xe(this,void 0,void 0,function(){return Ne(this,function(re){switch(re.label){case 0:return me.isImageLoaded(te)?[3,2]:[4,me._waitImageLoad(te)];case 1:re.sent(),re.label=2;case 2:return[2,this.decode(te)]}})})},me.prototype.getUserMedia=function(te){return xe(this,void 0,void 0,function(){var q;return Ne(this,function(re){switch(re.label){case 0:return[4,navigator.mediaDevices.getUserMedia(te)];case 1:return q=re.sent(),me.streamTracker.push(q),[2,q]}})})},me.streamTracker=[],me}(),We=function(){var me=function(te,q){return(me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(re,fe){re.__proto__=fe}||function(re,fe){for(var ke in fe)Object.prototype.hasOwnProperty.call(fe,ke)&&(re[ke]=fe[ke])})(te,q)};return function(te,q){if("function"!=typeof q&&null!==q)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");function re(){this.constructor=te}me(te,q),te.prototype=null===q?Object.create(q):(re.prototype=q.prototype,new re)}}(),Ce=(function(me){We(function te(q,re){return me.call(this,new le.AztecCodeReader,q,re)||this},me)}(Lt),function(){var me=function(te,q){return(me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(re,fe){re.__proto__=fe}||function(re,fe){for(var ke in fe)Object.prototype.hasOwnProperty.call(fe,ke)&&(re[ke]=fe[ke])})(te,q)};return function(te,q){if("function"!=typeof q&&null!==q)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");function re(){this.constructor=te}me(te,q),te.prototype=null===q?Object.create(q):(re.prototype=q.prototype,new re)}}()),At=(function(me){Ce(function te(q,re){return me.call(this,new le.MultiFormatOneDReader(q),q,re)||this},me)}(Lt),function(){var me=function(te,q){return(me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(re,fe){re.__proto__=fe}||function(re,fe){for(var ke in fe)Object.prototype.hasOwnProperty.call(fe,ke)&&(re[ke]=fe[ke])})(te,q)};return function(te,q){if("function"!=typeof q&&null!==q)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");function re(){this.constructor=te}me(te,q),te.prototype=null===q?Object.create(q):(re.prototype=q.prototype,new re)}}()),st=(function(me){At(function te(q,re){return me.call(this,new le.DataMatrixReader,q,re)||this},me)}(Lt),function(){var me=function(te,q){return(me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(re,fe){re.__proto__=fe}||function(re,fe){for(var ke in fe)Object.prototype.hasOwnProperty.call(fe,ke)&&(re[ke]=fe[ke])})(te,q)};return function(te,q){if("function"!=typeof q&&null!==q)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");function re(){this.constructor=te}me(te,q),te.prototype=null===q?Object.create(q):(re.prototype=q.prototype,new re)}}()),Be=function(me){function te(q,re){var fe=this,ke=new le.MultiFormatReader;return ke.setHints(q),(fe=me.call(this,ke,q,re)||this).reader=ke,fe}return st(te,me),Object.defineProperty(te.prototype,"possibleFormats",{set:function(q){this.hints.set(le.DecodeHintType.POSSIBLE_FORMATS,q),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),te.prototype.decodeBitmap=function(q){return this.reader.decodeWithState(q)},te.prototype.setHints=function(q){this.hints=q,this.reader.setHints(this.hints)},te}(Lt),Ye=function(){var me=function(te,q){return(me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(re,fe){re.__proto__=fe}||function(re,fe){for(var ke in fe)Object.prototype.hasOwnProperty.call(fe,ke)&&(re[ke]=fe[ke])})(te,q)};return function(te,q){if("function"!=typeof q&&null!==q)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");function re(){this.constructor=te}me(te,q),te.prototype=null===q?Object.create(q):(re.prototype=q.prototype,new re)}}(),lt=(function(me){Ye(function te(q,re){return me.call(this,new le.PDF417Reader,q,re)||this},me)}(Lt),function(){var me=function(te,q){return(me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(re,fe){re.__proto__=fe}||function(re,fe){for(var ke in fe)Object.prototype.hasOwnProperty.call(fe,ke)&&(re[ke]=fe[ke])})(te,q)};return function(te,q){if("function"!=typeof q&&null!==q)throw new TypeError("Class extends value "+String(q)+" is not a constructor or null");function re(){this.constructor=te}me(te,q),te.prototype=null===q?Object.create(q):(re.prototype=q.prototype,new re)}}()),qe=(function(me){lt(function te(q,re){return me.call(this,new le.QRCodeReader,q,re)||this},me)}(Lt),"http://www.w3.org/2000/svg"),ft=(function(){function me(te){if("string"==typeof te){var q=document.getElementById(te);if(!q)throw new Error("Could not find a Container element with '".concat(te,"'."));this.containerElement=q}else this.containerElement=te}me.prototype.write=function(te,q,re,fe){if(0===te.length)throw new le.IllegalArgumentException("Found empty contents");if(q<0||re<0)throw new le.IllegalArgumentException("Requested dimensions are too small: "+q+"x"+re);var ke=fe&&void 0!==fe.get(le.EncodeHintType.MARGIN)?Number.parseInt(fe.get(le.EncodeHintType.MARGIN).toString(),10):me.QUIET_ZONE_SIZE,rt=this.encode(fe,te);return this.renderResult(rt,q,re,ke)},me.prototype.createSVGElement=function(te,q){var re=document.createElementNS(me.SVG_NS,"svg");return re.setAttributeNS(qe,"width",q.toString()),re.setAttributeNS(qe,"height",te.toString()),re},me.prototype.createSvgPathPlaceholderElement=function(te,q){var re=document.createElementNS(me.SVG_NS,"path");return re.setAttributeNS(qe,"d","M0 0h".concat(te,"v").concat(q,"H0z")),re.setAttributeNS(qe,"fill","none"),re},me.prototype.createSvgRectElement=function(te,q,re,fe){var ke=document.createElementNS(me.SVG_NS,"rect");return ke.setAttributeNS(qe,"x",te.toString()),ke.setAttributeNS(qe,"y",q.toString()),ke.setAttributeNS(qe,"height",re.toString()),ke.setAttributeNS(qe,"width",fe.toString()),ke.setAttributeNS(qe,"fill","#000000"),ke},me.prototype.encode=function(te,q){var re=le.QRCodeDecoderErrorCorrectionLevel.L;if(te&&void 0!==te.get(le.EncodeHintType.ERROR_CORRECTION)){var fe=te.get(le.EncodeHintType.ERROR_CORRECTION).toString();re=le.QRCodeDecoderErrorCorrectionLevel.fromString(fe)}return le.QRCodeEncoder.encode(q,re,te)},me.prototype.renderResult=function(te,q,re,fe){var ke=te.getMatrix();if(null===ke)throw new le.IllegalStateException;var rt=ke.getWidth(),Qt=ke.getHeight(),Dt=rt+2*fe,Yt=Qt+2*fe,yn=Math.max(q,Dt),Mn=Math.max(re,Yt),mn=Math.min(Math.floor(yn/Dt),Math.floor(Mn/Yt)),Gn=Math.floor((yn-rt*mn)/2),Ar=Math.floor((Mn-Qt*mn)/2),Nn=this.createSVGElement(yn,Mn),Dn=this.createSvgPathPlaceholderElement(q,re);Nn.appendChild(Dn),this.containerElement.appendChild(Nn);for(var En=0,sn=Ar;En<Qt;En++,sn+=mn)for(var Ir=0,Vr=Gn;Ir<rt;Ir++,Vr+=mn)if(1===ke.get(Ir,En)){var br=this.createSvgRectElement(Vr,sn,mn,mn);Nn.appendChild(br)}return Nn},me.QUIET_ZONE_SIZE=4,me.SVG_NS="http://www.w3.org/2000/svg"}(),"http://www.w3.org/2000/svg"),mt=(function(){function me(){}me.prototype.write=function(te,q,re,fe){if(0===te.length)throw new le.IllegalArgumentException("Found empty contents");if(q<0||re<0)throw new le.IllegalArgumentException("Requested dimensions are too small: "+q+"x"+re);var ke=le.QRCodeDecoderErrorCorrectionLevel.L,rt=me.QUIET_ZONE_SIZE;if(fe){if(void 0!==fe.get(le.EncodeHintType.ERROR_CORRECTION)){var Qt=fe.get(le.EncodeHintType.ERROR_CORRECTION).toString();ke=le.QRCodeDecoderErrorCorrectionLevel.fromString(Qt)}void 0!==fe.get(le.EncodeHintType.MARGIN)&&(rt=Number.parseInt(fe.get(le.EncodeHintType.MARGIN).toString(),10))}var Dt=le.QRCodeEncoder.encode(te,ke,fe);return this.renderResult(Dt,q,re,rt)},me.prototype.writeToDom=function(te,q,re,fe,ke){if("string"==typeof te){var rt=document.querySelector(te);if(!rt)throw new Error("Could no find the target HTML element.");te=rt}var Qt=this.write(q,re,fe,ke);te instanceof HTMLElement&&te.appendChild(Qt)},me.prototype.renderResult=function(te,q,re,fe){var ke=te.getMatrix();if(null===ke)throw new le.IllegalStateException;for(var rt=ke.getWidth(),Qt=ke.getHeight(),Dt=rt+2*fe,Yt=Qt+2*fe,yn=Math.max(q,Dt),Mn=Math.max(re,Yt),mn=Math.min(Math.floor(yn/Dt),Math.floor(Mn/Yt)),Gn=Math.floor((yn-rt*mn)/2),Ar=Math.floor((Mn-Qt*mn)/2),Nn=this.createSVGElement(yn,Mn),Dn=0,En=Ar;Dn<Qt;Dn++,En+=mn)for(var sn=0,Ir=Gn;sn<rt;sn++,Ir+=mn)if(1===ke.get(sn,Dn)){var Vr=this.createSvgRectElement(Ir,En,mn,mn);Nn.appendChild(Vr)}return Nn},me.prototype.createSVGElement=function(te,q){var re=document.createElementNS(ft,"svg"),fe=te.toString(),ke=q.toString();return re.setAttribute("height",ke),re.setAttribute("width",fe),re.setAttribute("viewBox","0 0 "+fe+" "+ke),re},me.prototype.createSvgRectElement=function(te,q,re,fe){var ke=document.createElementNS(ft,"rect");return ke.setAttribute("x",te.toString()),ke.setAttribute("y",q.toString()),ke.setAttribute("height",re.toString()),ke.setAttribute("width",fe.toString()),ke.setAttribute("fill","#000000"),ke},me.QUIET_ZONE_SIZE=4}(),U(1135));const gt=["preview"];class Le extends Be{getScannerControls(){if(!this.scannerControls)throw new Error("No scanning is running at the time.");return this.scannerControls}scanFromDeviceObservable(te,q){var re=this;return(0,m.Z)(function*(){const fe=new mt.X({});let ke;try{ke=yield re.decodeFromVideoDevice(te,q,(Qt,Dt)=>{if(!Dt)return void fe.next({result:Qt});const Yt=Dt.name;Yt===le.NotFoundException.name||Yt===le.ChecksumException.name||Yt===le.FormatException.name||Dt.message.includes("No MultiFormat Readers were able to detect the code.")?fe.next({error:Dt}):(fe.error(Dt),re.scannerControls.stop(),re.scannerControls=void 0)}),re.scannerControls={...ke,stop(){ke.stop(),fe.complete()}}}catch(Qt){var rt;fe.error(Qt),null===(rt=re.scannerControls)||void 0===rt||rt.stop(),re.scannerControls=void 0}return fe.asObservable()})()}}let it=(()=>{class me{constructor(){this.timeBetweenScans=500,this.delayBetweenScanSuccess=500,this.previewFitMode="cover",this._ready=!1,this.autostarted=new H.vpe,this.autostarting=new H.vpe,this.torchCompatible=new H.vpe(!1),this.scanSuccess=new H.vpe,this.scanFailure=new H.vpe,this.scanError=new H.vpe,this.scanComplete=new H.vpe,this.camerasFound=new H.vpe,this.camerasNotFound=new H.vpe,this.permissionResponse=new H.vpe(!0),this.hasDevices=new H.vpe,this.deviceChange=new H.vpe,this._enabled=!0,this._hints=new Map,this.autofocusEnabled=!0,this.autostart=!0,this.formats=[le.BarcodeFormat.QR_CODE],this.hasNavigator=typeof navigator<"u",this.isMediaDevicesSupported=this.hasNavigator&&!!navigator.mediaDevices}get codeReader(){return this._codeReader}set device(q){this._ready?this.isAutostarting?console.warn("Avoid setting a device during auto-start."):this.isCurrentDevice(q)?console.warn("Setting the same device is not allowed."):this.hasPermission?this.setDevice(q):console.warn("Permissions not set yet, waiting for them to be set to apply device change."):this._devicePreStart=q}get device(){return this._device}get formats(){return this.hints.get(le.DecodeHintType.POSSIBLE_FORMATS)}set formats(q){if("string"==typeof q)throw new Error("Invalid formats, make sure the [formats] input is a binding.");const re=q.map(ke=>this.getBarcodeFormatOrFail(ke)),fe=this.hints;fe.set(le.DecodeHintType.POSSIBLE_FORMATS,re),this.hints=fe}get hints(){return this._hints}set hints(q){var re;this._hints=q,null===(re=this.codeReader)||void 0===re||re.setHints(this._hints)}set videoConstraints(q){var re;const fe=null===(re=this.codeReader)||void 0===re?void 0:re.getScannerControls();fe&&(null==fe||fe.streamVideoConstraintsApply(q))}set isAutostarting(q){this._isAutostarting=q,this.autostarting.next(q)}get isAutostarting(){return this._isAutostarting}set torch(q){try{this.getCodeReader().getScannerControls().switchTorch(q)}catch(re){}}set enable(q){this._enabled=Boolean(q),this._enabled?this.device?this.scanFromDevice(this.device.deviceId):this.init():(this.reset(),Le.releaseAllStreams())}get enabled(){return this._enabled}get tryHarder(){return this.hints.get(le.DecodeHintType.TRY_HARDER)}set tryHarder(q){const re=this.hints;q?re.set(le.DecodeHintType.TRY_HARDER,!0):re.delete(le.DecodeHintType.TRY_HARDER),this.hints=re}askForPermission(){var q=this;return(0,m.Z)(function*(){if(!q.hasNavigator)return console.error("@zxing/ngx-scanner","Can't ask permission, navigator is not present."),q.setPermission(null),q.hasPermission;if(!q.isMediaDevicesSupported)return console.error("@zxing/ngx-scanner","Can't get user media, this is not supported."),q.setPermission(null),q.hasPermission;let re,fe;try{re=yield q.getAnyVideoDevice(),fe=!!re}catch(ke){return q.handlePermissionException(ke)}finally{q.terminateStream(re)}return q.setPermission(fe),fe})()}getAnyVideoDevice(){return navigator.mediaDevices.getUserMedia({video:!0})}terminateStream(q){q&&q.getTracks().forEach(re=>re.stop()),q=void 0}init(){var q=this;return(0,m.Z)(function*(){if(!q.autostart)return console.warn("Feature 'autostart' disabled. Permissions and devices recovery has to be run manually."),q.initAutostartOff(),void(q._ready=!0);yield q.initAutostartOn(),q._ready=!0})()}initAutostartOff(){this.isAutostarting=!1,this.updateVideoInputDevices(),this._device&&this._devicePreStart&&this.setDevice(this._devicePreStart)}initAutostartOn(){var q=this;return(0,m.Z)(function*(){let re;q.isAutostarting=!0;try{re=yield q.askForPermission()}catch(fe){return void console.error("Exception occurred while asking for permission:",fe)}if(re){const fe=yield q.updateVideoInputDevices();yield q.autostartScanner([...fe])}q.isAutostarting=!1,q.autostarted.next()})()}isCurrentDevice(q){var re;return(null==q?void 0:q.deviceId)===(null===(re=this._device)||void 0===re?void 0:re.deviceId)}ngOnDestroy(){this.reset(),Le.releaseAllStreams()}ngOnInit(){this.init()}scanStop(){var q,re;this._scanSubscription&&(null===(q=this.codeReader)||void 0===q||q.getScannerControls().stop(),null===(re=this._scanSubscription)||void 0===re||re.unsubscribe(),this._scanSubscription=void 0),this.torchCompatible.next(!1)}scanStart(){if(this._scanSubscription)throw new Error("There is already a scan process running.");if(!this._device)throw new Error("No device defined, cannot start scan, please define a device.");this.scanFromDevice(this._device.deviceId)}restart(){this._codeReader=void 0;const q=this._reset();q&&(this.device=q)}updateVideoInputDevices(){var q=this;return(0,m.Z)(function*(){const re=(yield Lt.listVideoInputDevices())||[],fe=re&&re.length>0;return q.hasDevices.next(fe),q.camerasFound.next([...re]),fe||q.camerasNotFound.next(null),re})()}autostartScanner(q){var re=this;return(0,m.Z)(function*(){const ke=q.find(({label:rt})=>/back|tr\xe1s|rear|traseira|environment|ambiente/gi.test(rt))||q.pop();if(!ke)throw new Error("Impossible to autostart, no input devices available.");yield re.setDevice(ke),re.deviceChange.next(ke)})()}dispatchScanSuccess(q){this.scanSuccess.next(q.getText())}dispatchScanFailure(q){this.scanFailure.next(q)}dispatchScanError(q){this.scanError.observed||(console.error(`zxing scanner component: ${q.name}`,q),console.warn("Use the `(scanError)` property to handle errors like this!")),this.scanError.next(q)}dispatchScanComplete(q){this.scanComplete.next(q)}handlePermissionException(q){let re;switch(console.error("@zxing/ngx-scanner","Error when asking for permission.",q),q.name){case"NotSupportedError":console.warn("@zxing/ngx-scanner",q.message),re=null,this.hasDevices.next(null);break;case"NotAllowedError":console.warn("@zxing/ngx-scanner",q.message),re=!1,this.hasDevices.next(!0);break;case"NotFoundError":console.warn("@zxing/ngx-scanner",q.message),re=null,this.hasDevices.next(!1),this.camerasNotFound.next(q);break;case"NotReadableError":console.warn("@zxing/ngx-scanner","Couldn't read the device(s)'s stream, it's probably in use by another app."),re=null,this.hasDevices.next(!1),this.camerasNotFound.next(q);break;default:console.warn("@zxing/ngx-scanner","I was not able to define if I have permissions for camera or not.",q),re=null}return this.setPermission(re),this.permissionResponse.error(q),re}getBarcodeFormatOrFail(q){return"string"==typeof q?le.BarcodeFormat[q.trim().toUpperCase()]:q}getCodeReader(){return this._codeReader||(this._codeReader=new Le(this.hints,{delayBetweenScanAttempts:this.timeBetweenScans,delayBetweenScanSuccess:this.delayBetweenScanSuccess})),this._codeReader}scanFromDevice(q){var re=this;return(0,m.Z)(function*(){const fe=re.previewElemRef.nativeElement,ke=re.getCodeReader(),rt=yield ke.scanFromDeviceObservable(q,fe);if(!rt)throw new Error("Undefined decoding stream, aborting.");if(re._scanSubscription=rt.subscribe(mn=>re._onDecodeResult(mn.result,mn.error),mn=>re._onDecodeError(mn),()=>{}),re._scanSubscription.closed)return;const Mn=typeof ke.getScannerControls().switchTorch<"u";re.torchCompatible.next(Mn)})()}_onDecodeError(q){this.dispatchScanError(q)}_onDecodeResult(q,re){q?this.dispatchScanSuccess(q):this.dispatchScanFailure(re),this.dispatchScanComplete(q)}_reset(){if(!this._codeReader)return;this._codeReader=void 0;const q=this._device;return this.device=void 0,q}reset(){this._reset(),this.deviceChange.emit(null)}setDevice(q){var re=this;return(0,m.Z)(function*(){re.scanStop(),re._device=q||void 0,re._device||Lt.cleanVideoSource(re.previewElemRef.nativeElement),re._enabled&&q&&(yield re.scanFromDevice(q.deviceId))})()}setPermission(q){this.hasPermission=q,this.permissionResponse.next(q)}}return me.\u0275fac=function(q){return new(q||me)},me.\u0275cmp=H.Xpm({type:me,selectors:[["zxing-scanner"]],viewQuery:function(q,re){if(1&q&&H.Gf(gt,7),2&q){let fe;H.iGM(fe=H.CRH())&&(re.previewElemRef=fe.first)}},inputs:{autofocusEnabled:"autofocusEnabled",timeBetweenScans:"timeBetweenScans",delayBetweenScanSuccess:"delayBetweenScanSuccess",autostart:"autostart",previewFitMode:"previewFitMode",device:"device",formats:"formats",videoConstraints:"videoConstraints",torch:"torch",enable:"enable",tryHarder:"tryHarder"},outputs:{autostarted:"autostarted",autostarting:"autostarting",torchCompatible:"torchCompatible",scanSuccess:"scanSuccess",scanFailure:"scanFailure",scanError:"scanError",scanComplete:"scanComplete",camerasFound:"camerasFound",camerasNotFound:"camerasNotFound",permissionResponse:"permissionResponse",hasDevices:"hasDevices",deviceChange:"deviceChange"},decls:6,vars:2,consts:[["preview",""]],template:function(q,re){1&q&&(H.TgZ(0,"video",null,0)(2,"p"),H._uU(3," Your browser does not support this feature, please try to upgrade it. "),H.qZA(),H.TgZ(4,"p"),H._uU(5," Seu navegador n\xe3o suporta este recurso, por favor tente atualiz\xe1-lo. "),H.qZA()()),2&q&&H.Udp("object-fit",re.previewFitMode)},styles:["[_nghost-%COMP%]{display:block}video[_ngcontent-%COMP%]{width:100%;height:auto;object-fit:contain}"],changeDetection:0}),me})(),Ze=(()=>{class me{}return me.\u0275fac=function(q){return new(q||me)},me.\u0275mod=H.oAB({type:me}),me.\u0275inj=H.cJS({imports:[J.ez,he.u5]}),me})()},100:(pn,Pe,U)=>{"use strict";U.d(Pe,{N:()=>ye,V:()=>we});var m=U(5861),J=U(4650),H=U(3259),he=U(1481);const le=["qrcElement"];let we=(()=>{class be{constructor(ge,De){this.renderer=ge,this.sanitizer=De,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new J.vpe,this.context=null}ngOnChanges(){var ge=this;return(0,m.Z)(function*(){yield ge.createQRCode()})()}isValidQrCodeText(ge){return!1===this.allowEmptyString?!(typeof ge>"u"||""===ge||"null"===ge||null===ge):!(typeof ge>"u")}toDataURL(ge){return new Promise((De,xe)=>{(0,H.hz)(this.qrdata,ge,(Ne,Xe)=>{Ne?xe(Ne):De(Xe)})})}toCanvas(ge,De){return new Promise((xe,Ne)=>{(0,H.rT)(ge,this.qrdata,De,Xe=>{Xe?Ne(Xe):xe("success")})})}toSVG(ge){return new Promise((De,xe)=>{(0,H.toString)(this.qrdata,ge,(Ne,Xe)=>{Ne?xe(Ne):De(Xe)})})}renderElement(ge){for(const De of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,De);this.renderer.appendChild(this.qrcElement.nativeElement,ge)}createQRCode(){var ge=this;return(0,m.Z)(function*(){ge.version&&ge.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),ge.version=40):ge.version&&ge.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),ge.version=1):void 0!==ge.version&&isNaN(ge.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),ge.version=void 0);try{if(!ge.isValidQrCodeText(ge.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");ge.isValidQrCodeText(ge.qrdata)&&""===ge.qrdata&&(ge.qrdata=" ");const De={color:{dark:ge.colorDark,light:ge.colorLight},errorCorrectionLevel:ge.errorCorrectionLevel,margin:ge.margin,scale:ge.scale,version:ge.version,width:ge.width},xe=ge.imageSrc,Ne=ge.imageHeight||40,Xe=ge.imageWidth||40;switch(ge.elementType){case"canvas":const Ke=ge.renderer.createElement("canvas");ge.context=Ke.getContext("2d"),ge.toCanvas(Ke,De).then(()=>{if(ge.ariaLabel&&ge.renderer.setAttribute(Ke,"aria-label",`${ge.ariaLabel}`),ge.title&&ge.renderer.setAttribute(Ke,"title",`${ge.title}`),xe&&ge.context){ge.centerImage=new Image(Xe,Ne),xe!==ge.centerImage.src&&(ge.centerImage.src=xe),Ne!==ge.centerImage.height&&(ge.centerImage.height=Ne),Xe!==ge.centerImage.width&&(ge.centerImage.width=Xe);const Fe=ge.centerImage;Fe&&(Fe.onload=()=>{var Ce;null===(Ce=ge.context)||void 0===Ce||Ce.drawImage(Fe,Ke.width/2-Xe/2,Ke.height/2-Ne/2,Xe,Ne)})}ge.renderElement(Ke),ge.emitQRCodeURL(Ke)}).catch(Fe=>{console.error("[angularx-qrcode] canvas error:",Fe)});break;case"svg":const Lt=ge.renderer.createElement("div");ge.toSVG(De).then(Fe=>{ge.renderer.setProperty(Lt,"innerHTML",Fe);const Ce=Lt.firstChild;ge.renderer.setAttribute(Ce,"height",`${ge.width}`),ge.renderer.setAttribute(Ce,"width",`${ge.width}`),ge.renderElement(Ce),ge.emitQRCodeURL(Ce)}).catch(Fe=>{console.error("[angularx-qrcode] svg error:",Fe)});break;default:const We=ge.renderer.createElement("img");ge.toDataURL(De).then(Fe=>{ge.alt&&We.setAttribute("alt",ge.alt),ge.ariaLabel&&We.setAttribute("aria-label",ge.ariaLabel),We.setAttribute("src",Fe),ge.title&&We.setAttribute("title",ge.title),ge.renderElement(We),ge.emitQRCodeURL(We)}).catch(Fe=>{console.error("[angularx-qrcode] img/url error:",Fe)})}}catch(De){console.error("[angularx-qrcode] Error generating QR Code:",De.message)}})()}emitQRCodeURL(ge){const De=ge.constructor.name;if(De===SVGSVGElement.name){const Xe=new Blob([ge.outerHTML],{type:"image/svg+xml"}),Ke=URL.createObjectURL(Xe),Lt=this.sanitizer.bypassSecurityTrustUrl(Ke);return void this.qrCodeURL.emit(Lt)}let xe="";De===HTMLCanvasElement.name&&(xe=ge.toDataURL("image/png")),De===HTMLImageElement.name&&(xe=ge.src),fetch(xe).then(Ne=>Ne.blob()).then(Ne=>URL.createObjectURL(Ne)).then(Ne=>this.sanitizer.bypassSecurityTrustUrl(Ne)).then(Ne=>{this.qrCodeURL.emit(Ne)}).catch(Ne=>{console.error("[angularx-qrcode] Error when fetching image/png URL: "+Ne)})}}return be.\u0275fac=function(ge){return new(ge||be)(J.Y36(J.Qsj),J.Y36(he.H7))},be.\u0275cmp=J.Xpm({type:be,selectors:[["qrcode"]],viewQuery:function(ge,De){if(1&ge&&J.Gf(le,7),2&ge){let xe;J.iGM(xe=J.CRH())&&(De.qrcElement=xe.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[J.TTD],decls:2,vars:2,consts:[["qrcElement",""]],template:function(ge,De){1&ge&&J._UZ(0,"div",null,0),2&ge&&J.Tol(De.cssClass)},encapsulation:2,changeDetection:0}),be})(),ye=(()=>{class be{}return be.\u0275fac=function(ge){return new(ge||be)},be.\u0275mod=J.oAB({type:be}),be.\u0275inj=J.cJS({}),be})()},259:(pn,Pe,U)=>{"use strict";U.d(Pe,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=U(9681);(0,m.registerVersion)("firebase","9.17.1","app")},9260:(pn,Pe,U)=>{"use strict";U.d(Pe,{Z:()=>m.Z});var m=U(3942);m.Z.registerVersion("firebase","9.17.1","app-compat")},407:(pn,Pe,U)=>{"use strict";U.r(Pe);var m=U(5861),J=U(3942),H=U(2090),he=U(9681),le=U(1877),we=U(655),ye=U(4859);const $e={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},xe_EMAIL_SIGNIN="EMAIL_SIGNIN",xe_PASSWORD_RESET="PASSWORD_RESET",xe_RECOVER_EMAIL="RECOVER_EMAIL",xe_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",xe_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",xe_VERIFY_EMAIL="VERIFY_EMAIL";const Ke=function Ne(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Lt=function Xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},We=new H.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ce=new le.Yd("@firebase/auth");function ct(N,...I){Ce.logLevel<=le.in.ERROR&&Ce.error(`Auth (${he.SDK_VERSION}): ${N}`,...I)}function At(N,...I){throw Ye(N,...I)}function yt(N,...I){return Ye(N,...I)}function st(N,I,D){const L=Object.assign(Object.assign({},Lt()),{[I]:D});return new H.LL("auth","Firebase",L).create(I,{appName:N.name})}function Be(N,I,D){if(!(I instanceof D))throw D.name!==I.constructor.name&&At(N,"argument-error"),st(N,"argument-error",`Type of ${I.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ye(N,...I){if("string"!=typeof N){const D=I[0],L=[...I.slice(1)];return L[0]&&(L[0].appName=N.name),N._errorFactory.create(D,...L)}return We.create(N,...I)}function $(N,I,...D){if(!N)throw Ye(I,...D)}function lt(N){const I="INTERNAL ASSERTION FAILED: "+N;throw ct(I),new Error(I)}function Qe(N,I){N||lt(I)}const qe=new Map;function ut(N){Qe(N instanceof Function,"Expected a class definition");let I=qe.get(N);return I?(Qe(I instanceof N,"Instance stored in cache mismatched with class"),I):(I=new N,qe.set(N,I),I)}function mt(){var N;return typeof self<"u"&&(null===(N=self.location)||void 0===N?void 0:N.href)||""}function gt(){return"http:"===Le()||"https:"===Le()}function Le(){var N;return typeof self<"u"&&(null===(N=self.location)||void 0===N?void 0:N.protocol)||null}class me{constructor(I,D){this.shortDelay=I,this.longDelay=D,Qe(D>I,"Short delay should be less than long delay!"),this.isMobile=(0,H.uI)()||(0,H.b$)()}get(){return function it(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(gt()||(0,H.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function te(N,I){Qe(N.emulator,"Emulator should always be set here");const{url:D}=N.emulator;return I?`${D}${I.startsWith("/")?I.slice(1):I}`:D}class q{static initialize(I,D,L){this.fetchImpl=I,D&&(this.headersImpl=D),L&&(this.responseImpl=L)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void lt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void lt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void lt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const re={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},fe=new me(3e4,6e4);function ke(N,I){return N.tenantId&&!I.tenantId?Object.assign(Object.assign({},I),{tenantId:N.tenantId}):I}function rt(N,I,D,L){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,m.Z)(function*(N,I,D,L,de={}){return Dt(N,de,(0,m.Z)(function*(){let Oe={},kt={};L&&("GET"===I?kt=L:Oe={body:JSON.stringify(L)});const Jt=(0,H.xO)(Object.assign({key:N.config.apiKey},kt)).slice(1),Kn=yield N._getAdditionalHeaders();return Kn["Content-Type"]="application/json",N.languageCode&&(Kn["X-Firebase-Locale"]=N.languageCode),q.fetch()(mn(N,N.config.apiHost,D,Jt),Object.assign({method:I,headers:Kn,referrerPolicy:"no-referrer"},Oe))}))})).apply(this,arguments)}function Dt(N,I,D){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,m.Z)(function*(N,I,D){N._canInitEmulator=!1;const L=Object.assign(Object.assign({},re),I);try{const de=new Gn(N),Oe=yield Promise.race([D(),de.promise]);de.clearNetworkTimeout();const kt=yield Oe.json();if("needConfirmation"in kt)throw Ar(N,"account-exists-with-different-credential",kt);if(Oe.ok&&!("errorMessage"in kt))return kt;{const Jt=Oe.ok?kt.errorMessage:kt.error.message,[Kn,ur]=Jt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Kn)throw Ar(N,"credential-already-in-use",kt);if("EMAIL_EXISTS"===Kn)throw Ar(N,"email-already-in-use",kt);if("USER_DISABLED"===Kn)throw Ar(N,"user-disabled",kt);const si=L[Kn]||Kn.toLowerCase().replace(/[_\s]+/g,"-");if(ur)throw st(N,si,ur);At(N,si)}}catch(de){if(de instanceof H.ZR)throw de;At(N,"network-request-failed")}})).apply(this,arguments)}function yn(N,I,D,L){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,m.Z)(function*(N,I,D,L,de={}){const Oe=yield rt(N,I,D,L,de);return"mfaPendingCredential"in Oe&&At(N,"multi-factor-auth-required",{_serverResponse:Oe}),Oe})).apply(this,arguments)}function mn(N,I,D,L){const de=`${I}${D}?${L}`;return N.config.emulator?te(N.config,de):`${N.config.apiScheme}://${de}`}class Gn{constructor(I){this.auth=I,this.timer=null,this.promise=new Promise((D,L)=>{this.timer=setTimeout(()=>L(yt(this.auth,"network-request-failed")),fe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ar(N,I,D){const L={appName:N.name};D.email&&(L.email=D.email),D.phoneNumber&&(L.phoneNumber=D.phoneNumber);const de=yt(N,I,L);return de.customData._tokenResponse=D,de}function Dn(){return(Dn=(0,m.Z)(function*(N,I){return rt(N,"POST","/v1/accounts:delete",I)})).apply(this,arguments)}function sn(){return(sn=(0,m.Z)(function*(N,I){return rt(N,"POST","/v1/accounts:update",I)})).apply(this,arguments)}function Vr(){return(Vr=(0,m.Z)(function*(N,I){return rt(N,"POST","/v1/accounts:lookup",I)})).apply(this,arguments)}function br(N){if(N)try{const I=new Date(Number(N));if(!isNaN(I.getTime()))return I.toUTCString()}catch(I){}}function rr(){return(rr=(0,m.Z)(function*(N,I=!1){const D=(0,H.m9)(N),L=yield D.getIdToken(I),de=cr(L);$(de&&de.exp&&de.auth_time&&de.iat,D.auth,"internal-error");const Oe="object"==typeof de.firebase?de.firebase:void 0,kt=null==Oe?void 0:Oe.sign_in_provider;return{claims:de,token:L,authTime:br(Bn(de.auth_time)),issuedAtTime:br(Bn(de.iat)),expirationTime:br(Bn(de.exp)),signInProvider:kt||null,signInSecondFactor:(null==Oe?void 0:Oe.sign_in_second_factor)||null}})).apply(this,arguments)}function Bn(N){return 1e3*Number(N)}function cr(N){const[I,D,L]=N.split(".");if(void 0===I||void 0===D||void 0===L)return ct("JWT malformed, contained fewer than 3 sections"),null;try{const de=(0,H.tV)(D);return de?JSON.parse(de):(ct("Failed to decode base64 JWT payload"),null)}catch(de){return ct("Caught error parsing JWT payload as JSON",null==de?void 0:de.toString()),null}}function qn(N,I){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,m.Z)(function*(N,I,D=!1){if(D)return I;try{return yield I}catch(L){throw L instanceof H.ZR&&function cn({code:N}){return"auth/user-disabled"===N||"auth/user-token-expired"===N}(L)&&N.auth.currentUser===N&&(yield N.auth.signOut()),L}})).apply(this,arguments)}class _i{constructor(I){this.user=I,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(I){var D;if(I){const L=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),L}{this.errorBackoff=3e4;const de=(null!==(D=this.user.stsTokenManager.expirationTime)&&void 0!==D?D:0)-Date.now()-3e5;return Math.max(0,de)}}schedule(I=!1){var D=this;if(!this.isRunning)return;const L=this.getInterval(I);this.timerId=setTimeout((0,m.Z)(function*(){yield D.iteration()}),L)}iteration(){var I=this;return(0,m.Z)(function*(){try{yield I.user.getIdToken(!0)}catch(D){return void("auth/network-request-failed"===(null==D?void 0:D.code)&&I.schedule(!0))}I.schedule()})()}}class Wi{constructor(I,D){this.createdAt=I,this.lastLoginAt=D,this._initializeTime()}_initializeTime(){this.lastSignInTime=br(this.lastLoginAt),this.creationTime=br(this.createdAt)}_copy(I){this.createdAt=I.createdAt,this.lastLoginAt=I.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function jr(N){return Pi.apply(this,arguments)}function Pi(){return Pi=(0,m.Z)(function*(N){var I;const D=N.auth,L=yield N.getIdToken(),de=yield qn(N,function Ir(N,I){return Vr.apply(this,arguments)}(D,{idToken:L}));$(null==de?void 0:de.users.length,D,"internal-error");const Oe=de.users[0];N._notifyReloadListener(Oe);const kt=null!==(I=Oe.providerUserInfo)&&void 0!==I&&I.length?function wn(N){return N.map(I=>{var{providerId:D}=I,L=(0,we._T)(I,["providerId"]);return{providerId:D,uid:L.rawId||"",displayName:L.displayName||null,email:L.email||null,phoneNumber:L.phoneNumber||null,photoURL:L.photoUrl||null}})}(Oe.providerUserInfo):[],Jt=function ii(N,I){return[...N.filter(L=>!I.some(de=>de.providerId===L.providerId)),...I]}(N.providerData,kt),si=!!N.isAnonymous&&!(N.email&&Oe.passwordHash||null!=Jt&&Jt.length),zr={uid:Oe.localId,displayName:Oe.displayName||null,photoURL:Oe.photoUrl||null,email:Oe.email||null,emailVerified:Oe.emailVerified||!1,phoneNumber:Oe.phoneNumber||null,tenantId:Oe.tenantId||null,providerData:Jt,metadata:new Wi(Oe.createdAt,Oe.lastLoginAt),isAnonymous:si};Object.assign(N,zr)}),Pi.apply(this,arguments)}function Er(){return(Er=(0,m.Z)(function*(N){const I=(0,H.m9)(N);yield jr(I),yield I.auth._persistUserIfCurrent(I),I.auth._notifyListenersIfCurrent(I)})).apply(this,arguments)}function Un(){return(Un=(0,m.Z)(function*(N,I){const D=yield Dt(N,{},(0,m.Z)(function*(){const L=(0,H.xO)({grant_type:"refresh_token",refresh_token:I}).slice(1),{tokenApiHost:de,apiKey:Oe}=N.config,kt=mn(N,de,"/v1/token",`key=${Oe}`),Jt=yield N._getAdditionalHeaders();return Jt["Content-Type"]="application/x-www-form-urlencoded",q.fetch()(kt,{method:"POST",headers:Jt,body:L})}));return{accessToken:D.access_token,expiresIn:D.expires_in,refreshToken:D.refresh_token}})).apply(this,arguments)}class dr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(I){$(I.idToken,"internal-error"),$(typeof I.idToken<"u","internal-error"),$(typeof I.refreshToken<"u","internal-error");const D="expiresIn"in I&&typeof I.expiresIn<"u"?Number(I.expiresIn):function zi(N){const I=cr(N);return $(I,"internal-error"),$(typeof I.exp<"u","internal-error"),$(typeof I.iat<"u","internal-error"),Number(I.exp)-Number(I.iat)}(I.idToken);this.updateTokensAndExpiration(I.idToken,I.refreshToken,D)}getToken(I,D=!1){var L=this;return(0,m.Z)(function*(){return $(!L.accessToken||L.refreshToken,I,"user-token-expired"),D||!L.accessToken||L.isExpired?L.refreshToken?(yield L.refresh(I,L.refreshToken),L.accessToken):null:L.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(I,D){var L=this;return(0,m.Z)(function*(){const{accessToken:de,refreshToken:Oe,expiresIn:kt}=yield function ln(N,I){return Un.apply(this,arguments)}(I,D);L.updateTokensAndExpiration(de,Oe,Number(kt))})()}updateTokensAndExpiration(I,D,L){this.refreshToken=D||null,this.accessToken=I||null,this.expirationTime=Date.now()+1e3*L}static fromJSON(I,D){const{refreshToken:L,accessToken:de,expirationTime:Oe}=D,kt=new dr;return L&&($("string"==typeof L,"internal-error",{appName:I}),kt.refreshToken=L),de&&($("string"==typeof de,"internal-error",{appName:I}),kt.accessToken=de),Oe&&($("number"==typeof Oe,"internal-error",{appName:I}),kt.expirationTime=Oe),kt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(I){this.accessToken=I.accessToken,this.refreshToken=I.refreshToken,this.expirationTime=I.expirationTime}_clone(){return Object.assign(new dr,this.toJSON())}_performRefresh(){return lt("not implemented")}}function jn(N,I){$("string"==typeof N||typeof N>"u","internal-error",{appName:I})}class hr{constructor(I){var{uid:D,auth:L,stsTokenManager:de}=I,Oe=(0,we._T)(I,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _i(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=D,this.auth=L,this.stsTokenManager=de,this.accessToken=de.accessToken,this.displayName=Oe.displayName||null,this.email=Oe.email||null,this.emailVerified=Oe.emailVerified||!1,this.phoneNumber=Oe.phoneNumber||null,this.photoURL=Oe.photoURL||null,this.isAnonymous=Oe.isAnonymous||!1,this.tenantId=Oe.tenantId||null,this.providerData=Oe.providerData?[...Oe.providerData]:[],this.metadata=new Wi(Oe.createdAt||void 0,Oe.lastLoginAt||void 0)}getIdToken(I){var D=this;return(0,m.Z)(function*(){const L=yield qn(D,D.stsTokenManager.getToken(D.auth,I));return $(L,D.auth,"internal-error"),D.accessToken!==L&&(D.accessToken=L,yield D.auth._persistUserIfCurrent(D),D.auth._notifyListenersIfCurrent(D)),L})()}getIdTokenResult(I){return function Jr(N){return rr.apply(this,arguments)}(this,I)}reload(){return function Rr(N){return Er.apply(this,arguments)}(this)}_assign(I){this!==I&&($(this.uid===I.uid,this.auth,"internal-error"),this.displayName=I.displayName,this.photoURL=I.photoURL,this.email=I.email,this.emailVerified=I.emailVerified,this.phoneNumber=I.phoneNumber,this.isAnonymous=I.isAnonymous,this.tenantId=I.tenantId,this.providerData=I.providerData.map(D=>Object.assign({},D)),this.metadata._copy(I.metadata),this.stsTokenManager._assign(I.stsTokenManager))}_clone(I){return new hr(Object.assign(Object.assign({},this),{auth:I,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(I){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=I,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(I){this.reloadListener?this.reloadListener(I):this.reloadUserInfo=I}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(I,D=!1){var L=this;return(0,m.Z)(function*(){let de=!1;I.idToken&&I.idToken!==L.stsTokenManager.accessToken&&(L.stsTokenManager.updateFromServerResponse(I),de=!0),D&&(yield jr(L)),yield L.auth._persistUserIfCurrent(L),de&&L.auth._notifyListenersIfCurrent(L)})()}delete(){var I=this;return(0,m.Z)(function*(){const D=yield I.getIdToken();return yield qn(I,function Nn(N,I){return Dn.apply(this,arguments)}(I.auth,{idToken:D})),I.stsTokenManager.clearRefreshToken(),I.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(I=>Object.assign({},I)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(I,D){var L,de,Oe,kt,Jt,Kn,ur,si;const zr=null!==(L=D.displayName)&&void 0!==L?L:void 0,Bs=null!==(de=D.email)&&void 0!==de?de:void 0,Du=null!==(Oe=D.phoneNumber)&&void 0!==Oe?Oe:void 0,Rl=null!==(kt=D.photoURL)&&void 0!==kt?kt:void 0,Td=null!==(Jt=D.tenantId)&&void 0!==Jt?Jt:void 0,Tu=null!==(Kn=D._redirectEventId)&&void 0!==Kn?Kn:void 0,ai=null!==(ur=D.createdAt)&&void 0!==ur?ur:void 0,rc=null!==(si=D.lastLoginAt)&&void 0!==si?si:void 0,{uid:nl,emailVerified:Gl,isAnonymous:ba,providerData:Zd,stsTokenManager:zl}=D;$(nl&&zl,I,"internal-error");const ic=dr.fromJSON(this.name,zl);$("string"==typeof nl,I,"internal-error"),jn(zr,I.name),jn(Bs,I.name),$("boolean"==typeof Gl,I,"internal-error"),$("boolean"==typeof ba,I,"internal-error"),jn(Du,I.name),jn(Rl,I.name),jn(Td,I.name),jn(Tu,I.name),jn(ai,I.name),jn(rc,I.name);const zu=new hr({uid:nl,auth:I,email:Bs,emailVerified:Gl,displayName:zr,isAnonymous:ba,photoURL:Rl,phoneNumber:Du,tenantId:Td,stsTokenManager:ic,createdAt:ai,lastLoginAt:rc});return Zd&&Array.isArray(Zd)&&(zu.providerData=Zd.map(rl=>Object.assign({},rl))),Tu&&(zu._redirectEventId=Tu),zu}static _fromIdTokenResponse(I,D,L=!1){return(0,m.Z)(function*(){const de=new dr;de.updateFromServerResponse(D);const Oe=new hr({uid:D.localId,auth:I,stsTokenManager:de,isAnonymous:L});return yield jr(Oe),Oe})()}}const ot=(()=>{class N{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(D,L){var de=this;return(0,m.Z)(function*(){de.storage[D]=L})()}_get(D){var L=this;return(0,m.Z)(function*(){const de=L.storage[D];return void 0===de?null:de})()}_remove(D){var L=this;return(0,m.Z)(function*(){delete L.storage[D]})()}_addListener(D,L){}_removeListener(D,L){}}return N.type="NONE",N})();function ht(N,I,D){return`firebase:${N}:${I}:${D}`}class qt{constructor(I,D,L){this.persistence=I,this.auth=D,this.userKey=L;const{config:de,name:Oe}=this.auth;this.fullUserKey=ht(this.userKey,de.apiKey,Oe),this.fullPersistenceKey=ht("persistence",de.apiKey,Oe),this.boundEventHandler=D._onStorageEvent.bind(D),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(I){return this.persistence._set(this.fullUserKey,I.toJSON())}getCurrentUser(){var I=this;return(0,m.Z)(function*(){const D=yield I.persistence._get(I.fullUserKey);return D?hr._fromJSON(I.auth,D):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(I){var D=this;return(0,m.Z)(function*(){if(D.persistence===I)return;const L=yield D.getCurrentUser();return yield D.removeCurrentUser(),D.persistence=I,L?D.setCurrentUser(L):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(I,D,L="authUser"){return(0,m.Z)(function*(){if(!D.length)return new qt(ut(ot),I,L);const de=(yield Promise.all(D.map(function(){var ur=(0,m.Z)(function*(si){if(yield si._isAvailable())return si});return function(si){return ur.apply(this,arguments)}}()))).filter(ur=>ur);let Oe=de[0]||ut(ot);const kt=ht(L,I.config.apiKey,I.name);let Jt=null;for(const ur of D)try{const si=yield ur._get(kt);if(si){const zr=hr._fromJSON(I,si);ur!==Oe&&(Jt=zr),Oe=ur;break}}catch(si){}const Kn=de.filter(ur=>ur._shouldAllowMigration);return Oe._shouldAllowMigration&&Kn.length?(Oe=Kn[0],Jt&&(yield Oe._set(kt,Jt.toJSON())),yield Promise.all(D.map(function(){var ur=(0,m.Z)(function*(si){if(si!==Oe)try{yield si._remove(kt)}catch(zr){}});return function(si){return ur.apply(this,arguments)}}())),new qt(Oe,I,L)):new qt(Oe,I,L)})()}}function $t(N){const I=N.toLowerCase();if(I.includes("opera/")||I.includes("opr/")||I.includes("opios/"))return"Opera";if(Zr(I))return"IEMobile";if(I.includes("msie")||I.includes("trident/"))return"IE";if(I.includes("edge/"))return"Edge";if(Wn(I))return"Firefox";if(I.includes("silk/"))return"Silk";if(vi(I))return"Blackberry";if(St(I))return"Webos";if(Cr(I))return"Safari";if((I.includes("chrome/")||Or(I))&&!I.includes("edge/"))return"Chrome";if(fr(I))return"Android";{const L=N.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==L?void 0:L.length))return L[1]}return"Other"}function Wn(N=(0,H.z$)()){return/firefox\//i.test(N)}function Cr(N=(0,H.z$)()){const I=N.toLowerCase();return I.includes("safari/")&&!I.includes("chrome/")&&!I.includes("crios/")&&!I.includes("android")}function Or(N=(0,H.z$)()){return/crios\//i.test(N)}function Zr(N=(0,H.z$)()){return/iemobile/i.test(N)}function fr(N=(0,H.z$)()){return/android/i.test(N)}function vi(N=(0,H.z$)()){return/blackberry/i.test(N)}function St(N=(0,H.z$)()){return/webos/i.test(N)}function vt(N=(0,H.z$)()){return/iphone|ipad|ipod/i.test(N)||/macintosh/i.test(N)&&/mobile/i.test(N)}function Tn(N=(0,H.z$)()){return vt(N)||fr(N)||St(N)||vi(N)||/windows phone/i.test(N)||Zr(N)}function fi(N,I=[]){let D;switch(N){case"Browser":D=$t((0,H.z$)());break;case"Worker":D=`${$t((0,H.z$)())}-${N}`;break;default:D=N}const L=I.length?I.join(","):"FirebaseCore-web";return`${D}/JsCore/${he.SDK_VERSION}/${L}`}class Yr{constructor(I){this.auth=I,this.queue=[]}pushCallback(I,D){const L=Oe=>new Promise((kt,Jt)=>{try{kt(I(Oe))}catch(Kn){Jt(Kn)}});L.onAbort=D,this.queue.push(L);const de=this.queue.length-1;return()=>{this.queue[de]=()=>Promise.resolve()}}runMiddleware(I){var D=this;return(0,m.Z)(function*(){if(D.auth.currentUser===I)return;const L=[];try{for(const de of D.queue)yield de(I),de.onAbort&&L.push(de.onAbort)}catch(de){L.reverse();for(const Oe of L)try{Oe()}catch(kt){}throw D.auth._errorFactory.create("login-blocked",{originalMessage:null==de?void 0:de.message})}})()}}class Ei{constructor(I,D,L){this.app=I,this.heartbeatServiceProvider=D,this.config=L,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lo(this),this.idTokenSubscription=new Lo(this),this.beforeStateQueue=new Yr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=We,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=I.name,this.clientVersion=L.sdkClientVersion}_initializeWithPersistence(I,D){var L=this;return D&&(this._popupRedirectResolver=ut(D)),this._initializationPromise=this.queue((0,m.Z)(function*(){var de,Oe;if(!L._deleted&&(L.persistenceManager=yield qt.create(L,I),!L._deleted)){if(null!==(de=L._popupRedirectResolver)&&void 0!==de&&de._shouldInitProactively)try{yield L._popupRedirectResolver._initialize(L)}catch(kt){}yield L.initializeCurrentUser(D),L.lastNotifiedUid=(null===(Oe=L.currentUser)||void 0===Oe?void 0:Oe.uid)||null,!L._deleted&&(L._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var I=this;return(0,m.Z)(function*(){if(I._deleted)return;const D=yield I.assertedPersistence.getCurrentUser();if(I.currentUser||D){if(I.currentUser&&D&&I.currentUser.uid===D.uid)return I._currentUser._assign(D),void(yield I.currentUser.getIdToken());yield I._updateCurrentUser(D,!0)}})()}initializeCurrentUser(I){var D=this;return(0,m.Z)(function*(){var L;const de=yield D.assertedPersistence.getCurrentUser();let Oe=de,kt=!1;if(I&&D.config.authDomain){yield D.getOrInitRedirectPersistenceManager();const Jt=null===(L=D.redirectUser)||void 0===L?void 0:L._redirectEventId,Kn=null==Oe?void 0:Oe._redirectEventId,ur=yield D.tryRedirectSignIn(I);(!Jt||Jt===Kn)&&null!=ur&&ur.user&&(Oe=ur.user,kt=!0)}if(!Oe)return D.directlySetCurrentUser(null);if(!Oe._redirectEventId){if(kt)try{yield D.beforeStateQueue.runMiddleware(Oe)}catch(Jt){Oe=de,D._popupRedirectResolver._overrideRedirectResult(D,()=>Promise.reject(Jt))}return Oe?D.reloadAndSetCurrentUserOrClear(Oe):D.directlySetCurrentUser(null)}return $(D._popupRedirectResolver,D,"argument-error"),yield D.getOrInitRedirectPersistenceManager(),D.redirectUser&&D.redirectUser._redirectEventId===Oe._redirectEventId?D.directlySetCurrentUser(Oe):D.reloadAndSetCurrentUserOrClear(Oe)})()}tryRedirectSignIn(I){var D=this;return(0,m.Z)(function*(){let L=null;try{L=yield D._popupRedirectResolver._completeRedirectFn(D,I,!0)}catch(de){yield D._setRedirectUser(null)}return L})()}reloadAndSetCurrentUserOrClear(I){var D=this;return(0,m.Z)(function*(){try{yield jr(I)}catch(L){if("auth/network-request-failed"!==(null==L?void 0:L.code))return D.directlySetCurrentUser(null)}return D.directlySetCurrentUser(I)})()}useDeviceLanguage(){this.languageCode=function Ze(){if(typeof navigator>"u")return null;const N=navigator;return N.languages&&N.languages[0]||N.language||null}()}_delete(){var I=this;return(0,m.Z)(function*(){I._deleted=!0})()}updateCurrentUser(I){var D=this;return(0,m.Z)(function*(){const L=I?(0,H.m9)(I):null;return L&&$(L.auth.config.apiKey===D.config.apiKey,D,"invalid-user-token"),D._updateCurrentUser(L&&L._clone(D))})()}_updateCurrentUser(I,D=!1){var L=this;return(0,m.Z)(function*(){if(!L._deleted)return I&&$(L.tenantId===I.tenantId,L,"tenant-id-mismatch"),D||(yield L.beforeStateQueue.runMiddleware(I)),L.queue((0,m.Z)(function*(){yield L.directlySetCurrentUser(I),L.notifyAuthListeners()}))})()}signOut(){var I=this;return(0,m.Z)(function*(){return yield I.beforeStateQueue.runMiddleware(null),(I.redirectPersistenceManager||I._popupRedirectResolver)&&(yield I._setRedirectUser(null)),I._updateCurrentUser(null,!0)})()}setPersistence(I){var D=this;return this.queue((0,m.Z)(function*(){yield D.assertedPersistence.setPersistence(ut(I))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(I){this._errorFactory=new H.LL("auth","Firebase",I())}onAuthStateChanged(I,D,L){return this.registerStateListener(this.authStateSubscription,I,D,L)}beforeAuthStateChanged(I,D){return this.beforeStateQueue.pushCallback(I,D)}onIdTokenChanged(I,D,L){return this.registerStateListener(this.idTokenSubscription,I,D,L)}toJSON(){var I;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(I=this._currentUser)||void 0===I?void 0:I.toJSON()}}_setRedirectUser(I,D){var L=this;return(0,m.Z)(function*(){const de=yield L.getOrInitRedirectPersistenceManager(D);return null===I?de.removeCurrentUser():de.setCurrentUser(I)})()}getOrInitRedirectPersistenceManager(I){var D=this;return(0,m.Z)(function*(){if(!D.redirectPersistenceManager){const L=I&&ut(I)||D._popupRedirectResolver;$(L,D,"argument-error"),D.redirectPersistenceManager=yield qt.create(D,[ut(L._redirectPersistence)],"redirectUser"),D.redirectUser=yield D.redirectPersistenceManager.getCurrentUser()}return D.redirectPersistenceManager})()}_redirectUserForId(I){var D=this;return(0,m.Z)(function*(){var L,de;return D._isInitialized&&(yield D.queue((0,m.Z)(function*(){}))),(null===(L=D._currentUser)||void 0===L?void 0:L._redirectEventId)===I?D._currentUser:(null===(de=D.redirectUser)||void 0===de?void 0:de._redirectEventId)===I?D.redirectUser:null})()}_persistUserIfCurrent(I){var D=this;return(0,m.Z)(function*(){if(I===D.currentUser)return D.queue((0,m.Z)(function*(){return D.directlySetCurrentUser(I)}))})()}_notifyListenersIfCurrent(I){I===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var I,D;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const L=null!==(D=null===(I=this.currentUser)||void 0===I?void 0:I.uid)&&void 0!==D?D:null;this.lastNotifiedUid!==L&&(this.lastNotifiedUid=L,this.authStateSubscription.next(this.currentUser))}registerStateListener(I,D,L,de){if(this._deleted)return()=>{};const Oe="function"==typeof D?D:D.next.bind(D),kt=this._isInitialized?Promise.resolve():this._initializationPromise;return $(kt,this,"internal-error"),kt.then(()=>Oe(this.currentUser)),"function"==typeof D?I.addObserver(D,L,de):I.addObserver(D)}directlySetCurrentUser(I){var D=this;return(0,m.Z)(function*(){D.currentUser&&D.currentUser!==I&&D._currentUser._stopProactiveRefresh(),I&&D.isProactiveRefreshEnabled&&I._startProactiveRefresh(),D.currentUser=I,I?yield D.assertedPersistence.setCurrentUser(I):yield D.assertedPersistence.removeCurrentUser()})()}queue(I){return this.operations=this.operations.then(I,I),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(I){!I||this.frameworks.includes(I)||(this.frameworks.push(I),this.frameworks.sort(),this.clientVersion=fi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var I=this;return(0,m.Z)(function*(){var D;const L={"X-Client-Version":I.clientVersion};I.app.options.appId&&(L["X-Firebase-gmpid"]=I.app.options.appId);const de=yield null===(D=I.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===D?void 0:D.getHeartbeatsHeader();return de&&(L["X-Firebase-Client"]=de),L})()}}function ti(N){return(0,H.m9)(N)}class Lo{constructor(I){this.auth=I,this.observer=null,this.addObserver=(0,H.ne)(D=>this.observer=D)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ki(N){const I=N.indexOf(":");return I<0?"":N.substr(0,I+1)}function Mr(N){if(!N)return null;const I=Number(N);return isNaN(I)?null:I}class Oi{constructor(I,D){this.providerId=I,this.signInMethod=D}toJSON(){return lt("not implemented")}_getIdTokenResponse(I){return lt("not implemented")}_linkToIdToken(I,D){return lt("not implemented")}_getReauthenticationResolver(I){return lt("not implemented")}}function Tr(N,I){return oi.apply(this,arguments)}function oi(){return(oi=(0,m.Z)(function*(N,I){return rt(N,"POST","/v1/accounts:resetPassword",ke(N,I))})).apply(this,arguments)}function Ln(N,I){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,m.Z)(function*(N,I){return rt(N,"POST","/v1/accounts:update",I)})).apply(this,arguments)}function Gr(){return(Gr=(0,m.Z)(function*(N,I){return rt(N,"POST","/v1/accounts:update",ke(N,I))})).apply(this,arguments)}function Zi(){return(Zi=(0,m.Z)(function*(N,I){return yn(N,"POST","/v1/accounts:signInWithPassword",ke(N,I))})).apply(this,arguments)}function Fi(N,I){return Se.apply(this,arguments)}function Se(){return(Se=(0,m.Z)(function*(N,I){return rt(N,"POST","/v1/accounts:sendOobCode",ke(N,I))})).apply(this,arguments)}function Rt(){return(Rt=(0,m.Z)(function*(N,I){return Fi(N,I)})).apply(this,arguments)}function Bt(){return(Bt=(0,m.Z)(function*(N,I){return Fi(N,I)})).apply(this,arguments)}function xt(){return(xt=(0,m.Z)(function*(N,I){return Fi(N,I)})).apply(this,arguments)}function Zt(){return(Zt=(0,m.Z)(function*(N,I){return Fi(N,I)})).apply(this,arguments)}function In(){return(In=(0,m.Z)(function*(N,I){return yn(N,"POST","/v1/accounts:signInWithEmailLink",ke(N,I))})).apply(this,arguments)}function Jn(){return(Jn=(0,m.Z)(function*(N,I){return yn(N,"POST","/v1/accounts:signInWithEmailLink",ke(N,I))})).apply(this,arguments)}class ci extends Oi{constructor(I,D,L,de=null){super("password",L),this._email=I,this._password=D,this._tenantId=de}static _fromEmailAndPassword(I,D){return new ci(I,D,"password")}static _fromEmailAndCode(I,D,L=null){return new ci(I,D,"emailLink",L)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(I){const D="string"==typeof I?JSON.parse(I):I;if(null!=D&&D.email&&null!=D&&D.password){if("password"===D.signInMethod)return this._fromEmailAndPassword(D.email,D.password);if("emailLink"===D.signInMethod)return this._fromEmailAndCode(D.email,D.password,D.tenantId)}return null}_getIdTokenResponse(I){var D=this;return(0,m.Z)(function*(){switch(D.signInMethod){case"password":return function Vi(N,I){return Zi.apply(this,arguments)}(I,{returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function on(N,I){return In.apply(this,arguments)}(I,{email:D._email,oobCode:D._password});default:At(I,"internal-error")}})()}_linkToIdToken(I,D){var L=this;return(0,m.Z)(function*(){switch(L.signInMethod){case"password":return Ln(I,{idToken:D,returnSecureToken:!0,email:L._email,password:L._password});case"emailLink":return function Zn(N,I){return Jn.apply(this,arguments)}(I,{idToken:D,email:L._email,oobCode:L._password});default:At(I,"internal-error")}})()}_getReauthenticationResolver(I){return this._getIdTokenResponse(I)}}function Kr(N,I){return _t.apply(this,arguments)}function _t(){return(_t=(0,m.Z)(function*(N,I){return yn(N,"POST","/v1/accounts:signInWithIdp",ke(N,I))})).apply(this,arguments)}class Ft extends Oi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(I){const D=new Ft(I.providerId,I.signInMethod);return I.idToken||I.accessToken?(I.idToken&&(D.idToken=I.idToken),I.accessToken&&(D.accessToken=I.accessToken),I.nonce&&!I.pendingToken&&(D.nonce=I.nonce),I.pendingToken&&(D.pendingToken=I.pendingToken)):I.oauthToken&&I.oauthTokenSecret?(D.accessToken=I.oauthToken,D.secret=I.oauthTokenSecret):At("argument-error"),D}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(I){const D="string"==typeof I?JSON.parse(I):I,{providerId:L,signInMethod:de}=D,Oe=(0,we._T)(D,["providerId","signInMethod"]);if(!L||!de)return null;const kt=new Ft(L,de);return kt.idToken=Oe.idToken||void 0,kt.accessToken=Oe.accessToken||void 0,kt.secret=Oe.secret,kt.nonce=Oe.nonce,kt.pendingToken=Oe.pendingToken||null,kt}_getIdTokenResponse(I){return Kr(I,this.buildRequest())}_linkToIdToken(I,D){const L=this.buildRequest();return L.idToken=D,Kr(I,L)}_getReauthenticationResolver(I){const D=this.buildRequest();return D.autoCreate=!1,Kr(I,D)}buildRequest(){const I={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)I.pendingToken=this.pendingToken;else{const D={};this.idToken&&(D.id_token=this.idToken),this.accessToken&&(D.access_token=this.accessToken),this.secret&&(D.oauth_token_secret=this.secret),D.providerId=this.providerId,this.nonce&&!this.pendingToken&&(D.nonce=this.nonce),I.postBody=(0,H.xO)(D)}return I}}function fn(){return(fn=(0,m.Z)(function*(N,I){return rt(N,"POST","/v1/accounts:sendVerificationCode",ke(N,I))})).apply(this,arguments)}function er(){return(er=(0,m.Z)(function*(N,I){return yn(N,"POST","/v1/accounts:signInWithPhoneNumber",ke(N,I))})).apply(this,arguments)}function hi(){return(hi=(0,m.Z)(function*(N,I){const D=yield yn(N,"POST","/v1/accounts:signInWithPhoneNumber",ke(N,I));if(D.temporaryProof)throw Ar(N,"account-exists-with-different-credential",D);return D})).apply(this,arguments)}const Yi={USER_NOT_FOUND:"user-not-found"};function uo(){return(uo=(0,m.Z)(function*(N,I){return yn(N,"POST","/v1/accounts:signInWithPhoneNumber",ke(N,Object.assign(Object.assign({},I),{operation:"REAUTH"})),Yi)})).apply(this,arguments)}class Xr extends Oi{constructor(I){super("phone","phone"),this.params=I}static _fromVerification(I,D){return new Xr({verificationId:I,verificationCode:D})}static _fromTokenResponse(I,D){return new Xr({phoneNumber:I,temporaryProof:D})}_getIdTokenResponse(I){return function Sn(N,I){return er.apply(this,arguments)}(I,this._makeVerificationRequest())}_linkToIdToken(I,D){return function mr(N,I){return hi.apply(this,arguments)}(I,Object.assign({idToken:D},this._makeVerificationRequest()))}_getReauthenticationResolver(I){return function ji(N,I){return uo.apply(this,arguments)}(I,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:I,phoneNumber:D,verificationId:L,verificationCode:de}=this.params;return I&&D?{temporaryProof:I,phoneNumber:D}:{sessionInfo:L,code:de}}toJSON(){const I={providerId:this.providerId};return this.params.phoneNumber&&(I.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(I.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(I.verificationCode=this.params.verificationCode),this.params.verificationId&&(I.verificationId=this.params.verificationId),I}static fromJSON(I){"string"==typeof I&&(I=JSON.parse(I));const{verificationId:D,verificationCode:L,phoneNumber:de,temporaryProof:Oe}=I;return L||D||de||Oe?new Xr({verificationId:D,verificationCode:L,phoneNumber:de,temporaryProof:Oe}):null}}class Os{constructor(I){var D,L,de,Oe,kt,Jt;const Kn=(0,H.zd)((0,H.pd)(I)),ur=null!==(D=Kn.apiKey)&&void 0!==D?D:null,si=null!==(L=Kn.oobCode)&&void 0!==L?L:null,zr=function Qr(N){switch(N){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(de=Kn.mode)&&void 0!==de?de:null);$(ur&&si&&zr,"argument-error"),this.apiKey=ur,this.operation=zr,this.code=si,this.continueUrl=null!==(Oe=Kn.continueUrl)&&void 0!==Oe?Oe:null,this.languageCode=null!==(kt=Kn.languageCode)&&void 0!==kt?kt:null,this.tenantId=null!==(Jt=Kn.tenantId)&&void 0!==Jt?Jt:null}static parseLink(I){const D=function Si(N){const I=(0,H.zd)((0,H.pd)(N)).link,D=I?(0,H.zd)((0,H.pd)(I)).deep_link_id:null,L=(0,H.zd)((0,H.pd)(N)).deep_link_id;return(L?(0,H.zd)((0,H.pd)(L)).link:null)||L||D||I||N}(I);try{return new Os(D)}catch(L){return null}}}let xo=(()=>{class N{constructor(){this.providerId=N.PROVIDER_ID}static credential(D,L){return ci._fromEmailAndPassword(D,L)}static credentialWithLink(D,L){const de=Os.parseLink(L);return $(de,"argument-error"),ci._fromEmailAndCode(D,de.code,de.tenantId)}}return N.PROVIDER_ID="password",N.EMAIL_PASSWORD_SIGN_IN_METHOD="password",N.EMAIL_LINK_SIGN_IN_METHOD="emailLink",N})();class ns{constructor(I){this.providerId=I,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(I){this.defaultLanguageCode=I}setCustomParameters(I){return this.customParameters=I,this}getCustomParameters(){return this.customParameters}}class Bo extends ns{constructor(){super(...arguments),this.scopes=[]}addScope(I){return this.scopes.includes(I)||this.scopes.push(I),this}getScopes(){return[...this.scopes]}}class Mo extends Bo{static credentialFromJSON(I){const D="string"==typeof I?JSON.parse(I):I;return $("providerId"in D&&"signInMethod"in D,"argument-error"),Ft._fromParams(D)}credential(I){return this._credential(Object.assign(Object.assign({},I),{nonce:I.rawNonce}))}_credential(I){return $(I.idToken||I.accessToken,"argument-error"),Ft._fromParams(Object.assign(Object.assign({},I),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(I){return Mo.oauthCredentialFromTaggedObject(I)}static credentialFromError(I){return Mo.oauthCredentialFromTaggedObject(I.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{oauthIdToken:D,oauthAccessToken:L,oauthTokenSecret:de,pendingToken:Oe,nonce:kt,providerId:Jt}=I;if(!L&&!de&&!D&&!Oe||!Jt)return null;try{return new Mo(Jt)._credential({idToken:D,accessToken:L,nonce:kt,pendingToken:Oe})}catch(Kn){return null}}}let Zo=(()=>{class N extends Bo{constructor(){super("facebook.com")}static credential(D){return Ft._fromParams({providerId:N.PROVIDER_ID,signInMethod:N.FACEBOOK_SIGN_IN_METHOD,accessToken:D})}static credentialFromResult(D){return N.credentialFromTaggedObject(D)}static credentialFromError(D){return N.credentialFromTaggedObject(D.customData||{})}static credentialFromTaggedObject({_tokenResponse:D}){if(!D||!("oauthAccessToken"in D)||!D.oauthAccessToken)return null;try{return N.credential(D.oauthAccessToken)}catch(L){return null}}}return N.FACEBOOK_SIGN_IN_METHOD="facebook.com",N.PROVIDER_ID="facebook.com",N})(),fs=(()=>{class N extends Bo{constructor(){super("google.com"),this.addScope("profile")}static credential(D,L){return Ft._fromParams({providerId:N.PROVIDER_ID,signInMethod:N.GOOGLE_SIGN_IN_METHOD,idToken:D,accessToken:L})}static credentialFromResult(D){return N.credentialFromTaggedObject(D)}static credentialFromError(D){return N.credentialFromTaggedObject(D.customData||{})}static credentialFromTaggedObject({_tokenResponse:D}){if(!D)return null;const{oauthIdToken:L,oauthAccessToken:de}=D;if(!L&&!de)return null;try{return N.credential(L,de)}catch(Oe){return null}}}return N.GOOGLE_SIGN_IN_METHOD="google.com",N.PROVIDER_ID="google.com",N})(),ps=(()=>{class N extends Bo{constructor(){super("github.com")}static credential(D){return Ft._fromParams({providerId:N.PROVIDER_ID,signInMethod:N.GITHUB_SIGN_IN_METHOD,accessToken:D})}static credentialFromResult(D){return N.credentialFromTaggedObject(D)}static credentialFromError(D){return N.credentialFromTaggedObject(D.customData||{})}static credentialFromTaggedObject({_tokenResponse:D}){if(!D||!("oauthAccessToken"in D)||!D.oauthAccessToken)return null;try{return N.credential(D.oauthAccessToken)}catch(L){return null}}}return N.GITHUB_SIGN_IN_METHOD="github.com",N.PROVIDER_ID="github.com",N})();class gs extends Oi{constructor(I,D){super(I,I),this.pendingToken=D}_getIdTokenResponse(I){return Kr(I,this.buildRequest())}_linkToIdToken(I,D){const L=this.buildRequest();return L.idToken=D,Kr(I,L)}_getReauthenticationResolver(I){const D=this.buildRequest();return D.autoCreate=!1,Kr(I,D)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(I){const D="string"==typeof I?JSON.parse(I):I,{providerId:L,signInMethod:de,pendingToken:Oe}=D;return L&&de&&Oe&&L===de?new gs(L,Oe):null}static _create(I,D){return new gs(I,D)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Xo extends ns{constructor(I){$(I.startsWith("saml."),"argument-error"),super(I)}static credentialFromResult(I){return Xo.samlCredentialFromTaggedObject(I)}static credentialFromError(I){return Xo.samlCredentialFromTaggedObject(I.customData||{})}static credentialFromJSON(I){const D=gs.fromJSON(I);return $(D,"argument-error"),D}static samlCredentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{pendingToken:D,providerId:L}=I;if(!D||!L)return null;try{return gs._create(L,D)}catch(de){return null}}}let Ua=(()=>{class N extends Bo{constructor(){super("twitter.com")}static credential(D,L){return Ft._fromParams({providerId:N.PROVIDER_ID,signInMethod:N.TWITTER_SIGN_IN_METHOD,oauthToken:D,oauthTokenSecret:L})}static credentialFromResult(D){return N.credentialFromTaggedObject(D)}static credentialFromError(D){return N.credentialFromTaggedObject(D.customData||{})}static credentialFromTaggedObject({_tokenResponse:D}){if(!D)return null;const{oauthAccessToken:L,oauthTokenSecret:de}=D;if(!L||!de)return null;try{return N.credential(L,de)}catch(Oe){return null}}}return N.TWITTER_SIGN_IN_METHOD="twitter.com",N.PROVIDER_ID="twitter.com",N})();function Ws(N,I){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,m.Z)(function*(N,I){return yn(N,"POST","/v1/accounts:signUp",ke(N,I))})).apply(this,arguments)}class Mi{constructor(I){this.user=I.user,this.providerId=I.providerId,this._tokenResponse=I._tokenResponse,this.operationType=I.operationType}static _fromIdTokenResponse(I,D,L,de=!1){return(0,m.Z)(function*(){const Oe=yield hr._fromIdTokenResponse(I,L,de),kt=tr(L);return new Mi({user:Oe,providerId:kt,_tokenResponse:L,operationType:D})})()}static _forOperation(I,D,L){return(0,m.Z)(function*(){yield I._updateTokensIfNecessary(L,!0);const de=tr(L);return new Mi({user:I,providerId:de,_tokenResponse:L,operationType:D})})()}}function tr(N){return N.providerId?N.providerId:"phoneNumber"in N?"phone":null}function rs(){return(rs=(0,m.Z)(function*(N){var I;const D=ti(N);if(yield D._initializationPromise,null!==(I=D.currentUser)&&void 0!==I&&I.isAnonymous)return new Mi({user:D.currentUser,providerId:null,operationType:"signIn"});const L=yield Ws(D,{returnSecureToken:!0}),de=yield Mi._fromIdTokenResponse(D,"signIn",L,!0);return yield D._updateCurrentUser(de.user),de})).apply(this,arguments)}class Ks extends H.ZR{constructor(I,D,L,de){var Oe;super(D.code,D.message),this.operationType=L,this.user=de,Object.setPrototypeOf(this,Ks.prototype),this.customData={appName:I.name,tenantId:null!==(Oe=I.tenantId)&&void 0!==Oe?Oe:void 0,_serverResponse:D.customData._serverResponse,operationType:L}}static _fromErrorAndOperation(I,D,L,de){return new Ks(I,D,L,de)}}function $r(N,I,D,L){return("reauthenticate"===I?D._getReauthenticationResolver(N):D._getIdTokenResponse(N)).catch(Oe=>{throw"auth/multi-factor-auth-required"===Oe.code?Ks._fromErrorAndOperation(N,Oe,I,L):Oe})}function Ao(N){return new Set(N.map(({providerId:I})=>I).filter(I=>!!I))}function vs(){return vs=(0,m.Z)(function*(N,I){const D=(0,H.m9)(N);yield jo(!0,D,I);const{providerUserInfo:L}=yield function En(N,I){return sn.apply(this,arguments)}(D.auth,{idToken:yield D.getIdToken(),deleteProvider:[I]}),de=Ao(L||[]);return D.providerData=D.providerData.filter(Oe=>de.has(Oe.providerId)),de.has("phone")||(D.phoneNumber=null),yield D.auth._persistUserIfCurrent(D),D}),vs.apply(this,arguments)}function lo(N,I){return is.apply(this,arguments)}function is(){return(is=(0,m.Z)(function*(N,I,D=!1){const L=yield qn(N,I._linkToIdToken(N.auth,yield N.getIdToken()),D);return Mi._forOperation(N,"link",L)})).apply(this,arguments)}function jo(N,I,D){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,m.Z)(function*(N,I,D){yield jr(I);const de=!1===N?"provider-already-linked":"no-such-provider";$(Ao(I.providerData).has(D)===N,I.auth,de)})).apply(this,arguments)}function qs(N,I){return Us.apply(this,arguments)}function Us(){return(Us=(0,m.Z)(function*(N,I,D=!1){const{auth:L}=N,de="reauthenticate";try{const Oe=yield qn(N,$r(L,de,I,N),D);$(Oe.idToken,L,"internal-error");const kt=cr(Oe.idToken);$(kt,L,"internal-error");const{sub:Jt}=kt;return $(N.uid===Jt,L,"user-mismatch"),Mi._forOperation(N,de,Oe)}catch(Oe){throw"auth/user-not-found"===(null==Oe?void 0:Oe.code)&&At(L,"user-mismatch"),Oe}})).apply(this,arguments)}function os(N,I){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,m.Z)(function*(N,I,D=!1){const L="signIn",de=yield $r(N,L,I),Oe=yield Mi._fromIdTokenResponse(N,L,de);return D||(yield N._updateCurrentUser(Oe.user)),Oe})).apply(this,arguments)}function Ni(N,I){return ys.apply(this,arguments)}function ys(){return(ys=(0,m.Z)(function*(N,I){return os(ti(N),I)})).apply(this,arguments)}function Ki(N,I){return _s.apply(this,arguments)}function _s(){return(_s=(0,m.Z)(function*(N,I){const D=(0,H.m9)(N);return yield jo(!1,D,I.providerId),lo(D,I)})).apply(this,arguments)}function Zs(N,I){return So.apply(this,arguments)}function So(){return(So=(0,m.Z)(function*(N,I){return qs((0,H.m9)(N),I)})).apply(this,arguments)}function ls(){return(ls=(0,m.Z)(function*(N,I){return yn(N,"POST","/v1/accounts:signInWithCustomToken",ke(N,I))})).apply(this,arguments)}function io(){return io=(0,m.Z)(function*(N,I){const D=ti(N),L=yield function wi(N,I){return ls.apply(this,arguments)}(D,{token:I,returnSecureToken:!0}),de=yield Mi._fromIdTokenResponse(D,"signIn",L);return yield D._updateCurrentUser(de.user),de}),io.apply(this,arguments)}class $i{constructor(I,D){this.factorId=I,this.uid=D.mfaEnrollmentId,this.enrollmentTime=new Date(D.enrolledAt).toUTCString(),this.displayName=D.displayName}static _fromServerResponse(I,D){return"phoneInfo"in D?Qi._fromServerResponse(I,D):At(I,"internal-error")}}class Qi extends $i{constructor(I){super("phone",I),this.phoneNumber=I.phoneInfo}static _fromServerResponse(I,D){return new Qi(D)}}function Vo(N,I,D){var L;$((null===(L=D.url)||void 0===L?void 0:L.length)>0,N,"invalid-continue-uri"),$(typeof D.dynamicLinkDomain>"u"||D.dynamicLinkDomain.length>0,N,"invalid-dynamic-link-domain"),I.continueUrl=D.url,I.dynamicLinkDomain=D.dynamicLinkDomain,I.canHandleCodeInApp=D.handleCodeInApp,D.iOS&&($(D.iOS.bundleId.length>0,N,"missing-ios-bundle-id"),I.iOSBundleId=D.iOS.bundleId),D.android&&($(D.android.packageName.length>0,N,"missing-android-pkg-name"),I.androidInstallApp=D.android.installApp,I.androidMinimumVersionCode=D.android.minimumVersion,I.androidPackageName=D.android.packageName)}function Fr(){return Fr=(0,m.Z)(function*(N,I,D){const L=(0,H.m9)(N),de={requestType:"PASSWORD_RESET",email:I};D&&Vo(L,de,D),yield function Ot(N,I){return Bt.apply(this,arguments)}(L,de)}),Fr.apply(this,arguments)}function Br(){return(Br=(0,m.Z)(function*(N,I,D){yield Tr((0,H.m9)(N),{oobCode:I,newPassword:D})})).apply(this,arguments)}function Gi(){return Gi=(0,m.Z)(function*(N,I){yield function gr(N,I){return Gr.apply(this,arguments)}((0,H.m9)(N),{oobCode:I})}),Gi.apply(this,arguments)}function Vs(N,I){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,m.Z)(function*(N,I){const D=(0,H.m9)(N),L=yield Tr(D,{oobCode:I}),de=L.requestType;switch($(de,D,"internal-error"),de){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":$(L.newEmail,D,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":$(L.mfaInfo,D,"internal-error");default:$(L.email,D,"internal-error")}let Oe=null;return L.mfaInfo&&(Oe=$i._fromServerResponse(ti(D),L.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===L.requestType?L.newEmail:L.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===L.requestType?L.email:L.newEmail)||null,multiFactorInfo:Oe},operation:de}})).apply(this,arguments)}function $s(){return($s=(0,m.Z)(function*(N,I){const{data:D}=yield Vs((0,H.m9)(N),I);return D.email})).apply(this,arguments)}function ss(){return(ss=(0,m.Z)(function*(N,I,D){const L=ti(N),de=yield Ws(L,{returnSecureToken:!0,email:I,password:D}),Oe=yield Mi._fromIdTokenResponse(L,"signIn",de);return yield L._updateCurrentUser(Oe.user),Oe})).apply(this,arguments)}function T(){return T=(0,m.Z)(function*(N,I,D){const L=(0,H.m9)(N),de={requestType:"EMAIL_SIGNIN",email:I};$(D.handleCodeInApp,L,"argument-error"),D&&Vo(L,de,D),yield function Ge(N,I){return xt.apply(this,arguments)}(L,de)}),T.apply(this,arguments)}function ve(){return(ve=(0,m.Z)(function*(N,I,D){const L=(0,H.m9)(N),de=xo.credentialWithLink(I,D||mt());return $(de._tenantId===(L.tenantId||null),L,"tenant-id-mismatch"),Ni(L,de)})).apply(this,arguments)}function _n(){return(_n=(0,m.Z)(function*(N,I){return rt(N,"POST","/v1/accounts:createAuthUri",ke(N,I))})).apply(this,arguments)}function wr(){return wr=(0,m.Z)(function*(N,I){const L={identifier:I,continueUri:gt()?mt():"http://localhost"},{signinMethods:de}=yield function Vt(N,I){return _n.apply(this,arguments)}((0,H.m9)(N),L);return de||[]}),wr.apply(this,arguments)}function ee(){return ee=(0,m.Z)(function*(N,I){const D=(0,H.m9)(N),de={requestType:"VERIFY_EMAIL",idToken:yield N.getIdToken()};I&&Vo(D.auth,de,I);const{email:Oe}=yield function je(N,I){return Rt.apply(this,arguments)}(D.auth,de);Oe!==N.email&&(yield N.reload())}),ee.apply(this,arguments)}function Te(){return Te=(0,m.Z)(function*(N,I,D){const L=(0,H.m9)(N),Oe={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield N.getIdToken(),newEmail:I};D&&Vo(L.auth,Oe,D);const{email:kt}=yield function Ut(N,I){return Zt.apply(this,arguments)}(L.auth,Oe);kt!==N.email&&(yield N.reload())}),Te.apply(this,arguments)}function Et(){return(Et=(0,m.Z)(function*(N,I){return rt(N,"POST","/v1/accounts:update",I)})).apply(this,arguments)}function dn(){return dn=(0,m.Z)(function*(N,{displayName:I,photoURL:D}){if(void 0===I&&void 0===D)return;const L=(0,H.m9)(N),Oe={idToken:yield L.getIdToken(),displayName:I,photoUrl:D,returnSecureToken:!0},kt=yield qn(L,function nt(N,I){return Et.apply(this,arguments)}(L.auth,Oe));L.displayName=kt.displayName||null,L.photoURL=kt.photoUrl||null;const Jt=L.providerData.find(({providerId:Kn})=>"password"===Kn);Jt&&(Jt.displayName=L.displayName,Jt.photoURL=L.photoURL),yield L._updateTokensIfNecessary(kt)}),dn.apply(this,arguments)}function Nr(N,I,D){return ui.apply(this,arguments)}function ui(){return(ui=(0,m.Z)(function*(N,I,D){const{auth:L}=N,Oe={idToken:yield N.getIdToken(),returnSecureToken:!0};I&&(Oe.email=I),D&&(Oe.password=D);const kt=yield qn(N,Ln(L,Oe));yield N._updateTokensIfNecessary(kt,!0)})).apply(this,arguments)}class Ci{constructor(I,D,L={}){this.isNewUser=I,this.providerId=D,this.profile=L}}class Ji extends Ci{constructor(I,D,L,de){super(I,D,L),this.username=de}}class oo extends Ci{constructor(I,D){super(I,"facebook.com",D)}}class Po extends Ji{constructor(I,D){super(I,"github.com",D,"string"==typeof(null==D?void 0:D.login)?null==D?void 0:D.login:null)}}class Do extends Ci{constructor(I,D){super(I,"google.com",D)}}class mo extends Ji{constructor(I,D,L){super(I,"twitter.com",D,L)}}function ws(N){const{user:I,_tokenResponse:D}=N;return I.isAnonymous&&!D?{providerId:null,isNewUser:!1,profile:null}:function go(N){var I,D;if(!N)return null;const{providerId:L}=N,de=N.rawUserInfo?JSON.parse(N.rawUserInfo):{},Oe=N.isNewUser||"identitytoolkit#SignupNewUserResponse"===N.kind;if(!L&&null!=N&&N.idToken){const kt=null===(D=null===(I=cr(N.idToken))||void 0===I?void 0:I.firebase)||void 0===D?void 0:D.sign_in_provider;if(kt)return new Ci(Oe,"anonymous"!==kt&&"custom"!==kt?kt:null)}if(!L)return null;switch(L){case"facebook.com":return new oo(Oe,de);case"github.com":return new Po(Oe,de);case"google.com":return new Do(Oe,de);case"twitter.com":return new mo(Oe,de,N.screenName||null);case"custom":case"anonymous":return new Ci(Oe,null);default:return new Ci(Oe,L,de)}}(D)}class ya{constructor(I,D,L){this.type=I,this.credential=D,this.auth=L}static _fromIdtoken(I,D){return new ya("enroll",I,D)}static _fromMfaPendingCredential(I){return new ya("signin",I)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(I){var D,L;if(null!=I&&I.multiFactorSession){if(null!==(D=I.multiFactorSession)&&void 0!==D&&D.pendingCredential)return ya._fromMfaPendingCredential(I.multiFactorSession.pendingCredential);if(null!==(L=I.multiFactorSession)&&void 0!==L&&L.idToken)return ya._fromIdtoken(I.multiFactorSession.idToken)}return null}}class Mu{constructor(I,D,L){this.session=I,this.hints=D,this.signInResolver=L}static _fromError(I,D){const L=ti(I),de=D.customData._serverResponse,Oe=(de.mfaInfo||[]).map(Jt=>$i._fromServerResponse(L,Jt));$(de.mfaPendingCredential,L,"internal-error");const kt=ya._fromMfaPendingCredential(de.mfaPendingCredential);return new Mu(kt,Oe,function(){var Jt=(0,m.Z)(function*(Kn){const ur=yield Kn._process(L,kt);delete de.mfaInfo,delete de.mfaPendingCredential;const si=Object.assign(Object.assign({},de),{idToken:ur.idToken,refreshToken:ur.refreshToken});switch(D.operationType){case"signIn":const zr=yield Mi._fromIdTokenResponse(L,D.operationType,si);return yield L._updateCurrentUser(zr.user),zr;case"reauthenticate":return $(D.user,L,"internal-error"),Mi._forOperation(D.user,D.operationType,si);default:At(L,"internal-error")}});return function(Kn){return Jt.apply(this,arguments)}}())}resolveSignIn(I){var D=this;return(0,m.Z)(function*(){return D.signInResolver(I)})()}}class za{constructor(I){this.user=I,this.enrolledFactors=[],I._onReload(D=>{D.mfaInfo&&(this.enrolledFactors=D.mfaInfo.map(L=>$i._fromServerResponse(I.auth,L)))})}static _fromUser(I){return new za(I)}getSession(){var I=this;return(0,m.Z)(function*(){return ya._fromIdtoken(yield I.user.getIdToken(),I.user.auth)})()}enroll(I,D){var L=this;return(0,m.Z)(function*(){const de=I,Oe=yield L.getSession(),kt=yield qn(L.user,de._process(L.user.auth,Oe,D));return yield L.user._updateTokensIfNecessary(kt),L.user.reload()})()}unenroll(I){var D=this;return(0,m.Z)(function*(){const L="string"==typeof I?I:I.uid,de=yield D.user.getIdToken();try{const Oe=yield qn(D.user,function _a(N,I){return rt(N,"POST","/v2/accounts/mfaEnrollment:withdraw",ke(N,I))}(D.user.auth,{idToken:de,mfaEnrollmentId:L}));D.enrolledFactors=D.enrolledFactors.filter(({uid:kt})=>kt!==L),yield D.user._updateTokensIfNecessary(Oe),yield D.user.reload()}catch(Oe){throw Oe}})()}}const ea=new WeakMap,W="__sak";class ue{constructor(I,D){this.storageRetriever=I,this.type=D}_isAvailable(){try{return this.storage?(this.storage.setItem(W,"1"),this.storage.removeItem(W),Promise.resolve(!0)):Promise.resolve(!1)}catch(I){return Promise.resolve(!1)}}_set(I,D){return this.storage.setItem(I,JSON.stringify(D)),Promise.resolve()}_get(I){const D=this.storage.getItem(I);return Promise.resolve(D?JSON.parse(D):null)}_remove(I){return this.storage.removeItem(I),Promise.resolve()}get storage(){return this.storageRetriever()}}const hn=(()=>{class N extends ue{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(D,L)=>this.onStorageEvent(D,L),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Q(){const N=(0,H.z$)();return Cr(N)||vt(N)}()&&function sr(){try{return!(!window||window===window.top)}catch(N){return!1}}(),this.fallbackToPolling=Tn(),this._shouldAllowMigration=!0}forAllChangedKeys(D){for(const L of Object.keys(this.listeners)){const de=this.storage.getItem(L),Oe=this.localCache[L];de!==Oe&&D(L,Oe,de)}}onStorageEvent(D,L=!1){if(!D.key)return void this.forAllChangedKeys((Jt,Kn,ur)=>{this.notifyListeners(Jt,ur)});const de=D.key;if(L?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Jt=this.storage.getItem(de);if(D.newValue!==Jt)null!==D.newValue?this.storage.setItem(de,D.newValue):this.storage.removeItem(de);else if(this.localCache[de]===D.newValue&&!L)return}const Oe=()=>{const Jt=this.storage.getItem(de);!L&&this.localCache[de]===Jt||this.notifyListeners(de,Jt)},kt=this.storage.getItem(de);!function an(){return(0,H.w1)()&&10===document.documentMode}()||kt===D.newValue||D.newValue===D.oldValue?Oe():setTimeout(Oe,10)}notifyListeners(D,L){this.localCache[D]=L;const de=this.listeners[D];if(de)for(const Oe of Array.from(de))Oe(L&&JSON.parse(L))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((D,L,de)=>{this.onStorageEvent(new StorageEvent("storage",{key:D,oldValue:L,newValue:de}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(D,L){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[D]||(this.listeners[D]=new Set,this.localCache[D]=this.storage.getItem(D)),this.listeners[D].add(L)}_removeListener(D,L){this.listeners[D]&&(this.listeners[D].delete(L),0===this.listeners[D].size&&delete this.listeners[D]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(D,L){var de=()=>super._set,Oe=this;return(0,m.Z)(function*(){yield de().call(Oe,D,L),Oe.localCache[D]=JSON.stringify(L)})()}_get(D){var L=()=>super._get,de=this;return(0,m.Z)(function*(){const Oe=yield L().call(de,D);return de.localCache[D]=JSON.stringify(Oe),Oe})()}_remove(D){var L=()=>super._remove,de=this;return(0,m.Z)(function*(){yield L().call(de,D),delete de.localCache[D]})()}}return N.type="LOCAL",N})(),gi=(()=>{class N extends ue{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(D,L){}_removeListener(D,L){}}return N.type="SESSION",N})();let kr=(()=>{class N{constructor(D){this.eventTarget=D,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(D){const L=this.receivers.find(Oe=>Oe.isListeningto(D));if(L)return L;const de=new N(D);return this.receivers.push(de),de}isListeningto(D){return this.eventTarget===D}handleEvent(D){var L=this;return(0,m.Z)(function*(){const de=D,{eventId:Oe,eventType:kt,data:Jt}=de.data,Kn=L.handlersMap[kt];if(null==Kn||!Kn.size)return;de.ports[0].postMessage({status:"ack",eventId:Oe,eventType:kt});const ur=Array.from(Kn).map(function(){var zr=(0,m.Z)(function*(Bs){return Bs(de.origin,Jt)});return function(Bs){return zr.apply(this,arguments)}}()),si=yield function un(N){return Promise.all(N.map(function(){var I=(0,m.Z)(function*(D){try{return{fulfilled:!0,value:yield D}}catch(L){return{fulfilled:!1,reason:L}}});return function(D){return I.apply(this,arguments)}}()))}(ur);de.ports[0].postMessage({status:"done",eventId:Oe,eventType:kt,response:si})})()}_subscribe(D,L){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[D]||(this.handlersMap[D]=new Set),this.handlersMap[D].add(L)}_unsubscribe(D,L){this.handlersMap[D]&&L&&this.handlersMap[D].delete(L),(!L||0===this.handlersMap[D].size)&&delete this.handlersMap[D],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return N.receivers=[],N})();function Hr(N="",I=10){let D="";for(let L=0;L<I;L++)D+=Math.floor(10*Math.random());return N+D}class vo{constructor(I){this.target=I,this.handlers=new Set}removeMessageHandler(I){I.messageChannel&&(I.messageChannel.port1.removeEventListener("message",I.onMessage),I.messageChannel.port1.close()),this.handlers.delete(I)}_send(I,D,L=50){var de=this;return(0,m.Z)(function*(){const Oe=typeof MessageChannel<"u"?new MessageChannel:null;if(!Oe)throw new Error("connection_unavailable");let kt,Jt;return new Promise((Kn,ur)=>{const si=Hr("",20);Oe.port1.start();const zr=setTimeout(()=>{ur(new Error("unsupported_event"))},L);Jt={messageChannel:Oe,onMessage(Bs){const Du=Bs;if(Du.data.eventId===si)switch(Du.data.status){case"ack":clearTimeout(zr),kt=setTimeout(()=>{ur(new Error("timeout"))},3e3);break;case"done":clearTimeout(kt),Kn(Du.data.response);break;default:clearTimeout(zr),clearTimeout(kt),ur(new Error("invalid_response"))}}},de.handlers.add(Jt),Oe.port1.addEventListener("message",Jt.onMessage),de.target.postMessage({eventType:I,eventId:si,data:D},[Oe.port2])}).finally(()=>{Jt&&de.removeMessageHandler(Jt)})})()}}function Cn(){return window}function As(){return typeof Cn().WorkerGlobalScope<"u"&&"function"==typeof Cn().importScripts}function nn(){return(nn=(0,m.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch(N){return null}})).apply(this,arguments)}const bi="firebaseLocalStorageDb",Ea=1,Va="firebaseLocalStorage",qu="fbase_key";class vu{constructor(I){this.request=I}toPromise(){return new Promise((I,D)=>{this.request.addEventListener("success",()=>{I(this.request.result)}),this.request.addEventListener("error",()=>{D(this.request.error)})})}}function Ka(N,I){return N.transaction([Va],I?"readwrite":"readonly").objectStore(Va)}function ac(){const N=indexedDB.open(bi,Ea);return new Promise((I,D)=>{N.addEventListener("error",()=>{D(N.error)}),N.addEventListener("upgradeneeded",()=>{const L=N.result;try{L.createObjectStore(Va,{keyPath:qu})}catch(de){D(de)}}),N.addEventListener("success",(0,m.Z)(function*(){const L=N.result;L.objectStoreNames.contains(Va)?I(L):(L.close(),yield function su(){const N=indexedDB.deleteDatabase(bi);return new vu(N).toPromise()}(),I(yield ac()))}))})}function wa(N,I,D){return yu.apply(this,arguments)}function yu(){return(yu=(0,m.Z)(function*(N,I,D){const L=Ka(N,!0).put({[qu]:I,value:D});return new vu(L).toPromise()})).apply(this,arguments)}function qr(){return(qr=(0,m.Z)(function*(N,I){const D=Ka(N,!1).get(I),L=yield new vu(D).toPromise();return void 0===L?null:L.value})).apply(this,arguments)}function Ra(N,I){const D=Ka(N,!0).delete(I);return new vu(D).toPromise()}const Oa=(()=>{class N{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var D=this;return(0,m.Z)(function*(){return D.db||(D.db=yield ac()),D.db})()}_withRetries(D){var L=this;return(0,m.Z)(function*(){let de=0;for(;;)try{const Oe=yield L._openDb();return yield D(Oe)}catch(Oe){if(de++>3)throw Oe;L.db&&(L.db.close(),L.db=void 0)}})()}initializeServiceWorkerMessaging(){var D=this;return(0,m.Z)(function*(){return As()?D.initializeReceiver():D.initializeSender()})()}initializeReceiver(){var D=this;return(0,m.Z)(function*(){D.receiver=kr._getInstance(function Ur(){return As()?self:null}()),D.receiver._subscribe("keyChanged",function(){var L=(0,m.Z)(function*(de,Oe){return{keyProcessed:(yield D._poll()).includes(Oe.key)}});return function(de,Oe){return L.apply(this,arguments)}}()),D.receiver._subscribe("ping",function(){var L=(0,m.Z)(function*(de,Oe){return["keyChanged"]});return function(de,Oe){return L.apply(this,arguments)}}())})()}initializeSender(){var D=this;return(0,m.Z)(function*(){var L,de;if(D.activeServiceWorker=yield function Fn(){return nn.apply(this,arguments)}(),!D.activeServiceWorker)return;D.sender=new vo(D.activeServiceWorker);const Oe=yield D.sender._send("ping",{},800);Oe&&null!==(L=Oe[0])&&void 0!==L&&L.fulfilled&&null!==(de=Oe[0])&&void 0!==de&&de.value.includes("keyChanged")&&(D.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(D){var L=this;return(0,m.Z)(function*(){if(L.sender&&L.activeServiceWorker&&function vn(){var N;return(null===(N=null==navigator?void 0:navigator.serviceWorker)||void 0===N?void 0:N.controller)||null}()===L.activeServiceWorker)try{yield L.sender._send("keyChanged",{key:D},L.serviceWorkerReceiverAvailable?800:50)}catch(de){}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const D=yield ac();return yield wa(D,W,"1"),yield Ra(D,W),!0}catch(D){}return!1})()}_withPendingWrite(D){var L=this;return(0,m.Z)(function*(){L.pendingWrites++;try{yield D()}finally{L.pendingWrites--}})()}_set(D,L){var de=this;return(0,m.Z)(function*(){return de._withPendingWrite((0,m.Z)(function*(){return yield de._withRetries(Oe=>wa(Oe,D,L)),de.localCache[D]=L,de.notifyServiceWorker(D)}))})()}_get(D){var L=this;return(0,m.Z)(function*(){const de=yield L._withRetries(Oe=>function fo(N,I){return qr.apply(this,arguments)}(Oe,D));return L.localCache[D]=de,de})()}_remove(D){var L=this;return(0,m.Z)(function*(){return L._withPendingWrite((0,m.Z)(function*(){return yield L._withRetries(de=>Ra(de,D)),delete L.localCache[D],L.notifyServiceWorker(D)}))})()}_poll(){var D=this;return(0,m.Z)(function*(){const L=yield D._withRetries(kt=>{const Jt=Ka(kt,!1).getAll();return new vu(Jt).toPromise()});if(!L)return[];if(0!==D.pendingWrites)return[];const de=[],Oe=new Set;for(const{fbase_key:kt,value:Jt}of L)Oe.add(kt),JSON.stringify(D.localCache[kt])!==JSON.stringify(Jt)&&(D.notifyListeners(kt,Jt),de.push(kt));for(const kt of Object.keys(D.localCache))D.localCache[kt]&&!Oe.has(kt)&&(D.notifyListeners(kt,null),de.push(kt));return de})()}notifyListeners(D,L){this.localCache[D]=L;const de=this.listeners[D];if(de)for(const Oe of Array.from(de))Oe(L)}startPolling(){var D=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return D._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(D,L){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[D]||(this.listeners[D]=new Set,this._get(D)),this.listeners[D].add(L)}_removeListener(D,L){this.listeners[D]&&(this.listeners[D].delete(L),0===this.listeners[D].size&&delete this.listeners[D]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return N.type="LOCAL",N})();function Yn(){return(Yn=(0,m.Z)(function*(N){return(yield rt(N,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function qi(N){return new Promise((I,D)=>{const L=document.createElement("script");L.setAttribute("src",N),L.onload=I,L.onerror=de=>{const Oe=yt("internal-error");Oe.customData=de,D(Oe)},L.type="text/javascript",L.charset="UTF-8",function _u(){var N,I;return null!==(I=null===(N=document.getElementsByTagName("head"))||void 0===N?void 0:N[0])&&void 0!==I?I:document}().appendChild(L)})}function qa(N){return`__${N}${Math.floor(1e6*Math.random())}`}const da=1e12;class au{constructor(I){this.auth=I,this.counter=da,this._widgets=new Map}render(I,D){const L=this.counter;return this._widgets.set(L,new uc(I,this.auth.name,D||{})),this.counter++,L}reset(I){var D;const L=I||da;null===(D=this._widgets.get(L))||void 0===D||D.delete(),this._widgets.delete(L)}getResponse(I){var D;return(null===(D=this._widgets.get(I||da))||void 0===D?void 0:D.getResponse())||""}execute(I){var D=this;return(0,m.Z)(function*(){var L;return null===(L=D._widgets.get(I||da))||void 0===L||L.execute(),""})()}}class uc{constructor(I,D,L){this.params=L,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const de="string"==typeof I?document.getElementById(I):I;$(de,"argument-error",{appName:D}),this.container=de,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function bc(N){const I=[],D="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let L=0;L<N;L++)I.push(D.charAt(Math.floor(Math.random()*D.length)));return I.join("")}(50);const{callback:I,"expired-callback":D}=this.params;if(I)try{I(this.responseToken)}catch(L){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,D)try{D()}catch(L){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const jt=qa("rcb"),uu=new me(3e4,6e4);class us{constructor(){var I;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(I=Cn().grecaptcha)||void 0===I||!I.render)}load(I,D=""){return $(function Ma(N){return N.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(N)}(D),I,"argument-error"),this.shouldResolveImmediately(D)?Promise.resolve(Cn().grecaptcha):new Promise((L,de)=>{const Oe=Cn().setTimeout(()=>{de(yt(I,"network-request-failed"))},uu.get());Cn()[jt]=()=>{Cn().clearTimeout(Oe),delete Cn()[jt];const Jt=Cn().grecaptcha;if(!Jt)return void de(yt(I,"internal-error"));const Kn=Jt.render;Jt.render=(ur,si)=>{const zr=Kn(ur,si);return this.counter++,zr},this.hostLanguage=D,L(Jt)},qi(`https://www.google.com/recaptcha/api.js??${(0,H.xO)({onload:jt,render:"explicit",hl:D})}`).catch(()=>{clearTimeout(Oe),de(yt(I,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(I){var D;return!(null===(D=Cn().grecaptcha)||void 0===D||!D.render)&&(I===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ss{load(I){return(0,m.Z)(function*(){return new au(I)})()}clearedOneInstance(){}}const Gt="recaptcha",ku={theme:"light",type:"image"};class zo{constructor(I,D=Object.assign({},ku),L){this.parameters=D,this.type=Gt,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ti(L),this.isInvisible="invisible"===this.parameters.size,$(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const de="string"==typeof I?document.getElementById(I):I;$(de,this.auth,"argument-error"),this.container=de,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ss:new us,this.validateStartingState()}verify(){var I=this;return(0,m.Z)(function*(){I.assertNotDestroyed();const D=yield I.render(),L=I.getAssertedRecaptcha();return L.getResponse(D)||new Promise(Oe=>{const kt=Jt=>{Jt&&(I.tokenChangeListeners.delete(kt),Oe(Jt))};I.tokenChangeListeners.add(kt),I.isInvisible&&L.execute(D)})})()}render(){try{this.assertNotDestroyed()}catch(I){return Promise.reject(I)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(I=>{throw this.renderPromise=null,I})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(I=>{this.container.removeChild(I)})}validateStartingState(){$(!this.parameters.sitekey,this.auth,"argument-error"),$(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),$(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(I){return D=>{if(this.tokenChangeListeners.forEach(L=>L(D)),"function"==typeof I)I(D);else if("string"==typeof I){const L=Cn()[I];"function"==typeof L&&L(D)}}}assertNotDestroyed(){$(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var I=this;return(0,m.Z)(function*(){if(yield I.init(),!I.widgetId){let D=I.container;if(!I.isInvisible){const L=document.createElement("div");D.appendChild(L),D=L}I.widgetId=I.getAssertedRecaptcha().render(D,I.parameters)}return I.widgetId})()}init(){var I=this;return(0,m.Z)(function*(){$(gt()&&!As(),I.auth,"internal-error"),yield function Dc(){let N=null;return new Promise(I=>{"complete"!==document.readyState?(N=()=>I(),window.addEventListener("load",N)):I()}).catch(I=>{throw N&&window.removeEventListener("load",N),I})}(),I.recaptcha=yield I._recaptchaLoader.load(I.auth,I.auth.languageCode||void 0);const D=yield function Li(N){return Yn.apply(this,arguments)}(I.auth);$(D,I.auth,"internal-error"),I.parameters.sitekey=D})()}getAssertedRecaptcha(){return $(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Fu{constructor(I,D){this.verificationId=I,this.onConfirmation=D}confirm(I){const D=Xr._fromVerification(this.verificationId,I);return this.onConfirmation(D)}}function Tc(){return(Tc=(0,m.Z)(function*(N,I,D){const L=ti(N),de=yield Rc(L,I,(0,H.m9)(D));return new Fu(de,Oe=>Ni(L,Oe))})).apply(this,arguments)}function Ps(){return(Ps=(0,m.Z)(function*(N,I,D){const L=(0,H.m9)(N);yield jo(!1,L,"phone");const de=yield Rc(L.auth,I,(0,H.m9)(D));return new Fu(de,Oe=>Ki(L,Oe))})).apply(this,arguments)}function Co(){return(Co=(0,m.Z)(function*(N,I,D){const L=(0,H.m9)(N),de=yield Rc(L.auth,I,(0,H.m9)(D));return new Fu(de,Oe=>Zs(L,Oe))})).apply(this,arguments)}function Rc(N,I,D){return ha.apply(this,arguments)}function ha(){return ha=(0,m.Z)(function*(N,I,D){var L;const de=yield D.verify();try{let Oe;if($("string"==typeof de,N,"argument-error"),$(D.type===Gt,N,"argument-error"),Oe="string"==typeof I?{phoneNumber:I}:I,"session"in Oe){const kt=Oe.session;if("phoneNumber"in Oe)return $("enroll"===kt.type,N,"internal-error"),(yield function Nu(N,I){return rt(N,"POST","/v2/accounts/mfaEnrollment:start",ke(N,I))}(N,{idToken:kt.credential,phoneEnrollmentInfo:{phoneNumber:Oe.phoneNumber,recaptchaToken:de}})).phoneSessionInfo.sessionInfo;{$("signin"===kt.type,N,"internal-error");const Jt=(null===(L=Oe.multiFactorHint)||void 0===L?void 0:L.uid)||Oe.multiFactorUid;return $(Jt,N,"missing-multi-factor-info"),(yield function Ri(N,I){return rt(N,"POST","/v2/accounts/mfaSignIn:start",ke(N,I))}(N,{mfaPendingCredential:kt.credential,mfaEnrollmentId:Jt,phoneSignInInfo:{recaptchaToken:de}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:kt}=yield function Ht(N,I){return fn.apply(this,arguments)}(N,{phoneNumber:Oe.phoneNumber,recaptchaToken:de});return kt}}finally{D._reset()}}),ha.apply(this,arguments)}function Na(){return(Na=(0,m.Z)(function*(N,I){yield lo((0,H.m9)(N),I)})).apply(this,arguments)}let Lu=(()=>{class N{constructor(D){this.providerId=N.PROVIDER_ID,this.auth=ti(D)}verifyPhoneNumber(D,L){return Rc(this.auth,D,(0,H.m9)(L))}static credential(D,L){return Xr._fromVerification(D,L)}static credentialFromResult(D){return N.credentialFromTaggedObject(D)}static credentialFromError(D){return N.credentialFromTaggedObject(D.customData||{})}static credentialFromTaggedObject({_tokenResponse:D}){if(!D)return null;const{phoneNumber:L,temporaryProof:de}=D;return L&&de?Xr._fromTokenResponse(L,de):null}}return N.PROVIDER_ID="phone",N.PHONE_SIGN_IN_METHOD="phone",N})();function to(N,I){return I?ut(I):($(N._popupRedirectResolver,N,"argument-error"),N._popupRedirectResolver)}class Qu extends Oi{constructor(I){super("custom","custom"),this.params=I}_getIdTokenResponse(I){return Kr(I,this._buildIdpRequest())}_linkToIdToken(I,D){return Kr(I,this._buildIdpRequest(D))}_getReauthenticationResolver(I){return Kr(I,this._buildIdpRequest())}_buildIdpRequest(I){const D={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return I&&(D.idToken=I),D}}function fa(N){return os(N.auth,new Qu(N),N.bypassAuthState)}function Ca(N){const{auth:I,user:D}=N;return $(D,I,"internal-error"),qs(D,new Qu(N),N.bypassAuthState)}function ks(N){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,m.Z)(function*(N){const{auth:I,user:D}=N;return $(D,I,"internal-error"),lo(D,new Qu(N),N.bypassAuthState)})).apply(this,arguments)}class so{constructor(I,D,L,de,Oe=!1){this.auth=I,this.resolver=L,this.user=de,this.bypassAuthState=Oe,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(D)?D:[D]}execute(){var I=this;return new Promise(function(){var D=(0,m.Z)(function*(L,de){I.pendingPromise={resolve:L,reject:de};try{I.eventManager=yield I.resolver._initialize(I.auth),yield I.onExecution(),I.eventManager.registerConsumer(I)}catch(Oe){I.reject(Oe)}});return function(L,de){return D.apply(this,arguments)}}())}onAuthEvent(I){var D=this;return(0,m.Z)(function*(){const{urlResponse:L,sessionId:de,postBody:Oe,tenantId:kt,error:Jt,type:Kn}=I;if(Jt)return void D.reject(Jt);const ur={auth:D.auth,requestUri:L,sessionId:de,tenantId:kt||void 0,postBody:Oe||void 0,user:D.user,bypassAuthState:D.bypassAuthState};try{D.resolve(yield D.getIdpTask(Kn)(ur))}catch(si){D.reject(si)}})()}onError(I){this.reject(I)}getIdpTask(I){switch(I){case"signInViaPopup":case"signInViaRedirect":return fa;case"linkViaPopup":case"linkViaRedirect":return ks;case"reauthViaPopup":case"reauthViaRedirect":return Ca;default:At(this.auth,"internal-error")}}resolve(I){Qe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(I),this.unregisterAndCleanUp()}reject(I){Qe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(I),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Za=new me(2e3,1e4);function Ro(){return(Ro=(0,m.Z)(function*(N,I,D){const L=ti(N);Be(N,I,ns);const de=to(L,D);return new ka(L,"signInViaPopup",I,de).executeNotNull()})).apply(this,arguments)}function cc(){return(cc=(0,m.Z)(function*(N,I,D){const L=(0,H.m9)(N);Be(L.auth,I,ns);const de=to(L.auth,D);return new ka(L.auth,"reauthViaPopup",I,de,L).executeNotNull()})).apply(this,arguments)}function Oo(){return(Oo=(0,m.Z)(function*(N,I,D){const L=(0,H.m9)(N);Be(L.auth,I,ns);const de=to(L.auth,D);return new ka(L.auth,"linkViaPopup",I,de,L).executeNotNull()})).apply(this,arguments)}let ka=(()=>{class N extends so{constructor(D,L,de,Oe,kt){super(D,L,Oe,kt),this.provider=de,this.authWindow=null,this.pollId=null,N.currentPopupAction&&N.currentPopupAction.cancel(),N.currentPopupAction=this}executeNotNull(){var D=this;return(0,m.Z)(function*(){const L=yield D.execute();return $(L,D.auth,"internal-error"),L})()}onExecution(){var D=this;return(0,m.Z)(function*(){Qe(1===D.filter.length,"Popup operations only handle one event");const L=Hr();D.authWindow=yield D.resolver._openPopup(D.auth,D.provider,D.filter[0],L),D.authWindow.associatedEvent=L,D.resolver._originValidation(D.auth).catch(de=>{D.reject(de)}),D.resolver._isIframeWebStorageSupported(D.auth,de=>{de||D.reject(yt(D.auth,"web-storage-unsupported"))}),D.pollUserCancellation()})()}get eventId(){var D;return(null===(D=this.authWindow)||void 0===D?void 0:D.associatedEvent)||null}cancel(){this.reject(yt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,N.currentPopupAction=null}pollUserCancellation(){const D=()=>{var L,de;this.pollId=null!==(de=null===(L=this.authWindow)||void 0===L?void 0:L.window)&&void 0!==de&&de.closed?window.setTimeout(()=>{this.pollId=null,this.reject(yt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(D,Za.get())};D()}}return N.currentPopupAction=null,N})();const ds="pendingRedirect",F=new Map;class B extends so{constructor(I,D,L=!1){super(I,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],D,void 0,L),this.eventId=null}execute(){var I=()=>super.execute,D=this;return(0,m.Z)(function*(){let L=F.get(D.auth._key());if(!L){try{const Oe=(yield function O(N,I){return V.apply(this,arguments)}(D.resolver,D.auth))?yield I().call(D):null;L=()=>Promise.resolve(Oe)}catch(de){L=()=>Promise.reject(de)}F.set(D.auth._key(),L)}return D.bypassAuthState||F.set(D.auth._key(),()=>Promise.resolve(null)),L()})()}onAuthEvent(I){var D=()=>super.onAuthEvent,L=this;return(0,m.Z)(function*(){if("signInViaRedirect"===I.type)return D().call(L,I);if("unknown"!==I.type){if(I.eventId){const de=yield L.auth._redirectUserForId(I.eventId);if(de)return L.user=de,D().call(L,I);L.resolve(null)}}else L.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function V(){return(V=(0,m.Z)(function*(N,I){const D=On(I),L=tn(N);if(!(yield L._isAvailable()))return!1;const de="true"===(yield L._get(D));return yield L._remove(D),de})).apply(this,arguments)}function ne(N,I){return _e.apply(this,arguments)}function _e(){return(_e=(0,m.Z)(function*(N,I){return tn(N)._set(On(I),"true")})).apply(this,arguments)}function Tt(N,I){F.set(N._key(),I)}function tn(N){return ut(N._redirectPersistence)}function On(N){return ht(ds,N.config.apiKey,N.name)}function ar(N,I,D){return function or(N,I,D){return K.apply(this,arguments)}(N,I,D)}function K(){return(K=(0,m.Z)(function*(N,I,D){const L=ti(N);Be(N,I,ns),yield L._initializationPromise;const de=to(L,D);return yield ne(de,L),de._openRedirect(L,I,"signInViaRedirect")})).apply(this,arguments)}function oe(N,I,D){return function Ee(N,I,D){return dt.apply(this,arguments)}(N,I,D)}function dt(){return(dt=(0,m.Z)(function*(N,I,D){const L=(0,H.m9)(N);Be(L.auth,I,ns),yield L.auth._initializationPromise;const de=to(L.auth,D);yield ne(de,L.auth);const Oe=yield nr(L);return de._openRedirect(L.auth,I,"reauthViaRedirect",Oe)})).apply(this,arguments)}function Nt(N,I,D){return function zt(N,I,D){return xn.apply(this,arguments)}(N,I,D)}function xn(){return(xn=(0,m.Z)(function*(N,I,D){const L=(0,H.m9)(N);Be(L.auth,I,ns),yield L.auth._initializationPromise;const de=to(L.auth,D);yield jo(!1,L,I.providerId),yield ne(de,L.auth);const Oe=yield nr(L);return de._openRedirect(L.auth,I,"linkViaRedirect",Oe)})).apply(this,arguments)}function vr(){return(vr=(0,m.Z)(function*(N,I){return yield ti(N)._initializationPromise,Pr(N,I,!1)})).apply(this,arguments)}function Pr(N,I){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,m.Z)(function*(N,I,D=!1){const L=ti(N),de=to(L,I),kt=yield new B(L,de,D).execute();return kt&&!D&&(delete kt.user._redirectEventId,yield L._persistUserIfCurrent(kt.user),yield L._setRedirectUser(null,I)),kt})).apply(this,arguments)}function nr(N){return mi.apply(this,arguments)}function mi(){return(mi=(0,m.Z)(function*(N){const I=Hr(`${N.uid}:::`);return N._redirectEventId=I,yield N.auth._setRedirectUser(N),yield N.auth._persistUserIfCurrent(N),I})).apply(this,arguments)}class ec{constructor(I){this.auth=I,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(I){this.consumers.add(I),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,I)&&(this.sendToConsumer(this.queuedRedirectEvent,I),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(I){this.consumers.delete(I)}onEvent(I){if(this.hasEventBeenHandled(I))return!1;let D=!1;return this.consumers.forEach(L=>{this.isEventForConsumer(I,L)&&(D=!0,this.sendToConsumer(I,L),this.saveEventToCache(I))}),this.hasHandledPotentialRedirect||!function Ha(N){switch(N.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cu(N);default:return!1}}(I)||(this.hasHandledPotentialRedirect=!0,D||(this.queuedRedirectEvent=I,D=!0)),D}sendToConsumer(I,D){var L;if(I.error&&!Cu(I)){const de=(null===(L=I.error.code)||void 0===L?void 0:L.split("auth/")[1])||"internal-error";D.onError(yt(this.auth,de))}else D.onAuthEvent(I)}isEventForConsumer(I,D){const L=null===D.eventId||!!I.eventId&&I.eventId===D.eventId;return D.filter.includes(I.type)&&L}hasEventBeenHandled(I){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(lc(I))}saveEventToCache(I){this.cachedEventUids.add(lc(I)),this.lastProcessedEventTime=Date.now()}}function lc(N){return[N.type,N.eventId,N.sessionId,N.tenantId].filter(I=>I).join("-")}function Cu({type:N,error:I}){return"unknown"===N&&"auth/no-auth-event"===(null==I?void 0:I.code)}function Xa(N){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,m.Z)(function*(N,I={}){return rt(N,"GET","/v1/projects",I)})).apply(this,arguments)}const pl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nd=/^https?/;function cu(){return(cu=(0,m.Z)(function*(N){if(N.config.emulator)return;const{authorizedDomains:I}=yield Xa(N);for(const D of I)try{if(ml(D))return}catch(L){}At(N,"unauthorized-domain")})).apply(this,arguments)}function ml(N){const I=mt(),{protocol:D,hostname:L}=new URL(I);if(N.startsWith("chrome-extension://")){const kt=new URL(N);return""===kt.hostname&&""===L?"chrome-extension:"===D&&N.replace("chrome-extension://","")===I.replace("chrome-extension://",""):"chrome-extension:"===D&&kt.hostname===L}if(!nd.test(D))return!1;if(pl.test(N))return L===N;const de=N.replace(/\./g,"\\.");return new RegExp("^(.+\\."+de+"|"+de+")$","i").test(L)}const rd=new me(3e4,6e4);function id(){const N=Cn().___jsl;if(null!=N&&N.H)for(const I of Object.keys(N.H))if(N.H[I].r=N.H[I].r||[],N.H[I].L=N.H[I].L||[],N.H[I].r=[...N.H[I].L],N.CP)for(let D=0;D<N.CP.length;D++)N.CP[D]=null}let Oc=null;const Fl=new me(5e3,15e3),es="__/auth/iframe",od="emulator/auth/iframe",Fa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sd(N){const I=N.config;$(I.authDomain,N,"auth-domain-config-required");const D=I.emulator?te(I,od):`https://${N.config.authDomain}/${es}`,L={apiKey:I.apiKey,appName:N.name,v:he.SDK_VERSION},de=Yo.get(N.config.apiHost);de&&(L.eid=de);const Oe=N._getFrameworks();return Oe.length&&(L.fw=Oe.join(",")),`${D}?${(0,H.xO)(L).slice(1)}`}function Ia(){return Ia=(0,m.Z)(function*(N){const I=yield function yl(N){return Oc=Oc||function vl(N){return new Promise((I,D)=>{var L,de,Oe;function kt(){id(),gapi.load("gapi.iframes",{callback:()=>{I(gapi.iframes.getContext())},ontimeout:()=>{id(),D(yt(N,"network-request-failed"))},timeout:rd.get()})}if(null!==(de=null===(L=Cn().gapi)||void 0===L?void 0:L.iframes)&&void 0!==de&&de.Iframe)I(gapi.iframes.getContext());else{if(null===(Oe=Cn().gapi)||void 0===Oe||!Oe.load){const Jt=qa("iframefcb");return Cn()[Jt]=()=>{gapi.load?kt():D(yt(N,"network-request-failed"))},qi(`https://apis.google.com/js/api.js?onload=${Jt}`).catch(Kn=>D(Kn))}kt()}}).catch(I=>{throw Oc=null,I})}(N),Oc}(N),D=Cn().gapi;return $(D,N,"internal-error"),I.open({where:document.body,url:sd(N),messageHandlersFilter:D.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fa,dontclear:!0},L=>new Promise(function(){var de=(0,m.Z)(function*(Oe,kt){yield L.restyle({setHideOnLeave:!1});const Jt=yt(N,"network-request-failed"),Kn=Cn().setTimeout(()=>{kt(Jt)},Fl.get());function ur(){Cn().clearTimeout(Kn),Oe(L)}L.ping(ur).then(ur,()=>{kt(Jt)})});return function(Oe,kt){return de.apply(this,arguments)}}()))}),Ia.apply(this,arguments)}const ta={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hc=500,no=600,Kc="_blank",Ll="http://localhost";class pa{constructor(I){this.window=I,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(I){}}}const pc="__/auth/handler",ad="emulator/auth/handler";function xa(N,I,D,L,de,Oe){$(N.config.authDomain,N,"auth-domain-config-required"),$(N.config.apiKey,N,"invalid-api-key");const kt={apiKey:N.config.apiKey,appName:N.name,authType:D,redirectUrl:L,v:he.SDK_VERSION,eventId:de};if(I instanceof ns){I.setDefaultLanguage(N.languageCode),kt.providerId=I.providerId||"",(0,H.xb)(I.getCustomParameters())||(kt.customParameters=JSON.stringify(I.getCustomParameters()));for(const[Kn,ur]of Object.entries(Oe||{}))kt[Kn]=ur}if(I instanceof Bo){const Kn=I.getScopes().filter(ur=>""!==ur);Kn.length>0&&(kt.scopes=Kn.join(","))}N.tenantId&&(kt.tid=N.tenantId);const Jt=kt;for(const Kn of Object.keys(Jt))void 0===Jt[Kn]&&delete Jt[Kn];return`${function Bu({config:N}){return N.emulator?te(N,ad):`https://${N.authDomain}/${pc}`}(N)}?${(0,H.xO)(Jt).slice(1)}`}const yo="webStorageSupport",gc=class Uu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gi,this._completeRedirectFn=Pr,this._overrideRedirectResult=Tt}_openPopup(I,D,L,de){var Oe=this;return(0,m.Z)(function*(){var kt;Qe(null===(kt=Oe.eventManagers[I._key()])||void 0===kt?void 0:kt.manager,"_initialize() not called before _openPopup()");const Jt=xa(I,D,L,mt(),de);return function Mc(N,I,D,L=hc,de=no){const Oe=Math.max((window.screen.availHeight-de)/2,0).toString(),kt=Math.max((window.screen.availWidth-L)/2,0).toString();let Jt="";const Kn=Object.assign(Object.assign({},ta),{width:L.toString(),height:de.toString(),top:Oe,left:kt}),ur=(0,H.z$)().toLowerCase();D&&(Jt=Or(ur)?Kc:D),Wn(ur)&&(I=I||Ll,Kn.scrollbars="yes");const si=Object.entries(Kn).reduce((Bs,[Du,Rl])=>`${Bs}${Du}=${Rl},`,"");if(function wt(N=(0,H.z$)()){var I;return vt(N)&&!(null===(I=window.navigator)||void 0===I||!I.standalone)}(ur)&&"_self"!==Jt)return function fc(N,I){const D=document.createElement("a");D.href=N,D.target=I;const L=document.createEvent("MouseEvent");L.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),D.dispatchEvent(L)}(I||"",Jt),new pa(null);const zr=window.open(I||"",Jt,si);$(zr,N,"popup-blocked");try{zr.focus()}catch(Bs){}return new pa(zr)}(I,Jt,Hr())})()}_openRedirect(I,D,L,de){var Oe=this;return(0,m.Z)(function*(){return yield Oe._originValidation(I),function Xn(N){Cn().location.href=N}(xa(I,D,L,mt(),de)),new Promise(()=>{})})()}_initialize(I){const D=I._key();if(this.eventManagers[D]){const{manager:de,promise:Oe}=this.eventManagers[D];return de?Promise.resolve(de):(Qe(Oe,"If manager is not set, promise should be"),Oe)}const L=this.initAndGetManager(I);return this.eventManagers[D]={promise:L},L.catch(()=>{delete this.eventManagers[D]}),L}initAndGetManager(I){var D=this;return(0,m.Z)(function*(){const L=yield function dc(N){return Ia.apply(this,arguments)}(I),de=new ec(I);return L.register("authEvent",Oe=>($(null==Oe?void 0:Oe.authEvent,I,"invalid-auth-event"),{status:de.onEvent(Oe.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),D.eventManagers[I._key()]={manager:de},D.iframes[I._key()]=L,de})()}_isIframeWebStorageSupported(I,D){this.iframes[I._key()].send(yo,{type:yo},de=>{var Oe;const kt=null===(Oe=null==de?void 0:de[0])||void 0===Oe?void 0:Oe[yo];void 0!==kt&&D(!!kt),At(I,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(I){const D=I._key();return this.originValidationPromises[D]||(this.originValidationPromises[D]=function gl(N){return cu.apply(this,arguments)}(I)),this.originValidationPromises[D]}get _shouldInitProactively(){return Tn()||Cr()||vt()}};class bs{constructor(I){this.factorId=I}_process(I,D,L){switch(D.type){case"enroll":return this._finalizeEnroll(I,D.credential,L);case"signin":return this._finalizeSignIn(I,D.credential);default:return lt("unexpected MultiFactorSessionType")}}}class Nc extends bs{constructor(I){super("phone"),this.credential=I}static _fromCredential(I){return new Nc(I)}_finalizeEnroll(I,D,L){return function Pu(N,I){return rt(N,"POST","/v2/accounts/mfaEnrollment:finalize",ke(N,I))}(I,{idToken:D,displayName:L,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(I,D){return function Yc(N,I){return rt(N,"POST","/v2/accounts/mfaSignIn:finalize",ke(N,I))}(I,{mfaPendingCredential:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let La=(()=>{class N{constructor(){}static assertion(D){return Nc._fromCredential(D)}}return N.FACTOR_ID="phone",N})();var Iu="@firebase/auth";class _l{constructor(I){this.auth=I,this.internalListeners=new Map}getUid(){var I;return this.assertAuthConfigured(),(null===(I=this.auth.currentUser)||void 0===I?void 0:I.uid)||null}getToken(I){var D=this;return(0,m.Z)(function*(){return D.assertAuthConfigured(),yield D.auth._initializationPromise,D.auth.currentUser?{accessToken:yield D.auth.currentUser.getIdToken(I)}:null})()}addAuthTokenListener(I){if(this.assertAuthConfigured(),this.internalListeners.has(I))return;const D=this.auth.onIdTokenChanged(L=>{I((null==L?void 0:L.stsTokenManager.accessToken)||null)});this.internalListeners.set(I,D),this.updateProactiveRefresh()}removeAuthTokenListener(I){this.assertAuthConfigured();const D=this.internalListeners.get(I);D&&(this.internalListeners.delete(I),D(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function lu(){return window}(0,H.Pz)("authIdTokenMaxAge"),function Vu(N){(0,he._registerComponent)(new ye.wA("auth",(I,{options:D})=>{const L=I.getProvider("app").getImmediate(),de=I.getProvider("heartbeat"),{apiKey:Oe,authDomain:kt}=L.options;return((Jt,Kn)=>{$(Oe&&!Oe.includes(":"),"invalid-api-key",{appName:Jt.name}),$(!(null!=kt&&kt.includes(":")),"argument-error",{appName:Jt.name});const ur={apiKey:Oe,authDomain:kt,clientPlatform:N,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fi(N)},si=new Ei(Jt,Kn,ur);return function pt(N,I){const D=(null==I?void 0:I.persistence)||[],L=(Array.isArray(D)?D:[D]).map(ut);null!=I&&I.errorMap&&N._updateErrorMap(I.errorMap),N._initializeWithPersistence(L,null==I?void 0:I.popupRedirectResolver)}(si,D),si})(L,de)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((I,D,L)=>{I.getProvider("auth-internal").initialize()})),(0,he._registerComponent)(new ye.wA("auth-internal",I=>{const D=ti(I.getProvider("auth").getImmediate());return new _l(D)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,he.registerVersion)(Iu,"0.21.3",function na(N){switch(N){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(N)),(0,he.registerVersion)(Iu,"0.21.3","esm2017")}("Browser");const Sd=2e3;function Ul(){return Ul=(0,m.Z)(function*(N,I,D){var L;const{BuildInfo:de}=lu();Qe(I.sessionId,"AuthEvent did not contain a session ID");const Oe=yield function po(N){return du.apply(this,arguments)}(I.sessionId),kt={};return vt()?kt.ibi=de.packageName:fr()?kt.apn=de.packageName:At(N,"operation-not-supported-in-this-environment"),de.displayName&&(kt.appDisplayName=de.displayName),kt.sessionId=Oe,xa(N,D,I.type,void 0,null!==(L=I.eventId)&&void 0!==L?L:void 0,kt)}),Ul.apply(this,arguments)}function El(){return(El=(0,m.Z)(function*(N){const{BuildInfo:I}=lu(),D={};vt()?D.iosBundleId=I.packageName:fr()?D.androidPackageName=I.packageName:At(N,"operation-not-supported-in-this-environment"),yield Xa(N,D)})).apply(this,arguments)}function xu(){return(xu=(0,m.Z)(function*(N,I,D){const{cordova:L}=lu();let de=()=>{};try{yield new Promise((Oe,kt)=>{let Jt=null;function Kn(){var zr;Oe();const Bs=null===(zr=L.plugins.browsertab)||void 0===zr?void 0:zr.close;"function"==typeof Bs&&Bs(),"function"==typeof(null==D?void 0:D.close)&&D.close()}function ur(){Jt||(Jt=window.setTimeout(()=>{kt(yt(N,"redirect-cancelled-by-user"))},Sd))}function si(){"visible"===(null==document?void 0:document.visibilityState)&&ur()}I.addPassiveListener(Kn),document.addEventListener("resume",ur,!1),fr()&&document.addEventListener("visibilitychange",si,!1),de=()=>{I.removePassiveListener(Kn),document.removeEventListener("resume",ur,!1),document.removeEventListener("visibilitychange",si,!1),Jt&&window.clearTimeout(Jt)}})}finally{de()}})).apply(this,arguments)}function du(){return(du=(0,m.Z)(function*(N){const I=function wl(N){if(Qe(/[0-9a-zA-Z]+/.test(N),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(N);const I=new ArrayBuffer(N.length),D=new Uint8Array(I);for(let L=0;L<N.length;L++)D[L]=N.charCodeAt(L);return D}(N),D=yield crypto.subtle.digest("SHA-256",I);return Array.from(new Uint8Array(D)).map(de=>de.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const hu=20;class ga extends ec{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(I=>{this.resolveInialized=I})}addPassiveListener(I){this.passiveListeners.add(I)}removePassiveListener(I){this.passiveListeners.delete(I)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(I){return this.resolveInialized(),this.passiveListeners.forEach(D=>D(I)),super.onEvent(I)}initialized(){var I=this;return(0,m.Z)(function*(){yield I.initPromise})()}}function Zc(N){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,m.Z)(function*(N){const I=yield Fc()._get(ko(N));return I&&(yield Fc()._remove(ko(N))),I})).apply(this,arguments)}function $l(){const N=[],I="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<hu;D++){const L=Math.floor(Math.random()*I.length);N.push(I.charAt(L))}return N.join("")}function Fc(){return ut(hn)}function ko(N){return ht("authEvent",N.config.apiKey,N.name)}function Lc(N){if(null==N||!N.includes("?"))return{};const[I,...D]=N.split("?");return(0,H.zd)(D.join("?"))}const Au=class yc{constructor(){this._redirectPersistence=gi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Pr,this._overrideRedirectResult=Tt}_initialize(I){var D=this;return(0,m.Z)(function*(){const L=I._key();let de=D.eventManagers.get(L);return de||(de=new ga(I),D.eventManagers.set(L,de),D.attachCallbackListeners(I,de)),de})()}_openPopup(I){At(I,"operation-not-supported-in-this-environment")}_openRedirect(I,D,L,de){var Oe=this;return(0,m.Z)(function*(){!function $u(N){var I,D,L,de,Oe,kt,Jt,Kn,ur,si;const zr=lu();$("function"==typeof(null===(I=null==zr?void 0:zr.universalLinks)||void 0===I?void 0:I.subscribe),N,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),$(typeof(null===(D=null==zr?void 0:zr.BuildInfo)||void 0===D?void 0:D.packageName)<"u",N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),$("function"==typeof(null===(Oe=null===(de=null===(L=null==zr?void 0:zr.cordova)||void 0===L?void 0:L.plugins)||void 0===de?void 0:de.browsertab)||void 0===Oe?void 0:Oe.openUrl),N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(Kn=null===(Jt=null===(kt=null==zr?void 0:zr.cordova)||void 0===kt?void 0:kt.plugins)||void 0===Jt?void 0:Jt.browsertab)||void 0===Kn?void 0:Kn.isAvailable),N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(si=null===(ur=null==zr?void 0:zr.cordova)||void 0===ur?void 0:ur.InAppBrowser)||void 0===si?void 0:si.open),N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(I);const kt=yield Oe._initialize(I);yield kt.initialized(),kt.resetRedirect(),function Ae(){F.clear()}(),yield Oe._originValidation(I);const Jt=function Vl(N,I,D=null){return{type:I,eventId:D,urlResponse:null,sessionId:$l(),postBody:null,tenantId:N.tenantId,error:yt(N,"no-auth-event")}}(I,L,de);yield function vc(N,I){return Fc()._set(ko(N),I)}(I,Jt);const Kn=yield function qc(N,I,D){return Ul.apply(this,arguments)}(I,Jt,D),ur=yield function ld(N){const{cordova:I}=lu();return new Promise(D=>{I.plugins.browsertab.isAvailable(L=>{let de=null;L?I.plugins.browsertab.openUrl(N):de=I.InAppBrowser.open(N,function Je(N=(0,H.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(N)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(N)}()?"_blank":"_system","location=yes"),D(de)})})}(Kn);return function bd(N,I,D){return xu.apply(this,arguments)}(I,kt,ur)})()}_isIframeWebStorageSupported(I,D){throw new Error("Method not implemented.")}_originValidation(I){const D=I._key();return this.originValidationPromises[D]||(this.originValidationPromises[D]=function cd(N){return El.apply(this,arguments)}(I)),this.originValidationPromises[D]}attachCallbackListeners(I,D){const{universalLinks:L,handleOpenURL:de,BuildInfo:Oe}=lu(),kt=setTimeout((0,m.Z)(function*(){yield Zc(I),D.onEvent(Bc())}),500),Jt=function(){var si=(0,m.Z)(function*(zr){clearTimeout(kt);const Bs=yield Zc(I);let Du=null;Bs&&null!=zr&&zr.url&&(Du=function Io(N,I){var D,L;const de=function tc(N){const I=Lc(N),D=I.link?decodeURIComponent(I.link):void 0,L=Lc(D).link,de=I.deep_link_id?decodeURIComponent(I.deep_link_id):void 0;return Lc(de).link||de||L||D||N}(I);if(de.includes("/__/auth/callback")){const Oe=Lc(de),kt=Oe.firebaseError?function Dd(N){try{return JSON.parse(N)}catch(I){return null}}(decodeURIComponent(Oe.firebaseError)):null,Jt=null===(L=null===(D=null==kt?void 0:kt.code)||void 0===D?void 0:D.split("auth/"))||void 0===L?void 0:L[1],Kn=Jt?yt(Jt):null;return Kn?{type:N.type,eventId:N.eventId,tenantId:N.tenantId,error:Kn,urlResponse:null,sessionId:null,postBody:null}:{type:N.type,eventId:N.eventId,tenantId:N.tenantId,sessionId:N.sessionId,urlResponse:de,postBody:null}}return null}(Bs,zr.url)),D.onEvent(Du||Bc())});return function(Bs){return si.apply(this,arguments)}}();typeof L<"u"&&"function"==typeof L.subscribe&&L.subscribe(null,Jt);const Kn=de,ur=`${Oe.packageName.toLowerCase()}://`;lu().handleOpenURL=function(){var si=(0,m.Z)(function*(zr){if(zr.toLowerCase().startsWith(ur)&&Jt({url:zr}),"function"==typeof Kn)try{Kn(zr)}catch(Bs){console.error(Bs)}});return function(zr){return si.apply(this,arguments)}}()}};function Bc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:yt("no-auth-event")}}const nc=1e3;function Qc(){var N;return(null===(N=null==self?void 0:self.location)||void 0===N?void 0:N.protocol)||null}function ro(N=(0,H.z$)()){return!("file:"!==Qc()&&"ionic:"!==Qc()&&"capacitor:"!==Qc()||!N.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ko(){try{const N=self.localStorage,I=Hr();if(N)return N.setItem(I,"1"),N.removeItem(I),!function jl(N=(0,H.z$)()){return function _c(){return(0,H.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Wa(N=(0,H.z$)()){return/Edge\/\d+/.test(N)}(N)}()||(0,H.hl)()}catch(N){return Su()&&(0,H.hl)()}return!1}function Su(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function fu(){return(function Is(){return"http:"===Qc()||"https:"===Qc()}()||(0,H.ru)()||ro())&&!function Ja(){return(0,H.b$)()||(0,H.UG)()}()&&Ko()&&!Su()}function Il(){return ro()&&typeof document<"u"}function Jc(){return(Jc=(0,m.Z)(function*(){return!!Il()&&new Promise(N=>{const I=setTimeout(()=>{N(!1)},nc);document.addEventListener("deviceready",()=>{clearTimeout(I),N(!0)})})})).apply(this,arguments)}const Aa={LOCAL:"local",NONE:"none",SESSION:"session"},Hu=$,xi="persistence";function tl(N){return bu.apply(this,arguments)}function bu(){return(bu=(0,m.Z)(function*(N){yield N._initializationPromise;const I=Vc(),D=ht(xi,N.config.apiKey,N.name);I&&I.setItem(D,N._getPersistence())})).apply(this,arguments)}function Vc(){var N;try{return(null===(N=function el(){return typeof window<"u"?window:null}())||void 0===N?void 0:N.sessionStorage)||null}catch(I){return null}}const $c=$;class eu{constructor(){this.browserResolver=ut(gc),this.cordovaResolver=ut(Au),this.underlyingResolver=null,this._redirectPersistence=gi,this._completeRedirectFn=Pr,this._overrideRedirectResult=Tt}_initialize(I){var D=this;return(0,m.Z)(function*(){return yield D.selectUnderlyingResolver(),D.assertedUnderlyingResolver._initialize(I)})()}_openPopup(I,D,L,de){var Oe=this;return(0,m.Z)(function*(){return yield Oe.selectUnderlyingResolver(),Oe.assertedUnderlyingResolver._openPopup(I,D,L,de)})()}_openRedirect(I,D,L,de){var Oe=this;return(0,m.Z)(function*(){return yield Oe.selectUnderlyingResolver(),Oe.assertedUnderlyingResolver._openRedirect(I,D,L,de)})()}_isIframeWebStorageSupported(I,D){this.assertedUnderlyingResolver._isIframeWebStorageSupported(I,D)}_originValidation(I){return this.assertedUnderlyingResolver._originValidation(I)}get _shouldInitProactively(){return Il()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return $c(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var I=this;return(0,m.Z)(function*(){if(I.underlyingResolver)return;const D=yield function Hs(){return Jc.apply(this,arguments)}();I.underlyingResolver=D?I.cordovaResolver:I.browserResolver})()}}function Al(N){return N.unwrap()}function bl(N){return dd(N)}function dd(N){const{_tokenResponse:I}=N instanceof H.ZR?N.customData:N;if(!I)return null;if(!(N instanceof H.ZR)&&"temporaryProof"in I&&"phoneNumber"in I)return Lu.credentialFromResult(N);const D=I.providerId;if(!D||D===$e.PASSWORD)return null;let L;switch(D){case $e.GOOGLE:L=fs;break;case $e.FACEBOOK:L=Zo;break;case $e.GITHUB:L=ps;break;case $e.TWITTER:L=Ua;break;default:const{oauthIdToken:de,oauthAccessToken:Oe,oauthTokenSecret:kt,pendingToken:Jt,nonce:Kn}=I;return Oe||kt||de||Jt?Jt?D.startsWith("saml.")?gs._create(D,Jt):Ft._fromParams({providerId:D,signInMethod:D,pendingToken:Jt,idToken:de,accessToken:Oe}):new Mo(D).credential({idToken:de,accessToken:Oe,rawNonce:Kn}):null}return N instanceof H.ZR?L.credentialFromError(N):L.credentialFromResult(N)}function hs(N,I){return I.catch(D=>{throw D instanceof H.ZR&&function Ec(N,I){var D;const L=null===(D=I.customData)||void 0===D?void 0:D._tokenResponse;if("auth/multi-factor-auth-required"===(null==I?void 0:I.code))I.resolver=new wc(N,function Go(N,I){var D;const L=(0,H.m9)(N),de=I;return $(I.customData.operationType,L,"argument-error"),$(null===(D=de.customData._serverResponse)||void 0===D?void 0:D.mfaPendingCredential,L,"argument-error"),Mu._fromError(L,de)}(N,I));else if(L){const de=dd(I),Oe=I;de&&(Oe.credential=de,Oe.tenantId=L.tenantId||void 0,Oe.email=L.email||void 0,Oe.phoneNumber=L.phoneNumber||void 0)}}(N,D),D}).then(D=>{const de=D.user;return{operationType:D.operationType,credential:bl(D),additionalUserInfo:ws(D),user:tu.getOrCreate(de)}})}function hd(N,I){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,m.Z)(function*(N,I){const D=yield I;return{verificationId:D.verificationId,confirm:L=>hs(N,D.confirm(L))}})).apply(this,arguments)}class wc{constructor(I,D){this.resolver=D,this.auth=function Sl(N){return N.wrapped()}(I)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(I){return hs(Al(this.auth),this.resolver.resolveSignIn(I))}}class tu{constructor(I){this._delegate=I,this.multiFactor=function Ya(N){const I=(0,H.m9)(N);return ea.has(I)||ea.set(I,za._fromUser(I)),ea.get(I)}(I)}static getOrCreate(I){return tu.USER_MAP.has(I)||tu.USER_MAP.set(I,new tu(I)),tu.USER_MAP.get(I)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(I){return this._delegate.getIdTokenResult(I)}getIdToken(I){return this._delegate.getIdToken(I)}linkAndRetrieveDataWithCredential(I){return this.linkWithCredential(I)}linkWithCredential(I){var D=this;return(0,m.Z)(function*(){return hs(D.auth,Ki(D._delegate,I))})()}linkWithPhoneNumber(I,D){var L=this;return(0,m.Z)(function*(){return hd(L.auth,function Eu(N,I,D){return Ps.apply(this,arguments)}(L._delegate,I,D))})()}linkWithPopup(I){var D=this;return(0,m.Z)(function*(){return hs(D.auth,function fl(N,I,D){return Oo.apply(this,arguments)}(D._delegate,I,eu))})()}linkWithRedirect(I){var D=this;return(0,m.Z)(function*(){return yield tl(ti(D.auth)),Nt(D._delegate,I,eu)})()}reauthenticateAndRetrieveDataWithCredential(I){return this.reauthenticateWithCredential(I)}reauthenticateWithCredential(I){var D=this;return(0,m.Z)(function*(){return hs(D.auth,Zs(D._delegate,I))})()}reauthenticateWithPhoneNumber(I,D){return hd(this.auth,function wu(N,I,D){return Co.apply(this,arguments)}(this._delegate,I,D))}reauthenticateWithPopup(I){return hs(this.auth,function Ju(N,I,D){return cc.apply(this,arguments)}(this._delegate,I,eu))}reauthenticateWithRedirect(I){var D=this;return(0,m.Z)(function*(){return yield tl(ti(D.auth)),oe(D._delegate,I,eu)})()}sendEmailVerification(I){return function li(N,I){return ee.apply(this,arguments)}(this._delegate,I)}unlink(I){var D=this;return(0,m.Z)(function*(){return yield function co(N,I){return vs.apply(this,arguments)}(D._delegate,I),D})()}updateEmail(I){return function lr(N,I){return Nr((0,H.m9)(N),I,null)}(this._delegate,I)}updatePassword(I){return function Qn(N,I){return Nr((0,H.m9)(N),null,I)}(this._delegate,I)}updatePhoneNumber(I){return function Xu(N,I){return Na.apply(this,arguments)}(this._delegate,I)}updateProfile(I){return function Xt(N,I){return dn.apply(this,arguments)}(this._delegate,I)}verifyBeforeUpdateEmail(I,D){return function ie(N,I,D){return Te.apply(this,arguments)}(this._delegate,I,D)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}tu.USER_MAP=new WeakMap;const Gu=$;let $o=(()=>{class N{constructor(D,L){if(this.app=D,L.isInitialized())return this._delegate=L.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:de}=D.options;Gu(de,"invalid-api-key",{appName:D.name}),Gu(de,"invalid-api-key",{appName:D.name});const Oe=typeof window<"u"?eu:void 0;this._delegate=L.initialize({options:{persistence:ra(de,D.name),popupRedirectResolver:Oe}}),this._delegate._updateErrorMap(Ke),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?tu.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(D){this._delegate.languageCode=D}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(D){this._delegate.tenantId=D}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(D,L){!function pi(N,I,D){const L=ti(N);$(L._canInitEmulator,L,"emulator-config-failed"),$(/^https?:\/\//.test(I),L,"invalid-emulator-scheme");const de=!(null==D||!D.disableWarnings),Oe=ki(I),{host:kt,port:Jt}=function wo(N){const I=ki(N),D=/(\/\/)?([^?#/]+)/.exec(N.substr(I.length));if(!D)return{host:"",port:null};const L=D[2].split("@").pop()||"",de=/^(\[[^\]]+\])(:|$)/.exec(L);if(de){const Oe=de[1];return{host:Oe,port:Mr(L.substr(Oe.length+1))}}{const[Oe,kt]=L.split(":");return{host:Oe,port:Mr(kt)}}}(I);L.config.emulator={url:`${Oe}//${kt}${null===Jt?"":`:${Jt}`}/`},L.settings.appVerificationDisabledForTesting=!0,L.emulatorConfig=Object.freeze({host:kt,port:Jt,protocol:Oe.replace(":",""),options:Object.freeze({disableWarnings:de})}),de||function pr(){function N(){const I=document.createElement("p"),D=I.style;I.innerText="Running in emulator mode. Do not use with production credentials.",D.position="fixed",D.width="100%",D.backgroundColor="#ffffff",D.border=".1em solid #000000",D.color="#b50000",D.bottom="0px",D.left="0px",D.margin="0px",D.zIndex="10000",D.textAlign="center",I.classList.add("firebase-emulator-warning"),document.body.appendChild(I)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",N):N())}()}(this._delegate,D,L)}applyActionCode(D){return function xs(N,I){return Gi.apply(this,arguments)}(this._delegate,D)}checkActionCode(D){return Vs(this._delegate,D)}confirmPasswordReset(D,L){return function va(N,I,D){return Br.apply(this,arguments)}(this._delegate,D,L)}createUserWithEmailAndPassword(D,L){var de=this;return(0,m.Z)(function*(){return hs(de._delegate,function Es(N,I,D){return ss.apply(this,arguments)}(de._delegate,D,L))})()}fetchProvidersForEmail(D){return this.fetchSignInMethodsForEmail(D)}fetchSignInMethodsForEmail(D){return function Vn(N,I){return wr.apply(this,arguments)}(this._delegate,D)}isSignInWithEmailLink(D){return function S(N,I){const D=Os.parseLink(I);return"EMAIL_SIGNIN"===(null==D?void 0:D.operation)}(0,D)}getRedirectResult(){var D=this;return(0,m.Z)(function*(){Gu(fu(),D._delegate,"operation-not-supported-in-this-environment");const L=yield function _r(N,I){return vr.apply(this,arguments)}(D._delegate,eu);return L?hs(D._delegate,Promise.resolve(L)):{credential:null,user:null}})()}addFrameworkForLogging(D){!function qd(N,I){ti(N)._logFramework(I)}(this._delegate,D)}onAuthStateChanged(D,L,de){const{next:Oe,error:kt,complete:Jt}=ao(D,L,de);return this._delegate.onAuthStateChanged(Oe,kt,Jt)}onIdTokenChanged(D,L,de){const{next:Oe,error:kt,complete:Jt}=ao(D,L,de);return this._delegate.onIdTokenChanged(Oe,kt,Jt)}sendSignInLinkToEmail(D,L){return function w(N,I,D){return T.apply(this,arguments)}(this._delegate,D,L)}sendPasswordResetEmail(D,L){return function bo(N,I,D){return Fr.apply(this,arguments)}(this._delegate,D,L||void 0)}setPersistence(D){var L=this;return(0,m.Z)(function*(){let de;switch(function xl(N,I){Hu(Object.values(Aa).includes(I),N,"invalid-persistence-type"),(0,H.b$)()?Hu(I!==Aa.SESSION,N,"unsupported-persistence-type"):(0,H.UG)()?Hu(I===Aa.NONE,N,"unsupported-persistence-type"):Su()?Hu(I===Aa.NONE||I===Aa.LOCAL&&(0,H.hl)(),N,"unsupported-persistence-type"):Hu(I===Aa.NONE||Ko(),N,"unsupported-persistence-type")}(L._delegate,D),D){case Aa.SESSION:de=gi;break;case Aa.LOCAL:de=(yield ut(Oa)._isAvailable())?Oa:hn;break;case Aa.NONE:de=ot;break;default:return At("argument-error",{appName:L._delegate.name})}return L._delegate.setPersistence(de)})()}signInAndRetrieveDataWithCredential(D){return this.signInWithCredential(D)}signInAnonymously(){return hs(this._delegate,function cs(N){return rs.apply(this,arguments)}(this._delegate))}signInWithCredential(D){return hs(this._delegate,Ni(this._delegate,D))}signInWithCustomToken(D){return hs(this._delegate,function Ms(N,I){return io.apply(this,arguments)}(this._delegate,D))}signInWithEmailAndPassword(D,L){return hs(this._delegate,function Y(N,I,D){return Ni((0,H.m9)(N),xo.credential(I,D))}(this._delegate,D,L))}signInWithEmailLink(D,L){return hs(this._delegate,function j(N,I,D){return ve.apply(this,arguments)}(this._delegate,D,L))}signInWithPhoneNumber(D,L){return hd(this._delegate,function Bi(N,I,D){return Tc.apply(this,arguments)}(this._delegate,D,L))}signInWithPopup(D){var L=this;return(0,m.Z)(function*(){return Gu(fu(),L._delegate,"operation-not-supported-in-this-environment"),hs(L._delegate,function Fs(N,I,D){return Ro.apply(this,arguments)}(L._delegate,D,eu))})()}signInWithRedirect(D){var L=this;return(0,m.Z)(function*(){return Gu(fu(),L._delegate,"operation-not-supported-in-this-environment"),yield tl(L._delegate),ar(L._delegate,D,eu)})()}updateCurrentUser(D){return this._delegate.updateCurrentUser(D)}verifyPasswordResetCode(D){return function No(N,I){return $s.apply(this,arguments)}(this._delegate,D)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return N.Persistence=Aa,N})();function ao(N,I,D){let L=N;"function"!=typeof N&&({next:L,error:I,complete:D}=N);const de=L;return{next:kt=>de(kt&&tu.getOrCreate(kt)),error:I,complete:D}}function ra(N,I){const D=function ju(N,I){const D=Vc();if(!D)return[];const L=ht(xi,N,I);switch(D.getItem(L)){case Aa.NONE:return[ot];case Aa.LOCAL:return[Oa,gi];case Aa.SESSION:return[gi];default:return[]}}(N,I);if(typeof self<"u"&&!D.includes(Oa)&&D.push(Oa),typeof window<"u")for(const L of[hn,gi])D.includes(L)||D.push(L);return D.includes(ot)||D.push(ot),D}class Ds{constructor(){this.providerId="phone",this._delegate=new Lu(Al(J.Z.auth()))}static credential(I,D){return Lu.credential(I,D)}verifyPhoneNumber(I,D){return this._delegate.verifyPhoneNumber(I,D)}unwrap(){return this._delegate}}Ds.PHONE_SIGN_IN_METHOD=Lu.PHONE_SIGN_IN_METHOD,Ds.PROVIDER_ID=Lu.PROVIDER_ID;const Fo=$;class ts{constructor(I,D,L=J.Z.app()){var de;Fo(null===(de=L.options)||void 0===de?void 0:de.apiKey,"invalid-api-key",{appName:L.name}),this._delegate=new zo(I,D,L.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Tl(N){N.INTERNAL.registerComponent(new ye.wA("auth-compat",I=>{const D=I.getProvider("app-compat").getImmediate(),L=I.getProvider("auth");return new $o(D,L)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:xe_EMAIL_SIGNIN,PASSWORD_RESET:xe_PASSWORD_RESET,RECOVER_EMAIL:xe_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:xe_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:xe_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:xe_VERIFY_EMAIL}},EmailAuthProvider:xo,FacebookAuthProvider:Zo,GithubAuthProvider:ps,GoogleAuthProvider:fs,OAuthProvider:Mo,SAMLAuthProvider:Xo,PhoneAuthProvider:Ds,PhoneMultiFactorGenerator:La,RecaptchaVerifier:ts,TwitterAuthProvider:Ua,Auth:$o,AuthCredential:Oi,Error:H.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),N.registerVersion("@firebase/auth-compat","0.3.3")}(J.Z)},8766:(pn,Pe,U)=>{"use strict";U.d(Pe,{Lj:()=>At,X3:()=>ct});var m=U(5861);const J=($,lt)=>lt.some(Qe=>$ instanceof Qe);let H,he;const ye=new WeakMap,be=new WeakMap,$e=new WeakMap,ge=new WeakMap,De=new WeakMap;let Xe={get($,lt,Qe){if($ instanceof IDBTransaction){if("done"===lt)return be.get($);if("objectStoreNames"===lt)return $.objectStoreNames||$e.get($);if("store"===lt)return Qe.objectStoreNames[1]?void 0:Qe.objectStore(Qe.objectStoreNames[0])}return Fe($[lt])},set:($,lt,Qe)=>($[lt]=Qe,!0),has:($,lt)=>$ instanceof IDBTransaction&&("done"===lt||"store"===lt)||lt in $};function We($){return"function"==typeof $?function Lt($){return $!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function we(){return he||(he=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes($)?function(...lt){return $.apply(Ce(this),lt),Fe(ye.get(this))}:function(...lt){return Fe($.apply(Ce(this),lt))}:function(lt,...Qe){const qe=$.call(Ce(this),lt,...Qe);return $e.set(qe,lt.sort?lt.sort():[lt]),Fe(qe)}}($):($ instanceof IDBTransaction&&function Ne($){if(be.has($))return;const lt=new Promise((Qe,qe)=>{const ut=()=>{$.removeEventListener("complete",ft),$.removeEventListener("error",pt),$.removeEventListener("abort",pt)},ft=()=>{Qe(),ut()},pt=()=>{qe($.error||new DOMException("AbortError","AbortError")),ut()};$.addEventListener("complete",ft),$.addEventListener("error",pt),$.addEventListener("abort",pt)});be.set($,lt)}($),J($,function le(){return H||(H=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy($,Xe):$)}function Fe($){if($ instanceof IDBRequest)return function xe($){const lt=new Promise((Qe,qe)=>{const ut=()=>{$.removeEventListener("success",ft),$.removeEventListener("error",pt)},ft=()=>{Qe(Fe($.result)),ut()},pt=()=>{qe($.error),ut()};$.addEventListener("success",ft),$.addEventListener("error",pt)});return lt.then(Qe=>{Qe instanceof IDBCursor&&ye.set(Qe,$)}).catch(()=>{}),De.set(lt,$),lt}($);if(ge.has($))return ge.get($);const lt=We($);return lt!==$&&(ge.set($,lt),De.set(lt,$)),lt}const Ce=$=>De.get($);function ct($,lt,{blocked:Qe,upgrade:qe,blocking:ut,terminated:ft}={}){const pt=indexedDB.open($,lt),mt=Fe(pt);return qe&&pt.addEventListener("upgradeneeded",gt=>{qe(Fe(pt.result),gt.oldVersion,gt.newVersion,Fe(pt.transaction))}),Qe&&pt.addEventListener("blocked",()=>Qe()),mt.then(gt=>{ft&&gt.addEventListener("close",()=>ft()),ut&&gt.addEventListener("versionchange",()=>ut())}).catch(()=>{}),mt}function At($,{blocked:lt}={}){const Qe=indexedDB.deleteDatabase($);return lt&&Qe.addEventListener("blocked",()=>lt()),Fe(Qe).then(()=>{})}const yt=["get","getKey","getAll","getAllKeys","count"],st=["put","add","delete","clear"],Be=new Map;function Ye($,lt){if(!($ instanceof IDBDatabase)||lt in $||"string"!=typeof lt)return;if(Be.get(lt))return Be.get(lt);const Qe=lt.replace(/FromIndex$/,""),qe=lt!==Qe,ut=st.includes(Qe);if(!(Qe in(qe?IDBIndex:IDBObjectStore).prototype)||!ut&&!yt.includes(Qe))return;const ft=function(){var pt=(0,m.Z)(function*(mt,...gt){const Le=this.transaction(mt,ut?"readwrite":"readonly");let it=Le.store;return qe&&(it=it.index(gt.shift())),(yield Promise.all([it[Qe](...gt),ut&&Le.done]))[0]});return function(gt){return pt.apply(this,arguments)}}();return Be.set(lt,ft),ft}!function Ke($){Xe=$(Xe)}($=>({...$,get:(lt,Qe,qe)=>Ye(lt,Qe)||$.get(lt,Qe,qe),has:(lt,Qe)=>!!Ye(lt,Qe)||$.has(lt,Qe)}))},5861:(pn,Pe,U)=>{"use strict";function m(H,he,le,we,ye,be,$e){try{var ge=H[be]($e),De=ge.value}catch(xe){return void le(xe)}ge.done?he(De):Promise.resolve(De).then(we,ye)}function J(H){return function(){var he=this,le=arguments;return new Promise(function(we,ye){var be=H.apply(he,le);function $e(De){m(be,we,ye,$e,ge,"next",De)}function ge(De){m(be,we,ye,$e,ge,"throw",De)}$e(void 0)})}}U.d(Pe,{Z:()=>J})}},pn=>{pn(pn.s=8562)}]);